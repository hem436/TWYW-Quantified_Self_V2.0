{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport store from '../store/index.js';\nVue.use(VueRouter);\nconst routes = [{\n  path: '/dashboard',\n  component: () => import('@/components/dash/DashIndex'),\n  children: [{\n    path: '/',\n    name: 'dash.home',\n    component: () => import('@/components/dash/DashHome'),\n    meta: {\n      title: 'Home Dashboard',\n      auth: true\n    }\n  }, {\n    path: 'about',\n    name: 'dash.about',\n    component: () => import('@/views/AboutView')\n  }]\n}, {\n  path: '/login',\n  name: 'login',\n  component: () => import('@/components/LogIn'),\n  meta: {\n    auth: false\n  }\n}, {\n  path: '/signup',\n  name: 'signup',\n  component: () => import('@/components/SignUp'),\n  meta: {\n    auth: false\n  }\n}];\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n});\nrouter.beforeEach(async (to, from, next) => {\n  // instead of having to check every route record with \"WyI1MjJlMDBmMGI3ODE0NTg0YjcwMmEyN2IwZGEwOTFkYiJd.Yv3haw.CCf1H1tUJqdwZmusxwOFuCCLwkI\"\n  // to.matched.some(record => record.meta.requiresAuth)\n  console.log(from.path);\n  console.log(store.state.token.length);\n\n  if (to.meta.auth && store.state.token.length == 83) {\n    // this route requires auth, check if logged in\n    // if not, redirect to login page.\n    // router.push(to.path)\n    next();\n  } else if (to.name === 'login' || to.name === 'signup') {\n    console.log('recursion');\n    next();\n  } else {\n    console.log('recursion');\n    next({\n      name: 'login'\n    });\n  }\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","store","use","routes","path","component","children","name","meta","title","auth","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","console","log","state","token","length"],"sources":["/home/hem436/Documents/Project-MAD2/quantified self v2/Frontend/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport store from '../store/index.js'\n\nVue.use(VueRouter)\n\nconst routes = [{\n    path: '/dashboard',\n    component: () => import('@/components/dash/DashIndex'),\n    children: [{\n        path: '/',\n        name: 'dash.home',\n        component: () => import('@/components/dash/DashHome'),\n        meta: {\n          title: 'Home Dashboard',\n          auth:true\n        }\n      },\n      {\n        path: 'about',\n        name: 'dash.about',\n        component: () => import('@/views/AboutView')\n      }\n    ]\n  },\n  {\n    path: '/login',\n    name: 'login',\n    component: () => import('@/components/LogIn'),\n    meta:{auth:false}\n  },\n  {\n    path: '/signup',\n    name: 'signup',\n    component: () => import('@/components/SignUp'),\n    meta:{auth:false}\n  }\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\nrouter.beforeEach(async(to, from,next) => {\n  // instead of having to check every route record with \"WyI1MjJlMDBmMGI3ODE0NTg0YjcwMmEyN2IwZGEwOTFkYiJd.Yv3haw.CCf1H1tUJqdwZmusxwOFuCCLwkI\"\n  // to.matched.some(record => record.meta.requiresAuth)\n  console.log(from.path)\n  console.log(store.state.token.length)\n  if (to.meta.auth && store.state.token.length==83) {\n    // this route requires auth, check if logged in\n    // if not, redirect to login page.\n    // router.push(to.path)\n    next()\n  }\n  else if(to.name==='login'||to.name==='signup') {console.log('recursion');\n  next()}\n  else {console.log('recursion');\n  next({name:'login'})}\n})\nexport default router\n"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AAEAF,GAAG,CAACG,GAAJ,CAAQF,SAAR;AAEA,MAAMG,MAAM,GAAG,CAAC;EACZC,IAAI,EAAE,YADM;EAEZC,SAAS,EAAE,MAAM,OAAO,6BAAP,CAFL;EAGZC,QAAQ,EAAE,CAAC;IACPF,IAAI,EAAE,GADC;IAEPG,IAAI,EAAE,WAFC;IAGPF,SAAS,EAAE,MAAM,OAAO,4BAAP,CAHV;IAIPG,IAAI,EAAE;MACJC,KAAK,EAAE,gBADH;MAEJC,IAAI,EAAC;IAFD;EAJC,CAAD,EASR;IACEN,IAAI,EAAE,OADR;IAEEG,IAAI,EAAE,YAFR;IAGEF,SAAS,EAAE,MAAM,OAAO,mBAAP;EAHnB,CATQ;AAHE,CAAD,EAmBb;EACED,IAAI,EAAE,QADR;EAEEG,IAAI,EAAE,OAFR;EAGEF,SAAS,EAAE,MAAM,OAAO,oBAAP,CAHnB;EAIEG,IAAI,EAAC;IAACE,IAAI,EAAC;EAAN;AAJP,CAnBa,EAyBb;EACEN,IAAI,EAAE,SADR;EAEEG,IAAI,EAAE,QAFR;EAGEF,SAAS,EAAE,MAAM,OAAO,qBAAP,CAHnB;EAIEG,IAAI,EAAC;IAACE,IAAI,EAAC;EAAN;AAJP,CAzBa,CAAf;AAiCA,MAAMC,MAAM,GAAG,IAAIX,SAAJ,CAAc;EAC3BY,IAAI,EAAE,SADqB;EAE3BC,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFS;EAG3Bb;AAH2B,CAAd,CAAf;AAMAQ,MAAM,CAACM,UAAP,CAAkB,OAAMC,EAAN,EAAUC,IAAV,EAAeC,IAAf,KAAwB;EACxC;EACA;EACAC,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACf,IAAjB;EACAiB,OAAO,CAACC,GAAR,CAAYrB,KAAK,CAACsB,KAAN,CAAYC,KAAZ,CAAkBC,MAA9B;;EACA,IAAIP,EAAE,CAACV,IAAH,CAAQE,IAAR,IAAgBT,KAAK,CAACsB,KAAN,CAAYC,KAAZ,CAAkBC,MAAlB,IAA0B,EAA9C,EAAkD;IAChD;IACA;IACA;IACAL,IAAI;EACL,CALD,MAMK,IAAGF,EAAE,CAACX,IAAH,KAAU,OAAV,IAAmBW,EAAE,CAACX,IAAH,KAAU,QAAhC,EAA0C;IAACc,OAAO,CAACC,GAAR,CAAY,WAAZ;IAChDF,IAAI;EAAG,CADF,MAEA;IAACC,OAAO,CAACC,GAAR,CAAY,WAAZ;IACNF,IAAI,CAAC;MAACb,IAAI,EAAC;IAAN,CAAD,CAAJ;EAAqB;AACtB,CAfD;AAgBA,eAAeI,MAAf"},"metadata":{},"sourceType":"module"}