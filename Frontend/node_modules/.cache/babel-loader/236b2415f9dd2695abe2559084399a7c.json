{"ast":null,"code":"export default {\n  name: 'LogIn',\n\n  data() {\n    return {\n      username: \"\",\n      password: \"\",\n      error: {\n        u: \"\",\n        p: \"\"\n      }\n    };\n  },\n\n  methods: {\n    gen_uerror: function (e) {\n      this.error.u = e;\n    },\n    gen_perror: function (e) {\n      this.error.p = e;\n    },\n    setcookie: function (c) {\n      this.$cookies.set(\"user\", c, {\n        SameSite: \"None\"\n      });\n    },\n    login: function () {\n      var self = this;\n\n      if (this.username_validate && this.password_validate) {\n        let data = {\n          'username': this.username,\n          'password': this.password\n        };\n        console.log(\"going to login\");\n        fetch(\"http://127.0.0.1:5000/api/login\", {\n          method: \"POST\",\n          credentials: 'include',\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Access-Control-Allow-Credentials\": true,\n            \"Access-Control-Allow-Origin\": \"http://localhost:8080\"\n          },\n          body: JSON.stringify(data)\n        }).then(function (response) {\n          if (response.ok) {\n            // window.location.href = '/Dashboard';\n            return response.json();\n          } else {\n            throw \"no response\";\n          }\n        }).then(function (data) {\n          // document.cookie('data', data)\n          self.setcookie(data.username + \";\" + data.auth_token);\n          console.log(data.auth_token);\n        }).catch(error => console.log(error));\n      } else {\n        alert(\"Invalid username or password\");\n      }\n    }\n  },\n  computed: {\n    username_validate: function () {\n      let regEx = /^[0-9a-zA-Z]*$/;\n\n      if (this.username.match(regEx) && this.username.length > 0) {\n        this.gen_uerror(\"\");\n        return true;\n      } else {\n        this.gen_uerror(\"Username must be alphanumeric\");\n        return false;\n      }\n    },\n    password_validate: function () {\n      let regEx = /^(?=.*).{8,}$/;\n\n      if (this.password.match(regEx)) {\n        this.gen_perror(\"\");\n        return true;\n      } else {\n        this.gen_perror('Password should be atleast 8 characters');\n        return false;\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"AAqBA;EACAA,aADA;;EAEAC;IACA;MACAC,YADA;MAEAC,YAFA;MAGAC;QACAC,KADA;QAEAC;MAFA;IAHA;EAQA,CAXA;;EAYAC;IACAC;MACA;IACA,CAHA;IAIAC;MACA;IACA,CANA;IAOAC;MACA;QACAC;MADA;IAGA,CAXA;IAYAC;MACA;;MACA;QACA;UACA,yBADA;UAEA;QAFA;QAIAC;QACAC;UACAC,cADA;UAEAC,sBAFA;UAGAC;YACA,kCADA;YAEA,wCAFA;YAGA;UAHA,CAHA;UAQAC;QARA,GASAC,IATA,CASA;UACA;YACA;YACA;UACA,CAHA,MAGA;YACA;UACA;QACA,CAhBA,EAgBAA,IAhBA,CAgBA;UACA;UACAC;UACAP;QACA,CApBA,EAoBAQ,KApBA,CAoBAjB,2BApBA;MAqBA,CA3BA,MA2BA;QACAkB;MACA;IACA;EA5CA,CAZA;EA0DAC;IACAC;MACA;;MACA;QACA;QACA;MACA,CAHA,MAGA;QACA;QACA;MACA;IACA,CAVA;IAWAC;MACA;;MACA;QACA;QACA;MACA,CAHA,MAGA;QACA;QACA;MACA;IACA;EApBA;AA1DA","names":["name","data","username","password","error","u","p","methods","gen_uerror","gen_perror","setcookie","SameSite","login","console","fetch","method","credentials","headers","body","then","self","catch","alert","computed","username_validate","password_validate"],"sourceRoot":"src/components","sources":["LogIn.vue"],"sourcesContent":["<template>\n<div class=\"loginform\">\n\t<div class=\"row\" align=\"center\">\n\t\t<h1>Welcome to TWYW</h1><br><br>\n\t</div><br>\n\t<div class=\"row\">\n\t\t<div class=\"form col-sm-6 offset-sm-3\">\n\t\t\t<h3>User Login</h3>\n\t\t\t<label for=\"username\">Username:</label><br>\n\t\t\t<input type=\"text\" class=\"form-control\" name=\"username\" v-model='username' required><br>\n\t\t\t<h6 v-if=\"!username_validate\" style=\"font-family: zillaslab,palatino,Palatino Linotype,serif; color:red;\">{{error.u}}</h6> <br>\n\t\t\t<label for=\"password\">Enter your password:</label><br>\n\t\t\t<input type=\"password\" class=\"form-control\" name=\"password\" v-model='password' required><br>\n\t\t\t<button type=\"button\" @click=\"login\">Login</button><br>\n\t\t\t<h6 v-if=\"!password_validate\" style=\"font-family: zillaslab,palatino,Palatino Linotype,serif; color:red;\">{{error.p}}</h6> Not a member? <a href=\"/signup\">Sign Up</a>\n\t\t</div>\n\t</div>\n</div>\n</template>\n\n<script>\nexport default {\n\tname: 'LogIn',\n\tdata() {\n\t\treturn {\n\t\t\tusername: \"\",\n\t\t\tpassword: \"\",\n\t\t\terror: {\n\t\t\t\tu: \"\",\n\t\t\t\tp: \"\"\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tgen_uerror: function(e) {\n\t\t\tthis.error.u = e;\n\t\t},\n\t\tgen_perror: function(e) {\n\t\t\tthis.error.p = e;\n\t\t},\n\t\tsetcookie: function(c) {\n\t\t\tthis.$cookies.set(\"user\", c, {\n\t\t\t\tSameSite: \"None\"\n\t\t\t});\n\t\t},\n\t\tlogin: function() {\n\t\t\tvar self = this;\n\t\t\tif(this.username_validate && this.password_validate) {\n\t\t\t\tlet data = {\n\t\t\t\t\t'username': this.username,\n\t\t\t\t\t'password': this.password\n\t\t\t\t};\n\t\t\t\tconsole.log(\"going to login\");\n\t\t\t\tfetch(\"http://127.0.0.1:5000/api/login\", {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\tcredentials: 'include',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t\"Access-Control-Allow-Credentials\": true,\n\t\t\t\t\t\t\"Access-Control-Allow-Origin\": \"http://localhost:8080\",\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify(data)\n\t\t\t\t}).then(function(response) {\n\t\t\t\t\tif(response.ok) {\n\t\t\t\t\t\t// window.location.href = '/Dashboard';\n\t\t\t\t\t\treturn response.json();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow \"no response\"\n\t\t\t\t\t}\n\t\t\t\t}).then(function(data) {\n\t\t\t\t\t// document.cookie('data', data)\n\t\t\t\t\tself.setcookie(data.username + \";\" + data.auth_token);\n\t\t\t\t\tconsole.log(data.auth_token);\n\t\t\t\t}).catch(error => console.log(error))\n\t\t\t} else {\n\t\t\t\talert(\"Invalid username or password\");\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tusername_validate: function() {\n\t\t\tlet regEx = /^[0-9a-zA-Z]*$/;\n\t\t\tif(this.username.match(regEx) && (this.username.length > 0)) {\n\t\t\t\tthis.gen_uerror(\"\")\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tthis.gen_uerror(\"Username must be alphanumeric\")\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tpassword_validate: function() {\n\t\t\tlet regEx = /^(?=.*).{8,}$/;\n\t\t\tif(this.password.match(regEx)) {\n\t\t\t\tthis.gen_perror(\"\");\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tthis.gen_perror('Password should be atleast 8 characters');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style>\n\n</style>\n"]},"metadata":{},"sourceType":"module"}