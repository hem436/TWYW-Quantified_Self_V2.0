"use strict";(self["webpackChunkvue_test"]=self["webpackChunkvue_test"]||[]).push([[733],{6733:function(t,e,s){s.r(e),s.d(e,{default:function(){return n}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"update_tracker"},[t._m(0),e("br"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-8 offset-2 h5"},[t._m(1),t._m(2),t._m(3),e("div",{staticClass:"row m-3"},[e("div",{staticClass:"col d-flex justify-content-center"},[e("button",{attrs:{type:"submit",id:"check"},on:{click:t.check}},[t._v(" Check ")]),e("button",{attrs:{type:"submit",id:"import",disabled:""},on:{click:t.imptracker}},[t._v(" Import ")])])]),e("div",{staticClass:"content"},[t._v(" "+t._s(t.csv_data)+" ")])])])])},c=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-6 offset-3 d-flex justify-content-center"},[e("h1",[t._v("Import Trackers")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row m-3"},[e("div",{staticClass:"col-6"},[t._v(" Upload csv file: ")]),e("div",{staticClass:"col-6"},[e("input",{attrs:{type:"file",id:"csv_file"}})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"d-flex justify-content-center h4"},[t._v(" Format: ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row m-3"},[e("div",{staticClass:"col-8 offset-2"},[e("img",{staticClass:"img img-fluid",attrs:{src:s(2168),alt:""}})])])}],a={data(){return{csv_data:"",validate:!1}},methods:{imptracker:async function(){let t=document.getElementById("csv_file");if(this.validate){this.validate=!1;let e=await t.files[0].text();console.log(e);let s=e.split("\r\n").map((t=>t.replaceAll('"',"").split(","))).slice(1,-3);console.log(s),this.addtracker(s)}},addtracker(t){if(console.log(t),0==t[0][1].length)return void(this.csv_data="Enter valid Tracker name");if(0==t[2][1].length)return void(this.csv_data="Select correct tracker type");if("Multiple-choice"==t[2][1]&&t[3][1].length<=1)return void(this.csv_data="options should be more than 1");this.csv_data="";let e={user_id:parseInt(this.$store.state.user_id),tracker_name:t[0][1],tracker_description:t[1][1],tracker_type:t[2][1],settings:t[3][1]};console.log(e),fetch("http://localhost:5000/api/tracker",{method:"POST",headers:{"Content-Type":"application/json","A-T":this.$Ciphers.decode("Vigenere Cipher",this.$cookies.get("user")||"",["Pwd"]).split(";")[2]||""},body:JSON.stringify(e)}).then((t=>{if(!t.ok||t.redirected)throw"401"==t.code&&this.$router.push("/login"),{e_code:t.status,error:t.statusText};alert("Added")})).catch((t=>{console.log(t),console.log(t.error+" kindly re-login")}))},check(){let t=document.getElementById("csv_file");t.files.length>0?(this.validate=!0,document.getElementById("import").disabled=!1):(console.log("else executed"),this.csv_data="Please select a correct csv file")}}},r=a,l=s(1001),o=(0,l.Z)(r,i,c,!1,null,null,null),n=o.exports},2168:function(t,e,s){t.exports=s.p+"img/tracker_fields.2b35e2c2.jpg"}}]);
//# sourceMappingURL=733.8a37f016.js.map