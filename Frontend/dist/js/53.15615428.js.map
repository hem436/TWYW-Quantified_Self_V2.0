{"version":3,"file":"js/53.15615428.js","mappings":"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","sources":["webpack://vue-test/./src/components/ImportLogs.vue","webpack://vue-test/src/components/ImportLogs.vue","webpack://vue-test/./src/components/ImportLogs.vue?509a","webpack://vue-test/./src/components/ImportLogs.vue?1f21"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"update_log\"},[_vm._m(0),_c('br'),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-8 offset-2 h5\"},[_vm._m(1),_vm._m(2),_vm._m(3),_c('div',{staticClass:\"row m-3\"},[_c('div',{staticClass:\"col d-flex justify-content-center\"},[_c('button',{attrs:{\"type\":\"submit\",\"id\":\"check\"},on:{\"click\":_vm.check}},[_vm._v(\" Check \")]),_c('button',{attrs:{\"type\":\"submit\",\"id\":\"import\",\"disabled\":\"\"},on:{\"click\":_vm.implog}},[_vm._v(\" Import \")])])]),_c('div',{staticClass:\"content\"},[_vm._v(\" \"+_vm._s(_vm.csv_data)+\" \")])])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-6 offset-3 d-flex justify-content-center\"},[_c('h1',[_vm._v(\"Import Logs\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row m-3\"},[_c('div',{staticClass:\"col-6\"},[_vm._v(\" Upload csv file: \")]),_c('div',{staticClass:\"col-6\"},[_c('input',{attrs:{\"type\":\"file\",\"id\":\"csv_file\"}})])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"d-flex justify-content-center h4\"},[_vm._v(\" Format: \")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row m-3\"},[_c('div',{staticClass:\"col-8 offset-2\"},[_c('img',{staticClass:\"img img-fluid\",attrs:{\"src\":require(\"../../public/img/log_fields.jpg\"),\"alt\":\"\"}})])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"update_log\">\n    <div class=\"row\">\n      <div class=\"col-6 offset-3 d-flex justify-content-center\">\n        <h1>Import Logs</h1>\n      </div>\n    </div>\n    <br />\n    <div class=\"row\">\n      <div class=\"col-8 offset-2 h5 \">\n        <div class=\"row m-3\">\n          <div class=\"col-6 \">\n            Upload csv file:\n          </div>\n          <div class=\"col-6\">\n            <input type=\"file\" id=\"csv_file\" />\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"d-flex justify-content-center h4\">\n            Format:\n          </div>\n        </div>\n\n        <div class=\"row m-3\">\n          <div class=\"col-8 offset-2\">\n            <img\n              class=\"img img-fluid\"\n              src=\"../../public/img/log_fields.jpg\"\n              alt=\"\"\n            />\n          </div>\n        </div>\n        <!-- ############# -->\n\n        <!-- ####### -->\n\n        <div class=\"row m-3 \">\n          <div class=\"col d-flex justify-content-center\">\n            <button type=\"submit\" id=\"check\" @click=\"check\">\n              Check\n            </button>\n            <button type=\"submit\" id=\"import\" @click=\"implog\" disabled>\n              Import\n            </button>\n          </div>\n        </div>\n        <div class=\"content\">\n          {{ csv_data }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      csv_data: \"\",\n      validate: false\n    };\n  },\n  methods: {\n    implog: async function() {\n      let file_input = document.getElementById(\"csv_file\");\n      if (this.validate) {\n        this.validate = false;\n        let file = await file_input.files[0].text();\n\n        console.log(file);\n        let arr = file\n          .split(\"\\r\\n\")\n          .map(a => a.replaceAll('\"', \"\").split(\",\"))\n          .slice(3, -1);\n\n        console.log(arr);\n        this.addlog(arr);\n      }\n\n      //-------------data----------------\n    },\n    addlog(obj) {\n      //----------validation----------\n      console.log(obj);\n      if (obj[0][1].length == 0) {\n        this.csv_data = \"Enter valid log name\";\n        return;\n      } else if (obj[2][1].length == 0) {\n        this.csv_data = \"Select correct log type\";\n        return;\n      } else if (obj[2][1] == \"Multiple-choice\" && obj[3][1].length <= 1) {\n        this.csv_data = \"options should be more than 1\";\n        return;\n      } else {\n        this.csv_data = \"\";\n      }\n      //-------------data----------------\n      let data = {\n        user_id: parseInt(this.$store.state.user_id),\n        log_name: obj[0][1],\n        log_description: obj[1][1],\n        log_type: obj[2][1],\n        settings: obj[3][1]\n      };\n      console.log(data);\n      fetch(\"http://localhost:5000/api/log\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"A-T\":\n            this.$Ciphers\n              .decode(\"Vigenere Cipher\", this.$cookies.get(\"user\") || \"\", [\n                \"Pwd\"\n              ])\n              .split(\";\")[2] || \"\"\n        },\n        body: JSON.stringify(data)\n      })\n        .then(response => {\n          if (response.ok && !response.redirected) {\n            alert(\"Added\");\n          } else {\n            if (response.code == \"401\") {\n              this.$router.push(\"/login\");\n            }\n            throw {\n              e_code: response.status,\n              error: response.statusText\n            };\n          }\n        })\n        .catch(rej => {\n          console.log(rej);\n          console.log(rej.error + \" kindly re-login\");\n          return;\n        });\n    },\n    check() {\n      let file_input = document.getElementById(\"csv_file\");\n      // console.log(file_input);\n      if (file_input.files.length > 0) {\n        this.validate = true;\n        document.getElementById(\"import\").disabled = false;\n      } else {\n        console.log(\"else executed\");\n        this.csv_data = \"Please select a correct csv file\";\n      }\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ImportLogs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ImportLogs.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ImportLogs.vue?vue&type=template&id=68904ad8&\"\nimport script from \"./ImportLogs.vue?vue&type=script&lang=js&\"\nexport * from \"./ImportLogs.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_m","attrs","on","check","_v","implog","_s","csv_data","staticRenderFns","require","data","validate","methods","console","split","map","a","slice","addlog","user_id","log_name","log_description","log_type","settings","fetch","method","headers","decode","body","then","response","e_code","error","alert","catch","rej","document","component"],"sourceRoot":""}