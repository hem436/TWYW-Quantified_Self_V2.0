{"version":3,"file":"js/32.e7dc42c7.js","mappings":"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","sources":["webpack://vue-test/./src/components/ImportLogs.vue","webpack://vue-test/src/components/ImportLogs.vue","webpack://vue-test/./src/components/ImportLogs.vue?509a","webpack://vue-test/./src/components/ImportLogs.vue?1f21"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"update_log\"},[_vm._m(0),_c('br'),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-8 offset-2 h5\"},[_vm._m(1),_vm._m(2),_vm._m(3),_c('br'),_c('div',{staticClass:\"row m-3\"},[_c('div',{staticClass:\"col d-flex justify-content-center\"},[_c('button',{attrs:{\"type\":\"submit\",\"id\":\"check\"},on:{\"click\":_vm.check}},[_vm._v(\" Check \")]),_c('button',{attrs:{\"type\":\"submit\",\"id\":\"import\",\"disabled\":\"\"},on:{\"click\":_vm.implog}},[_vm._v(\" Import \")])])]),_c('div',{staticClass:\"content\"},[_vm._v(\" \"+_vm._s(_vm.csv_data)+\" \")])])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-6 offset-3 d-flex justify-content-center\"},[_c('h1',[_vm._v(\"Import Logs\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row m-3\"},[_c('div',{staticClass:\"col-6\"},[_vm._v(\" Upload csv file: \")]),_c('div',{staticClass:\"col-6\"},[_c('input',{attrs:{\"type\":\"file\",\"id\":\"csv_file\"}})])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"d-flex justify-content-center h4\"},[_vm._v(\" Format: \")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row m-3\"},[_c('div',{staticClass:\"col-8 offset-2\"},[_c('img',{staticClass:\"img img-fluid\",staticStyle:{\"scale\":\"1.5\"},attrs:{\"src\":require(\"../../public/img/log_fields.png\"),\"alt\":\"\"}})])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"update_log\">\n    <div class=\"row\">\n      <div class=\"col-6 offset-3 d-flex justify-content-center\">\n        <h1>Import Logs</h1>\n      </div>\n    </div>\n    <br />\n    <div class=\"row\">\n      <div class=\"col-8 offset-2 h5 \">\n        <div class=\"row m-3\">\n          <div class=\"col-6 \">\n            Upload csv file:\n          </div>\n          <div class=\"col-6\">\n            <input type=\"file\" id=\"csv_file\" />\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"d-flex justify-content-center h4\">\n            Format:\n          </div>\n        </div>\n\n        <div class=\"row m-3\">\n          <div class=\"col-8 offset-2\">\n            <img\n              class=\"img img-fluid\"\n              src=\"../../public/img/log_fields.png\"\n              alt=\"\"\n              style=\"scale:1.5\"\n            />\n          </div>\n        </div>\n        <br />\n        <!-- ############# -->\n\n        <!-- ####### -->\n\n        <div class=\"row m-3 \">\n          <div class=\"col d-flex justify-content-center\">\n            <button type=\"submit\" id=\"check\" @click=\"check\">\n              Check\n            </button>\n            <button type=\"submit\" id=\"import\" @click=\"implog\" disabled>\n              Import\n            </button>\n          </div>\n        </div>\n        <div class=\"content\">\n          {{ csv_data }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      csv_data: \"\",\n      validate: false\n    };\n  },\n  methods: {\n    implog: async function() {\n      let file_input = document.getElementById(\"csv_file\");\n      if (this.validate) {\n        this.validate = false;\n        let file = await file_input.files[0].text();\n\n        console.log(file);\n        let arr = file\n          .split(\"\\n\")\n          .map(a =>\n            a\n              .replaceAll('\"', \"\")\n              .replace(\"\\r\", \"\")\n              .split(\",\")\n          )\n          .slice(1);\n        console.log(file.split(\"\\n\"));\n        arr.forEach(item => {\n          console.log(\"item\");\n          console.log(item);\n          this.addlog(item);\n        });\n      }\n\n      //-------------data----------------\n    },\n    addlog: async function(obj) {\n      if (obj.len == 0) {\n        console.log(\"no fields available\");\n        return;\n      }\n      let tid = obj[4];\n      let ldatetime = obj[1];\n      let lnote = obj[2];\n      let lval = obj[3];\n      //----------validation----------\n      if (tid == \"\") {\n        this.csv_data = \"Enter valid tracker id\";\n        return;\n      } else if (lval.length == 0) {\n        this.csv_data = \"Enter a log value\";\n        return;\n      } else {\n        this.csv_data = \"\";\n      }\n      //#------validation--------\n      let currentdate = new Date();\n      let mstr = [\n        \"Jan\",\n        \"Feb\",\n        \"Mar\",\n        \"Apr\",\n        \"May\",\n        \"Jun\",\n        \"Jul\",\n        \"Aug\",\n        \"Sep\",\n        \"Oct\",\n        \"Nov\",\n        \"Dec\"\n      ];\n      let datetime =\n        currentdate.getDate() +\n        \"/\" +\n        mstr[currentdate.getMonth()] +\n        \"/\" +\n        currentdate.getFullYear() +\n        \", \" +\n        currentdate.getHours() +\n        \":\" +\n        currentdate.getMinutes() +\n        \":\" +\n        currentdate.getSeconds() +\n        \".\" +\n        currentdate.getMilliseconds();\n      if (/^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}.*$/.test(ldatetime)) {\n        datetime = this.$options.filters.date_format(ldatetime);\n      }\n      let data = {\n        tracker_id: tid,\n        log_value: lval,\n        log_note: lnote,\n        log_datetime: datetime\n      };\n      console.log(data);\n      fetch(process.env.VUE_APP_BACKEND_URL + \"api/log\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"A-T\":\n            this.$Ciphers\n              .decode(\"Vigenere Cipher\", this.$cookies.get(\"user\") || \"\", [\n                \"Pwd\"\n              ])\n              .split(\";\")[2] || \"\"\n        },\n        body: JSON.stringify(data)\n      })\n        .then(response => {\n          if (response.ok && !response.redirected) {\n            this.csv_data = \"Logged\";\n            console.log(\"Logged\");\n          } else {\n            throw {\n              e_code: response.status,\n              error: response.statusText\n            };\n          }\n        })\n        .catch(rej => {\n          console.log(rej);\n          console.log(rej.error + \" kindly re-login\");\n          this.$router.go(\"/\");\n        });\n    },\n    check() {\n      let file_input = document.getElementById(\"csv_file\");\n      if (\n        file_input.files.length > 0 &&\n        file_input.files[0].type == \"text/csv\"\n      ) {\n        this.validate = true;\n        this.csv_data = \"\";\n        document.getElementById(\"import\").disabled = false;\n      } else {\n        console.log(\"else executed\");\n        this.csv_data = \"Please select a correct csv file\";\n      }\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ImportLogs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ImportLogs.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ImportLogs.vue?vue&type=template&id=52919216&\"\nimport script from \"./ImportLogs.vue?vue&type=script&lang=js&\"\nexport * from \"./ImportLogs.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_m","attrs","on","check","_v","implog","_s","csv_data","staticRenderFns","staticStyle","require","data","validate","methods","console","split","map","a","replaceAll","replace","slice","arr","addlog","currentdate","mstr","datetime","tracker_id","log_value","log_note","log_datetime","fetch","method","headers","decode","body","then","response","e_code","error","catch","rej","file_input","document","component"],"sourceRoot":""}