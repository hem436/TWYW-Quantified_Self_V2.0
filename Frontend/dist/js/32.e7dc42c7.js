"use strict";(self["webpackChunkvue_test"]=self["webpackChunkvue_test"]||[]).push([[32],{9032:function(t,e,s){s.r(e),s.d(e,{default:function(){return r}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"update_log"},[t._m(0),e("br"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-8 offset-2 h5"},[t._m(1),t._m(2),t._m(3),e("br"),e("div",{staticClass:"row m-3"},[e("div",{staticClass:"col d-flex justify-content-center"},[e("button",{attrs:{type:"submit",id:"check"},on:{click:t.check}},[t._v(" Check ")]),e("button",{attrs:{type:"submit",id:"import",disabled:""},on:{click:t.implog}},[t._v(" Import ")])])]),e("div",{staticClass:"content"},[t._v(" "+t._s(t.csv_data)+" ")])])])])},l=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-6 offset-3 d-flex justify-content-center"},[e("h1",[t._v("Import Logs")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row m-3"},[e("div",{staticClass:"col-6"},[t._v(" Upload csv file: ")]),e("div",{staticClass:"col-6"},[e("input",{attrs:{type:"file",id:"csv_file"}})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"d-flex justify-content-center h4"},[t._v(" Format: ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row m-3"},[e("div",{staticClass:"col-8 offset-2"},[e("img",{staticClass:"img img-fluid",staticStyle:{scale:"1.5"},attrs:{src:s(7390),alt:""}})])])}],o={data(){return{csv_data:"",validate:!1}},methods:{implog:async function(){let t=document.getElementById("csv_file");if(this.validate){this.validate=!1;let e=await t.files[0].text();console.log(e);let s=e.split("\n").map((t=>t.replaceAll('"',"").replace("\r","").split(","))).slice(1);console.log(e.split("\n")),s.forEach((t=>{console.log("item"),console.log(t),this.addlog(t)}))}},addlog:async function(t){if(0==t.len)return void console.log("no fields available");let e=t[4],s=t[1],i=t[2],l=t[3];if(""==e)return void(this.csv_data="Enter valid tracker id");if(0==l.length)return void(this.csv_data="Enter a log value");this.csv_data="";let o=new Date,a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=o.getDate()+"/"+a[o.getMonth()]+"/"+o.getFullYear()+", "+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds()+"."+o.getMilliseconds();/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}.*$/.test(s)&&(c=this.$options.filters.date_format(s));let n={tracker_id:e,log_value:l,log_note:i,log_datetime:c};console.log(n),fetch("http://localhost:5000/api/log",{method:"POST",headers:{"Content-Type":"application/json","A-T":this.$Ciphers.decode("Vigenere Cipher",this.$cookies.get("user")||"",["Pwd"]).split(";")[2]||""},body:JSON.stringify(n)}).then((t=>{if(!t.ok||t.redirected)throw{e_code:t.status,error:t.statusText};this.csv_data="Logged",console.log("Logged")})).catch((t=>{console.log(t),console.log(t.error+" kindly re-login"),this.$router.go("/")}))},check(){let t=document.getElementById("csv_file");t.files.length>0&&"text/csv"==t.files[0].type?(this.validate=!0,this.csv_data="",document.getElementById("import").disabled=!1):(console.log("else executed"),this.csv_data="Please select a correct csv file")}}},a=o,c=s(1001),n=(0,c.Z)(a,i,l,!1,null,null,null),r=n.exports},7390:function(t,e,s){t.exports=s.p+"img/log_fields.9ba82697.png"}}]);
//# sourceMappingURL=32.e7dc42c7.js.map