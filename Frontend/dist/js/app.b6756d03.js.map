{"version":3,"file":"js/app.b6756d03.js","mappings":"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","sources":["webpack://vue-test/./src/assets/echarts.js","webpack://vue-test/./src/App.vue","webpack://vue-test/src/App.vue","webpack://vue-test/./src/App.vue?51dd","webpack://vue-test/./src/App.vue?0e40","webpack://vue-test/./src/registerServiceWorker.js","webpack://vue-test/./src/assets/ciphers.js","webpack://vue-test/./src/store/index.js","webpack://vue-test/./src/router/index.js","webpack://vue-test/./src/main.js","webpack://vue-test/webpack/bootstrap","webpack://vue-test/webpack/runtime/chunk loaded","webpack://vue-test/webpack/runtime/compat get default export","webpack://vue-test/webpack/runtime/define property getters","webpack://vue-test/webpack/runtime/ensure chunk","webpack://vue-test/webpack/runtime/get javascript chunk filename","webpack://vue-test/webpack/runtime/get mini-css chunk filename","webpack://vue-test/webpack/runtime/global","webpack://vue-test/webpack/runtime/hasOwnProperty shorthand","webpack://vue-test/webpack/runtime/load script","webpack://vue-test/webpack/runtime/make namespace object","webpack://vue-test/webpack/runtime/publicPath","webpack://vue-test/webpack/runtime/css loading","webpack://vue-test/webpack/runtime/jsonp chunk loading","webpack://vue-test/webpack/startup"],"sourcesContent":["\n\n/* eslint-disable */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) : typeof define === 'function' && define.amd ? define(['exports'], factory) : factory(global.echarts = {});\n})(this, function (exports) {\n  'use strict';\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  function __extends(d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  }\n  /** @deprecated */\n\n  /** @deprecated */\n\n\n  var Browser = function () {\n    function Browser() {\n      this.firefox = false;\n      this.ie = false;\n      this.edge = false;\n      this.newEdge = false;\n      this.weChat = false;\n    }\n\n    return Browser;\n  }();\n\n  var Env = function () {\n    function Env() {\n      this.browser = new Browser();\n      this.node = false;\n      this.wxa = false;\n      this.worker = false;\n      this.svgSupported = false;\n      this.touchEventsSupported = false;\n      this.pointerEventsSupported = false;\n      this.domSupported = false;\n      this.transformSupported = false;\n      this.transform3dSupported = false;\n      this.hasGlobalWindow = typeof window !== 'undefined';\n    }\n\n    return Env;\n  }();\n\n  var env = new Env();\n\n  if (typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function') {\n    env.wxa = true;\n    env.touchEventsSupported = true;\n  } else if (typeof document === 'undefined' && typeof self !== 'undefined') {\n    env.worker = true;\n  } else if (typeof navigator === 'undefined') {\n    env.node = true;\n    env.svgSupported = true;\n  } else {\n    detect(navigator.userAgent, env);\n  }\n\n  function detect(ua, env) {\n    var browser = env.browser;\n    var firefox = ua.match(/Firefox\\/([\\d.]+)/);\n    var ie = ua.match(/MSIE\\s([\\d.]+)/) || ua.match(/Trident\\/.+?rv:(([\\d.]+))/);\n    var edge = ua.match(/Edge?\\/([\\d.]+)/);\n    var weChat = /micromessenger/i.test(ua);\n\n    if (firefox) {\n      browser.firefox = true;\n      browser.version = firefox[1];\n    }\n\n    if (ie) {\n      browser.ie = true;\n      browser.version = ie[1];\n    }\n\n    if (edge) {\n      browser.edge = true;\n      browser.version = edge[1];\n      browser.newEdge = +edge[1].split('.')[0] > 18;\n    }\n\n    if (weChat) {\n      browser.weChat = true;\n    }\n\n    env.svgSupported = typeof SVGRect !== 'undefined';\n    env.touchEventsSupported = 'ontouchstart' in window && !browser.ie && !browser.edge;\n    env.pointerEventsSupported = 'onpointerdown' in window && (browser.edge || browser.ie && +browser.version >= 11);\n    env.domSupported = typeof document !== 'undefined';\n    var style = document.documentElement.style;\n    env.transform3dSupported = (browser.ie && 'transition' in style || browser.edge || 'WebKitCSSMatrix' in window && 'm11' in new WebKitCSSMatrix() || 'MozPerspective' in style) && !('OTransition' in style);\n    env.transformSupported = env.transform3dSupported || browser.ie && +browser.version >= 9;\n  }\n\n  var DEFAULT_FONT_SIZE = 12;\n  var DEFAULT_FONT_FAMILY = 'sans-serif';\n  var DEFAULT_FONT = DEFAULT_FONT_SIZE + \"px \" + DEFAULT_FONT_FAMILY;\n  var OFFSET = 20;\n  var SCALE = 100;\n  var defaultWidthMapStr = \"007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\\\\\WQb\\\\0FWLg\\\\bWb\\\\WQ\\\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\\\FFF5.5N\";\n\n  function getTextWidthMap(mapStr) {\n    var map = {};\n\n    if (typeof JSON === 'undefined') {\n      return map;\n    }\n\n    for (var i = 0; i < mapStr.length; i++) {\n      var char = String.fromCharCode(i + 32);\n      var size = (mapStr.charCodeAt(i) - OFFSET) / SCALE;\n      map[char] = size;\n    }\n\n    return map;\n  }\n\n  var DEFAULT_TEXT_WIDTH_MAP = getTextWidthMap(defaultWidthMapStr);\n  var platformApi = {\n    createCanvas: function () {\n      return typeof document !== 'undefined' && document.createElement('canvas');\n    },\n    measureText: function () {\n      var _ctx;\n\n      var _cachedFont;\n\n      return function (text, font) {\n        if (!_ctx) {\n          var canvas = platformApi.createCanvas();\n          _ctx = canvas && canvas.getContext('2d');\n        }\n\n        if (_ctx) {\n          if (_cachedFont !== font) {\n            _cachedFont = _ctx.font = font || DEFAULT_FONT;\n          }\n\n          return _ctx.measureText(text);\n        } else {\n          text = text || '';\n          font = font || DEFAULT_FONT;\n          var res = /^([0-9]*?)px$/.exec(font);\n          var fontSize = +(res && res[1]) || DEFAULT_FONT_SIZE;\n          var width = 0;\n\n          if (font.indexOf('mono') >= 0) {\n            width = fontSize * text.length;\n          } else {\n            for (var i = 0; i < text.length; i++) {\n              var preCalcWidth = DEFAULT_TEXT_WIDTH_MAP[text[i]];\n              width += preCalcWidth == null ? fontSize : preCalcWidth * fontSize;\n            }\n          }\n\n          return {\n            width: width\n          };\n        }\n      };\n    }(),\n    loadImage: function (src, onload, onerror) {\n      var image = new Image();\n      image.onload = onload;\n      image.onerror = onerror;\n      image.src = src;\n      return image;\n    }\n  };\n\n  function setPlatformAPI(newPlatformApis) {\n    for (var key in platformApi) {\n      if (newPlatformApis[key]) {\n        platformApi[key] = newPlatformApis[key];\n      }\n    }\n  }\n\n  var BUILTIN_OBJECT = reduce(['Function', 'RegExp', 'Date', 'Error', 'CanvasGradient', 'CanvasPattern', 'Image', 'Canvas'], function (obj, val) {\n    obj['[object ' + val + ']'] = true;\n    return obj;\n  }, {});\n  var TYPED_ARRAY = reduce(['Int8', 'Uint8', 'Uint8Clamped', 'Int16', 'Uint16', 'Int32', 'Uint32', 'Float32', 'Float64'], function (obj, val) {\n    obj['[object ' + val + 'Array]'] = true;\n    return obj;\n  }, {});\n  var objToString = Object.prototype.toString;\n  var arrayProto = Array.prototype;\n  var nativeForEach = arrayProto.forEach;\n  var nativeFilter = arrayProto.filter;\n  var nativeSlice = arrayProto.slice;\n  var nativeMap = arrayProto.map;\n\n  var ctorFunction = function () {}.constructor;\n\n  var protoFunction = ctorFunction ? ctorFunction.prototype : null;\n  var protoKey = '__proto__';\n  var idStart = 0x0907;\n\n  function guid() {\n    return idStart++;\n  }\n\n  function logError() {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (typeof console !== 'undefined') {\n      console.error.apply(console, args);\n    }\n  }\n\n  function clone(source) {\n    if (source == null || typeof source !== 'object') {\n      return source;\n    }\n\n    var result = source;\n    var typeStr = objToString.call(source);\n\n    if (typeStr === '[object Array]') {\n      if (!isPrimitive(source)) {\n        result = [];\n\n        for (var i = 0, len = source.length; i < len; i++) {\n          result[i] = clone(source[i]);\n        }\n      }\n    } else if (TYPED_ARRAY[typeStr]) {\n      if (!isPrimitive(source)) {\n        var Ctor = source.constructor;\n\n        if (Ctor.from) {\n          result = Ctor.from(source);\n        } else {\n          result = new Ctor(source.length);\n\n          for (var i = 0, len = source.length; i < len; i++) {\n            result[i] = source[i];\n          }\n        }\n      }\n    } else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\n      result = {};\n\n      for (var key in source) {\n        if (source.hasOwnProperty(key) && key !== protoKey) {\n          result[key] = clone(source[key]);\n        }\n      }\n    }\n\n    return result;\n  }\n\n  function merge(target, source, overwrite) {\n    if (!isObject(source) || !isObject(target)) {\n      return overwrite ? clone(source) : target;\n    }\n\n    for (var key in source) {\n      if (source.hasOwnProperty(key) && key !== protoKey) {\n        var targetProp = target[key];\n        var sourceProp = source[key];\n\n        if (isObject(sourceProp) && isObject(targetProp) && !isArray(sourceProp) && !isArray(targetProp) && !isDom(sourceProp) && !isDom(targetProp) && !isBuiltInObject(sourceProp) && !isBuiltInObject(targetProp) && !isPrimitive(sourceProp) && !isPrimitive(targetProp)) {\n          merge(targetProp, sourceProp, overwrite);\n        } else if (overwrite || !(key in target)) {\n          target[key] = clone(source[key]);\n        }\n      }\n    }\n\n    return target;\n  }\n\n  function mergeAll(targetAndSources, overwrite) {\n    var result = targetAndSources[0];\n\n    for (var i = 1, len = targetAndSources.length; i < len; i++) {\n      result = merge(result, targetAndSources[i], overwrite);\n    }\n\n    return result;\n  }\n\n  function extend(target, source) {\n    if (Object.assign) {\n      Object.assign(target, source);\n    } else {\n      for (var key in source) {\n        if (source.hasOwnProperty(key) && key !== protoKey) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  }\n\n  function defaults(target, source, overlay) {\n    var keysArr = keys(source);\n\n    for (var i = 0; i < keysArr.length; i++) {\n      var key = keysArr[i];\n\n      if (overlay ? source[key] != null : target[key] == null) {\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  var createCanvas = platformApi.createCanvas;\n\n  function indexOf(array, value) {\n    if (array) {\n      if (array.indexOf) {\n        return array.indexOf(value);\n      }\n\n      for (var i = 0, len = array.length; i < len; i++) {\n        if (array[i] === value) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  function inherits(clazz, baseClazz) {\n    var clazzPrototype = clazz.prototype;\n\n    function F() {}\n\n    F.prototype = baseClazz.prototype;\n    clazz.prototype = new F();\n\n    for (var prop in clazzPrototype) {\n      if (clazzPrototype.hasOwnProperty(prop)) {\n        clazz.prototype[prop] = clazzPrototype[prop];\n      }\n    }\n\n    clazz.prototype.constructor = clazz;\n    clazz.superClass = baseClazz;\n  }\n\n  function mixin(target, source, override) {\n    target = 'prototype' in target ? target.prototype : target;\n    source = 'prototype' in source ? source.prototype : source;\n\n    if (Object.getOwnPropertyNames) {\n      var keyList = Object.getOwnPropertyNames(source);\n\n      for (var i = 0; i < keyList.length; i++) {\n        var key = keyList[i];\n\n        if (key !== 'constructor') {\n          if (override ? source[key] != null : target[key] == null) {\n            target[key] = source[key];\n          }\n        }\n      }\n    } else {\n      defaults(target, source, override);\n    }\n  }\n\n  function isArrayLike(data) {\n    if (!data) {\n      return false;\n    }\n\n    if (typeof data === 'string') {\n      return false;\n    }\n\n    return typeof data.length === 'number';\n  }\n\n  function each(arr, cb, context) {\n    if (!(arr && cb)) {\n      return;\n    }\n\n    if (arr.forEach && arr.forEach === nativeForEach) {\n      arr.forEach(cb, context);\n    } else if (arr.length === +arr.length) {\n      for (var i = 0, len = arr.length; i < len; i++) {\n        cb.call(context, arr[i], i, arr);\n      }\n    } else {\n      for (var key in arr) {\n        if (arr.hasOwnProperty(key)) {\n          cb.call(context, arr[key], key, arr);\n        }\n      }\n    }\n  }\n\n  function map(arr, cb, context) {\n    if (!arr) {\n      return [];\n    }\n\n    if (!cb) {\n      return slice(arr);\n    }\n\n    if (arr.map && arr.map === nativeMap) {\n      return arr.map(cb, context);\n    } else {\n      var result = [];\n\n      for (var i = 0, len = arr.length; i < len; i++) {\n        result.push(cb.call(context, arr[i], i, arr));\n      }\n\n      return result;\n    }\n  }\n\n  function reduce(arr, cb, memo, context) {\n    if (!(arr && cb)) {\n      return;\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      memo = cb.call(context, memo, arr[i], i, arr);\n    }\n\n    return memo;\n  }\n\n  function filter(arr, cb, context) {\n    if (!arr) {\n      return [];\n    }\n\n    if (!cb) {\n      return slice(arr);\n    }\n\n    if (arr.filter && arr.filter === nativeFilter) {\n      return arr.filter(cb, context);\n    } else {\n      var result = [];\n\n      for (var i = 0, len = arr.length; i < len; i++) {\n        if (cb.call(context, arr[i], i, arr)) {\n          result.push(arr[i]);\n        }\n      }\n\n      return result;\n    }\n  }\n\n  function find(arr, cb, context) {\n    if (!(arr && cb)) {\n      return;\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      if (cb.call(context, arr[i], i, arr)) {\n        return arr[i];\n      }\n    }\n  }\n\n  function keys(obj) {\n    if (!obj) {\n      return [];\n    }\n\n    if (Object.keys) {\n      return Object.keys(obj);\n    }\n\n    var keyList = [];\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        keyList.push(key);\n      }\n    }\n\n    return keyList;\n  }\n\n  function bindPolyfill(func, context) {\n    var args = [];\n\n    for (var _i = 2; _i < arguments.length; _i++) {\n      args[_i - 2] = arguments[_i];\n    }\n\n    return function () {\n      return func.apply(context, args.concat(nativeSlice.call(arguments)));\n    };\n  }\n\n  var bind = protoFunction && isFunction(protoFunction.bind) ? protoFunction.call.bind(protoFunction.bind) : bindPolyfill;\n\n  function curry(func) {\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n\n    return function () {\n      return func.apply(this, args.concat(nativeSlice.call(arguments)));\n    };\n  }\n\n  function isArray(value) {\n    if (Array.isArray) {\n      return Array.isArray(value);\n    }\n\n    return objToString.call(value) === '[object Array]';\n  }\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n\n  function isString(value) {\n    return typeof value === 'string';\n  }\n\n  function isStringSafe(value) {\n    return objToString.call(value) === '[object String]';\n  }\n\n  function isNumber(value) {\n    return typeof value === 'number';\n  }\n\n  function isObject(value) {\n    var type = typeof value;\n    return type === 'function' || !!value && type === 'object';\n  }\n\n  function isBuiltInObject(value) {\n    return !!BUILTIN_OBJECT[objToString.call(value)];\n  }\n\n  function isTypedArray(value) {\n    return !!TYPED_ARRAY[objToString.call(value)];\n  }\n\n  function isDom(value) {\n    return typeof value === 'object' && typeof value.nodeType === 'number' && typeof value.ownerDocument === 'object';\n  }\n\n  function isGradientObject(value) {\n    return value.colorStops != null;\n  }\n\n  function isImagePatternObject(value) {\n    return value.image != null;\n  }\n\n  function isRegExp(value) {\n    return objToString.call(value) === '[object RegExp]';\n  }\n\n  function eqNaN(value) {\n    return value !== value;\n  }\n\n  function retrieve() {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    for (var i = 0, len = args.length; i < len; i++) {\n      if (args[i] != null) {\n        return args[i];\n      }\n    }\n  }\n\n  function retrieve2(value0, value1) {\n    return value0 != null ? value0 : value1;\n  }\n\n  function retrieve3(value0, value1, value2) {\n    return value0 != null ? value0 : value1 != null ? value1 : value2;\n  }\n\n  function slice(arr) {\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n\n    return nativeSlice.apply(arr, args);\n  }\n\n  function normalizeCssArray(val) {\n    if (typeof val === 'number') {\n      return [val, val, val, val];\n    }\n\n    var len = val.length;\n\n    if (len === 2) {\n      return [val[0], val[1], val[0], val[1]];\n    } else if (len === 3) {\n      return [val[0], val[1], val[2], val[1]];\n    }\n\n    return val;\n  }\n\n  function assert(condition, message) {\n    if (!condition) {\n      throw new Error(message);\n    }\n  }\n\n  function trim(str) {\n    if (str == null) {\n      return null;\n    } else if (typeof str.trim === 'function') {\n      return str.trim();\n    } else {\n      return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    }\n  }\n\n  var primitiveKey = '__ec_primitive__';\n\n  function setAsPrimitive(obj) {\n    obj[primitiveKey] = true;\n  }\n\n  function isPrimitive(obj) {\n    return obj[primitiveKey];\n  }\n\n  var HashMap = function () {\n    function HashMap(obj) {\n      this.data = {};\n      var isArr = isArray(obj);\n      this.data = {};\n      var thisMap = this;\n      obj instanceof HashMap ? obj.each(visit) : obj && each(obj, visit);\n\n      function visit(value, key) {\n        isArr ? thisMap.set(value, key) : thisMap.set(key, value);\n      }\n    }\n\n    HashMap.prototype.get = function (key) {\n      return this.data.hasOwnProperty(key) ? this.data[key] : null;\n    };\n\n    HashMap.prototype.set = function (key, value) {\n      return this.data[key] = value;\n    };\n\n    HashMap.prototype.each = function (cb, context) {\n      for (var key in this.data) {\n        if (this.data.hasOwnProperty(key)) {\n          cb.call(context, this.data[key], key);\n        }\n      }\n    };\n\n    HashMap.prototype.keys = function () {\n      return keys(this.data);\n    };\n\n    HashMap.prototype.removeKey = function (key) {\n      delete this.data[key];\n    };\n\n    return HashMap;\n  }();\n\n  function createHashMap(obj) {\n    return new HashMap(obj);\n  }\n\n  function concatArray(a, b) {\n    var newArray = new a.constructor(a.length + b.length);\n\n    for (var i = 0; i < a.length; i++) {\n      newArray[i] = a[i];\n    }\n\n    var offset = a.length;\n\n    for (var i = 0; i < b.length; i++) {\n      newArray[i + offset] = b[i];\n    }\n\n    return newArray;\n  }\n\n  function createObject(proto, properties) {\n    var obj;\n\n    if (Object.create) {\n      obj = Object.create(proto);\n    } else {\n      var StyleCtor = function () {};\n\n      StyleCtor.prototype = proto;\n      obj = new StyleCtor();\n    }\n\n    if (properties) {\n      extend(obj, properties);\n    }\n\n    return obj;\n  }\n\n  function disableUserSelect(dom) {\n    var domStyle = dom.style;\n    domStyle.webkitUserSelect = 'none';\n    domStyle.userSelect = 'none';\n    domStyle.webkitTapHighlightColor = 'rgba(0,0,0,0)';\n    domStyle['-webkit-touch-callout'] = 'none';\n  }\n\n  function hasOwn(own, prop) {\n    return own.hasOwnProperty(prop);\n  }\n\n  function noop() {}\n\n  var RADIAN_TO_DEGREE = 180 / Math.PI;\n  var util = (Object.freeze || Object)({\n    guid: guid,\n    logError: logError,\n    clone: clone,\n    merge: merge,\n    mergeAll: mergeAll,\n    extend: extend,\n    defaults: defaults,\n    createCanvas: createCanvas,\n    indexOf: indexOf,\n    inherits: inherits,\n    mixin: mixin,\n    isArrayLike: isArrayLike,\n    each: each,\n    map: map,\n    reduce: reduce,\n    filter: filter,\n    find: find,\n    keys: keys,\n    bind: bind,\n    curry: curry,\n    isArray: isArray,\n    isFunction: isFunction,\n    isString: isString,\n    isStringSafe: isStringSafe,\n    isNumber: isNumber,\n    isObject: isObject,\n    isBuiltInObject: isBuiltInObject,\n    isTypedArray: isTypedArray,\n    isDom: isDom,\n    isGradientObject: isGradientObject,\n    isImagePatternObject: isImagePatternObject,\n    isRegExp: isRegExp,\n    eqNaN: eqNaN,\n    retrieve: retrieve,\n    retrieve2: retrieve2,\n    retrieve3: retrieve3,\n    slice: slice,\n    normalizeCssArray: normalizeCssArray,\n    assert: assert,\n    trim: trim,\n    setAsPrimitive: setAsPrimitive,\n    isPrimitive: isPrimitive,\n    HashMap: HashMap,\n    createHashMap: createHashMap,\n    concatArray: concatArray,\n    createObject: createObject,\n    disableUserSelect: disableUserSelect,\n    hasOwn: hasOwn,\n    noop: noop,\n    RADIAN_TO_DEGREE: RADIAN_TO_DEGREE\n  });\n\n  function create(x, y) {\n    if (x == null) {\n      x = 0;\n    }\n\n    if (y == null) {\n      y = 0;\n    }\n\n    return [x, y];\n  }\n\n  function copy(out, v) {\n    out[0] = v[0];\n    out[1] = v[1];\n    return out;\n  }\n\n  function clone$1(v) {\n    return [v[0], v[1]];\n  }\n\n  function set(out, a, b) {\n    out[0] = a;\n    out[1] = b;\n    return out;\n  }\n\n  function add(out, v1, v2) {\n    out[0] = v1[0] + v2[0];\n    out[1] = v1[1] + v2[1];\n    return out;\n  }\n\n  function scaleAndAdd(out, v1, v2, a) {\n    out[0] = v1[0] + v2[0] * a;\n    out[1] = v1[1] + v2[1] * a;\n    return out;\n  }\n\n  function sub(out, v1, v2) {\n    out[0] = v1[0] - v2[0];\n    out[1] = v1[1] - v2[1];\n    return out;\n  }\n\n  function len(v) {\n    return Math.sqrt(lenSquare(v));\n  }\n\n  var length = len;\n\n  function lenSquare(v) {\n    return v[0] * v[0] + v[1] * v[1];\n  }\n\n  var lengthSquare = lenSquare;\n\n  function mul(out, v1, v2) {\n    out[0] = v1[0] * v2[0];\n    out[1] = v1[1] * v2[1];\n    return out;\n  }\n\n  function div(out, v1, v2) {\n    out[0] = v1[0] / v2[0];\n    out[1] = v1[1] / v2[1];\n    return out;\n  }\n\n  function dot(v1, v2) {\n    return v1[0] * v2[0] + v1[1] * v2[1];\n  }\n\n  function scale(out, v, s) {\n    out[0] = v[0] * s;\n    out[1] = v[1] * s;\n    return out;\n  }\n\n  function normalize(out, v) {\n    var d = len(v);\n\n    if (d === 0) {\n      out[0] = 0;\n      out[1] = 0;\n    } else {\n      out[0] = v[0] / d;\n      out[1] = v[1] / d;\n    }\n\n    return out;\n  }\n\n  function distance(v1, v2) {\n    return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]));\n  }\n\n  var dist = distance;\n\n  function distanceSquare(v1, v2) {\n    return (v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]);\n  }\n\n  var distSquare = distanceSquare;\n\n  function negate(out, v) {\n    out[0] = -v[0];\n    out[1] = -v[1];\n    return out;\n  }\n\n  function lerp(out, v1, v2, t) {\n    out[0] = v1[0] + t * (v2[0] - v1[0]);\n    out[1] = v1[1] + t * (v2[1] - v1[1]);\n    return out;\n  }\n\n  function applyTransform(out, v, m) {\n    var x = v[0];\n    var y = v[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n  }\n\n  function min(out, v1, v2) {\n    out[0] = Math.min(v1[0], v2[0]);\n    out[1] = Math.min(v1[1], v2[1]);\n    return out;\n  }\n\n  function max(out, v1, v2) {\n    out[0] = Math.max(v1[0], v2[0]);\n    out[1] = Math.max(v1[1], v2[1]);\n    return out;\n  }\n\n  var vector = (Object.freeze || Object)({\n    create: create,\n    copy: copy,\n    clone: clone$1,\n    set: set,\n    add: add,\n    scaleAndAdd: scaleAndAdd,\n    sub: sub,\n    len: len,\n    length: length,\n    lenSquare: lenSquare,\n    lengthSquare: lengthSquare,\n    mul: mul,\n    div: div,\n    dot: dot,\n    scale: scale,\n    normalize: normalize,\n    distance: distance,\n    dist: dist,\n    distanceSquare: distanceSquare,\n    distSquare: distSquare,\n    negate: negate,\n    lerp: lerp,\n    applyTransform: applyTransform,\n    min: min,\n    max: max\n  });\n\n  var Param = function () {\n    function Param(target, e) {\n      this.target = target;\n      this.topTarget = e && e.topTarget;\n    }\n\n    return Param;\n  }();\n\n  var Draggable = function () {\n    function Draggable(handler) {\n      this.handler = handler;\n      handler.on('mousedown', this._dragStart, this);\n      handler.on('mousemove', this._drag, this);\n      handler.on('mouseup', this._dragEnd, this);\n    }\n\n    Draggable.prototype._dragStart = function (e) {\n      var draggingTarget = e.target;\n\n      while (draggingTarget && !draggingTarget.draggable) {\n        draggingTarget = draggingTarget.parent || draggingTarget.__hostTarget;\n      }\n\n      if (draggingTarget) {\n        this._draggingTarget = draggingTarget;\n        draggingTarget.dragging = true;\n        this._x = e.offsetX;\n        this._y = e.offsetY;\n        this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragstart', e.event);\n      }\n    };\n\n    Draggable.prototype._drag = function (e) {\n      var draggingTarget = this._draggingTarget;\n\n      if (draggingTarget) {\n        var x = e.offsetX;\n        var y = e.offsetY;\n        var dx = x - this._x;\n        var dy = y - this._y;\n        this._x = x;\n        this._y = y;\n        draggingTarget.drift(dx, dy, e);\n        this.handler.dispatchToElement(new Param(draggingTarget, e), 'drag', e.event);\n        var dropTarget = this.handler.findHover(x, y, draggingTarget).target;\n        var lastDropTarget = this._dropTarget;\n        this._dropTarget = dropTarget;\n\n        if (draggingTarget !== dropTarget) {\n          if (lastDropTarget && dropTarget !== lastDropTarget) {\n            this.handler.dispatchToElement(new Param(lastDropTarget, e), 'dragleave', e.event);\n          }\n\n          if (dropTarget && dropTarget !== lastDropTarget) {\n            this.handler.dispatchToElement(new Param(dropTarget, e), 'dragenter', e.event);\n          }\n        }\n      }\n    };\n\n    Draggable.prototype._dragEnd = function (e) {\n      var draggingTarget = this._draggingTarget;\n\n      if (draggingTarget) {\n        draggingTarget.dragging = false;\n      }\n\n      this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragend', e.event);\n\n      if (this._dropTarget) {\n        this.handler.dispatchToElement(new Param(this._dropTarget, e), 'drop', e.event);\n      }\n\n      this._draggingTarget = null;\n      this._dropTarget = null;\n    };\n\n    return Draggable;\n  }();\n\n  var Eventful = function () {\n    function Eventful(eventProcessors) {\n      if (eventProcessors) {\n        this._$eventProcessor = eventProcessors;\n      }\n    }\n\n    Eventful.prototype.on = function (event, query, handler, context) {\n      if (!this._$handlers) {\n        this._$handlers = {};\n      }\n\n      var _h = this._$handlers;\n\n      if (typeof query === 'function') {\n        context = handler;\n        handler = query;\n        query = null;\n      }\n\n      if (!handler || !event) {\n        return this;\n      }\n\n      var eventProcessor = this._$eventProcessor;\n\n      if (query != null && eventProcessor && eventProcessor.normalizeQuery) {\n        query = eventProcessor.normalizeQuery(query);\n      }\n\n      if (!_h[event]) {\n        _h[event] = [];\n      }\n\n      for (var i = 0; i < _h[event].length; i++) {\n        if (_h[event][i].h === handler) {\n          return this;\n        }\n      }\n\n      var wrap = {\n        h: handler,\n        query: query,\n        ctx: context || this,\n        callAtLast: handler.zrEventfulCallAtLast\n      };\n      var lastIndex = _h[event].length - 1;\n      var lastWrap = _h[event][lastIndex];\n      lastWrap && lastWrap.callAtLast ? _h[event].splice(lastIndex, 0, wrap) : _h[event].push(wrap);\n      return this;\n    };\n\n    Eventful.prototype.isSilent = function (eventName) {\n      var _h = this._$handlers;\n      return !_h || !_h[eventName] || !_h[eventName].length;\n    };\n\n    Eventful.prototype.off = function (eventType, handler) {\n      var _h = this._$handlers;\n\n      if (!_h) {\n        return this;\n      }\n\n      if (!eventType) {\n        this._$handlers = {};\n        return this;\n      }\n\n      if (handler) {\n        if (_h[eventType]) {\n          var newList = [];\n\n          for (var i = 0, l = _h[eventType].length; i < l; i++) {\n            if (_h[eventType][i].h !== handler) {\n              newList.push(_h[eventType][i]);\n            }\n          }\n\n          _h[eventType] = newList;\n        }\n\n        if (_h[eventType] && _h[eventType].length === 0) {\n          delete _h[eventType];\n        }\n      } else {\n        delete _h[eventType];\n      }\n\n      return this;\n    };\n\n    Eventful.prototype.trigger = function (eventType) {\n      var args = [];\n\n      for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n      }\n\n      if (!this._$handlers) {\n        return this;\n      }\n\n      var _h = this._$handlers[eventType];\n      var eventProcessor = this._$eventProcessor;\n\n      if (_h) {\n        var argLen = args.length;\n        var len = _h.length;\n\n        for (var i = 0; i < len; i++) {\n          var hItem = _h[i];\n\n          if (eventProcessor && eventProcessor.filter && hItem.query != null && !eventProcessor.filter(eventType, hItem.query)) {\n            continue;\n          }\n\n          switch (argLen) {\n            case 0:\n              hItem.h.call(hItem.ctx);\n              break;\n\n            case 1:\n              hItem.h.call(hItem.ctx, args[0]);\n              break;\n\n            case 2:\n              hItem.h.call(hItem.ctx, args[0], args[1]);\n              break;\n\n            default:\n              hItem.h.apply(hItem.ctx, args);\n              break;\n          }\n        }\n      }\n\n      eventProcessor && eventProcessor.afterTrigger && eventProcessor.afterTrigger(eventType);\n      return this;\n    };\n\n    Eventful.prototype.triggerWithContext = function (type) {\n      var args = [];\n\n      for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n      }\n\n      if (!this._$handlers) {\n        return this;\n      }\n\n      var _h = this._$handlers[type];\n      var eventProcessor = this._$eventProcessor;\n\n      if (_h) {\n        var argLen = args.length;\n        var ctx = args[argLen - 1];\n        var len = _h.length;\n\n        for (var i = 0; i < len; i++) {\n          var hItem = _h[i];\n\n          if (eventProcessor && eventProcessor.filter && hItem.query != null && !eventProcessor.filter(type, hItem.query)) {\n            continue;\n          }\n\n          switch (argLen) {\n            case 0:\n              hItem.h.call(ctx);\n              break;\n\n            case 1:\n              hItem.h.call(ctx, args[0]);\n              break;\n\n            case 2:\n              hItem.h.call(ctx, args[0], args[1]);\n              break;\n\n            default:\n              hItem.h.apply(ctx, args.slice(1, argLen - 1));\n              break;\n          }\n        }\n      }\n\n      eventProcessor && eventProcessor.afterTrigger && eventProcessor.afterTrigger(type);\n      return this;\n    };\n\n    return Eventful;\n  }();\n\n  var LN2 = Math.log(2);\n\n  function determinant(rows, rank, rowStart, rowMask, colMask, detCache) {\n    var cacheKey = rowMask + '-' + colMask;\n    var fullRank = rows.length;\n\n    if (detCache.hasOwnProperty(cacheKey)) {\n      return detCache[cacheKey];\n    }\n\n    if (rank === 1) {\n      var colStart = Math.round(Math.log((1 << fullRank) - 1 & ~colMask) / LN2);\n      return rows[rowStart][colStart];\n    }\n\n    var subRowMask = rowMask | 1 << rowStart;\n    var subRowStart = rowStart + 1;\n\n    while (rowMask & 1 << subRowStart) {\n      subRowStart++;\n    }\n\n    var sum = 0;\n\n    for (var j = 0, colLocalIdx = 0; j < fullRank; j++) {\n      var colTag = 1 << j;\n\n      if (!(colTag & colMask)) {\n        sum += (colLocalIdx % 2 ? -1 : 1) * rows[rowStart][j] * determinant(rows, rank - 1, subRowStart, subRowMask, colMask | colTag, detCache);\n        colLocalIdx++;\n      }\n    }\n\n    detCache[cacheKey] = sum;\n    return sum;\n  }\n\n  function buildTransformer(src, dest) {\n    var mA = [[src[0], src[1], 1, 0, 0, 0, -dest[0] * src[0], -dest[0] * src[1]], [0, 0, 0, src[0], src[1], 1, -dest[1] * src[0], -dest[1] * src[1]], [src[2], src[3], 1, 0, 0, 0, -dest[2] * src[2], -dest[2] * src[3]], [0, 0, 0, src[2], src[3], 1, -dest[3] * src[2], -dest[3] * src[3]], [src[4], src[5], 1, 0, 0, 0, -dest[4] * src[4], -dest[4] * src[5]], [0, 0, 0, src[4], src[5], 1, -dest[5] * src[4], -dest[5] * src[5]], [src[6], src[7], 1, 0, 0, 0, -dest[6] * src[6], -dest[6] * src[7]], [0, 0, 0, src[6], src[7], 1, -dest[7] * src[6], -dest[7] * src[7]]];\n    var detCache = {};\n    var det = determinant(mA, 8, 0, 0, 0, detCache);\n\n    if (det === 0) {\n      return;\n    }\n\n    var vh = [];\n\n    for (var i = 0; i < 8; i++) {\n      for (var j = 0; j < 8; j++) {\n        vh[j] == null && (vh[j] = 0);\n        vh[j] += ((i + j) % 2 ? -1 : 1) * determinant(mA, 7, i === 0 ? 1 : 0, 1 << i, 1 << j, detCache) / det * dest[i];\n      }\n    }\n\n    return function (out, srcPointX, srcPointY) {\n      var pk = srcPointX * vh[6] + srcPointY * vh[7] + 1;\n      out[0] = (srcPointX * vh[0] + srcPointY * vh[1] + vh[2]) / pk;\n      out[1] = (srcPointX * vh[3] + srcPointY * vh[4] + vh[5]) / pk;\n    };\n  }\n\n  var EVENT_SAVED_PROP = '___zrEVENTSAVED';\n  var _calcOut$1 = [];\n\n  function transformLocalCoord(out, elFrom, elTarget, inX, inY) {\n    return transformCoordWithViewport(_calcOut$1, elFrom, inX, inY, true) && transformCoordWithViewport(out, elTarget, _calcOut$1[0], _calcOut$1[1]);\n  }\n\n  function transformCoordWithViewport(out, el, inX, inY, inverse) {\n    if (el.getBoundingClientRect && env.domSupported && !isCanvasEl(el)) {\n      var saved = el[EVENT_SAVED_PROP] || (el[EVENT_SAVED_PROP] = {});\n      var markers = prepareCoordMarkers(el, saved);\n      var transformer = preparePointerTransformer(markers, saved, inverse);\n\n      if (transformer) {\n        transformer(out, inX, inY);\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function prepareCoordMarkers(el, saved) {\n    var markers = saved.markers;\n\n    if (markers) {\n      return markers;\n    }\n\n    markers = saved.markers = [];\n    var propLR = ['left', 'right'];\n    var propTB = ['top', 'bottom'];\n\n    for (var i = 0; i < 4; i++) {\n      var marker = document.createElement('div');\n      var stl = marker.style;\n      var idxLR = i % 2;\n      var idxTB = (i >> 1) % 2;\n      stl.cssText = ['position: absolute', 'visibility: hidden', 'padding: 0', 'margin: 0', 'border-width: 0', 'user-select: none', 'width:0', 'height:0', propLR[idxLR] + ':0', propTB[idxTB] + ':0', propLR[1 - idxLR] + ':auto', propTB[1 - idxTB] + ':auto', ''].join('!important;');\n      el.appendChild(marker);\n      markers.push(marker);\n    }\n\n    return markers;\n  }\n\n  function preparePointerTransformer(markers, saved, inverse) {\n    var transformerName = inverse ? 'invTrans' : 'trans';\n    var transformer = saved[transformerName];\n    var oldSrcCoords = saved.srcCoords;\n    var srcCoords = [];\n    var destCoords = [];\n    var oldCoordTheSame = true;\n\n    for (var i = 0; i < 4; i++) {\n      var rect = markers[i].getBoundingClientRect();\n      var ii = 2 * i;\n      var x = rect.left;\n      var y = rect.top;\n      srcCoords.push(x, y);\n      oldCoordTheSame = oldCoordTheSame && oldSrcCoords && x === oldSrcCoords[ii] && y === oldSrcCoords[ii + 1];\n      destCoords.push(markers[i].offsetLeft, markers[i].offsetTop);\n    }\n\n    return oldCoordTheSame && transformer ? transformer : (saved.srcCoords = srcCoords, saved[transformerName] = inverse ? buildTransformer(destCoords, srcCoords) : buildTransformer(srcCoords, destCoords));\n  }\n\n  function isCanvasEl(el) {\n    return el.nodeName.toUpperCase() === 'CANVAS';\n  }\n\n  var MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\n  var _calcOut = [];\n  var firefoxNotSupportOffsetXY = env.browser.firefox && +env.browser.version.split('.')[0] < 39;\n\n  function clientToLocal(el, e, out, calculate) {\n    out = out || {};\n\n    if (calculate) {\n      calculateZrXY(el, e, out);\n    } else if (firefoxNotSupportOffsetXY && e.layerX != null && e.layerX !== e.offsetX) {\n      out.zrX = e.layerX;\n      out.zrY = e.layerY;\n    } else if (e.offsetX != null) {\n      out.zrX = e.offsetX;\n      out.zrY = e.offsetY;\n    } else {\n      calculateZrXY(el, e, out);\n    }\n\n    return out;\n  }\n\n  function calculateZrXY(el, e, out) {\n    if (env.domSupported && el.getBoundingClientRect) {\n      var ex = e.clientX;\n      var ey = e.clientY;\n\n      if (isCanvasEl(el)) {\n        var box = el.getBoundingClientRect();\n        out.zrX = ex - box.left;\n        out.zrY = ey - box.top;\n        return;\n      } else {\n        if (transformCoordWithViewport(_calcOut, el, ex, ey)) {\n          out.zrX = _calcOut[0];\n          out.zrY = _calcOut[1];\n          return;\n        }\n      }\n    }\n\n    out.zrX = out.zrY = 0;\n  }\n\n  function getNativeEvent(e) {\n    return e || window.event;\n  }\n\n  function normalizeEvent(el, e, calculate) {\n    e = getNativeEvent(e);\n\n    if (e.zrX != null) {\n      return e;\n    }\n\n    var eventType = e.type;\n    var isTouch = eventType && eventType.indexOf('touch') >= 0;\n\n    if (!isTouch) {\n      clientToLocal(el, e, e, calculate);\n      var wheelDelta = getWheelDeltaMayPolyfill(e);\n      e.zrDelta = wheelDelta ? wheelDelta / 120 : -(e.detail || 0) / 3;\n    } else {\n      var touch = eventType !== 'touchend' ? e.targetTouches[0] : e.changedTouches[0];\n      touch && clientToLocal(el, touch, e, calculate);\n    }\n\n    var button = e.button;\n\n    if (e.which == null && button !== undefined && MOUSE_EVENT_REG.test(e.type)) {\n      e.which = button & 1 ? 1 : button & 2 ? 3 : button & 4 ? 2 : 0;\n    }\n\n    return e;\n  }\n\n  function getWheelDeltaMayPolyfill(e) {\n    var rawWheelDelta = e.wheelDelta;\n\n    if (rawWheelDelta) {\n      return rawWheelDelta;\n    }\n\n    var deltaX = e.deltaX;\n    var deltaY = e.deltaY;\n\n    if (deltaX == null || deltaY == null) {\n      return rawWheelDelta;\n    }\n\n    var delta = deltaY !== 0 ? Math.abs(deltaY) : Math.abs(deltaX);\n    var sign = deltaY > 0 ? -1 : deltaY < 0 ? 1 : deltaX > 0 ? -1 : 1;\n    return 3 * delta * sign;\n  }\n\n  function addEventListener(el, name, handler, opt) {\n    el.addEventListener(name, handler, opt);\n  }\n\n  function removeEventListener(el, name, handler, opt) {\n    el.removeEventListener(name, handler, opt);\n  }\n\n  var stop = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    e.cancelBubble = true;\n  };\n\n  function isMiddleOrRightButtonOnMouseUpDown(e) {\n    return e.which === 2 || e.which === 3;\n  }\n\n  var GestureMgr = function () {\n    function GestureMgr() {\n      this._track = [];\n    }\n\n    GestureMgr.prototype.recognize = function (event, target, root) {\n      this._doTrack(event, target, root);\n\n      return this._recognize(event);\n    };\n\n    GestureMgr.prototype.clear = function () {\n      this._track.length = 0;\n      return this;\n    };\n\n    GestureMgr.prototype._doTrack = function (event, target, root) {\n      var touches = event.touches;\n\n      if (!touches) {\n        return;\n      }\n\n      var trackItem = {\n        points: [],\n        touches: [],\n        target: target,\n        event: event\n      };\n\n      for (var i = 0, len = touches.length; i < len; i++) {\n        var touch = touches[i];\n        var pos = clientToLocal(root, touch, {});\n        trackItem.points.push([pos.zrX, pos.zrY]);\n        trackItem.touches.push(touch);\n      }\n\n      this._track.push(trackItem);\n    };\n\n    GestureMgr.prototype._recognize = function (event) {\n      for (var eventName in recognizers) {\n        if (recognizers.hasOwnProperty(eventName)) {\n          var gestureInfo = recognizers[eventName](this._track, event);\n\n          if (gestureInfo) {\n            return gestureInfo;\n          }\n        }\n      }\n    };\n\n    return GestureMgr;\n  }();\n\n  function dist$1(pointPair) {\n    var dx = pointPair[1][0] - pointPair[0][0];\n    var dy = pointPair[1][1] - pointPair[0][1];\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  function center(pointPair) {\n    return [(pointPair[0][0] + pointPair[1][0]) / 2, (pointPair[0][1] + pointPair[1][1]) / 2];\n  }\n\n  var recognizers = {\n    pinch: function (tracks, event) {\n      var trackLen = tracks.length;\n\n      if (!trackLen) {\n        return;\n      }\n\n      var pinchEnd = (tracks[trackLen - 1] || {}).points;\n      var pinchPre = (tracks[trackLen - 2] || {}).points || pinchEnd;\n\n      if (pinchPre && pinchPre.length > 1 && pinchEnd && pinchEnd.length > 1) {\n        var pinchScale = dist$1(pinchEnd) / dist$1(pinchPre);\n        !isFinite(pinchScale) && (pinchScale = 1);\n        event.pinchScale = pinchScale;\n        var pinchCenter = center(pinchEnd);\n        event.pinchX = pinchCenter[0];\n        event.pinchY = pinchCenter[1];\n        return {\n          type: 'pinch',\n          target: tracks[0].target,\n          event: event\n        };\n      }\n    }\n  };\n  var SILENT = 'silent';\n\n  function makeEventPacket(eveType, targetInfo, event) {\n    return {\n      type: eveType,\n      event: event,\n      target: targetInfo.target,\n      topTarget: targetInfo.topTarget,\n      cancelBubble: false,\n      offsetX: event.zrX,\n      offsetY: event.zrY,\n      gestureEvent: event.gestureEvent,\n      pinchX: event.pinchX,\n      pinchY: event.pinchY,\n      pinchScale: event.pinchScale,\n      wheelDelta: event.zrDelta,\n      zrByTouch: event.zrByTouch,\n      which: event.which,\n      stop: stopEvent\n    };\n  }\n\n  function stopEvent() {\n    stop(this.event);\n  }\n\n  var EmptyProxy = function (_super) {\n    __extends(EmptyProxy, _super);\n\n    function EmptyProxy() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.handler = null;\n      return _this;\n    }\n\n    EmptyProxy.prototype.dispose = function () {};\n\n    EmptyProxy.prototype.setCursor = function () {};\n\n    return EmptyProxy;\n  }(Eventful);\n\n  var HoveredResult = function () {\n    function HoveredResult(x, y) {\n      this.x = x;\n      this.y = y;\n    }\n\n    return HoveredResult;\n  }();\n\n  var handlerNames = ['click', 'dblclick', 'mousewheel', 'mouseout', 'mouseup', 'mousedown', 'mousemove', 'contextmenu'];\n\n  var Handler = function (_super) {\n    __extends(Handler, _super);\n\n    function Handler(storage, painter, proxy, painterRoot) {\n      var _this = _super.call(this) || this;\n\n      _this._hovered = new HoveredResult(0, 0);\n      _this.storage = storage;\n      _this.painter = painter;\n      _this.painterRoot = painterRoot;\n      proxy = proxy || new EmptyProxy();\n      _this.proxy = null;\n\n      _this.setHandlerProxy(proxy);\n\n      _this._draggingMgr = new Draggable(_this);\n      return _this;\n    }\n\n    Handler.prototype.setHandlerProxy = function (proxy) {\n      if (this.proxy) {\n        this.proxy.dispose();\n      }\n\n      if (proxy) {\n        each(handlerNames, function (name) {\n          proxy.on && proxy.on(name, this[name], this);\n        }, this);\n        proxy.handler = this;\n      }\n\n      this.proxy = proxy;\n    };\n\n    Handler.prototype.mousemove = function (event) {\n      var x = event.zrX;\n      var y = event.zrY;\n      var isOutside = isOutsideBoundary(this, x, y);\n      var lastHovered = this._hovered;\n      var lastHoveredTarget = lastHovered.target;\n\n      if (lastHoveredTarget && !lastHoveredTarget.__zr) {\n        lastHovered = this.findHover(lastHovered.x, lastHovered.y);\n        lastHoveredTarget = lastHovered.target;\n      }\n\n      var hovered = this._hovered = isOutside ? new HoveredResult(x, y) : this.findHover(x, y);\n      var hoveredTarget = hovered.target;\n      var proxy = this.proxy;\n      proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default');\n\n      if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\n        this.dispatchToElement(lastHovered, 'mouseout', event);\n      }\n\n      this.dispatchToElement(hovered, 'mousemove', event);\n\n      if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\n        this.dispatchToElement(hovered, 'mouseover', event);\n      }\n    };\n\n    Handler.prototype.mouseout = function (event) {\n      var eventControl = event.zrEventControl;\n\n      if (eventControl !== 'only_globalout') {\n        this.dispatchToElement(this._hovered, 'mouseout', event);\n      }\n\n      if (eventControl !== 'no_globalout') {\n        this.trigger('globalout', {\n          type: 'globalout',\n          event: event\n        });\n      }\n    };\n\n    Handler.prototype.resize = function () {\n      this._hovered = new HoveredResult(0, 0);\n    };\n\n    Handler.prototype.dispatch = function (eventName, eventArgs) {\n      var handler = this[eventName];\n      handler && handler.call(this, eventArgs);\n    };\n\n    Handler.prototype.dispose = function () {\n      this.proxy.dispose();\n      this.storage = null;\n      this.proxy = null;\n      this.painter = null;\n    };\n\n    Handler.prototype.setCursorStyle = function (cursorStyle) {\n      var proxy = this.proxy;\n      proxy.setCursor && proxy.setCursor(cursorStyle);\n    };\n\n    Handler.prototype.dispatchToElement = function (targetInfo, eventName, event) {\n      targetInfo = targetInfo || {};\n      var el = targetInfo.target;\n\n      if (el && el.silent) {\n        return;\n      }\n\n      var eventKey = 'on' + eventName;\n      var eventPacket = makeEventPacket(eventName, targetInfo, event);\n\n      while (el) {\n        el[eventKey] && (eventPacket.cancelBubble = !!el[eventKey].call(el, eventPacket));\n        el.trigger(eventName, eventPacket);\n        el = el.__hostTarget ? el.__hostTarget : el.parent;\n\n        if (eventPacket.cancelBubble) {\n          break;\n        }\n      }\n\n      if (!eventPacket.cancelBubble) {\n        this.trigger(eventName, eventPacket);\n\n        if (this.painter && this.painter.eachOtherLayer) {\n          this.painter.eachOtherLayer(function (layer) {\n            if (typeof layer[eventKey] === 'function') {\n              layer[eventKey].call(layer, eventPacket);\n            }\n\n            if (layer.trigger) {\n              layer.trigger(eventName, eventPacket);\n            }\n          });\n        }\n      }\n    };\n\n    Handler.prototype.findHover = function (x, y, exclude) {\n      var list = this.storage.getDisplayList();\n      var out = new HoveredResult(x, y);\n\n      for (var i = list.length - 1; i >= 0; i--) {\n        var hoverCheckResult = void 0;\n\n        if (list[i] !== exclude && !list[i].ignore && (hoverCheckResult = isHover(list[i], x, y))) {\n          !out.topTarget && (out.topTarget = list[i]);\n\n          if (hoverCheckResult !== SILENT) {\n            out.target = list[i];\n            break;\n          }\n        }\n      }\n\n      return out;\n    };\n\n    Handler.prototype.processGesture = function (event, stage) {\n      if (!this._gestureMgr) {\n        this._gestureMgr = new GestureMgr();\n      }\n\n      var gestureMgr = this._gestureMgr;\n      stage === 'start' && gestureMgr.clear();\n      var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);\n      stage === 'end' && gestureMgr.clear();\n\n      if (gestureInfo) {\n        var type = gestureInfo.type;\n        event.gestureEvent = type;\n        var res = new HoveredResult();\n        res.target = gestureInfo.target;\n        this.dispatchToElement(res, type, gestureInfo.event);\n      }\n    };\n\n    return Handler;\n  }(Eventful);\n\n  each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n    Handler.prototype[name] = function (event) {\n      var x = event.zrX;\n      var y = event.zrY;\n      var isOutside = isOutsideBoundary(this, x, y);\n      var hovered;\n      var hoveredTarget;\n\n      if (name !== 'mouseup' || !isOutside) {\n        hovered = this.findHover(x, y);\n        hoveredTarget = hovered.target;\n      }\n\n      if (name === 'mousedown') {\n        this._downEl = hoveredTarget;\n        this._downPoint = [event.zrX, event.zrY];\n        this._upEl = hoveredTarget;\n      } else if (name === 'mouseup') {\n        this._upEl = hoveredTarget;\n      } else if (name === 'click') {\n        if (this._downEl !== this._upEl || !this._downPoint || dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\n          return;\n        }\n\n        this._downPoint = null;\n      }\n\n      this.dispatchToElement(hovered, name, event);\n    };\n  });\n\n  function isHover(displayable, x, y) {\n    if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\n      var el = displayable;\n      var isSilent = void 0;\n      var ignoreClip = false;\n\n      while (el) {\n        if (el.ignoreClip) {\n          ignoreClip = true;\n        }\n\n        if (!ignoreClip) {\n          var clipPath = el.getClipPath();\n\n          if (clipPath && !clipPath.contain(x, y)) {\n            return false;\n          }\n\n          if (el.silent) {\n            isSilent = true;\n          }\n        }\n\n        var hostEl = el.__hostTarget;\n        el = hostEl ? hostEl : el.parent;\n      }\n\n      return isSilent ? SILENT : true;\n    }\n\n    return false;\n  }\n\n  function isOutsideBoundary(handlerInstance, x, y) {\n    var painter = handlerInstance.painter;\n    return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\n  }\n\n  var DEFAULT_MIN_MERGE = 32;\n  var DEFAULT_MIN_GALLOPING = 7;\n\n  function minRunLength(n) {\n    var r = 0;\n\n    while (n >= DEFAULT_MIN_MERGE) {\n      r |= n & 1;\n      n >>= 1;\n    }\n\n    return n + r;\n  }\n\n  function makeAscendingRun(array, lo, hi, compare) {\n    var runHi = lo + 1;\n\n    if (runHi === hi) {\n      return 1;\n    }\n\n    if (compare(array[runHi++], array[lo]) < 0) {\n      while (runHi < hi && compare(array[runHi], array[runHi - 1]) < 0) {\n        runHi++;\n      }\n\n      reverseRun(array, lo, runHi);\n    } else {\n      while (runHi < hi && compare(array[runHi], array[runHi - 1]) >= 0) {\n        runHi++;\n      }\n    }\n\n    return runHi - lo;\n  }\n\n  function reverseRun(array, lo, hi) {\n    hi--;\n\n    while (lo < hi) {\n      var t = array[lo];\n      array[lo++] = array[hi];\n      array[hi--] = t;\n    }\n  }\n\n  function binaryInsertionSort(array, lo, hi, start, compare) {\n    if (start === lo) {\n      start++;\n    }\n\n    for (; start < hi; start++) {\n      var pivot = array[start];\n      var left = lo;\n      var right = start;\n      var mid;\n\n      while (left < right) {\n        mid = left + right >>> 1;\n\n        if (compare(pivot, array[mid]) < 0) {\n          right = mid;\n        } else {\n          left = mid + 1;\n        }\n      }\n\n      var n = start - left;\n\n      switch (n) {\n        case 3:\n          array[left + 3] = array[left + 2];\n\n        case 2:\n          array[left + 2] = array[left + 1];\n\n        case 1:\n          array[left + 1] = array[left];\n          break;\n\n        default:\n          while (n > 0) {\n            array[left + n] = array[left + n - 1];\n            n--;\n          }\n\n      }\n\n      array[left] = pivot;\n    }\n  }\n\n  function gallopLeft(value, array, start, length, hint, compare) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n\n    if (compare(value, array[start + hint]) > 0) {\n      maxOffset = length - hint;\n\n      while (offset < maxOffset && compare(value, array[start + hint + offset]) > 0) {\n        lastOffset = offset;\n        offset = (offset << 1) + 1;\n\n        if (offset <= 0) {\n          offset = maxOffset;\n        }\n      }\n\n      if (offset > maxOffset) {\n        offset = maxOffset;\n      }\n\n      lastOffset += hint;\n      offset += hint;\n    } else {\n      maxOffset = hint + 1;\n\n      while (offset < maxOffset && compare(value, array[start + hint - offset]) <= 0) {\n        lastOffset = offset;\n        offset = (offset << 1) + 1;\n\n        if (offset <= 0) {\n          offset = maxOffset;\n        }\n      }\n\n      if (offset > maxOffset) {\n        offset = maxOffset;\n      }\n\n      var tmp = lastOffset;\n      lastOffset = hint - offset;\n      offset = hint - tmp;\n    }\n\n    lastOffset++;\n\n    while (lastOffset < offset) {\n      var m = lastOffset + (offset - lastOffset >>> 1);\n\n      if (compare(value, array[start + m]) > 0) {\n        lastOffset = m + 1;\n      } else {\n        offset = m;\n      }\n    }\n\n    return offset;\n  }\n\n  function gallopRight(value, array, start, length, hint, compare) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n\n    if (compare(value, array[start + hint]) < 0) {\n      maxOffset = hint + 1;\n\n      while (offset < maxOffset && compare(value, array[start + hint - offset]) < 0) {\n        lastOffset = offset;\n        offset = (offset << 1) + 1;\n\n        if (offset <= 0) {\n          offset = maxOffset;\n        }\n      }\n\n      if (offset > maxOffset) {\n        offset = maxOffset;\n      }\n\n      var tmp = lastOffset;\n      lastOffset = hint - offset;\n      offset = hint - tmp;\n    } else {\n      maxOffset = length - hint;\n\n      while (offset < maxOffset && compare(value, array[start + hint + offset]) >= 0) {\n        lastOffset = offset;\n        offset = (offset << 1) + 1;\n\n        if (offset <= 0) {\n          offset = maxOffset;\n        }\n      }\n\n      if (offset > maxOffset) {\n        offset = maxOffset;\n      }\n\n      lastOffset += hint;\n      offset += hint;\n    }\n\n    lastOffset++;\n\n    while (lastOffset < offset) {\n      var m = lastOffset + (offset - lastOffset >>> 1);\n\n      if (compare(value, array[start + m]) < 0) {\n        offset = m;\n      } else {\n        lastOffset = m + 1;\n      }\n    }\n\n    return offset;\n  }\n\n  function TimSort(array, compare) {\n    var minGallop = DEFAULT_MIN_GALLOPING;\n    var runStart;\n    var runLength;\n    var stackSize = 0;\n    var tmp = [];\n    runStart = [];\n    runLength = [];\n\n    function pushRun(_runStart, _runLength) {\n      runStart[stackSize] = _runStart;\n      runLength[stackSize] = _runLength;\n      stackSize += 1;\n    }\n\n    function mergeRuns() {\n      while (stackSize > 1) {\n        var n = stackSize - 2;\n\n        if (n >= 1 && runLength[n - 1] <= runLength[n] + runLength[n + 1] || n >= 2 && runLength[n - 2] <= runLength[n] + runLength[n - 1]) {\n          if (runLength[n - 1] < runLength[n + 1]) {\n            n--;\n          }\n        } else if (runLength[n] > runLength[n + 1]) {\n          break;\n        }\n\n        mergeAt(n);\n      }\n    }\n\n    function forceMergeRuns() {\n      while (stackSize > 1) {\n        var n = stackSize - 2;\n\n        if (n > 0 && runLength[n - 1] < runLength[n + 1]) {\n          n--;\n        }\n\n        mergeAt(n);\n      }\n    }\n\n    function mergeAt(i) {\n      var start1 = runStart[i];\n      var length1 = runLength[i];\n      var start2 = runStart[i + 1];\n      var length2 = runLength[i + 1];\n      runLength[i] = length1 + length2;\n\n      if (i === stackSize - 3) {\n        runStart[i + 1] = runStart[i + 2];\n        runLength[i + 1] = runLength[i + 2];\n      }\n\n      stackSize--;\n      var k = gallopRight(array[start2], array, start1, length1, 0, compare);\n      start1 += k;\n      length1 -= k;\n\n      if (length1 === 0) {\n        return;\n      }\n\n      length2 = gallopLeft(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare);\n\n      if (length2 === 0) {\n        return;\n      }\n\n      if (length1 <= length2) {\n        mergeLow(start1, length1, start2, length2);\n      } else {\n        mergeHigh(start1, length1, start2, length2);\n      }\n    }\n\n    function mergeLow(start1, length1, start2, length2) {\n      var i = 0;\n\n      for (i = 0; i < length1; i++) {\n        tmp[i] = array[start1 + i];\n      }\n\n      var cursor1 = 0;\n      var cursor2 = start2;\n      var dest = start1;\n      array[dest++] = array[cursor2++];\n\n      if (--length2 === 0) {\n        for (i = 0; i < length1; i++) {\n          array[dest + i] = tmp[cursor1 + i];\n        }\n\n        return;\n      }\n\n      if (length1 === 1) {\n        for (i = 0; i < length2; i++) {\n          array[dest + i] = array[cursor2 + i];\n        }\n\n        array[dest + length2] = tmp[cursor1];\n        return;\n      }\n\n      var _minGallop = minGallop;\n      var count1;\n      var count2;\n      var exit;\n\n      while (1) {\n        count1 = 0;\n        count2 = 0;\n        exit = false;\n\n        do {\n          if (compare(array[cursor2], tmp[cursor1]) < 0) {\n            array[dest++] = array[cursor2++];\n            count2++;\n            count1 = 0;\n\n            if (--length2 === 0) {\n              exit = true;\n              break;\n            }\n          } else {\n            array[dest++] = tmp[cursor1++];\n            count1++;\n            count2 = 0;\n\n            if (--length1 === 1) {\n              exit = true;\n              break;\n            }\n          }\n        } while ((count1 | count2) < _minGallop);\n\n        if (exit) {\n          break;\n        }\n\n        do {\n          count1 = gallopRight(array[cursor2], tmp, cursor1, length1, 0, compare);\n\n          if (count1 !== 0) {\n            for (i = 0; i < count1; i++) {\n              array[dest + i] = tmp[cursor1 + i];\n            }\n\n            dest += count1;\n            cursor1 += count1;\n            length1 -= count1;\n\n            if (length1 <= 1) {\n              exit = true;\n              break;\n            }\n          }\n\n          array[dest++] = array[cursor2++];\n\n          if (--length2 === 0) {\n            exit = true;\n            break;\n          }\n\n          count2 = gallopLeft(tmp[cursor1], array, cursor2, length2, 0, compare);\n\n          if (count2 !== 0) {\n            for (i = 0; i < count2; i++) {\n              array[dest + i] = array[cursor2 + i];\n            }\n\n            dest += count2;\n            cursor2 += count2;\n            length2 -= count2;\n\n            if (length2 === 0) {\n              exit = true;\n              break;\n            }\n          }\n\n          array[dest++] = tmp[cursor1++];\n\n          if (--length1 === 1) {\n            exit = true;\n            break;\n          }\n\n          _minGallop--;\n        } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n\n        if (exit) {\n          break;\n        }\n\n        if (_minGallop < 0) {\n          _minGallop = 0;\n        }\n\n        _minGallop += 2;\n      }\n\n      minGallop = _minGallop;\n      minGallop < 1 && (minGallop = 1);\n\n      if (length1 === 1) {\n        for (i = 0; i < length2; i++) {\n          array[dest + i] = array[cursor2 + i];\n        }\n\n        array[dest + length2] = tmp[cursor1];\n      } else if (length1 === 0) {\n        throw new Error();\n      } else {\n        for (i = 0; i < length1; i++) {\n          array[dest + i] = tmp[cursor1 + i];\n        }\n      }\n    }\n\n    function mergeHigh(start1, length1, start2, length2) {\n      var i = 0;\n\n      for (i = 0; i < length2; i++) {\n        tmp[i] = array[start2 + i];\n      }\n\n      var cursor1 = start1 + length1 - 1;\n      var cursor2 = length2 - 1;\n      var dest = start2 + length2 - 1;\n      var customCursor = 0;\n      var customDest = 0;\n      array[dest--] = array[cursor1--];\n\n      if (--length1 === 0) {\n        customCursor = dest - (length2 - 1);\n\n        for (i = 0; i < length2; i++) {\n          array[customCursor + i] = tmp[i];\n        }\n\n        return;\n      }\n\n      if (length2 === 1) {\n        dest -= length1;\n        cursor1 -= length1;\n        customDest = dest + 1;\n        customCursor = cursor1 + 1;\n\n        for (i = length1 - 1; i >= 0; i--) {\n          array[customDest + i] = array[customCursor + i];\n        }\n\n        array[dest] = tmp[cursor2];\n        return;\n      }\n\n      var _minGallop = minGallop;\n\n      while (true) {\n        var count1 = 0;\n        var count2 = 0;\n        var exit = false;\n\n        do {\n          if (compare(tmp[cursor2], array[cursor1]) < 0) {\n            array[dest--] = array[cursor1--];\n            count1++;\n            count2 = 0;\n\n            if (--length1 === 0) {\n              exit = true;\n              break;\n            }\n          } else {\n            array[dest--] = tmp[cursor2--];\n            count2++;\n            count1 = 0;\n\n            if (--length2 === 1) {\n              exit = true;\n              break;\n            }\n          }\n        } while ((count1 | count2) < _minGallop);\n\n        if (exit) {\n          break;\n        }\n\n        do {\n          count1 = length1 - gallopRight(tmp[cursor2], array, start1, length1, length1 - 1, compare);\n\n          if (count1 !== 0) {\n            dest -= count1;\n            cursor1 -= count1;\n            length1 -= count1;\n            customDest = dest + 1;\n            customCursor = cursor1 + 1;\n\n            for (i = count1 - 1; i >= 0; i--) {\n              array[customDest + i] = array[customCursor + i];\n            }\n\n            if (length1 === 0) {\n              exit = true;\n              break;\n            }\n          }\n\n          array[dest--] = tmp[cursor2--];\n\n          if (--length2 === 1) {\n            exit = true;\n            break;\n          }\n\n          count2 = length2 - gallopLeft(array[cursor1], tmp, 0, length2, length2 - 1, compare);\n\n          if (count2 !== 0) {\n            dest -= count2;\n            cursor2 -= count2;\n            length2 -= count2;\n            customDest = dest + 1;\n            customCursor = cursor2 + 1;\n\n            for (i = 0; i < count2; i++) {\n              array[customDest + i] = tmp[customCursor + i];\n            }\n\n            if (length2 <= 1) {\n              exit = true;\n              break;\n            }\n          }\n\n          array[dest--] = array[cursor1--];\n\n          if (--length1 === 0) {\n            exit = true;\n            break;\n          }\n\n          _minGallop--;\n        } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n\n        if (exit) {\n          break;\n        }\n\n        if (_minGallop < 0) {\n          _minGallop = 0;\n        }\n\n        _minGallop += 2;\n      }\n\n      minGallop = _minGallop;\n\n      if (minGallop < 1) {\n        minGallop = 1;\n      }\n\n      if (length2 === 1) {\n        dest -= length1;\n        cursor1 -= length1;\n        customDest = dest + 1;\n        customCursor = cursor1 + 1;\n\n        for (i = length1 - 1; i >= 0; i--) {\n          array[customDest + i] = array[customCursor + i];\n        }\n\n        array[dest] = tmp[cursor2];\n      } else if (length2 === 0) {\n        throw new Error();\n      } else {\n        customCursor = dest - (length2 - 1);\n\n        for (i = 0; i < length2; i++) {\n          array[customCursor + i] = tmp[i];\n        }\n      }\n    }\n\n    return {\n      mergeRuns: mergeRuns,\n      forceMergeRuns: forceMergeRuns,\n      pushRun: pushRun\n    };\n  }\n\n  function sort(array, compare, lo, hi) {\n    if (!lo) {\n      lo = 0;\n    }\n\n    if (!hi) {\n      hi = array.length;\n    }\n\n    var remaining = hi - lo;\n\n    if (remaining < 2) {\n      return;\n    }\n\n    var runLength = 0;\n\n    if (remaining < DEFAULT_MIN_MERGE) {\n      runLength = makeAscendingRun(array, lo, hi, compare);\n      binaryInsertionSort(array, lo, hi, lo + runLength, compare);\n      return;\n    }\n\n    var ts = TimSort(array, compare);\n    var minRun = minRunLength(remaining);\n\n    do {\n      runLength = makeAscendingRun(array, lo, hi, compare);\n\n      if (runLength < minRun) {\n        var force = remaining;\n\n        if (force > minRun) {\n          force = minRun;\n        }\n\n        binaryInsertionSort(array, lo, lo + force, lo + runLength, compare);\n        runLength = force;\n      }\n\n      ts.pushRun(lo, runLength);\n      ts.mergeRuns();\n      remaining -= runLength;\n      lo += runLength;\n    } while (remaining !== 0);\n\n    ts.forceMergeRuns();\n  }\n\n  var REDRAW_BIT = 1;\n  var STYLE_CHANGED_BIT = 2;\n  var SHAPE_CHANGED_BIT = 4;\n  var invalidZErrorLogged = false;\n\n  function logInvalidZError() {\n    if (invalidZErrorLogged) {\n      return;\n    }\n\n    invalidZErrorLogged = true;\n    console.warn('z / z2 / zlevel of displayable is invalid, which may cause unexpected errors');\n  }\n\n  function shapeCompareFunc(a, b) {\n    if (a.zlevel === b.zlevel) {\n      if (a.z === b.z) {\n        return a.z2 - b.z2;\n      }\n\n      return a.z - b.z;\n    }\n\n    return a.zlevel - b.zlevel;\n  }\n\n  var Storage = function () {\n    function Storage() {\n      this._roots = [];\n      this._displayList = [];\n      this._displayListLen = 0;\n      this.displayableSortFunc = shapeCompareFunc;\n    }\n\n    Storage.prototype.traverse = function (cb, context) {\n      for (var i = 0; i < this._roots.length; i++) {\n        this._roots[i].traverse(cb, context);\n      }\n    };\n\n    Storage.prototype.getDisplayList = function (update, includeIgnore) {\n      includeIgnore = includeIgnore || false;\n      var displayList = this._displayList;\n\n      if (update || !displayList.length) {\n        this.updateDisplayList(includeIgnore);\n      }\n\n      return displayList;\n    };\n\n    Storage.prototype.updateDisplayList = function (includeIgnore) {\n      this._displayListLen = 0;\n      var roots = this._roots;\n      var displayList = this._displayList;\n\n      for (var i = 0, len = roots.length; i < len; i++) {\n        this._updateAndAddDisplayable(roots[i], null, includeIgnore);\n      }\n\n      displayList.length = this._displayListLen;\n      sort(displayList, shapeCompareFunc);\n    };\n\n    Storage.prototype._updateAndAddDisplayable = function (el, clipPaths, includeIgnore) {\n      if (el.ignore && !includeIgnore) {\n        return;\n      }\n\n      el.beforeUpdate();\n      el.update();\n      el.afterUpdate();\n      var userSetClipPath = el.getClipPath();\n\n      if (el.ignoreClip) {\n        clipPaths = null;\n      } else if (userSetClipPath) {\n        if (clipPaths) {\n          clipPaths = clipPaths.slice();\n        } else {\n          clipPaths = [];\n        }\n\n        var currentClipPath = userSetClipPath;\n        var parentClipPath = el;\n\n        while (currentClipPath) {\n          currentClipPath.parent = parentClipPath;\n          currentClipPath.updateTransform();\n          clipPaths.push(currentClipPath);\n          parentClipPath = currentClipPath;\n          currentClipPath = currentClipPath.getClipPath();\n        }\n      }\n\n      if (el.childrenRef) {\n        var children = el.childrenRef();\n\n        for (var i = 0; i < children.length; i++) {\n          var child = children[i];\n\n          if (el.__dirty) {\n            child.__dirty |= REDRAW_BIT;\n          }\n\n          this._updateAndAddDisplayable(child, clipPaths, includeIgnore);\n        }\n\n        el.__dirty = 0;\n      } else {\n        var disp = el;\n\n        if (clipPaths && clipPaths.length) {\n          disp.__clipPaths = clipPaths;\n        } else if (disp.__clipPaths && disp.__clipPaths.length > 0) {\n          disp.__clipPaths = [];\n        }\n\n        if (isNaN(disp.z)) {\n          logInvalidZError();\n          disp.z = 0;\n        }\n\n        if (isNaN(disp.z2)) {\n          logInvalidZError();\n          disp.z2 = 0;\n        }\n\n        if (isNaN(disp.zlevel)) {\n          logInvalidZError();\n          disp.zlevel = 0;\n        }\n\n        this._displayList[this._displayListLen++] = disp;\n      }\n\n      var decalEl = el.getDecalElement && el.getDecalElement();\n\n      if (decalEl) {\n        this._updateAndAddDisplayable(decalEl, clipPaths, includeIgnore);\n      }\n\n      var textGuide = el.getTextGuideLine();\n\n      if (textGuide) {\n        this._updateAndAddDisplayable(textGuide, clipPaths, includeIgnore);\n      }\n\n      var textEl = el.getTextContent();\n\n      if (textEl) {\n        this._updateAndAddDisplayable(textEl, clipPaths, includeIgnore);\n      }\n    };\n\n    Storage.prototype.addRoot = function (el) {\n      if (el.__zr && el.__zr.storage === this) {\n        return;\n      }\n\n      this._roots.push(el);\n    };\n\n    Storage.prototype.delRoot = function (el) {\n      if (el instanceof Array) {\n        for (var i = 0, l = el.length; i < l; i++) {\n          this.delRoot(el[i]);\n        }\n\n        return;\n      }\n\n      var idx = indexOf(this._roots, el);\n\n      if (idx >= 0) {\n        this._roots.splice(idx, 1);\n      }\n    };\n\n    Storage.prototype.delAllRoots = function () {\n      this._roots = [];\n      this._displayList = [];\n      this._displayListLen = 0;\n      return;\n    };\n\n    Storage.prototype.getRoots = function () {\n      return this._roots;\n    };\n\n    Storage.prototype.dispose = function () {\n      this._displayList = null;\n      this._roots = null;\n    };\n\n    return Storage;\n  }();\n\n  var requestAnimationFrame;\n\n  requestAnimationFrame = env.hasGlobalWindow && (window.requestAnimationFrame && window.requestAnimationFrame.bind(window) || window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window) || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame) || function (func) {\n    return setTimeout(func, 16);\n  };\n\n  var requestAnimationFrame$1 = requestAnimationFrame;\n  var easingFuncs = {\n    linear: function (k) {\n      return k;\n    },\n    quadraticIn: function (k) {\n      return k * k;\n    },\n    quadraticOut: function (k) {\n      return k * (2 - k);\n    },\n    quadraticInOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k;\n      }\n\n      return -0.5 * (--k * (k - 2) - 1);\n    },\n    cubicIn: function (k) {\n      return k * k * k;\n    },\n    cubicOut: function (k) {\n      return --k * k * k + 1;\n    },\n    cubicInOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k;\n      }\n\n      return 0.5 * ((k -= 2) * k * k + 2);\n    },\n    quarticIn: function (k) {\n      return k * k * k * k;\n    },\n    quarticOut: function (k) {\n      return 1 - --k * k * k * k;\n    },\n    quarticInOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k;\n      }\n\n      return -0.5 * ((k -= 2) * k * k * k - 2);\n    },\n    quinticIn: function (k) {\n      return k * k * k * k * k;\n    },\n    quinticOut: function (k) {\n      return --k * k * k * k * k + 1;\n    },\n    quinticInOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k * k;\n      }\n\n      return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    },\n    sinusoidalIn: function (k) {\n      return 1 - Math.cos(k * Math.PI / 2);\n    },\n    sinusoidalOut: function (k) {\n      return Math.sin(k * Math.PI / 2);\n    },\n    sinusoidalInOut: function (k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k));\n    },\n    exponentialIn: function (k) {\n      return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n    exponentialOut: function (k) {\n      return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n    },\n    exponentialInOut: function (k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      if ((k *= 2) < 1) {\n        return 0.5 * Math.pow(1024, k - 1);\n      }\n\n      return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n    },\n    circularIn: function (k) {\n      return 1 - Math.sqrt(1 - k * k);\n    },\n    circularOut: function (k) {\n      return Math.sqrt(1 - --k * k);\n    },\n    circularInOut: function (k) {\n      if ((k *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - k * k) - 1);\n      }\n\n      return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    },\n    elasticIn: function (k) {\n      var s;\n      var a = 0.1;\n      var p = 0.4;\n\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      if (!a || a < 1) {\n        a = 1;\n        s = p / 4;\n      } else {\n        s = p * Math.asin(1 / a) / (2 * Math.PI);\n      }\n\n      return -(a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\n    },\n    elasticOut: function (k) {\n      var s;\n      var a = 0.1;\n      var p = 0.4;\n\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      if (!a || a < 1) {\n        a = 1;\n        s = p / 4;\n      } else {\n        s = p * Math.asin(1 / a) / (2 * Math.PI);\n      }\n\n      return a * Math.pow(2, -10 * k) * Math.sin((k - s) * (2 * Math.PI) / p) + 1;\n    },\n    elasticInOut: function (k) {\n      var s;\n      var a = 0.1;\n      var p = 0.4;\n\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      if (!a || a < 1) {\n        a = 1;\n        s = p / 4;\n      } else {\n        s = p * Math.asin(1 / a) / (2 * Math.PI);\n      }\n\n      if ((k *= 2) < 1) {\n        return -0.5 * (a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\n      }\n\n      return a * Math.pow(2, -10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n    },\n    backIn: function (k) {\n      var s = 1.70158;\n      return k * k * ((s + 1) * k - s);\n    },\n    backOut: function (k) {\n      var s = 1.70158;\n      return --k * k * ((s + 1) * k + s) + 1;\n    },\n    backInOut: function (k) {\n      var s = 1.70158 * 1.525;\n\n      if ((k *= 2) < 1) {\n        return 0.5 * (k * k * ((s + 1) * k - s));\n      }\n\n      return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    },\n    bounceIn: function (k) {\n      return 1 - easingFuncs.bounceOut(1 - k);\n    },\n    bounceOut: function (k) {\n      if (k < 1 / 2.75) {\n        return 7.5625 * k * k;\n      } else if (k < 2 / 2.75) {\n        return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n      } else if (k < 2.5 / 2.75) {\n        return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n      } else {\n        return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n      }\n    },\n    bounceInOut: function (k) {\n      if (k < 0.5) {\n        return easingFuncs.bounceIn(k * 2) * 0.5;\n      }\n\n      return easingFuncs.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n    }\n  };\n  var mathPow = Math.pow;\n  var mathSqrt = Math.sqrt;\n  var EPSILON = 1e-8;\n  var EPSILON_NUMERIC = 1e-4;\n  var THREE_SQRT = mathSqrt(3);\n  var ONE_THIRD = 1 / 3;\n\n  var _v0 = create();\n\n  var _v1 = create();\n\n  var _v2 = create();\n\n  function isAroundZero(val) {\n    return val > -EPSILON && val < EPSILON;\n  }\n\n  function isNotAroundZero(val) {\n    return val > EPSILON || val < -EPSILON;\n  }\n\n  function cubicAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return onet * onet * (onet * p0 + 3 * t * p1) + t * t * (t * p3 + 3 * onet * p2);\n  }\n\n  function cubicDerivativeAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return 3 * (((p1 - p0) * onet + 2 * (p2 - p1) * t) * onet + (p3 - p2) * t * t);\n  }\n\n  function cubicRootAt(p0, p1, p2, p3, val, roots) {\n    var a = p3 + 3 * (p1 - p2) - p0;\n    var b = 3 * (p2 - p1 * 2 + p0);\n    var c = 3 * (p1 - p0);\n    var d = p0 - val;\n    var A = b * b - 3 * a * c;\n    var B = b * c - 9 * a * d;\n    var C = c * c - 3 * b * d;\n    var n = 0;\n\n    if (isAroundZero(A) && isAroundZero(B)) {\n      if (isAroundZero(b)) {\n        roots[0] = 0;\n      } else {\n        var t1 = -c / b;\n\n        if (t1 >= 0 && t1 <= 1) {\n          roots[n++] = t1;\n        }\n      }\n    } else {\n      var disc = B * B - 4 * A * C;\n\n      if (isAroundZero(disc)) {\n        var K = B / A;\n        var t1 = -b / a + K;\n        var t2 = -K / 2;\n\n        if (t1 >= 0 && t1 <= 1) {\n          roots[n++] = t1;\n        }\n\n        if (t2 >= 0 && t2 <= 1) {\n          roots[n++] = t2;\n        }\n      } else if (disc > 0) {\n        var discSqrt = mathSqrt(disc);\n        var Y1 = A * b + 1.5 * a * (-B + discSqrt);\n        var Y2 = A * b + 1.5 * a * (-B - discSqrt);\n\n        if (Y1 < 0) {\n          Y1 = -mathPow(-Y1, ONE_THIRD);\n        } else {\n          Y1 = mathPow(Y1, ONE_THIRD);\n        }\n\n        if (Y2 < 0) {\n          Y2 = -mathPow(-Y2, ONE_THIRD);\n        } else {\n          Y2 = mathPow(Y2, ONE_THIRD);\n        }\n\n        var t1 = (-b - (Y1 + Y2)) / (3 * a);\n\n        if (t1 >= 0 && t1 <= 1) {\n          roots[n++] = t1;\n        }\n      } else {\n        var T = (2 * A * b - 3 * a * B) / (2 * mathSqrt(A * A * A));\n        var theta = Math.acos(T) / 3;\n        var ASqrt = mathSqrt(A);\n        var tmp = Math.cos(theta);\n        var t1 = (-b - 2 * ASqrt * tmp) / (3 * a);\n        var t2 = (-b + ASqrt * (tmp + THREE_SQRT * Math.sin(theta))) / (3 * a);\n        var t3 = (-b + ASqrt * (tmp - THREE_SQRT * Math.sin(theta))) / (3 * a);\n\n        if (t1 >= 0 && t1 <= 1) {\n          roots[n++] = t1;\n        }\n\n        if (t2 >= 0 && t2 <= 1) {\n          roots[n++] = t2;\n        }\n\n        if (t3 >= 0 && t3 <= 1) {\n          roots[n++] = t3;\n        }\n      }\n    }\n\n    return n;\n  }\n\n  function cubicExtrema(p0, p1, p2, p3, extrema) {\n    var b = 6 * p2 - 12 * p1 + 6 * p0;\n    var a = 9 * p1 + 3 * p3 - 3 * p0 - 9 * p2;\n    var c = 3 * p1 - 3 * p0;\n    var n = 0;\n\n    if (isAroundZero(a)) {\n      if (isNotAroundZero(b)) {\n        var t1 = -c / b;\n\n        if (t1 >= 0 && t1 <= 1) {\n          extrema[n++] = t1;\n        }\n      }\n    } else {\n      var disc = b * b - 4 * a * c;\n\n      if (isAroundZero(disc)) {\n        extrema[0] = -b / (2 * a);\n      } else if (disc > 0) {\n        var discSqrt = mathSqrt(disc);\n        var t1 = (-b + discSqrt) / (2 * a);\n        var t2 = (-b - discSqrt) / (2 * a);\n\n        if (t1 >= 0 && t1 <= 1) {\n          extrema[n++] = t1;\n        }\n\n        if (t2 >= 0 && t2 <= 1) {\n          extrema[n++] = t2;\n        }\n      }\n    }\n\n    return n;\n  }\n\n  function cubicSubdivide(p0, p1, p2, p3, t, out) {\n    var p01 = (p1 - p0) * t + p0;\n    var p12 = (p2 - p1) * t + p1;\n    var p23 = (p3 - p2) * t + p2;\n    var p012 = (p12 - p01) * t + p01;\n    var p123 = (p23 - p12) * t + p12;\n    var p0123 = (p123 - p012) * t + p012;\n    out[0] = p0;\n    out[1] = p01;\n    out[2] = p012;\n    out[3] = p0123;\n    out[4] = p0123;\n    out[5] = p123;\n    out[6] = p23;\n    out[7] = p3;\n  }\n\n  function cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, out) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    var prev;\n    var next;\n    var d1;\n    var d2;\n    _v0[0] = x;\n    _v0[1] = y;\n\n    for (var _t = 0; _t < 1; _t += 0.05) {\n      _v1[0] = cubicAt(x0, x1, x2, x3, _t);\n      _v1[1] = cubicAt(y0, y1, y2, y3, _t);\n      d1 = distSquare(_v0, _v1);\n\n      if (d1 < d) {\n        t = _t;\n        d = d1;\n      }\n    }\n\n    d = Infinity;\n\n    for (var i = 0; i < 32; i++) {\n      if (interval < EPSILON_NUMERIC) {\n        break;\n      }\n\n      prev = t - interval;\n      next = t + interval;\n      _v1[0] = cubicAt(x0, x1, x2, x3, prev);\n      _v1[1] = cubicAt(y0, y1, y2, y3, prev);\n      d1 = distSquare(_v1, _v0);\n\n      if (prev >= 0 && d1 < d) {\n        t = prev;\n        d = d1;\n      } else {\n        _v2[0] = cubicAt(x0, x1, x2, x3, next);\n        _v2[1] = cubicAt(y0, y1, y2, y3, next);\n        d2 = distSquare(_v2, _v0);\n\n        if (next <= 1 && d2 < d) {\n          t = next;\n          d = d2;\n        } else {\n          interval *= 0.5;\n        }\n      }\n    }\n\n    if (out) {\n      out[0] = cubicAt(x0, x1, x2, x3, t);\n      out[1] = cubicAt(y0, y1, y2, y3, t);\n    }\n\n    return mathSqrt(d);\n  }\n\n  function cubicLength(x0, y0, x1, y1, x2, y2, x3, y3, iteration) {\n    var px = x0;\n    var py = y0;\n    var d = 0;\n    var step = 1 / iteration;\n\n    for (var i = 1; i <= iteration; i++) {\n      var t = i * step;\n      var x = cubicAt(x0, x1, x2, x3, t);\n      var y = cubicAt(y0, y1, y2, y3, t);\n      var dx = x - px;\n      var dy = y - py;\n      d += Math.sqrt(dx * dx + dy * dy);\n      px = x;\n      py = y;\n    }\n\n    return d;\n  }\n\n  function quadraticAt(p0, p1, p2, t) {\n    var onet = 1 - t;\n    return onet * (onet * p0 + 2 * t * p1) + t * t * p2;\n  }\n\n  function quadraticDerivativeAt(p0, p1, p2, t) {\n    return 2 * ((1 - t) * (p1 - p0) + t * (p2 - p1));\n  }\n\n  function quadraticRootAt(p0, p1, p2, val, roots) {\n    var a = p0 - 2 * p1 + p2;\n    var b = 2 * (p1 - p0);\n    var c = p0 - val;\n    var n = 0;\n\n    if (isAroundZero(a)) {\n      if (isNotAroundZero(b)) {\n        var t1 = -c / b;\n\n        if (t1 >= 0 && t1 <= 1) {\n          roots[n++] = t1;\n        }\n      }\n    } else {\n      var disc = b * b - 4 * a * c;\n\n      if (isAroundZero(disc)) {\n        var t1 = -b / (2 * a);\n\n        if (t1 >= 0 && t1 <= 1) {\n          roots[n++] = t1;\n        }\n      } else if (disc > 0) {\n        var discSqrt = mathSqrt(disc);\n        var t1 = (-b + discSqrt) / (2 * a);\n        var t2 = (-b - discSqrt) / (2 * a);\n\n        if (t1 >= 0 && t1 <= 1) {\n          roots[n++] = t1;\n        }\n\n        if (t2 >= 0 && t2 <= 1) {\n          roots[n++] = t2;\n        }\n      }\n    }\n\n    return n;\n  }\n\n  function quadraticExtremum(p0, p1, p2) {\n    var divider = p0 + p2 - 2 * p1;\n\n    if (divider === 0) {\n      return 0.5;\n    } else {\n      return (p0 - p1) / divider;\n    }\n  }\n\n  function quadraticSubdivide(p0, p1, p2, t, out) {\n    var p01 = (p1 - p0) * t + p0;\n    var p12 = (p2 - p1) * t + p1;\n    var p012 = (p12 - p01) * t + p01;\n    out[0] = p0;\n    out[1] = p01;\n    out[2] = p012;\n    out[3] = p012;\n    out[4] = p12;\n    out[5] = p2;\n  }\n\n  function quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, out) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    _v0[0] = x;\n    _v0[1] = y;\n\n    for (var _t = 0; _t < 1; _t += 0.05) {\n      _v1[0] = quadraticAt(x0, x1, x2, _t);\n      _v1[1] = quadraticAt(y0, y1, y2, _t);\n      var d1 = distSquare(_v0, _v1);\n\n      if (d1 < d) {\n        t = _t;\n        d = d1;\n      }\n    }\n\n    d = Infinity;\n\n    for (var i = 0; i < 32; i++) {\n      if (interval < EPSILON_NUMERIC) {\n        break;\n      }\n\n      var prev = t - interval;\n      var next = t + interval;\n      _v1[0] = quadraticAt(x0, x1, x2, prev);\n      _v1[1] = quadraticAt(y0, y1, y2, prev);\n      var d1 = distSquare(_v1, _v0);\n\n      if (prev >= 0 && d1 < d) {\n        t = prev;\n        d = d1;\n      } else {\n        _v2[0] = quadraticAt(x0, x1, x2, next);\n        _v2[1] = quadraticAt(y0, y1, y2, next);\n        var d2 = distSquare(_v2, _v0);\n\n        if (next <= 1 && d2 < d) {\n          t = next;\n          d = d2;\n        } else {\n          interval *= 0.5;\n        }\n      }\n    }\n\n    if (out) {\n      out[0] = quadraticAt(x0, x1, x2, t);\n      out[1] = quadraticAt(y0, y1, y2, t);\n    }\n\n    return mathSqrt(d);\n  }\n\n  function quadraticLength(x0, y0, x1, y1, x2, y2, iteration) {\n    var px = x0;\n    var py = y0;\n    var d = 0;\n    var step = 1 / iteration;\n\n    for (var i = 1; i <= iteration; i++) {\n      var t = i * step;\n      var x = quadraticAt(x0, x1, x2, t);\n      var y = quadraticAt(y0, y1, y2, t);\n      var dx = x - px;\n      var dy = y - py;\n      d += Math.sqrt(dx * dx + dy * dy);\n      px = x;\n      py = y;\n    }\n\n    return d;\n  }\n\n  var regexp = /cubic-bezier\\(([0-9,\\.e ]+)\\)/;\n\n  function createCubicEasingFunc(cubicEasingStr) {\n    var cubic = cubicEasingStr && regexp.exec(cubicEasingStr);\n\n    if (cubic) {\n      var points = cubic[1].split(',');\n      var a_1 = +trim(points[0]);\n      var b_1 = +trim(points[1]);\n      var c_1 = +trim(points[2]);\n      var d_1 = +trim(points[3]);\n\n      if (isNaN(a_1 + b_1 + c_1 + d_1)) {\n        return;\n      }\n\n      var roots_1 = [];\n      return function (p) {\n        return p <= 0 ? 0 : p >= 1 ? 1 : cubicRootAt(0, a_1, c_1, 1, p, roots_1) && cubicAt(0, b_1, d_1, 1, roots_1[0]);\n      };\n    }\n  }\n\n  var Clip = function () {\n    function Clip(opts) {\n      this._inited = false;\n      this._startTime = 0;\n      this._pausedTime = 0;\n      this._paused = false;\n      this._life = opts.life || 1000;\n      this._delay = opts.delay || 0;\n      this.loop = opts.loop || false;\n      this.onframe = opts.onframe || noop;\n      this.ondestroy = opts.ondestroy || noop;\n      this.onrestart = opts.onrestart || noop;\n      opts.easing && this.setEasing(opts.easing);\n    }\n\n    Clip.prototype.step = function (globalTime, deltaTime) {\n      if (!this._inited) {\n        this._startTime = globalTime + this._delay;\n        this._inited = true;\n      }\n\n      if (this._paused) {\n        this._pausedTime += deltaTime;\n        return;\n      }\n\n      var life = this._life;\n      var elapsedTime = globalTime - this._startTime - this._pausedTime;\n      var percent = elapsedTime / life;\n\n      if (percent < 0) {\n        percent = 0;\n      }\n\n      percent = Math.min(percent, 1);\n      var easingFunc = this.easingFunc;\n      var schedule = easingFunc ? easingFunc(percent) : percent;\n      this.onframe(schedule);\n\n      if (percent === 1) {\n        if (this.loop) {\n          var remainder = elapsedTime % life;\n          this._startTime = globalTime - remainder;\n          this._pausedTime = 0;\n          this.onrestart();\n        } else {\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    Clip.prototype.pause = function () {\n      this._paused = true;\n    };\n\n    Clip.prototype.resume = function () {\n      this._paused = false;\n    };\n\n    Clip.prototype.setEasing = function (easing) {\n      this.easing = easing;\n      this.easingFunc = isFunction(easing) ? easing : easingFuncs[easing] || createCubicEasingFunc(easing);\n    };\n\n    return Clip;\n  }();\n\n  var Entry = function () {\n    function Entry(val) {\n      this.value = val;\n    }\n\n    return Entry;\n  }();\n\n  var LinkedList = function () {\n    function LinkedList() {\n      this._len = 0;\n    }\n\n    LinkedList.prototype.insert = function (val) {\n      var entry = new Entry(val);\n      this.insertEntry(entry);\n      return entry;\n    };\n\n    LinkedList.prototype.insertEntry = function (entry) {\n      if (!this.head) {\n        this.head = this.tail = entry;\n      } else {\n        this.tail.next = entry;\n        entry.prev = this.tail;\n        entry.next = null;\n        this.tail = entry;\n      }\n\n      this._len++;\n    };\n\n    LinkedList.prototype.remove = function (entry) {\n      var prev = entry.prev;\n      var next = entry.next;\n\n      if (prev) {\n        prev.next = next;\n      } else {\n        this.head = next;\n      }\n\n      if (next) {\n        next.prev = prev;\n      } else {\n        this.tail = prev;\n      }\n\n      entry.next = entry.prev = null;\n      this._len--;\n    };\n\n    LinkedList.prototype.len = function () {\n      return this._len;\n    };\n\n    LinkedList.prototype.clear = function () {\n      this.head = this.tail = null;\n      this._len = 0;\n    };\n\n    return LinkedList;\n  }();\n\n  var LRU = function () {\n    function LRU(maxSize) {\n      this._list = new LinkedList();\n      this._maxSize = 10;\n      this._map = {};\n      this._maxSize = maxSize;\n    }\n\n    LRU.prototype.put = function (key, value) {\n      var list = this._list;\n      var map = this._map;\n      var removed = null;\n\n      if (map[key] == null) {\n        var len = list.len();\n        var entry = this._lastRemovedEntry;\n\n        if (len >= this._maxSize && len > 0) {\n          var leastUsedEntry = list.head;\n          list.remove(leastUsedEntry);\n          delete map[leastUsedEntry.key];\n          removed = leastUsedEntry.value;\n          this._lastRemovedEntry = leastUsedEntry;\n        }\n\n        if (entry) {\n          entry.value = value;\n        } else {\n          entry = new Entry(value);\n        }\n\n        entry.key = key;\n        list.insertEntry(entry);\n        map[key] = entry;\n      }\n\n      return removed;\n    };\n\n    LRU.prototype.get = function (key) {\n      var entry = this._map[key];\n      var list = this._list;\n\n      if (entry != null) {\n        if (entry !== list.tail) {\n          list.remove(entry);\n          list.insertEntry(entry);\n        }\n\n        return entry.value;\n      }\n    };\n\n    LRU.prototype.clear = function () {\n      this._list.clear();\n\n      this._map = {};\n    };\n\n    LRU.prototype.len = function () {\n      return this._list.len();\n    };\n\n    return LRU;\n  }();\n\n  var kCSSColorTable = {\n    'transparent': [0, 0, 0, 0],\n    'aliceblue': [240, 248, 255, 1],\n    'antiquewhite': [250, 235, 215, 1],\n    'aqua': [0, 255, 255, 1],\n    'aquamarine': [127, 255, 212, 1],\n    'azure': [240, 255, 255, 1],\n    'beige': [245, 245, 220, 1],\n    'bisque': [255, 228, 196, 1],\n    'black': [0, 0, 0, 1],\n    'blanchedalmond': [255, 235, 205, 1],\n    'blue': [0, 0, 255, 1],\n    'blueviolet': [138, 43, 226, 1],\n    'brown': [165, 42, 42, 1],\n    'burlywood': [222, 184, 135, 1],\n    'cadetblue': [95, 158, 160, 1],\n    'chartreuse': [127, 255, 0, 1],\n    'chocolate': [210, 105, 30, 1],\n    'coral': [255, 127, 80, 1],\n    'cornflowerblue': [100, 149, 237, 1],\n    'cornsilk': [255, 248, 220, 1],\n    'crimson': [220, 20, 60, 1],\n    'cyan': [0, 255, 255, 1],\n    'darkblue': [0, 0, 139, 1],\n    'darkcyan': [0, 139, 139, 1],\n    'darkgoldenrod': [184, 134, 11, 1],\n    'darkgray': [169, 169, 169, 1],\n    'darkgreen': [0, 100, 0, 1],\n    'darkgrey': [169, 169, 169, 1],\n    'darkkhaki': [189, 183, 107, 1],\n    'darkmagenta': [139, 0, 139, 1],\n    'darkolivegreen': [85, 107, 47, 1],\n    'darkorange': [255, 140, 0, 1],\n    'darkorchid': [153, 50, 204, 1],\n    'darkred': [139, 0, 0, 1],\n    'darksalmon': [233, 150, 122, 1],\n    'darkseagreen': [143, 188, 143, 1],\n    'darkslateblue': [72, 61, 139, 1],\n    'darkslategray': [47, 79, 79, 1],\n    'darkslategrey': [47, 79, 79, 1],\n    'darkturquoise': [0, 206, 209, 1],\n    'darkviolet': [148, 0, 211, 1],\n    'deeppink': [255, 20, 147, 1],\n    'deepskyblue': [0, 191, 255, 1],\n    'dimgray': [105, 105, 105, 1],\n    'dimgrey': [105, 105, 105, 1],\n    'dodgerblue': [30, 144, 255, 1],\n    'firebrick': [178, 34, 34, 1],\n    'floralwhite': [255, 250, 240, 1],\n    'forestgreen': [34, 139, 34, 1],\n    'fuchsia': [255, 0, 255, 1],\n    'gainsboro': [220, 220, 220, 1],\n    'ghostwhite': [248, 248, 255, 1],\n    'gold': [255, 215, 0, 1],\n    'goldenrod': [218, 165, 32, 1],\n    'gray': [128, 128, 128, 1],\n    'green': [0, 128, 0, 1],\n    'greenyellow': [173, 255, 47, 1],\n    'grey': [128, 128, 128, 1],\n    'honeydew': [240, 255, 240, 1],\n    'hotpink': [255, 105, 180, 1],\n    'indianred': [205, 92, 92, 1],\n    'indigo': [75, 0, 130, 1],\n    'ivory': [255, 255, 240, 1],\n    'khaki': [240, 230, 140, 1],\n    'lavender': [230, 230, 250, 1],\n    'lavenderblush': [255, 240, 245, 1],\n    'lawngreen': [124, 252, 0, 1],\n    'lemonchiffon': [255, 250, 205, 1],\n    'lightblue': [173, 216, 230, 1],\n    'lightcoral': [240, 128, 128, 1],\n    'lightcyan': [224, 255, 255, 1],\n    'lightgoldenrodyellow': [250, 250, 210, 1],\n    'lightgray': [211, 211, 211, 1],\n    'lightgreen': [144, 238, 144, 1],\n    'lightgrey': [211, 211, 211, 1],\n    'lightpink': [255, 182, 193, 1],\n    'lightsalmon': [255, 160, 122, 1],\n    'lightseagreen': [32, 178, 170, 1],\n    'lightskyblue': [135, 206, 250, 1],\n    'lightslategray': [119, 136, 153, 1],\n    'lightslategrey': [119, 136, 153, 1],\n    'lightsteelblue': [176, 196, 222, 1],\n    'lightyellow': [255, 255, 224, 1],\n    'lime': [0, 255, 0, 1],\n    'limegreen': [50, 205, 50, 1],\n    'linen': [250, 240, 230, 1],\n    'magenta': [255, 0, 255, 1],\n    'maroon': [128, 0, 0, 1],\n    'mediumaquamarine': [102, 205, 170, 1],\n    'mediumblue': [0, 0, 205, 1],\n    'mediumorchid': [186, 85, 211, 1],\n    'mediumpurple': [147, 112, 219, 1],\n    'mediumseagreen': [60, 179, 113, 1],\n    'mediumslateblue': [123, 104, 238, 1],\n    'mediumspringgreen': [0, 250, 154, 1],\n    'mediumturquoise': [72, 209, 204, 1],\n    'mediumvioletred': [199, 21, 133, 1],\n    'midnightblue': [25, 25, 112, 1],\n    'mintcream': [245, 255, 250, 1],\n    'mistyrose': [255, 228, 225, 1],\n    'moccasin': [255, 228, 181, 1],\n    'navajowhite': [255, 222, 173, 1],\n    'navy': [0, 0, 128, 1],\n    'oldlace': [253, 245, 230, 1],\n    'olive': [128, 128, 0, 1],\n    'olivedrab': [107, 142, 35, 1],\n    'orange': [255, 165, 0, 1],\n    'orangered': [255, 69, 0, 1],\n    'orchid': [218, 112, 214, 1],\n    'palegoldenrod': [238, 232, 170, 1],\n    'palegreen': [152, 251, 152, 1],\n    'paleturquoise': [175, 238, 238, 1],\n    'palevioletred': [219, 112, 147, 1],\n    'papayawhip': [255, 239, 213, 1],\n    'peachpuff': [255, 218, 185, 1],\n    'peru': [205, 133, 63, 1],\n    'pink': [255, 192, 203, 1],\n    'plum': [221, 160, 221, 1],\n    'powderblue': [176, 224, 230, 1],\n    'purple': [128, 0, 128, 1],\n    'red': [255, 0, 0, 1],\n    'rosybrown': [188, 143, 143, 1],\n    'royalblue': [65, 105, 225, 1],\n    'saddlebrown': [139, 69, 19, 1],\n    'salmon': [250, 128, 114, 1],\n    'sandybrown': [244, 164, 96, 1],\n    'seagreen': [46, 139, 87, 1],\n    'seashell': [255, 245, 238, 1],\n    'sienna': [160, 82, 45, 1],\n    'silver': [192, 192, 192, 1],\n    'skyblue': [135, 206, 235, 1],\n    'slateblue': [106, 90, 205, 1],\n    'slategray': [112, 128, 144, 1],\n    'slategrey': [112, 128, 144, 1],\n    'snow': [255, 250, 250, 1],\n    'springgreen': [0, 255, 127, 1],\n    'steelblue': [70, 130, 180, 1],\n    'tan': [210, 180, 140, 1],\n    'teal': [0, 128, 128, 1],\n    'thistle': [216, 191, 216, 1],\n    'tomato': [255, 99, 71, 1],\n    'turquoise': [64, 224, 208, 1],\n    'violet': [238, 130, 238, 1],\n    'wheat': [245, 222, 179, 1],\n    'white': [255, 255, 255, 1],\n    'whitesmoke': [245, 245, 245, 1],\n    'yellow': [255, 255, 0, 1],\n    'yellowgreen': [154, 205, 50, 1]\n  };\n\n  function clampCssByte(i) {\n    i = Math.round(i);\n    return i < 0 ? 0 : i > 255 ? 255 : i;\n  }\n\n  function clampCssAngle(i) {\n    i = Math.round(i);\n    return i < 0 ? 0 : i > 360 ? 360 : i;\n  }\n\n  function clampCssFloat(f) {\n    return f < 0 ? 0 : f > 1 ? 1 : f;\n  }\n\n  function parseCssInt(val) {\n    var str = val;\n\n    if (str.length && str.charAt(str.length - 1) === '%') {\n      return clampCssByte(parseFloat(str) / 100 * 255);\n    }\n\n    return clampCssByte(parseInt(str, 10));\n  }\n\n  function parseCssFloat(val) {\n    var str = val;\n\n    if (str.length && str.charAt(str.length - 1) === '%') {\n      return clampCssFloat(parseFloat(str) / 100);\n    }\n\n    return clampCssFloat(parseFloat(str));\n  }\n\n  function cssHueToRgb(m1, m2, h) {\n    if (h < 0) {\n      h += 1;\n    } else if (h > 1) {\n      h -= 1;\n    }\n\n    if (h * 6 < 1) {\n      return m1 + (m2 - m1) * h * 6;\n    }\n\n    if (h * 2 < 1) {\n      return m2;\n    }\n\n    if (h * 3 < 2) {\n      return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n    }\n\n    return m1;\n  }\n\n  function lerpNumber(a, b, p) {\n    return a + (b - a) * p;\n  }\n\n  function setRgba(out, r, g, b, a) {\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    out[3] = a;\n    return out;\n  }\n\n  function copyRgba(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n  }\n\n  var colorCache = new LRU(20);\n  var lastRemovedArr = null;\n\n  function putToCache(colorStr, rgbaArr) {\n    if (lastRemovedArr) {\n      copyRgba(lastRemovedArr, rgbaArr);\n    }\n\n    lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || rgbaArr.slice());\n  }\n\n  function parse(colorStr, rgbaArr) {\n    if (!colorStr) {\n      return;\n    }\n\n    rgbaArr = rgbaArr || [];\n    var cached = colorCache.get(colorStr);\n\n    if (cached) {\n      return copyRgba(rgbaArr, cached);\n    }\n\n    colorStr = colorStr + '';\n    var str = colorStr.replace(/ /g, '').toLowerCase();\n\n    if (str in kCSSColorTable) {\n      copyRgba(rgbaArr, kCSSColorTable[str]);\n      putToCache(colorStr, rgbaArr);\n      return rgbaArr;\n    }\n\n    var strLen = str.length;\n\n    if (str.charAt(0) === '#') {\n      if (strLen === 4 || strLen === 5) {\n        var iv = parseInt(str.slice(1, 4), 16);\n\n        if (!(iv >= 0 && iv <= 0xfff)) {\n          setRgba(rgbaArr, 0, 0, 0, 1);\n          return;\n        }\n\n        setRgba(rgbaArr, (iv & 0xf00) >> 4 | (iv & 0xf00) >> 8, iv & 0xf0 | (iv & 0xf0) >> 4, iv & 0xf | (iv & 0xf) << 4, strLen === 5 ? parseInt(str.slice(4), 16) / 0xf : 1);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n      } else if (strLen === 7 || strLen === 9) {\n        var iv = parseInt(str.slice(1, 7), 16);\n\n        if (!(iv >= 0 && iv <= 0xffffff)) {\n          setRgba(rgbaArr, 0, 0, 0, 1);\n          return;\n        }\n\n        setRgba(rgbaArr, (iv & 0xff0000) >> 16, (iv & 0xff00) >> 8, iv & 0xff, strLen === 9 ? parseInt(str.slice(7), 16) / 0xff : 1);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n      }\n\n      return;\n    }\n\n    var op = str.indexOf('(');\n    var ep = str.indexOf(')');\n\n    if (op !== -1 && ep + 1 === strLen) {\n      var fname = str.substr(0, op);\n      var params = str.substr(op + 1, ep - (op + 1)).split(',');\n      var alpha = 1;\n\n      switch (fname) {\n        case 'rgba':\n          if (params.length !== 4) {\n            return params.length === 3 ? setRgba(rgbaArr, +params[0], +params[1], +params[2], 1) : setRgba(rgbaArr, 0, 0, 0, 1);\n          }\n\n          alpha = parseCssFloat(params.pop());\n\n        case 'rgb':\n          if (params.length !== 3) {\n            setRgba(rgbaArr, 0, 0, 0, 1);\n            return;\n          }\n\n          setRgba(rgbaArr, parseCssInt(params[0]), parseCssInt(params[1]), parseCssInt(params[2]), alpha);\n          putToCache(colorStr, rgbaArr);\n          return rgbaArr;\n\n        case 'hsla':\n          if (params.length !== 4) {\n            setRgba(rgbaArr, 0, 0, 0, 1);\n            return;\n          }\n\n          params[3] = parseCssFloat(params[3]);\n          hsla2rgba(params, rgbaArr);\n          putToCache(colorStr, rgbaArr);\n          return rgbaArr;\n\n        case 'hsl':\n          if (params.length !== 3) {\n            setRgba(rgbaArr, 0, 0, 0, 1);\n            return;\n          }\n\n          hsla2rgba(params, rgbaArr);\n          putToCache(colorStr, rgbaArr);\n          return rgbaArr;\n\n        default:\n          return;\n      }\n    }\n\n    setRgba(rgbaArr, 0, 0, 0, 1);\n    return;\n  }\n\n  function hsla2rgba(hsla, rgba) {\n    var h = (parseFloat(hsla[0]) % 360 + 360) % 360 / 360;\n    var s = parseCssFloat(hsla[1]);\n    var l = parseCssFloat(hsla[2]);\n    var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    var m1 = l * 2 - m2;\n    rgba = rgba || [];\n    setRgba(rgba, clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255), clampCssByte(cssHueToRgb(m1, m2, h) * 255), clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255), 1);\n\n    if (hsla.length === 4) {\n      rgba[3] = hsla[3];\n    }\n\n    return rgba;\n  }\n\n  function rgba2hsla(rgba) {\n    if (!rgba) {\n      return;\n    }\n\n    var R = rgba[0] / 255;\n    var G = rgba[1] / 255;\n    var B = rgba[2] / 255;\n    var vMin = Math.min(R, G, B);\n    var vMax = Math.max(R, G, B);\n    var delta = vMax - vMin;\n    var L = (vMax + vMin) / 2;\n    var H;\n    var S;\n\n    if (delta === 0) {\n      H = 0;\n      S = 0;\n    } else {\n      if (L < 0.5) {\n        S = delta / (vMax + vMin);\n      } else {\n        S = delta / (2 - vMax - vMin);\n      }\n\n      var deltaR = ((vMax - R) / 6 + delta / 2) / delta;\n      var deltaG = ((vMax - G) / 6 + delta / 2) / delta;\n      var deltaB = ((vMax - B) / 6 + delta / 2) / delta;\n\n      if (R === vMax) {\n        H = deltaB - deltaG;\n      } else if (G === vMax) {\n        H = 1 / 3 + deltaR - deltaB;\n      } else if (B === vMax) {\n        H = 2 / 3 + deltaG - deltaR;\n      }\n\n      if (H < 0) {\n        H += 1;\n      }\n\n      if (H > 1) {\n        H -= 1;\n      }\n    }\n\n    var hsla = [H * 360, S, L];\n\n    if (rgba[3] != null) {\n      hsla.push(rgba[3]);\n    }\n\n    return hsla;\n  }\n\n  function lift(color, level) {\n    var colorArr = parse(color);\n\n    if (colorArr) {\n      for (var i = 0; i < 3; i++) {\n        if (level < 0) {\n          colorArr[i] = colorArr[i] * (1 - level) | 0;\n        } else {\n          colorArr[i] = (255 - colorArr[i]) * level + colorArr[i] | 0;\n        }\n\n        if (colorArr[i] > 255) {\n          colorArr[i] = 255;\n        } else if (colorArr[i] < 0) {\n          colorArr[i] = 0;\n        }\n      }\n\n      return stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\n    }\n  }\n\n  function toHex(color) {\n    var colorArr = parse(color);\n\n    if (colorArr) {\n      return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + +colorArr[2]).toString(16).slice(1);\n    }\n  }\n\n  function fastLerp(normalizedValue, colors, out) {\n    if (!(colors && colors.length) || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n      return;\n    }\n\n    out = out || [];\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = colors[leftIndex];\n    var rightColor = colors[rightIndex];\n    var dv = value - leftIndex;\n    out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\n    out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\n    out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\n    out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\n    return out;\n  }\n\n  var fastMapToColor = fastLerp;\n\n  function lerp$1(normalizedValue, colors, fullOutput) {\n    if (!(colors && colors.length) || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n      return;\n    }\n\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = parse(colors[leftIndex]);\n    var rightColor = parse(colors[rightIndex]);\n    var dv = value - leftIndex;\n    var color = stringify([clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)), clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)), clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)), clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))], 'rgba');\n    return fullOutput ? {\n      color: color,\n      leftIndex: leftIndex,\n      rightIndex: rightIndex,\n      value: value\n    } : color;\n  }\n\n  var mapToColor = lerp$1;\n\n  function modifyHSL(color, h, s, l) {\n    var colorArr = parse(color);\n\n    if (color) {\n      colorArr = rgba2hsla(colorArr);\n      h != null && (colorArr[0] = clampCssAngle(h));\n      s != null && (colorArr[1] = parseCssFloat(s));\n      l != null && (colorArr[2] = parseCssFloat(l));\n      return stringify(hsla2rgba(colorArr), 'rgba');\n    }\n  }\n\n  function modifyAlpha(color, alpha) {\n    var colorArr = parse(color);\n\n    if (colorArr && alpha != null) {\n      colorArr[3] = clampCssFloat(alpha);\n      return stringify(colorArr, 'rgba');\n    }\n  }\n\n  function stringify(arrColor, type) {\n    if (!arrColor || !arrColor.length) {\n      return;\n    }\n\n    var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n\n    if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n      colorStr += ',' + arrColor[3];\n    }\n\n    return type + '(' + colorStr + ')';\n  }\n\n  function lum(color, backgroundLum) {\n    var arr = parse(color);\n    return arr ? (0.299 * arr[0] + 0.587 * arr[1] + 0.114 * arr[2]) * arr[3] / 255 + (1 - arr[3]) * backgroundLum : 0;\n  }\n\n  function random() {\n    return stringify([Math.round(Math.random() * 255), Math.round(Math.random() * 255), Math.round(Math.random() * 255)], 'rgb');\n  }\n\n  var color = (Object.freeze || Object)({\n    parse: parse,\n    lift: lift,\n    toHex: toHex,\n    fastLerp: fastLerp,\n    fastMapToColor: fastMapToColor,\n    lerp: lerp$1,\n    mapToColor: mapToColor,\n    modifyHSL: modifyHSL,\n    modifyAlpha: modifyAlpha,\n    stringify: stringify,\n    lum: lum,\n    random: random\n  });\n  var mathRound = Math.round;\n\n  function normalizeColor(color) {\n    var opacity;\n\n    if (!color || color === 'transparent') {\n      color = 'none';\n    } else if (typeof color === 'string' && color.indexOf('rgba') > -1) {\n      var arr = parse(color);\n\n      if (arr) {\n        color = 'rgb(' + arr[0] + ',' + arr[1] + ',' + arr[2] + ')';\n        opacity = arr[3];\n      }\n    }\n\n    return {\n      color: color,\n      opacity: opacity == null ? 1 : opacity\n    };\n  }\n\n  var EPSILON$1 = 1e-4;\n\n  function isAroundZero$1(transform) {\n    return transform < EPSILON$1 && transform > -EPSILON$1;\n  }\n\n  function round3(transform) {\n    return mathRound(transform * 1e3) / 1e3;\n  }\n\n  function round4(transform) {\n    return mathRound(transform * 1e4) / 1e4;\n  }\n\n  function getMatrixStr(m) {\n    return 'matrix(' + round3(m[0]) + ',' + round3(m[1]) + ',' + round3(m[2]) + ',' + round3(m[3]) + ',' + round4(m[4]) + ',' + round4(m[5]) + ')';\n  }\n\n  var TEXT_ALIGN_TO_ANCHOR = {\n    left: 'start',\n    right: 'end',\n    center: 'middle',\n    middle: 'middle'\n  };\n\n  function adjustTextY(y, lineHeight, textBaseline) {\n    if (textBaseline === 'top') {\n      y += lineHeight / 2;\n    } else if (textBaseline === 'bottom') {\n      y -= lineHeight / 2;\n    }\n\n    return y;\n  }\n\n  function hasShadow(style) {\n    return style && (style.shadowBlur || style.shadowOffsetX || style.shadowOffsetY);\n  }\n\n  function getShadowKey(displayable) {\n    var style = displayable.style;\n    var globalScale = displayable.getGlobalScale();\n    return [style.shadowColor, (style.shadowBlur || 0).toFixed(2), (style.shadowOffsetX || 0).toFixed(2), (style.shadowOffsetY || 0).toFixed(2), globalScale[0], globalScale[1]].join(',');\n  }\n\n  function isImagePattern(val) {\n    return val && !!val.image;\n  }\n\n  function isSVGPattern(val) {\n    return val && !!val.svgElement;\n  }\n\n  function isPattern(val) {\n    return isImagePattern(val) || isSVGPattern(val);\n  }\n\n  function isLinearGradient(val) {\n    return val.type === 'linear';\n  }\n\n  function isRadialGradient(val) {\n    return val.type === 'radial';\n  }\n\n  function isGradient(val) {\n    return val && (val.type === 'linear' || val.type === 'radial');\n  }\n\n  function getIdURL(id) {\n    return \"url(#\" + id + \")\";\n  }\n\n  function getPathPrecision(el) {\n    var scale = el.getGlobalScale();\n    var size = Math.max(scale[0], scale[1]);\n    return Math.max(Math.ceil(Math.log(size) / Math.log(10)), 1);\n  }\n\n  function getSRTTransformString(transform) {\n    var x = transform.x || 0;\n    var y = transform.y || 0;\n    var rotation = (transform.rotation || 0) * RADIAN_TO_DEGREE;\n    var scaleX = retrieve2(transform.scaleX, 1);\n    var scaleY = retrieve2(transform.scaleY, 1);\n    var skewX = transform.skewX || 0;\n    var skewY = transform.skewY || 0;\n    var res = [];\n\n    if (x || y) {\n      res.push(\"translate(\" + x + \"px,\" + y + \"px)\");\n    }\n\n    if (rotation) {\n      res.push(\"rotate(\" + rotation + \")\");\n    }\n\n    if (scaleX !== 1 || scaleY !== 1) {\n      res.push(\"scale(\" + scaleX + \",\" + scaleY + \")\");\n    }\n\n    if (skewX || skewY) {\n      res.push(\"skew(\" + mathRound(skewX * RADIAN_TO_DEGREE) + \"deg, \" + mathRound(skewY * RADIAN_TO_DEGREE) + \"deg)\");\n    }\n\n    return res.join(' ');\n  }\n\n  var encodeBase64 = function () {\n    if (env.hasGlobalWindow && isFunction(window.btoa)) {\n      return function (str) {\n        return window.btoa(unescape(str));\n      };\n    }\n\n    if (typeof Buffer !== 'undefined') {\n      return function (str) {\n        return Buffer.from(str).toString('base64');\n      };\n    }\n\n    return function (str) {\n      {\n        logError('Base64 isn\\'t natively supported in the current environment.');\n      }\n      return null;\n    };\n  }();\n\n  var arraySlice = Array.prototype.slice;\n\n  function interpolateNumber(p0, p1, percent) {\n    return (p1 - p0) * percent + p0;\n  }\n\n  function interpolate1DArray(out, p0, p1, percent) {\n    var len = p0.length;\n\n    for (var i = 0; i < len; i++) {\n      out[i] = interpolateNumber(p0[i], p1[i], percent);\n    }\n\n    return out;\n  }\n\n  function interpolate2DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n\n    for (var i = 0; i < len; i++) {\n      if (!out[i]) {\n        out[i] = [];\n      }\n\n      for (var j = 0; j < len2; j++) {\n        out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\n      }\n    }\n\n    return out;\n  }\n\n  function add1DArray(out, p0, p1, sign) {\n    var len = p0.length;\n\n    for (var i = 0; i < len; i++) {\n      out[i] = p0[i] + p1[i] * sign;\n    }\n\n    return out;\n  }\n\n  function add2DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n\n    for (var i = 0; i < len; i++) {\n      if (!out[i]) {\n        out[i] = [];\n      }\n\n      for (var j = 0; j < len2; j++) {\n        out[i][j] = p0[i][j] + p1[i][j] * sign;\n      }\n    }\n\n    return out;\n  }\n\n  function fillColorStops(val0, val1) {\n    var len0 = val0.length;\n    var len1 = val1.length;\n    var shorterArr = len0 > len1 ? val1 : val0;\n    var shorterLen = Math.min(len0, len1);\n    var last = shorterArr[shorterLen - 1] || {\n      color: [0, 0, 0, 0],\n      offset: 0\n    };\n\n    for (var i = shorterLen; i < Math.max(len0, len1); i++) {\n      shorterArr.push({\n        offset: last.offset,\n        color: last.color.slice()\n      });\n    }\n  }\n\n  function fillArray(val0, val1, arrDim) {\n    var arr0 = val0;\n    var arr1 = val1;\n\n    if (!arr0.push || !arr1.push) {\n      return;\n    }\n\n    var arr0Len = arr0.length;\n    var arr1Len = arr1.length;\n\n    if (arr0Len !== arr1Len) {\n      var isPreviousLarger = arr0Len > arr1Len;\n\n      if (isPreviousLarger) {\n        arr0.length = arr1Len;\n      } else {\n        for (var i = arr0Len; i < arr1Len; i++) {\n          arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\n        }\n      }\n    }\n\n    var len2 = arr0[0] && arr0[0].length;\n\n    for (var i = 0; i < arr0.length; i++) {\n      if (arrDim === 1) {\n        if (isNaN(arr0[i])) {\n          arr0[i] = arr1[i];\n        }\n      } else {\n        for (var j = 0; j < len2; j++) {\n          if (isNaN(arr0[i][j])) {\n            arr0[i][j] = arr1[i][j];\n          }\n        }\n      }\n    }\n  }\n\n  function cloneValue(value) {\n    if (isArrayLike(value)) {\n      var len = value.length;\n\n      if (isArrayLike(value[0])) {\n        var ret = [];\n\n        for (var i = 0; i < len; i++) {\n          ret.push(arraySlice.call(value[i]));\n        }\n\n        return ret;\n      }\n\n      return arraySlice.call(value);\n    }\n\n    return value;\n  }\n\n  function rgba2String(rgba) {\n    rgba[0] = Math.floor(rgba[0]) || 0;\n    rgba[1] = Math.floor(rgba[1]) || 0;\n    rgba[2] = Math.floor(rgba[2]) || 0;\n    rgba[3] = rgba[3] == null ? 1 : rgba[3];\n    return 'rgba(' + rgba.join(',') + ')';\n  }\n\n  function guessArrayDim(value) {\n    return isArrayLike(value && value[0]) ? 2 : 1;\n  }\n\n  var VALUE_TYPE_NUMBER = 0;\n  var VALUE_TYPE_1D_ARRAY = 1;\n  var VALUE_TYPE_2D_ARRAY = 2;\n  var VALUE_TYPE_COLOR = 3;\n  var VALUE_TYPE_LINEAR_GRADIENT = 4;\n  var VALUE_TYPE_RADIAL_GRADIENT = 5;\n  var VALUE_TYPE_UNKOWN = 6;\n\n  function isGradientValueType(valType) {\n    return valType === VALUE_TYPE_LINEAR_GRADIENT || valType === VALUE_TYPE_RADIAL_GRADIENT;\n  }\n\n  function isArrayValueType(valType) {\n    return valType === VALUE_TYPE_1D_ARRAY || valType === VALUE_TYPE_2D_ARRAY;\n  }\n\n  var tmpRgba = [0, 0, 0, 0];\n\n  var Track = function () {\n    function Track(propName) {\n      this.keyframes = [];\n      this.discrete = false;\n      this._invalid = false;\n      this._needsSort = false;\n      this._lastFr = 0;\n      this._lastFrP = 0;\n      this.propName = propName;\n    }\n\n    Track.prototype.isFinished = function () {\n      return this._finished;\n    };\n\n    Track.prototype.setFinished = function () {\n      this._finished = true;\n\n      if (this._additiveTrack) {\n        this._additiveTrack.setFinished();\n      }\n    };\n\n    Track.prototype.needsAnimate = function () {\n      return this.keyframes.length >= 1;\n    };\n\n    Track.prototype.getAdditiveTrack = function () {\n      return this._additiveTrack;\n    };\n\n    Track.prototype.addKeyframe = function (time, rawValue, easing) {\n      this._needsSort = true;\n      var keyframes = this.keyframes;\n      var len = keyframes.length;\n      var discrete = false;\n      var valType = VALUE_TYPE_UNKOWN;\n      var value = rawValue;\n\n      if (isArrayLike(rawValue)) {\n        var arrayDim = guessArrayDim(rawValue);\n        valType = arrayDim;\n\n        if (arrayDim === 1 && !isNumber(rawValue[0]) || arrayDim === 2 && !isNumber(rawValue[0][0])) {\n          discrete = true;\n        }\n      } else {\n        if (isNumber(rawValue) && !eqNaN(rawValue)) {\n          valType = VALUE_TYPE_NUMBER;\n        } else if (isString(rawValue)) {\n          if (!isNaN(+rawValue)) {\n            valType = VALUE_TYPE_NUMBER;\n          } else {\n            var colorArray = parse(rawValue);\n\n            if (colorArray) {\n              value = colorArray;\n              valType = VALUE_TYPE_COLOR;\n            }\n          }\n        } else if (isGradientObject(rawValue)) {\n          var parsedGradient = extend({}, value);\n          parsedGradient.colorStops = map(rawValue.colorStops, function (colorStop) {\n            return {\n              offset: colorStop.offset,\n              color: parse(colorStop.color)\n            };\n          });\n\n          if (isLinearGradient(rawValue)) {\n            valType = VALUE_TYPE_LINEAR_GRADIENT;\n          } else if (isRadialGradient(rawValue)) {\n            valType = VALUE_TYPE_RADIAL_GRADIENT;\n          }\n\n          value = parsedGradient;\n        }\n      }\n\n      if (len === 0) {\n        this.valType = valType;\n      } else if (valType !== this.valType || valType === VALUE_TYPE_UNKOWN) {\n        discrete = true;\n      }\n\n      this.discrete = this.discrete || discrete;\n      var kf = {\n        time: time,\n        value: value,\n        rawValue: rawValue,\n        percent: 0\n      };\n\n      if (easing) {\n        kf.easing = easing;\n        kf.easingFunc = isFunction(easing) ? easing : easingFuncs[easing] || createCubicEasingFunc(easing);\n      }\n\n      keyframes.push(kf);\n      return kf;\n    };\n\n    Track.prototype.prepare = function (maxTime, additiveTrack) {\n      var kfs = this.keyframes;\n\n      if (this._needsSort) {\n        kfs.sort(function (a, b) {\n          return a.time - b.time;\n        });\n      }\n\n      var valType = this.valType;\n      var kfsLen = kfs.length;\n      var lastKf = kfs[kfsLen - 1];\n      var isDiscrete = this.discrete;\n      var isArr = isArrayValueType(valType);\n      var isGradient$$1 = isGradientValueType(valType);\n\n      for (var i = 0; i < kfsLen; i++) {\n        var kf = kfs[i];\n        var value = kf.value;\n        var lastValue = lastKf.value;\n        kf.percent = kf.time / maxTime;\n\n        if (!isDiscrete) {\n          if (isArr && i !== kfsLen - 1) {\n            fillArray(value, lastValue, valType);\n          } else if (isGradient$$1) {\n            fillColorStops(value.colorStops, lastValue.colorStops);\n          }\n        }\n      }\n\n      if (!isDiscrete && valType !== VALUE_TYPE_RADIAL_GRADIENT && additiveTrack && this.needsAnimate() && additiveTrack.needsAnimate() && valType === additiveTrack.valType && !additiveTrack._finished) {\n        this._additiveTrack = additiveTrack;\n        var startValue = kfs[0].value;\n\n        for (var i = 0; i < kfsLen; i++) {\n          if (valType === VALUE_TYPE_NUMBER) {\n            kfs[i].additiveValue = kfs[i].value - startValue;\n          } else if (valType === VALUE_TYPE_COLOR) {\n            kfs[i].additiveValue = add1DArray([], kfs[i].value, startValue, -1);\n          } else if (isArrayValueType(valType)) {\n            kfs[i].additiveValue = valType === VALUE_TYPE_1D_ARRAY ? add1DArray([], kfs[i].value, startValue, -1) : add2DArray([], kfs[i].value, startValue, -1);\n          }\n        }\n      }\n    };\n\n    Track.prototype.step = function (target, percent) {\n      if (this._finished) {\n        return;\n      }\n\n      if (this._additiveTrack && this._additiveTrack._finished) {\n        this._additiveTrack = null;\n      }\n\n      var isAdditive = this._additiveTrack != null;\n      var valueKey = isAdditive ? 'additiveValue' : 'value';\n      var valType = this.valType;\n      var keyframes = this.keyframes;\n      var kfsNum = keyframes.length;\n      var propName = this.propName;\n      var isValueColor = valType === VALUE_TYPE_COLOR;\n      var frameIdx;\n      var lastFrame = this._lastFr;\n      var mathMin = Math.min;\n      var frame;\n      var nextFrame;\n\n      if (kfsNum === 1) {\n        frame = nextFrame = keyframes[0];\n      } else {\n        if (percent < 0) {\n          frameIdx = 0;\n        } else if (percent < this._lastFrP) {\n          var start = mathMin(lastFrame + 1, kfsNum - 1);\n\n          for (frameIdx = start; frameIdx >= 0; frameIdx--) {\n            if (keyframes[frameIdx].percent <= percent) {\n              break;\n            }\n          }\n\n          frameIdx = mathMin(frameIdx, kfsNum - 2);\n        } else {\n          for (frameIdx = lastFrame; frameIdx < kfsNum; frameIdx++) {\n            if (keyframes[frameIdx].percent > percent) {\n              break;\n            }\n          }\n\n          frameIdx = mathMin(frameIdx - 1, kfsNum - 2);\n        }\n\n        nextFrame = keyframes[frameIdx + 1];\n        frame = keyframes[frameIdx];\n      }\n\n      if (!(frame && nextFrame)) {\n        return;\n      }\n\n      this._lastFr = frameIdx;\n      this._lastFrP = percent;\n      var interval = nextFrame.percent - frame.percent;\n      var w = interval === 0 ? 1 : mathMin((percent - frame.percent) / interval, 1);\n\n      if (nextFrame.easingFunc) {\n        w = nextFrame.easingFunc(w);\n      }\n\n      var targetArr = isAdditive ? this._additiveValue : isValueColor ? tmpRgba : target[propName];\n\n      if ((isArrayValueType(valType) || isValueColor) && !targetArr) {\n        targetArr = this._additiveValue = [];\n      }\n\n      if (this.discrete) {\n        target[propName] = w < 1 ? frame.rawValue : nextFrame.rawValue;\n      } else if (isArrayValueType(valType)) {\n        valType === VALUE_TYPE_1D_ARRAY ? interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w) : interpolate2DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n      } else if (isGradientValueType(valType)) {\n        var val = frame[valueKey];\n        var nextVal_1 = nextFrame[valueKey];\n        var isLinearGradient_1 = valType === VALUE_TYPE_LINEAR_GRADIENT;\n        target[propName] = {\n          type: isLinearGradient_1 ? 'linear' : 'radial',\n          x: interpolateNumber(val.x, nextVal_1.x, w),\n          y: interpolateNumber(val.y, nextVal_1.y, w),\n          colorStops: map(val.colorStops, function (colorStop, idx) {\n            var nextColorStop = nextVal_1.colorStops[idx];\n            return {\n              offset: interpolateNumber(colorStop.offset, nextColorStop.offset, w),\n              color: rgba2String(interpolate1DArray([], colorStop.color, nextColorStop.color, w))\n            };\n          }),\n          global: nextVal_1.global\n        };\n\n        if (isLinearGradient_1) {\n          target[propName].x2 = interpolateNumber(val.x2, nextVal_1.x2, w);\n          target[propName].y2 = interpolateNumber(val.y2, nextVal_1.y2, w);\n        } else {\n          target[propName].r = interpolateNumber(val.r, nextVal_1.r, w);\n        }\n      } else if (isValueColor) {\n        interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n\n        if (!isAdditive) {\n          target[propName] = rgba2String(targetArr);\n        }\n      } else {\n        var value = interpolateNumber(frame[valueKey], nextFrame[valueKey], w);\n\n        if (isAdditive) {\n          this._additiveValue = value;\n        } else {\n          target[propName] = value;\n        }\n      }\n\n      if (isAdditive) {\n        this._addToTarget(target);\n      }\n    };\n\n    Track.prototype._addToTarget = function (target) {\n      var valType = this.valType;\n      var propName = this.propName;\n      var additiveValue = this._additiveValue;\n\n      if (valType === VALUE_TYPE_NUMBER) {\n        target[propName] = target[propName] + additiveValue;\n      } else if (valType === VALUE_TYPE_COLOR) {\n        parse(target[propName], tmpRgba);\n        add1DArray(tmpRgba, tmpRgba, additiveValue, 1);\n        target[propName] = rgba2String(tmpRgba);\n      } else if (valType === VALUE_TYPE_1D_ARRAY) {\n        add1DArray(target[propName], target[propName], additiveValue, 1);\n      } else if (valType === VALUE_TYPE_2D_ARRAY) {\n        add2DArray(target[propName], target[propName], additiveValue, 1);\n      }\n    };\n\n    return Track;\n  }();\n\n  var Animator = function () {\n    function Animator(target, loop, allowDiscreteAnimation, additiveTo) {\n      this._tracks = {};\n      this._trackKeys = [];\n      this._maxTime = 0;\n      this._started = 0;\n      this._clip = null;\n      this._target = target;\n      this._loop = loop;\n\n      if (loop && additiveTo) {\n        logError('Can\\' use additive animation on looped animation.');\n        return;\n      }\n\n      this._additiveAnimators = additiveTo;\n      this._allowDiscrete = allowDiscreteAnimation;\n    }\n\n    Animator.prototype.getMaxTime = function () {\n      return this._maxTime;\n    };\n\n    Animator.prototype.getDelay = function () {\n      return this._delay;\n    };\n\n    Animator.prototype.getLoop = function () {\n      return this._loop;\n    };\n\n    Animator.prototype.getTarget = function () {\n      return this._target;\n    };\n\n    Animator.prototype.changeTarget = function (target) {\n      this._target = target;\n    };\n\n    Animator.prototype.when = function (time, props, easing) {\n      return this.whenWithKeys(time, props, keys(props), easing);\n    };\n\n    Animator.prototype.whenWithKeys = function (time, props, propNames, easing) {\n      var tracks = this._tracks;\n\n      for (var i = 0; i < propNames.length; i++) {\n        var propName = propNames[i];\n        var track = tracks[propName];\n\n        if (!track) {\n          track = tracks[propName] = new Track(propName);\n          var initialValue = void 0;\n\n          var additiveTrack = this._getAdditiveTrack(propName);\n\n          if (additiveTrack) {\n            var addtiveTrackKfs = additiveTrack.keyframes;\n            var lastFinalKf = addtiveTrackKfs[addtiveTrackKfs.length - 1];\n            initialValue = lastFinalKf && lastFinalKf.value;\n\n            if (additiveTrack.valType === VALUE_TYPE_COLOR && initialValue) {\n              initialValue = rgba2String(initialValue);\n            }\n          } else {\n            initialValue = this._target[propName];\n          }\n\n          if (initialValue == null) {\n            continue;\n          }\n\n          if (time > 0) {\n            track.addKeyframe(0, cloneValue(initialValue), easing);\n          }\n\n          this._trackKeys.push(propName);\n        }\n\n        track.addKeyframe(time, cloneValue(props[propName]), easing);\n      }\n\n      this._maxTime = Math.max(this._maxTime, time);\n      return this;\n    };\n\n    Animator.prototype.pause = function () {\n      this._clip.pause();\n\n      this._paused = true;\n    };\n\n    Animator.prototype.resume = function () {\n      this._clip.resume();\n\n      this._paused = false;\n    };\n\n    Animator.prototype.isPaused = function () {\n      return !!this._paused;\n    };\n\n    Animator.prototype.duration = function (duration) {\n      this._maxTime = duration;\n      this._force = true;\n      return this;\n    };\n\n    Animator.prototype._doneCallback = function () {\n      this._setTracksFinished();\n\n      this._clip = null;\n      var doneList = this._doneCbs;\n\n      if (doneList) {\n        var len = doneList.length;\n\n        for (var i = 0; i < len; i++) {\n          doneList[i].call(this);\n        }\n      }\n    };\n\n    Animator.prototype._abortedCallback = function () {\n      this._setTracksFinished();\n\n      var animation = this.animation;\n      var abortedList = this._abortedCbs;\n\n      if (animation) {\n        animation.removeClip(this._clip);\n      }\n\n      this._clip = null;\n\n      if (abortedList) {\n        for (var i = 0; i < abortedList.length; i++) {\n          abortedList[i].call(this);\n        }\n      }\n    };\n\n    Animator.prototype._setTracksFinished = function () {\n      var tracks = this._tracks;\n      var tracksKeys = this._trackKeys;\n\n      for (var i = 0; i < tracksKeys.length; i++) {\n        tracks[tracksKeys[i]].setFinished();\n      }\n    };\n\n    Animator.prototype._getAdditiveTrack = function (trackName) {\n      var additiveTrack;\n      var additiveAnimators = this._additiveAnimators;\n\n      if (additiveAnimators) {\n        for (var i = 0; i < additiveAnimators.length; i++) {\n          var track = additiveAnimators[i].getTrack(trackName);\n\n          if (track) {\n            additiveTrack = track;\n          }\n        }\n      }\n\n      return additiveTrack;\n    };\n\n    Animator.prototype.start = function (easing) {\n      if (this._started > 0) {\n        return;\n      }\n\n      this._started = 1;\n      var self = this;\n      var tracks = [];\n      var maxTime = this._maxTime || 0;\n\n      for (var i = 0; i < this._trackKeys.length; i++) {\n        var propName = this._trackKeys[i];\n        var track = this._tracks[propName];\n\n        var additiveTrack = this._getAdditiveTrack(propName);\n\n        var kfs = track.keyframes;\n        var kfsNum = kfs.length;\n        track.prepare(maxTime, additiveTrack);\n\n        if (track.needsAnimate()) {\n          if (!this._allowDiscrete && track.discrete) {\n            var lastKf = kfs[kfsNum - 1];\n\n            if (lastKf) {\n              self._target[track.propName] = lastKf.rawValue;\n            }\n\n            track.setFinished();\n          } else {\n            tracks.push(track);\n          }\n        }\n      }\n\n      if (tracks.length || this._force) {\n        var clip = new Clip({\n          life: maxTime,\n          loop: this._loop,\n          delay: this._delay || 0,\n          onframe: function (percent) {\n            self._started = 2;\n            var additiveAnimators = self._additiveAnimators;\n\n            if (additiveAnimators) {\n              var stillHasAdditiveAnimator = false;\n\n              for (var i = 0; i < additiveAnimators.length; i++) {\n                if (additiveAnimators[i]._clip) {\n                  stillHasAdditiveAnimator = true;\n                  break;\n                }\n              }\n\n              if (!stillHasAdditiveAnimator) {\n                self._additiveAnimators = null;\n              }\n            }\n\n            for (var i = 0; i < tracks.length; i++) {\n              tracks[i].step(self._target, percent);\n            }\n\n            var onframeList = self._onframeCbs;\n\n            if (onframeList) {\n              for (var i = 0; i < onframeList.length; i++) {\n                onframeList[i](self._target, percent);\n              }\n            }\n          },\n          ondestroy: function () {\n            self._doneCallback();\n          }\n        });\n        this._clip = clip;\n\n        if (this.animation) {\n          this.animation.addClip(clip);\n        }\n\n        if (easing) {\n          clip.setEasing(easing);\n        }\n      } else {\n        this._doneCallback();\n      }\n\n      return this;\n    };\n\n    Animator.prototype.stop = function (forwardToLast) {\n      if (!this._clip) {\n        return;\n      }\n\n      var clip = this._clip;\n\n      if (forwardToLast) {\n        clip.onframe(1);\n      }\n\n      this._abortedCallback();\n    };\n\n    Animator.prototype.delay = function (time) {\n      this._delay = time;\n      return this;\n    };\n\n    Animator.prototype.during = function (cb) {\n      if (cb) {\n        if (!this._onframeCbs) {\n          this._onframeCbs = [];\n        }\n\n        this._onframeCbs.push(cb);\n      }\n\n      return this;\n    };\n\n    Animator.prototype.done = function (cb) {\n      if (cb) {\n        if (!this._doneCbs) {\n          this._doneCbs = [];\n        }\n\n        this._doneCbs.push(cb);\n      }\n\n      return this;\n    };\n\n    Animator.prototype.aborted = function (cb) {\n      if (cb) {\n        if (!this._abortedCbs) {\n          this._abortedCbs = [];\n        }\n\n        this._abortedCbs.push(cb);\n      }\n\n      return this;\n    };\n\n    Animator.prototype.getClip = function () {\n      return this._clip;\n    };\n\n    Animator.prototype.getTrack = function (propName) {\n      return this._tracks[propName];\n    };\n\n    Animator.prototype.getTracks = function () {\n      var _this = this;\n\n      return map(this._trackKeys, function (key) {\n        return _this._tracks[key];\n      });\n    };\n\n    Animator.prototype.stopTracks = function (propNames, forwardToLast) {\n      if (!propNames.length || !this._clip) {\n        return true;\n      }\n\n      var tracks = this._tracks;\n      var tracksKeys = this._trackKeys;\n\n      for (var i = 0; i < propNames.length; i++) {\n        var track = tracks[propNames[i]];\n\n        if (track && !track.isFinished()) {\n          if (forwardToLast) {\n            track.step(this._target, 1);\n          } else if (this._started === 1) {\n            track.step(this._target, 0);\n          }\n\n          track.setFinished();\n        }\n      }\n\n      var allAborted = true;\n\n      for (var i = 0; i < tracksKeys.length; i++) {\n        if (!tracks[tracksKeys[i]].isFinished()) {\n          allAborted = false;\n          break;\n        }\n      }\n\n      if (allAborted) {\n        this._abortedCallback();\n      }\n\n      return allAborted;\n    };\n\n    Animator.prototype.saveTo = function (target, trackKeys, firstOrLast) {\n      if (!target) {\n        return;\n      }\n\n      trackKeys = trackKeys || this._trackKeys;\n\n      for (var i = 0; i < trackKeys.length; i++) {\n        var propName = trackKeys[i];\n        var track = this._tracks[propName];\n\n        if (!track || track.isFinished()) {\n          continue;\n        }\n\n        var kfs = track.keyframes;\n        var kf = kfs[firstOrLast ? 0 : kfs.length - 1];\n\n        if (kf) {\n          target[propName] = cloneValue(kf.rawValue);\n        }\n      }\n    };\n\n    Animator.prototype.__changeFinalValue = function (finalProps, trackKeys) {\n      trackKeys = trackKeys || keys(finalProps);\n\n      for (var i = 0; i < trackKeys.length; i++) {\n        var propName = trackKeys[i];\n        var track = this._tracks[propName];\n\n        if (!track) {\n          continue;\n        }\n\n        var kfs = track.keyframes;\n\n        if (kfs.length > 1) {\n          var lastKf = kfs.pop();\n          track.addKeyframe(lastKf.time, finalProps[propName]);\n          track.prepare(this._maxTime, track.getAdditiveTrack());\n        }\n      }\n    };\n\n    return Animator;\n  }();\n\n  function getTime() {\n    return new Date().getTime();\n  }\n\n  var Animation = function (_super) {\n    __extends(Animation, _super);\n\n    function Animation(opts) {\n      var _this = _super.call(this) || this;\n\n      _this._running = false;\n      _this._time = 0;\n      _this._pausedTime = 0;\n      _this._pauseStart = 0;\n      _this._paused = false;\n      opts = opts || {};\n      _this.stage = opts.stage || {};\n      return _this;\n    }\n\n    Animation.prototype.addClip = function (clip) {\n      if (clip.animation) {\n        this.removeClip(clip);\n      }\n\n      if (!this._head) {\n        this._head = this._tail = clip;\n      } else {\n        this._tail.next = clip;\n        clip.prev = this._tail;\n        clip.next = null;\n        this._tail = clip;\n      }\n\n      clip.animation = this;\n    };\n\n    Animation.prototype.addAnimator = function (animator) {\n      animator.animation = this;\n      var clip = animator.getClip();\n\n      if (clip) {\n        this.addClip(clip);\n      }\n    };\n\n    Animation.prototype.removeClip = function (clip) {\n      if (!clip.animation) {\n        return;\n      }\n\n      var prev = clip.prev;\n      var next = clip.next;\n\n      if (prev) {\n        prev.next = next;\n      } else {\n        this._head = next;\n      }\n\n      if (next) {\n        next.prev = prev;\n      } else {\n        this._tail = prev;\n      }\n\n      clip.next = clip.prev = clip.animation = null;\n    };\n\n    Animation.prototype.removeAnimator = function (animator) {\n      var clip = animator.getClip();\n\n      if (clip) {\n        this.removeClip(clip);\n      }\n\n      animator.animation = null;\n    };\n\n    Animation.prototype.update = function (notTriggerFrameAndStageUpdate) {\n      var time = getTime() - this._pausedTime;\n\n      var delta = time - this._time;\n      var clip = this._head;\n\n      while (clip) {\n        var nextClip = clip.next;\n        var finished = clip.step(time, delta);\n\n        if (finished) {\n          clip.ondestroy();\n          this.removeClip(clip);\n          clip = nextClip;\n        } else {\n          clip = nextClip;\n        }\n      }\n\n      this._time = time;\n\n      if (!notTriggerFrameAndStageUpdate) {\n        this.trigger('frame', delta);\n        this.stage.update && this.stage.update();\n      }\n    };\n\n    Animation.prototype._startLoop = function () {\n      var self = this;\n      this._running = true;\n\n      function step() {\n        if (self._running) {\n          requestAnimationFrame$1(step);\n          !self._paused && self.update();\n        }\n      }\n\n      requestAnimationFrame$1(step);\n    };\n\n    Animation.prototype.start = function () {\n      if (this._running) {\n        return;\n      }\n\n      this._time = getTime();\n      this._pausedTime = 0;\n\n      this._startLoop();\n    };\n\n    Animation.prototype.stop = function () {\n      this._running = false;\n    };\n\n    Animation.prototype.pause = function () {\n      if (!this._paused) {\n        this._pauseStart = getTime();\n        this._paused = true;\n      }\n    };\n\n    Animation.prototype.resume = function () {\n      if (this._paused) {\n        this._pausedTime += getTime() - this._pauseStart;\n        this._paused = false;\n      }\n    };\n\n    Animation.prototype.clear = function () {\n      var clip = this._head;\n\n      while (clip) {\n        var nextClip = clip.next;\n        clip.prev = clip.next = clip.animation = null;\n        clip = nextClip;\n      }\n\n      this._head = this._tail = null;\n    };\n\n    Animation.prototype.isFinished = function () {\n      return this._head == null;\n    };\n\n    Animation.prototype.animate = function (target, options) {\n      options = options || {};\n      this.start();\n      var animator = new Animator(target, options.loop);\n      this.addAnimator(animator);\n      return animator;\n    };\n\n    return Animation;\n  }(Eventful);\n\n  var TOUCH_CLICK_DELAY = 300;\n  var globalEventSupported = env.domSupported;\n\n  var localNativeListenerNames = function () {\n    var mouseHandlerNames = ['click', 'dblclick', 'mousewheel', 'wheel', 'mouseout', 'mouseup', 'mousedown', 'mousemove', 'contextmenu'];\n    var touchHandlerNames = ['touchstart', 'touchend', 'touchmove'];\n    var pointerEventNameMap = {\n      pointerdown: 1,\n      pointerup: 1,\n      pointermove: 1,\n      pointerout: 1\n    };\n    var pointerHandlerNames = map(mouseHandlerNames, function (name) {\n      var nm = name.replace('mouse', 'pointer');\n      return pointerEventNameMap.hasOwnProperty(nm) ? nm : name;\n    });\n    return {\n      mouse: mouseHandlerNames,\n      touch: touchHandlerNames,\n      pointer: pointerHandlerNames\n    };\n  }();\n\n  var globalNativeListenerNames = {\n    mouse: ['mousemove', 'mouseup'],\n    pointer: ['pointermove', 'pointerup']\n  };\n  var wheelEventSupported = false;\n\n  function isPointerFromTouch(event) {\n    var pointerType = event.pointerType;\n    return pointerType === 'pen' || pointerType === 'touch';\n  }\n\n  function setTouchTimer(scope) {\n    scope.touching = true;\n\n    if (scope.touchTimer != null) {\n      clearTimeout(scope.touchTimer);\n      scope.touchTimer = null;\n    }\n\n    scope.touchTimer = setTimeout(function () {\n      scope.touching = false;\n      scope.touchTimer = null;\n    }, 700);\n  }\n\n  function markTouch(event) {\n    event && (event.zrByTouch = true);\n  }\n\n  function normalizeGlobalEvent(instance, event) {\n    return normalizeEvent(instance.dom, new FakeGlobalEvent(instance, event), true);\n  }\n\n  function isLocalEl(instance, el) {\n    var elTmp = el;\n    var isLocal = false;\n\n    while (elTmp && elTmp.nodeType !== 9 && !(isLocal = elTmp.domBelongToZr || elTmp !== el && elTmp === instance.painterRoot)) {\n      elTmp = elTmp.parentNode;\n    }\n\n    return isLocal;\n  }\n\n  var FakeGlobalEvent = function () {\n    function FakeGlobalEvent(instance, event) {\n      this.stopPropagation = noop;\n      this.stopImmediatePropagation = noop;\n      this.preventDefault = noop;\n      this.type = event.type;\n      this.target = this.currentTarget = instance.dom;\n      this.pointerType = event.pointerType;\n      this.clientX = event.clientX;\n      this.clientY = event.clientY;\n    }\n\n    return FakeGlobalEvent;\n  }();\n\n  var localDOMHandlers = {\n    mousedown: function (event) {\n      event = normalizeEvent(this.dom, event);\n      this.__mayPointerCapture = [event.zrX, event.zrY];\n      this.trigger('mousedown', event);\n    },\n    mousemove: function (event) {\n      event = normalizeEvent(this.dom, event);\n      var downPoint = this.__mayPointerCapture;\n\n      if (downPoint && (event.zrX !== downPoint[0] || event.zrY !== downPoint[1])) {\n        this.__togglePointerCapture(true);\n      }\n\n      this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n      event = normalizeEvent(this.dom, event);\n\n      this.__togglePointerCapture(false);\n\n      this.trigger('mouseup', event);\n    },\n    mouseout: function (event) {\n      event = normalizeEvent(this.dom, event);\n      var element = event.toElement || event.relatedTarget;\n\n      if (!isLocalEl(this, element)) {\n        if (this.__pointerCapturing) {\n          event.zrEventControl = 'no_globalout';\n        }\n\n        this.trigger('mouseout', event);\n      }\n    },\n    wheel: function (event) {\n      wheelEventSupported = true;\n      event = normalizeEvent(this.dom, event);\n      this.trigger('mousewheel', event);\n    },\n    mousewheel: function (event) {\n      if (wheelEventSupported) {\n        return;\n      }\n\n      event = normalizeEvent(this.dom, event);\n      this.trigger('mousewheel', event);\n    },\n    touchstart: function (event) {\n      event = normalizeEvent(this.dom, event);\n      markTouch(event);\n      this.__lastTouchMoment = new Date();\n      this.handler.processGesture(event, 'start');\n      localDOMHandlers.mousemove.call(this, event);\n      localDOMHandlers.mousedown.call(this, event);\n    },\n    touchmove: function (event) {\n      event = normalizeEvent(this.dom, event);\n      markTouch(event);\n      this.handler.processGesture(event, 'change');\n      localDOMHandlers.mousemove.call(this, event);\n    },\n    touchend: function (event) {\n      event = normalizeEvent(this.dom, event);\n      markTouch(event);\n      this.handler.processGesture(event, 'end');\n      localDOMHandlers.mouseup.call(this, event);\n\n      if (+new Date() - +this.__lastTouchMoment < TOUCH_CLICK_DELAY) {\n        localDOMHandlers.click.call(this, event);\n      }\n    },\n    pointerdown: function (event) {\n      localDOMHandlers.mousedown.call(this, event);\n    },\n    pointermove: function (event) {\n      if (!isPointerFromTouch(event)) {\n        localDOMHandlers.mousemove.call(this, event);\n      }\n    },\n    pointerup: function (event) {\n      localDOMHandlers.mouseup.call(this, event);\n    },\n    pointerout: function (event) {\n      if (!isPointerFromTouch(event)) {\n        localDOMHandlers.mouseout.call(this, event);\n      }\n    }\n  };\n  each(['click', 'dblclick', 'contextmenu'], function (name) {\n    localDOMHandlers[name] = function (event) {\n      event = normalizeEvent(this.dom, event);\n      this.trigger(name, event);\n    };\n  });\n  var globalDOMHandlers = {\n    pointermove: function (event) {\n      if (!isPointerFromTouch(event)) {\n        globalDOMHandlers.mousemove.call(this, event);\n      }\n    },\n    pointerup: function (event) {\n      globalDOMHandlers.mouseup.call(this, event);\n    },\n    mousemove: function (event) {\n      this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n      var pointerCaptureReleasing = this.__pointerCapturing;\n\n      this.__togglePointerCapture(false);\n\n      this.trigger('mouseup', event);\n\n      if (pointerCaptureReleasing) {\n        event.zrEventControl = 'only_globalout';\n        this.trigger('mouseout', event);\n      }\n    }\n  };\n\n  function mountLocalDOMEventListeners(instance, scope) {\n    var domHandlers = scope.domHandlers;\n\n    if (env.pointerEventsSupported) {\n      each(localNativeListenerNames.pointer, function (nativeEventName) {\n        mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n          domHandlers[nativeEventName].call(instance, event);\n        });\n      });\n    } else {\n      if (env.touchEventsSupported) {\n        each(localNativeListenerNames.touch, function (nativeEventName) {\n          mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n            domHandlers[nativeEventName].call(instance, event);\n            setTouchTimer(scope);\n          });\n        });\n      }\n\n      each(localNativeListenerNames.mouse, function (nativeEventName) {\n        mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n          event = getNativeEvent(event);\n\n          if (!scope.touching) {\n            domHandlers[nativeEventName].call(instance, event);\n          }\n        });\n      });\n    }\n  }\n\n  function mountGlobalDOMEventListeners(instance, scope) {\n    if (env.pointerEventsSupported) {\n      each(globalNativeListenerNames.pointer, mount);\n    } else if (!env.touchEventsSupported) {\n      each(globalNativeListenerNames.mouse, mount);\n    }\n\n    function mount(nativeEventName) {\n      function nativeEventListener(event) {\n        event = getNativeEvent(event);\n\n        if (!isLocalEl(instance, event.target)) {\n          event = normalizeGlobalEvent(instance, event);\n          scope.domHandlers[nativeEventName].call(instance, event);\n        }\n      }\n\n      mountSingleDOMEventListener(scope, nativeEventName, nativeEventListener, {\n        capture: true\n      });\n    }\n  }\n\n  function mountSingleDOMEventListener(scope, nativeEventName, listener, opt) {\n    scope.mounted[nativeEventName] = listener;\n    scope.listenerOpts[nativeEventName] = opt;\n    addEventListener(scope.domTarget, nativeEventName, listener, opt);\n  }\n\n  function unmountDOMEventListeners(scope) {\n    var mounted = scope.mounted;\n\n    for (var nativeEventName in mounted) {\n      if (mounted.hasOwnProperty(nativeEventName)) {\n        removeEventListener(scope.domTarget, nativeEventName, mounted[nativeEventName], scope.listenerOpts[nativeEventName]);\n      }\n    }\n\n    scope.mounted = {};\n  }\n\n  var DOMHandlerScope = function () {\n    function DOMHandlerScope(domTarget, domHandlers) {\n      this.mounted = {};\n      this.listenerOpts = {};\n      this.touching = false;\n      this.domTarget = domTarget;\n      this.domHandlers = domHandlers;\n    }\n\n    return DOMHandlerScope;\n  }();\n\n  var HandlerDomProxy = function (_super) {\n    __extends(HandlerDomProxy, _super);\n\n    function HandlerDomProxy(dom, painterRoot) {\n      var _this = _super.call(this) || this;\n\n      _this.__pointerCapturing = false;\n      _this.dom = dom;\n      _this.painterRoot = painterRoot;\n      _this._localHandlerScope = new DOMHandlerScope(dom, localDOMHandlers);\n\n      if (globalEventSupported) {\n        _this._globalHandlerScope = new DOMHandlerScope(document, globalDOMHandlers);\n      }\n\n      mountLocalDOMEventListeners(_this, _this._localHandlerScope);\n      return _this;\n    }\n\n    HandlerDomProxy.prototype.dispose = function () {\n      unmountDOMEventListeners(this._localHandlerScope);\n\n      if (globalEventSupported) {\n        unmountDOMEventListeners(this._globalHandlerScope);\n      }\n    };\n\n    HandlerDomProxy.prototype.setCursor = function (cursorStyle) {\n      this.dom.style && (this.dom.style.cursor = cursorStyle || 'default');\n    };\n\n    HandlerDomProxy.prototype.__togglePointerCapture = function (isPointerCapturing) {\n      this.__mayPointerCapture = null;\n\n      if (globalEventSupported && +this.__pointerCapturing ^ +isPointerCapturing) {\n        this.__pointerCapturing = isPointerCapturing;\n        var globalHandlerScope = this._globalHandlerScope;\n        isPointerCapturing ? mountGlobalDOMEventListeners(this, globalHandlerScope) : unmountDOMEventListeners(globalHandlerScope);\n      }\n    };\n\n    return HandlerDomProxy;\n  }(Eventful);\n\n  var dpr = 1;\n\n  if (env.hasGlobalWindow) {\n    dpr = Math.max(window.devicePixelRatio || window.screen && window.screen.deviceXDPI / window.screen.logicalXDPI || 1, 1);\n  }\n\n  var devicePixelRatio = dpr;\n  var DARK_MODE_THRESHOLD = 0.4;\n  var DARK_LABEL_COLOR = '#333';\n  var LIGHT_LABEL_COLOR = '#ccc';\n  var LIGHTER_LABEL_COLOR = '#eee';\n\n  function create$1() {\n    return [1, 0, 0, 1, 0, 0];\n  }\n\n  function identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n  }\n\n  function copy$1(out, m) {\n    out[0] = m[0];\n    out[1] = m[1];\n    out[2] = m[2];\n    out[3] = m[3];\n    out[4] = m[4];\n    out[5] = m[5];\n    return out;\n  }\n\n  function mul$1(out, m1, m2) {\n    var out0 = m1[0] * m2[0] + m1[2] * m2[1];\n    var out1 = m1[1] * m2[0] + m1[3] * m2[1];\n    var out2 = m1[0] * m2[2] + m1[2] * m2[3];\n    var out3 = m1[1] * m2[2] + m1[3] * m2[3];\n    var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\n    var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n    out[0] = out0;\n    out[1] = out1;\n    out[2] = out2;\n    out[3] = out3;\n    out[4] = out4;\n    out[5] = out5;\n    return out;\n  }\n\n  function translate(out, a, v) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4] + v[0];\n    out[5] = a[5] + v[1];\n    return out;\n  }\n\n  function rotate(out, a, rad) {\n    var aa = a[0];\n    var ac = a[2];\n    var atx = a[4];\n    var ab = a[1];\n    var ad = a[3];\n    var aty = a[5];\n    var st = Math.sin(rad);\n    var ct = Math.cos(rad);\n    out[0] = aa * ct + ab * st;\n    out[1] = -aa * st + ab * ct;\n    out[2] = ac * ct + ad * st;\n    out[3] = -ac * st + ct * ad;\n    out[4] = ct * atx + st * aty;\n    out[5] = ct * aty - st * atx;\n    return out;\n  }\n\n  function scale$1(out, a, v) {\n    var vx = v[0];\n    var vy = v[1];\n    out[0] = a[0] * vx;\n    out[1] = a[1] * vy;\n    out[2] = a[2] * vx;\n    out[3] = a[3] * vy;\n    out[4] = a[4] * vx;\n    out[5] = a[5] * vy;\n    return out;\n  }\n\n  function invert(out, a) {\n    var aa = a[0];\n    var ac = a[2];\n    var atx = a[4];\n    var ab = a[1];\n    var ad = a[3];\n    var aty = a[5];\n    var det = aa * ad - ab * ac;\n\n    if (!det) {\n      return null;\n    }\n\n    det = 1.0 / det;\n    out[0] = ad * det;\n    out[1] = -ab * det;\n    out[2] = -ac * det;\n    out[3] = aa * det;\n    out[4] = (ac * aty - ad * atx) * det;\n    out[5] = (ab * atx - aa * aty) * det;\n    return out;\n  }\n\n  function clone$2(a) {\n    var b = create$1();\n    copy$1(b, a);\n    return b;\n  }\n\n  var matrix = (Object.freeze || Object)({\n    create: create$1,\n    identity: identity,\n    copy: copy$1,\n    mul: mul$1,\n    translate: translate,\n    rotate: rotate,\n    scale: scale$1,\n    invert: invert,\n    clone: clone$2\n  });\n  var mIdentity = identity;\n  var EPSILON$2 = 5e-5;\n\n  function isNotAroundZero$1(val) {\n    return val > EPSILON$2 || val < -EPSILON$2;\n  }\n\n  var scaleTmp = [];\n  var tmpTransform = [];\n  var originTransform = create$1();\n  var abs = Math.abs;\n\n  var Transformable = function () {\n    function Transformable() {}\n\n    Transformable.prototype.getLocalTransform = function (m) {\n      return Transformable.getLocalTransform(this, m);\n    };\n\n    Transformable.prototype.setPosition = function (arr) {\n      this.x = arr[0];\n      this.y = arr[1];\n    };\n\n    Transformable.prototype.setScale = function (arr) {\n      this.scaleX = arr[0];\n      this.scaleY = arr[1];\n    };\n\n    Transformable.prototype.setSkew = function (arr) {\n      this.skewX = arr[0];\n      this.skewY = arr[1];\n    };\n\n    Transformable.prototype.setOrigin = function (arr) {\n      this.originX = arr[0];\n      this.originY = arr[1];\n    };\n\n    Transformable.prototype.needLocalTransform = function () {\n      return isNotAroundZero$1(this.rotation) || isNotAroundZero$1(this.x) || isNotAroundZero$1(this.y) || isNotAroundZero$1(this.scaleX - 1) || isNotAroundZero$1(this.scaleY - 1) || isNotAroundZero$1(this.skewX) || isNotAroundZero$1(this.skewY);\n    };\n\n    Transformable.prototype.updateTransform = function () {\n      var parentTransform = this.parent && this.parent.transform;\n      var needLocalTransform = this.needLocalTransform();\n      var m = this.transform;\n\n      if (!(needLocalTransform || parentTransform)) {\n        m && mIdentity(m);\n        return;\n      }\n\n      m = m || create$1();\n\n      if (needLocalTransform) {\n        this.getLocalTransform(m);\n      } else {\n        mIdentity(m);\n      }\n\n      if (parentTransform) {\n        if (needLocalTransform) {\n          mul$1(m, parentTransform, m);\n        } else {\n          copy$1(m, parentTransform);\n        }\n      }\n\n      this.transform = m;\n\n      this._resolveGlobalScaleRatio(m);\n    };\n\n    Transformable.prototype._resolveGlobalScaleRatio = function (m) {\n      var globalScaleRatio = this.globalScaleRatio;\n\n      if (globalScaleRatio != null && globalScaleRatio !== 1) {\n        this.getGlobalScale(scaleTmp);\n        var relX = scaleTmp[0] < 0 ? -1 : 1;\n        var relY = scaleTmp[1] < 0 ? -1 : 1;\n        var sx = ((scaleTmp[0] - relX) * globalScaleRatio + relX) / scaleTmp[0] || 0;\n        var sy = ((scaleTmp[1] - relY) * globalScaleRatio + relY) / scaleTmp[1] || 0;\n        m[0] *= sx;\n        m[1] *= sx;\n        m[2] *= sy;\n        m[3] *= sy;\n      }\n\n      this.invTransform = this.invTransform || create$1();\n      invert(this.invTransform, m);\n    };\n\n    Transformable.prototype.getComputedTransform = function () {\n      var transformNode = this;\n      var ancestors = [];\n\n      while (transformNode) {\n        ancestors.push(transformNode);\n        transformNode = transformNode.parent;\n      }\n\n      while (transformNode = ancestors.pop()) {\n        transformNode.updateTransform();\n      }\n\n      return this.transform;\n    };\n\n    Transformable.prototype.setLocalTransform = function (m) {\n      if (!m) {\n        return;\n      }\n\n      var sx = m[0] * m[0] + m[1] * m[1];\n      var sy = m[2] * m[2] + m[3] * m[3];\n      var rotation = Math.atan2(m[1], m[0]);\n      var shearX = Math.PI / 2 + rotation - Math.atan2(m[3], m[2]);\n      sy = Math.sqrt(sy) * Math.cos(shearX);\n      sx = Math.sqrt(sx);\n      this.skewX = shearX;\n      this.skewY = 0;\n      this.rotation = -rotation;\n      this.x = +m[4];\n      this.y = +m[5];\n      this.scaleX = sx;\n      this.scaleY = sy;\n      this.originX = 0;\n      this.originY = 0;\n    };\n\n    Transformable.prototype.decomposeTransform = function () {\n      if (!this.transform) {\n        return;\n      }\n\n      var parent = this.parent;\n      var m = this.transform;\n\n      if (parent && parent.transform) {\n        mul$1(tmpTransform, parent.invTransform, m);\n        m = tmpTransform;\n      }\n\n      var ox = this.originX;\n      var oy = this.originY;\n\n      if (ox || oy) {\n        originTransform[4] = ox;\n        originTransform[5] = oy;\n        mul$1(tmpTransform, m, originTransform);\n        tmpTransform[4] -= ox;\n        tmpTransform[5] -= oy;\n        m = tmpTransform;\n      }\n\n      this.setLocalTransform(m);\n    };\n\n    Transformable.prototype.getGlobalScale = function (out) {\n      var m = this.transform;\n      out = out || [];\n\n      if (!m) {\n        out[0] = 1;\n        out[1] = 1;\n        return out;\n      }\n\n      out[0] = Math.sqrt(m[0] * m[0] + m[1] * m[1]);\n      out[1] = Math.sqrt(m[2] * m[2] + m[3] * m[3]);\n\n      if (m[0] < 0) {\n        out[0] = -out[0];\n      }\n\n      if (m[3] < 0) {\n        out[1] = -out[1];\n      }\n\n      return out;\n    };\n\n    Transformable.prototype.transformCoordToLocal = function (x, y) {\n      var v2 = [x, y];\n      var invTransform = this.invTransform;\n\n      if (invTransform) {\n        applyTransform(v2, v2, invTransform);\n      }\n\n      return v2;\n    };\n\n    Transformable.prototype.transformCoordToGlobal = function (x, y) {\n      var v2 = [x, y];\n      var transform = this.transform;\n\n      if (transform) {\n        applyTransform(v2, v2, transform);\n      }\n\n      return v2;\n    };\n\n    Transformable.prototype.getLineScale = function () {\n      var m = this.transform;\n      return m && abs(m[0] - 1) > 1e-10 && abs(m[3] - 1) > 1e-10 ? Math.sqrt(abs(m[0] * m[3] - m[2] * m[1])) : 1;\n    };\n\n    Transformable.prototype.copyTransform = function (source) {\n      copyTransform(this, source);\n    };\n\n    Transformable.getLocalTransform = function (target, m) {\n      m = m || [];\n      var ox = target.originX || 0;\n      var oy = target.originY || 0;\n      var sx = target.scaleX;\n      var sy = target.scaleY;\n      var ax = target.anchorX;\n      var ay = target.anchorY;\n      var rotation = target.rotation || 0;\n      var x = target.x;\n      var y = target.y;\n      var skewX = target.skewX ? Math.tan(target.skewX) : 0;\n      var skewY = target.skewY ? Math.tan(-target.skewY) : 0;\n\n      if (ox || oy || ax || ay) {\n        var dx = ox + ax;\n        var dy = oy + ay;\n        m[4] = -dx * sx - skewX * dy * sy;\n        m[5] = -dy * sy - skewY * dx * sx;\n      } else {\n        m[4] = m[5] = 0;\n      }\n\n      m[0] = sx;\n      m[3] = sy;\n      m[1] = skewY * sx;\n      m[2] = skewX * sy;\n      rotation && rotate(m, m, rotation);\n      m[4] += ox + x;\n      m[5] += oy + y;\n      return m;\n    };\n\n    Transformable.initDefaultProps = function () {\n      var proto = Transformable.prototype;\n      proto.scaleX = proto.scaleY = proto.globalScaleRatio = 1;\n      proto.x = proto.y = proto.originX = proto.originY = proto.skewX = proto.skewY = proto.rotation = proto.anchorX = proto.anchorY = 0;\n    }();\n\n    return Transformable;\n  }();\n\n  var TRANSFORMABLE_PROPS = ['x', 'y', 'originX', 'originY', 'anchorX', 'anchorY', 'rotation', 'scaleX', 'scaleY', 'skewX', 'skewY'];\n\n  function copyTransform(target, source) {\n    for (var i = 0; i < TRANSFORMABLE_PROPS.length; i++) {\n      var propName = TRANSFORMABLE_PROPS[i];\n      target[propName] = source[propName];\n    }\n  }\n\n  var Point = function () {\n    function Point(x, y) {\n      this.x = x || 0;\n      this.y = y || 0;\n    }\n\n    Point.prototype.copy = function (other) {\n      this.x = other.x;\n      this.y = other.y;\n      return this;\n    };\n\n    Point.prototype.clone = function () {\n      return new Point(this.x, this.y);\n    };\n\n    Point.prototype.set = function (x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    };\n\n    Point.prototype.equal = function (other) {\n      return other.x === this.x && other.y === this.y;\n    };\n\n    Point.prototype.add = function (other) {\n      this.x += other.x;\n      this.y += other.y;\n      return this;\n    };\n\n    Point.prototype.scale = function (scalar) {\n      this.x *= scalar;\n      this.y *= scalar;\n    };\n\n    Point.prototype.scaleAndAdd = function (other, scalar) {\n      this.x += other.x * scalar;\n      this.y += other.y * scalar;\n    };\n\n    Point.prototype.sub = function (other) {\n      this.x -= other.x;\n      this.y -= other.y;\n      return this;\n    };\n\n    Point.prototype.dot = function (other) {\n      return this.x * other.x + this.y * other.y;\n    };\n\n    Point.prototype.len = function () {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    };\n\n    Point.prototype.lenSquare = function () {\n      return this.x * this.x + this.y * this.y;\n    };\n\n    Point.prototype.normalize = function () {\n      var len = this.len();\n      this.x /= len;\n      this.y /= len;\n      return this;\n    };\n\n    Point.prototype.distance = function (other) {\n      var dx = this.x - other.x;\n      var dy = this.y - other.y;\n      return Math.sqrt(dx * dx + dy * dy);\n    };\n\n    Point.prototype.distanceSquare = function (other) {\n      var dx = this.x - other.x;\n      var dy = this.y - other.y;\n      return dx * dx + dy * dy;\n    };\n\n    Point.prototype.negate = function () {\n      this.x = -this.x;\n      this.y = -this.y;\n      return this;\n    };\n\n    Point.prototype.transform = function (m) {\n      if (!m) {\n        return;\n      }\n\n      var x = this.x;\n      var y = this.y;\n      this.x = m[0] * x + m[2] * y + m[4];\n      this.y = m[1] * x + m[3] * y + m[5];\n      return this;\n    };\n\n    Point.prototype.toArray = function (out) {\n      out[0] = this.x;\n      out[1] = this.y;\n      return out;\n    };\n\n    Point.prototype.fromArray = function (input) {\n      this.x = input[0];\n      this.y = input[1];\n    };\n\n    Point.set = function (p, x, y) {\n      p.x = x;\n      p.y = y;\n    };\n\n    Point.copy = function (p, p2) {\n      p.x = p2.x;\n      p.y = p2.y;\n    };\n\n    Point.len = function (p) {\n      return Math.sqrt(p.x * p.x + p.y * p.y);\n    };\n\n    Point.lenSquare = function (p) {\n      return p.x * p.x + p.y * p.y;\n    };\n\n    Point.dot = function (p0, p1) {\n      return p0.x * p1.x + p0.y * p1.y;\n    };\n\n    Point.add = function (out, p0, p1) {\n      out.x = p0.x + p1.x;\n      out.y = p0.y + p1.y;\n    };\n\n    Point.sub = function (out, p0, p1) {\n      out.x = p0.x - p1.x;\n      out.y = p0.y - p1.y;\n    };\n\n    Point.scale = function (out, p0, scalar) {\n      out.x = p0.x * scalar;\n      out.y = p0.y * scalar;\n    };\n\n    Point.scaleAndAdd = function (out, p0, p1, scalar) {\n      out.x = p0.x + p1.x * scalar;\n      out.y = p0.y + p1.y * scalar;\n    };\n\n    Point.lerp = function (out, p0, p1, t) {\n      var onet = 1 - t;\n      out.x = onet * p0.x + t * p1.x;\n      out.y = onet * p0.y + t * p1.y;\n    };\n\n    return Point;\n  }();\n\n  var mathMin = Math.min;\n  var mathMax = Math.max;\n  var lt = new Point();\n  var rb = new Point();\n  var lb = new Point();\n  var rt = new Point();\n  var minTv = new Point();\n  var maxTv = new Point();\n\n  var BoundingRect = function () {\n    function BoundingRect(x, y, width, height) {\n      if (width < 0) {\n        x = x + width;\n        width = -width;\n      }\n\n      if (height < 0) {\n        y = y + height;\n        height = -height;\n      }\n\n      this.x = x;\n      this.y = y;\n      this.width = width;\n      this.height = height;\n    }\n\n    BoundingRect.prototype.union = function (other) {\n      var x = mathMin(other.x, this.x);\n      var y = mathMin(other.y, this.y);\n\n      if (isFinite(this.x) && isFinite(this.width)) {\n        this.width = mathMax(other.x + other.width, this.x + this.width) - x;\n      } else {\n        this.width = other.width;\n      }\n\n      if (isFinite(this.y) && isFinite(this.height)) {\n        this.height = mathMax(other.y + other.height, this.y + this.height) - y;\n      } else {\n        this.height = other.height;\n      }\n\n      this.x = x;\n      this.y = y;\n    };\n\n    BoundingRect.prototype.applyTransform = function (m) {\n      BoundingRect.applyTransform(this, this, m);\n    };\n\n    BoundingRect.prototype.calculateTransform = function (b) {\n      var a = this;\n      var sx = b.width / a.width;\n      var sy = b.height / a.height;\n      var m = create$1();\n      translate(m, m, [-a.x, -a.y]);\n      scale$1(m, m, [sx, sy]);\n      translate(m, m, [b.x, b.y]);\n      return m;\n    };\n\n    BoundingRect.prototype.intersect = function (b, mtv) {\n      if (!b) {\n        return false;\n      }\n\n      if (!(b instanceof BoundingRect)) {\n        b = BoundingRect.create(b);\n      }\n\n      var a = this;\n      var ax0 = a.x;\n      var ax1 = a.x + a.width;\n      var ay0 = a.y;\n      var ay1 = a.y + a.height;\n      var bx0 = b.x;\n      var bx1 = b.x + b.width;\n      var by0 = b.y;\n      var by1 = b.y + b.height;\n      var overlap = !(ax1 < bx0 || bx1 < ax0 || ay1 < by0 || by1 < ay0);\n\n      if (mtv) {\n        var dMin = Infinity;\n        var dMax = 0;\n        var d0 = Math.abs(ax1 - bx0);\n        var d1 = Math.abs(bx1 - ax0);\n        var d2 = Math.abs(ay1 - by0);\n        var d3 = Math.abs(by1 - ay0);\n        var dx = Math.min(d0, d1);\n        var dy = Math.min(d2, d3);\n\n        if (ax1 < bx0 || bx1 < ax0) {\n          if (dx > dMax) {\n            dMax = dx;\n\n            if (d0 < d1) {\n              Point.set(maxTv, -d0, 0);\n            } else {\n              Point.set(maxTv, d1, 0);\n            }\n          }\n        } else {\n          if (dx < dMin) {\n            dMin = dx;\n\n            if (d0 < d1) {\n              Point.set(minTv, d0, 0);\n            } else {\n              Point.set(minTv, -d1, 0);\n            }\n          }\n        }\n\n        if (ay1 < by0 || by1 < ay0) {\n          if (dy > dMax) {\n            dMax = dy;\n\n            if (d2 < d3) {\n              Point.set(maxTv, 0, -d2);\n            } else {\n              Point.set(maxTv, 0, d3);\n            }\n          }\n        } else {\n          if (dx < dMin) {\n            dMin = dx;\n\n            if (d2 < d3) {\n              Point.set(minTv, 0, d2);\n            } else {\n              Point.set(minTv, 0, -d3);\n            }\n          }\n        }\n      }\n\n      if (mtv) {\n        Point.copy(mtv, overlap ? minTv : maxTv);\n      }\n\n      return overlap;\n    };\n\n    BoundingRect.prototype.contain = function (x, y) {\n      var rect = this;\n      return x >= rect.x && x <= rect.x + rect.width && y >= rect.y && y <= rect.y + rect.height;\n    };\n\n    BoundingRect.prototype.clone = function () {\n      return new BoundingRect(this.x, this.y, this.width, this.height);\n    };\n\n    BoundingRect.prototype.copy = function (other) {\n      BoundingRect.copy(this, other);\n    };\n\n    BoundingRect.prototype.plain = function () {\n      return {\n        x: this.x,\n        y: this.y,\n        width: this.width,\n        height: this.height\n      };\n    };\n\n    BoundingRect.prototype.isFinite = function () {\n      return isFinite(this.x) && isFinite(this.y) && isFinite(this.width) && isFinite(this.height);\n    };\n\n    BoundingRect.prototype.isZero = function () {\n      return this.width === 0 || this.height === 0;\n    };\n\n    BoundingRect.create = function (rect) {\n      return new BoundingRect(rect.x, rect.y, rect.width, rect.height);\n    };\n\n    BoundingRect.copy = function (target, source) {\n      target.x = source.x;\n      target.y = source.y;\n      target.width = source.width;\n      target.height = source.height;\n    };\n\n    BoundingRect.applyTransform = function (target, source, m) {\n      if (!m) {\n        if (target !== source) {\n          BoundingRect.copy(target, source);\n        }\n\n        return;\n      }\n\n      if (m[1] < 1e-5 && m[1] > -1e-5 && m[2] < 1e-5 && m[2] > -1e-5) {\n        var sx = m[0];\n        var sy = m[3];\n        var tx = m[4];\n        var ty = m[5];\n        target.x = source.x * sx + tx;\n        target.y = source.y * sy + ty;\n        target.width = source.width * sx;\n        target.height = source.height * sy;\n\n        if (target.width < 0) {\n          target.x += target.width;\n          target.width = -target.width;\n        }\n\n        if (target.height < 0) {\n          target.y += target.height;\n          target.height = -target.height;\n        }\n\n        return;\n      }\n\n      lt.x = lb.x = source.x;\n      lt.y = rt.y = source.y;\n      rb.x = rt.x = source.x + source.width;\n      rb.y = lb.y = source.y + source.height;\n      lt.transform(m);\n      rt.transform(m);\n      rb.transform(m);\n      lb.transform(m);\n      target.x = mathMin(lt.x, rb.x, lb.x, rt.x);\n      target.y = mathMin(lt.y, rb.y, lb.y, rt.y);\n      var maxX = mathMax(lt.x, rb.x, lb.x, rt.x);\n      var maxY = mathMax(lt.y, rb.y, lb.y, rt.y);\n      target.width = maxX - target.x;\n      target.height = maxY - target.y;\n    };\n\n    return BoundingRect;\n  }();\n\n  var textWidthCache = {};\n\n  function getWidth(text, font) {\n    font = font || DEFAULT_FONT;\n    var cacheOfFont = textWidthCache[font];\n\n    if (!cacheOfFont) {\n      cacheOfFont = textWidthCache[font] = new LRU(500);\n    }\n\n    var width = cacheOfFont.get(text);\n\n    if (width == null) {\n      width = platformApi.measureText(text, font).width;\n      cacheOfFont.put(text, width);\n    }\n\n    return width;\n  }\n\n  function innerGetBoundingRect(text, font, textAlign, textBaseline) {\n    var width = getWidth(text, font);\n    var height = getLineHeight(font);\n    var x = adjustTextX(0, width, textAlign);\n    var y = adjustTextY$1(0, height, textBaseline);\n    var rect = new BoundingRect(x, y, width, height);\n    return rect;\n  }\n\n  function getBoundingRect(text, font, textAlign, textBaseline) {\n    var textLines = ((text || '') + '').split('\\n');\n    var len = textLines.length;\n\n    if (len === 1) {\n      return innerGetBoundingRect(textLines[0], font, textAlign, textBaseline);\n    } else {\n      var uniondRect = new BoundingRect(0, 0, 0, 0);\n\n      for (var i = 0; i < textLines.length; i++) {\n        var rect = innerGetBoundingRect(textLines[i], font, textAlign, textBaseline);\n        i === 0 ? uniondRect.copy(rect) : uniondRect.union(rect);\n      }\n\n      return uniondRect;\n    }\n  }\n\n  function adjustTextX(x, width, textAlign) {\n    if (textAlign === 'right') {\n      x -= width;\n    } else if (textAlign === 'center') {\n      x -= width / 2;\n    }\n\n    return x;\n  }\n\n  function adjustTextY$1(y, height, verticalAlign) {\n    if (verticalAlign === 'middle') {\n      y -= height / 2;\n    } else if (verticalAlign === 'bottom') {\n      y -= height;\n    }\n\n    return y;\n  }\n\n  function getLineHeight(font) {\n    return getWidth('国', font);\n  }\n\n  function parsePercent(value, maxValue) {\n    if (typeof value === 'string') {\n      if (value.lastIndexOf('%') >= 0) {\n        return parseFloat(value) / 100 * maxValue;\n      }\n\n      return parseFloat(value);\n    }\n\n    return value;\n  }\n\n  function calculateTextPosition(out, opts, rect) {\n    var textPosition = opts.position || 'inside';\n    var distance = opts.distance != null ? opts.distance : 5;\n    var height = rect.height;\n    var width = rect.width;\n    var halfHeight = height / 2;\n    var x = rect.x;\n    var y = rect.y;\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n\n    if (textPosition instanceof Array) {\n      x += parsePercent(textPosition[0], rect.width);\n      y += parsePercent(textPosition[1], rect.height);\n      textAlign = null;\n      textVerticalAlign = null;\n    } else {\n      switch (textPosition) {\n        case 'left':\n          x -= distance;\n          y += halfHeight;\n          textAlign = 'right';\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'right':\n          x += distance + width;\n          y += halfHeight;\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'top':\n          x += width / 2;\n          y -= distance;\n          textAlign = 'center';\n          textVerticalAlign = 'bottom';\n          break;\n\n        case 'bottom':\n          x += width / 2;\n          y += height + distance;\n          textAlign = 'center';\n          break;\n\n        case 'inside':\n          x += width / 2;\n          y += halfHeight;\n          textAlign = 'center';\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'insideLeft':\n          x += distance;\n          y += halfHeight;\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'insideRight':\n          x += width - distance;\n          y += halfHeight;\n          textAlign = 'right';\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'insideTop':\n          x += width / 2;\n          y += distance;\n          textAlign = 'center';\n          break;\n\n        case 'insideBottom':\n          x += width / 2;\n          y += height - distance;\n          textAlign = 'center';\n          textVerticalAlign = 'bottom';\n          break;\n\n        case 'insideTopLeft':\n          x += distance;\n          y += distance;\n          break;\n\n        case 'insideTopRight':\n          x += width - distance;\n          y += distance;\n          textAlign = 'right';\n          break;\n\n        case 'insideBottomLeft':\n          x += distance;\n          y += height - distance;\n          textVerticalAlign = 'bottom';\n          break;\n\n        case 'insideBottomRight':\n          x += width - distance;\n          y += height - distance;\n          textAlign = 'right';\n          textVerticalAlign = 'bottom';\n          break;\n      }\n    }\n\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n  }\n\n  var PRESERVED_NORMAL_STATE = '__zr_normal__';\n  var PRIMARY_STATES_KEYS = TRANSFORMABLE_PROPS.concat(['ignore']);\n  var DEFAULT_ANIMATABLE_MAP = reduce(TRANSFORMABLE_PROPS, function (obj, key) {\n    obj[key] = true;\n    return obj;\n  }, {\n    ignore: false\n  });\n  var tmpTextPosCalcRes = {};\n  var tmpBoundingRect = new BoundingRect(0, 0, 0, 0);\n\n  var Element = function () {\n    function Element(props) {\n      this.id = guid();\n      this.animators = [];\n      this.currentStates = [];\n      this.states = {};\n\n      this._init(props);\n    }\n\n    Element.prototype._init = function (props) {\n      this.attr(props);\n    };\n\n    Element.prototype.drift = function (dx, dy, e) {\n      switch (this.draggable) {\n        case 'horizontal':\n          dy = 0;\n          break;\n\n        case 'vertical':\n          dx = 0;\n          break;\n      }\n\n      var m = this.transform;\n\n      if (!m) {\n        m = this.transform = [1, 0, 0, 1, 0, 0];\n      }\n\n      m[4] += dx;\n      m[5] += dy;\n      this.decomposeTransform();\n      this.markRedraw();\n    };\n\n    Element.prototype.beforeUpdate = function () {};\n\n    Element.prototype.afterUpdate = function () {};\n\n    Element.prototype.update = function () {\n      this.updateTransform();\n\n      if (this.__dirty) {\n        this.updateInnerText();\n      }\n    };\n\n    Element.prototype.updateInnerText = function (forceUpdate) {\n      var textEl = this._textContent;\n\n      if (textEl && (!textEl.ignore || forceUpdate)) {\n        if (!this.textConfig) {\n          this.textConfig = {};\n        }\n\n        var textConfig = this.textConfig;\n        var isLocal = textConfig.local;\n        var innerTransformable = textEl.innerTransformable;\n        var textAlign = void 0;\n        var textVerticalAlign = void 0;\n        var textStyleChanged = false;\n        innerTransformable.parent = isLocal ? this : null;\n        var innerOrigin = false;\n        innerTransformable.copyTransform(textEl);\n\n        if (textConfig.position != null) {\n          var layoutRect = tmpBoundingRect;\n\n          if (textConfig.layoutRect) {\n            layoutRect.copy(textConfig.layoutRect);\n          } else {\n            layoutRect.copy(this.getBoundingRect());\n          }\n\n          if (!isLocal) {\n            layoutRect.applyTransform(this.transform);\n          }\n\n          if (this.calculateTextPosition) {\n            this.calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n          } else {\n            calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n          }\n\n          innerTransformable.x = tmpTextPosCalcRes.x;\n          innerTransformable.y = tmpTextPosCalcRes.y;\n          textAlign = tmpTextPosCalcRes.align;\n          textVerticalAlign = tmpTextPosCalcRes.verticalAlign;\n          var textOrigin = textConfig.origin;\n\n          if (textOrigin && textConfig.rotation != null) {\n            var relOriginX = void 0;\n            var relOriginY = void 0;\n\n            if (textOrigin === 'center') {\n              relOriginX = layoutRect.width * 0.5;\n              relOriginY = layoutRect.height * 0.5;\n            } else {\n              relOriginX = parsePercent(textOrigin[0], layoutRect.width);\n              relOriginY = parsePercent(textOrigin[1], layoutRect.height);\n            }\n\n            innerOrigin = true;\n            innerTransformable.originX = -innerTransformable.x + relOriginX + (isLocal ? 0 : layoutRect.x);\n            innerTransformable.originY = -innerTransformable.y + relOriginY + (isLocal ? 0 : layoutRect.y);\n          }\n        }\n\n        if (textConfig.rotation != null) {\n          innerTransformable.rotation = textConfig.rotation;\n        }\n\n        var textOffset = textConfig.offset;\n\n        if (textOffset) {\n          innerTransformable.x += textOffset[0];\n          innerTransformable.y += textOffset[1];\n\n          if (!innerOrigin) {\n            innerTransformable.originX = -textOffset[0];\n            innerTransformable.originY = -textOffset[1];\n          }\n        }\n\n        var isInside = textConfig.inside == null ? typeof textConfig.position === 'string' && textConfig.position.indexOf('inside') >= 0 : textConfig.inside;\n        var innerTextDefaultStyle = this._innerTextDefaultStyle || (this._innerTextDefaultStyle = {});\n        var textFill = void 0;\n        var textStroke = void 0;\n        var autoStroke = void 0;\n\n        if (isInside && this.canBeInsideText()) {\n          textFill = textConfig.insideFill;\n          textStroke = textConfig.insideStroke;\n\n          if (textFill == null || textFill === 'auto') {\n            textFill = this.getInsideTextFill();\n          }\n\n          if (textStroke == null || textStroke === 'auto') {\n            textStroke = this.getInsideTextStroke(textFill);\n            autoStroke = true;\n          }\n        } else {\n          textFill = textConfig.outsideFill;\n          textStroke = textConfig.outsideStroke;\n\n          if (textFill == null || textFill === 'auto') {\n            textFill = this.getOutsideFill();\n          }\n\n          if (textStroke == null || textStroke === 'auto') {\n            textStroke = this.getOutsideStroke(textFill);\n            autoStroke = true;\n          }\n        }\n\n        textFill = textFill || '#000';\n\n        if (textFill !== innerTextDefaultStyle.fill || textStroke !== innerTextDefaultStyle.stroke || autoStroke !== innerTextDefaultStyle.autoStroke || textAlign !== innerTextDefaultStyle.align || textVerticalAlign !== innerTextDefaultStyle.verticalAlign) {\n          textStyleChanged = true;\n          innerTextDefaultStyle.fill = textFill;\n          innerTextDefaultStyle.stroke = textStroke;\n          innerTextDefaultStyle.autoStroke = autoStroke;\n          innerTextDefaultStyle.align = textAlign;\n          innerTextDefaultStyle.verticalAlign = textVerticalAlign;\n          textEl.setDefaultTextStyle(innerTextDefaultStyle);\n        }\n\n        textEl.__dirty |= REDRAW_BIT;\n\n        if (textStyleChanged) {\n          textEl.dirtyStyle(true);\n        }\n      }\n    };\n\n    Element.prototype.canBeInsideText = function () {\n      return true;\n    };\n\n    Element.prototype.getInsideTextFill = function () {\n      return '#fff';\n    };\n\n    Element.prototype.getInsideTextStroke = function (textFill) {\n      return '#000';\n    };\n\n    Element.prototype.getOutsideFill = function () {\n      return this.__zr && this.__zr.isDarkMode() ? LIGHT_LABEL_COLOR : DARK_LABEL_COLOR;\n    };\n\n    Element.prototype.getOutsideStroke = function (textFill) {\n      var backgroundColor = this.__zr && this.__zr.getBackgroundColor();\n\n      var colorArr = typeof backgroundColor === 'string' && parse(backgroundColor);\n\n      if (!colorArr) {\n        colorArr = [255, 255, 255, 1];\n      }\n\n      var alpha = colorArr[3];\n\n      var isDark = this.__zr.isDarkMode();\n\n      for (var i = 0; i < 3; i++) {\n        colorArr[i] = colorArr[i] * alpha + (isDark ? 0 : 255) * (1 - alpha);\n      }\n\n      colorArr[3] = 1;\n      return stringify(colorArr, 'rgba');\n    };\n\n    Element.prototype.traverse = function (cb, context) {};\n\n    Element.prototype.attrKV = function (key, value) {\n      if (key === 'textConfig') {\n        this.setTextConfig(value);\n      } else if (key === 'textContent') {\n        this.setTextContent(value);\n      } else if (key === 'clipPath') {\n        this.setClipPath(value);\n      } else if (key === 'extra') {\n        this.extra = this.extra || {};\n        extend(this.extra, value);\n      } else {\n        this[key] = value;\n      }\n    };\n\n    Element.prototype.hide = function () {\n      this.ignore = true;\n      this.markRedraw();\n    };\n\n    Element.prototype.show = function () {\n      this.ignore = false;\n      this.markRedraw();\n    };\n\n    Element.prototype.attr = function (keyOrObj, value) {\n      if (typeof keyOrObj === 'string') {\n        this.attrKV(keyOrObj, value);\n      } else if (isObject(keyOrObj)) {\n        var obj = keyOrObj;\n        var keysArr = keys(obj);\n\n        for (var i = 0; i < keysArr.length; i++) {\n          var key = keysArr[i];\n          this.attrKV(key, keyOrObj[key]);\n        }\n      }\n\n      this.markRedraw();\n      return this;\n    };\n\n    Element.prototype.saveCurrentToNormalState = function (toState) {\n      this._innerSaveToNormal(toState);\n\n      var normalState = this._normalState;\n\n      for (var i = 0; i < this.animators.length; i++) {\n        var animator = this.animators[i];\n        var fromStateTransition = animator.__fromStateTransition;\n\n        if (animator.getLoop() || fromStateTransition && fromStateTransition !== PRESERVED_NORMAL_STATE) {\n          continue;\n        }\n\n        var targetName = animator.targetName;\n        var target = targetName ? normalState[targetName] : normalState;\n        animator.saveTo(target);\n      }\n    };\n\n    Element.prototype._innerSaveToNormal = function (toState) {\n      var normalState = this._normalState;\n\n      if (!normalState) {\n        normalState = this._normalState = {};\n      }\n\n      if (toState.textConfig && !normalState.textConfig) {\n        normalState.textConfig = this.textConfig;\n      }\n\n      this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n\n    Element.prototype._savePrimaryToNormal = function (toState, normalState, primaryKeys) {\n      for (var i = 0; i < primaryKeys.length; i++) {\n        var key = primaryKeys[i];\n\n        if (toState[key] != null && !(key in normalState)) {\n          normalState[key] = this[key];\n        }\n      }\n    };\n\n    Element.prototype.hasState = function () {\n      return this.currentStates.length > 0;\n    };\n\n    Element.prototype.getState = function (name) {\n      return this.states[name];\n    };\n\n    Element.prototype.ensureState = function (name) {\n      var states = this.states;\n\n      if (!states[name]) {\n        states[name] = {};\n      }\n\n      return states[name];\n    };\n\n    Element.prototype.clearStates = function (noAnimation) {\n      this.useState(PRESERVED_NORMAL_STATE, false, noAnimation);\n    };\n\n    Element.prototype.useState = function (stateName, keepCurrentStates, noAnimation, forceUseHoverLayer) {\n      var toNormalState = stateName === PRESERVED_NORMAL_STATE;\n      var hasStates = this.hasState();\n\n      if (!hasStates && toNormalState) {\n        return;\n      }\n\n      var currentStates = this.currentStates;\n      var animationCfg = this.stateTransition;\n\n      if (indexOf(currentStates, stateName) >= 0 && (keepCurrentStates || currentStates.length === 1)) {\n        return;\n      }\n\n      var state;\n\n      if (this.stateProxy && !toNormalState) {\n        state = this.stateProxy(stateName);\n      }\n\n      if (!state) {\n        state = this.states && this.states[stateName];\n      }\n\n      if (!state && !toNormalState) {\n        logError(\"State \" + stateName + \" not exists.\");\n        return;\n      }\n\n      if (!toNormalState) {\n        this.saveCurrentToNormalState(state);\n      }\n\n      var useHoverLayer = !!(state && state.hoverLayer || forceUseHoverLayer);\n\n      if (useHoverLayer) {\n        this._toggleHoverLayerFlag(true);\n      }\n\n      this._applyStateObj(stateName, state, this._normalState, keepCurrentStates, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n\n      var textContent = this._textContent;\n      var textGuide = this._textGuide;\n\n      if (textContent) {\n        textContent.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n      }\n\n      if (textGuide) {\n        textGuide.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n      }\n\n      if (toNormalState) {\n        this.currentStates = [];\n        this._normalState = {};\n      } else {\n        if (!keepCurrentStates) {\n          this.currentStates = [stateName];\n        } else {\n          this.currentStates.push(stateName);\n        }\n      }\n\n      this._updateAnimationTargets();\n\n      this.markRedraw();\n\n      if (!useHoverLayer && this.__inHover) {\n        this._toggleHoverLayerFlag(false);\n\n        this.__dirty &= ~REDRAW_BIT;\n      }\n\n      return state;\n    };\n\n    Element.prototype.useStates = function (states, noAnimation, forceUseHoverLayer) {\n      if (!states.length) {\n        this.clearStates();\n      } else {\n        var stateObjects = [];\n        var currentStates = this.currentStates;\n        var len = states.length;\n        var notChange = len === currentStates.length;\n\n        if (notChange) {\n          for (var i = 0; i < len; i++) {\n            if (states[i] !== currentStates[i]) {\n              notChange = false;\n              break;\n            }\n          }\n        }\n\n        if (notChange) {\n          return;\n        }\n\n        for (var i = 0; i < len; i++) {\n          var stateName = states[i];\n          var stateObj = void 0;\n\n          if (this.stateProxy) {\n            stateObj = this.stateProxy(stateName, states);\n          }\n\n          if (!stateObj) {\n            stateObj = this.states[stateName];\n          }\n\n          if (stateObj) {\n            stateObjects.push(stateObj);\n          }\n        }\n\n        var lastStateObj = stateObjects[len - 1];\n        var useHoverLayer = !!(lastStateObj && lastStateObj.hoverLayer || forceUseHoverLayer);\n\n        if (useHoverLayer) {\n          this._toggleHoverLayerFlag(true);\n        }\n\n        var mergedState = this._mergeStates(stateObjects);\n\n        var animationCfg = this.stateTransition;\n        this.saveCurrentToNormalState(mergedState);\n\n        this._applyStateObj(states.join(','), mergedState, this._normalState, false, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n\n        if (textContent) {\n          textContent.useStates(states, noAnimation, useHoverLayer);\n        }\n\n        if (textGuide) {\n          textGuide.useStates(states, noAnimation, useHoverLayer);\n        }\n\n        this._updateAnimationTargets();\n\n        this.currentStates = states.slice();\n        this.markRedraw();\n\n        if (!useHoverLayer && this.__inHover) {\n          this._toggleHoverLayerFlag(false);\n\n          this.__dirty &= ~REDRAW_BIT;\n        }\n      }\n    };\n\n    Element.prototype._updateAnimationTargets = function () {\n      for (var i = 0; i < this.animators.length; i++) {\n        var animator = this.animators[i];\n\n        if (animator.targetName) {\n          animator.changeTarget(this[animator.targetName]);\n        }\n      }\n    };\n\n    Element.prototype.removeState = function (state) {\n      var idx = indexOf(this.currentStates, state);\n\n      if (idx >= 0) {\n        var currentStates = this.currentStates.slice();\n        currentStates.splice(idx, 1);\n        this.useStates(currentStates);\n      }\n    };\n\n    Element.prototype.replaceState = function (oldState, newState, forceAdd) {\n      var currentStates = this.currentStates.slice();\n      var idx = indexOf(currentStates, oldState);\n      var newStateExists = indexOf(currentStates, newState) >= 0;\n\n      if (idx >= 0) {\n        if (!newStateExists) {\n          currentStates[idx] = newState;\n        } else {\n          currentStates.splice(idx, 1);\n        }\n      } else if (forceAdd && !newStateExists) {\n        currentStates.push(newState);\n      }\n\n      this.useStates(currentStates);\n    };\n\n    Element.prototype.toggleState = function (state, enable) {\n      if (enable) {\n        this.useState(state, true);\n      } else {\n        this.removeState(state);\n      }\n    };\n\n    Element.prototype._mergeStates = function (states) {\n      var mergedState = {};\n      var mergedTextConfig;\n\n      for (var i = 0; i < states.length; i++) {\n        var state = states[i];\n        extend(mergedState, state);\n\n        if (state.textConfig) {\n          mergedTextConfig = mergedTextConfig || {};\n          extend(mergedTextConfig, state.textConfig);\n        }\n      }\n\n      if (mergedTextConfig) {\n        mergedState.textConfig = mergedTextConfig;\n      }\n\n      return mergedState;\n    };\n\n    Element.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n      var needsRestoreToNormal = !(state && keepCurrentStates);\n\n      if (state && state.textConfig) {\n        this.textConfig = extend({}, keepCurrentStates ? this.textConfig : normalState.textConfig);\n        extend(this.textConfig, state.textConfig);\n      } else if (needsRestoreToNormal) {\n        if (normalState.textConfig) {\n          this.textConfig = normalState.textConfig;\n        }\n      }\n\n      var transitionTarget = {};\n      var hasTransition = false;\n\n      for (var i = 0; i < PRIMARY_STATES_KEYS.length; i++) {\n        var key = PRIMARY_STATES_KEYS[i];\n        var propNeedsTransition = transition && DEFAULT_ANIMATABLE_MAP[key];\n\n        if (state && state[key] != null) {\n          if (propNeedsTransition) {\n            hasTransition = true;\n            transitionTarget[key] = state[key];\n          } else {\n            this[key] = state[key];\n          }\n        } else if (needsRestoreToNormal) {\n          if (normalState[key] != null) {\n            if (propNeedsTransition) {\n              hasTransition = true;\n              transitionTarget[key] = normalState[key];\n            } else {\n              this[key] = normalState[key];\n            }\n          }\n        }\n      }\n\n      if (!transition) {\n        for (var i = 0; i < this.animators.length; i++) {\n          var animator = this.animators[i];\n          var targetName = animator.targetName;\n\n          if (!animator.getLoop()) {\n            animator.__changeFinalValue(targetName ? (state || normalState)[targetName] : state || normalState);\n          }\n        }\n      }\n\n      if (hasTransition) {\n        this._transitionState(stateName, transitionTarget, animationCfg);\n      }\n    };\n\n    Element.prototype._attachComponent = function (componentEl) {\n      if (componentEl.__zr && !componentEl.__hostTarget) {\n        {\n          throw new Error('Text element has been added to zrender.');\n        }\n        return;\n      }\n\n      if (componentEl === this) {\n        {\n          throw new Error('Recursive component attachment.');\n        }\n        return;\n      }\n\n      var zr = this.__zr;\n\n      if (zr) {\n        componentEl.addSelfToZr(zr);\n      }\n\n      componentEl.__zr = zr;\n      componentEl.__hostTarget = this;\n    };\n\n    Element.prototype._detachComponent = function (componentEl) {\n      if (componentEl.__zr) {\n        componentEl.removeSelfFromZr(componentEl.__zr);\n      }\n\n      componentEl.__zr = null;\n      componentEl.__hostTarget = null;\n    };\n\n    Element.prototype.getClipPath = function () {\n      return this._clipPath;\n    };\n\n    Element.prototype.setClipPath = function (clipPath) {\n      if (this._clipPath && this._clipPath !== clipPath) {\n        this.removeClipPath();\n      }\n\n      this._attachComponent(clipPath);\n\n      this._clipPath = clipPath;\n      this.markRedraw();\n    };\n\n    Element.prototype.removeClipPath = function () {\n      var clipPath = this._clipPath;\n\n      if (clipPath) {\n        this._detachComponent(clipPath);\n\n        this._clipPath = null;\n        this.markRedraw();\n      }\n    };\n\n    Element.prototype.getTextContent = function () {\n      return this._textContent;\n    };\n\n    Element.prototype.setTextContent = function (textEl) {\n      var previousTextContent = this._textContent;\n\n      if (previousTextContent === textEl) {\n        return;\n      }\n\n      if (previousTextContent && previousTextContent !== textEl) {\n        this.removeTextContent();\n      }\n\n      {\n        if (textEl.__zr && !textEl.__hostTarget) {\n          throw new Error('Text element has been added to zrender.');\n        }\n      }\n      textEl.innerTransformable = new Transformable();\n\n      this._attachComponent(textEl);\n\n      this._textContent = textEl;\n      this.markRedraw();\n    };\n\n    Element.prototype.setTextConfig = function (cfg) {\n      if (!this.textConfig) {\n        this.textConfig = {};\n      }\n\n      extend(this.textConfig, cfg);\n      this.markRedraw();\n    };\n\n    Element.prototype.removeTextConfig = function () {\n      this.textConfig = null;\n      this.markRedraw();\n    };\n\n    Element.prototype.removeTextContent = function () {\n      var textEl = this._textContent;\n\n      if (textEl) {\n        textEl.innerTransformable = null;\n\n        this._detachComponent(textEl);\n\n        this._textContent = null;\n        this._innerTextDefaultStyle = null;\n        this.markRedraw();\n      }\n    };\n\n    Element.prototype.getTextGuideLine = function () {\n      return this._textGuide;\n    };\n\n    Element.prototype.setTextGuideLine = function (guideLine) {\n      if (this._textGuide && this._textGuide !== guideLine) {\n        this.removeTextGuideLine();\n      }\n\n      this._attachComponent(guideLine);\n\n      this._textGuide = guideLine;\n      this.markRedraw();\n    };\n\n    Element.prototype.removeTextGuideLine = function () {\n      var textGuide = this._textGuide;\n\n      if (textGuide) {\n        this._detachComponent(textGuide);\n\n        this._textGuide = null;\n        this.markRedraw();\n      }\n    };\n\n    Element.prototype.markRedraw = function () {\n      this.__dirty |= REDRAW_BIT;\n      var zr = this.__zr;\n\n      if (zr) {\n        if (this.__inHover) {\n          zr.refreshHover();\n        } else {\n          zr.refresh();\n        }\n      }\n\n      if (this.__hostTarget) {\n        this.__hostTarget.markRedraw();\n      }\n    };\n\n    Element.prototype.dirty = function () {\n      this.markRedraw();\n    };\n\n    Element.prototype._toggleHoverLayerFlag = function (inHover) {\n      this.__inHover = inHover;\n      var textContent = this._textContent;\n      var textGuide = this._textGuide;\n\n      if (textContent) {\n        textContent.__inHover = inHover;\n      }\n\n      if (textGuide) {\n        textGuide.__inHover = inHover;\n      }\n    };\n\n    Element.prototype.addSelfToZr = function (zr) {\n      if (this.__zr === zr) {\n        return;\n      }\n\n      this.__zr = zr;\n      var animators = this.animators;\n\n      if (animators) {\n        for (var i = 0; i < animators.length; i++) {\n          zr.animation.addAnimator(animators[i]);\n        }\n      }\n\n      if (this._clipPath) {\n        this._clipPath.addSelfToZr(zr);\n      }\n\n      if (this._textContent) {\n        this._textContent.addSelfToZr(zr);\n      }\n\n      if (this._textGuide) {\n        this._textGuide.addSelfToZr(zr);\n      }\n    };\n\n    Element.prototype.removeSelfFromZr = function (zr) {\n      if (!this.__zr) {\n        return;\n      }\n\n      this.__zr = null;\n      var animators = this.animators;\n\n      if (animators) {\n        for (var i = 0; i < animators.length; i++) {\n          zr.animation.removeAnimator(animators[i]);\n        }\n      }\n\n      if (this._clipPath) {\n        this._clipPath.removeSelfFromZr(zr);\n      }\n\n      if (this._textContent) {\n        this._textContent.removeSelfFromZr(zr);\n      }\n\n      if (this._textGuide) {\n        this._textGuide.removeSelfFromZr(zr);\n      }\n    };\n\n    Element.prototype.animate = function (key, loop, allowDiscreteAnimation) {\n      var target = key ? this[key] : this;\n      {\n        if (!target) {\n          logError('Property \"' + key + '\" is not existed in element ' + this.id);\n          return;\n        }\n      }\n      var animator = new Animator(target, loop, allowDiscreteAnimation);\n      key && (animator.targetName = key);\n      this.addAnimator(animator, key);\n      return animator;\n    };\n\n    Element.prototype.addAnimator = function (animator, key) {\n      var zr = this.__zr;\n      var el = this;\n      animator.during(function () {\n        el.updateDuringAnimation(key);\n      }).done(function () {\n        var animators = el.animators;\n        var idx = indexOf(animators, animator);\n\n        if (idx >= 0) {\n          animators.splice(idx, 1);\n        }\n      });\n      this.animators.push(animator);\n\n      if (zr) {\n        zr.animation.addAnimator(animator);\n      }\n\n      zr && zr.wakeUp();\n    };\n\n    Element.prototype.updateDuringAnimation = function (key) {\n      this.markRedraw();\n    };\n\n    Element.prototype.stopAnimation = function (scope, forwardToLast) {\n      var animators = this.animators;\n      var len = animators.length;\n      var leftAnimators = [];\n\n      for (var i = 0; i < len; i++) {\n        var animator = animators[i];\n\n        if (!scope || scope === animator.scope) {\n          animator.stop(forwardToLast);\n        } else {\n          leftAnimators.push(animator);\n        }\n      }\n\n      this.animators = leftAnimators;\n      return this;\n    };\n\n    Element.prototype.animateTo = function (target, cfg, animationProps) {\n      animateTo(this, target, cfg, animationProps);\n    };\n\n    Element.prototype.animateFrom = function (target, cfg, animationProps) {\n      animateTo(this, target, cfg, animationProps, true);\n    };\n\n    Element.prototype._transitionState = function (stateName, target, cfg, animationProps) {\n      var animators = animateTo(this, target, cfg, animationProps);\n\n      for (var i = 0; i < animators.length; i++) {\n        animators[i].__fromStateTransition = stateName;\n      }\n    };\n\n    Element.prototype.getBoundingRect = function () {\n      return null;\n    };\n\n    Element.prototype.getPaintRect = function () {\n      return null;\n    };\n\n    Element.initDefaultProps = function () {\n      var elProto = Element.prototype;\n      elProto.type = 'element';\n      elProto.name = '';\n      elProto.ignore = elProto.silent = elProto.isGroup = elProto.draggable = elProto.dragging = elProto.ignoreClip = elProto.__inHover = false;\n      elProto.__dirty = REDRAW_BIT;\n      var logs = {};\n\n      function logDeprecatedError(key, xKey, yKey) {\n        if (!logs[key + xKey + yKey]) {\n          console.warn(\"DEPRECATED: '\" + key + \"' has been deprecated. use '\" + xKey + \"', '\" + yKey + \"' instead\");\n          logs[key + xKey + yKey] = true;\n        }\n      }\n\n      function createLegacyProperty(key, privateKey, xKey, yKey) {\n        Object.defineProperty(elProto, key, {\n          get: function () {\n            {\n              logDeprecatedError(key, xKey, yKey);\n            }\n\n            if (!this[privateKey]) {\n              var pos = this[privateKey] = [];\n              enhanceArray(this, pos);\n            }\n\n            return this[privateKey];\n          },\n          set: function (pos) {\n            {\n              logDeprecatedError(key, xKey, yKey);\n            }\n            this[xKey] = pos[0];\n            this[yKey] = pos[1];\n            this[privateKey] = pos;\n            enhanceArray(this, pos);\n          }\n        });\n\n        function enhanceArray(self, pos) {\n          Object.defineProperty(pos, 0, {\n            get: function () {\n              return self[xKey];\n            },\n            set: function (val) {\n              self[xKey] = val;\n            }\n          });\n          Object.defineProperty(pos, 1, {\n            get: function () {\n              return self[yKey];\n            },\n            set: function (val) {\n              self[yKey] = val;\n            }\n          });\n        }\n      }\n\n      if (Object.defineProperty) {\n        createLegacyProperty('position', '_legacyPos', 'x', 'y');\n        createLegacyProperty('scale', '_legacyScale', 'scaleX', 'scaleY');\n        createLegacyProperty('origin', '_legacyOrigin', 'originX', 'originY');\n      }\n    }();\n\n    return Element;\n  }();\n\n  mixin(Element, Eventful);\n  mixin(Element, Transformable);\n\n  function animateTo(animatable, target, cfg, animationProps, reverse) {\n    cfg = cfg || {};\n    var animators = [];\n    animateToShallow(animatable, '', animatable, target, cfg, animationProps, animators, reverse);\n    var finishCount = animators.length;\n    var doneHappened = false;\n    var cfgDone = cfg.done;\n    var cfgAborted = cfg.aborted;\n\n    var doneCb = function () {\n      doneHappened = true;\n      finishCount--;\n\n      if (finishCount <= 0) {\n        doneHappened ? cfgDone && cfgDone() : cfgAborted && cfgAborted();\n      }\n    };\n\n    var abortedCb = function () {\n      finishCount--;\n\n      if (finishCount <= 0) {\n        doneHappened ? cfgDone && cfgDone() : cfgAborted && cfgAborted();\n      }\n    };\n\n    if (!finishCount) {\n      cfgDone && cfgDone();\n    }\n\n    if (animators.length > 0 && cfg.during) {\n      animators[0].during(function (target, percent) {\n        cfg.during(percent);\n      });\n    }\n\n    for (var i = 0; i < animators.length; i++) {\n      var animator = animators[i];\n\n      if (doneCb) {\n        animator.done(doneCb);\n      }\n\n      if (abortedCb) {\n        animator.aborted(abortedCb);\n      }\n\n      if (cfg.force) {\n        animator.duration(cfg.duration);\n      }\n\n      animator.start(cfg.easing);\n    }\n\n    return animators;\n  }\n\n  function copyArrShallow(source, target, len) {\n    for (var i = 0; i < len; i++) {\n      source[i] = target[i];\n    }\n  }\n\n  function is2DArray(value) {\n    return isArrayLike(value[0]);\n  }\n\n  function copyValue(target, source, key) {\n    if (isArrayLike(source[key])) {\n      if (!isArrayLike(target[key])) {\n        target[key] = [];\n      }\n\n      if (isTypedArray(source[key])) {\n        var len = source[key].length;\n\n        if (target[key].length !== len) {\n          target[key] = new source[key].constructor(len);\n          copyArrShallow(target[key], source[key], len);\n        }\n      } else {\n        var sourceArr = source[key];\n        var targetArr = target[key];\n        var len0 = sourceArr.length;\n\n        if (is2DArray(sourceArr)) {\n          var len1 = sourceArr[0].length;\n\n          for (var i = 0; i < len0; i++) {\n            if (!targetArr[i]) {\n              targetArr[i] = Array.prototype.slice.call(sourceArr[i]);\n            } else {\n              copyArrShallow(targetArr[i], sourceArr[i], len1);\n            }\n          }\n        } else {\n          copyArrShallow(targetArr, sourceArr, len0);\n        }\n\n        targetArr.length = sourceArr.length;\n      }\n    } else {\n      target[key] = source[key];\n    }\n  }\n\n  function isValueSame(val1, val2) {\n    return val1 === val2 || isArrayLike(val1) && isArrayLike(val2) && is1DArraySame(val1, val2);\n  }\n\n  function is1DArraySame(arr0, arr1) {\n    var len = arr0.length;\n\n    if (len !== arr1.length) {\n      return false;\n    }\n\n    for (var i = 0; i < len; i++) {\n      if (arr0[i] !== arr1[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function animateToShallow(animatable, topKey, animateObj, target, cfg, animationProps, animators, reverse) {\n    var targetKeys = keys(target);\n    var duration = cfg.duration;\n    var delay = cfg.delay;\n    var additive = cfg.additive;\n    var setToFinal = cfg.setToFinal;\n    var animateAll = !isObject(animationProps);\n    var existsAnimators = animatable.animators;\n    var animationKeys = [];\n\n    for (var k = 0; k < targetKeys.length; k++) {\n      var innerKey = targetKeys[k];\n      var targetVal = target[innerKey];\n\n      if (targetVal != null && animateObj[innerKey] != null && (animateAll || animationProps[innerKey])) {\n        if (isObject(targetVal) && !isArrayLike(targetVal) && !isGradientObject(targetVal)) {\n          if (topKey) {\n            if (!reverse) {\n              animateObj[innerKey] = targetVal;\n              animatable.updateDuringAnimation(topKey);\n            }\n\n            continue;\n          }\n\n          animateToShallow(animatable, innerKey, animateObj[innerKey], targetVal, cfg, animationProps && animationProps[innerKey], animators, reverse);\n        } else {\n          animationKeys.push(innerKey);\n        }\n      } else if (!reverse) {\n        animateObj[innerKey] = targetVal;\n        animatable.updateDuringAnimation(topKey);\n        animationKeys.push(innerKey);\n      }\n    }\n\n    var keyLen = animationKeys.length;\n\n    if (!additive && keyLen) {\n      for (var i = 0; i < existsAnimators.length; i++) {\n        var animator = existsAnimators[i];\n\n        if (animator.targetName === topKey) {\n          var allAborted = animator.stopTracks(animationKeys);\n\n          if (allAborted) {\n            var idx = indexOf(existsAnimators, animator);\n            existsAnimators.splice(idx, 1);\n          }\n        }\n      }\n    }\n\n    if (!cfg.force) {\n      animationKeys = filter(animationKeys, function (key) {\n        return !isValueSame(target[key], animateObj[key]);\n      });\n      keyLen = animationKeys.length;\n    }\n\n    if (keyLen > 0 || cfg.force && !animators.length) {\n      var revertedSource = void 0;\n      var reversedTarget = void 0;\n      var sourceClone = void 0;\n\n      if (reverse) {\n        reversedTarget = {};\n\n        if (setToFinal) {\n          revertedSource = {};\n        }\n\n        for (var i = 0; i < keyLen; i++) {\n          var innerKey = animationKeys[i];\n          reversedTarget[innerKey] = animateObj[innerKey];\n\n          if (setToFinal) {\n            revertedSource[innerKey] = target[innerKey];\n          } else {\n            animateObj[innerKey] = target[innerKey];\n          }\n        }\n      } else if (setToFinal) {\n        sourceClone = {};\n\n        for (var i = 0; i < keyLen; i++) {\n          var innerKey = animationKeys[i];\n          sourceClone[innerKey] = cloneValue(animateObj[innerKey]);\n          copyValue(animateObj, target, innerKey);\n        }\n      }\n\n      var animator = new Animator(animateObj, false, false, additive ? filter(existsAnimators, function (animator) {\n        return animator.targetName === topKey;\n      }) : null);\n      animator.targetName = topKey;\n\n      if (cfg.scope) {\n        animator.scope = cfg.scope;\n      }\n\n      if (setToFinal && revertedSource) {\n        animator.whenWithKeys(0, revertedSource, animationKeys);\n      }\n\n      if (sourceClone) {\n        animator.whenWithKeys(0, sourceClone, animationKeys);\n      }\n\n      animator.whenWithKeys(duration == null ? 500 : duration, reverse ? reversedTarget : target, animationKeys).delay(delay || 0);\n      animatable.addAnimator(animator, topKey);\n      animators.push(animator);\n    }\n  }\n\n  var Group = function (_super) {\n    __extends(Group, _super);\n\n    function Group(opts) {\n      var _this = _super.call(this) || this;\n\n      _this.isGroup = true;\n      _this._children = [];\n\n      _this.attr(opts);\n\n      return _this;\n    }\n\n    Group.prototype.childrenRef = function () {\n      return this._children;\n    };\n\n    Group.prototype.children = function () {\n      return this._children.slice();\n    };\n\n    Group.prototype.childAt = function (idx) {\n      return this._children[idx];\n    };\n\n    Group.prototype.childOfName = function (name) {\n      var children = this._children;\n\n      for (var i = 0; i < children.length; i++) {\n        if (children[i].name === name) {\n          return children[i];\n        }\n      }\n    };\n\n    Group.prototype.childCount = function () {\n      return this._children.length;\n    };\n\n    Group.prototype.add = function (child) {\n      if (child) {\n        if (child !== this && child.parent !== this) {\n          this._children.push(child);\n\n          this._doAdd(child);\n        }\n\n        {\n          if (child.__hostTarget) {\n            throw 'This elemenet has been used as an attachment';\n          }\n        }\n      }\n\n      return this;\n    };\n\n    Group.prototype.addBefore = function (child, nextSibling) {\n      if (child && child !== this && child.parent !== this && nextSibling && nextSibling.parent === this) {\n        var children = this._children;\n        var idx = children.indexOf(nextSibling);\n\n        if (idx >= 0) {\n          children.splice(idx, 0, child);\n\n          this._doAdd(child);\n        }\n      }\n\n      return this;\n    };\n\n    Group.prototype.replace = function (oldChild, newChild) {\n      var idx = indexOf(this._children, oldChild);\n\n      if (idx >= 0) {\n        this.replaceAt(newChild, idx);\n      }\n\n      return this;\n    };\n\n    Group.prototype.replaceAt = function (child, index) {\n      var children = this._children;\n      var old = children[index];\n\n      if (child && child !== this && child.parent !== this && child !== old) {\n        children[index] = child;\n        old.parent = null;\n        var zr = this.__zr;\n\n        if (zr) {\n          old.removeSelfFromZr(zr);\n        }\n\n        this._doAdd(child);\n      }\n\n      return this;\n    };\n\n    Group.prototype._doAdd = function (child) {\n      if (child.parent) {\n        child.parent.remove(child);\n      }\n\n      child.parent = this;\n      var zr = this.__zr;\n\n      if (zr && zr !== child.__zr) {\n        child.addSelfToZr(zr);\n      }\n\n      zr && zr.refresh();\n    };\n\n    Group.prototype.remove = function (child) {\n      var zr = this.__zr;\n      var children = this._children;\n      var idx = indexOf(children, child);\n\n      if (idx < 0) {\n        return this;\n      }\n\n      children.splice(idx, 1);\n      child.parent = null;\n\n      if (zr) {\n        child.removeSelfFromZr(zr);\n      }\n\n      zr && zr.refresh();\n      return this;\n    };\n\n    Group.prototype.removeAll = function () {\n      var children = this._children;\n      var zr = this.__zr;\n\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n\n        if (zr) {\n          child.removeSelfFromZr(zr);\n        }\n\n        child.parent = null;\n      }\n\n      children.length = 0;\n      return this;\n    };\n\n    Group.prototype.eachChild = function (cb, context) {\n      var children = this._children;\n\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n        cb.call(context, child, i);\n      }\n\n      return this;\n    };\n\n    Group.prototype.traverse = function (cb, context) {\n      for (var i = 0; i < this._children.length; i++) {\n        var child = this._children[i];\n        var stopped = cb.call(context, child);\n\n        if (child.isGroup && !stopped) {\n          child.traverse(cb, context);\n        }\n      }\n\n      return this;\n    };\n\n    Group.prototype.addSelfToZr = function (zr) {\n      _super.prototype.addSelfToZr.call(this, zr);\n\n      for (var i = 0; i < this._children.length; i++) {\n        var child = this._children[i];\n        child.addSelfToZr(zr);\n      }\n    };\n\n    Group.prototype.removeSelfFromZr = function (zr) {\n      _super.prototype.removeSelfFromZr.call(this, zr);\n\n      for (var i = 0; i < this._children.length; i++) {\n        var child = this._children[i];\n        child.removeSelfFromZr(zr);\n      }\n    };\n\n    Group.prototype.getBoundingRect = function (includeChildren) {\n      var tmpRect = new BoundingRect(0, 0, 0, 0);\n      var children = includeChildren || this._children;\n      var tmpMat = [];\n      var rect = null;\n\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n\n        if (child.ignore || child.invisible) {\n          continue;\n        }\n\n        var childRect = child.getBoundingRect();\n        var transform = child.getLocalTransform(tmpMat);\n\n        if (transform) {\n          BoundingRect.applyTransform(tmpRect, childRect, transform);\n          rect = rect || tmpRect.clone();\n          rect.union(tmpRect);\n        } else {\n          rect = rect || childRect.clone();\n          rect.union(childRect);\n        }\n      }\n\n      return rect || tmpRect;\n    };\n\n    return Group;\n  }(Element);\n\n  Group.prototype.type = 'group';\n  /*!\n  * ZRender, a high performance 2d drawing library.\n  *\n  * Copyright (c) 2013, Baidu Inc.\n  * All rights reserved.\n  *\n  * LICENSE\n  * https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\n  */\n\n  var painterCtors = {};\n  var instances$1 = {};\n\n  function delInstance(id) {\n    delete instances$1[id];\n  }\n\n  function isDarkMode(backgroundColor) {\n    if (!backgroundColor) {\n      return false;\n    }\n\n    if (typeof backgroundColor === 'string') {\n      return lum(backgroundColor, 1) < DARK_MODE_THRESHOLD;\n    } else if (backgroundColor.colorStops) {\n      var colorStops = backgroundColor.colorStops;\n      var totalLum = 0;\n      var len = colorStops.length;\n\n      for (var i = 0; i < len; i++) {\n        totalLum += lum(colorStops[i].color, 1);\n      }\n\n      totalLum /= len;\n      return totalLum < DARK_MODE_THRESHOLD;\n    }\n\n    return false;\n  }\n\n  var ZRender = function () {\n    function ZRender(id, dom, opts) {\n      var _this = this;\n\n      this._sleepAfterStill = 10;\n      this._stillFrameAccum = 0;\n      this._needsRefresh = true;\n      this._needsRefreshHover = true;\n      this._darkMode = false;\n      opts = opts || {};\n      this.dom = dom;\n      this.id = id;\n      var storage = new Storage();\n      var rendererType = opts.renderer || 'canvas';\n\n      if (!painterCtors[rendererType]) {\n        rendererType = keys(painterCtors)[0];\n      }\n\n      {\n        if (!painterCtors[rendererType]) {\n          throw new Error(\"Renderer '\" + rendererType + \"' is not imported. Please import it first.\");\n        }\n      }\n      opts.useDirtyRect = opts.useDirtyRect == null ? false : opts.useDirtyRect;\n      var painter = new painterCtors[rendererType](dom, storage, opts, id);\n      var ssrMode = opts.ssr || painter.ssrOnly;\n      this.storage = storage;\n      this.painter = painter;\n      var handerProxy = !env.node && !env.worker && !ssrMode ? new HandlerDomProxy(painter.getViewportRoot(), painter.root) : null;\n      this.handler = new Handler(storage, painter, handerProxy, painter.root);\n      this.animation = new Animation({\n        stage: {\n          update: ssrMode ? null : function () {\n            return _this._flush(true);\n          }\n        }\n      });\n\n      if (!ssrMode) {\n        this.animation.start();\n      }\n    }\n\n    ZRender.prototype.add = function (el) {\n      if (!el) {\n        return;\n      }\n\n      this.storage.addRoot(el);\n      el.addSelfToZr(this);\n      this.refresh();\n    };\n\n    ZRender.prototype.remove = function (el) {\n      if (!el) {\n        return;\n      }\n\n      this.storage.delRoot(el);\n      el.removeSelfFromZr(this);\n      this.refresh();\n    };\n\n    ZRender.prototype.configLayer = function (zLevel, config) {\n      if (this.painter.configLayer) {\n        this.painter.configLayer(zLevel, config);\n      }\n\n      this.refresh();\n    };\n\n    ZRender.prototype.setBackgroundColor = function (backgroundColor) {\n      if (this.painter.setBackgroundColor) {\n        this.painter.setBackgroundColor(backgroundColor);\n      }\n\n      this.refresh();\n      this._backgroundColor = backgroundColor;\n      this._darkMode = isDarkMode(backgroundColor);\n    };\n\n    ZRender.prototype.getBackgroundColor = function () {\n      return this._backgroundColor;\n    };\n\n    ZRender.prototype.setDarkMode = function (darkMode) {\n      this._darkMode = darkMode;\n    };\n\n    ZRender.prototype.isDarkMode = function () {\n      return this._darkMode;\n    };\n\n    ZRender.prototype.refreshImmediately = function (fromInside) {\n      if (!fromInside) {\n        this.animation.update(true);\n      }\n\n      this._needsRefresh = false;\n      this.painter.refresh();\n      this._needsRefresh = false;\n    };\n\n    ZRender.prototype.refresh = function () {\n      this._needsRefresh = true;\n      this.animation.start();\n    };\n\n    ZRender.prototype.flush = function () {\n      this._flush(false);\n    };\n\n    ZRender.prototype._flush = function (fromInside) {\n      var triggerRendered;\n      var start = getTime();\n\n      if (this._needsRefresh) {\n        triggerRendered = true;\n        this.refreshImmediately(fromInside);\n      }\n\n      if (this._needsRefreshHover) {\n        triggerRendered = true;\n        this.refreshHoverImmediately();\n      }\n\n      var end = getTime();\n\n      if (triggerRendered) {\n        this._stillFrameAccum = 0;\n        this.trigger('rendered', {\n          elapsedTime: end - start\n        });\n      } else if (this._sleepAfterStill > 0) {\n        this._stillFrameAccum++;\n\n        if (this._stillFrameAccum > this._sleepAfterStill) {\n          this.animation.stop();\n        }\n      }\n    };\n\n    ZRender.prototype.setSleepAfterStill = function (stillFramesCount) {\n      this._sleepAfterStill = stillFramesCount;\n    };\n\n    ZRender.prototype.wakeUp = function () {\n      this.animation.start();\n      this._stillFrameAccum = 0;\n    };\n\n    ZRender.prototype.refreshHover = function () {\n      this._needsRefreshHover = true;\n    };\n\n    ZRender.prototype.refreshHoverImmediately = function () {\n      this._needsRefreshHover = false;\n\n      if (this.painter.refreshHover && this.painter.getType() === 'canvas') {\n        this.painter.refreshHover();\n      }\n    };\n\n    ZRender.prototype.resize = function (opts) {\n      opts = opts || {};\n      this.painter.resize(opts.width, opts.height);\n      this.handler.resize();\n    };\n\n    ZRender.prototype.clearAnimation = function () {\n      this.animation.clear();\n    };\n\n    ZRender.prototype.getWidth = function () {\n      return this.painter.getWidth();\n    };\n\n    ZRender.prototype.getHeight = function () {\n      return this.painter.getHeight();\n    };\n\n    ZRender.prototype.setCursorStyle = function (cursorStyle) {\n      this.handler.setCursorStyle(cursorStyle);\n    };\n\n    ZRender.prototype.findHover = function (x, y) {\n      return this.handler.findHover(x, y);\n    };\n\n    ZRender.prototype.on = function (eventName, eventHandler, context) {\n      this.handler.on(eventName, eventHandler, context);\n      return this;\n    };\n\n    ZRender.prototype.off = function (eventName, eventHandler) {\n      this.handler.off(eventName, eventHandler);\n    };\n\n    ZRender.prototype.trigger = function (eventName, event) {\n      this.handler.trigger(eventName, event);\n    };\n\n    ZRender.prototype.clear = function () {\n      var roots = this.storage.getRoots();\n\n      for (var i = 0; i < roots.length; i++) {\n        if (roots[i] instanceof Group) {\n          roots[i].removeSelfFromZr(this);\n        }\n      }\n\n      this.storage.delAllRoots();\n      this.painter.clear();\n    };\n\n    ZRender.prototype.dispose = function () {\n      this.animation.stop();\n      this.clear();\n      this.storage.dispose();\n      this.painter.dispose();\n      this.handler.dispose();\n      this.animation = this.storage = this.painter = this.handler = null;\n      delInstance(this.id);\n    };\n\n    return ZRender;\n  }();\n\n  function init$1(dom, opts) {\n    var zr = new ZRender(guid(), dom, opts);\n    instances$1[zr.id] = zr;\n    return zr;\n  }\n\n  function dispose$1(zr) {\n    zr.dispose();\n  }\n\n  function disposeAll() {\n    for (var key in instances$1) {\n      if (instances$1.hasOwnProperty(key)) {\n        instances$1[key].dispose();\n      }\n    }\n\n    instances$1 = {};\n  }\n\n  function getInstance(id) {\n    return instances$1[id];\n  }\n\n  function registerPainter(name, Ctor) {\n    painterCtors[name] = Ctor;\n  }\n\n  var version$1 = '5.3.2';\n  var zrender = (Object.freeze || Object)({\n    init: init$1,\n    dispose: dispose$1,\n    disposeAll: disposeAll,\n    getInstance: getInstance,\n    registerPainter: registerPainter,\n    version: version$1\n  });\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /*\n  * A third-party license is embeded for some of the code in this file:\n  * The method \"quantile\" was copied from \"d3.js\".\n  * (See more details in the comment of the method below.)\n  * The use of the source code of this file is also subject to the terms\n  * and consitions of the license of \"d3.js\" (BSD-3Clause, see\n  * </licenses/LICENSE-d3>).\n  */\n\n  var RADIAN_EPSILON = 1e-4; // Although chrome already enlarge this number to 100 for `toFixed`, but\n  // we sill follow the spec for compatibility.\n\n  var ROUND_SUPPORTED_PRECISION_MAX = 20;\n\n  function _trim(str) {\n    return str.replace(/^\\s+|\\s+$/g, '');\n  }\n  /**\n   * Linear mapping a value from domain to range\n   * @param  val\n   * @param  domain Domain extent domain[0] can be bigger than domain[1]\n   * @param  range  Range extent range[0] can be bigger than range[1]\n   * @param  clamp Default to be false\n   */\n\n\n  function linearMap(val, domain, range, clamp) {\n    var d0 = domain[0];\n    var d1 = domain[1];\n    var r0 = range[0];\n    var r1 = range[1];\n    var subDomain = d1 - d0;\n    var subRange = r1 - r0;\n\n    if (subDomain === 0) {\n      return subRange === 0 ? r0 : (r0 + r1) / 2;\n    } // Avoid accuracy problem in edge, such as\n    // 146.39 - 62.83 === 83.55999999999999.\n    // See echarts/test/ut/spec/util/number.js#linearMap#accuracyError\n    // It is a little verbose for efficiency considering this method\n    // is a hotspot.\n\n\n    if (clamp) {\n      if (subDomain > 0) {\n        if (val <= d0) {\n          return r0;\n        } else if (val >= d1) {\n          return r1;\n        }\n      } else {\n        if (val >= d0) {\n          return r0;\n        } else if (val <= d1) {\n          return r1;\n        }\n      }\n    } else {\n      if (val === d0) {\n        return r0;\n      }\n\n      if (val === d1) {\n        return r1;\n      }\n    }\n\n    return (val - d0) / subDomain * subRange + r0;\n  }\n  /**\n   * Convert a percent string to absolute number.\n   * Returns NaN if percent is not a valid string or number\n   */\n\n\n  function parsePercent$1(percent, all) {\n    switch (percent) {\n      case 'center':\n      case 'middle':\n        percent = '50%';\n        break;\n\n      case 'left':\n      case 'top':\n        percent = '0%';\n        break;\n\n      case 'right':\n      case 'bottom':\n        percent = '100%';\n        break;\n    }\n\n    if (isString(percent)) {\n      if (_trim(percent).match(/%$/)) {\n        return parseFloat(percent) / 100 * all;\n      }\n\n      return parseFloat(percent);\n    }\n\n    return percent == null ? NaN : +percent;\n  }\n\n  function round(x, precision, returnStr) {\n    if (precision == null) {\n      precision = 10;\n    } // Avoid range error\n\n\n    precision = Math.min(Math.max(0, precision), ROUND_SUPPORTED_PRECISION_MAX); // PENDING: 1.005.toFixed(2) is '1.00' rather than '1.01'\n\n    x = (+x).toFixed(precision);\n    return returnStr ? x : +x;\n  }\n  /**\n   * Inplacd asc sort arr.\n   * The input arr will be modified.\n   */\n\n\n  function asc(arr) {\n    arr.sort(function (a, b) {\n      return a - b;\n    });\n    return arr;\n  }\n  /**\n   * Get precision.\n   */\n\n\n  function getPrecision(val) {\n    val = +val;\n\n    if (isNaN(val)) {\n      return 0;\n    } // It is much faster than methods converting number to string as follows\n    //      let tmp = val.toString();\n    //      return tmp.length - 1 - tmp.indexOf('.');\n    // especially when precision is low\n    // Notice:\n    // (1) If the loop count is over about 20, it is slower than `getPrecisionSafe`.\n    //     (see https://jsbench.me/2vkpcekkvw/1)\n    // (2) If the val is less than for example 1e-15, the result may be incorrect.\n    //     (see test/ut/spec/util/number.test.ts `getPrecision_equal_random`)\n\n\n    if (val > 1e-14) {\n      var e = 1;\n\n      for (var i = 0; i < 15; i++, e *= 10) {\n        if (Math.round(val * e) / e === val) {\n          return i;\n        }\n      }\n    }\n\n    return getPrecisionSafe(val);\n  }\n  /**\n   * Get precision with slow but safe method\n   */\n\n\n  function getPrecisionSafe(val) {\n    // toLowerCase for: '3.4E-12'\n    var str = val.toString().toLowerCase(); // Consider scientific notation: '3.4e-12' '3.4e+12'\n\n    var eIndex = str.indexOf('e');\n    var exp = eIndex > 0 ? +str.slice(eIndex + 1) : 0;\n    var significandPartLen = eIndex > 0 ? eIndex : str.length;\n    var dotIndex = str.indexOf('.');\n    var decimalPartLen = dotIndex < 0 ? 0 : significandPartLen - 1 - dotIndex;\n    return Math.max(0, decimalPartLen - exp);\n  }\n  /**\n   * Minimal dicernible data precisioin according to a single pixel.\n   */\n\n\n  function getPixelPrecision(dataExtent, pixelExtent) {\n    var log = Math.log;\n    var LN10 = Math.LN10;\n    var dataQuantity = Math.floor(log(dataExtent[1] - dataExtent[0]) / LN10);\n    var sizeQuantity = Math.round(log(Math.abs(pixelExtent[1] - pixelExtent[0])) / LN10); // toFixed() digits argument must be between 0 and 20.\n\n    var precision = Math.min(Math.max(-dataQuantity + sizeQuantity, 0), 20);\n    return !isFinite(precision) ? 20 : precision;\n  }\n  /**\n   * Get a data of given precision, assuring the sum of percentages\n   * in valueList is 1.\n   * The largest remainer method is used.\n   * https://en.wikipedia.org/wiki/Largest_remainder_method\n   *\n   * @param valueList a list of all data\n   * @param idx index of the data to be processed in valueList\n   * @param precision integer number showing digits of precision\n   * @return percent ranging from 0 to 100\n   */\n\n\n  function getPercentWithPrecision(valueList, idx, precision) {\n    if (!valueList[idx]) {\n      return 0;\n    }\n\n    var sum = reduce(valueList, function (acc, val) {\n      return acc + (isNaN(val) ? 0 : val);\n    }, 0);\n\n    if (sum === 0) {\n      return 0;\n    }\n\n    var digits = Math.pow(10, precision);\n    var votesPerQuota = map(valueList, function (val) {\n      return (isNaN(val) ? 0 : val) / sum * digits * 100;\n    });\n    var targetSeats = digits * 100;\n    var seats = map(votesPerQuota, function (votes) {\n      // Assign automatic seats.\n      return Math.floor(votes);\n    });\n    var currentSum = reduce(seats, function (acc, val) {\n      return acc + val;\n    }, 0);\n    var remainder = map(votesPerQuota, function (votes, idx) {\n      return votes - seats[idx];\n    }); // Has remainding votes.\n\n    while (currentSum < targetSeats) {\n      // Find next largest remainder.\n      var max = Number.NEGATIVE_INFINITY;\n      var maxId = null;\n\n      for (var i = 0, len = remainder.length; i < len; ++i) {\n        if (remainder[i] > max) {\n          max = remainder[i];\n          maxId = i;\n        }\n      } // Add a vote to max remainder.\n\n\n      ++seats[maxId];\n      remainder[maxId] = 0;\n      ++currentSum;\n    }\n\n    return seats[idx] / digits;\n  }\n  /**\n   * Solve the floating point adding problem like 0.1 + 0.2 === 0.30000000000000004\n   * See <http://0.30000000000000004.com/>\n   */\n\n\n  function addSafe(val0, val1) {\n    var maxPrecision = Math.max(getPrecision(val0), getPrecision(val1)); // const multiplier = Math.pow(10, maxPrecision);\n    // return (Math.round(val0 * multiplier) + Math.round(val1 * multiplier)) / multiplier;\n\n    var sum = val0 + val1; // // PENDING: support more?\n\n    return maxPrecision > ROUND_SUPPORTED_PRECISION_MAX ? sum : round(sum, maxPrecision);\n  } // Number.MAX_SAFE_INTEGER, ie do not support.\n\n\n  var MAX_SAFE_INTEGER = 9007199254740991;\n  /**\n   * To 0 - 2 * PI, considering negative radian.\n   */\n\n  function remRadian(radian) {\n    var pi2 = Math.PI * 2;\n    return (radian % pi2 + pi2) % pi2;\n  }\n  /**\n   * @param {type} radian\n   * @return {boolean}\n   */\n\n\n  function isRadianAroundZero(val) {\n    return val > -RADIAN_EPSILON && val < RADIAN_EPSILON;\n  } // eslint-disable-next-line\n\n\n  var TIME_REG = /^(?:(\\d{4})(?:[-\\/](\\d{1,2})(?:[-\\/](\\d{1,2})(?:[T ](\\d{1,2})(?::(\\d{1,2})(?::(\\d{1,2})(?:[.,](\\d+))?)?)?(Z|[\\+\\-]\\d\\d:?\\d\\d)?)?)?)?)?$/; // jshint ignore:line\n\n  /**\n   * @param value valid type: number | string | Date, otherwise return `new Date(NaN)`\n   *   These values can be accepted:\n   *   + An instance of Date, represent a time in its own time zone.\n   *   + Or string in a subset of ISO 8601, only including:\n   *     + only year, month, date: '2012-03', '2012-03-01', '2012-03-01 05', '2012-03-01 05:06',\n   *     + separated with T or space: '2012-03-01T12:22:33.123', '2012-03-01 12:22:33.123',\n   *     + time zone: '2012-03-01T12:22:33Z', '2012-03-01T12:22:33+8000', '2012-03-01T12:22:33-05:00',\n   *     all of which will be treated as local time if time zone is not specified\n   *     (see <https://momentjs.com/>).\n   *   + Or other string format, including (all of which will be treated as loacal time):\n   *     '2012', '2012-3-1', '2012/3/1', '2012/03/01',\n   *     '2009/6/12 2:00', '2009/6/12 2:05:08', '2009/6/12 2:05:08.123'\n   *   + a timestamp, which represent a time in UTC.\n   * @return date Never be null/undefined. If invalid, return `new Date(NaN)`.\n   */\n\n  function parseDate(value) {\n    if (value instanceof Date) {\n      return value;\n    } else if (isString(value)) {\n      // Different browsers parse date in different way, so we parse it manually.\n      // Some other issues:\n      // new Date('1970-01-01') is UTC,\n      // new Date('1970/01/01') and new Date('1970-1-01') is local.\n      // See issue #3623\n      var match = TIME_REG.exec(value);\n\n      if (!match) {\n        // return Invalid Date.\n        return new Date(NaN);\n      } // Use local time when no timezone offset specifed.\n\n\n      if (!match[8]) {\n        // match[n] can only be string or undefined.\n        // But take care of '12' + 1 => '121'.\n        return new Date(+match[1], +(match[2] || 1) - 1, +match[3] || 1, +match[4] || 0, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0);\n      } // Timezoneoffset of Javascript Date has considered DST (Daylight Saving Time,\n      // https://tc39.github.io/ecma262/#sec-daylight-saving-time-adjustment).\n      // For example, system timezone is set as \"Time Zone: America/Toronto\",\n      // then these code will get different result:\n      // `new Date(1478411999999).getTimezoneOffset();  // get 240`\n      // `new Date(1478412000000).getTimezoneOffset();  // get 300`\n      // So we should not use `new Date`, but use `Date.UTC`.\n      else {\n          var hour = +match[4] || 0;\n\n          if (match[8].toUpperCase() !== 'Z') {\n            hour -= +match[8].slice(0, 3);\n          }\n\n          return new Date(Date.UTC(+match[1], +(match[2] || 1) - 1, +match[3] || 1, hour, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0));\n        }\n    } else if (value == null) {\n      return new Date(NaN);\n    }\n\n    return new Date(Math.round(value));\n  }\n  /**\n   * Quantity of a number. e.g. 0.1, 1, 10, 100\n   *\n   * @param val\n   * @return\n   */\n\n\n  function quantity(val) {\n    return Math.pow(10, quantityExponent(val));\n  }\n  /**\n   * Exponent of the quantity of a number\n   * e.g., 1234 equals to 1.234*10^3, so quantityExponent(1234) is 3\n   *\n   * @param val non-negative value\n   * @return\n   */\n\n\n  function quantityExponent(val) {\n    if (val === 0) {\n      return 0;\n    }\n\n    var exp = Math.floor(Math.log(val) / Math.LN10);\n    /**\n     * exp is expected to be the rounded-down result of the base-10 log of val.\n     * But due to the precision loss with Math.log(val), we need to restore it\n     * using 10^exp to make sure we can get val back from exp. #11249\n     */\n\n    if (val / Math.pow(10, exp) >= 10) {\n      exp++;\n    }\n\n    return exp;\n  }\n  /**\n   * find a “nice” number approximately equal to x. Round the number if round = true,\n   * take ceiling if round = false. The primary observation is that the “nicest”\n   * numbers in decimal are 1, 2, and 5, and all power-of-ten multiples of these numbers.\n   *\n   * See \"Nice Numbers for Graph Labels\" of Graphic Gems.\n   *\n   * @param  val Non-negative value.\n   * @param  round\n   * @return Niced number\n   */\n\n\n  function nice(val, round) {\n    var exponent = quantityExponent(val);\n    var exp10 = Math.pow(10, exponent);\n    var f = val / exp10; // 1 <= f < 10\n\n    var nf;\n\n    if (round) {\n      if (f < 1.5) {\n        nf = 1;\n      } else if (f < 2.5) {\n        nf = 2;\n      } else if (f < 4) {\n        nf = 3;\n      } else if (f < 7) {\n        nf = 5;\n      } else {\n        nf = 10;\n      }\n    } else {\n      if (f < 1) {\n        nf = 1;\n      } else if (f < 2) {\n        nf = 2;\n      } else if (f < 3) {\n        nf = 3;\n      } else if (f < 5) {\n        nf = 5;\n      } else {\n        nf = 10;\n      }\n    }\n\n    val = nf * exp10; // Fix 3 * 0.1 === 0.30000000000000004 issue (see IEEE 754).\n    // 20 is the uppper bound of toFixed.\n\n    return exponent >= -20 ? +val.toFixed(exponent < 0 ? -exponent : 0) : val;\n  }\n  /**\n   * This code was copied from \"d3.js\"\n   * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/arrays/quantile.js>.\n   * See the license statement at the head of this file.\n   * @param ascArr\n   */\n\n\n  function quantile(ascArr, p) {\n    var H = (ascArr.length - 1) * p + 1;\n    var h = Math.floor(H);\n    var v = +ascArr[h - 1];\n    var e = H - h;\n    return e ? v + e * (ascArr[h] - v) : v;\n  }\n  /**\n   * Order intervals asc, and split them when overlap.\n   * expect(numberUtil.reformIntervals([\n   *     {interval: [18, 62], close: [1, 1]},\n   *     {interval: [-Infinity, -70], close: [0, 0]},\n   *     {interval: [-70, -26], close: [1, 1]},\n   *     {interval: [-26, 18], close: [1, 1]},\n   *     {interval: [62, 150], close: [1, 1]},\n   *     {interval: [106, 150], close: [1, 1]},\n   *     {interval: [150, Infinity], close: [0, 0]}\n   * ])).toEqual([\n   *     {interval: [-Infinity, -70], close: [0, 0]},\n   *     {interval: [-70, -26], close: [1, 1]},\n   *     {interval: [-26, 18], close: [0, 1]},\n   *     {interval: [18, 62], close: [0, 1]},\n   *     {interval: [62, 150], close: [0, 1]},\n   *     {interval: [150, Infinity], close: [0, 0]}\n   * ]);\n   * @param list, where `close` mean open or close\n   *        of the interval, and Infinity can be used.\n   * @return The origin list, which has been reformed.\n   */\n\n\n  function reformIntervals(list) {\n    list.sort(function (a, b) {\n      return littleThan(a, b, 0) ? -1 : 1;\n    });\n    var curr = -Infinity;\n    var currClose = 1;\n\n    for (var i = 0; i < list.length;) {\n      var interval = list[i].interval;\n      var close_1 = list[i].close;\n\n      for (var lg = 0; lg < 2; lg++) {\n        if (interval[lg] <= curr) {\n          interval[lg] = curr;\n          close_1[lg] = !lg ? 1 - currClose : 1;\n        }\n\n        curr = interval[lg];\n        currClose = close_1[lg];\n      }\n\n      if (interval[0] === interval[1] && close_1[0] * close_1[1] !== 1) {\n        list.splice(i, 1);\n      } else {\n        i++;\n      }\n    }\n\n    return list;\n\n    function littleThan(a, b, lg) {\n      return a.interval[lg] < b.interval[lg] || a.interval[lg] === b.interval[lg] && (a.close[lg] - b.close[lg] === (!lg ? 1 : -1) || !lg && littleThan(a, b, 1));\n    }\n  }\n  /**\n   * [Numberic is defined as]:\n   *     `parseFloat(val) == val`\n   * For example:\n   * numeric:\n   *     typeof number except NaN, '-123', '123', '2e3', '-2e3', '011', 'Infinity', Infinity,\n   *     and they rounded by white-spaces or line-terminal like ' -123 \\n ' (see es spec)\n   * not-numeric:\n   *     null, undefined, [], {}, true, false, 'NaN', NaN, '123ab',\n   *     empty string, string with only white-spaces or line-terminal (see es spec),\n   *     0x12, '0x12', '-0x12', 012, '012', '-012',\n   *     non-string, ...\n   *\n   * @test See full test cases in `test/ut/spec/util/number.js`.\n   * @return Must be a typeof number. If not numeric, return NaN.\n   */\n\n\n  function numericToNumber(val) {\n    var valFloat = parseFloat(val);\n    return valFloat == val // eslint-disable-line eqeqeq\n    && (valFloat !== 0 || !isString(val) || val.indexOf('x') <= 0) // For case ' 0x0 '.\n    ? valFloat : NaN;\n  }\n  /**\n   * Definition of \"numeric\": see `numericToNumber`.\n   */\n\n\n  function isNumeric(val) {\n    return !isNaN(numericToNumber(val));\n  }\n  /**\n   * Use random base to prevent users hard code depending on\n   * this auto generated marker id.\n   * @return An positive integer.\n   */\n\n\n  function getRandomIdBase() {\n    return Math.round(Math.random() * 9);\n  }\n  /**\n   * Get the greatest common dividor\n   *\n   * @param {number} a one number\n   * @param {number} b the other number\n   */\n\n\n  function getGreatestCommonDividor(a, b) {\n    if (b === 0) {\n      return a;\n    }\n\n    return getGreatestCommonDividor(b, a % b);\n  }\n  /**\n   * Get the least common multiple\n   *\n   * @param {number} a one number\n   * @param {number} b the other number\n   */\n\n\n  function getLeastCommonMultiple(a, b) {\n    if (a == null) {\n      return b;\n    }\n\n    if (b == null) {\n      return a;\n    }\n\n    return a * b / getGreatestCommonDividor(a, b);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var ECHARTS_PREFIX = '[ECharts] ';\n  var storedLogs = {};\n  var hasConsole = typeof console !== 'undefined' // eslint-disable-next-line\n  && console.warn && console.log;\n\n  function outputLog(type, str, onlyOnce) {\n    if (hasConsole) {\n      if (onlyOnce) {\n        if (storedLogs[str]) {\n          return;\n        }\n\n        storedLogs[str] = true;\n      } // eslint-disable-next-line\n\n\n      console[type](ECHARTS_PREFIX + str);\n    }\n  }\n\n  function log(str, onlyOnce) {\n    outputLog('log', str, onlyOnce);\n  }\n\n  function warn(str, onlyOnce) {\n    outputLog('warn', str, onlyOnce);\n  }\n\n  function error(str, onlyOnce) {\n    outputLog('error', str, onlyOnce);\n  }\n\n  function deprecateLog(str) {\n    {\n      // Not display duplicate message.\n      outputLog('warn', 'DEPRECATED: ' + str, true);\n    }\n  }\n\n  function deprecateReplaceLog(oldOpt, newOpt, scope) {\n    {\n      deprecateLog((scope ? \"[\" + scope + \"]\" : '') + (oldOpt + \" is deprecated, use \" + newOpt + \" instead.\"));\n    }\n  }\n  /**\n   * If in __DEV__ environment, get console printable message for users hint.\n   * Parameters are separated by ' '.\n   * @usuage\n   * makePrintable('This is an error on', someVar, someObj);\n   *\n   * @param hintInfo anything about the current execution context to hint users.\n   * @throws Error\n   */\n\n\n  function makePrintable() {\n    var hintInfo = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      hintInfo[_i] = arguments[_i];\n    }\n\n    var msg = '';\n    {\n      // Fuzzy stringify for print.\n      // This code only exist in dev environment.\n      var makePrintableStringIfPossible_1 = function (val) {\n        return val === void 0 ? 'undefined' : val === Infinity ? 'Infinity' : val === -Infinity ? '-Infinity' : eqNaN(val) ? 'NaN' : val instanceof Date ? 'Date(' + val.toISOString() + ')' : isFunction(val) ? 'function () { ... }' : isRegExp(val) ? val + '' : null;\n      };\n\n      msg = map(hintInfo, function (arg) {\n        if (isString(arg)) {\n          // Print without quotation mark for some statement.\n          return arg;\n        } else {\n          var printableStr = makePrintableStringIfPossible_1(arg);\n\n          if (printableStr != null) {\n            return printableStr;\n          } else if (typeof JSON !== 'undefined' && JSON.stringify) {\n            try {\n              return JSON.stringify(arg, function (n, val) {\n                var printableStr = makePrintableStringIfPossible_1(val);\n                return printableStr == null ? val : printableStr;\n              }); // In most cases the info object is small, so do not line break.\n            } catch (err) {\n              return '?';\n            }\n          } else {\n            return '?';\n          }\n        }\n      }).join(' ');\n    }\n    return msg;\n  }\n  /**\n   * @throws Error\n   */\n\n\n  function throwError(msg) {\n    throw new Error(msg);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function interpolateNumber$1(p0, p1, percent) {\n    return (p1 - p0) * percent + p0;\n  }\n  /**\n   * Make the name displayable. But we should\n   * make sure it is not duplicated with user\n   * specified name, so use '\\0';\n   */\n\n\n  var DUMMY_COMPONENT_NAME_PREFIX = 'series\\0';\n  var INTERNAL_COMPONENT_ID_PREFIX = '\\0_ec_\\0';\n  /**\n   * If value is not array, then translate it to array.\n   * @param  {*} value\n   * @return {Array} [value] or value\n   */\n\n  function normalizeToArray(value) {\n    return value instanceof Array ? value : value == null ? [] : [value];\n  }\n  /**\n   * Sync default option between normal and emphasis like `position` and `show`\n   * In case some one will write code like\n   *     label: {\n   *          show: false,\n   *          position: 'outside',\n   *          fontSize: 18\n   *     },\n   *     emphasis: {\n   *          label: { show: true }\n   *     }\n   */\n\n\n  function defaultEmphasis(opt, key, subOpts) {\n    // Caution: performance sensitive.\n    if (opt) {\n      opt[key] = opt[key] || {};\n      opt.emphasis = opt.emphasis || {};\n      opt.emphasis[key] = opt.emphasis[key] || {}; // Default emphasis option from normal\n\n      for (var i = 0, len = subOpts.length; i < len; i++) {\n        var subOptName = subOpts[i];\n\n        if (!opt.emphasis[key].hasOwnProperty(subOptName) && opt[key].hasOwnProperty(subOptName)) {\n          opt.emphasis[key][subOptName] = opt[key][subOptName];\n        }\n      }\n    }\n  }\n\n  var TEXT_STYLE_OPTIONS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'rich', 'tag', 'color', 'textBorderColor', 'textBorderWidth', 'width', 'height', 'lineHeight', 'align', 'verticalAlign', 'baseline', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY', 'backgroundColor', 'borderColor', 'borderWidth', 'borderRadius', 'padding']; // modelUtil.LABEL_OPTIONS = modelUtil.TEXT_STYLE_OPTIONS.concat([\n  //     'position', 'offset', 'rotate', 'origin', 'show', 'distance', 'formatter',\n  //     'fontStyle', 'fontWeight', 'fontSize', 'fontFamily',\n  //     // FIXME: deprecated, check and remove it.\n  //     'textStyle'\n  // ]);\n\n  /**\n   * The method do not ensure performance.\n   * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n   * This helper method retieves value from data.\n   */\n\n  function getDataItemValue(dataItem) {\n    return isObject(dataItem) && !isArray(dataItem) && !(dataItem instanceof Date) ? dataItem.value : dataItem;\n  }\n  /**\n   * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n   * This helper method determine if dataItem has extra option besides value\n   */\n\n\n  function isDataItemOption(dataItem) {\n    return isObject(dataItem) && !(dataItem instanceof Array); // // markLine data can be array\n    // && !(dataItem[0] && isObject(dataItem[0]) && !(dataItem[0] instanceof Array));\n  }\n  /**\n   * Mapping to existings for merge.\n   *\n   * Mode \"normalMege\":\n   *     The mapping result (merge result) will keep the order of the existing\n   *     component, rather than the order of new option. Because we should ensure\n   *     some specified index reference (like xAxisIndex) keep work.\n   *     And in most cases, \"merge option\" is used to update partial option but not\n   *     be expected to change the order.\n   *\n   * Mode \"replaceMege\":\n   *     (1) Only the id mapped components will be merged.\n   *     (2) Other existing components (except internal compoonets) will be removed.\n   *     (3) Other new options will be used to create new component.\n   *     (4) The index of the existing compoents will not be modified.\n   *     That means their might be \"hole\" after the removal.\n   *     The new components are created first at those available index.\n   *\n   * Mode \"replaceAll\":\n   *     This mode try to support that reproduce an echarts instance from another\n   *     echarts instance (via `getOption`) in some simple cases.\n   *     In this senario, the `result` index are exactly the consistent with the `newCmptOptions`,\n   *     which ensures the compoennt index referring (like `xAxisIndex: ?`) corrent. That is,\n   *     the \"hole\" in `newCmptOptions` will also be kept.\n   *     On the contrary, other modes try best to eliminate holes.\n   *     PENDING: This is an experimental mode yet.\n   *\n   * @return See the comment of <MappingResult>.\n   */\n\n\n  function mappingToExists(existings, newCmptOptions, mode) {\n    var isNormalMergeMode = mode === 'normalMerge';\n    var isReplaceMergeMode = mode === 'replaceMerge';\n    var isReplaceAllMode = mode === 'replaceAll';\n    existings = existings || [];\n    newCmptOptions = (newCmptOptions || []).slice();\n    var existingIdIdxMap = createHashMap(); // Validate id and name on user input option.\n\n    each(newCmptOptions, function (cmptOption, index) {\n      if (!isObject(cmptOption)) {\n        newCmptOptions[index] = null;\n        return;\n      }\n\n      {\n        // There is some legacy case that name is set as `false`.\n        // But should work normally rather than throw error.\n        if (cmptOption.id != null && !isValidIdOrName(cmptOption.id)) {\n          warnInvalidateIdOrName(cmptOption.id);\n        }\n\n        if (cmptOption.name != null && !isValidIdOrName(cmptOption.name)) {\n          warnInvalidateIdOrName(cmptOption.name);\n        }\n      }\n    });\n    var result = prepareResult(existings, existingIdIdxMap, mode);\n\n    if (isNormalMergeMode || isReplaceMergeMode) {\n      mappingById(result, existings, existingIdIdxMap, newCmptOptions);\n    }\n\n    if (isNormalMergeMode) {\n      mappingByName(result, newCmptOptions);\n    }\n\n    if (isNormalMergeMode || isReplaceMergeMode) {\n      mappingByIndex(result, newCmptOptions, isReplaceMergeMode);\n    } else if (isReplaceAllMode) {\n      mappingInReplaceAllMode(result, newCmptOptions);\n    }\n\n    makeIdAndName(result); // The array `result` MUST NOT contain elided items, otherwise the\n    // forEach will ommit those items and result in incorrect result.\n\n    return result;\n  }\n\n  function prepareResult(existings, existingIdIdxMap, mode) {\n    var result = [];\n\n    if (mode === 'replaceAll') {\n      return result;\n    } // Do not use native `map` to in case that the array `existings`\n    // contains elided items, which will be ommited.\n\n\n    for (var index = 0; index < existings.length; index++) {\n      var existing = existings[index]; // Because of replaceMerge, `existing` may be null/undefined.\n\n      if (existing && existing.id != null) {\n        existingIdIdxMap.set(existing.id, index);\n      } // For non-internal-componnets:\n      //     Mode \"normalMerge\": all existings kept.\n      //     Mode \"replaceMerge\": all existing removed unless mapped by id.\n      // For internal-components:\n      //     go with \"replaceMerge\" approach in both mode.\n\n\n      result.push({\n        existing: mode === 'replaceMerge' || isComponentIdInternal(existing) ? null : existing,\n        newOption: null,\n        keyInfo: null,\n        brandNew: null\n      });\n    }\n\n    return result;\n  }\n\n  function mappingById(result, existings, existingIdIdxMap, newCmptOptions) {\n    // Mapping by id if specified.\n    each(newCmptOptions, function (cmptOption, index) {\n      if (!cmptOption || cmptOption.id == null) {\n        return;\n      }\n\n      var optionId = makeComparableKey(cmptOption.id);\n      var existingIdx = existingIdIdxMap.get(optionId);\n\n      if (existingIdx != null) {\n        var resultItem = result[existingIdx];\n        assert(!resultItem.newOption, 'Duplicated option on id \"' + optionId + '\".');\n        resultItem.newOption = cmptOption; // In both mode, if id matched, new option will be merged to\n        // the existings rather than creating new component model.\n\n        resultItem.existing = existings[existingIdx];\n        newCmptOptions[index] = null;\n      }\n    });\n  }\n\n  function mappingByName(result, newCmptOptions) {\n    // Mapping by name if specified.\n    each(newCmptOptions, function (cmptOption, index) {\n      if (!cmptOption || cmptOption.name == null) {\n        return;\n      }\n\n      for (var i = 0; i < result.length; i++) {\n        var existing = result[i].existing;\n\n        if (!result[i].newOption // Consider name: two map to one.\n        // Can not match when both ids existing but different.\n        && existing && (existing.id == null || cmptOption.id == null) && !isComponentIdInternal(cmptOption) && !isComponentIdInternal(existing) && keyExistAndEqual('name', existing, cmptOption)) {\n          result[i].newOption = cmptOption;\n          newCmptOptions[index] = null;\n          return;\n        }\n      }\n    });\n  }\n\n  function mappingByIndex(result, newCmptOptions, brandNew) {\n    each(newCmptOptions, function (cmptOption) {\n      if (!cmptOption) {\n        return;\n      } // Find the first place that not mapped by id and not internal component (consider the \"hole\").\n\n\n      var resultItem;\n      var nextIdx = 0;\n\n      while ( // Be `!resultItem` only when `nextIdx >= result.length`.\n      (resultItem = result[nextIdx]) && ( // (1) Existing models that already have id should be able to mapped to. Because\n      // after mapping performed, model will always be assigned with an id if user not given.\n      // After that all models have id.\n      // (2) If new option has id, it can only set to a hole or append to the last. It should\n      // not be merged to the existings with different id. Because id should not be overwritten.\n      // (3) Name can be overwritten, because axis use name as 'show label text'.\n      resultItem.newOption || isComponentIdInternal(resultItem.existing) || // In mode \"replaceMerge\", here no not-mapped-non-internal-existing.\n      resultItem.existing && cmptOption.id != null && !keyExistAndEqual('id', cmptOption, resultItem.existing))) {\n        nextIdx++;\n      }\n\n      if (resultItem) {\n        resultItem.newOption = cmptOption;\n        resultItem.brandNew = brandNew;\n      } else {\n        result.push({\n          newOption: cmptOption,\n          brandNew: brandNew,\n          existing: null,\n          keyInfo: null\n        });\n      }\n\n      nextIdx++;\n    });\n  }\n\n  function mappingInReplaceAllMode(result, newCmptOptions) {\n    each(newCmptOptions, function (cmptOption) {\n      // The feature \"reproduce\" requires \"hole\" will also reproduced\n      // in case that compoennt index referring are broken.\n      result.push({\n        newOption: cmptOption,\n        brandNew: true,\n        existing: null,\n        keyInfo: null\n      });\n    });\n  }\n  /**\n   * Make id and name for mapping result (result of mappingToExists)\n   * into `keyInfo` field.\n   */\n\n\n  function makeIdAndName(mapResult) {\n    // We use this id to hash component models and view instances\n    // in echarts. id can be specified by user, or auto generated.\n    // The id generation rule ensures new view instance are able\n    // to mapped to old instance when setOption are called in\n    // no-merge mode. So we generate model id by name and plus\n    // type in view id.\n    // name can be duplicated among components, which is convenient\n    // to specify multi components (like series) by one name.\n    // Ensure that each id is distinct.\n    var idMap = createHashMap();\n    each(mapResult, function (item) {\n      var existing = item.existing;\n      existing && idMap.set(existing.id, item);\n    });\n    each(mapResult, function (item) {\n      var opt = item.newOption; // Force ensure id not duplicated.\n\n      assert(!opt || opt.id == null || !idMap.get(opt.id) || idMap.get(opt.id) === item, 'id duplicates: ' + (opt && opt.id));\n      opt && opt.id != null && idMap.set(opt.id, item);\n      !item.keyInfo && (item.keyInfo = {});\n    }); // Make name and id.\n\n    each(mapResult, function (item, index) {\n      var existing = item.existing;\n      var opt = item.newOption;\n      var keyInfo = item.keyInfo;\n\n      if (!isObject(opt)) {\n        return;\n      } // name can be overwitten. Consider case: axis.name = '20km'.\n      // But id generated by name will not be changed, which affect\n      // only in that case: setOption with 'not merge mode' and view\n      // instance will be recreated, which can be accepted.\n\n\n      keyInfo.name = opt.name != null ? makeComparableKey(opt.name) : existing ? existing.name // Avoid diffferent series has the same name,\n      // because name may be used like in color pallet.\n      : DUMMY_COMPONENT_NAME_PREFIX + index;\n\n      if (existing) {\n        keyInfo.id = makeComparableKey(existing.id);\n      } else if (opt.id != null) {\n        keyInfo.id = makeComparableKey(opt.id);\n      } else {\n        // Consider this situatoin:\n        //  optionA: [{name: 'a'}, {name: 'a'}, {..}]\n        //  optionB [{..}, {name: 'a'}, {name: 'a'}]\n        // Series with the same name between optionA and optionB\n        // should be mapped.\n        var idNum = 0;\n\n        do {\n          keyInfo.id = '\\0' + keyInfo.name + '\\0' + idNum++;\n        } while (idMap.get(keyInfo.id));\n      }\n\n      idMap.set(keyInfo.id, item);\n    });\n  }\n\n  function keyExistAndEqual(attr, obj1, obj2) {\n    var key1 = convertOptionIdName(obj1[attr], null);\n    var key2 = convertOptionIdName(obj2[attr], null); // See `MappingExistingItem`. `id` and `name` trade string equals to number.\n\n    return key1 != null && key2 != null && key1 === key2;\n  }\n  /**\n   * @return return null if not exist.\n   */\n\n\n  function makeComparableKey(val) {\n    {\n      if (val == null) {\n        throw new Error();\n      }\n    }\n    return convertOptionIdName(val, '');\n  }\n\n  function convertOptionIdName(idOrName, defaultValue) {\n    if (idOrName == null) {\n      return defaultValue;\n    }\n\n    return isString(idOrName) ? idOrName : isNumber(idOrName) || isStringSafe(idOrName) ? idOrName + '' : defaultValue;\n  }\n\n  function warnInvalidateIdOrName(idOrName) {\n    {\n      warn('`' + idOrName + '` is invalid id or name. Must be a string or number.');\n    }\n  }\n\n  function isValidIdOrName(idOrName) {\n    return isStringSafe(idOrName) || isNumeric(idOrName);\n  }\n\n  function isNameSpecified(componentModel) {\n    var name = componentModel.name; // Is specified when `indexOf` get -1 or > 0.\n\n    return !!(name && name.indexOf(DUMMY_COMPONENT_NAME_PREFIX));\n  }\n  /**\n   * @public\n   * @param {Object} cmptOption\n   * @return {boolean}\n   */\n\n\n  function isComponentIdInternal(cmptOption) {\n    return cmptOption && cmptOption.id != null && makeComparableKey(cmptOption.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX) === 0;\n  }\n\n  function makeInternalComponentId(idSuffix) {\n    return INTERNAL_COMPONENT_ID_PREFIX + idSuffix;\n  }\n\n  function setComponentTypeToKeyInfo(mappingResult, mainType, componentModelCtor) {\n    // Set mainType and complete subType.\n    each(mappingResult, function (item) {\n      var newOption = item.newOption;\n\n      if (isObject(newOption)) {\n        item.keyInfo.mainType = mainType;\n        item.keyInfo.subType = determineSubType(mainType, newOption, item.existing, componentModelCtor);\n      }\n    });\n  }\n\n  function determineSubType(mainType, newCmptOption, existComponent, componentModelCtor) {\n    var subType = newCmptOption.type ? newCmptOption.type : existComponent ? existComponent.subType // Use determineSubType only when there is no existComponent.\n    : componentModelCtor.determineSubType(mainType, newCmptOption); // tooltip, markline, markpoint may always has no subType\n\n    return subType;\n  }\n  /**\n   * A helper for removing duplicate items between batchA and batchB,\n   * and in themselves, and categorize by series.\n   *\n   * @param batchA Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n   * @param batchB Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n   * @return result: [resultBatchA, resultBatchB]\n   */\n\n  /**\n   * @param payload Contains dataIndex (means rawIndex) / dataIndexInside / name\n   *                         each of which can be Array or primary type.\n   * @return dataIndex If not found, return undefined/null.\n   */\n\n\n  function queryDataIndex(data, payload) {\n    if (payload.dataIndexInside != null) {\n      return payload.dataIndexInside;\n    } else if (payload.dataIndex != null) {\n      return isArray(payload.dataIndex) ? map(payload.dataIndex, function (value) {\n        return data.indexOfRawIndex(value);\n      }) : data.indexOfRawIndex(payload.dataIndex);\n    } else if (payload.name != null) {\n      return isArray(payload.name) ? map(payload.name, function (value) {\n        return data.indexOfName(value);\n      }) : data.indexOfName(payload.name);\n    }\n  }\n  /**\n   * Enable property storage to any host object.\n   * Notice: Serialization is not supported.\n   *\n   * For example:\n   * let inner = zrUitl.makeInner();\n   *\n   * function some1(hostObj) {\n   *      inner(hostObj).someProperty = 1212;\n   *      ...\n   * }\n   * function some2() {\n   *      let fields = inner(this);\n   *      fields.someProperty1 = 1212;\n   *      fields.someProperty2 = 'xx';\n   *      ...\n   * }\n   *\n   * @return {Function}\n   */\n\n\n  function makeInner() {\n    var key = '__ec_inner_' + innerUniqueIndex++;\n    return function (hostObj) {\n      return hostObj[key] || (hostObj[key] = {});\n    };\n  }\n\n  var innerUniqueIndex = getRandomIdBase();\n  /**\n   * The same behavior as `component.getReferringComponents`.\n   */\n\n  function parseFinder(ecModel, finderInput, opt) {\n    var _a = preParseFinder(finderInput, opt),\n        mainTypeSpecified = _a.mainTypeSpecified,\n        queryOptionMap = _a.queryOptionMap,\n        others = _a.others;\n\n    var result = others;\n    var defaultMainType = opt ? opt.defaultMainType : null;\n\n    if (!mainTypeSpecified && defaultMainType) {\n      queryOptionMap.set(defaultMainType, {});\n    }\n\n    queryOptionMap.each(function (queryOption, mainType) {\n      var queryResult = queryReferringComponents(ecModel, mainType, queryOption, {\n        useDefault: defaultMainType === mainType,\n        enableAll: opt && opt.enableAll != null ? opt.enableAll : true,\n        enableNone: opt && opt.enableNone != null ? opt.enableNone : true\n      });\n      result[mainType + 'Models'] = queryResult.models;\n      result[mainType + 'Model'] = queryResult.models[0];\n    });\n    return result;\n  }\n\n  function preParseFinder(finderInput, opt) {\n    var finder;\n\n    if (isString(finderInput)) {\n      var obj = {};\n      obj[finderInput + 'Index'] = 0;\n      finder = obj;\n    } else {\n      finder = finderInput;\n    }\n\n    var queryOptionMap = createHashMap();\n    var others = {};\n    var mainTypeSpecified = false;\n    each(finder, function (value, key) {\n      // Exclude 'dataIndex' and other illgal keys.\n      if (key === 'dataIndex' || key === 'dataIndexInside') {\n        others[key] = value;\n        return;\n      }\n\n      var parsedKey = key.match(/^(\\w+)(Index|Id|Name)$/) || [];\n      var mainType = parsedKey[1];\n      var queryType = (parsedKey[2] || '').toLowerCase();\n\n      if (!mainType || !queryType || opt && opt.includeMainTypes && indexOf(opt.includeMainTypes, mainType) < 0) {\n        return;\n      }\n\n      mainTypeSpecified = mainTypeSpecified || !!mainType;\n      var queryOption = queryOptionMap.get(mainType) || queryOptionMap.set(mainType, {});\n      queryOption[queryType] = value;\n    });\n    return {\n      mainTypeSpecified: mainTypeSpecified,\n      queryOptionMap: queryOptionMap,\n      others: others\n    };\n  }\n\n  var SINGLE_REFERRING = {\n    useDefault: true,\n    enableAll: false,\n    enableNone: false\n  };\n  var MULTIPLE_REFERRING = {\n    useDefault: false,\n    enableAll: true,\n    enableNone: true\n  };\n\n  function queryReferringComponents(ecModel, mainType, userOption, opt) {\n    opt = opt || SINGLE_REFERRING;\n    var indexOption = userOption.index;\n    var idOption = userOption.id;\n    var nameOption = userOption.name;\n    var result = {\n      models: null,\n      specified: indexOption != null || idOption != null || nameOption != null\n    };\n\n    if (!result.specified) {\n      // Use the first as default if `useDefault`.\n      var firstCmpt = void 0;\n      result.models = opt.useDefault && (firstCmpt = ecModel.getComponent(mainType)) ? [firstCmpt] : [];\n      return result;\n    }\n\n    if (indexOption === 'none' || indexOption === false) {\n      assert(opt.enableNone, '`\"none\"` or `false` is not a valid value on index option.');\n      result.models = [];\n      return result;\n    } // `queryComponents` will return all components if\n    // both all of index/id/name are null/undefined.\n\n\n    if (indexOption === 'all') {\n      assert(opt.enableAll, '`\"all\"` is not a valid value on index option.');\n      indexOption = idOption = nameOption = null;\n    }\n\n    result.models = ecModel.queryComponents({\n      mainType: mainType,\n      index: indexOption,\n      id: idOption,\n      name: nameOption\n    });\n    return result;\n  }\n\n  function setAttribute(dom, key, value) {\n    dom.setAttribute ? dom.setAttribute(key, value) : dom[key] = value;\n  }\n\n  function getAttribute(dom, key) {\n    return dom.getAttribute ? dom.getAttribute(key) : dom[key];\n  }\n\n  function getTooltipRenderMode(renderModeOption) {\n    if (renderModeOption === 'auto') {\n      // Using html when `document` exists, use richText otherwise\n      return env.domSupported ? 'html' : 'richText';\n    } else {\n      return renderModeOption || 'html';\n    }\n  }\n  /**\n   * Group a list by key.\n   */\n\n  /**\n   * Interpolate raw values of a series with percent\n   *\n   * @param data         data\n   * @param labelModel   label model of the text element\n   * @param sourceValue  start value. May be null/undefined when init.\n   * @param targetValue  end value\n   * @param percent      0~1 percentage; 0 uses start value while 1 uses end value\n   * @return             interpolated values\n   *                     If `sourceValue` and `targetValue` are `number`, return `number`.\n   *                     If `sourceValue` and `targetValue` are `string`, return `string`.\n   *                     If `sourceValue` and `targetValue` are `(string | number)[]`, return `(string | number)[]`.\n   *                     Other cases do not supported.\n   */\n\n\n  function interpolateRawValues(data, precision, sourceValue, targetValue, percent) {\n    var isAutoPrecision = precision == null || precision === 'auto';\n\n    if (targetValue == null) {\n      return targetValue;\n    }\n\n    if (isNumber(targetValue)) {\n      var value = interpolateNumber$1(sourceValue || 0, targetValue, percent);\n      return round(value, isAutoPrecision ? Math.max(getPrecision(sourceValue || 0), getPrecision(targetValue)) : precision);\n    } else if (isString(targetValue)) {\n      return percent < 1 ? sourceValue : targetValue;\n    } else {\n      var interpolated = [];\n      var leftArr = sourceValue;\n      var rightArr = targetValue;\n      var length_1 = Math.max(leftArr ? leftArr.length : 0, rightArr.length);\n\n      for (var i = 0; i < length_1; ++i) {\n        var info = data.getDimensionInfo(i); // Don't interpolate ordinal dims\n\n        if (info && info.type === 'ordinal') {\n          // In init, there is no `sourceValue`, but should better not to get undefined result.\n          interpolated[i] = (percent < 1 && leftArr ? leftArr : rightArr)[i];\n        } else {\n          var leftVal = leftArr && leftArr[i] ? leftArr[i] : 0;\n          var rightVal = rightArr[i];\n          var value = interpolateNumber$1(leftVal, rightVal, percent);\n          interpolated[i] = round(value, isAutoPrecision ? Math.max(getPrecision(leftVal), getPrecision(rightVal)) : precision);\n        }\n      }\n\n      return interpolated;\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var TYPE_DELIMITER = '.';\n  var IS_CONTAINER = '___EC__COMPONENT__CONTAINER___';\n  var IS_EXTENDED_CLASS = '___EC__EXTENDED_CLASS___';\n  /**\n   * Notice, parseClassType('') should returns {main: '', sub: ''}\n   * @public\n   */\n\n  function parseClassType(componentType) {\n    var ret = {\n      main: '',\n      sub: ''\n    };\n\n    if (componentType) {\n      var typeArr = componentType.split(TYPE_DELIMITER);\n      ret.main = typeArr[0] || '';\n      ret.sub = typeArr[1] || '';\n    }\n\n    return ret;\n  }\n  /**\n   * @public\n   */\n\n\n  function checkClassType(componentType) {\n    assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType), 'componentType \"' + componentType + '\" illegal');\n  }\n\n  function isExtendedClass(clz) {\n    return !!(clz && clz[IS_EXTENDED_CLASS]);\n  }\n  /**\n   * Implements `ExtendableConstructor` for `rootClz`.\n   *\n   * @usage\n   * ```ts\n   * class Xxx {}\n   * type XxxConstructor = typeof Xxx & ExtendableConstructor\n   * enableClassExtend(Xxx as XxxConstructor);\n   * ```\n   */\n\n\n  function enableClassExtend(rootClz, mandatoryMethods) {\n    rootClz.$constructor = rootClz; // FIXME: not necessary?\n\n    rootClz.extend = function (proto) {\n      {\n        each(mandatoryMethods, function (method) {\n          if (!proto[method]) {\n            console.warn('Method `' + method + '` should be implemented' + (proto.type ? ' in ' + proto.type : '') + '.');\n          }\n        });\n      }\n      var superClass = this;\n      var ExtendedClass;\n\n      if (isESClass(superClass)) {\n        ExtendedClass =\n        /** @class */\n        function (_super) {\n          __extends(class_1, _super);\n\n          function class_1() {\n            return _super.apply(this, arguments) || this;\n          }\n\n          return class_1;\n        }(superClass);\n      } else {\n        // For backward compat, we both support ts class inheritance and this\n        // \"extend\" approach.\n        // The constructor should keep the same behavior as ts class inheritance:\n        // If this constructor/$constructor is not declared, auto invoke the super\n        // constructor.\n        // If this constructor/$constructor is declared, it is responsible for\n        // calling the super constructor.\n        ExtendedClass = function () {\n          (proto.$constructor || superClass).apply(this, arguments);\n        };\n\n        inherits(ExtendedClass, this);\n      }\n\n      extend(ExtendedClass.prototype, proto);\n      ExtendedClass[IS_EXTENDED_CLASS] = true;\n      ExtendedClass.extend = this.extend;\n      ExtendedClass.superCall = superCall;\n      ExtendedClass.superApply = superApply;\n      ExtendedClass.superClass = superClass;\n      return ExtendedClass;\n    };\n  }\n\n  function isESClass(fn) {\n    return isFunction(fn) && /^class\\s/.test(Function.prototype.toString.call(fn));\n  }\n  /**\n   * A work around to both support ts extend and this extend mechanism.\n   * on sub-class.\n   * @usage\n   * ```ts\n   * class Component { ... }\n   * classUtil.enableClassExtend(Component);\n   * classUtil.enableClassManagement(Component, {registerWhenExtend: true});\n   *\n   * class Series extends Component { ... }\n   * // Without calling `markExtend`, `registerWhenExtend` will not work.\n   * Component.markExtend(Series);\n   * ```\n   */\n\n\n  function mountExtend(SubClz, SupperClz) {\n    SubClz.extend = SupperClz.extend;\n  } // A random offset.\n\n\n  var classBase = Math.round(Math.random() * 10);\n  /**\n   * Implements `CheckableConstructor` for `target`.\n   * Can not use instanceof, consider different scope by\n   * cross domain or es module import in ec extensions.\n   * Mount a method \"isInstance()\" to Clz.\n   *\n   * @usage\n   * ```ts\n   * class Xxx {}\n   * type XxxConstructor = typeof Xxx & CheckableConstructor;\n   * enableClassCheck(Xxx as XxxConstructor)\n   * ```\n   */\n\n  function enableClassCheck(target) {\n    var classAttr = ['__\\0is_clz', classBase++].join('_');\n    target.prototype[classAttr] = true;\n    {\n      assert(!target.isInstance, 'The method \"is\" can not be defined.');\n    }\n\n    target.isInstance = function (obj) {\n      return !!(obj && obj[classAttr]);\n    };\n  } // superCall should have class info, which can not be fetch from 'this'.\n  // Consider this case:\n  // class A has method f,\n  // class B inherits class A, overrides method f, f call superApply('f'),\n  // class C inherits class B, do not overrides method f,\n  // then when method of class C is called, dead loop occured.\n\n\n  function superCall(context, methodName) {\n    var args = [];\n\n    for (var _i = 2; _i < arguments.length; _i++) {\n      args[_i - 2] = arguments[_i];\n    }\n\n    return this.superClass.prototype[methodName].apply(context, args);\n  }\n\n  function superApply(context, methodName, args) {\n    return this.superClass.prototype[methodName].apply(context, args);\n  }\n  /**\n   * Implements `ClassManager` for `target`\n   *\n   * @usage\n   * ```ts\n   * class Xxx {}\n   * type XxxConstructor = typeof Xxx & ClassManager\n   * enableClassManagement(Xxx as XxxConstructor);\n   * ```\n   */\n\n\n  function enableClassManagement(target) {\n    /**\n     * Component model classes\n     * key: componentType,\n     * value:\n     *     componentClass, when componentType is 'a'\n     *     or Object.<subKey, componentClass>, when componentType is 'a.b'\n     */\n    var storage = {};\n\n    target.registerClass = function (clz) {\n      // `type` should not be a \"instance memeber\".\n      // If using TS class, should better declared as `static type = 'series.pie'`.\n      // otherwise users have to mount `type` on prototype manually.\n      // For backward compat and enable instance visit type via `this.type`,\n      // we stil support fetch `type` from prototype.\n      var componentFullType = clz.type || clz.prototype.type;\n\n      if (componentFullType) {\n        checkClassType(componentFullType); // If only static type declared, we assign it to prototype mandatorily.\n\n        clz.prototype.type = componentFullType;\n        var componentTypeInfo = parseClassType(componentFullType);\n\n        if (!componentTypeInfo.sub) {\n          {\n            if (storage[componentTypeInfo.main]) {\n              console.warn(componentTypeInfo.main + ' exists.');\n            }\n          }\n          storage[componentTypeInfo.main] = clz;\n        } else if (componentTypeInfo.sub !== IS_CONTAINER) {\n          var container = makeContainer(componentTypeInfo);\n          container[componentTypeInfo.sub] = clz;\n        }\n      }\n\n      return clz;\n    };\n\n    target.getClass = function (mainType, subType, throwWhenNotFound) {\n      var clz = storage[mainType];\n\n      if (clz && clz[IS_CONTAINER]) {\n        clz = subType ? clz[subType] : null;\n      }\n\n      if (throwWhenNotFound && !clz) {\n        throw new Error(!subType ? mainType + '.' + 'type should be specified.' : 'Component ' + mainType + '.' + (subType || '') + ' is used but not imported.');\n      }\n\n      return clz;\n    };\n\n    target.getClassesByMainType = function (componentType) {\n      var componentTypeInfo = parseClassType(componentType);\n      var result = [];\n      var obj = storage[componentTypeInfo.main];\n\n      if (obj && obj[IS_CONTAINER]) {\n        each(obj, function (o, type) {\n          type !== IS_CONTAINER && result.push(o);\n        });\n      } else {\n        result.push(obj);\n      }\n\n      return result;\n    };\n\n    target.hasClass = function (componentType) {\n      // Just consider componentType.main.\n      var componentTypeInfo = parseClassType(componentType);\n      return !!storage[componentTypeInfo.main];\n    };\n    /**\n     * @return Like ['aa', 'bb'], but can not be ['aa.xx']\n     */\n\n\n    target.getAllClassMainTypes = function () {\n      var types = [];\n      each(storage, function (obj, type) {\n        types.push(type);\n      });\n      return types;\n    };\n    /**\n     * If a main type is container and has sub types\n     */\n\n\n    target.hasSubTypes = function (componentType) {\n      var componentTypeInfo = parseClassType(componentType);\n      var obj = storage[componentTypeInfo.main];\n      return obj && obj[IS_CONTAINER];\n    };\n\n    function makeContainer(componentTypeInfo) {\n      var container = storage[componentTypeInfo.main];\n\n      if (!container || !container[IS_CONTAINER]) {\n        container = storage[componentTypeInfo.main] = {};\n        container[IS_CONTAINER] = true;\n      }\n\n      return container;\n    }\n  } // /**\n  //  * @param {string|Array.<string>} properties\n  //  */\n  // export function setReadOnly(obj, properties) {\n  // FIXME It seems broken in IE8 simulation of IE11\n  // if (!zrUtil.isArray(properties)) {\n  //     properties = properties != null ? [properties] : [];\n  // }\n  // zrUtil.each(properties, function (prop) {\n  //     let value = obj[prop];\n  //     Object.defineProperty\n  //         && Object.defineProperty(obj, prop, {\n  //             value: value, writable: false\n  //         });\n  //     zrUtil.isArray(obj[prop])\n  //         && Object.freeze\n  //         && Object.freeze(obj[prop]);\n  // });\n  // }\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // TODO Parse shadow style\n  // TODO Only shallow path support\n\n\n  function makeStyleMapper(properties, ignoreParent) {\n    // Normalize\n    for (var i = 0; i < properties.length; i++) {\n      if (!properties[i][1]) {\n        properties[i][1] = properties[i][0];\n      }\n    }\n\n    ignoreParent = ignoreParent || false;\n    return function (model, excludes, includes) {\n      var style = {};\n\n      for (var i = 0; i < properties.length; i++) {\n        var propName = properties[i][1];\n\n        if (excludes && indexOf(excludes, propName) >= 0 || includes && indexOf(includes, propName) < 0) {\n          continue;\n        }\n\n        var val = model.getShallow(propName, ignoreParent);\n\n        if (val != null) {\n          style[properties[i][0]] = val;\n        }\n      } // TODO Text or image?\n\n\n      return style;\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var AREA_STYLE_KEY_MAP = [['fill', 'color'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['opacity'], ['shadowColor'] // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n  // So do not transfer decal directly.\n  ];\n  var getAreaStyle = makeStyleMapper(AREA_STYLE_KEY_MAP);\n\n  var AreaStyleMixin =\n  /** @class */\n  function () {\n    function AreaStyleMixin() {}\n\n    AreaStyleMixin.prototype.getAreaStyle = function (excludes, includes) {\n      return getAreaStyle(this, excludes, includes);\n    };\n\n    return AreaStyleMixin;\n  }();\n\n  var globalImageCache = new LRU(50);\n\n  function findExistImage(newImageOrSrc) {\n    if (typeof newImageOrSrc === 'string') {\n      var cachedImgObj = globalImageCache.get(newImageOrSrc);\n      return cachedImgObj && cachedImgObj.image;\n    } else {\n      return newImageOrSrc;\n    }\n  }\n\n  function createOrUpdateImage(newImageOrSrc, image, hostEl, onload, cbPayload) {\n    if (!newImageOrSrc) {\n      return image;\n    } else if (typeof newImageOrSrc === 'string') {\n      if (image && image.__zrImageSrc === newImageOrSrc || !hostEl) {\n        return image;\n      }\n\n      var cachedImgObj = globalImageCache.get(newImageOrSrc);\n      var pendingWrap = {\n        hostEl: hostEl,\n        cb: onload,\n        cbPayload: cbPayload\n      };\n\n      if (cachedImgObj) {\n        image = cachedImgObj.image;\n        !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\n      } else {\n        image = platformApi.loadImage(newImageOrSrc, imageOnLoad, imageOnLoad);\n        image.__zrImageSrc = newImageOrSrc;\n        globalImageCache.put(newImageOrSrc, image.__cachedImgObj = {\n          image: image,\n          pending: [pendingWrap]\n        });\n      }\n\n      return image;\n    } else {\n      return newImageOrSrc;\n    }\n  }\n\n  function imageOnLoad() {\n    var cachedImgObj = this.__cachedImgObj;\n    this.onload = this.onerror = this.__cachedImgObj = null;\n\n    for (var i = 0; i < cachedImgObj.pending.length; i++) {\n      var pendingWrap = cachedImgObj.pending[i];\n      var cb = pendingWrap.cb;\n      cb && cb(this, pendingWrap.cbPayload);\n      pendingWrap.hostEl.dirty();\n    }\n\n    cachedImgObj.pending.length = 0;\n  }\n\n  function isImageReady(image) {\n    return image && image.width && image.height;\n  }\n\n  var STYLE_REG = /\\{([a-zA-Z0-9_]+)\\|([^}]*)\\}/g;\n\n  function truncateText(text, containerWidth, font, ellipsis, options) {\n    if (!containerWidth) {\n      return '';\n    }\n\n    var textLines = (text + '').split('\\n');\n    options = prepareTruncateOptions(containerWidth, font, ellipsis, options);\n\n    for (var i = 0, len = textLines.length; i < len; i++) {\n      textLines[i] = truncateSingleLine(textLines[i], options);\n    }\n\n    return textLines.join('\\n');\n  }\n\n  function prepareTruncateOptions(containerWidth, font, ellipsis, options) {\n    options = options || {};\n    var preparedOpts = extend({}, options);\n    preparedOpts.font = font;\n    ellipsis = retrieve2(ellipsis, '...');\n    preparedOpts.maxIterations = retrieve2(options.maxIterations, 2);\n    var minChar = preparedOpts.minChar = retrieve2(options.minChar, 0);\n    preparedOpts.cnCharWidth = getWidth('国', font);\n    var ascCharWidth = preparedOpts.ascCharWidth = getWidth('a', font);\n    preparedOpts.placeholder = retrieve2(options.placeholder, '');\n    var contentWidth = containerWidth = Math.max(0, containerWidth - 1);\n\n    for (var i = 0; i < minChar && contentWidth >= ascCharWidth; i++) {\n      contentWidth -= ascCharWidth;\n    }\n\n    var ellipsisWidth = getWidth(ellipsis, font);\n\n    if (ellipsisWidth > contentWidth) {\n      ellipsis = '';\n      ellipsisWidth = 0;\n    }\n\n    contentWidth = containerWidth - ellipsisWidth;\n    preparedOpts.ellipsis = ellipsis;\n    preparedOpts.ellipsisWidth = ellipsisWidth;\n    preparedOpts.contentWidth = contentWidth;\n    preparedOpts.containerWidth = containerWidth;\n    return preparedOpts;\n  }\n\n  function truncateSingleLine(textLine, options) {\n    var containerWidth = options.containerWidth;\n    var font = options.font;\n    var contentWidth = options.contentWidth;\n\n    if (!containerWidth) {\n      return '';\n    }\n\n    var lineWidth = getWidth(textLine, font);\n\n    if (lineWidth <= containerWidth) {\n      return textLine;\n    }\n\n    for (var j = 0;; j++) {\n      if (lineWidth <= contentWidth || j >= options.maxIterations) {\n        textLine += options.ellipsis;\n        break;\n      }\n\n      var subLength = j === 0 ? estimateLength(textLine, contentWidth, options.ascCharWidth, options.cnCharWidth) : lineWidth > 0 ? Math.floor(textLine.length * contentWidth / lineWidth) : 0;\n      textLine = textLine.substr(0, subLength);\n      lineWidth = getWidth(textLine, font);\n    }\n\n    if (textLine === '') {\n      textLine = options.placeholder;\n    }\n\n    return textLine;\n  }\n\n  function estimateLength(text, contentWidth, ascCharWidth, cnCharWidth) {\n    var width = 0;\n    var i = 0;\n\n    for (var len = text.length; i < len && width < contentWidth; i++) {\n      var charCode = text.charCodeAt(i);\n      width += 0 <= charCode && charCode <= 127 ? ascCharWidth : cnCharWidth;\n    }\n\n    return i;\n  }\n\n  function parsePlainText(text, style) {\n    text != null && (text += '');\n    var overflow = style.overflow;\n    var padding = style.padding;\n    var font = style.font;\n    var truncate = overflow === 'truncate';\n    var calculatedLineHeight = getLineHeight(font);\n    var lineHeight = retrieve2(style.lineHeight, calculatedLineHeight);\n    var bgColorDrawn = !!style.backgroundColor;\n    var truncateLineOverflow = style.lineOverflow === 'truncate';\n    var width = style.width;\n    var lines;\n\n    if (width != null && (overflow === 'break' || overflow === 'breakAll')) {\n      lines = text ? wrapText(text, style.font, width, overflow === 'breakAll', 0).lines : [];\n    } else {\n      lines = text ? text.split('\\n') : [];\n    }\n\n    var contentHeight = lines.length * lineHeight;\n    var height = retrieve2(style.height, contentHeight);\n\n    if (contentHeight > height && truncateLineOverflow) {\n      var lineCount = Math.floor(height / lineHeight);\n      lines = lines.slice(0, lineCount);\n    }\n\n    if (text && truncate && width != null) {\n      var options = prepareTruncateOptions(width, font, style.ellipsis, {\n        minChar: style.truncateMinChar,\n        placeholder: style.placeholder\n      });\n\n      for (var i = 0; i < lines.length; i++) {\n        lines[i] = truncateSingleLine(lines[i], options);\n      }\n    }\n\n    var outerHeight = height;\n    var contentWidth = 0;\n\n    for (var i = 0; i < lines.length; i++) {\n      contentWidth = Math.max(getWidth(lines[i], font), contentWidth);\n    }\n\n    if (width == null) {\n      width = contentWidth;\n    }\n\n    var outerWidth = contentWidth;\n\n    if (padding) {\n      outerHeight += padding[0] + padding[2];\n      outerWidth += padding[1] + padding[3];\n      width += padding[1] + padding[3];\n    }\n\n    if (bgColorDrawn) {\n      outerWidth = width;\n    }\n\n    return {\n      lines: lines,\n      height: height,\n      outerWidth: outerWidth,\n      outerHeight: outerHeight,\n      lineHeight: lineHeight,\n      calculatedLineHeight: calculatedLineHeight,\n      contentWidth: contentWidth,\n      contentHeight: contentHeight,\n      width: width\n    };\n  }\n\n  var RichTextToken = function () {\n    function RichTextToken() {}\n\n    return RichTextToken;\n  }();\n\n  var RichTextLine = function () {\n    function RichTextLine(tokens) {\n      this.tokens = [];\n\n      if (tokens) {\n        this.tokens = tokens;\n      }\n    }\n\n    return RichTextLine;\n  }();\n\n  var RichTextContentBlock = function () {\n    function RichTextContentBlock() {\n      this.width = 0;\n      this.height = 0;\n      this.contentWidth = 0;\n      this.contentHeight = 0;\n      this.outerWidth = 0;\n      this.outerHeight = 0;\n      this.lines = [];\n    }\n\n    return RichTextContentBlock;\n  }();\n\n  function parseRichText(text, style) {\n    var contentBlock = new RichTextContentBlock();\n    text != null && (text += '');\n\n    if (!text) {\n      return contentBlock;\n    }\n\n    var topWidth = style.width;\n    var topHeight = style.height;\n    var overflow = style.overflow;\n    var wrapInfo = (overflow === 'break' || overflow === 'breakAll') && topWidth != null ? {\n      width: topWidth,\n      accumWidth: 0,\n      breakAll: overflow === 'breakAll'\n    } : null;\n    var lastIndex = STYLE_REG.lastIndex = 0;\n    var result;\n\n    while ((result = STYLE_REG.exec(text)) != null) {\n      var matchedIndex = result.index;\n\n      if (matchedIndex > lastIndex) {\n        pushTokens(contentBlock, text.substring(lastIndex, matchedIndex), style, wrapInfo);\n      }\n\n      pushTokens(contentBlock, result[2], style, wrapInfo, result[1]);\n      lastIndex = STYLE_REG.lastIndex;\n    }\n\n    if (lastIndex < text.length) {\n      pushTokens(contentBlock, text.substring(lastIndex, text.length), style, wrapInfo);\n    }\n\n    var pendingList = [];\n    var calculatedHeight = 0;\n    var calculatedWidth = 0;\n    var stlPadding = style.padding;\n    var truncate = overflow === 'truncate';\n    var truncateLine = style.lineOverflow === 'truncate';\n\n    function finishLine(line, lineWidth, lineHeight) {\n      line.width = lineWidth;\n      line.lineHeight = lineHeight;\n      calculatedHeight += lineHeight;\n      calculatedWidth = Math.max(calculatedWidth, lineWidth);\n    }\n\n    outer: for (var i = 0; i < contentBlock.lines.length; i++) {\n      var line = contentBlock.lines[i];\n      var lineHeight = 0;\n      var lineWidth = 0;\n\n      for (var j = 0; j < line.tokens.length; j++) {\n        var token = line.tokens[j];\n        var tokenStyle = token.styleName && style.rich[token.styleName] || {};\n        var textPadding = token.textPadding = tokenStyle.padding;\n        var paddingH = textPadding ? textPadding[1] + textPadding[3] : 0;\n        var font = token.font = tokenStyle.font || style.font;\n        token.contentHeight = getLineHeight(font);\n        var tokenHeight = retrieve2(tokenStyle.height, token.contentHeight);\n        token.innerHeight = tokenHeight;\n        textPadding && (tokenHeight += textPadding[0] + textPadding[2]);\n        token.height = tokenHeight;\n        token.lineHeight = retrieve3(tokenStyle.lineHeight, style.lineHeight, tokenHeight);\n        token.align = tokenStyle && tokenStyle.align || style.align;\n        token.verticalAlign = tokenStyle && tokenStyle.verticalAlign || 'middle';\n\n        if (truncateLine && topHeight != null && calculatedHeight + token.lineHeight > topHeight) {\n          if (j > 0) {\n            line.tokens = line.tokens.slice(0, j);\n            finishLine(line, lineWidth, lineHeight);\n            contentBlock.lines = contentBlock.lines.slice(0, i + 1);\n          } else {\n            contentBlock.lines = contentBlock.lines.slice(0, i);\n          }\n\n          break outer;\n        }\n\n        var styleTokenWidth = tokenStyle.width;\n        var tokenWidthNotSpecified = styleTokenWidth == null || styleTokenWidth === 'auto';\n\n        if (typeof styleTokenWidth === 'string' && styleTokenWidth.charAt(styleTokenWidth.length - 1) === '%') {\n          token.percentWidth = styleTokenWidth;\n          pendingList.push(token);\n          token.contentWidth = getWidth(token.text, font);\n        } else {\n          if (tokenWidthNotSpecified) {\n            var textBackgroundColor = tokenStyle.backgroundColor;\n            var bgImg = textBackgroundColor && textBackgroundColor.image;\n\n            if (bgImg) {\n              bgImg = findExistImage(bgImg);\n\n              if (isImageReady(bgImg)) {\n                token.width = Math.max(token.width, bgImg.width * tokenHeight / bgImg.height);\n              }\n            }\n          }\n\n          var remainTruncWidth = truncate && topWidth != null ? topWidth - lineWidth : null;\n\n          if (remainTruncWidth != null && remainTruncWidth < token.width) {\n            if (!tokenWidthNotSpecified || remainTruncWidth < paddingH) {\n              token.text = '';\n              token.width = token.contentWidth = 0;\n            } else {\n              token.text = truncateText(token.text, remainTruncWidth - paddingH, font, style.ellipsis, {\n                minChar: style.truncateMinChar\n              });\n              token.width = token.contentWidth = getWidth(token.text, font);\n            }\n          } else {\n            token.contentWidth = getWidth(token.text, font);\n          }\n        }\n\n        token.width += paddingH;\n        lineWidth += token.width;\n        tokenStyle && (lineHeight = Math.max(lineHeight, token.lineHeight));\n      }\n\n      finishLine(line, lineWidth, lineHeight);\n    }\n\n    contentBlock.outerWidth = contentBlock.width = retrieve2(topWidth, calculatedWidth);\n    contentBlock.outerHeight = contentBlock.height = retrieve2(topHeight, calculatedHeight);\n    contentBlock.contentHeight = calculatedHeight;\n    contentBlock.contentWidth = calculatedWidth;\n\n    if (stlPadding) {\n      contentBlock.outerWidth += stlPadding[1] + stlPadding[3];\n      contentBlock.outerHeight += stlPadding[0] + stlPadding[2];\n    }\n\n    for (var i = 0; i < pendingList.length; i++) {\n      var token = pendingList[i];\n      var percentWidth = token.percentWidth;\n      token.width = parseInt(percentWidth, 10) / 100 * contentBlock.width;\n    }\n\n    return contentBlock;\n  }\n\n  function pushTokens(block, str, style, wrapInfo, styleName) {\n    var isEmptyStr = str === '';\n    var tokenStyle = styleName && style.rich[styleName] || {};\n    var lines = block.lines;\n    var font = tokenStyle.font || style.font;\n    var newLine = false;\n    var strLines;\n    var linesWidths;\n\n    if (wrapInfo) {\n      var tokenPadding = tokenStyle.padding;\n      var tokenPaddingH = tokenPadding ? tokenPadding[1] + tokenPadding[3] : 0;\n\n      if (tokenStyle.width != null && tokenStyle.width !== 'auto') {\n        var outerWidth_1 = parsePercent(tokenStyle.width, wrapInfo.width) + tokenPaddingH;\n\n        if (lines.length > 0) {\n          if (outerWidth_1 + wrapInfo.accumWidth > wrapInfo.width) {\n            strLines = str.split('\\n');\n            newLine = true;\n          }\n        }\n\n        wrapInfo.accumWidth = outerWidth_1;\n      } else {\n        var res = wrapText(str, font, wrapInfo.width, wrapInfo.breakAll, wrapInfo.accumWidth);\n        wrapInfo.accumWidth = res.accumWidth + tokenPaddingH;\n        linesWidths = res.linesWidths;\n        strLines = res.lines;\n      }\n    } else {\n      strLines = str.split('\\n');\n    }\n\n    for (var i = 0; i < strLines.length; i++) {\n      var text = strLines[i];\n      var token = new RichTextToken();\n      token.styleName = styleName;\n      token.text = text;\n      token.isLineHolder = !text && !isEmptyStr;\n\n      if (typeof tokenStyle.width === 'number') {\n        token.width = tokenStyle.width;\n      } else {\n        token.width = linesWidths ? linesWidths[i] : getWidth(text, font);\n      }\n\n      if (!i && !newLine) {\n        var tokens = (lines[lines.length - 1] || (lines[0] = new RichTextLine())).tokens;\n        var tokensLen = tokens.length;\n        tokensLen === 1 && tokens[0].isLineHolder ? tokens[0] = token : (text || !tokensLen || isEmptyStr) && tokens.push(token);\n      } else {\n        lines.push(new RichTextLine([token]));\n      }\n    }\n  }\n\n  function isLatin(ch) {\n    var code = ch.charCodeAt(0);\n    return code >= 0x21 && code <= 0x17F;\n  }\n\n  var breakCharMap = reduce(',&?/;] '.split(''), function (obj, ch) {\n    obj[ch] = true;\n    return obj;\n  }, {});\n\n  function isWordBreakChar(ch) {\n    if (isLatin(ch)) {\n      if (breakCharMap[ch]) {\n        return true;\n      }\n\n      return false;\n    }\n\n    return true;\n  }\n\n  function wrapText(text, font, lineWidth, isBreakAll, lastAccumWidth) {\n    var lines = [];\n    var linesWidths = [];\n    var line = '';\n    var currentWord = '';\n    var currentWordWidth = 0;\n    var accumWidth = 0;\n\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n\n      if (ch === '\\n') {\n        if (currentWord) {\n          line += currentWord;\n          accumWidth += currentWordWidth;\n        }\n\n        lines.push(line);\n        linesWidths.push(accumWidth);\n        line = '';\n        currentWord = '';\n        currentWordWidth = 0;\n        accumWidth = 0;\n        continue;\n      }\n\n      var chWidth = getWidth(ch, font);\n      var inWord = isBreakAll ? false : !isWordBreakChar(ch);\n\n      if (!lines.length ? lastAccumWidth + accumWidth + chWidth > lineWidth : accumWidth + chWidth > lineWidth) {\n        if (!accumWidth) {\n          if (inWord) {\n            lines.push(currentWord);\n            linesWidths.push(currentWordWidth);\n            currentWord = ch;\n            currentWordWidth = chWidth;\n          } else {\n            lines.push(ch);\n            linesWidths.push(chWidth);\n          }\n        } else if (line || currentWord) {\n          if (inWord) {\n            if (!line) {\n              line = currentWord;\n              currentWord = '';\n              currentWordWidth = 0;\n              accumWidth = currentWordWidth;\n            }\n\n            lines.push(line);\n            linesWidths.push(accumWidth - currentWordWidth);\n            currentWord += ch;\n            currentWordWidth += chWidth;\n            line = '';\n            accumWidth = currentWordWidth;\n          } else {\n            if (currentWord) {\n              line += currentWord;\n              currentWord = '';\n              currentWordWidth = 0;\n            }\n\n            lines.push(line);\n            linesWidths.push(accumWidth);\n            line = ch;\n            accumWidth = chWidth;\n          }\n        }\n\n        continue;\n      }\n\n      accumWidth += chWidth;\n\n      if (inWord) {\n        currentWord += ch;\n        currentWordWidth += chWidth;\n      } else {\n        if (currentWord) {\n          line += currentWord;\n          currentWord = '';\n          currentWordWidth = 0;\n        }\n\n        line += ch;\n      }\n    }\n\n    if (!lines.length && !line) {\n      line = text;\n      currentWord = '';\n      currentWordWidth = 0;\n    }\n\n    if (currentWord) {\n      line += currentWord;\n    }\n\n    if (line) {\n      lines.push(line);\n      linesWidths.push(accumWidth);\n    }\n\n    if (lines.length === 1) {\n      accumWidth += lastAccumWidth;\n    }\n\n    return {\n      accumWidth: accumWidth,\n      lines: lines,\n      linesWidths: linesWidths\n    };\n  }\n\n  var STYLE_MAGIC_KEY = '__zr_style_' + Math.round(Math.random() * 10);\n  var DEFAULT_COMMON_STYLE = {\n    shadowBlur: 0,\n    shadowOffsetX: 0,\n    shadowOffsetY: 0,\n    shadowColor: '#000',\n    opacity: 1,\n    blend: 'source-over'\n  };\n  var DEFAULT_COMMON_ANIMATION_PROPS = {\n    style: {\n      shadowBlur: true,\n      shadowOffsetX: true,\n      shadowOffsetY: true,\n      shadowColor: true,\n      opacity: true\n    }\n  };\n  DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY] = true;\n  var PRIMARY_STATES_KEYS$1 = ['z', 'z2', 'invisible'];\n  var PRIMARY_STATES_KEYS_IN_HOVER_LAYER = ['invisible'];\n\n  var Displayable = function (_super) {\n    __extends(Displayable, _super);\n\n    function Displayable(props) {\n      return _super.call(this, props) || this;\n    }\n\n    Displayable.prototype._init = function (props) {\n      var keysArr = keys(props);\n\n      for (var i = 0; i < keysArr.length; i++) {\n        var key = keysArr[i];\n\n        if (key === 'style') {\n          this.useStyle(props[key]);\n        } else {\n          _super.prototype.attrKV.call(this, key, props[key]);\n        }\n      }\n\n      if (!this.style) {\n        this.useStyle({});\n      }\n    };\n\n    Displayable.prototype.beforeBrush = function () {};\n\n    Displayable.prototype.afterBrush = function () {};\n\n    Displayable.prototype.innerBeforeBrush = function () {};\n\n    Displayable.prototype.innerAfterBrush = function () {};\n\n    Displayable.prototype.shouldBePainted = function (viewWidth, viewHeight, considerClipPath, considerAncestors) {\n      var m = this.transform;\n\n      if (this.ignore || this.invisible || this.style.opacity === 0 || this.culling && isDisplayableCulled(this, viewWidth, viewHeight) || m && !m[0] && !m[3]) {\n        return false;\n      }\n\n      if (considerClipPath && this.__clipPaths) {\n        for (var i = 0; i < this.__clipPaths.length; ++i) {\n          if (this.__clipPaths[i].isZeroArea()) {\n            return false;\n          }\n        }\n      }\n\n      if (considerAncestors && this.parent) {\n        var parent_1 = this.parent;\n\n        while (parent_1) {\n          if (parent_1.ignore) {\n            return false;\n          }\n\n          parent_1 = parent_1.parent;\n        }\n      }\n\n      return true;\n    };\n\n    Displayable.prototype.contain = function (x, y) {\n      return this.rectContain(x, y);\n    };\n\n    Displayable.prototype.traverse = function (cb, context) {\n      cb.call(context, this);\n    };\n\n    Displayable.prototype.rectContain = function (x, y) {\n      var coord = this.transformCoordToLocal(x, y);\n      var rect = this.getBoundingRect();\n      return rect.contain(coord[0], coord[1]);\n    };\n\n    Displayable.prototype.getPaintRect = function () {\n      var rect = this._paintRect;\n\n      if (!this._paintRect || this.__dirty) {\n        var transform = this.transform;\n        var elRect = this.getBoundingRect();\n        var style = this.style;\n        var shadowSize = style.shadowBlur || 0;\n        var shadowOffsetX = style.shadowOffsetX || 0;\n        var shadowOffsetY = style.shadowOffsetY || 0;\n        rect = this._paintRect || (this._paintRect = new BoundingRect(0, 0, 0, 0));\n\n        if (transform) {\n          BoundingRect.applyTransform(rect, elRect, transform);\n        } else {\n          rect.copy(elRect);\n        }\n\n        if (shadowSize || shadowOffsetX || shadowOffsetY) {\n          rect.width += shadowSize * 2 + Math.abs(shadowOffsetX);\n          rect.height += shadowSize * 2 + Math.abs(shadowOffsetY);\n          rect.x = Math.min(rect.x, rect.x + shadowOffsetX - shadowSize);\n          rect.y = Math.min(rect.y, rect.y + shadowOffsetY - shadowSize);\n        }\n\n        var tolerance = this.dirtyRectTolerance;\n\n        if (!rect.isZero()) {\n          rect.x = Math.floor(rect.x - tolerance);\n          rect.y = Math.floor(rect.y - tolerance);\n          rect.width = Math.ceil(rect.width + 1 + tolerance * 2);\n          rect.height = Math.ceil(rect.height + 1 + tolerance * 2);\n        }\n      }\n\n      return rect;\n    };\n\n    Displayable.prototype.setPrevPaintRect = function (paintRect) {\n      if (paintRect) {\n        this._prevPaintRect = this._prevPaintRect || new BoundingRect(0, 0, 0, 0);\n\n        this._prevPaintRect.copy(paintRect);\n      } else {\n        this._prevPaintRect = null;\n      }\n    };\n\n    Displayable.prototype.getPrevPaintRect = function () {\n      return this._prevPaintRect;\n    };\n\n    Displayable.prototype.animateStyle = function (loop) {\n      return this.animate('style', loop);\n    };\n\n    Displayable.prototype.updateDuringAnimation = function (targetKey) {\n      if (targetKey === 'style') {\n        this.dirtyStyle();\n      } else {\n        this.markRedraw();\n      }\n    };\n\n    Displayable.prototype.attrKV = function (key, value) {\n      if (key !== 'style') {\n        _super.prototype.attrKV.call(this, key, value);\n      } else {\n        if (!this.style) {\n          this.useStyle(value);\n        } else {\n          this.setStyle(value);\n        }\n      }\n    };\n\n    Displayable.prototype.setStyle = function (keyOrObj, value) {\n      if (typeof keyOrObj === 'string') {\n        this.style[keyOrObj] = value;\n      } else {\n        extend(this.style, keyOrObj);\n      }\n\n      this.dirtyStyle();\n      return this;\n    };\n\n    Displayable.prototype.dirtyStyle = function (notRedraw) {\n      if (!notRedraw) {\n        this.markRedraw();\n      }\n\n      this.__dirty |= STYLE_CHANGED_BIT;\n\n      if (this._rect) {\n        this._rect = null;\n      }\n    };\n\n    Displayable.prototype.dirty = function () {\n      this.dirtyStyle();\n    };\n\n    Displayable.prototype.styleChanged = function () {\n      return !!(this.__dirty & STYLE_CHANGED_BIT);\n    };\n\n    Displayable.prototype.styleUpdated = function () {\n      this.__dirty &= ~STYLE_CHANGED_BIT;\n    };\n\n    Displayable.prototype.createStyle = function (obj) {\n      return createObject(DEFAULT_COMMON_STYLE, obj);\n    };\n\n    Displayable.prototype.useStyle = function (obj) {\n      if (!obj[STYLE_MAGIC_KEY]) {\n        obj = this.createStyle(obj);\n      }\n\n      if (this.__inHover) {\n        this.__hoverStyle = obj;\n      } else {\n        this.style = obj;\n      }\n\n      this.dirtyStyle();\n    };\n\n    Displayable.prototype.isStyleObject = function (obj) {\n      return obj[STYLE_MAGIC_KEY];\n    };\n\n    Displayable.prototype._innerSaveToNormal = function (toState) {\n      _super.prototype._innerSaveToNormal.call(this, toState);\n\n      var normalState = this._normalState;\n\n      if (toState.style && !normalState.style) {\n        normalState.style = this._mergeStyle(this.createStyle(), this.style);\n      }\n\n      this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS$1);\n    };\n\n    Displayable.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n      _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n\n      var needsRestoreToNormal = !(state && keepCurrentStates);\n      var targetStyle;\n\n      if (state && state.style) {\n        if (transition) {\n          if (keepCurrentStates) {\n            targetStyle = state.style;\n          } else {\n            targetStyle = this._mergeStyle(this.createStyle(), normalState.style);\n\n            this._mergeStyle(targetStyle, state.style);\n          }\n        } else {\n          targetStyle = this._mergeStyle(this.createStyle(), keepCurrentStates ? this.style : normalState.style);\n\n          this._mergeStyle(targetStyle, state.style);\n        }\n      } else if (needsRestoreToNormal) {\n        targetStyle = normalState.style;\n      }\n\n      if (targetStyle) {\n        if (transition) {\n          var sourceStyle = this.style;\n          this.style = this.createStyle(needsRestoreToNormal ? {} : sourceStyle);\n\n          if (needsRestoreToNormal) {\n            var changedKeys = keys(sourceStyle);\n\n            for (var i = 0; i < changedKeys.length; i++) {\n              var key = changedKeys[i];\n\n              if (key in targetStyle) {\n                targetStyle[key] = targetStyle[key];\n                this.style[key] = sourceStyle[key];\n              }\n            }\n          }\n\n          var targetKeys = keys(targetStyle);\n\n          for (var i = 0; i < targetKeys.length; i++) {\n            var key = targetKeys[i];\n            this.style[key] = this.style[key];\n          }\n\n          this._transitionState(stateName, {\n            style: targetStyle\n          }, animationCfg, this.getAnimationStyleProps());\n        } else {\n          this.useStyle(targetStyle);\n        }\n      }\n\n      var statesKeys = this.__inHover ? PRIMARY_STATES_KEYS_IN_HOVER_LAYER : PRIMARY_STATES_KEYS$1;\n\n      for (var i = 0; i < statesKeys.length; i++) {\n        var key = statesKeys[i];\n\n        if (state && state[key] != null) {\n          this[key] = state[key];\n        } else if (needsRestoreToNormal) {\n          if (normalState[key] != null) {\n            this[key] = normalState[key];\n          }\n        }\n      }\n    };\n\n    Displayable.prototype._mergeStates = function (states) {\n      var mergedState = _super.prototype._mergeStates.call(this, states);\n\n      var mergedStyle;\n\n      for (var i = 0; i < states.length; i++) {\n        var state = states[i];\n\n        if (state.style) {\n          mergedStyle = mergedStyle || {};\n\n          this._mergeStyle(mergedStyle, state.style);\n        }\n      }\n\n      if (mergedStyle) {\n        mergedState.style = mergedStyle;\n      }\n\n      return mergedState;\n    };\n\n    Displayable.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n      extend(targetStyle, sourceStyle);\n      return targetStyle;\n    };\n\n    Displayable.prototype.getAnimationStyleProps = function () {\n      return DEFAULT_COMMON_ANIMATION_PROPS;\n    };\n\n    Displayable.initDefaultProps = function () {\n      var dispProto = Displayable.prototype;\n      dispProto.type = 'displayable';\n      dispProto.invisible = false;\n      dispProto.z = 0;\n      dispProto.z2 = 0;\n      dispProto.zlevel = 0;\n      dispProto.culling = false;\n      dispProto.cursor = 'pointer';\n      dispProto.rectHover = false;\n      dispProto.incremental = false;\n      dispProto._rect = null;\n      dispProto.dirtyRectTolerance = 0;\n      dispProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT;\n    }();\n\n    return Displayable;\n  }(Element);\n\n  var tmpRect = new BoundingRect(0, 0, 0, 0);\n  var viewRect = new BoundingRect(0, 0, 0, 0);\n\n  function isDisplayableCulled(el, width, height) {\n    tmpRect.copy(el.getBoundingRect());\n\n    if (el.transform) {\n      tmpRect.applyTransform(el.transform);\n    }\n\n    viewRect.width = width;\n    viewRect.height = height;\n    return !tmpRect.intersect(viewRect);\n  }\n\n  var mathMin$2 = Math.min;\n  var mathMax$2 = Math.max;\n  var mathSin$1 = Math.sin;\n  var mathCos$1 = Math.cos;\n  var PI2$1 = Math.PI * 2;\n  var start = create();\n  var end = create();\n  var extremity = create();\n\n  function fromLine(x0, y0, x1, y1, min$$1, max$$1) {\n    min$$1[0] = mathMin$2(x0, x1);\n    min$$1[1] = mathMin$2(y0, y1);\n    max$$1[0] = mathMax$2(x0, x1);\n    max$$1[1] = mathMax$2(y0, y1);\n  }\n\n  var xDim = [];\n  var yDim = [];\n\n  function fromCubic(x0, y0, x1, y1, x2, y2, x3, y3, min$$1, max$$1) {\n    var cubicExtrema$$1 = cubicExtrema;\n    var cubicAt$$1 = cubicAt;\n    var n = cubicExtrema$$1(x0, x1, x2, x3, xDim);\n    min$$1[0] = Infinity;\n    min$$1[1] = Infinity;\n    max$$1[0] = -Infinity;\n    max$$1[1] = -Infinity;\n\n    for (var i = 0; i < n; i++) {\n      var x = cubicAt$$1(x0, x1, x2, x3, xDim[i]);\n      min$$1[0] = mathMin$2(x, min$$1[0]);\n      max$$1[0] = mathMax$2(x, max$$1[0]);\n    }\n\n    n = cubicExtrema$$1(y0, y1, y2, y3, yDim);\n\n    for (var i = 0; i < n; i++) {\n      var y = cubicAt$$1(y0, y1, y2, y3, yDim[i]);\n      min$$1[1] = mathMin$2(y, min$$1[1]);\n      max$$1[1] = mathMax$2(y, max$$1[1]);\n    }\n\n    min$$1[0] = mathMin$2(x0, min$$1[0]);\n    max$$1[0] = mathMax$2(x0, max$$1[0]);\n    min$$1[0] = mathMin$2(x3, min$$1[0]);\n    max$$1[0] = mathMax$2(x3, max$$1[0]);\n    min$$1[1] = mathMin$2(y0, min$$1[1]);\n    max$$1[1] = mathMax$2(y0, max$$1[1]);\n    min$$1[1] = mathMin$2(y3, min$$1[1]);\n    max$$1[1] = mathMax$2(y3, max$$1[1]);\n  }\n\n  function fromQuadratic(x0, y0, x1, y1, x2, y2, min$$1, max$$1) {\n    var quadraticExtremum$$1 = quadraticExtremum;\n    var quadraticAt$$1 = quadraticAt;\n    var tx = mathMax$2(mathMin$2(quadraticExtremum$$1(x0, x1, x2), 1), 0);\n    var ty = mathMax$2(mathMin$2(quadraticExtremum$$1(y0, y1, y2), 1), 0);\n    var x = quadraticAt$$1(x0, x1, x2, tx);\n    var y = quadraticAt$$1(y0, y1, y2, ty);\n    min$$1[0] = mathMin$2(x0, x2, x);\n    min$$1[1] = mathMin$2(y0, y2, y);\n    max$$1[0] = mathMax$2(x0, x2, x);\n    max$$1[1] = mathMax$2(y0, y2, y);\n  }\n\n  function fromArc(x, y, rx, ry, startAngle, endAngle, anticlockwise, min$$1, max$$1) {\n    var vec2Min = min;\n    var vec2Max = max;\n    var diff = Math.abs(startAngle - endAngle);\n\n    if (diff % PI2$1 < 1e-4 && diff > 1e-4) {\n      min$$1[0] = x - rx;\n      min$$1[1] = y - ry;\n      max$$1[0] = x + rx;\n      max$$1[1] = y + ry;\n      return;\n    }\n\n    start[0] = mathCos$1(startAngle) * rx + x;\n    start[1] = mathSin$1(startAngle) * ry + y;\n    end[0] = mathCos$1(endAngle) * rx + x;\n    end[1] = mathSin$1(endAngle) * ry + y;\n    vec2Min(min$$1, start, end);\n    vec2Max(max$$1, start, end);\n    startAngle = startAngle % PI2$1;\n\n    if (startAngle < 0) {\n      startAngle = startAngle + PI2$1;\n    }\n\n    endAngle = endAngle % PI2$1;\n\n    if (endAngle < 0) {\n      endAngle = endAngle + PI2$1;\n    }\n\n    if (startAngle > endAngle && !anticlockwise) {\n      endAngle += PI2$1;\n    } else if (startAngle < endAngle && anticlockwise) {\n      startAngle += PI2$1;\n    }\n\n    if (anticlockwise) {\n      var tmp = endAngle;\n      endAngle = startAngle;\n      startAngle = tmp;\n    }\n\n    for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {\n      if (angle > startAngle) {\n        extremity[0] = mathCos$1(angle) * rx + x;\n        extremity[1] = mathSin$1(angle) * ry + y;\n        vec2Min(min$$1, extremity, min$$1);\n        vec2Max(max$$1, extremity, max$$1);\n      }\n    }\n  }\n\n  var CMD = {\n    M: 1,\n    L: 2,\n    C: 3,\n    Q: 4,\n    A: 5,\n    Z: 6,\n    R: 7\n  };\n  var tmpOutX = [];\n  var tmpOutY = [];\n  var min$1 = [];\n  var max$1 = [];\n  var min2 = [];\n  var max2 = [];\n  var mathMin$1 = Math.min;\n  var mathMax$1 = Math.max;\n  var mathCos = Math.cos;\n  var mathSin = Math.sin;\n  var mathAbs = Math.abs;\n  var PI = Math.PI;\n  var PI2 = PI * 2;\n  var hasTypedArray = typeof Float32Array !== 'undefined';\n  var tmpAngles = [];\n\n  function modPI2(radian) {\n    var n = Math.round(radian / PI * 1e8) / 1e8;\n    return n % 2 * PI;\n  }\n\n  function normalizeArcAngles(angles, anticlockwise) {\n    var newStartAngle = modPI2(angles[0]);\n\n    if (newStartAngle < 0) {\n      newStartAngle += PI2;\n    }\n\n    var delta = newStartAngle - angles[0];\n    var newEndAngle = angles[1];\n    newEndAngle += delta;\n\n    if (!anticlockwise && newEndAngle - newStartAngle >= PI2) {\n      newEndAngle = newStartAngle + PI2;\n    } else if (anticlockwise && newStartAngle - newEndAngle >= PI2) {\n      newEndAngle = newStartAngle - PI2;\n    } else if (!anticlockwise && newStartAngle > newEndAngle) {\n      newEndAngle = newStartAngle + (PI2 - modPI2(newStartAngle - newEndAngle));\n    } else if (anticlockwise && newStartAngle < newEndAngle) {\n      newEndAngle = newStartAngle - (PI2 - modPI2(newEndAngle - newStartAngle));\n    }\n\n    angles[0] = newStartAngle;\n    angles[1] = newEndAngle;\n  }\n\n  var PathProxy = function () {\n    function PathProxy(notSaveData) {\n      this.dpr = 1;\n      this._xi = 0;\n      this._yi = 0;\n      this._x0 = 0;\n      this._y0 = 0;\n      this._len = 0;\n\n      if (notSaveData) {\n        this._saveData = false;\n      }\n\n      if (this._saveData) {\n        this.data = [];\n      }\n    }\n\n    PathProxy.prototype.increaseVersion = function () {\n      this._version++;\n    };\n\n    PathProxy.prototype.getVersion = function () {\n      return this._version;\n    };\n\n    PathProxy.prototype.setScale = function (sx, sy, segmentIgnoreThreshold) {\n      segmentIgnoreThreshold = segmentIgnoreThreshold || 0;\n\n      if (segmentIgnoreThreshold > 0) {\n        this._ux = mathAbs(segmentIgnoreThreshold / devicePixelRatio / sx) || 0;\n        this._uy = mathAbs(segmentIgnoreThreshold / devicePixelRatio / sy) || 0;\n      }\n    };\n\n    PathProxy.prototype.setDPR = function (dpr) {\n      this.dpr = dpr;\n    };\n\n    PathProxy.prototype.setContext = function (ctx) {\n      this._ctx = ctx;\n    };\n\n    PathProxy.prototype.getContext = function () {\n      return this._ctx;\n    };\n\n    PathProxy.prototype.beginPath = function () {\n      this._ctx && this._ctx.beginPath();\n      this.reset();\n      return this;\n    };\n\n    PathProxy.prototype.reset = function () {\n      if (this._saveData) {\n        this._len = 0;\n      }\n\n      if (this._pathSegLen) {\n        this._pathSegLen = null;\n        this._pathLen = 0;\n      }\n\n      this._version++;\n    };\n\n    PathProxy.prototype.moveTo = function (x, y) {\n      this._drawPendingPt();\n\n      this.addData(CMD.M, x, y);\n      this._ctx && this._ctx.moveTo(x, y);\n      this._x0 = x;\n      this._y0 = y;\n      this._xi = x;\n      this._yi = y;\n      return this;\n    };\n\n    PathProxy.prototype.lineTo = function (x, y) {\n      var dx = mathAbs(x - this._xi);\n      var dy = mathAbs(y - this._yi);\n      var exceedUnit = dx > this._ux || dy > this._uy;\n      this.addData(CMD.L, x, y);\n\n      if (this._ctx && exceedUnit) {\n        this._ctx.lineTo(x, y);\n      }\n\n      if (exceedUnit) {\n        this._xi = x;\n        this._yi = y;\n        this._pendingPtDist = 0;\n      } else {\n        var d2 = dx * dx + dy * dy;\n\n        if (d2 > this._pendingPtDist) {\n          this._pendingPtX = x;\n          this._pendingPtY = y;\n          this._pendingPtDist = d2;\n        }\n      }\n\n      return this;\n    };\n\n    PathProxy.prototype.bezierCurveTo = function (x1, y1, x2, y2, x3, y3) {\n      this._drawPendingPt();\n\n      this.addData(CMD.C, x1, y1, x2, y2, x3, y3);\n\n      if (this._ctx) {\n        this._ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n      }\n\n      this._xi = x3;\n      this._yi = y3;\n      return this;\n    };\n\n    PathProxy.prototype.quadraticCurveTo = function (x1, y1, x2, y2) {\n      this._drawPendingPt();\n\n      this.addData(CMD.Q, x1, y1, x2, y2);\n\n      if (this._ctx) {\n        this._ctx.quadraticCurveTo(x1, y1, x2, y2);\n      }\n\n      this._xi = x2;\n      this._yi = y2;\n      return this;\n    };\n\n    PathProxy.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n      this._drawPendingPt();\n\n      tmpAngles[0] = startAngle;\n      tmpAngles[1] = endAngle;\n      normalizeArcAngles(tmpAngles, anticlockwise);\n      startAngle = tmpAngles[0];\n      endAngle = tmpAngles[1];\n      var delta = endAngle - startAngle;\n      this.addData(CMD.A, cx, cy, r, r, startAngle, delta, 0, anticlockwise ? 0 : 1);\n      this._ctx && this._ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n      this._xi = mathCos(endAngle) * r + cx;\n      this._yi = mathSin(endAngle) * r + cy;\n      return this;\n    };\n\n    PathProxy.prototype.arcTo = function (x1, y1, x2, y2, radius) {\n      this._drawPendingPt();\n\n      if (this._ctx) {\n        this._ctx.arcTo(x1, y1, x2, y2, radius);\n      }\n\n      return this;\n    };\n\n    PathProxy.prototype.rect = function (x, y, w, h) {\n      this._drawPendingPt();\n\n      this._ctx && this._ctx.rect(x, y, w, h);\n      this.addData(CMD.R, x, y, w, h);\n      return this;\n    };\n\n    PathProxy.prototype.closePath = function () {\n      this._drawPendingPt();\n\n      this.addData(CMD.Z);\n      var ctx = this._ctx;\n      var x0 = this._x0;\n      var y0 = this._y0;\n\n      if (ctx) {\n        ctx.closePath();\n      }\n\n      this._xi = x0;\n      this._yi = y0;\n      return this;\n    };\n\n    PathProxy.prototype.fill = function (ctx) {\n      ctx && ctx.fill();\n      this.toStatic();\n    };\n\n    PathProxy.prototype.stroke = function (ctx) {\n      ctx && ctx.stroke();\n      this.toStatic();\n    };\n\n    PathProxy.prototype.len = function () {\n      return this._len;\n    };\n\n    PathProxy.prototype.setData = function (data) {\n      var len$$1 = data.length;\n\n      if (!(this.data && this.data.length === len$$1) && hasTypedArray) {\n        this.data = new Float32Array(len$$1);\n      }\n\n      for (var i = 0; i < len$$1; i++) {\n        this.data[i] = data[i];\n      }\n\n      this._len = len$$1;\n    };\n\n    PathProxy.prototype.appendPath = function (path) {\n      if (!(path instanceof Array)) {\n        path = [path];\n      }\n\n      var len$$1 = path.length;\n      var appendSize = 0;\n      var offset = this._len;\n\n      for (var i = 0; i < len$$1; i++) {\n        appendSize += path[i].len();\n      }\n\n      if (hasTypedArray && this.data instanceof Float32Array) {\n        this.data = new Float32Array(offset + appendSize);\n      }\n\n      for (var i = 0; i < len$$1; i++) {\n        var appendPathData = path[i].data;\n\n        for (var k = 0; k < appendPathData.length; k++) {\n          this.data[offset++] = appendPathData[k];\n        }\n      }\n\n      this._len = offset;\n    };\n\n    PathProxy.prototype.addData = function (cmd, a, b, c, d, e, f, g, h) {\n      if (!this._saveData) {\n        return;\n      }\n\n      var data = this.data;\n\n      if (this._len + arguments.length > data.length) {\n        this._expandData();\n\n        data = this.data;\n      }\n\n      for (var i = 0; i < arguments.length; i++) {\n        data[this._len++] = arguments[i];\n      }\n    };\n\n    PathProxy.prototype._drawPendingPt = function () {\n      if (this._pendingPtDist > 0) {\n        this._ctx && this._ctx.lineTo(this._pendingPtX, this._pendingPtY);\n        this._pendingPtDist = 0;\n      }\n    };\n\n    PathProxy.prototype._expandData = function () {\n      if (!(this.data instanceof Array)) {\n        var newData = [];\n\n        for (var i = 0; i < this._len; i++) {\n          newData[i] = this.data[i];\n        }\n\n        this.data = newData;\n      }\n    };\n\n    PathProxy.prototype.toStatic = function () {\n      if (!this._saveData) {\n        return;\n      }\n\n      this._drawPendingPt();\n\n      var data = this.data;\n\n      if (data instanceof Array) {\n        data.length = this._len;\n\n        if (hasTypedArray && this._len > 11) {\n          this.data = new Float32Array(data);\n        }\n      }\n    };\n\n    PathProxy.prototype.getBoundingRect = function () {\n      min$1[0] = min$1[1] = min2[0] = min2[1] = Number.MAX_VALUE;\n      max$1[0] = max$1[1] = max2[0] = max2[1] = -Number.MAX_VALUE;\n      var data = this.data;\n      var xi = 0;\n      var yi = 0;\n      var x0 = 0;\n      var y0 = 0;\n      var i;\n\n      for (i = 0; i < this._len;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n\n        if (isFirst) {\n          xi = data[i];\n          yi = data[i + 1];\n          x0 = xi;\n          y0 = yi;\n        }\n\n        switch (cmd) {\n          case CMD.M:\n            xi = x0 = data[i++];\n            yi = y0 = data[i++];\n            min2[0] = x0;\n            min2[1] = y0;\n            max2[0] = x0;\n            max2[1] = y0;\n            break;\n\n          case CMD.L:\n            fromLine(xi, yi, data[i], data[i + 1], min2, max2);\n            xi = data[i++];\n            yi = data[i++];\n            break;\n\n          case CMD.C:\n            fromCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], min2, max2);\n            xi = data[i++];\n            yi = data[i++];\n            break;\n\n          case CMD.Q:\n            fromQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], min2, max2);\n            xi = data[i++];\n            yi = data[i++];\n            break;\n\n          case CMD.A:\n            var cx = data[i++];\n            var cy = data[i++];\n            var rx = data[i++];\n            var ry = data[i++];\n            var startAngle = data[i++];\n            var endAngle = data[i++] + startAngle;\n            i += 1;\n            var anticlockwise = !data[i++];\n\n            if (isFirst) {\n              x0 = mathCos(startAngle) * rx + cx;\n              y0 = mathSin(startAngle) * ry + cy;\n            }\n\n            fromArc(cx, cy, rx, ry, startAngle, endAngle, anticlockwise, min2, max2);\n            xi = mathCos(endAngle) * rx + cx;\n            yi = mathSin(endAngle) * ry + cy;\n            break;\n\n          case CMD.R:\n            x0 = xi = data[i++];\n            y0 = yi = data[i++];\n            var width = data[i++];\n            var height = data[i++];\n            fromLine(x0, y0, x0 + width, y0 + height, min2, max2);\n            break;\n\n          case CMD.Z:\n            xi = x0;\n            yi = y0;\n            break;\n        }\n\n        min(min$1, min$1, min2);\n        max(max$1, max$1, max2);\n      }\n\n      if (i === 0) {\n        min$1[0] = min$1[1] = max$1[0] = max$1[1] = 0;\n      }\n\n      return new BoundingRect(min$1[0], min$1[1], max$1[0] - min$1[0], max$1[1] - min$1[1]);\n    };\n\n    PathProxy.prototype._calculateLength = function () {\n      var data = this.data;\n      var len$$1 = this._len;\n      var ux = this._ux;\n      var uy = this._uy;\n      var xi = 0;\n      var yi = 0;\n      var x0 = 0;\n      var y0 = 0;\n\n      if (!this._pathSegLen) {\n        this._pathSegLen = [];\n      }\n\n      var pathSegLen = this._pathSegLen;\n      var pathTotalLen = 0;\n      var segCount = 0;\n\n      for (var i = 0; i < len$$1;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n\n        if (isFirst) {\n          xi = data[i];\n          yi = data[i + 1];\n          x0 = xi;\n          y0 = yi;\n        }\n\n        var l = -1;\n\n        switch (cmd) {\n          case CMD.M:\n            xi = x0 = data[i++];\n            yi = y0 = data[i++];\n            break;\n\n          case CMD.L:\n            {\n              var x2 = data[i++];\n              var y2 = data[i++];\n              var dx = x2 - xi;\n              var dy = y2 - yi;\n\n              if (mathAbs(dx) > ux || mathAbs(dy) > uy || i === len$$1 - 1) {\n                l = Math.sqrt(dx * dx + dy * dy);\n                xi = x2;\n                yi = y2;\n              }\n\n              break;\n            }\n\n          case CMD.C:\n            {\n              var x1 = data[i++];\n              var y1 = data[i++];\n              var x2 = data[i++];\n              var y2 = data[i++];\n              var x3 = data[i++];\n              var y3 = data[i++];\n              l = cubicLength(xi, yi, x1, y1, x2, y2, x3, y3, 10);\n              xi = x3;\n              yi = y3;\n              break;\n            }\n\n          case CMD.Q:\n            {\n              var x1 = data[i++];\n              var y1 = data[i++];\n              var x2 = data[i++];\n              var y2 = data[i++];\n              l = quadraticLength(xi, yi, x1, y1, x2, y2, 10);\n              xi = x2;\n              yi = y2;\n              break;\n            }\n\n          case CMD.A:\n            var cx = data[i++];\n            var cy = data[i++];\n            var rx = data[i++];\n            var ry = data[i++];\n            var startAngle = data[i++];\n            var delta = data[i++];\n            var endAngle = delta + startAngle;\n            i += 1;\n            var anticlockwise = !data[i++];\n\n            if (isFirst) {\n              x0 = mathCos(startAngle) * rx + cx;\n              y0 = mathSin(startAngle) * ry + cy;\n            }\n\n            l = mathMax$1(rx, ry) * mathMin$1(PI2, Math.abs(delta));\n            xi = mathCos(endAngle) * rx + cx;\n            yi = mathSin(endAngle) * ry + cy;\n            break;\n\n          case CMD.R:\n            {\n              x0 = xi = data[i++];\n              y0 = yi = data[i++];\n              var width = data[i++];\n              var height = data[i++];\n              l = width * 2 + height * 2;\n              break;\n            }\n\n          case CMD.Z:\n            {\n              var dx = x0 - xi;\n              var dy = y0 - yi;\n              l = Math.sqrt(dx * dx + dy * dy);\n              xi = x0;\n              yi = y0;\n              break;\n            }\n        }\n\n        if (l >= 0) {\n          pathSegLen[segCount++] = l;\n          pathTotalLen += l;\n        }\n      }\n\n      this._pathLen = pathTotalLen;\n      return pathTotalLen;\n    };\n\n    PathProxy.prototype.rebuildPath = function (ctx, percent) {\n      var d = this.data;\n      var ux = this._ux;\n      var uy = this._uy;\n      var len$$1 = this._len;\n      var x0;\n      var y0;\n      var xi;\n      var yi;\n      var x;\n      var y;\n      var drawPart = percent < 1;\n      var pathSegLen;\n      var pathTotalLen;\n      var accumLength = 0;\n      var segCount = 0;\n      var displayedLength;\n      var pendingPtDist = 0;\n      var pendingPtX;\n      var pendingPtY;\n\n      if (drawPart) {\n        if (!this._pathSegLen) {\n          this._calculateLength();\n        }\n\n        pathSegLen = this._pathSegLen;\n        pathTotalLen = this._pathLen;\n        displayedLength = percent * pathTotalLen;\n\n        if (!displayedLength) {\n          return;\n        }\n      }\n\n      lo: for (var i = 0; i < len$$1;) {\n        var cmd = d[i++];\n        var isFirst = i === 1;\n\n        if (isFirst) {\n          xi = d[i];\n          yi = d[i + 1];\n          x0 = xi;\n          y0 = yi;\n        }\n\n        if (cmd !== CMD.L && pendingPtDist > 0) {\n          ctx.lineTo(pendingPtX, pendingPtY);\n          pendingPtDist = 0;\n        }\n\n        switch (cmd) {\n          case CMD.M:\n            x0 = xi = d[i++];\n            y0 = yi = d[i++];\n            ctx.moveTo(xi, yi);\n            break;\n\n          case CMD.L:\n            {\n              x = d[i++];\n              y = d[i++];\n              var dx = mathAbs(x - xi);\n              var dy = mathAbs(y - yi);\n\n              if (dx > ux || dy > uy) {\n                if (drawPart) {\n                  var l = pathSegLen[segCount++];\n\n                  if (accumLength + l > displayedLength) {\n                    var t = (displayedLength - accumLength) / l;\n                    ctx.lineTo(xi * (1 - t) + x * t, yi * (1 - t) + y * t);\n                    break lo;\n                  }\n\n                  accumLength += l;\n                }\n\n                ctx.lineTo(x, y);\n                xi = x;\n                yi = y;\n                pendingPtDist = 0;\n              } else {\n                var d2 = dx * dx + dy * dy;\n\n                if (d2 > pendingPtDist) {\n                  pendingPtX = x;\n                  pendingPtY = y;\n                  pendingPtDist = d2;\n                }\n              }\n\n              break;\n            }\n\n          case CMD.C:\n            {\n              var x1 = d[i++];\n              var y1 = d[i++];\n              var x2 = d[i++];\n              var y2 = d[i++];\n              var x3 = d[i++];\n              var y3 = d[i++];\n\n              if (drawPart) {\n                var l = pathSegLen[segCount++];\n\n                if (accumLength + l > displayedLength) {\n                  var t = (displayedLength - accumLength) / l;\n                  cubicSubdivide(xi, x1, x2, x3, t, tmpOutX);\n                  cubicSubdivide(yi, y1, y2, y3, t, tmpOutY);\n                  ctx.bezierCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2], tmpOutX[3], tmpOutY[3]);\n                  break lo;\n                }\n\n                accumLength += l;\n              }\n\n              ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n              xi = x3;\n              yi = y3;\n              break;\n            }\n\n          case CMD.Q:\n            {\n              var x1 = d[i++];\n              var y1 = d[i++];\n              var x2 = d[i++];\n              var y2 = d[i++];\n\n              if (drawPart) {\n                var l = pathSegLen[segCount++];\n\n                if (accumLength + l > displayedLength) {\n                  var t = (displayedLength - accumLength) / l;\n                  quadraticSubdivide(xi, x1, x2, t, tmpOutX);\n                  quadraticSubdivide(yi, y1, y2, t, tmpOutY);\n                  ctx.quadraticCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2]);\n                  break lo;\n                }\n\n                accumLength += l;\n              }\n\n              ctx.quadraticCurveTo(x1, y1, x2, y2);\n              xi = x2;\n              yi = y2;\n              break;\n            }\n\n          case CMD.A:\n            var cx = d[i++];\n            var cy = d[i++];\n            var rx = d[i++];\n            var ry = d[i++];\n            var startAngle = d[i++];\n            var delta = d[i++];\n            var psi = d[i++];\n            var anticlockwise = !d[i++];\n            var r = rx > ry ? rx : ry;\n            var isEllipse = mathAbs(rx - ry) > 1e-3;\n            var endAngle = startAngle + delta;\n            var breakBuild = false;\n\n            if (drawPart) {\n              var l = pathSegLen[segCount++];\n\n              if (accumLength + l > displayedLength) {\n                endAngle = startAngle + delta * (displayedLength - accumLength) / l;\n                breakBuild = true;\n              }\n\n              accumLength += l;\n            }\n\n            if (isEllipse && ctx.ellipse) {\n              ctx.ellipse(cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise);\n            } else {\n              ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n            }\n\n            if (breakBuild) {\n              break lo;\n            }\n\n            if (isFirst) {\n              x0 = mathCos(startAngle) * rx + cx;\n              y0 = mathSin(startAngle) * ry + cy;\n            }\n\n            xi = mathCos(endAngle) * rx + cx;\n            yi = mathSin(endAngle) * ry + cy;\n            break;\n\n          case CMD.R:\n            x0 = xi = d[i];\n            y0 = yi = d[i + 1];\n            x = d[i++];\n            y = d[i++];\n            var width = d[i++];\n            var height = d[i++];\n\n            if (drawPart) {\n              var l = pathSegLen[segCount++];\n\n              if (accumLength + l > displayedLength) {\n                var d_1 = displayedLength - accumLength;\n                ctx.moveTo(x, y);\n                ctx.lineTo(x + mathMin$1(d_1, width), y);\n                d_1 -= width;\n\n                if (d_1 > 0) {\n                  ctx.lineTo(x + width, y + mathMin$1(d_1, height));\n                }\n\n                d_1 -= height;\n\n                if (d_1 > 0) {\n                  ctx.lineTo(x + mathMax$1(width - d_1, 0), y + height);\n                }\n\n                d_1 -= width;\n\n                if (d_1 > 0) {\n                  ctx.lineTo(x, y + mathMax$1(height - d_1, 0));\n                }\n\n                break lo;\n              }\n\n              accumLength += l;\n            }\n\n            ctx.rect(x, y, width, height);\n            break;\n\n          case CMD.Z:\n            if (drawPart) {\n              var l = pathSegLen[segCount++];\n\n              if (accumLength + l > displayedLength) {\n                var t = (displayedLength - accumLength) / l;\n                ctx.lineTo(xi * (1 - t) + x0 * t, yi * (1 - t) + y0 * t);\n                break lo;\n              }\n\n              accumLength += l;\n            }\n\n            ctx.closePath();\n            xi = x0;\n            yi = y0;\n        }\n      }\n    };\n\n    PathProxy.prototype.clone = function () {\n      var newProxy = new PathProxy();\n      var data = this.data;\n      newProxy.data = data.slice ? data.slice() : Array.prototype.slice.call(data);\n      newProxy._len = this._len;\n      return newProxy;\n    };\n\n    PathProxy.CMD = CMD;\n\n    PathProxy.initDefaultProps = function () {\n      var proto = PathProxy.prototype;\n      proto._saveData = true;\n      proto._ux = 0;\n      proto._uy = 0;\n      proto._pendingPtDist = 0;\n      proto._version = 0;\n    }();\n\n    return PathProxy;\n  }();\n\n  function containStroke$1(x0, y0, x1, y1, lineWidth, x, y) {\n    if (lineWidth === 0) {\n      return false;\n    }\n\n    var _l = lineWidth;\n    var _a = 0;\n    var _b = x0;\n\n    if (y > y0 + _l && y > y1 + _l || y < y0 - _l && y < y1 - _l || x > x0 + _l && x > x1 + _l || x < x0 - _l && x < x1 - _l) {\n      return false;\n    }\n\n    if (x0 !== x1) {\n      _a = (y0 - y1) / (x0 - x1);\n      _b = (x0 * y1 - x1 * y0) / (x0 - x1);\n    } else {\n      return Math.abs(x - x0) <= _l / 2;\n    }\n\n    var tmp = _a * x - y + _b;\n\n    var _s = tmp * tmp / (_a * _a + 1);\n\n    return _s <= _l / 2 * _l / 2;\n  }\n\n  function containStroke$2(x0, y0, x1, y1, x2, y2, x3, y3, lineWidth, x, y) {\n    if (lineWidth === 0) {\n      return false;\n    }\n\n    var _l = lineWidth;\n\n    if (y > y0 + _l && y > y1 + _l && y > y2 + _l && y > y3 + _l || y < y0 - _l && y < y1 - _l && y < y2 - _l && y < y3 - _l || x > x0 + _l && x > x1 + _l && x > x2 + _l && x > x3 + _l || x < x0 - _l && x < x1 - _l && x < x2 - _l && x < x3 - _l) {\n      return false;\n    }\n\n    var d = cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, null);\n    return d <= _l / 2;\n  }\n\n  function containStroke$3(x0, y0, x1, y1, x2, y2, lineWidth, x, y) {\n    if (lineWidth === 0) {\n      return false;\n    }\n\n    var _l = lineWidth;\n\n    if (y > y0 + _l && y > y1 + _l && y > y2 + _l || y < y0 - _l && y < y1 - _l && y < y2 - _l || x > x0 + _l && x > x1 + _l && x > x2 + _l || x < x0 - _l && x < x1 - _l && x < x2 - _l) {\n      return false;\n    }\n\n    var d = quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, null);\n    return d <= _l / 2;\n  }\n\n  var PI2$4 = Math.PI * 2;\n\n  function normalizeRadian(angle) {\n    angle %= PI2$4;\n\n    if (angle < 0) {\n      angle += PI2$4;\n    }\n\n    return angle;\n  }\n\n  var PI2$3 = Math.PI * 2;\n\n  function containStroke$4(cx, cy, r, startAngle, endAngle, anticlockwise, lineWidth, x, y) {\n    if (lineWidth === 0) {\n      return false;\n    }\n\n    var _l = lineWidth;\n    x -= cx;\n    y -= cy;\n    var d = Math.sqrt(x * x + y * y);\n\n    if (d - _l > r || d + _l < r) {\n      return false;\n    }\n\n    if (Math.abs(startAngle - endAngle) % PI2$3 < 1e-4) {\n      return true;\n    }\n\n    if (anticlockwise) {\n      var tmp = startAngle;\n      startAngle = normalizeRadian(endAngle);\n      endAngle = normalizeRadian(tmp);\n    } else {\n      startAngle = normalizeRadian(startAngle);\n      endAngle = normalizeRadian(endAngle);\n    }\n\n    if (startAngle > endAngle) {\n      endAngle += PI2$3;\n    }\n\n    var angle = Math.atan2(y, x);\n\n    if (angle < 0) {\n      angle += PI2$3;\n    }\n\n    return angle >= startAngle && angle <= endAngle || angle + PI2$3 >= startAngle && angle + PI2$3 <= endAngle;\n  }\n\n  function windingLine(x0, y0, x1, y1, x, y) {\n    if (y > y0 && y > y1 || y < y0 && y < y1) {\n      return 0;\n    }\n\n    if (y1 === y0) {\n      return 0;\n    }\n\n    var t = (y - y0) / (y1 - y0);\n    var dir = y1 < y0 ? 1 : -1;\n\n    if (t === 1 || t === 0) {\n      dir = y1 < y0 ? 0.5 : -0.5;\n    }\n\n    var x_ = t * (x1 - x0) + x0;\n    return x_ === x ? Infinity : x_ > x ? dir : 0;\n  }\n\n  var CMD$1 = PathProxy.CMD;\n  var PI2$2 = Math.PI * 2;\n  var EPSILON$3 = 1e-4;\n\n  function isAroundEqual(a, b) {\n    return Math.abs(a - b) < EPSILON$3;\n  }\n\n  var roots = [-1, -1, -1];\n  var extrema = [-1, -1];\n\n  function swapExtrema() {\n    var tmp = extrema[0];\n    extrema[0] = extrema[1];\n    extrema[1] = tmp;\n  }\n\n  function windingCubic(x0, y0, x1, y1, x2, y2, x3, y3, x, y) {\n    if (y > y0 && y > y1 && y > y2 && y > y3 || y < y0 && y < y1 && y < y2 && y < y3) {\n      return 0;\n    }\n\n    var nRoots = cubicRootAt(y0, y1, y2, y3, y, roots);\n\n    if (nRoots === 0) {\n      return 0;\n    } else {\n      var w = 0;\n      var nExtrema = -1;\n      var y0_ = void 0;\n      var y1_ = void 0;\n\n      for (var i = 0; i < nRoots; i++) {\n        var t = roots[i];\n        var unit = t === 0 || t === 1 ? 0.5 : 1;\n        var x_ = cubicAt(x0, x1, x2, x3, t);\n\n        if (x_ < x) {\n          continue;\n        }\n\n        if (nExtrema < 0) {\n          nExtrema = cubicExtrema(y0, y1, y2, y3, extrema);\n\n          if (extrema[1] < extrema[0] && nExtrema > 1) {\n            swapExtrema();\n          }\n\n          y0_ = cubicAt(y0, y1, y2, y3, extrema[0]);\n\n          if (nExtrema > 1) {\n            y1_ = cubicAt(y0, y1, y2, y3, extrema[1]);\n          }\n        }\n\n        if (nExtrema === 2) {\n          if (t < extrema[0]) {\n            w += y0_ < y0 ? unit : -unit;\n          } else if (t < extrema[1]) {\n            w += y1_ < y0_ ? unit : -unit;\n          } else {\n            w += y3 < y1_ ? unit : -unit;\n          }\n        } else {\n          if (t < extrema[0]) {\n            w += y0_ < y0 ? unit : -unit;\n          } else {\n            w += y3 < y0_ ? unit : -unit;\n          }\n        }\n      }\n\n      return w;\n    }\n  }\n\n  function windingQuadratic(x0, y0, x1, y1, x2, y2, x, y) {\n    if (y > y0 && y > y1 && y > y2 || y < y0 && y < y1 && y < y2) {\n      return 0;\n    }\n\n    var nRoots = quadraticRootAt(y0, y1, y2, y, roots);\n\n    if (nRoots === 0) {\n      return 0;\n    } else {\n      var t = quadraticExtremum(y0, y1, y2);\n\n      if (t >= 0 && t <= 1) {\n        var w = 0;\n        var y_ = quadraticAt(y0, y1, y2, t);\n\n        for (var i = 0; i < nRoots; i++) {\n          var unit = roots[i] === 0 || roots[i] === 1 ? 0.5 : 1;\n          var x_ = quadraticAt(x0, x1, x2, roots[i]);\n\n          if (x_ < x) {\n            continue;\n          }\n\n          if (roots[i] < t) {\n            w += y_ < y0 ? unit : -unit;\n          } else {\n            w += y2 < y_ ? unit : -unit;\n          }\n        }\n\n        return w;\n      } else {\n        var unit = roots[0] === 0 || roots[0] === 1 ? 0.5 : 1;\n        var x_ = quadraticAt(x0, x1, x2, roots[0]);\n\n        if (x_ < x) {\n          return 0;\n        }\n\n        return y2 < y0 ? unit : -unit;\n      }\n    }\n  }\n\n  function windingArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y) {\n    y -= cy;\n\n    if (y > r || y < -r) {\n      return 0;\n    }\n\n    var tmp = Math.sqrt(r * r - y * y);\n    roots[0] = -tmp;\n    roots[1] = tmp;\n    var dTheta = Math.abs(startAngle - endAngle);\n\n    if (dTheta < 1e-4) {\n      return 0;\n    }\n\n    if (dTheta >= PI2$2 - 1e-4) {\n      startAngle = 0;\n      endAngle = PI2$2;\n      var dir = anticlockwise ? 1 : -1;\n\n      if (x >= roots[0] + cx && x <= roots[1] + cx) {\n        return dir;\n      } else {\n        return 0;\n      }\n    }\n\n    if (startAngle > endAngle) {\n      var tmp_1 = startAngle;\n      startAngle = endAngle;\n      endAngle = tmp_1;\n    }\n\n    if (startAngle < 0) {\n      startAngle += PI2$2;\n      endAngle += PI2$2;\n    }\n\n    var w = 0;\n\n    for (var i = 0; i < 2; i++) {\n      var x_ = roots[i];\n\n      if (x_ + cx > x) {\n        var angle = Math.atan2(y, x_);\n        var dir = anticlockwise ? 1 : -1;\n\n        if (angle < 0) {\n          angle = PI2$2 + angle;\n        }\n\n        if (angle >= startAngle && angle <= endAngle || angle + PI2$2 >= startAngle && angle + PI2$2 <= endAngle) {\n          if (angle > Math.PI / 2 && angle < Math.PI * 1.5) {\n            dir = -dir;\n          }\n\n          w += dir;\n        }\n      }\n    }\n\n    return w;\n  }\n\n  function containPath(path, lineWidth, isStroke, x, y) {\n    var data = path.data;\n    var len = path.len();\n    var w = 0;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    var x1;\n    var y1;\n\n    for (var i = 0; i < len;) {\n      var cmd = data[i++];\n      var isFirst = i === 1;\n\n      if (cmd === CMD$1.M && i > 1) {\n        if (!isStroke) {\n          w += windingLine(xi, yi, x0, y0, x, y);\n        }\n      }\n\n      if (isFirst) {\n        xi = data[i];\n        yi = data[i + 1];\n        x0 = xi;\n        y0 = yi;\n      }\n\n      switch (cmd) {\n        case CMD$1.M:\n          x0 = data[i++];\n          y0 = data[i++];\n          xi = x0;\n          yi = y0;\n          break;\n\n        case CMD$1.L:\n          if (isStroke) {\n            if (containStroke$1(xi, yi, data[i], data[i + 1], lineWidth, x, y)) {\n              return true;\n            }\n          } else {\n            w += windingLine(xi, yi, data[i], data[i + 1], x, y) || 0;\n          }\n\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD$1.C:\n          if (isStroke) {\n            if (containStroke$2(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n              return true;\n            }\n          } else {\n            w += windingCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n          }\n\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD$1.Q:\n          if (isStroke) {\n            if (containStroke$3(xi, yi, data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n              return true;\n            }\n          } else {\n            w += windingQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n          }\n\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD$1.A:\n          var cx = data[i++];\n          var cy = data[i++];\n          var rx = data[i++];\n          var ry = data[i++];\n          var theta = data[i++];\n          var dTheta = data[i++];\n          i += 1;\n          var anticlockwise = !!(1 - data[i++]);\n          x1 = Math.cos(theta) * rx + cx;\n          y1 = Math.sin(theta) * ry + cy;\n\n          if (!isFirst) {\n            w += windingLine(xi, yi, x1, y1, x, y);\n          } else {\n            x0 = x1;\n            y0 = y1;\n          }\n\n          var _x = (x - cx) * ry / rx + cx;\n\n          if (isStroke) {\n            if (containStroke$4(cx, cy, ry, theta, theta + dTheta, anticlockwise, lineWidth, _x, y)) {\n              return true;\n            }\n          } else {\n            w += windingArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y);\n          }\n\n          xi = Math.cos(theta + dTheta) * rx + cx;\n          yi = Math.sin(theta + dTheta) * ry + cy;\n          break;\n\n        case CMD$1.R:\n          x0 = xi = data[i++];\n          y0 = yi = data[i++];\n          var width = data[i++];\n          var height = data[i++];\n          x1 = x0 + width;\n          y1 = y0 + height;\n\n          if (isStroke) {\n            if (containStroke$1(x0, y0, x1, y0, lineWidth, x, y) || containStroke$1(x1, y0, x1, y1, lineWidth, x, y) || containStroke$1(x1, y1, x0, y1, lineWidth, x, y) || containStroke$1(x0, y1, x0, y0, lineWidth, x, y)) {\n              return true;\n            }\n          } else {\n            w += windingLine(x1, y0, x1, y1, x, y);\n            w += windingLine(x0, y1, x0, y0, x, y);\n          }\n\n          break;\n\n        case CMD$1.Z:\n          if (isStroke) {\n            if (containStroke$1(xi, yi, x0, y0, lineWidth, x, y)) {\n              return true;\n            }\n          } else {\n            w += windingLine(xi, yi, x0, y0, x, y);\n          }\n\n          xi = x0;\n          yi = y0;\n          break;\n      }\n    }\n\n    if (!isStroke && !isAroundEqual(yi, y0)) {\n      w += windingLine(xi, yi, x0, y0, x, y) || 0;\n    }\n\n    return w !== 0;\n  }\n\n  function contain(pathProxy, x, y) {\n    return containPath(pathProxy, 0, false, x, y);\n  }\n\n  function containStroke(pathProxy, lineWidth, x, y) {\n    return containPath(pathProxy, lineWidth, true, x, y);\n  }\n\n  var DEFAULT_PATH_STYLE = defaults({\n    fill: '#000',\n    stroke: null,\n    strokePercent: 1,\n    fillOpacity: 1,\n    strokeOpacity: 1,\n    lineDashOffset: 0,\n    lineWidth: 1,\n    lineCap: 'butt',\n    miterLimit: 10,\n    strokeNoScale: false,\n    strokeFirst: false\n  }, DEFAULT_COMMON_STYLE);\n  var DEFAULT_PATH_ANIMATION_PROPS = {\n    style: defaults({\n      fill: true,\n      stroke: true,\n      strokePercent: true,\n      fillOpacity: true,\n      strokeOpacity: true,\n      lineDashOffset: true,\n      lineWidth: true,\n      miterLimit: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n  };\n  var pathCopyParams = TRANSFORMABLE_PROPS.concat(['invisible', 'culling', 'z', 'z2', 'zlevel', 'parent']);\n\n  var Path = function (_super) {\n    __extends(Path, _super);\n\n    function Path(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Path.prototype.update = function () {\n      var _this = this;\n\n      _super.prototype.update.call(this);\n\n      var style = this.style;\n\n      if (style.decal) {\n        var decalEl = this._decalEl = this._decalEl || new Path();\n\n        if (decalEl.buildPath === Path.prototype.buildPath) {\n          decalEl.buildPath = function (ctx) {\n            _this.buildPath(ctx, _this.shape);\n          };\n        }\n\n        decalEl.silent = true;\n        var decalElStyle = decalEl.style;\n\n        for (var key in style) {\n          if (decalElStyle[key] !== style[key]) {\n            decalElStyle[key] = style[key];\n          }\n        }\n\n        decalElStyle.fill = style.fill ? style.decal : null;\n        decalElStyle.decal = null;\n        decalElStyle.shadowColor = null;\n        style.strokeFirst && (decalElStyle.stroke = null);\n\n        for (var i = 0; i < pathCopyParams.length; ++i) {\n          decalEl[pathCopyParams[i]] = this[pathCopyParams[i]];\n        }\n\n        decalEl.__dirty |= REDRAW_BIT;\n      } else if (this._decalEl) {\n        this._decalEl = null;\n      }\n    };\n\n    Path.prototype.getDecalElement = function () {\n      return this._decalEl;\n    };\n\n    Path.prototype._init = function (props) {\n      var keysArr = keys(props);\n      this.shape = this.getDefaultShape();\n      var defaultStyle = this.getDefaultStyle();\n\n      if (defaultStyle) {\n        this.useStyle(defaultStyle);\n      }\n\n      for (var i = 0; i < keysArr.length; i++) {\n        var key = keysArr[i];\n        var value = props[key];\n\n        if (key === 'style') {\n          if (!this.style) {\n            this.useStyle(value);\n          } else {\n            extend(this.style, value);\n          }\n        } else if (key === 'shape') {\n          extend(this.shape, value);\n        } else {\n          _super.prototype.attrKV.call(this, key, value);\n        }\n      }\n\n      if (!this.style) {\n        this.useStyle({});\n      }\n    };\n\n    Path.prototype.getDefaultStyle = function () {\n      return null;\n    };\n\n    Path.prototype.getDefaultShape = function () {\n      return {};\n    };\n\n    Path.prototype.canBeInsideText = function () {\n      return this.hasFill();\n    };\n\n    Path.prototype.getInsideTextFill = function () {\n      var pathFill = this.style.fill;\n\n      if (pathFill !== 'none') {\n        if (isString(pathFill)) {\n          var fillLum = lum(pathFill, 0);\n\n          if (fillLum > 0.5) {\n            return DARK_LABEL_COLOR;\n          } else if (fillLum > 0.2) {\n            return LIGHTER_LABEL_COLOR;\n          }\n\n          return LIGHT_LABEL_COLOR;\n        } else if (pathFill) {\n          return LIGHT_LABEL_COLOR;\n        }\n      }\n\n      return DARK_LABEL_COLOR;\n    };\n\n    Path.prototype.getInsideTextStroke = function (textFill) {\n      var pathFill = this.style.fill;\n\n      if (isString(pathFill)) {\n        var zr = this.__zr;\n        var isDarkMode = !!(zr && zr.isDarkMode());\n        var isDarkLabel = lum(textFill, 0) < DARK_MODE_THRESHOLD;\n\n        if (isDarkMode === isDarkLabel) {\n          return pathFill;\n        }\n      }\n    };\n\n    Path.prototype.buildPath = function (ctx, shapeCfg, inBatch) {};\n\n    Path.prototype.pathUpdated = function () {\n      this.__dirty &= ~SHAPE_CHANGED_BIT;\n    };\n\n    Path.prototype.getUpdatedPathProxy = function (inBatch) {\n      !this.path && this.createPathProxy();\n      this.path.beginPath();\n      this.buildPath(this.path, this.shape, inBatch);\n      return this.path;\n    };\n\n    Path.prototype.createPathProxy = function () {\n      this.path = new PathProxy(false);\n    };\n\n    Path.prototype.hasStroke = function () {\n      var style = this.style;\n      var stroke = style.stroke;\n      return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n    };\n\n    Path.prototype.hasFill = function () {\n      var style = this.style;\n      var fill = style.fill;\n      return fill != null && fill !== 'none';\n    };\n\n    Path.prototype.getBoundingRect = function () {\n      var rect = this._rect;\n      var style = this.style;\n      var needsUpdateRect = !rect;\n\n      if (needsUpdateRect) {\n        var firstInvoke = false;\n\n        if (!this.path) {\n          firstInvoke = true;\n          this.createPathProxy();\n        }\n\n        var path = this.path;\n\n        if (firstInvoke || this.__dirty & SHAPE_CHANGED_BIT) {\n          path.beginPath();\n          this.buildPath(path, this.shape, false);\n          this.pathUpdated();\n        }\n\n        rect = path.getBoundingRect();\n      }\n\n      this._rect = rect;\n\n      if (this.hasStroke() && this.path && this.path.len() > 0) {\n        var rectStroke = this._rectStroke || (this._rectStroke = rect.clone());\n\n        if (this.__dirty || needsUpdateRect) {\n          rectStroke.copy(rect);\n          var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n          var w = style.lineWidth;\n\n          if (!this.hasFill()) {\n            var strokeContainThreshold = this.strokeContainThreshold;\n            w = Math.max(w, strokeContainThreshold == null ? 4 : strokeContainThreshold);\n          }\n\n          if (lineScale > 1e-10) {\n            rectStroke.width += w / lineScale;\n            rectStroke.height += w / lineScale;\n            rectStroke.x -= w / lineScale / 2;\n            rectStroke.y -= w / lineScale / 2;\n          }\n        }\n\n        return rectStroke;\n      }\n\n      return rect;\n    };\n\n    Path.prototype.contain = function (x, y) {\n      var localPos = this.transformCoordToLocal(x, y);\n      var rect = this.getBoundingRect();\n      var style = this.style;\n      x = localPos[0];\n      y = localPos[1];\n\n      if (rect.contain(x, y)) {\n        var pathProxy = this.path;\n\n        if (this.hasStroke()) {\n          var lineWidth = style.lineWidth;\n          var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n\n          if (lineScale > 1e-10) {\n            if (!this.hasFill()) {\n              lineWidth = Math.max(lineWidth, this.strokeContainThreshold);\n            }\n\n            if (containStroke(pathProxy, lineWidth / lineScale, x, y)) {\n              return true;\n            }\n          }\n        }\n\n        if (this.hasFill()) {\n          return contain(pathProxy, x, y);\n        }\n      }\n\n      return false;\n    };\n\n    Path.prototype.dirtyShape = function () {\n      this.__dirty |= SHAPE_CHANGED_BIT;\n\n      if (this._rect) {\n        this._rect = null;\n      }\n\n      if (this._decalEl) {\n        this._decalEl.dirtyShape();\n      }\n\n      this.markRedraw();\n    };\n\n    Path.prototype.dirty = function () {\n      this.dirtyStyle();\n      this.dirtyShape();\n    };\n\n    Path.prototype.animateShape = function (loop) {\n      return this.animate('shape', loop);\n    };\n\n    Path.prototype.updateDuringAnimation = function (targetKey) {\n      if (targetKey === 'style') {\n        this.dirtyStyle();\n      } else if (targetKey === 'shape') {\n        this.dirtyShape();\n      } else {\n        this.markRedraw();\n      }\n    };\n\n    Path.prototype.attrKV = function (key, value) {\n      if (key === 'shape') {\n        this.setShape(value);\n      } else {\n        _super.prototype.attrKV.call(this, key, value);\n      }\n    };\n\n    Path.prototype.setShape = function (keyOrObj, value) {\n      var shape = this.shape;\n\n      if (!shape) {\n        shape = this.shape = {};\n      }\n\n      if (typeof keyOrObj === 'string') {\n        shape[keyOrObj] = value;\n      } else {\n        extend(shape, keyOrObj);\n      }\n\n      this.dirtyShape();\n      return this;\n    };\n\n    Path.prototype.shapeChanged = function () {\n      return !!(this.__dirty & SHAPE_CHANGED_BIT);\n    };\n\n    Path.prototype.createStyle = function (obj) {\n      return createObject(DEFAULT_PATH_STYLE, obj);\n    };\n\n    Path.prototype._innerSaveToNormal = function (toState) {\n      _super.prototype._innerSaveToNormal.call(this, toState);\n\n      var normalState = this._normalState;\n\n      if (toState.shape && !normalState.shape) {\n        normalState.shape = extend({}, this.shape);\n      }\n    };\n\n    Path.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n      _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n\n      var needsRestoreToNormal = !(state && keepCurrentStates);\n      var targetShape;\n\n      if (state && state.shape) {\n        if (transition) {\n          if (keepCurrentStates) {\n            targetShape = state.shape;\n          } else {\n            targetShape = extend({}, normalState.shape);\n            extend(targetShape, state.shape);\n          }\n        } else {\n          targetShape = extend({}, keepCurrentStates ? this.shape : normalState.shape);\n          extend(targetShape, state.shape);\n        }\n      } else if (needsRestoreToNormal) {\n        targetShape = normalState.shape;\n      }\n\n      if (targetShape) {\n        if (transition) {\n          this.shape = extend({}, this.shape);\n          var targetShapePrimaryProps = {};\n          var shapeKeys = keys(targetShape);\n\n          for (var i = 0; i < shapeKeys.length; i++) {\n            var key = shapeKeys[i];\n\n            if (typeof targetShape[key] === 'object') {\n              this.shape[key] = targetShape[key];\n            } else {\n              targetShapePrimaryProps[key] = targetShape[key];\n            }\n          }\n\n          this._transitionState(stateName, {\n            shape: targetShapePrimaryProps\n          }, animationCfg);\n        } else {\n          this.shape = targetShape;\n          this.dirtyShape();\n        }\n      }\n    };\n\n    Path.prototype._mergeStates = function (states) {\n      var mergedState = _super.prototype._mergeStates.call(this, states);\n\n      var mergedShape;\n\n      for (var i = 0; i < states.length; i++) {\n        var state = states[i];\n\n        if (state.shape) {\n          mergedShape = mergedShape || {};\n\n          this._mergeStyle(mergedShape, state.shape);\n        }\n      }\n\n      if (mergedShape) {\n        mergedState.shape = mergedShape;\n      }\n\n      return mergedState;\n    };\n\n    Path.prototype.getAnimationStyleProps = function () {\n      return DEFAULT_PATH_ANIMATION_PROPS;\n    };\n\n    Path.prototype.isZeroArea = function () {\n      return false;\n    };\n\n    Path.extend = function (defaultProps) {\n      var Sub = function (_super) {\n        __extends(Sub, _super);\n\n        function Sub(opts) {\n          var _this = _super.call(this, opts) || this;\n\n          defaultProps.init && defaultProps.init.call(_this, opts);\n          return _this;\n        }\n\n        Sub.prototype.getDefaultStyle = function () {\n          return clone(defaultProps.style);\n        };\n\n        Sub.prototype.getDefaultShape = function () {\n          return clone(defaultProps.shape);\n        };\n\n        return Sub;\n      }(Path);\n\n      for (var key in defaultProps) {\n        if (typeof defaultProps[key] === 'function') {\n          Sub.prototype[key] = defaultProps[key];\n        }\n      }\n\n      return Sub;\n    };\n\n    Path.initDefaultProps = function () {\n      var pathProto = Path.prototype;\n      pathProto.type = 'path';\n      pathProto.strokeContainThreshold = 5;\n      pathProto.segmentIgnoreThreshold = 0;\n      pathProto.subPixelOptimize = false;\n      pathProto.autoBatch = false;\n      pathProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT | SHAPE_CHANGED_BIT;\n    }();\n\n    return Path;\n  }(Displayable);\n\n  var DEFAULT_TSPAN_STYLE = defaults({\n    strokeFirst: true,\n    font: DEFAULT_FONT,\n    x: 0,\n    y: 0,\n    textAlign: 'left',\n    textBaseline: 'top',\n    miterLimit: 2\n  }, DEFAULT_PATH_STYLE);\n\n  var TSpan = function (_super) {\n    __extends(TSpan, _super);\n\n    function TSpan() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    TSpan.prototype.hasStroke = function () {\n      var style = this.style;\n      var stroke = style.stroke;\n      return stroke != null && stroke !== 'none' && style.lineWidth > 0;\n    };\n\n    TSpan.prototype.hasFill = function () {\n      var style = this.style;\n      var fill = style.fill;\n      return fill != null && fill !== 'none';\n    };\n\n    TSpan.prototype.createStyle = function (obj) {\n      return createObject(DEFAULT_TSPAN_STYLE, obj);\n    };\n\n    TSpan.prototype.setBoundingRect = function (rect) {\n      this._rect = rect;\n    };\n\n    TSpan.prototype.getBoundingRect = function () {\n      var style = this.style;\n\n      if (!this._rect) {\n        var text = style.text;\n        text != null ? text += '' : text = '';\n        var rect = getBoundingRect(text, style.font, style.textAlign, style.textBaseline);\n        rect.x += style.x || 0;\n        rect.y += style.y || 0;\n\n        if (this.hasStroke()) {\n          var w = style.lineWidth;\n          rect.x -= w / 2;\n          rect.y -= w / 2;\n          rect.width += w;\n          rect.height += w;\n        }\n\n        this._rect = rect;\n      }\n\n      return this._rect;\n    };\n\n    TSpan.initDefaultProps = function () {\n      var tspanProto = TSpan.prototype;\n      tspanProto.dirtyRectTolerance = 10;\n    }();\n\n    return TSpan;\n  }(Displayable);\n\n  TSpan.prototype.type = 'tspan';\n  var DEFAULT_IMAGE_STYLE = defaults({\n    x: 0,\n    y: 0\n  }, DEFAULT_COMMON_STYLE);\n  var DEFAULT_IMAGE_ANIMATION_PROPS = {\n    style: defaults({\n      x: true,\n      y: true,\n      width: true,\n      height: true,\n      sx: true,\n      sy: true,\n      sWidth: true,\n      sHeight: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n  };\n\n  function isImageLike(source) {\n    return !!(source && typeof source !== 'string' && source.width && source.height);\n  }\n\n  var ZRImage = function (_super) {\n    __extends(ZRImage, _super);\n\n    function ZRImage() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    ZRImage.prototype.createStyle = function (obj) {\n      return createObject(DEFAULT_IMAGE_STYLE, obj);\n    };\n\n    ZRImage.prototype._getSize = function (dim) {\n      var style = this.style;\n      var size = style[dim];\n\n      if (size != null) {\n        return size;\n      }\n\n      var imageSource = isImageLike(style.image) ? style.image : this.__image;\n\n      if (!imageSource) {\n        return 0;\n      }\n\n      var otherDim = dim === 'width' ? 'height' : 'width';\n      var otherDimSize = style[otherDim];\n\n      if (otherDimSize == null) {\n        return imageSource[dim];\n      } else {\n        return imageSource[dim] / imageSource[otherDim] * otherDimSize;\n      }\n    };\n\n    ZRImage.prototype.getWidth = function () {\n      return this._getSize('width');\n    };\n\n    ZRImage.prototype.getHeight = function () {\n      return this._getSize('height');\n    };\n\n    ZRImage.prototype.getAnimationStyleProps = function () {\n      return DEFAULT_IMAGE_ANIMATION_PROPS;\n    };\n\n    ZRImage.prototype.getBoundingRect = function () {\n      var style = this.style;\n\n      if (!this._rect) {\n        this._rect = new BoundingRect(style.x || 0, style.y || 0, this.getWidth(), this.getHeight());\n      }\n\n      return this._rect;\n    };\n\n    return ZRImage;\n  }(Displayable);\n\n  ZRImage.prototype.type = 'image';\n\n  function buildPath(ctx, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var width = shape.width;\n    var height = shape.height;\n    var r = shape.r;\n    var r1;\n    var r2;\n    var r3;\n    var r4;\n\n    if (width < 0) {\n      x = x + width;\n      width = -width;\n    }\n\n    if (height < 0) {\n      y = y + height;\n      height = -height;\n    }\n\n    if (typeof r === 'number') {\n      r1 = r2 = r3 = r4 = r;\n    } else if (r instanceof Array) {\n      if (r.length === 1) {\n        r1 = r2 = r3 = r4 = r[0];\n      } else if (r.length === 2) {\n        r1 = r3 = r[0];\n        r2 = r4 = r[1];\n      } else if (r.length === 3) {\n        r1 = r[0];\n        r2 = r4 = r[1];\n        r3 = r[2];\n      } else {\n        r1 = r[0];\n        r2 = r[1];\n        r3 = r[2];\n        r4 = r[3];\n      }\n    } else {\n      r1 = r2 = r3 = r4 = 0;\n    }\n\n    var total;\n\n    if (r1 + r2 > width) {\n      total = r1 + r2;\n      r1 *= width / total;\n      r2 *= width / total;\n    }\n\n    if (r3 + r4 > width) {\n      total = r3 + r4;\n      r3 *= width / total;\n      r4 *= width / total;\n    }\n\n    if (r2 + r3 > height) {\n      total = r2 + r3;\n      r2 *= height / total;\n      r3 *= height / total;\n    }\n\n    if (r1 + r4 > height) {\n      total = r1 + r4;\n      r1 *= height / total;\n      r4 *= height / total;\n    }\n\n    ctx.moveTo(x + r1, y);\n    ctx.lineTo(x + width - r2, y);\n    r2 !== 0 && ctx.arc(x + width - r2, y + r2, r2, -Math.PI / 2, 0);\n    ctx.lineTo(x + width, y + height - r3);\n    r3 !== 0 && ctx.arc(x + width - r3, y + height - r3, r3, 0, Math.PI / 2);\n    ctx.lineTo(x + r4, y + height);\n    r4 !== 0 && ctx.arc(x + r4, y + height - r4, r4, Math.PI / 2, Math.PI);\n    ctx.lineTo(x, y + r1);\n    r1 !== 0 && ctx.arc(x + r1, y + r1, r1, Math.PI, Math.PI * 1.5);\n  }\n\n  var round$1 = Math.round;\n\n  function subPixelOptimizeLine(outputShape, inputShape, style) {\n    if (!inputShape) {\n      return;\n    }\n\n    var x1 = inputShape.x1;\n    var x2 = inputShape.x2;\n    var y1 = inputShape.y1;\n    var y2 = inputShape.y2;\n    outputShape.x1 = x1;\n    outputShape.x2 = x2;\n    outputShape.y1 = y1;\n    outputShape.y2 = y2;\n    var lineWidth = style && style.lineWidth;\n\n    if (!lineWidth) {\n      return outputShape;\n    }\n\n    if (round$1(x1 * 2) === round$1(x2 * 2)) {\n      outputShape.x1 = outputShape.x2 = subPixelOptimize(x1, lineWidth, true);\n    }\n\n    if (round$1(y1 * 2) === round$1(y2 * 2)) {\n      outputShape.y1 = outputShape.y2 = subPixelOptimize(y1, lineWidth, true);\n    }\n\n    return outputShape;\n  }\n\n  function subPixelOptimizeRect(outputShape, inputShape, style) {\n    if (!inputShape) {\n      return;\n    }\n\n    var originX = inputShape.x;\n    var originY = inputShape.y;\n    var originWidth = inputShape.width;\n    var originHeight = inputShape.height;\n    outputShape.x = originX;\n    outputShape.y = originY;\n    outputShape.width = originWidth;\n    outputShape.height = originHeight;\n    var lineWidth = style && style.lineWidth;\n\n    if (!lineWidth) {\n      return outputShape;\n    }\n\n    outputShape.x = subPixelOptimize(originX, lineWidth, true);\n    outputShape.y = subPixelOptimize(originY, lineWidth, true);\n    outputShape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - outputShape.x, originWidth === 0 ? 0 : 1);\n    outputShape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - outputShape.y, originHeight === 0 ? 0 : 1);\n    return outputShape;\n  }\n\n  function subPixelOptimize(position, lineWidth, positiveOrNegative) {\n    if (!lineWidth) {\n      return position;\n    }\n\n    var doubledPosition = round$1(position * 2);\n    return (doubledPosition + round$1(lineWidth)) % 2 === 0 ? doubledPosition / 2 : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\n  }\n\n  var RectShape = function () {\n    function RectShape() {\n      this.x = 0;\n      this.y = 0;\n      this.width = 0;\n      this.height = 0;\n    }\n\n    return RectShape;\n  }();\n\n  var subPixelOptimizeOutputShape = {};\n\n  var Rect = function (_super) {\n    __extends(Rect, _super);\n\n    function Rect(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Rect.prototype.getDefaultShape = function () {\n      return new RectShape();\n    };\n\n    Rect.prototype.buildPath = function (ctx, shape) {\n      var x;\n      var y;\n      var width;\n      var height;\n\n      if (this.subPixelOptimize) {\n        var optimizedShape = subPixelOptimizeRect(subPixelOptimizeOutputShape, shape, this.style);\n        x = optimizedShape.x;\n        y = optimizedShape.y;\n        width = optimizedShape.width;\n        height = optimizedShape.height;\n        optimizedShape.r = shape.r;\n        shape = optimizedShape;\n      } else {\n        x = shape.x;\n        y = shape.y;\n        width = shape.width;\n        height = shape.height;\n      }\n\n      if (!shape.r) {\n        ctx.rect(x, y, width, height);\n      } else {\n        buildPath(ctx, shape);\n      }\n    };\n\n    Rect.prototype.isZeroArea = function () {\n      return !this.shape.width || !this.shape.height;\n    };\n\n    return Rect;\n  }(Path);\n\n  Rect.prototype.type = 'rect';\n  var DEFAULT_RICH_TEXT_COLOR = {\n    fill: '#000'\n  };\n  var DEFAULT_STROKE_LINE_WIDTH = 2;\n  var DEFAULT_TEXT_ANIMATION_PROPS = {\n    style: defaults({\n      fill: true,\n      stroke: true,\n      fillOpacity: true,\n      strokeOpacity: true,\n      lineWidth: true,\n      fontSize: true,\n      lineHeight: true,\n      width: true,\n      height: true,\n      textShadowColor: true,\n      textShadowBlur: true,\n      textShadowOffsetX: true,\n      textShadowOffsetY: true,\n      backgroundColor: true,\n      padding: true,\n      borderColor: true,\n      borderWidth: true,\n      borderRadius: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n  };\n\n  var ZRText = function (_super) {\n    __extends(ZRText, _super);\n\n    function ZRText(opts) {\n      var _this = _super.call(this) || this;\n\n      _this.type = 'text';\n      _this._children = [];\n      _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\n\n      _this.attr(opts);\n\n      return _this;\n    }\n\n    ZRText.prototype.childrenRef = function () {\n      return this._children;\n    };\n\n    ZRText.prototype.update = function () {\n      _super.prototype.update.call(this);\n\n      if (this.styleChanged()) {\n        this._updateSubTexts();\n      }\n\n      for (var i = 0; i < this._children.length; i++) {\n        var child = this._children[i];\n        child.zlevel = this.zlevel;\n        child.z = this.z;\n        child.z2 = this.z2;\n        child.culling = this.culling;\n        child.cursor = this.cursor;\n        child.invisible = this.invisible;\n      }\n    };\n\n    ZRText.prototype.updateTransform = function () {\n      var innerTransformable = this.innerTransformable;\n\n      if (innerTransformable) {\n        innerTransformable.updateTransform();\n\n        if (innerTransformable.transform) {\n          this.transform = innerTransformable.transform;\n        }\n      } else {\n        _super.prototype.updateTransform.call(this);\n      }\n    };\n\n    ZRText.prototype.getLocalTransform = function (m) {\n      var innerTransformable = this.innerTransformable;\n      return innerTransformable ? innerTransformable.getLocalTransform(m) : _super.prototype.getLocalTransform.call(this, m);\n    };\n\n    ZRText.prototype.getComputedTransform = function () {\n      if (this.__hostTarget) {\n        this.__hostTarget.getComputedTransform();\n\n        this.__hostTarget.updateInnerText(true);\n      }\n\n      return _super.prototype.getComputedTransform.call(this);\n    };\n\n    ZRText.prototype._updateSubTexts = function () {\n      this._childCursor = 0;\n      normalizeTextStyle(this.style);\n      this.style.rich ? this._updateRichTexts() : this._updatePlainTexts();\n      this._children.length = this._childCursor;\n      this.styleUpdated();\n    };\n\n    ZRText.prototype.addSelfToZr = function (zr) {\n      _super.prototype.addSelfToZr.call(this, zr);\n\n      for (var i = 0; i < this._children.length; i++) {\n        this._children[i].__zr = zr;\n      }\n    };\n\n    ZRText.prototype.removeSelfFromZr = function (zr) {\n      _super.prototype.removeSelfFromZr.call(this, zr);\n\n      for (var i = 0; i < this._children.length; i++) {\n        this._children[i].__zr = null;\n      }\n    };\n\n    ZRText.prototype.getBoundingRect = function () {\n      if (this.styleChanged()) {\n        this._updateSubTexts();\n      }\n\n      if (!this._rect) {\n        var tmpRect = new BoundingRect(0, 0, 0, 0);\n        var children = this._children;\n        var tmpMat = [];\n        var rect = null;\n\n        for (var i = 0; i < children.length; i++) {\n          var child = children[i];\n          var childRect = child.getBoundingRect();\n          var transform = child.getLocalTransform(tmpMat);\n\n          if (transform) {\n            tmpRect.copy(childRect);\n            tmpRect.applyTransform(transform);\n            rect = rect || tmpRect.clone();\n            rect.union(tmpRect);\n          } else {\n            rect = rect || childRect.clone();\n            rect.union(childRect);\n          }\n        }\n\n        this._rect = rect || tmpRect;\n      }\n\n      return this._rect;\n    };\n\n    ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\n      this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\n    };\n\n    ZRText.prototype.setTextContent = function (textContent) {\n      {\n        throw new Error('Can\\'t attach text on another text');\n      }\n    };\n\n    ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n      if (!sourceStyle) {\n        return targetStyle;\n      }\n\n      var sourceRich = sourceStyle.rich;\n      var targetRich = targetStyle.rich || sourceRich && {};\n      extend(targetStyle, sourceStyle);\n\n      if (sourceRich && targetRich) {\n        this._mergeRich(targetRich, sourceRich);\n\n        targetStyle.rich = targetRich;\n      } else if (targetRich) {\n        targetStyle.rich = targetRich;\n      }\n\n      return targetStyle;\n    };\n\n    ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\n      var richNames = keys(sourceRich);\n\n      for (var i = 0; i < richNames.length; i++) {\n        var richName = richNames[i];\n        targetRich[richName] = targetRich[richName] || {};\n        extend(targetRich[richName], sourceRich[richName]);\n      }\n    };\n\n    ZRText.prototype.getAnimationStyleProps = function () {\n      return DEFAULT_TEXT_ANIMATION_PROPS;\n    };\n\n    ZRText.prototype._getOrCreateChild = function (Ctor) {\n      var child = this._children[this._childCursor];\n\n      if (!child || !(child instanceof Ctor)) {\n        child = new Ctor();\n      }\n\n      this._children[this._childCursor++] = child;\n      child.__zr = this.__zr;\n      child.parent = this;\n      return child;\n    };\n\n    ZRText.prototype._updatePlainTexts = function () {\n      var style = this.style;\n      var textFont = style.font || DEFAULT_FONT;\n      var textPadding = style.padding;\n      var text = getStyleText(style);\n      var contentBlock = parsePlainText(text, style);\n      var needDrawBg = needDrawBackground(style);\n      var bgColorDrawn = !!style.backgroundColor;\n      var outerHeight = contentBlock.outerHeight;\n      var outerWidth = contentBlock.outerWidth;\n      var contentWidth = contentBlock.contentWidth;\n      var textLines = contentBlock.lines;\n      var lineHeight = contentBlock.lineHeight;\n      var defaultStyle = this._defaultStyle;\n      var baseX = style.x || 0;\n      var baseY = style.y || 0;\n      var textAlign = style.align || defaultStyle.align || 'left';\n      var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\n      var textX = baseX;\n      var textY = adjustTextY$1(baseY, contentBlock.contentHeight, verticalAlign);\n\n      if (needDrawBg || textPadding) {\n        var boxX = adjustTextX(baseX, outerWidth, textAlign);\n        var boxY = adjustTextY$1(baseY, outerHeight, verticalAlign);\n        needDrawBg && this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n      }\n\n      textY += lineHeight / 2;\n\n      if (textPadding) {\n        textX = getTextXForPadding(baseX, textAlign, textPadding);\n\n        if (verticalAlign === 'top') {\n          textY += textPadding[0];\n        } else if (verticalAlign === 'bottom') {\n          textY -= textPadding[2];\n        }\n      }\n\n      var defaultLineWidth = 0;\n      var useDefaultFill = false;\n      var textFill = getFill('fill' in style ? style.fill : (useDefaultFill = true, defaultStyle.fill));\n      var textStroke = getStroke('stroke' in style ? style.stroke : !bgColorDrawn && (!defaultStyle.autoStroke || useDefaultFill) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke) : null);\n      var hasShadow = style.textShadowBlur > 0;\n      var fixedBoundingRect = style.width != null && (style.overflow === 'truncate' || style.overflow === 'break' || style.overflow === 'breakAll');\n      var calculatedLineHeight = contentBlock.calculatedLineHeight;\n\n      for (var i = 0; i < textLines.length; i++) {\n        var el = this._getOrCreateChild(TSpan);\n\n        var subElStyle = el.createStyle();\n        el.useStyle(subElStyle);\n        subElStyle.text = textLines[i];\n        subElStyle.x = textX;\n        subElStyle.y = textY;\n\n        if (textAlign) {\n          subElStyle.textAlign = textAlign;\n        }\n\n        subElStyle.textBaseline = 'middle';\n        subElStyle.opacity = style.opacity;\n        subElStyle.strokeFirst = true;\n\n        if (hasShadow) {\n          subElStyle.shadowBlur = style.textShadowBlur || 0;\n          subElStyle.shadowColor = style.textShadowColor || 'transparent';\n          subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\n          subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\n        }\n\n        subElStyle.stroke = textStroke;\n        subElStyle.fill = textFill;\n\n        if (textStroke) {\n          subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\n          subElStyle.lineDash = style.lineDash;\n          subElStyle.lineDashOffset = style.lineDashOffset || 0;\n        }\n\n        subElStyle.font = textFont;\n        setSeparateFont(subElStyle, style);\n        textY += lineHeight;\n\n        if (fixedBoundingRect) {\n          el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, style.width, subElStyle.textAlign), adjustTextY$1(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), contentWidth, calculatedLineHeight));\n        }\n      }\n    };\n\n    ZRText.prototype._updateRichTexts = function () {\n      var style = this.style;\n      var text = getStyleText(style);\n      var contentBlock = parseRichText(text, style);\n      var contentWidth = contentBlock.width;\n      var outerWidth = contentBlock.outerWidth;\n      var outerHeight = contentBlock.outerHeight;\n      var textPadding = style.padding;\n      var baseX = style.x || 0;\n      var baseY = style.y || 0;\n      var defaultStyle = this._defaultStyle;\n      var textAlign = style.align || defaultStyle.align;\n      var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\n      var boxX = adjustTextX(baseX, outerWidth, textAlign);\n      var boxY = adjustTextY$1(baseY, outerHeight, verticalAlign);\n      var xLeft = boxX;\n      var lineTop = boxY;\n\n      if (textPadding) {\n        xLeft += textPadding[3];\n        lineTop += textPadding[0];\n      }\n\n      var xRight = xLeft + contentWidth;\n\n      if (needDrawBackground(style)) {\n        this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n      }\n\n      var bgColorDrawn = !!style.backgroundColor;\n\n      for (var i = 0; i < contentBlock.lines.length; i++) {\n        var line = contentBlock.lines[i];\n        var tokens = line.tokens;\n        var tokenCount = tokens.length;\n        var lineHeight = line.lineHeight;\n        var remainedWidth = line.width;\n        var leftIndex = 0;\n        var lineXLeft = xLeft;\n        var lineXRight = xRight;\n        var rightIndex = tokenCount - 1;\n        var token = void 0;\n\n        while (leftIndex < tokenCount && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\n          this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\n\n          remainedWidth -= token.width;\n          lineXLeft += token.width;\n          leftIndex++;\n        }\n\n        while (rightIndex >= 0 && (token = tokens[rightIndex], token.align === 'right')) {\n          this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\n\n          remainedWidth -= token.width;\n          lineXRight -= token.width;\n          rightIndex--;\n        }\n\n        lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\n\n        while (leftIndex <= rightIndex) {\n          token = tokens[leftIndex];\n\n          this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\n\n          lineXLeft += token.width;\n          leftIndex++;\n        }\n\n        lineTop += lineHeight;\n      }\n    };\n\n    ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\n      var tokenStyle = style.rich[token.styleName] || {};\n      tokenStyle.text = token.text;\n      var verticalAlign = token.verticalAlign;\n      var y = lineTop + lineHeight / 2;\n\n      if (verticalAlign === 'top') {\n        y = lineTop + token.height / 2;\n      } else if (verticalAlign === 'bottom') {\n        y = lineTop + lineHeight - token.height / 2;\n      }\n\n      var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\n      needDrawBg && this._renderBackground(tokenStyle, style, textAlign === 'right' ? x - token.width : textAlign === 'center' ? x - token.width / 2 : x, y - token.height / 2, token.width, token.height);\n      var bgColorDrawn = !!tokenStyle.backgroundColor;\n      var textPadding = token.textPadding;\n\n      if (textPadding) {\n        x = getTextXForPadding(x, textAlign, textPadding);\n        y -= token.height / 2 - textPadding[0] - token.innerHeight / 2;\n      }\n\n      var el = this._getOrCreateChild(TSpan);\n\n      var subElStyle = el.createStyle();\n      el.useStyle(subElStyle);\n      var defaultStyle = this._defaultStyle;\n      var useDefaultFill = false;\n      var defaultLineWidth = 0;\n      var textFill = getFill('fill' in tokenStyle ? tokenStyle.fill : 'fill' in style ? style.fill : (useDefaultFill = true, defaultStyle.fill));\n      var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke : 'stroke' in style ? style.stroke : !bgColorDrawn && !parentBgColorDrawn && (!defaultStyle.autoStroke || useDefaultFill) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke) : null);\n      var hasShadow = tokenStyle.textShadowBlur > 0 || style.textShadowBlur > 0;\n      subElStyle.text = token.text;\n      subElStyle.x = x;\n      subElStyle.y = y;\n\n      if (hasShadow) {\n        subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\n        subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\n        subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\n        subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\n      }\n\n      subElStyle.textAlign = textAlign;\n      subElStyle.textBaseline = 'middle';\n      subElStyle.font = token.font || DEFAULT_FONT;\n      subElStyle.opacity = retrieve3(tokenStyle.opacity, style.opacity, 1);\n      setSeparateFont(subElStyle, tokenStyle);\n\n      if (textStroke) {\n        subElStyle.lineWidth = retrieve3(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\n        subElStyle.lineDash = retrieve2(tokenStyle.lineDash, style.lineDash);\n        subElStyle.lineDashOffset = style.lineDashOffset || 0;\n        subElStyle.stroke = textStroke;\n      }\n\n      if (textFill) {\n        subElStyle.fill = textFill;\n      }\n\n      var textWidth = token.contentWidth;\n      var textHeight = token.contentHeight;\n      el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, textWidth, subElStyle.textAlign), adjustTextY$1(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));\n    };\n\n    ZRText.prototype._renderBackground = function (style, topStyle, x, y, width, height) {\n      var textBackgroundColor = style.backgroundColor;\n      var textBorderWidth = style.borderWidth;\n      var textBorderColor = style.borderColor;\n      var isImageBg = textBackgroundColor && textBackgroundColor.image;\n      var isPlainOrGradientBg = textBackgroundColor && !isImageBg;\n      var textBorderRadius = style.borderRadius;\n      var self = this;\n      var rectEl;\n      var imgEl;\n\n      if (isPlainOrGradientBg || style.lineHeight || textBorderWidth && textBorderColor) {\n        rectEl = this._getOrCreateChild(Rect);\n        rectEl.useStyle(rectEl.createStyle());\n        rectEl.style.fill = null;\n        var rectShape = rectEl.shape;\n        rectShape.x = x;\n        rectShape.y = y;\n        rectShape.width = width;\n        rectShape.height = height;\n        rectShape.r = textBorderRadius;\n        rectEl.dirtyShape();\n      }\n\n      if (isPlainOrGradientBg) {\n        var rectStyle = rectEl.style;\n        rectStyle.fill = textBackgroundColor || null;\n        rectStyle.fillOpacity = retrieve2(style.fillOpacity, 1);\n      } else if (isImageBg) {\n        imgEl = this._getOrCreateChild(ZRImage);\n\n        imgEl.onload = function () {\n          self.dirtyStyle();\n        };\n\n        var imgStyle = imgEl.style;\n        imgStyle.image = textBackgroundColor.image;\n        imgStyle.x = x;\n        imgStyle.y = y;\n        imgStyle.width = width;\n        imgStyle.height = height;\n      }\n\n      if (textBorderWidth && textBorderColor) {\n        var rectStyle = rectEl.style;\n        rectStyle.lineWidth = textBorderWidth;\n        rectStyle.stroke = textBorderColor;\n        rectStyle.strokeOpacity = retrieve2(style.strokeOpacity, 1);\n        rectStyle.lineDash = style.borderDash;\n        rectStyle.lineDashOffset = style.borderDashOffset || 0;\n        rectEl.strokeContainThreshold = 0;\n\n        if (rectEl.hasFill() && rectEl.hasStroke()) {\n          rectStyle.strokeFirst = true;\n          rectStyle.lineWidth *= 2;\n        }\n      }\n\n      var commonStyle = (rectEl || imgEl).style;\n      commonStyle.shadowBlur = style.shadowBlur || 0;\n      commonStyle.shadowColor = style.shadowColor || 'transparent';\n      commonStyle.shadowOffsetX = style.shadowOffsetX || 0;\n      commonStyle.shadowOffsetY = style.shadowOffsetY || 0;\n      commonStyle.opacity = retrieve3(style.opacity, topStyle.opacity, 1);\n    };\n\n    ZRText.makeFont = function (style) {\n      var font = '';\n\n      if (hasSeparateFont(style)) {\n        font = [style.fontStyle, style.fontWeight, parseFontSize(style.fontSize), style.fontFamily || 'sans-serif'].join(' ');\n      }\n\n      return font && trim(font) || style.textFont || style.font;\n    };\n\n    return ZRText;\n  }(Displayable);\n\n  var VALID_TEXT_ALIGN = {\n    left: true,\n    right: 1,\n    center: 1\n  };\n  var VALID_TEXT_VERTICAL_ALIGN = {\n    top: 1,\n    bottom: 1,\n    middle: 1\n  };\n  var FONT_PARTS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily'];\n\n  function parseFontSize(fontSize) {\n    if (typeof fontSize === 'string' && (fontSize.indexOf('px') !== -1 || fontSize.indexOf('rem') !== -1 || fontSize.indexOf('em') !== -1)) {\n      return fontSize;\n    } else if (!isNaN(+fontSize)) {\n      return fontSize + 'px';\n    } else {\n      return DEFAULT_FONT_SIZE + 'px';\n    }\n  }\n\n  function setSeparateFont(targetStyle, sourceStyle) {\n    for (var i = 0; i < FONT_PARTS.length; i++) {\n      var fontProp = FONT_PARTS[i];\n      var val = sourceStyle[fontProp];\n\n      if (val != null) {\n        targetStyle[fontProp] = val;\n      }\n    }\n  }\n\n  function hasSeparateFont(style) {\n    return style.fontSize != null || style.fontFamily || style.fontWeight;\n  }\n\n  function normalizeTextStyle(style) {\n    normalizeStyle(style);\n    each(style.rich, normalizeStyle);\n    return style;\n  }\n\n  function normalizeStyle(style) {\n    if (style) {\n      style.font = ZRText.makeFont(style);\n      var textAlign = style.align;\n      textAlign === 'middle' && (textAlign = 'center');\n      style.align = textAlign == null || VALID_TEXT_ALIGN[textAlign] ? textAlign : 'left';\n      var verticalAlign = style.verticalAlign;\n      verticalAlign === 'center' && (verticalAlign = 'middle');\n      style.verticalAlign = verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign] ? verticalAlign : 'top';\n      var textPadding = style.padding;\n\n      if (textPadding) {\n        style.padding = normalizeCssArray(style.padding);\n      }\n    }\n  }\n\n  function getStroke(stroke, lineWidth) {\n    return stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none' ? null : stroke.image || stroke.colorStops ? '#000' : stroke;\n  }\n\n  function getFill(fill) {\n    return fill == null || fill === 'none' ? null : fill.image || fill.colorStops ? '#000' : fill;\n  }\n\n  function getTextXForPadding(x, textAlign, textPadding) {\n    return textAlign === 'right' ? x - textPadding[1] : textAlign === 'center' ? x + textPadding[3] / 2 - textPadding[1] / 2 : x + textPadding[3];\n  }\n\n  function getStyleText(style) {\n    var text = style.text;\n    text != null && (text += '');\n    return text;\n  }\n\n  function needDrawBackground(style) {\n    return !!(style.backgroundColor || style.lineHeight || style.borderWidth && style.borderColor);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var getECData = makeInner();\n\n  var setCommonECData = function (seriesIndex, dataType, dataIdx, el) {\n    if (el) {\n      var ecData = getECData(el); // Add data index and series index for indexing the data by element\n      // Useful in tooltip\n\n      ecData.dataIndex = dataIdx;\n      ecData.dataType = dataType;\n      ecData.seriesIndex = seriesIndex; // TODO: not store dataIndex on children.\n\n      if (el.type === 'group') {\n        el.traverse(function (child) {\n          var childECData = getECData(child);\n          childECData.seriesIndex = seriesIndex;\n          childECData.dataIndex = dataIdx;\n          childECData.dataType = dataType;\n        });\n      }\n    }\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var _highlightNextDigit = 1;\n  var _highlightKeyMap = {};\n  var getSavedStates = makeInner();\n  var getComponentStates = makeInner();\n  var HOVER_STATE_NORMAL = 0;\n  var HOVER_STATE_BLUR = 1;\n  var HOVER_STATE_EMPHASIS = 2;\n  var SPECIAL_STATES = ['emphasis', 'blur', 'select'];\n  var DISPLAY_STATES = ['normal', 'emphasis', 'blur', 'select'];\n  var Z2_EMPHASIS_LIFT = 10;\n  var Z2_SELECT_LIFT = 9;\n  var HIGHLIGHT_ACTION_TYPE = 'highlight';\n  var DOWNPLAY_ACTION_TYPE = 'downplay';\n  var SELECT_ACTION_TYPE = 'select';\n  var UNSELECT_ACTION_TYPE = 'unselect';\n  var TOGGLE_SELECT_ACTION_TYPE = 'toggleSelect';\n\n  function hasFillOrStroke(fillOrStroke) {\n    return fillOrStroke != null && fillOrStroke !== 'none';\n  } // Most lifted color are duplicated.\n\n\n  var liftedColorCache = new LRU(100);\n\n  function liftColor(color) {\n    if (isString(color)) {\n      var liftedColor = liftedColorCache.get(color);\n\n      if (!liftedColor) {\n        liftedColor = lift(color, -0.1);\n        liftedColorCache.put(color, liftedColor);\n      }\n\n      return liftedColor;\n    } else if (isGradientObject(color)) {\n      var ret = extend({}, color);\n      ret.colorStops = map(color.colorStops, function (stop) {\n        return {\n          offset: stop.offset,\n          color: lift(stop.color, -0.1)\n        };\n      });\n      return ret;\n    } // Change nothing.\n\n\n    return color;\n  }\n\n  function doChangeHoverState(el, stateName, hoverStateEnum) {\n    if (el.onHoverStateChange && (el.hoverState || 0) !== hoverStateEnum) {\n      el.onHoverStateChange(stateName);\n    }\n\n    el.hoverState = hoverStateEnum;\n  }\n\n  function singleEnterEmphasis(el) {\n    // Only mark the flag.\n    // States will be applied in the echarts.ts in next frame.\n    doChangeHoverState(el, 'emphasis', HOVER_STATE_EMPHASIS);\n  }\n\n  function singleLeaveEmphasis(el) {\n    // Only mark the flag.\n    // States will be applied in the echarts.ts in next frame.\n    if (el.hoverState === HOVER_STATE_EMPHASIS) {\n      doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\n    }\n  }\n\n  function singleEnterBlur(el) {\n    doChangeHoverState(el, 'blur', HOVER_STATE_BLUR);\n  }\n\n  function singleLeaveBlur(el) {\n    if (el.hoverState === HOVER_STATE_BLUR) {\n      doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\n    }\n  }\n\n  function singleEnterSelect(el) {\n    el.selected = true;\n  }\n\n  function singleLeaveSelect(el) {\n    el.selected = false;\n  }\n\n  function updateElementState(el, updater, commonParam) {\n    updater(el, commonParam);\n  }\n\n  function traverseUpdateState(el, updater, commonParam) {\n    updateElementState(el, updater, commonParam);\n    el.isGroup && el.traverse(function (child) {\n      updateElementState(child, updater, commonParam);\n    });\n  }\n\n  function setStatesFlag(el, stateName) {\n    switch (stateName) {\n      case 'emphasis':\n        el.hoverState = HOVER_STATE_EMPHASIS;\n        break;\n\n      case 'normal':\n        el.hoverState = HOVER_STATE_NORMAL;\n        break;\n\n      case 'blur':\n        el.hoverState = HOVER_STATE_BLUR;\n        break;\n\n      case 'select':\n        el.selected = true;\n    }\n  }\n  /**\n   * If we reuse elements when rerender.\n   * DONT forget to clearStates before we update the style and shape.\n   * Or we may update on the wrong state instead of normal state.\n   */\n\n\n  function getFromStateStyle(el, props, toStateName, defaultValue) {\n    var style = el.style;\n    var fromState = {};\n\n    for (var i = 0; i < props.length; i++) {\n      var propName = props[i];\n      var val = style[propName];\n      fromState[propName] = val == null ? defaultValue && defaultValue[propName] : val;\n    }\n\n    for (var i = 0; i < el.animators.length; i++) {\n      var animator = el.animators[i];\n\n      if (animator.__fromStateTransition // Dont consider the animation to emphasis state.\n      && animator.__fromStateTransition.indexOf(toStateName) < 0 && animator.targetName === 'style') {\n        animator.saveTo(fromState, props);\n      }\n    }\n\n    return fromState;\n  }\n\n  function createEmphasisDefaultState(el, stateName, targetStates, state) {\n    var hasSelect = targetStates && indexOf(targetStates, 'select') >= 0;\n    var cloned = false;\n\n    if (el instanceof Path) {\n      var store = getSavedStates(el);\n      var fromFill = hasSelect ? store.selectFill || store.normalFill : store.normalFill;\n      var fromStroke = hasSelect ? store.selectStroke || store.normalStroke : store.normalStroke;\n\n      if (hasFillOrStroke(fromFill) || hasFillOrStroke(fromStroke)) {\n        state = state || {};\n        var emphasisStyle = state.style || {}; // inherit case\n\n        if (emphasisStyle.fill === 'inherit') {\n          cloned = true;\n          state = extend({}, state);\n          emphasisStyle = extend({}, emphasisStyle);\n          emphasisStyle.fill = fromFill;\n        } // Apply default color lift\n        else if (!hasFillOrStroke(emphasisStyle.fill) && hasFillOrStroke(fromFill)) {\n            cloned = true; // Not modify the original value.\n\n            state = extend({}, state);\n            emphasisStyle = extend({}, emphasisStyle); // Already being applied 'emphasis'. DON'T lift color multiple times.\n\n            emphasisStyle.fill = liftColor(fromFill);\n          } // Not highlight stroke if fill has been highlighted.\n          else if (!hasFillOrStroke(emphasisStyle.stroke) && hasFillOrStroke(fromStroke)) {\n              if (!cloned) {\n                state = extend({}, state);\n                emphasisStyle = extend({}, emphasisStyle);\n              }\n\n              emphasisStyle.stroke = liftColor(fromStroke);\n            }\n\n        state.style = emphasisStyle;\n      }\n    }\n\n    if (state) {\n      // TODO Share with textContent?\n      if (state.z2 == null) {\n        if (!cloned) {\n          state = extend({}, state);\n        }\n\n        var z2EmphasisLift = el.z2EmphasisLift;\n        state.z2 = el.z2 + (z2EmphasisLift != null ? z2EmphasisLift : Z2_EMPHASIS_LIFT);\n      }\n    }\n\n    return state;\n  }\n\n  function createSelectDefaultState(el, stateName, state) {\n    // const hasSelect = indexOf(el.currentStates, stateName) >= 0;\n    if (state) {\n      // TODO Share with textContent?\n      if (state.z2 == null) {\n        state = extend({}, state);\n        var z2SelectLift = el.z2SelectLift;\n        state.z2 = el.z2 + (z2SelectLift != null ? z2SelectLift : Z2_SELECT_LIFT);\n      }\n    }\n\n    return state;\n  }\n\n  function createBlurDefaultState(el, stateName, state) {\n    var hasBlur = indexOf(el.currentStates, stateName) >= 0;\n    var currentOpacity = el.style.opacity;\n    var fromState = !hasBlur ? getFromStateStyle(el, ['opacity'], stateName, {\n      opacity: 1\n    }) : null;\n    state = state || {};\n    var blurStyle = state.style || {};\n\n    if (blurStyle.opacity == null) {\n      // clone state\n      state = extend({}, state);\n      blurStyle = extend({\n        // Already being applied 'emphasis'. DON'T mul opacity multiple times.\n        opacity: hasBlur ? currentOpacity : fromState.opacity * 0.1\n      }, blurStyle);\n      state.style = blurStyle;\n    }\n\n    return state;\n  }\n\n  function elementStateProxy(stateName, targetStates) {\n    var state = this.states[stateName];\n\n    if (this.style) {\n      if (stateName === 'emphasis') {\n        return createEmphasisDefaultState(this, stateName, targetStates, state);\n      } else if (stateName === 'blur') {\n        return createBlurDefaultState(this, stateName, state);\n      } else if (stateName === 'select') {\n        return createSelectDefaultState(this, stateName, state);\n      }\n    }\n\n    return state;\n  }\n  /**FI\n   * Set hover style (namely \"emphasis style\") of element.\n   * @param el Should not be `zrender/graphic/Group`.\n   * @param focus 'self' | 'selfInSeries' | 'series'\n   */\n\n\n  function setDefaultStateProxy(el) {\n    el.stateProxy = elementStateProxy;\n    var textContent = el.getTextContent();\n    var textGuide = el.getTextGuideLine();\n\n    if (textContent) {\n      textContent.stateProxy = elementStateProxy;\n    }\n\n    if (textGuide) {\n      textGuide.stateProxy = elementStateProxy;\n    }\n  }\n\n  function enterEmphasisWhenMouseOver(el, e) {\n    !shouldSilent(el, e) // \"emphasis\" event highlight has higher priority than mouse highlight.\n    && !el.__highByOuter && traverseUpdateState(el, singleEnterEmphasis);\n  }\n\n  function leaveEmphasisWhenMouseOut(el, e) {\n    !shouldSilent(el, e) // \"emphasis\" event highlight has higher priority than mouse highlight.\n    && !el.__highByOuter && traverseUpdateState(el, singleLeaveEmphasis);\n  }\n\n  function enterEmphasis(el, highlightDigit) {\n    el.__highByOuter |= 1 << (highlightDigit || 0);\n    traverseUpdateState(el, singleEnterEmphasis);\n  }\n\n  function leaveEmphasis(el, highlightDigit) {\n    !(el.__highByOuter &= ~(1 << (highlightDigit || 0))) && traverseUpdateState(el, singleLeaveEmphasis);\n  }\n\n  function enterBlur(el) {\n    traverseUpdateState(el, singleEnterBlur);\n  }\n\n  function leaveBlur(el) {\n    traverseUpdateState(el, singleLeaveBlur);\n  }\n\n  function enterSelect(el) {\n    traverseUpdateState(el, singleEnterSelect);\n  }\n\n  function leaveSelect(el) {\n    traverseUpdateState(el, singleLeaveSelect);\n  }\n\n  function shouldSilent(el, e) {\n    return el.__highDownSilentOnTouch && e.zrByTouch;\n  }\n\n  function allLeaveBlur(api) {\n    var model = api.getModel();\n    var leaveBlurredSeries = [];\n    var allComponentViews = [];\n    model.eachComponent(function (componentType, componentModel) {\n      var componentStates = getComponentStates(componentModel);\n      var isSeries = componentType === 'series';\n      var view = isSeries ? api.getViewOfSeriesModel(componentModel) : api.getViewOfComponentModel(componentModel);\n      !isSeries && allComponentViews.push(view);\n\n      if (componentStates.isBlured) {\n        // Leave blur anyway\n        view.group.traverse(function (child) {\n          singleLeaveBlur(child);\n        });\n        isSeries && leaveBlurredSeries.push(componentModel);\n      }\n\n      componentStates.isBlured = false;\n    });\n    each(allComponentViews, function (view) {\n      if (view && view.toggleBlurSeries) {\n        view.toggleBlurSeries(leaveBlurredSeries, false, model);\n      }\n    });\n  }\n\n  function blurSeries(targetSeriesIndex, focus, blurScope, api) {\n    var ecModel = api.getModel();\n    blurScope = blurScope || 'coordinateSystem';\n\n    function leaveBlurOfIndices(data, dataIndices) {\n      for (var i = 0; i < dataIndices.length; i++) {\n        var itemEl = data.getItemGraphicEl(dataIndices[i]);\n        itemEl && leaveBlur(itemEl);\n      }\n    }\n\n    if (targetSeriesIndex == null) {\n      return;\n    }\n\n    if (!focus || focus === 'none') {\n      return;\n    }\n\n    var targetSeriesModel = ecModel.getSeriesByIndex(targetSeriesIndex);\n    var targetCoordSys = targetSeriesModel.coordinateSystem;\n\n    if (targetCoordSys && targetCoordSys.master) {\n      targetCoordSys = targetCoordSys.master;\n    }\n\n    var blurredSeries = [];\n    ecModel.eachSeries(function (seriesModel) {\n      var sameSeries = targetSeriesModel === seriesModel;\n      var coordSys = seriesModel.coordinateSystem;\n\n      if (coordSys && coordSys.master) {\n        coordSys = coordSys.master;\n      }\n\n      var sameCoordSys = coordSys && targetCoordSys ? coordSys === targetCoordSys : sameSeries; // If there is no coordinate system. use sameSeries instead.\n\n      if (!( // Not blur other series if blurScope series\n      blurScope === 'series' && !sameSeries // Not blur other coordinate system if blurScope is coordinateSystem\n      || blurScope === 'coordinateSystem' && !sameCoordSys // Not blur self series if focus is series.\n      || focus === 'series' && sameSeries // TODO blurScope: coordinate system\n      )) {\n        var view = api.getViewOfSeriesModel(seriesModel);\n        view.group.traverse(function (child) {\n          singleEnterBlur(child);\n        });\n\n        if (isArrayLike(focus)) {\n          leaveBlurOfIndices(seriesModel.getData(), focus);\n        } else if (isObject(focus)) {\n          var dataTypes = keys(focus);\n\n          for (var d = 0; d < dataTypes.length; d++) {\n            leaveBlurOfIndices(seriesModel.getData(dataTypes[d]), focus[dataTypes[d]]);\n          }\n        }\n\n        blurredSeries.push(seriesModel);\n        getComponentStates(seriesModel).isBlured = true;\n      }\n    });\n    ecModel.eachComponent(function (componentType, componentModel) {\n      if (componentType === 'series') {\n        return;\n      }\n\n      var view = api.getViewOfComponentModel(componentModel);\n\n      if (view && view.toggleBlurSeries) {\n        view.toggleBlurSeries(blurredSeries, true, ecModel);\n      }\n    });\n  }\n\n  function blurComponent(componentMainType, componentIndex, api) {\n    if (componentMainType == null || componentIndex == null) {\n      return;\n    }\n\n    var componentModel = api.getModel().getComponent(componentMainType, componentIndex);\n\n    if (!componentModel) {\n      return;\n    }\n\n    getComponentStates(componentModel).isBlured = true;\n    var view = api.getViewOfComponentModel(componentModel);\n\n    if (!view || !view.focusBlurEnabled) {\n      return;\n    }\n\n    view.group.traverse(function (child) {\n      singleEnterBlur(child);\n    });\n  }\n\n  function blurSeriesFromHighlightPayload(seriesModel, payload, api) {\n    var seriesIndex = seriesModel.seriesIndex;\n    var data = seriesModel.getData(payload.dataType);\n\n    if (!data) {\n      {\n        error(\"Unknown dataType \" + payload.dataType);\n      }\n      return;\n    }\n\n    var dataIndex = queryDataIndex(data, payload); // Pick the first one if there is multiple/none exists.\n\n    dataIndex = (isArray(dataIndex) ? dataIndex[0] : dataIndex) || 0;\n    var el = data.getItemGraphicEl(dataIndex);\n\n    if (!el) {\n      var count = data.count();\n      var current = 0; // If data on dataIndex is NaN.\n\n      while (!el && current < count) {\n        el = data.getItemGraphicEl(current++);\n      }\n    }\n\n    if (el) {\n      var ecData = getECData(el);\n      blurSeries(seriesIndex, ecData.focus, ecData.blurScope, api);\n    } else {\n      // If there is no element put on the data. Try getting it from raw option\n      // TODO Should put it on seriesModel?\n      var focus_1 = seriesModel.get(['emphasis', 'focus']);\n      var blurScope = seriesModel.get(['emphasis', 'blurScope']);\n\n      if (focus_1 != null) {\n        blurSeries(seriesIndex, focus_1, blurScope, api);\n      }\n    }\n  }\n\n  function findComponentHighDownDispatchers(componentMainType, componentIndex, name, api) {\n    var ret = {\n      focusSelf: false,\n      dispatchers: null\n    };\n\n    if (componentMainType == null || componentMainType === 'series' || componentIndex == null || name == null) {\n      return ret;\n    }\n\n    var componentModel = api.getModel().getComponent(componentMainType, componentIndex);\n\n    if (!componentModel) {\n      return ret;\n    }\n\n    var view = api.getViewOfComponentModel(componentModel);\n\n    if (!view || !view.findHighDownDispatchers) {\n      return ret;\n    }\n\n    var dispatchers = view.findHighDownDispatchers(name); // At presnet, the component (like Geo) only blur inside itself.\n    // So we do not use `blurScope` in component.\n\n    var focusSelf;\n\n    for (var i = 0; i < dispatchers.length; i++) {\n      if (\"development\" !== 'production' && !isHighDownDispatcher(dispatchers[i])) {\n        error('param should be highDownDispatcher');\n      }\n\n      if (getECData(dispatchers[i]).focus === 'self') {\n        focusSelf = true;\n        break;\n      }\n    }\n\n    return {\n      focusSelf: focusSelf,\n      dispatchers: dispatchers\n    };\n  }\n\n  function handleGlobalMouseOverForHighDown(dispatcher, e, api) {\n    if (\"development\" !== 'production' && !isHighDownDispatcher(dispatcher)) {\n      error('param should be highDownDispatcher');\n    }\n\n    var ecData = getECData(dispatcher);\n\n    var _a = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api),\n        dispatchers = _a.dispatchers,\n        focusSelf = _a.focusSelf; // If `findHighDownDispatchers` is supported on the component,\n    // highlight/downplay elements with the same name.\n\n\n    if (dispatchers) {\n      if (focusSelf) {\n        blurComponent(ecData.componentMainType, ecData.componentIndex, api);\n      }\n\n      each(dispatchers, function (dispatcher) {\n        return enterEmphasisWhenMouseOver(dispatcher, e);\n      });\n    } else {\n      // Try blur all in the related series. Then emphasis the hoverred.\n      // TODO. progressive mode.\n      blurSeries(ecData.seriesIndex, ecData.focus, ecData.blurScope, api);\n\n      if (ecData.focus === 'self') {\n        blurComponent(ecData.componentMainType, ecData.componentIndex, api);\n      } // Other than series, component that not support `findHighDownDispatcher` will\n      // also use it. But in this case, highlight/downplay are only supported in\n      // mouse hover but not in dispatchAction.\n\n\n      enterEmphasisWhenMouseOver(dispatcher, e);\n    }\n  }\n\n  function handleGlobalMouseOutForHighDown(dispatcher, e, api) {\n    if (\"development\" !== 'production' && !isHighDownDispatcher(dispatcher)) {\n      error('param should be highDownDispatcher');\n    }\n\n    allLeaveBlur(api);\n    var ecData = getECData(dispatcher);\n    var dispatchers = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api).dispatchers;\n\n    if (dispatchers) {\n      each(dispatchers, function (dispatcher) {\n        return leaveEmphasisWhenMouseOut(dispatcher, e);\n      });\n    } else {\n      leaveEmphasisWhenMouseOut(dispatcher, e);\n    }\n  }\n\n  function toggleSelectionFromPayload(seriesModel, payload, api) {\n    if (!isSelectChangePayload(payload)) {\n      return;\n    }\n\n    var dataType = payload.dataType;\n    var data = seriesModel.getData(dataType);\n    var dataIndex = queryDataIndex(data, payload);\n\n    if (!isArray(dataIndex)) {\n      dataIndex = [dataIndex];\n    }\n\n    seriesModel[payload.type === TOGGLE_SELECT_ACTION_TYPE ? 'toggleSelect' : payload.type === SELECT_ACTION_TYPE ? 'select' : 'unselect'](dataIndex, dataType);\n  }\n\n  function updateSeriesElementSelection(seriesModel) {\n    var allData = seriesModel.getAllData();\n    each(allData, function (_a) {\n      var data = _a.data,\n          type = _a.type;\n      data.eachItemGraphicEl(function (el, idx) {\n        seriesModel.isSelected(idx, type) ? enterSelect(el) : leaveSelect(el);\n      });\n    });\n  }\n\n  function getAllSelectedIndices(ecModel) {\n    var ret = [];\n    ecModel.eachSeries(function (seriesModel) {\n      var allData = seriesModel.getAllData();\n      each(allData, function (_a) {\n        var data = _a.data,\n            type = _a.type;\n        var dataIndices = seriesModel.getSelectedDataIndices();\n\n        if (dataIndices.length > 0) {\n          var item = {\n            dataIndex: dataIndices,\n            seriesIndex: seriesModel.seriesIndex\n          };\n\n          if (type != null) {\n            item.dataType = type;\n          }\n\n          ret.push(item);\n        }\n      });\n    });\n    return ret;\n  }\n  /**\n   * Enable the function that mouseover will trigger the emphasis state.\n   *\n   * NOTE:\n   * This function should be used on the element with dataIndex, seriesIndex.\n   *\n   */\n\n\n  function enableHoverEmphasis(el, focus, blurScope) {\n    setAsHighDownDispatcher(el, true);\n    traverseUpdateState(el, setDefaultStateProxy);\n    enableHoverFocus(el, focus, blurScope);\n  }\n\n  function disableHoverEmphasis(el) {\n    setAsHighDownDispatcher(el, false);\n  }\n\n  function toggleHoverEmphasis(el, focus, blurScope, isDisabled) {\n    isDisabled ? disableHoverEmphasis(el) : enableHoverEmphasis(el, focus, blurScope);\n  }\n\n  function enableHoverFocus(el, focus, blurScope) {\n    var ecData = getECData(el);\n\n    if (focus != null) {\n      // TODO dataIndex may be set after this function. This check is not useful.\n      // if (ecData.dataIndex == null) {\n      //     if (__DEV__) {\n      //         console.warn('focus can only been set on element with dataIndex');\n      //     }\n      // }\n      // else {\n      ecData.focus = focus;\n      ecData.blurScope = blurScope; // }\n    } else if (ecData.focus) {\n      ecData.focus = null;\n    }\n  }\n\n  var OTHER_STATES = ['emphasis', 'blur', 'select'];\n  var defaultStyleGetterMap = {\n    itemStyle: 'getItemStyle',\n    lineStyle: 'getLineStyle',\n    areaStyle: 'getAreaStyle'\n  };\n  /**\n   * Set emphasis/blur/selected states of element.\n   */\n\n  function setStatesStylesFromModel(el, itemModel, styleType, // default itemStyle\n  getter) {\n    styleType = styleType || 'itemStyle';\n\n    for (var i = 0; i < OTHER_STATES.length; i++) {\n      var stateName = OTHER_STATES[i];\n      var model = itemModel.getModel([stateName, styleType]);\n      var state = el.ensureState(stateName); // Let it throw error if getterType is not found.\n\n      state.style = getter ? getter(model) : model[defaultStyleGetterMap[styleType]]();\n    }\n  }\n  /**\n   *\n   * Set element as highlight / downplay dispatcher.\n   * It will be checked when element recieved mouseover event or from highlight action.\n   * It's in change of all highlight/downplay behavior of it's children.\n   *\n   * @param el\n   * @param el.highDownSilentOnTouch\n   *        In touch device, mouseover event will be trigger on touchstart event\n   *        (see module:zrender/dom/HandlerProxy). By this mechanism, we can\n   *        conveniently use hoverStyle when tap on touch screen without additional\n   *        code for compatibility.\n   *        But if the chart/component has select feature, which usually also use\n   *        hoverStyle, there might be conflict between 'select-highlight' and\n   *        'hover-highlight' especially when roam is enabled (see geo for example).\n   *        In this case, `highDownSilentOnTouch` should be used to disable\n   *        hover-highlight on touch device.\n   * @param asDispatcher If `false`, do not set as \"highDownDispatcher\".\n   */\n\n\n  function setAsHighDownDispatcher(el, asDispatcher) {\n    var disable = asDispatcher === false;\n    var extendedEl = el; // Make `highDownSilentOnTouch` and `onStateChange` only work after\n    // `setAsHighDownDispatcher` called. Avoid it is modified by user unexpectedly.\n\n    if (el.highDownSilentOnTouch) {\n      extendedEl.__highDownSilentOnTouch = el.highDownSilentOnTouch;\n    } // Simple optimize, since this method might be\n    // called for each elements of a group in some cases.\n\n\n    if (!disable || extendedEl.__highDownDispatcher) {\n      // Emphasis, normal can be triggered manually by API or other components like hover link.\n      // el[method]('emphasis', onElementEmphasisEvent)[method]('normal', onElementNormalEvent);\n      // Also keep previous record.\n      extendedEl.__highByOuter = extendedEl.__highByOuter || 0;\n      extendedEl.__highDownDispatcher = !disable;\n    }\n  }\n\n  function isHighDownDispatcher(el) {\n    return !!(el && el.__highDownDispatcher);\n  }\n  /**\n   * Enable component highlight/downplay features:\n   * + hover link (within the same name)\n   * + focus blur in component\n   */\n\n  /**\n   * Support hightlight/downplay record on each elements.\n   * For the case: hover highlight/downplay (legend, visualMap, ...) and\n   * user triggerred hightlight/downplay should not conflict.\n   * Only all of the highlightDigit cleared, return to normal.\n   * @param {string} highlightKey\n   * @return {number} highlightDigit\n   */\n\n\n  function getHighlightDigit(highlightKey) {\n    var highlightDigit = _highlightKeyMap[highlightKey];\n\n    if (highlightDigit == null && _highlightNextDigit <= 32) {\n      highlightDigit = _highlightKeyMap[highlightKey] = _highlightNextDigit++;\n    }\n\n    return highlightDigit;\n  }\n\n  function isSelectChangePayload(payload) {\n    var payloadType = payload.type;\n    return payloadType === SELECT_ACTION_TYPE || payloadType === UNSELECT_ACTION_TYPE || payloadType === TOGGLE_SELECT_ACTION_TYPE;\n  }\n\n  function isHighDownPayload(payload) {\n    var payloadType = payload.type;\n    return payloadType === HIGHLIGHT_ACTION_TYPE || payloadType === DOWNPLAY_ACTION_TYPE;\n  }\n\n  function savePathStates(el) {\n    var store = getSavedStates(el);\n    store.normalFill = el.style.fill;\n    store.normalStroke = el.style.stroke;\n    var selectState = el.states.select || {};\n    store.selectFill = selectState.style && selectState.style.fill || null;\n    store.selectStroke = selectState.style && selectState.style.stroke || null;\n  }\n\n  var CMD$2 = PathProxy.CMD;\n  var points = [[], [], []];\n  var mathSqrt$2 = Math.sqrt;\n  var mathAtan2 = Math.atan2;\n\n  function transformPath(path, m) {\n    if (!m) {\n      return;\n    }\n\n    var data = path.data;\n    var len$$1 = path.len();\n    var cmd;\n    var nPoint;\n    var i;\n    var j;\n    var k;\n    var p;\n    var M = CMD$2.M;\n    var C = CMD$2.C;\n    var L = CMD$2.L;\n    var R = CMD$2.R;\n    var A = CMD$2.A;\n    var Q = CMD$2.Q;\n\n    for (i = 0, j = 0; i < len$$1;) {\n      cmd = data[i++];\n      j = i;\n      nPoint = 0;\n\n      switch (cmd) {\n        case M:\n          nPoint = 1;\n          break;\n\n        case L:\n          nPoint = 1;\n          break;\n\n        case C:\n          nPoint = 3;\n          break;\n\n        case Q:\n          nPoint = 2;\n          break;\n\n        case A:\n          var x = m[4];\n          var y = m[5];\n          var sx = mathSqrt$2(m[0] * m[0] + m[1] * m[1]);\n          var sy = mathSqrt$2(m[2] * m[2] + m[3] * m[3]);\n          var angle = mathAtan2(-m[1] / sy, m[0] / sx);\n          data[i] *= sx;\n          data[i++] += x;\n          data[i] *= sy;\n          data[i++] += y;\n          data[i++] *= sx;\n          data[i++] *= sy;\n          data[i++] += angle;\n          data[i++] += angle;\n          i += 2;\n          j = i;\n          break;\n\n        case R:\n          p[0] = data[i++];\n          p[1] = data[i++];\n          applyTransform(p, p, m);\n          data[j++] = p[0];\n          data[j++] = p[1];\n          p[0] += data[i++];\n          p[1] += data[i++];\n          applyTransform(p, p, m);\n          data[j++] = p[0];\n          data[j++] = p[1];\n      }\n\n      for (k = 0; k < nPoint; k++) {\n        var p_1 = points[k];\n        p_1[0] = data[i++];\n        p_1[1] = data[i++];\n        applyTransform(p_1, p_1, m);\n        data[j++] = p_1[0];\n        data[j++] = p_1[1];\n      }\n    }\n\n    path.increaseVersion();\n  }\n\n  var mathSqrt$1 = Math.sqrt;\n  var mathSin$2 = Math.sin;\n  var mathCos$2 = Math.cos;\n  var PI$1 = Math.PI;\n\n  function vMag(v) {\n    return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n  }\n\n  function vRatio(u, v) {\n    return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n  }\n\n  function vAngle(u, v) {\n    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n  }\n\n  function processArc(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg, cmd, path) {\n    var psi = psiDeg * (PI$1 / 180.0);\n    var xp = mathCos$2(psi) * (x1 - x2) / 2.0 + mathSin$2(psi) * (y1 - y2) / 2.0;\n    var yp = -1 * mathSin$2(psi) * (x1 - x2) / 2.0 + mathCos$2(psi) * (y1 - y2) / 2.0;\n    var lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);\n\n    if (lambda > 1) {\n      rx *= mathSqrt$1(lambda);\n      ry *= mathSqrt$1(lambda);\n    }\n\n    var f = (fa === fs ? -1 : 1) * mathSqrt$1((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) / (rx * rx * (yp * yp) + ry * ry * (xp * xp))) || 0;\n    var cxp = f * rx * yp / ry;\n    var cyp = f * -ry * xp / rx;\n    var cx = (x1 + x2) / 2.0 + mathCos$2(psi) * cxp - mathSin$2(psi) * cyp;\n    var cy = (y1 + y2) / 2.0 + mathSin$2(psi) * cxp + mathCos$2(psi) * cyp;\n    var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    var dTheta = vAngle(u, v);\n\n    if (vRatio(u, v) <= -1) {\n      dTheta = PI$1;\n    }\n\n    if (vRatio(u, v) >= 1) {\n      dTheta = 0;\n    }\n\n    if (dTheta < 0) {\n      var n = Math.round(dTheta / PI$1 * 1e6) / 1e6;\n      dTheta = PI$1 * 2 + n % 2 * PI$1;\n    }\n\n    path.addData(cmd, cx, cy, rx, ry, theta, dTheta, psi, fs);\n  }\n\n  var commandReg = /([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig;\n  var numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g;\n\n  function createPathProxyFromString(data) {\n    var path = new PathProxy();\n\n    if (!data) {\n      return path;\n    }\n\n    var cpx = 0;\n    var cpy = 0;\n    var subpathX = cpx;\n    var subpathY = cpy;\n    var prevCmd;\n    var CMD = PathProxy.CMD;\n    var cmdList = data.match(commandReg);\n\n    if (!cmdList) {\n      return path;\n    }\n\n    for (var l = 0; l < cmdList.length; l++) {\n      var cmdText = cmdList[l];\n      var cmdStr = cmdText.charAt(0);\n      var cmd = void 0;\n      var p = cmdText.match(numberReg) || [];\n      var pLen = p.length;\n\n      for (var i = 0; i < pLen; i++) {\n        p[i] = parseFloat(p[i]);\n      }\n\n      var off = 0;\n\n      while (off < pLen) {\n        var ctlPtx = void 0;\n        var ctlPty = void 0;\n        var rx = void 0;\n        var ry = void 0;\n        var psi = void 0;\n        var fa = void 0;\n        var fs = void 0;\n        var x1 = cpx;\n        var y1 = cpy;\n        var len = void 0;\n        var pathData = void 0;\n\n        switch (cmdStr) {\n          case 'l':\n            cpx += p[off++];\n            cpy += p[off++];\n            cmd = CMD.L;\n            path.addData(cmd, cpx, cpy);\n            break;\n\n          case 'L':\n            cpx = p[off++];\n            cpy = p[off++];\n            cmd = CMD.L;\n            path.addData(cmd, cpx, cpy);\n            break;\n\n          case 'm':\n            cpx += p[off++];\n            cpy += p[off++];\n            cmd = CMD.M;\n            path.addData(cmd, cpx, cpy);\n            subpathX = cpx;\n            subpathY = cpy;\n            cmdStr = 'l';\n            break;\n\n          case 'M':\n            cpx = p[off++];\n            cpy = p[off++];\n            cmd = CMD.M;\n            path.addData(cmd, cpx, cpy);\n            subpathX = cpx;\n            subpathY = cpy;\n            cmdStr = 'L';\n            break;\n\n          case 'h':\n            cpx += p[off++];\n            cmd = CMD.L;\n            path.addData(cmd, cpx, cpy);\n            break;\n\n          case 'H':\n            cpx = p[off++];\n            cmd = CMD.L;\n            path.addData(cmd, cpx, cpy);\n            break;\n\n          case 'v':\n            cpy += p[off++];\n            cmd = CMD.L;\n            path.addData(cmd, cpx, cpy);\n            break;\n\n          case 'V':\n            cpy = p[off++];\n            cmd = CMD.L;\n            path.addData(cmd, cpx, cpy);\n            break;\n\n          case 'C':\n            cmd = CMD.C;\n            path.addData(cmd, p[off++], p[off++], p[off++], p[off++], p[off++], p[off++]);\n            cpx = p[off - 2];\n            cpy = p[off - 1];\n            break;\n\n          case 'c':\n            cmd = CMD.C;\n            path.addData(cmd, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy);\n            cpx += p[off - 2];\n            cpy += p[off - 1];\n            break;\n\n          case 'S':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            len = path.len();\n            pathData = path.data;\n\n            if (prevCmd === CMD.C) {\n              ctlPtx += cpx - pathData[len - 4];\n              ctlPty += cpy - pathData[len - 3];\n            }\n\n            cmd = CMD.C;\n            x1 = p[off++];\n            y1 = p[off++];\n            cpx = p[off++];\n            cpy = p[off++];\n            path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n            break;\n\n          case 's':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            len = path.len();\n            pathData = path.data;\n\n            if (prevCmd === CMD.C) {\n              ctlPtx += cpx - pathData[len - 4];\n              ctlPty += cpy - pathData[len - 3];\n            }\n\n            cmd = CMD.C;\n            x1 = cpx + p[off++];\n            y1 = cpy + p[off++];\n            cpx += p[off++];\n            cpy += p[off++];\n            path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n            break;\n\n          case 'Q':\n            x1 = p[off++];\n            y1 = p[off++];\n            cpx = p[off++];\n            cpy = p[off++];\n            cmd = CMD.Q;\n            path.addData(cmd, x1, y1, cpx, cpy);\n            break;\n\n          case 'q':\n            x1 = p[off++] + cpx;\n            y1 = p[off++] + cpy;\n            cpx += p[off++];\n            cpy += p[off++];\n            cmd = CMD.Q;\n            path.addData(cmd, x1, y1, cpx, cpy);\n            break;\n\n          case 'T':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            len = path.len();\n            pathData = path.data;\n\n            if (prevCmd === CMD.Q) {\n              ctlPtx += cpx - pathData[len - 4];\n              ctlPty += cpy - pathData[len - 3];\n            }\n\n            cpx = p[off++];\n            cpy = p[off++];\n            cmd = CMD.Q;\n            path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n            break;\n\n          case 't':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            len = path.len();\n            pathData = path.data;\n\n            if (prevCmd === CMD.Q) {\n              ctlPtx += cpx - pathData[len - 4];\n              ctlPty += cpy - pathData[len - 3];\n            }\n\n            cpx += p[off++];\n            cpy += p[off++];\n            cmd = CMD.Q;\n            path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n            break;\n\n          case 'A':\n            rx = p[off++];\n            ry = p[off++];\n            psi = p[off++];\n            fa = p[off++];\n            fs = p[off++];\n            x1 = cpx, y1 = cpy;\n            cpx = p[off++];\n            cpy = p[off++];\n            cmd = CMD.A;\n            processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n            break;\n\n          case 'a':\n            rx = p[off++];\n            ry = p[off++];\n            psi = p[off++];\n            fa = p[off++];\n            fs = p[off++];\n            x1 = cpx, y1 = cpy;\n            cpx += p[off++];\n            cpy += p[off++];\n            cmd = CMD.A;\n            processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n            break;\n        }\n      }\n\n      if (cmdStr === 'z' || cmdStr === 'Z') {\n        cmd = CMD.Z;\n        path.addData(cmd);\n        cpx = subpathX;\n        cpy = subpathY;\n      }\n\n      prevCmd = cmd;\n    }\n\n    path.toStatic();\n    return path;\n  }\n\n  var SVGPath = function (_super) {\n    __extends(SVGPath, _super);\n\n    function SVGPath() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    SVGPath.prototype.applyTransform = function (m) {};\n\n    return SVGPath;\n  }(Path);\n\n  function isPathProxy(path) {\n    return path.setData != null;\n  }\n\n  function createPathOptions(str, opts) {\n    var pathProxy = createPathProxyFromString(str);\n    var innerOpts = extend({}, opts);\n\n    innerOpts.buildPath = function (path) {\n      if (isPathProxy(path)) {\n        path.setData(pathProxy.data);\n        var ctx = path.getContext();\n\n        if (ctx) {\n          path.rebuildPath(ctx, 1);\n        }\n      } else {\n        var ctx = path;\n        pathProxy.rebuildPath(ctx, 1);\n      }\n    };\n\n    innerOpts.applyTransform = function (m) {\n      transformPath(pathProxy, m);\n      this.dirtyShape();\n    };\n\n    return innerOpts;\n  }\n\n  function createFromString(str, opts) {\n    return new SVGPath(createPathOptions(str, opts));\n  }\n\n  function extendFromString(str, defaultOpts) {\n    var innerOpts = createPathOptions(str, defaultOpts);\n\n    var Sub = function (_super) {\n      __extends(Sub, _super);\n\n      function Sub(opts) {\n        var _this = _super.call(this, opts) || this;\n\n        _this.applyTransform = innerOpts.applyTransform;\n        _this.buildPath = innerOpts.buildPath;\n        return _this;\n      }\n\n      return Sub;\n    }(SVGPath);\n\n    return Sub;\n  }\n\n  function mergePath$1(pathEls, opts) {\n    var pathList = [];\n    var len = pathEls.length;\n\n    for (var i = 0; i < len; i++) {\n      var pathEl = pathEls[i];\n      pathList.push(pathEl.getUpdatedPathProxy(true));\n    }\n\n    var pathBundle = new Path(opts);\n    pathBundle.createPathProxy();\n\n    pathBundle.buildPath = function (path) {\n      if (isPathProxy(path)) {\n        path.appendPath(pathList);\n        var ctx = path.getContext();\n\n        if (ctx) {\n          path.rebuildPath(ctx, 1);\n        }\n      }\n    };\n\n    return pathBundle;\n  }\n\n  var CircleShape = function () {\n    function CircleShape() {\n      this.cx = 0;\n      this.cy = 0;\n      this.r = 0;\n    }\n\n    return CircleShape;\n  }();\n\n  var Circle = function (_super) {\n    __extends(Circle, _super);\n\n    function Circle(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Circle.prototype.getDefaultShape = function () {\n      return new CircleShape();\n    };\n\n    Circle.prototype.buildPath = function (ctx, shape) {\n      ctx.moveTo(shape.cx + shape.r, shape.cy);\n      ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2);\n    };\n\n    return Circle;\n  }(Path);\n\n  Circle.prototype.type = 'circle';\n\n  var EllipseShape = function () {\n    function EllipseShape() {\n      this.cx = 0;\n      this.cy = 0;\n      this.rx = 0;\n      this.ry = 0;\n    }\n\n    return EllipseShape;\n  }();\n\n  var Ellipse = function (_super) {\n    __extends(Ellipse, _super);\n\n    function Ellipse(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Ellipse.prototype.getDefaultShape = function () {\n      return new EllipseShape();\n    };\n\n    Ellipse.prototype.buildPath = function (ctx, shape) {\n      var k = 0.5522848;\n      var x = shape.cx;\n      var y = shape.cy;\n      var a = shape.rx;\n      var b = shape.ry;\n      var ox = a * k;\n      var oy = b * k;\n      ctx.moveTo(x - a, y);\n      ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\n      ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\n      ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);\n      ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);\n      ctx.closePath();\n    };\n\n    return Ellipse;\n  }(Path);\n\n  Ellipse.prototype.type = 'ellipse';\n  var PI$2 = Math.PI;\n  var PI2$5 = PI$2 * 2;\n  var mathSin$3 = Math.sin;\n  var mathCos$3 = Math.cos;\n  var mathACos = Math.acos;\n  var mathATan2 = Math.atan2;\n  var mathAbs$1 = Math.abs;\n  var mathSqrt$3 = Math.sqrt;\n  var mathMax$4 = Math.max;\n  var mathMin$4 = Math.min;\n  var e = 1e-4;\n\n  function intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n    var dx10 = x1 - x0;\n    var dy10 = y1 - y0;\n    var dx32 = x3 - x2;\n    var dy32 = y3 - y2;\n    var t = dy32 * dx10 - dx32 * dy10;\n\n    if (t * t < e) {\n      return;\n    }\n\n    t = (dx32 * (y0 - y2) - dy32 * (x0 - x2)) / t;\n    return [x0 + t * dx10, y0 + t * dy10];\n  }\n\n  function computeCornerTangents(x0, y0, x1, y1, radius, cr, clockwise) {\n    var x01 = x0 - x1;\n    var y01 = y0 - y1;\n    var lo = (clockwise ? cr : -cr) / mathSqrt$3(x01 * x01 + y01 * y01);\n    var ox = lo * y01;\n    var oy = -lo * x01;\n    var x11 = x0 + ox;\n    var y11 = y0 + oy;\n    var x10 = x1 + ox;\n    var y10 = y1 + oy;\n    var x00 = (x11 + x10) / 2;\n    var y00 = (y11 + y10) / 2;\n    var dx = x10 - x11;\n    var dy = y10 - y11;\n    var d2 = dx * dx + dy * dy;\n    var r = radius - cr;\n    var s = x11 * y10 - x10 * y11;\n    var d = (dy < 0 ? -1 : 1) * mathSqrt$3(mathMax$4(0, r * r * d2 - s * s));\n    var cx0 = (s * dy - dx * d) / d2;\n    var cy0 = (-s * dx - dy * d) / d2;\n    var cx1 = (s * dy + dx * d) / d2;\n    var cy1 = (-s * dx + dy * d) / d2;\n    var dx0 = cx0 - x00;\n    var dy0 = cy0 - y00;\n    var dx1 = cx1 - x00;\n    var dy1 = cy1 - y00;\n\n    if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) {\n      cx0 = cx1;\n      cy0 = cy1;\n    }\n\n    return {\n      cx: cx0,\n      cy: cy0,\n      x0: -ox,\n      y0: -oy,\n      x1: cx0 * (radius / r - 1),\n      y1: cy0 * (radius / r - 1)\n    };\n  }\n\n  function normalizeCornerRadius(cr) {\n    var arr;\n\n    if (isArray(cr)) {\n      var len = cr.length;\n\n      if (!len) {\n        return cr;\n      }\n\n      if (len === 1) {\n        arr = [cr[0], cr[0], 0, 0];\n      } else if (len === 2) {\n        arr = [cr[0], cr[0], cr[1], cr[1]];\n      } else if (len === 3) {\n        arr = cr.concat(cr[2]);\n      } else {\n        arr = cr;\n      }\n    } else {\n      arr = [cr, cr, cr, cr];\n    }\n\n    return arr;\n  }\n\n  function buildPath$1(ctx, shape) {\n    var _a;\n\n    var radius = mathMax$4(shape.r, 0);\n    var innerRadius = mathMax$4(shape.r0 || 0, 0);\n    var hasRadius = radius > 0;\n    var hasInnerRadius = innerRadius > 0;\n\n    if (!hasRadius && !hasInnerRadius) {\n      return;\n    }\n\n    if (!hasRadius) {\n      radius = innerRadius;\n      innerRadius = 0;\n    }\n\n    if (innerRadius > radius) {\n      var tmp = radius;\n      radius = innerRadius;\n      innerRadius = tmp;\n    }\n\n    var startAngle = shape.startAngle,\n        endAngle = shape.endAngle;\n\n    if (isNaN(startAngle) || isNaN(endAngle)) {\n      return;\n    }\n\n    var cx = shape.cx,\n        cy = shape.cy;\n    var clockwise = !!shape.clockwise;\n    var arc = mathAbs$1(endAngle - startAngle);\n    var mod = arc > PI2$5 && arc % PI2$5;\n    mod > e && (arc = mod);\n\n    if (!(radius > e)) {\n      ctx.moveTo(cx, cy);\n    } else if (arc > PI2$5 - e) {\n      ctx.moveTo(cx + radius * mathCos$3(startAngle), cy + radius * mathSin$3(startAngle));\n      ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\n\n      if (innerRadius > e) {\n        ctx.moveTo(cx + innerRadius * mathCos$3(endAngle), cy + innerRadius * mathSin$3(endAngle));\n        ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\n      }\n    } else {\n      var icrStart = void 0;\n      var icrEnd = void 0;\n      var ocrStart = void 0;\n      var ocrEnd = void 0;\n      var ocrs = void 0;\n      var ocre = void 0;\n      var icrs = void 0;\n      var icre = void 0;\n      var ocrMax = void 0;\n      var icrMax = void 0;\n      var limitedOcrMax = void 0;\n      var limitedIcrMax = void 0;\n      var xre = void 0;\n      var yre = void 0;\n      var xirs = void 0;\n      var yirs = void 0;\n      var xrs = radius * mathCos$3(startAngle);\n      var yrs = radius * mathSin$3(startAngle);\n      var xire = innerRadius * mathCos$3(endAngle);\n      var yire = innerRadius * mathSin$3(endAngle);\n      var hasArc = arc > e;\n\n      if (hasArc) {\n        var cornerRadius = shape.cornerRadius;\n\n        if (cornerRadius) {\n          _a = normalizeCornerRadius(cornerRadius), icrStart = _a[0], icrEnd = _a[1], ocrStart = _a[2], ocrEnd = _a[3];\n        }\n\n        var halfRd = mathAbs$1(radius - innerRadius) / 2;\n        ocrs = mathMin$4(halfRd, ocrStart);\n        ocre = mathMin$4(halfRd, ocrEnd);\n        icrs = mathMin$4(halfRd, icrStart);\n        icre = mathMin$4(halfRd, icrEnd);\n        limitedOcrMax = ocrMax = mathMax$4(ocrs, ocre);\n        limitedIcrMax = icrMax = mathMax$4(icrs, icre);\n\n        if (ocrMax > e || icrMax > e) {\n          xre = radius * mathCos$3(endAngle);\n          yre = radius * mathSin$3(endAngle);\n          xirs = innerRadius * mathCos$3(startAngle);\n          yirs = innerRadius * mathSin$3(startAngle);\n\n          if (arc < PI$2) {\n            var it_1 = intersect(xrs, yrs, xirs, yirs, xre, yre, xire, yire);\n\n            if (it_1) {\n              var x0 = xrs - it_1[0];\n              var y0 = yrs - it_1[1];\n              var x1 = xre - it_1[0];\n              var y1 = yre - it_1[1];\n              var a = 1 / mathSin$3(mathACos((x0 * x1 + y0 * y1) / (mathSqrt$3(x0 * x0 + y0 * y0) * mathSqrt$3(x1 * x1 + y1 * y1))) / 2);\n              var b = mathSqrt$3(it_1[0] * it_1[0] + it_1[1] * it_1[1]);\n              limitedOcrMax = mathMin$4(ocrMax, (radius - b) / (a + 1));\n              limitedIcrMax = mathMin$4(icrMax, (innerRadius - b) / (a - 1));\n            }\n          }\n        }\n      }\n\n      if (!hasArc) {\n        ctx.moveTo(cx + xrs, cy + yrs);\n      } else if (limitedOcrMax > e) {\n        var crStart = mathMin$4(ocrStart, limitedOcrMax);\n        var crEnd = mathMin$4(ocrEnd, limitedOcrMax);\n        var ct0 = computeCornerTangents(xirs, yirs, xrs, yrs, radius, crStart, clockwise);\n        var ct1 = computeCornerTangents(xre, yre, xire, yire, radius, crEnd, clockwise);\n        ctx.moveTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\n\n        if (limitedOcrMax < ocrMax && crStart === crEnd) {\n          ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedOcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\n        } else {\n          crStart > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crStart, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\n          ctx.arc(cx, cy, radius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), !clockwise);\n          crEnd > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crEnd, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\n        }\n      } else {\n        ctx.moveTo(cx + xrs, cy + yrs);\n        ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\n      }\n\n      if (!(innerRadius > e) || !hasArc) {\n        ctx.lineTo(cx + xire, cy + yire);\n      } else if (limitedIcrMax > e) {\n        var crStart = mathMin$4(icrStart, limitedIcrMax);\n        var crEnd = mathMin$4(icrEnd, limitedIcrMax);\n        var ct0 = computeCornerTangents(xire, yire, xre, yre, innerRadius, -crEnd, clockwise);\n        var ct1 = computeCornerTangents(xrs, yrs, xirs, yirs, innerRadius, -crStart, clockwise);\n        ctx.lineTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\n\n        if (limitedIcrMax < icrMax && crStart === crEnd) {\n          ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedIcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\n        } else {\n          crEnd > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crEnd, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\n          ctx.arc(cx, cy, innerRadius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), clockwise);\n          crStart > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crStart, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\n        }\n      } else {\n        ctx.lineTo(cx + xire, cy + yire);\n        ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\n      }\n    }\n\n    ctx.closePath();\n  }\n\n  var SectorShape = function () {\n    function SectorShape() {\n      this.cx = 0;\n      this.cy = 0;\n      this.r0 = 0;\n      this.r = 0;\n      this.startAngle = 0;\n      this.endAngle = Math.PI * 2;\n      this.clockwise = true;\n      this.cornerRadius = 0;\n    }\n\n    return SectorShape;\n  }();\n\n  var Sector = function (_super) {\n    __extends(Sector, _super);\n\n    function Sector(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Sector.prototype.getDefaultShape = function () {\n      return new SectorShape();\n    };\n\n    Sector.prototype.buildPath = function (ctx, shape) {\n      buildPath$1(ctx, shape);\n    };\n\n    Sector.prototype.isZeroArea = function () {\n      return this.shape.startAngle === this.shape.endAngle || this.shape.r === this.shape.r0;\n    };\n\n    return Sector;\n  }(Path);\n\n  Sector.prototype.type = 'sector';\n\n  var RingShape = function () {\n    function RingShape() {\n      this.cx = 0;\n      this.cy = 0;\n      this.r = 0;\n      this.r0 = 0;\n    }\n\n    return RingShape;\n  }();\n\n  var Ring = function (_super) {\n    __extends(Ring, _super);\n\n    function Ring(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Ring.prototype.getDefaultShape = function () {\n      return new RingShape();\n    };\n\n    Ring.prototype.buildPath = function (ctx, shape) {\n      var x = shape.cx;\n      var y = shape.cy;\n      var PI2 = Math.PI * 2;\n      ctx.moveTo(x + shape.r, y);\n      ctx.arc(x, y, shape.r, 0, PI2, false);\n      ctx.moveTo(x + shape.r0, y);\n      ctx.arc(x, y, shape.r0, 0, PI2, true);\n    };\n\n    return Ring;\n  }(Path);\n\n  Ring.prototype.type = 'ring';\n\n  function smoothBezier(points, smooth, isLoop, constraint) {\n    var cps = [];\n    var v = [];\n    var v1 = [];\n    var v2 = [];\n    var prevPoint;\n    var nextPoint;\n    var min$$1;\n    var max$$1;\n\n    if (constraint) {\n      min$$1 = [Infinity, Infinity];\n      max$$1 = [-Infinity, -Infinity];\n\n      for (var i = 0, len$$1 = points.length; i < len$$1; i++) {\n        min(min$$1, min$$1, points[i]);\n        max(max$$1, max$$1, points[i]);\n      }\n\n      min(min$$1, min$$1, constraint[0]);\n      max(max$$1, max$$1, constraint[1]);\n    }\n\n    for (var i = 0, len$$1 = points.length; i < len$$1; i++) {\n      var point = points[i];\n\n      if (isLoop) {\n        prevPoint = points[i ? i - 1 : len$$1 - 1];\n        nextPoint = points[(i + 1) % len$$1];\n      } else {\n        if (i === 0 || i === len$$1 - 1) {\n          cps.push(clone$1(points[i]));\n          continue;\n        } else {\n          prevPoint = points[i - 1];\n          nextPoint = points[i + 1];\n        }\n      }\n\n      sub(v, nextPoint, prevPoint);\n      scale(v, v, smooth);\n      var d0 = distance(point, prevPoint);\n      var d1 = distance(point, nextPoint);\n      var sum = d0 + d1;\n\n      if (sum !== 0) {\n        d0 /= sum;\n        d1 /= sum;\n      }\n\n      scale(v1, v, -d0);\n      scale(v2, v, d1);\n      var cp0 = add([], point, v1);\n      var cp1 = add([], point, v2);\n\n      if (constraint) {\n        max(cp0, cp0, min$$1);\n        min(cp0, cp0, max$$1);\n        max(cp1, cp1, min$$1);\n        min(cp1, cp1, max$$1);\n      }\n\n      cps.push(cp0);\n      cps.push(cp1);\n    }\n\n    if (isLoop) {\n      cps.push(cps.shift());\n    }\n\n    return cps;\n  }\n\n  function buildPath$2(ctx, shape, closePath) {\n    var smooth = shape.smooth;\n    var points = shape.points;\n\n    if (points && points.length >= 2) {\n      if (smooth) {\n        var controlPoints = smoothBezier(points, smooth, closePath, shape.smoothConstraint);\n        ctx.moveTo(points[0][0], points[0][1]);\n        var len = points.length;\n\n        for (var i = 0; i < (closePath ? len : len - 1); i++) {\n          var cp1 = controlPoints[i * 2];\n          var cp2 = controlPoints[i * 2 + 1];\n          var p = points[(i + 1) % len];\n          ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);\n        }\n      } else {\n        ctx.moveTo(points[0][0], points[0][1]);\n\n        for (var i = 1, l = points.length; i < l; i++) {\n          ctx.lineTo(points[i][0], points[i][1]);\n        }\n      }\n\n      closePath && ctx.closePath();\n    }\n  }\n\n  var PolygonShape = function () {\n    function PolygonShape() {\n      this.points = null;\n      this.smooth = 0;\n      this.smoothConstraint = null;\n    }\n\n    return PolygonShape;\n  }();\n\n  var Polygon = function (_super) {\n    __extends(Polygon, _super);\n\n    function Polygon(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Polygon.prototype.getDefaultShape = function () {\n      return new PolygonShape();\n    };\n\n    Polygon.prototype.buildPath = function (ctx, shape) {\n      buildPath$2(ctx, shape, true);\n    };\n\n    return Polygon;\n  }(Path);\n\n  Polygon.prototype.type = 'polygon';\n\n  var PolylineShape = function () {\n    function PolylineShape() {\n      this.points = null;\n      this.percent = 1;\n      this.smooth = 0;\n      this.smoothConstraint = null;\n    }\n\n    return PolylineShape;\n  }();\n\n  var Polyline = function (_super) {\n    __extends(Polyline, _super);\n\n    function Polyline(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Polyline.prototype.getDefaultStyle = function () {\n      return {\n        stroke: '#000',\n        fill: null\n      };\n    };\n\n    Polyline.prototype.getDefaultShape = function () {\n      return new PolylineShape();\n    };\n\n    Polyline.prototype.buildPath = function (ctx, shape) {\n      buildPath$2(ctx, shape, false);\n    };\n\n    return Polyline;\n  }(Path);\n\n  Polyline.prototype.type = 'polyline';\n  var subPixelOptimizeOutputShape$1 = {};\n\n  var LineShape = function () {\n    function LineShape() {\n      this.x1 = 0;\n      this.y1 = 0;\n      this.x2 = 0;\n      this.y2 = 0;\n      this.percent = 1;\n    }\n\n    return LineShape;\n  }();\n\n  var Line = function (_super) {\n    __extends(Line, _super);\n\n    function Line(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Line.prototype.getDefaultStyle = function () {\n      return {\n        stroke: '#000',\n        fill: null\n      };\n    };\n\n    Line.prototype.getDefaultShape = function () {\n      return new LineShape();\n    };\n\n    Line.prototype.buildPath = function (ctx, shape) {\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n\n      if (this.subPixelOptimize) {\n        var optimizedShape = subPixelOptimizeLine(subPixelOptimizeOutputShape$1, shape, this.style);\n        x1 = optimizedShape.x1;\n        y1 = optimizedShape.y1;\n        x2 = optimizedShape.x2;\n        y2 = optimizedShape.y2;\n      } else {\n        x1 = shape.x1;\n        y1 = shape.y1;\n        x2 = shape.x2;\n        y2 = shape.y2;\n      }\n\n      var percent = shape.percent;\n\n      if (percent === 0) {\n        return;\n      }\n\n      ctx.moveTo(x1, y1);\n\n      if (percent < 1) {\n        x2 = x1 * (1 - percent) + x2 * percent;\n        y2 = y1 * (1 - percent) + y2 * percent;\n      }\n\n      ctx.lineTo(x2, y2);\n    };\n\n    Line.prototype.pointAt = function (p) {\n      var shape = this.shape;\n      return [shape.x1 * (1 - p) + shape.x2 * p, shape.y1 * (1 - p) + shape.y2 * p];\n    };\n\n    return Line;\n  }(Path);\n\n  Line.prototype.type = 'line';\n  var out = [];\n\n  var BezierCurveShape = function () {\n    function BezierCurveShape() {\n      this.x1 = 0;\n      this.y1 = 0;\n      this.x2 = 0;\n      this.y2 = 0;\n      this.cpx1 = 0;\n      this.cpy1 = 0;\n      this.percent = 1;\n    }\n\n    return BezierCurveShape;\n  }();\n\n  function someVectorAt(shape, t, isTangent) {\n    var cpx2 = shape.cpx2;\n    var cpy2 = shape.cpy2;\n\n    if (cpx2 != null || cpy2 != null) {\n      return [(isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t), (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)];\n    } else {\n      return [(isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t), (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)];\n    }\n  }\n\n  var BezierCurve = function (_super) {\n    __extends(BezierCurve, _super);\n\n    function BezierCurve(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    BezierCurve.prototype.getDefaultStyle = function () {\n      return {\n        stroke: '#000',\n        fill: null\n      };\n    };\n\n    BezierCurve.prototype.getDefaultShape = function () {\n      return new BezierCurveShape();\n    };\n\n    BezierCurve.prototype.buildPath = function (ctx, shape) {\n      var x1 = shape.x1;\n      var y1 = shape.y1;\n      var x2 = shape.x2;\n      var y2 = shape.y2;\n      var cpx1 = shape.cpx1;\n      var cpy1 = shape.cpy1;\n      var cpx2 = shape.cpx2;\n      var cpy2 = shape.cpy2;\n      var percent = shape.percent;\n\n      if (percent === 0) {\n        return;\n      }\n\n      ctx.moveTo(x1, y1);\n\n      if (cpx2 == null || cpy2 == null) {\n        if (percent < 1) {\n          quadraticSubdivide(x1, cpx1, x2, percent, out);\n          cpx1 = out[1];\n          x2 = out[2];\n          quadraticSubdivide(y1, cpy1, y2, percent, out);\n          cpy1 = out[1];\n          y2 = out[2];\n        }\n\n        ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\n      } else {\n        if (percent < 1) {\n          cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\n          cpx1 = out[1];\n          cpx2 = out[2];\n          x2 = out[3];\n          cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\n          cpy1 = out[1];\n          cpy2 = out[2];\n          y2 = out[3];\n        }\n\n        ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\n      }\n    };\n\n    BezierCurve.prototype.pointAt = function (t) {\n      return someVectorAt(this.shape, t, false);\n    };\n\n    BezierCurve.prototype.tangentAt = function (t) {\n      var p = someVectorAt(this.shape, t, true);\n      return normalize(p, p);\n    };\n\n    return BezierCurve;\n  }(Path);\n\n  BezierCurve.prototype.type = 'bezier-curve';\n\n  var ArcShape = function () {\n    function ArcShape() {\n      this.cx = 0;\n      this.cy = 0;\n      this.r = 0;\n      this.startAngle = 0;\n      this.endAngle = Math.PI * 2;\n      this.clockwise = true;\n    }\n\n    return ArcShape;\n  }();\n\n  var Arc = function (_super) {\n    __extends(Arc, _super);\n\n    function Arc(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Arc.prototype.getDefaultStyle = function () {\n      return {\n        stroke: '#000',\n        fill: null\n      };\n    };\n\n    Arc.prototype.getDefaultShape = function () {\n      return new ArcShape();\n    };\n\n    Arc.prototype.buildPath = function (ctx, shape) {\n      var x = shape.cx;\n      var y = shape.cy;\n      var r = Math.max(shape.r, 0);\n      var startAngle = shape.startAngle;\n      var endAngle = shape.endAngle;\n      var clockwise = shape.clockwise;\n      var unitX = Math.cos(startAngle);\n      var unitY = Math.sin(startAngle);\n      ctx.moveTo(unitX * r + x, unitY * r + y);\n      ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n    };\n\n    return Arc;\n  }(Path);\n\n  Arc.prototype.type = 'arc';\n\n  var CompoundPath = function (_super) {\n    __extends(CompoundPath, _super);\n\n    function CompoundPath() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = 'compound';\n      return _this;\n    }\n\n    CompoundPath.prototype._updatePathDirty = function () {\n      var paths = this.shape.paths;\n      var dirtyPath = this.shapeChanged();\n\n      for (var i = 0; i < paths.length; i++) {\n        dirtyPath = dirtyPath || paths[i].shapeChanged();\n      }\n\n      if (dirtyPath) {\n        this.dirtyShape();\n      }\n    };\n\n    CompoundPath.prototype.beforeBrush = function () {\n      this._updatePathDirty();\n\n      var paths = this.shape.paths || [];\n      var scale = this.getGlobalScale();\n\n      for (var i = 0; i < paths.length; i++) {\n        if (!paths[i].path) {\n          paths[i].createPathProxy();\n        }\n\n        paths[i].path.setScale(scale[0], scale[1], paths[i].segmentIgnoreThreshold);\n      }\n    };\n\n    CompoundPath.prototype.buildPath = function (ctx, shape) {\n      var paths = shape.paths || [];\n\n      for (var i = 0; i < paths.length; i++) {\n        paths[i].buildPath(ctx, paths[i].shape, true);\n      }\n    };\n\n    CompoundPath.prototype.afterBrush = function () {\n      var paths = this.shape.paths || [];\n\n      for (var i = 0; i < paths.length; i++) {\n        paths[i].pathUpdated();\n      }\n    };\n\n    CompoundPath.prototype.getBoundingRect = function () {\n      this._updatePathDirty.call(this);\n\n      return Path.prototype.getBoundingRect.call(this);\n    };\n\n    return CompoundPath;\n  }(Path);\n\n  var Gradient = function () {\n    function Gradient(colorStops) {\n      this.colorStops = colorStops || [];\n    }\n\n    Gradient.prototype.addColorStop = function (offset, color) {\n      this.colorStops.push({\n        offset: offset,\n        color: color\n      });\n    };\n\n    return Gradient;\n  }();\n\n  var LinearGradient = function (_super) {\n    __extends(LinearGradient, _super);\n\n    function LinearGradient(x, y, x2, y2, colorStops, globalCoord) {\n      var _this = _super.call(this, colorStops) || this;\n\n      _this.x = x == null ? 0 : x;\n      _this.y = y == null ? 0 : y;\n      _this.x2 = x2 == null ? 1 : x2;\n      _this.y2 = y2 == null ? 0 : y2;\n      _this.type = 'linear';\n      _this.global = globalCoord || false;\n      return _this;\n    }\n\n    return LinearGradient;\n  }(Gradient);\n\n  var RadialGradient = function (_super) {\n    __extends(RadialGradient, _super);\n\n    function RadialGradient(x, y, r, colorStops, globalCoord) {\n      var _this = _super.call(this, colorStops) || this;\n\n      _this.x = x == null ? 0.5 : x;\n      _this.y = y == null ? 0.5 : y;\n      _this.r = r == null ? 0.5 : r;\n      _this.type = 'radial';\n      _this.global = globalCoord || false;\n      return _this;\n    }\n\n    return RadialGradient;\n  }(Gradient);\n\n  var extent = [0, 0];\n  var extent2 = [0, 0];\n  var minTv$1 = new Point();\n  var maxTv$1 = new Point();\n\n  var OrientedBoundingRect = function () {\n    function OrientedBoundingRect(rect, transform) {\n      this._corners = [];\n      this._axes = [];\n      this._origin = [0, 0];\n\n      for (var i = 0; i < 4; i++) {\n        this._corners[i] = new Point();\n      }\n\n      for (var i = 0; i < 2; i++) {\n        this._axes[i] = new Point();\n      }\n\n      if (rect) {\n        this.fromBoundingRect(rect, transform);\n      }\n    }\n\n    OrientedBoundingRect.prototype.fromBoundingRect = function (rect, transform) {\n      var corners = this._corners;\n      var axes = this._axes;\n      var x = rect.x;\n      var y = rect.y;\n      var x2 = x + rect.width;\n      var y2 = y + rect.height;\n      corners[0].set(x, y);\n      corners[1].set(x2, y);\n      corners[2].set(x2, y2);\n      corners[3].set(x, y2);\n\n      if (transform) {\n        for (var i = 0; i < 4; i++) {\n          corners[i].transform(transform);\n        }\n      }\n\n      Point.sub(axes[0], corners[1], corners[0]);\n      Point.sub(axes[1], corners[3], corners[0]);\n      axes[0].normalize();\n      axes[1].normalize();\n\n      for (var i = 0; i < 2; i++) {\n        this._origin[i] = axes[i].dot(corners[0]);\n      }\n    };\n\n    OrientedBoundingRect.prototype.intersect = function (other, mtv) {\n      var overlapped = true;\n      var noMtv = !mtv;\n      minTv$1.set(Infinity, Infinity);\n      maxTv$1.set(0, 0);\n\n      if (!this._intersectCheckOneSide(this, other, minTv$1, maxTv$1, noMtv, 1)) {\n        overlapped = false;\n\n        if (noMtv) {\n          return overlapped;\n        }\n      }\n\n      if (!this._intersectCheckOneSide(other, this, minTv$1, maxTv$1, noMtv, -1)) {\n        overlapped = false;\n\n        if (noMtv) {\n          return overlapped;\n        }\n      }\n\n      if (!noMtv) {\n        Point.copy(mtv, overlapped ? minTv$1 : maxTv$1);\n      }\n\n      return overlapped;\n    };\n\n    OrientedBoundingRect.prototype._intersectCheckOneSide = function (self, other, minTv, maxTv, noMtv, inverse) {\n      var overlapped = true;\n\n      for (var i = 0; i < 2; i++) {\n        var axis = this._axes[i];\n\n        this._getProjMinMaxOnAxis(i, self._corners, extent);\n\n        this._getProjMinMaxOnAxis(i, other._corners, extent2);\n\n        if (extent[1] < extent2[0] || extent[0] > extent2[1]) {\n          overlapped = false;\n\n          if (noMtv) {\n            return overlapped;\n          }\n\n          var dist0 = Math.abs(extent2[0] - extent[1]);\n          var dist1 = Math.abs(extent[0] - extent2[1]);\n\n          if (Math.min(dist0, dist1) > maxTv.len()) {\n            if (dist0 < dist1) {\n              Point.scale(maxTv, axis, -dist0 * inverse);\n            } else {\n              Point.scale(maxTv, axis, dist1 * inverse);\n            }\n          }\n        } else if (minTv) {\n          var dist0 = Math.abs(extent2[0] - extent[1]);\n          var dist1 = Math.abs(extent[0] - extent2[1]);\n\n          if (Math.min(dist0, dist1) < minTv.len()) {\n            if (dist0 < dist1) {\n              Point.scale(minTv, axis, dist0 * inverse);\n            } else {\n              Point.scale(minTv, axis, -dist1 * inverse);\n            }\n          }\n        }\n      }\n\n      return overlapped;\n    };\n\n    OrientedBoundingRect.prototype._getProjMinMaxOnAxis = function (dim, corners, out) {\n      var axis = this._axes[dim];\n      var origin = this._origin;\n      var proj = corners[0].dot(axis) + origin[dim];\n      var min = proj;\n      var max = proj;\n\n      for (var i = 1; i < corners.length; i++) {\n        var proj_1 = corners[i].dot(axis) + origin[dim];\n        min = Math.min(proj_1, min);\n        max = Math.max(proj_1, max);\n      }\n\n      out[0] = min;\n      out[1] = max;\n    };\n\n    return OrientedBoundingRect;\n  }();\n\n  var m = [];\n\n  var IncrementalDisplayable = function (_super) {\n    __extends(IncrementalDisplayable, _super);\n\n    function IncrementalDisplayable() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.notClear = true;\n      _this.incremental = true;\n      _this._displayables = [];\n      _this._temporaryDisplayables = [];\n      _this._cursor = 0;\n      return _this;\n    }\n\n    IncrementalDisplayable.prototype.traverse = function (cb, context) {\n      cb.call(context, this);\n    };\n\n    IncrementalDisplayable.prototype.useStyle = function () {\n      this.style = {};\n    };\n\n    IncrementalDisplayable.prototype.getCursor = function () {\n      return this._cursor;\n    };\n\n    IncrementalDisplayable.prototype.innerAfterBrush = function () {\n      this._cursor = this._displayables.length;\n    };\n\n    IncrementalDisplayable.prototype.clearDisplaybles = function () {\n      this._displayables = [];\n      this._temporaryDisplayables = [];\n      this._cursor = 0;\n      this.markRedraw();\n      this.notClear = false;\n    };\n\n    IncrementalDisplayable.prototype.clearTemporalDisplayables = function () {\n      this._temporaryDisplayables = [];\n    };\n\n    IncrementalDisplayable.prototype.addDisplayable = function (displayable, notPersistent) {\n      if (notPersistent) {\n        this._temporaryDisplayables.push(displayable);\n      } else {\n        this._displayables.push(displayable);\n      }\n\n      this.markRedraw();\n    };\n\n    IncrementalDisplayable.prototype.addDisplayables = function (displayables, notPersistent) {\n      notPersistent = notPersistent || false;\n\n      for (var i = 0; i < displayables.length; i++) {\n        this.addDisplayable(displayables[i], notPersistent);\n      }\n    };\n\n    IncrementalDisplayable.prototype.getDisplayables = function () {\n      return this._displayables;\n    };\n\n    IncrementalDisplayable.prototype.getTemporalDisplayables = function () {\n      return this._temporaryDisplayables;\n    };\n\n    IncrementalDisplayable.prototype.eachPendingDisplayable = function (cb) {\n      for (var i = this._cursor; i < this._displayables.length; i++) {\n        cb && cb(this._displayables[i]);\n      }\n\n      for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n        cb && cb(this._temporaryDisplayables[i]);\n      }\n    };\n\n    IncrementalDisplayable.prototype.update = function () {\n      this.updateTransform();\n\n      for (var i = this._cursor; i < this._displayables.length; i++) {\n        var displayable = this._displayables[i];\n        displayable.parent = this;\n        displayable.update();\n        displayable.parent = null;\n      }\n\n      for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n        var displayable = this._temporaryDisplayables[i];\n        displayable.parent = this;\n        displayable.update();\n        displayable.parent = null;\n      }\n    };\n\n    IncrementalDisplayable.prototype.getBoundingRect = function () {\n      if (!this._rect) {\n        var rect = new BoundingRect(Infinity, Infinity, -Infinity, -Infinity);\n\n        for (var i = 0; i < this._displayables.length; i++) {\n          var displayable = this._displayables[i];\n          var childRect = displayable.getBoundingRect().clone();\n\n          if (displayable.needLocalTransform()) {\n            childRect.applyTransform(displayable.getLocalTransform(m));\n          }\n\n          rect.union(childRect);\n        }\n\n        this._rect = rect;\n      }\n\n      return this._rect;\n    };\n\n    IncrementalDisplayable.prototype.contain = function (x, y) {\n      var localPos = this.transformCoordToLocal(x, y);\n      var rect = this.getBoundingRect();\n\n      if (rect.contain(localPos[0], localPos[1])) {\n        for (var i = 0; i < this._displayables.length; i++) {\n          var displayable = this._displayables[i];\n\n          if (displayable.contain(x, y)) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    };\n\n    return IncrementalDisplayable;\n  }(Displayable);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var transitionStore = makeInner();\n  /**\n   * Return null if animation is disabled.\n   */\n\n  function getAnimationConfig(animationType, animatableModel, dataIndex, // Extra opts can override the option in animatable model.\n  extraOpts, // TODO It's only for pictorial bar now.\n  extraDelayParams) {\n    var animationPayload; // Check if there is global animation configuration from dataZoom/resize can override the config in option.\n    // If animation is enabled. Will use this animation config in payload.\n    // If animation is disabled. Just ignore it.\n\n    if (animatableModel && animatableModel.ecModel) {\n      var updatePayload = animatableModel.ecModel.getUpdatePayload();\n      animationPayload = updatePayload && updatePayload.animation;\n    }\n\n    var animationEnabled = animatableModel && animatableModel.isAnimationEnabled();\n    var isUpdate = animationType === 'update';\n\n    if (animationEnabled) {\n      var duration = void 0;\n      var easing = void 0;\n      var delay = void 0;\n\n      if (extraOpts) {\n        duration = retrieve2(extraOpts.duration, 200);\n        easing = retrieve2(extraOpts.easing, 'cubicOut');\n        delay = 0;\n      } else {\n        duration = animatableModel.getShallow(isUpdate ? 'animationDurationUpdate' : 'animationDuration');\n        easing = animatableModel.getShallow(isUpdate ? 'animationEasingUpdate' : 'animationEasing');\n        delay = animatableModel.getShallow(isUpdate ? 'animationDelayUpdate' : 'animationDelay');\n      } // animation from payload has highest priority.\n\n\n      if (animationPayload) {\n        animationPayload.duration != null && (duration = animationPayload.duration);\n        animationPayload.easing != null && (easing = animationPayload.easing);\n        animationPayload.delay != null && (delay = animationPayload.delay);\n      }\n\n      if (isFunction(delay)) {\n        delay = delay(dataIndex, extraDelayParams);\n      }\n\n      if (isFunction(duration)) {\n        duration = duration(dataIndex);\n      }\n\n      var config = {\n        duration: duration || 0,\n        delay: delay,\n        easing: easing\n      };\n      return config;\n    } else {\n      return null;\n    }\n  }\n\n  function animateOrSetProps(animationType, el, props, animatableModel, dataIndex, cb, during) {\n    var isFrom = false;\n    var removeOpt;\n\n    if (isFunction(dataIndex)) {\n      during = cb;\n      cb = dataIndex;\n      dataIndex = null;\n    } else if (isObject(dataIndex)) {\n      cb = dataIndex.cb;\n      during = dataIndex.during;\n      isFrom = dataIndex.isFrom;\n      removeOpt = dataIndex.removeOpt;\n      dataIndex = dataIndex.dataIndex;\n    }\n\n    var isRemove = animationType === 'leave';\n\n    if (!isRemove) {\n      // Must stop the remove animation.\n      el.stopAnimation('leave');\n    }\n\n    var animationConfig = getAnimationConfig(animationType, animatableModel, dataIndex, isRemove ? removeOpt || {} : null, animatableModel && animatableModel.getAnimationDelayParams ? animatableModel.getAnimationDelayParams(el, dataIndex) : null);\n\n    if (animationConfig && animationConfig.duration > 0) {\n      var duration = animationConfig.duration;\n      var animationDelay = animationConfig.delay;\n      var animationEasing = animationConfig.easing;\n      var animateConfig = {\n        duration: duration,\n        delay: animationDelay || 0,\n        easing: animationEasing,\n        done: cb,\n        force: !!cb || !!during,\n        // Set to final state in update/init animation.\n        // So the post processing based on the path shape can be done correctly.\n        setToFinal: !isRemove,\n        scope: animationType,\n        during: during\n      };\n      isFrom ? el.animateFrom(props, animateConfig) : el.animateTo(props, animateConfig);\n    } else {\n      el.stopAnimation(); // If `isFrom`, the props is the \"from\" props.\n\n      !isFrom && el.attr(props); // Call during at least once.\n\n      during && during(1);\n      cb && cb();\n    }\n  }\n  /**\n   * Update graphic element properties with or without animation according to the\n   * configuration in series.\n   *\n   * Caution: this method will stop previous animation.\n   * So do not use this method to one element twice before\n   * animation starts, unless you know what you are doing.\n   * @example\n   *     graphic.updateProps(el, {\n   *         position: [100, 100]\n   *     }, seriesModel, dataIndex, function () { console.log('Animation done!'); });\n   *     // Or\n   *     graphic.updateProps(el, {\n   *         position: [100, 100]\n   *     }, seriesModel, function () { console.log('Animation done!'); });\n   */\n\n\n  function updateProps(el, props, // TODO: TYPE AnimatableModel\n  animatableModel, dataIndex, cb, during) {\n    animateOrSetProps('update', el, props, animatableModel, dataIndex, cb, during);\n  }\n  /**\n   * Init graphic element properties with or without animation according to the\n   * configuration in series.\n   *\n   * Caution: this method will stop previous animation.\n   * So do not use this method to one element twice before\n   * animation starts, unless you know what you are doing.\n   */\n\n\n  function initProps(el, props, animatableModel, dataIndex, cb, during) {\n    animateOrSetProps('enter', el, props, animatableModel, dataIndex, cb, during);\n  }\n  /**\n   * If element is removed.\n   * It can determine if element is having remove animation.\n   */\n\n\n  function isElementRemoved(el) {\n    if (!el.__zr) {\n      return true;\n    }\n\n    for (var i = 0; i < el.animators.length; i++) {\n      var animator = el.animators[i];\n\n      if (animator.scope === 'leave') {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n   * Remove graphic element\n   */\n\n\n  function removeElement(el, props, animatableModel, dataIndex, cb, during) {\n    // Don't do remove animation twice.\n    if (isElementRemoved(el)) {\n      return;\n    }\n\n    animateOrSetProps('leave', el, props, animatableModel, dataIndex, cb, during);\n  }\n\n  function fadeOutDisplayable(el, animatableModel, dataIndex, done) {\n    el.removeTextContent();\n    el.removeTextGuideLine();\n    removeElement(el, {\n      style: {\n        opacity: 0\n      }\n    }, animatableModel, dataIndex, done);\n  }\n\n  function removeElementWithFadeOut(el, animatableModel, dataIndex) {\n    function doRemove() {\n      el.parent && el.parent.remove(el);\n    } // Hide label and labelLine first\n    // TODO Also use fade out animation?\n\n\n    if (!el.isGroup) {\n      fadeOutDisplayable(el, animatableModel, dataIndex, doRemove);\n    } else {\n      el.traverse(function (disp) {\n        if (!disp.isGroup) {\n          // Can invoke doRemove multiple times.\n          fadeOutDisplayable(disp, animatableModel, dataIndex, doRemove);\n        }\n      });\n    }\n  }\n  /**\n   * Save old style for style transition in universalTransition module.\n   * It's used when element will be reused in each render.\n   * For chart like map, heatmap, which will always create new element.\n   * We don't need to save this because universalTransition can get old style from the old element\n   */\n\n\n  function saveOldStyle(el) {\n    transitionStore(el).oldStyle = el.style;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var mathMax$3 = Math.max;\n  var mathMin$3 = Math.min;\n  var _customShapeMap = {};\n  /**\n   * Extend shape with parameters\n   */\n\n  function extendShape(opts) {\n    return Path.extend(opts);\n  }\n\n  var extendPathFromString = extendFromString;\n  /**\n   * Extend path\n   */\n\n  function extendPath(pathData, opts) {\n    return extendPathFromString(pathData, opts);\n  }\n  /**\n   * Register a user defined shape.\n   * The shape class can be fetched by `getShapeClass`\n   * This method will overwrite the registered shapes, including\n   * the registered built-in shapes, if using the same `name`.\n   * The shape can be used in `custom series` and\n   * `graphic component` by declaring `{type: name}`.\n   *\n   * @param name\n   * @param ShapeClass Can be generated by `extendShape`.\n   */\n\n\n  function registerShape(name, ShapeClass) {\n    _customShapeMap[name] = ShapeClass;\n  }\n  /**\n   * Find shape class registered by `registerShape`. Usually used in\n   * fetching user defined shape.\n   *\n   * [Caution]:\n   * (1) This method **MUST NOT be used inside echarts !!!**, unless it is prepared\n   * to use user registered shapes.\n   * Because the built-in shape (see `getBuiltInShape`) will be registered by\n   * `registerShape` by default. That enables users to get both built-in\n   * shapes as well as the shapes belonging to themsleves. But users can overwrite\n   * the built-in shapes by using names like 'circle', 'rect' via calling\n   * `registerShape`. So the echarts inner featrues should not fetch shapes from here\n   * in case that it is overwritten by users, except that some features, like\n   * `custom series`, `graphic component`, do it deliberately.\n   *\n   * (2) In the features like `custom series`, `graphic component`, the user input\n   * `{tpye: 'xxx'}` does not only specify shapes but also specify other graphic\n   * elements like `'group'`, `'text'`, `'image'` or event `'path'`. Those names\n   * are reserved names, that is, if some user register a shape named `'image'`,\n   * the shape will not be used. If we intending to add some more reserved names\n   * in feature, that might bring break changes (disable some existing user shape\n   * names). But that case probably rearly happen. So we dont make more mechanism\n   * to resolve this issue here.\n   *\n   * @param name\n   * @return The shape class. If not found, return nothing.\n   */\n\n\n  function getShapeClass(name) {\n    if (_customShapeMap.hasOwnProperty(name)) {\n      return _customShapeMap[name];\n    }\n  }\n  /**\n   * Create a path element from path data string\n   * @param pathData\n   * @param opts\n   * @param rect\n   * @param layout 'center' or 'cover' default to be cover\n   */\n\n\n  function makePath(pathData, opts, rect, layout) {\n    var path = createFromString(pathData, opts);\n\n    if (rect) {\n      if (layout === 'center') {\n        rect = centerGraphic(rect, path.getBoundingRect());\n      }\n\n      resizePath(path, rect);\n    }\n\n    return path;\n  }\n  /**\n   * Create a image element from image url\n   * @param imageUrl image url\n   * @param opts options\n   * @param rect constrain rect\n   * @param layout 'center' or 'cover'. Default to be 'cover'\n   */\n\n\n  function makeImage(imageUrl, rect, layout) {\n    var zrImg = new ZRImage({\n      style: {\n        image: imageUrl,\n        x: rect.x,\n        y: rect.y,\n        width: rect.width,\n        height: rect.height\n      },\n      onload: function (img) {\n        if (layout === 'center') {\n          var boundingRect = {\n            width: img.width,\n            height: img.height\n          };\n          zrImg.setStyle(centerGraphic(rect, boundingRect));\n        }\n      }\n    });\n    return zrImg;\n  }\n  /**\n   * Get position of centered element in bounding box.\n   *\n   * @param  rect         element local bounding box\n   * @param  boundingRect constraint bounding box\n   * @return element position containing x, y, width, and height\n   */\n\n\n  function centerGraphic(rect, boundingRect) {\n    // Set rect to center, keep width / height ratio.\n    var aspect = boundingRect.width / boundingRect.height;\n    var width = rect.height * aspect;\n    var height;\n\n    if (width <= rect.width) {\n      height = rect.height;\n    } else {\n      width = rect.width;\n      height = width / aspect;\n    }\n\n    var cx = rect.x + rect.width / 2;\n    var cy = rect.y + rect.height / 2;\n    return {\n      x: cx - width / 2,\n      y: cy - height / 2,\n      width: width,\n      height: height\n    };\n  }\n\n  var mergePath = mergePath$1;\n  /**\n   * Resize a path to fit the rect\n   * @param path\n   * @param rect\n   */\n\n  function resizePath(path, rect) {\n    if (!path.applyTransform) {\n      return;\n    }\n\n    var pathRect = path.getBoundingRect();\n    var m = pathRect.calculateTransform(rect);\n    path.applyTransform(m);\n  }\n  /**\n   * Sub pixel optimize line for canvas\n   */\n\n\n  function subPixelOptimizeLine$1(param) {\n    subPixelOptimizeLine(param.shape, param.shape, param.style);\n    return param;\n  }\n  /**\n   * Sub pixel optimize rect for canvas\n   */\n\n\n  function subPixelOptimizeRect$1(param) {\n    subPixelOptimizeRect(param.shape, param.shape, param.style);\n    return param;\n  }\n  /**\n   * Sub pixel optimize for canvas\n   *\n   * @param position Coordinate, such as x, y\n   * @param lineWidth Should be nonnegative integer.\n   * @param positiveOrNegative Default false (negative).\n   * @return Optimized position.\n   */\n\n\n  var subPixelOptimize$1 = subPixelOptimize;\n  /**\n   * Get transform matrix of target (param target),\n   * in coordinate of its ancestor (param ancestor)\n   *\n   * @param target\n   * @param [ancestor]\n   */\n\n  function getTransform(target, ancestor) {\n    var mat = identity([]);\n\n    while (target && target !== ancestor) {\n      mul$1(mat, target.getLocalTransform(), mat);\n      target = target.parent;\n    }\n\n    return mat;\n  }\n  /**\n   * Apply transform to an vertex.\n   * @param target [x, y]\n   * @param transform Can be:\n   *      + Transform matrix: like [1, 0, 0, 1, 0, 0]\n   *      + {position, rotation, scale}, the same as `zrender/Transformable`.\n   * @param invert Whether use invert matrix.\n   * @return [x, y]\n   */\n\n\n  function applyTransform$1(target, transform, invert$$1) {\n    if (transform && !isArrayLike(transform)) {\n      transform = Transformable.getLocalTransform(transform);\n    }\n\n    if (invert$$1) {\n      transform = invert([], transform);\n    }\n\n    return applyTransform([], target, transform);\n  }\n  /**\n   * @param direction 'left' 'right' 'top' 'bottom'\n   * @param transform Transform matrix: like [1, 0, 0, 1, 0, 0]\n   * @param invert Whether use invert matrix.\n   * @return Transformed direction. 'left' 'right' 'top' 'bottom'\n   */\n\n\n  function transformDirection(direction, transform, invert$$1) {\n    // Pick a base, ensure that transform result will not be (0, 0).\n    var hBase = transform[4] === 0 || transform[5] === 0 || transform[0] === 0 ? 1 : Math.abs(2 * transform[4] / transform[0]);\n    var vBase = transform[4] === 0 || transform[5] === 0 || transform[2] === 0 ? 1 : Math.abs(2 * transform[4] / transform[2]);\n    var vertex = [direction === 'left' ? -hBase : direction === 'right' ? hBase : 0, direction === 'top' ? -vBase : direction === 'bottom' ? vBase : 0];\n    vertex = applyTransform$1(vertex, transform, invert$$1);\n    return Math.abs(vertex[0]) > Math.abs(vertex[1]) ? vertex[0] > 0 ? 'right' : 'left' : vertex[1] > 0 ? 'bottom' : 'top';\n  }\n\n  function isNotGroup(el) {\n    return !el.isGroup;\n  }\n\n  function isPath(el) {\n    return el.shape != null;\n  }\n  /**\n   * Apply group transition animation from g1 to g2.\n   * If no animatableModel, no animation.\n   */\n\n\n  function groupTransition(g1, g2, animatableModel) {\n    if (!g1 || !g2) {\n      return;\n    }\n\n    function getElMap(g) {\n      var elMap = {};\n      g.traverse(function (el) {\n        if (isNotGroup(el) && el.anid) {\n          elMap[el.anid] = el;\n        }\n      });\n      return elMap;\n    }\n\n    function getAnimatableProps(el) {\n      var obj = {\n        x: el.x,\n        y: el.y,\n        rotation: el.rotation\n      };\n\n      if (isPath(el)) {\n        obj.shape = extend({}, el.shape);\n      }\n\n      return obj;\n    }\n\n    var elMap1 = getElMap(g1);\n    g2.traverse(function (el) {\n      if (isNotGroup(el) && el.anid) {\n        var oldEl = elMap1[el.anid];\n\n        if (oldEl) {\n          var newProp = getAnimatableProps(el);\n          el.attr(getAnimatableProps(oldEl));\n          updateProps(el, newProp, animatableModel, getECData(el).dataIndex);\n        }\n      }\n    });\n  }\n\n  function clipPointsByRect(points, rect) {\n    // FIXME: this way migth be incorrect when grpahic clipped by a corner.\n    // and when element have border.\n    return map(points, function (point) {\n      var x = point[0];\n      x = mathMax$3(x, rect.x);\n      x = mathMin$3(x, rect.x + rect.width);\n      var y = point[1];\n      y = mathMax$3(y, rect.y);\n      y = mathMin$3(y, rect.y + rect.height);\n      return [x, y];\n    });\n  }\n  /**\n   * Return a new clipped rect. If rect size are negative, return undefined.\n   */\n\n\n  function clipRectByRect(targetRect, rect) {\n    var x = mathMax$3(targetRect.x, rect.x);\n    var x2 = mathMin$3(targetRect.x + targetRect.width, rect.x + rect.width);\n    var y = mathMax$3(targetRect.y, rect.y);\n    var y2 = mathMin$3(targetRect.y + targetRect.height, rect.y + rect.height); // If the total rect is cliped, nothing, including the border,\n    // should be painted. So return undefined.\n\n    if (x2 >= x && y2 >= y) {\n      return {\n        x: x,\n        y: y,\n        width: x2 - x,\n        height: y2 - y\n      };\n    }\n  }\n\n  function createIcon(iconStr, // Support 'image://' or 'path://' or direct svg path.\n  opt, rect) {\n    var innerOpts = extend({\n      rectHover: true\n    }, opt);\n    var style = innerOpts.style = {\n      strokeNoScale: true\n    };\n    rect = rect || {\n      x: -1,\n      y: -1,\n      width: 2,\n      height: 2\n    };\n\n    if (iconStr) {\n      return iconStr.indexOf('image://') === 0 ? (style.image = iconStr.slice(8), defaults(style, rect), new ZRImage(innerOpts)) : makePath(iconStr.replace('path://', ''), innerOpts, rect, 'center');\n    }\n  }\n  /**\n   * Return `true` if the given line (line `a`) and the given polygon\n   * are intersect.\n   * Note that we do not count colinear as intersect here because no\n   * requirement for that. We could do that if required in future.\n   */\n\n\n  function linePolygonIntersect(a1x, a1y, a2x, a2y, points) {\n    for (var i = 0, p2 = points[points.length - 1]; i < points.length; i++) {\n      var p = points[i];\n\n      if (lineLineIntersect(a1x, a1y, a2x, a2y, p[0], p[1], p2[0], p2[1])) {\n        return true;\n      }\n\n      p2 = p;\n    }\n  }\n  /**\n   * Return `true` if the given two lines (line `a` and line `b`)\n   * are intersect.\n   * Note that we do not count colinear as intersect here because no\n   * requirement for that. We could do that if required in future.\n   */\n\n\n  function lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n    // let `vec_m` to be `vec_a2 - vec_a1` and `vec_n` to be `vec_b2 - vec_b1`.\n    var mx = a2x - a1x;\n    var my = a2y - a1y;\n    var nx = b2x - b1x;\n    var ny = b2y - b1y; // `vec_m` and `vec_n` are parallel iff\n    //     exising `k` such that `vec_m = k · vec_n`, equivalent to `vec_m X vec_n = 0`.\n\n    var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\n\n    if (nearZero(nmCrossProduct)) {\n      return false;\n    } // `vec_m` and `vec_n` are intersect iff\n    //     existing `p` and `q` in [0, 1] such that `vec_a1 + p * vec_m = vec_b1 + q * vec_n`,\n    //     such that `q = ((vec_a1 - vec_b1) X vec_m) / (vec_n X vec_m)`\n    //           and `p = ((vec_a1 - vec_b1) X vec_n) / (vec_n X vec_m)`.\n\n\n    var b1a1x = a1x - b1x;\n    var b1a1y = a1y - b1y;\n    var q = crossProduct2d(b1a1x, b1a1y, mx, my) / nmCrossProduct;\n\n    if (q < 0 || q > 1) {\n      return false;\n    }\n\n    var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\n\n    if (p < 0 || p > 1) {\n      return false;\n    }\n\n    return true;\n  }\n  /**\n   * Cross product of 2-dimension vector.\n   */\n\n\n  function crossProduct2d(x1, y1, x2, y2) {\n    return x1 * y2 - x2 * y1;\n  }\n\n  function nearZero(val) {\n    return val <= 1e-6 && val >= -1e-6;\n  }\n\n  function setTooltipConfig(opt) {\n    var itemTooltipOption = opt.itemTooltipOption;\n    var componentModel = opt.componentModel;\n    var itemName = opt.itemName;\n    var itemTooltipOptionObj = isString(itemTooltipOption) ? {\n      formatter: itemTooltipOption\n    } : itemTooltipOption;\n    var mainType = componentModel.mainType;\n    var componentIndex = componentModel.componentIndex;\n    var formatterParams = {\n      componentType: mainType,\n      name: itemName,\n      $vars: ['name']\n    };\n    formatterParams[mainType + 'Index'] = componentIndex;\n    var formatterParamsExtra = opt.formatterParamsExtra;\n\n    if (formatterParamsExtra) {\n      each(keys(formatterParamsExtra), function (key) {\n        if (!hasOwn(formatterParams, key)) {\n          formatterParams[key] = formatterParamsExtra[key];\n          formatterParams.$vars.push(key);\n        }\n      });\n    }\n\n    var ecData = getECData(opt.el);\n    ecData.componentMainType = mainType;\n    ecData.componentIndex = componentIndex;\n    ecData.tooltipConfig = {\n      name: itemName,\n      option: defaults({\n        content: itemName,\n        formatterParams: formatterParams\n      }, itemTooltipOptionObj)\n    };\n  }\n\n  function traverseElement(el, cb) {\n    var stopped; // TODO\n    // Polyfill for fixing zrender group traverse don't visit it's root issue.\n\n    if (el.isGroup) {\n      stopped = cb(el);\n    }\n\n    if (!stopped) {\n      el.traverse(cb);\n    }\n  }\n\n  function traverseElements(els, cb) {\n    if (els) {\n      if (isArray(els)) {\n        for (var i = 0; i < els.length; i++) {\n          traverseElement(els[i], cb);\n        }\n      } else {\n        traverseElement(els, cb);\n      }\n    }\n  } // Register built-in shapes. These shapes might be overwirtten\n  // by users, although we do not recommend that.\n\n\n  registerShape('circle', Circle);\n  registerShape('ellipse', Ellipse);\n  registerShape('sector', Sector);\n  registerShape('ring', Ring);\n  registerShape('polygon', Polygon);\n  registerShape('polyline', Polyline);\n  registerShape('rect', Rect);\n  registerShape('line', Line);\n  registerShape('bezierCurve', BezierCurve);\n  registerShape('arc', Arc);\n  var graphic = (Object.freeze || Object)({\n    updateProps: updateProps,\n    initProps: initProps,\n    removeElement: removeElement,\n    removeElementWithFadeOut: removeElementWithFadeOut,\n    isElementRemoved: isElementRemoved,\n    extendShape: extendShape,\n    extendPath: extendPath,\n    registerShape: registerShape,\n    getShapeClass: getShapeClass,\n    makePath: makePath,\n    makeImage: makeImage,\n    mergePath: mergePath,\n    resizePath: resizePath,\n    subPixelOptimizeLine: subPixelOptimizeLine$1,\n    subPixelOptimizeRect: subPixelOptimizeRect$1,\n    subPixelOptimize: subPixelOptimize$1,\n    getTransform: getTransform,\n    applyTransform: applyTransform$1,\n    transformDirection: transformDirection,\n    groupTransition: groupTransition,\n    clipPointsByRect: clipPointsByRect,\n    clipRectByRect: clipRectByRect,\n    createIcon: createIcon,\n    linePolygonIntersect: linePolygonIntersect,\n    lineLineIntersect: lineLineIntersect,\n    setTooltipConfig: setTooltipConfig,\n    traverseElements: traverseElements,\n    Group: Group,\n    Image: ZRImage,\n    Text: ZRText,\n    Circle: Circle,\n    Ellipse: Ellipse,\n    Sector: Sector,\n    Ring: Ring,\n    Polygon: Polygon,\n    Polyline: Polyline,\n    Rect: Rect,\n    Line: Line,\n    BezierCurve: BezierCurve,\n    Arc: Arc,\n    IncrementalDisplayable: IncrementalDisplayable,\n    CompoundPath: CompoundPath,\n    LinearGradient: LinearGradient,\n    RadialGradient: RadialGradient,\n    BoundingRect: BoundingRect,\n    OrientedBoundingRect: OrientedBoundingRect,\n    Point: Point,\n    Path: Path\n  });\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var EMPTY_OBJ = {};\n\n  function setLabelText(label, labelTexts) {\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      var text = labelTexts[stateName];\n      var state = label.ensureState(stateName);\n      state.style = state.style || {};\n      state.style.text = text;\n    }\n\n    var oldStates = label.currentStates.slice();\n    label.clearStates(true);\n    label.setStyle({\n      text: labelTexts.normal\n    });\n    label.useStates(oldStates, true);\n  }\n\n  function getLabelText(opt, stateModels, interpolatedValue) {\n    var labelFetcher = opt.labelFetcher;\n    var labelDataIndex = opt.labelDataIndex;\n    var labelDimIndex = opt.labelDimIndex;\n    var normalModel = stateModels.normal;\n    var baseText;\n\n    if (labelFetcher) {\n      baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, normalModel && normalModel.get('formatter'), interpolatedValue != null ? {\n        interpolatedValue: interpolatedValue\n      } : null);\n    }\n\n    if (baseText == null) {\n      baseText = isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt, interpolatedValue) : opt.defaultText;\n    }\n\n    var statesText = {\n      normal: baseText\n    };\n\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      var stateModel = stateModels[stateName];\n      statesText[stateName] = retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, stateName, null, labelDimIndex, stateModel && stateModel.get('formatter')) : null, baseText);\n    }\n\n    return statesText;\n  }\n\n  function setLabelStyle(targetEl, labelStatesModels, opt, stateSpecified // TODO specified position?\n  ) {\n    opt = opt || EMPTY_OBJ;\n    var isSetOnText = targetEl instanceof ZRText;\n    var needsCreateText = false;\n\n    for (var i = 0; i < DISPLAY_STATES.length; i++) {\n      var stateModel = labelStatesModels[DISPLAY_STATES[i]];\n\n      if (stateModel && stateModel.getShallow('show')) {\n        needsCreateText = true;\n        break;\n      }\n    }\n\n    var textContent = isSetOnText ? targetEl : targetEl.getTextContent();\n\n    if (needsCreateText) {\n      if (!isSetOnText) {\n        // Reuse the previous\n        if (!textContent) {\n          textContent = new ZRText();\n          targetEl.setTextContent(textContent);\n        } // Use same state proxy\n\n\n        if (targetEl.stateProxy) {\n          textContent.stateProxy = targetEl.stateProxy;\n        }\n      }\n\n      var labelStatesTexts = getLabelText(opt, labelStatesModels);\n      var normalModel = labelStatesModels.normal;\n      var showNormal = !!normalModel.getShallow('show');\n      var normalStyle = createTextStyle(normalModel, stateSpecified && stateSpecified.normal, opt, false, !isSetOnText);\n      normalStyle.text = labelStatesTexts.normal;\n\n      if (!isSetOnText) {\n        // Always create new\n        targetEl.setTextConfig(createTextConfig(normalModel, opt, false));\n      }\n\n      for (var i = 0; i < SPECIAL_STATES.length; i++) {\n        var stateName = SPECIAL_STATES[i];\n        var stateModel = labelStatesModels[stateName];\n\n        if (stateModel) {\n          var stateObj = textContent.ensureState(stateName);\n          var stateShow = !!retrieve2(stateModel.getShallow('show'), showNormal);\n\n          if (stateShow !== showNormal) {\n            stateObj.ignore = !stateShow;\n          }\n\n          stateObj.style = createTextStyle(stateModel, stateSpecified && stateSpecified[stateName], opt, true, !isSetOnText);\n          stateObj.style.text = labelStatesTexts[stateName];\n\n          if (!isSetOnText) {\n            var targetElEmphasisState = targetEl.ensureState(stateName);\n            targetElEmphasisState.textConfig = createTextConfig(stateModel, opt, true);\n          }\n        }\n      } // PENDING: if there is many requirements that emphasis position\n      // need to be different from normal position, we might consider\n      // auto slient is those cases.\n\n\n      textContent.silent = !!normalModel.getShallow('silent'); // Keep x and y\n\n      if (textContent.style.x != null) {\n        normalStyle.x = textContent.style.x;\n      }\n\n      if (textContent.style.y != null) {\n        normalStyle.y = textContent.style.y;\n      }\n\n      textContent.ignore = !showNormal; // Always create new style.\n\n      textContent.useStyle(normalStyle);\n      textContent.dirty();\n\n      if (opt.enableTextSetter) {\n        labelInner(textContent).setLabelText = function (interpolatedValue) {\n          var labelStatesTexts = getLabelText(opt, labelStatesModels, interpolatedValue);\n          setLabelText(textContent, labelStatesTexts);\n        };\n      }\n    } else if (textContent) {\n      // Not display rich text.\n      textContent.ignore = true;\n    }\n\n    targetEl.dirty();\n  }\n\n  function getLabelStatesModels(itemModel, labelName) {\n    labelName = labelName || 'label';\n    var statesModels = {\n      normal: itemModel.getModel(labelName)\n    };\n\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      statesModels[stateName] = itemModel.getModel([stateName, labelName]);\n    }\n\n    return statesModels;\n  }\n  /**\n   * Set basic textStyle properties.\n   */\n\n\n  function createTextStyle(textStyleModel, specifiedTextStyle, // Fixed style in the code. Can't be set by model.\n  opt, isNotNormal, isAttached // If text is attached on an element. If so, auto color will handling in zrender.\n  ) {\n    var textStyle = {};\n    setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached);\n    specifiedTextStyle && extend(textStyle, specifiedTextStyle); // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n\n    return textStyle;\n  }\n\n  function createTextConfig(textStyleModel, opt, isNotNormal) {\n    opt = opt || {};\n    var textConfig = {};\n    var labelPosition;\n    var labelRotate = textStyleModel.getShallow('rotate');\n    var labelDistance = retrieve2(textStyleModel.getShallow('distance'), isNotNormal ? null : 5);\n    var labelOffset = textStyleModel.getShallow('offset');\n    labelPosition = textStyleModel.getShallow('position') || (isNotNormal ? null : 'inside'); // 'outside' is not a valid zr textPostion value, but used\n    // in bar series, and magric type should be considered.\n\n    labelPosition === 'outside' && (labelPosition = opt.defaultOutsidePosition || 'top');\n\n    if (labelPosition != null) {\n      textConfig.position = labelPosition;\n    }\n\n    if (labelOffset != null) {\n      textConfig.offset = labelOffset;\n    }\n\n    if (labelRotate != null) {\n      labelRotate *= Math.PI / 180;\n      textConfig.rotation = labelRotate;\n    }\n\n    if (labelDistance != null) {\n      textConfig.distance = labelDistance;\n    } // fill and auto is determined by the color of path fill if it's not specified by developers.\n\n\n    textConfig.outsideFill = textStyleModel.get('color') === 'inherit' ? opt.inheritColor || null : 'auto';\n    return textConfig;\n  }\n  /**\n   * The uniform entry of set text style, that is, retrieve style definitions\n   * from `model` and set to `textStyle` object.\n   *\n   * Never in merge mode, but in overwrite mode, that is, all of the text style\n   * properties will be set. (Consider the states of normal and emphasis and\n   * default value can be adopted, merge would make the logic too complicated\n   * to manage.)\n   */\n\n\n  function setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached) {\n    // Consider there will be abnormal when merge hover style to normal style if given default value.\n    opt = opt || EMPTY_OBJ;\n    var ecModel = textStyleModel.ecModel;\n    var globalTextStyle = ecModel && ecModel.option.textStyle; // Consider case:\n    // {\n    //     data: [{\n    //         value: 12,\n    //         label: {\n    //             rich: {\n    //                 // no 'a' here but using parent 'a'.\n    //             }\n    //         }\n    //     }],\n    //     rich: {\n    //         a: { ... }\n    //     }\n    // }\n\n    var richItemNames = getRichItemNames(textStyleModel);\n    var richResult;\n\n    if (richItemNames) {\n      richResult = {};\n\n      for (var name_1 in richItemNames) {\n        if (richItemNames.hasOwnProperty(name_1)) {\n          // Cascade is supported in rich.\n          var richTextStyle = textStyleModel.getModel(['rich', name_1]); // In rich, never `disableBox`.\n          // FIXME: consider `label: {formatter: '{a|xx}', color: 'blue', rich: {a: {}}}`,\n          // the default color `'blue'` will not be adopted if no color declared in `rich`.\n          // That might confuses users. So probably we should put `textStyleModel` as the\n          // root ancestor of the `richTextStyle`. But that would be a break change.\n\n          setTokenTextStyle(richResult[name_1] = {}, richTextStyle, globalTextStyle, opt, isNotNormal, isAttached, false, true);\n        }\n      }\n    }\n\n    if (richResult) {\n      textStyle.rich = richResult;\n    }\n\n    var overflow = textStyleModel.get('overflow');\n\n    if (overflow) {\n      textStyle.overflow = overflow;\n    }\n\n    var margin = textStyleModel.get('minMargin');\n\n    if (margin != null) {\n      textStyle.margin = margin;\n    }\n\n    setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, true, false);\n  } // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             rich: {\n  //                 // no 'a' here but using parent 'a'.\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n  // TODO TextStyleModel\n\n\n  function getRichItemNames(textStyleModel) {\n    // Use object to remove duplicated names.\n    var richItemNameMap;\n\n    while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n      var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n\n      if (rich) {\n        richItemNameMap = richItemNameMap || {};\n        var richKeys = keys(rich);\n\n        for (var i = 0; i < richKeys.length; i++) {\n          var richKey = richKeys[i];\n          richItemNameMap[richKey] = 1;\n        }\n      }\n\n      textStyleModel = textStyleModel.parentModel;\n    }\n\n    return richItemNameMap;\n  }\n\n  var TEXT_PROPS_WITH_GLOBAL = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'];\n  var TEXT_PROPS_SELF = ['align', 'lineHeight', 'width', 'height', 'tag', 'verticalAlign'];\n  var TEXT_PROPS_BOX = ['padding', 'borderWidth', 'borderRadius', 'borderDashOffset', 'backgroundColor', 'borderColor', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n\n  function setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, isBlock, inRich) {\n    // In merge mode, default value should not be given.\n    globalTextStyle = !isNotNormal && globalTextStyle || EMPTY_OBJ;\n    var inheritColor = opt && opt.inheritColor;\n    var fillColor = textStyleModel.getShallow('color');\n    var strokeColor = textStyleModel.getShallow('textBorderColor');\n    var opacity = retrieve2(textStyleModel.getShallow('opacity'), globalTextStyle.opacity);\n\n    if (fillColor === 'inherit' || fillColor === 'auto') {\n      {\n        if (fillColor === 'auto') {\n          deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n        }\n      }\n\n      if (inheritColor) {\n        fillColor = inheritColor;\n      } else {\n        fillColor = null;\n      }\n    }\n\n    if (strokeColor === 'inherit' || strokeColor === 'auto') {\n      {\n        if (strokeColor === 'auto') {\n          deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n        }\n      }\n\n      if (inheritColor) {\n        strokeColor = inheritColor;\n      } else {\n        strokeColor = null;\n      }\n    }\n\n    if (!isAttached) {\n      // Only use default global textStyle.color if text is individual.\n      // Otherwise it will use the strategy of attached text color because text may be on a path.\n      fillColor = fillColor || globalTextStyle.color;\n      strokeColor = strokeColor || globalTextStyle.textBorderColor;\n    }\n\n    if (fillColor != null) {\n      textStyle.fill = fillColor;\n    }\n\n    if (strokeColor != null) {\n      textStyle.stroke = strokeColor;\n    }\n\n    var textBorderWidth = retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n\n    if (textBorderWidth != null) {\n      textStyle.lineWidth = textBorderWidth;\n    }\n\n    var textBorderType = retrieve2(textStyleModel.getShallow('textBorderType'), globalTextStyle.textBorderType);\n\n    if (textBorderType != null) {\n      textStyle.lineDash = textBorderType;\n    }\n\n    var textBorderDashOffset = retrieve2(textStyleModel.getShallow('textBorderDashOffset'), globalTextStyle.textBorderDashOffset);\n\n    if (textBorderDashOffset != null) {\n      textStyle.lineDashOffset = textBorderDashOffset;\n    }\n\n    if (!isNotNormal && opacity == null && !inRich) {\n      opacity = opt && opt.defaultOpacity;\n    }\n\n    if (opacity != null) {\n      textStyle.opacity = opacity;\n    } // TODO\n\n\n    if (!isNotNormal && !isAttached) {\n      // Set default finally.\n      if (textStyle.fill == null && opt.inheritColor) {\n        textStyle.fill = opt.inheritColor;\n      }\n    } // Do not use `getFont` here, because merge should be supported, where\n    // part of these properties may be changed in emphasis style, and the\n    // others should remain their original value got from normal style.\n\n\n    for (var i = 0; i < TEXT_PROPS_WITH_GLOBAL.length; i++) {\n      var key = TEXT_PROPS_WITH_GLOBAL[i];\n      var val = retrieve2(textStyleModel.getShallow(key), globalTextStyle[key]);\n\n      if (val != null) {\n        textStyle[key] = val;\n      }\n    }\n\n    for (var i = 0; i < TEXT_PROPS_SELF.length; i++) {\n      var key = TEXT_PROPS_SELF[i];\n      var val = textStyleModel.getShallow(key);\n\n      if (val != null) {\n        textStyle[key] = val;\n      }\n    }\n\n    if (textStyle.verticalAlign == null) {\n      var baseline = textStyleModel.getShallow('baseline');\n\n      if (baseline != null) {\n        textStyle.verticalAlign = baseline;\n      }\n    }\n\n    if (!isBlock || !opt.disableBox) {\n      for (var i = 0; i < TEXT_PROPS_BOX.length; i++) {\n        var key = TEXT_PROPS_BOX[i];\n        var val = textStyleModel.getShallow(key);\n\n        if (val != null) {\n          textStyle[key] = val;\n        }\n      }\n\n      var borderType = textStyleModel.getShallow('borderType');\n\n      if (borderType != null) {\n        textStyle.borderDash = borderType;\n      }\n\n      if ((textStyle.backgroundColor === 'auto' || textStyle.backgroundColor === 'inherit') && inheritColor) {\n        {\n          if (textStyle.backgroundColor === 'auto') {\n            deprecateReplaceLog('backgroundColor: \\'auto\\'', 'backgroundColor: \\'inherit\\'');\n          }\n        }\n        textStyle.backgroundColor = inheritColor;\n      }\n\n      if ((textStyle.borderColor === 'auto' || textStyle.borderColor === 'inherit') && inheritColor) {\n        {\n          if (textStyle.borderColor === 'auto') {\n            deprecateReplaceLog('borderColor: \\'auto\\'', 'borderColor: \\'inherit\\'');\n          }\n        }\n        textStyle.borderColor = inheritColor;\n      }\n    }\n  }\n\n  function getFont(opt, ecModel) {\n    var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\n    return trim([// FIXME in node-canvas fontWeight is before fontStyle\n    opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\n  }\n\n  var labelInner = makeInner();\n\n  function setLabelValueAnimation(label, labelStatesModels, value, getDefaultText) {\n    if (!label) {\n      return;\n    }\n\n    var obj = labelInner(label);\n    obj.prevValue = obj.value;\n    obj.value = value;\n    var normalLabelModel = labelStatesModels.normal;\n    obj.valueAnimation = normalLabelModel.get('valueAnimation');\n\n    if (obj.valueAnimation) {\n      obj.precision = normalLabelModel.get('precision');\n      obj.defaultInterpolatedText = getDefaultText;\n      obj.statesModels = labelStatesModels;\n    }\n  }\n\n  function animateLabelValue(textEl, dataIndex, data, animatableModel, labelFetcher) {\n    var labelInnerStore = labelInner(textEl);\n\n    if (!labelInnerStore.valueAnimation || labelInnerStore.prevValue === labelInnerStore.value) {\n      // Value not changed, no new label animation\n      return;\n    }\n\n    var defaultInterpolatedText = labelInnerStore.defaultInterpolatedText; // Consider the case that being animating, do not use the `obj.value`,\n    // Otherwise it will jump to the `obj.value` when this new animation started.\n\n    var currValue = retrieve2(labelInnerStore.interpolatedValue, labelInnerStore.prevValue);\n    var targetValue = labelInnerStore.value;\n\n    function during(percent) {\n      var interpolated = interpolateRawValues(data, labelInnerStore.precision, currValue, targetValue, percent);\n      labelInnerStore.interpolatedValue = percent === 1 ? null : interpolated;\n      var labelText = getLabelText({\n        labelDataIndex: dataIndex,\n        labelFetcher: labelFetcher,\n        defaultText: defaultInterpolatedText ? defaultInterpolatedText(interpolated) : interpolated + ''\n      }, labelInnerStore.statesModels, interpolated);\n      setLabelText(textEl, labelText);\n    }\n\n    textEl.percent = 0;\n    (labelInnerStore.prevValue == null ? initProps : updateProps)(textEl, {\n      // percent is used to prevent animation from being aborted #15916\n      percent: 1\n    }, animatableModel, dataIndex, null, during);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var PATH_COLOR = ['textStyle', 'color'];\n  var textStyleParams = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'padding', 'lineHeight', 'rich', 'width', 'height', 'overflow']; // TODO Performance improvement?\n\n  var tmpText = new ZRText();\n\n  var TextStyleMixin =\n  /** @class */\n  function () {\n    function TextStyleMixin() {}\n    /**\n     * Get color property or get color from option.textStyle.color\n     */\n    // TODO Callback\n\n\n    TextStyleMixin.prototype.getTextColor = function (isEmphasis) {\n      var ecModel = this.ecModel;\n      return this.getShallow('color') || (!isEmphasis && ecModel ? ecModel.get(PATH_COLOR) : null);\n    };\n    /**\n     * Create font string from fontStyle, fontWeight, fontSize, fontFamily\n     * @return {string}\n     */\n\n\n    TextStyleMixin.prototype.getFont = function () {\n      return getFont({\n        fontStyle: this.getShallow('fontStyle'),\n        fontWeight: this.getShallow('fontWeight'),\n        fontSize: this.getShallow('fontSize'),\n        fontFamily: this.getShallow('fontFamily')\n      }, this.ecModel);\n    };\n\n    TextStyleMixin.prototype.getTextRect = function (text) {\n      var style = {\n        text: text,\n        verticalAlign: this.getShallow('verticalAlign') || this.getShallow('baseline')\n      };\n\n      for (var i = 0; i < textStyleParams.length; i++) {\n        style[textStyleParams[i]] = this.getShallow(textStyleParams[i]);\n      }\n\n      tmpText.useStyle(style);\n      tmpText.update();\n      return tmpText.getBoundingRect();\n    };\n\n    return TextStyleMixin;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var LINE_STYLE_KEY_MAP = [['lineWidth', 'width'], ['stroke', 'color'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['lineDash', 'type'], ['lineDashOffset', 'dashOffset'], ['lineCap', 'cap'], ['lineJoin', 'join'], ['miterLimit'] // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n  // So do not transfer decal directly.\n  ];\n  var getLineStyle = makeStyleMapper(LINE_STYLE_KEY_MAP);\n\n  var LineStyleMixin =\n  /** @class */\n  function () {\n    function LineStyleMixin() {}\n\n    LineStyleMixin.prototype.getLineStyle = function (excludes) {\n      return getLineStyle(this, excludes);\n    };\n\n    return LineStyleMixin;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var ITEM_STYLE_KEY_MAP = [['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['lineDash', 'borderType'], ['lineDashOffset', 'borderDashOffset'], ['lineCap', 'borderCap'], ['lineJoin', 'borderJoin'], ['miterLimit', 'borderMiterLimit'] // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n  // So do not transfer decal directly.\n  ];\n  var getItemStyle = makeStyleMapper(ITEM_STYLE_KEY_MAP);\n\n  var ItemStyleMixin =\n  /** @class */\n  function () {\n    function ItemStyleMixin() {}\n\n    ItemStyleMixin.prototype.getItemStyle = function (excludes, includes) {\n      return getItemStyle(this, excludes, includes);\n    };\n\n    return ItemStyleMixin;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var Model =\n  /** @class */\n  function () {\n    function Model(option, parentModel, ecModel) {\n      this.parentModel = parentModel;\n      this.ecModel = ecModel;\n      this.option = option; // Simple optimization\n      // if (this.init) {\n      //     if (arguments.length <= 4) {\n      //         this.init(option, parentModel, ecModel, extraOpt);\n      //     }\n      //     else {\n      //         this.init.apply(this, arguments);\n      //     }\n      // }\n    }\n\n    Model.prototype.init = function (option, parentModel, ecModel) {\n      var rest = [];\n\n      for (var _i = 3; _i < arguments.length; _i++) {\n        rest[_i - 3] = arguments[_i];\n      }\n    };\n    /**\n     * Merge the input option to me.\n     */\n\n\n    Model.prototype.mergeOption = function (option, ecModel) {\n      merge(this.option, option, true);\n    }; // `path` can be 'a.b.c', so the return value type have to be `ModelOption`\n    // TODO: TYPE strict key check?\n    // get(path: string | string[], ignoreParent?: boolean): ModelOption;\n\n\n    Model.prototype.get = function (path, ignoreParent) {\n      if (path == null) {\n        return this.option;\n      }\n\n      return this._doGet(this.parsePath(path), !ignoreParent && this.parentModel);\n    };\n\n    Model.prototype.getShallow = function (key, ignoreParent) {\n      var option = this.option;\n      var val = option == null ? option : option[key];\n\n      if (val == null && !ignoreParent) {\n        var parentModel = this.parentModel;\n\n        if (parentModel) {\n          // FIXME:TS do not know how to make it works\n          val = parentModel.getShallow(key);\n        }\n      }\n\n      return val;\n    }; // `path` can be 'a.b.c', so the return value type have to be `Model<ModelOption>`\n    // getModel(path: string | string[], parentModel?: Model): Model;\n    // TODO 'a.b.c' is deprecated\n\n\n    Model.prototype.getModel = function (path, parentModel) {\n      var hasPath = path != null;\n      var pathFinal = hasPath ? this.parsePath(path) : null;\n      var obj = hasPath ? this._doGet(pathFinal) : this.option;\n      parentModel = parentModel || this.parentModel && this.parentModel.getModel(this.resolveParentPath(pathFinal));\n      return new Model(obj, parentModel, this.ecModel);\n    };\n    /**\n     * If model has option\n     */\n\n\n    Model.prototype.isEmpty = function () {\n      return this.option == null;\n    };\n\n    Model.prototype.restoreData = function () {}; // Pending\n\n\n    Model.prototype.clone = function () {\n      var Ctor = this.constructor;\n      return new Ctor(clone(this.option));\n    }; // setReadOnly(properties): void {\n    // clazzUtil.setReadOnly(this, properties);\n    // }\n    // If path is null/undefined, return null/undefined.\n\n\n    Model.prototype.parsePath = function (path) {\n      if (typeof path === 'string') {\n        return path.split('.');\n      }\n\n      return path;\n    }; // Resolve path for parent. Perhaps useful when parent use a different property.\n    // Default to be a identity resolver.\n    // Can be modified to a different resolver.\n\n\n    Model.prototype.resolveParentPath = function (path) {\n      return path;\n    }; // FIXME:TS check whether put this method here\n\n\n    Model.prototype.isAnimationEnabled = function () {\n      if (!env.node && this.option) {\n        if (this.option.animation != null) {\n          return !!this.option.animation;\n        } else if (this.parentModel) {\n          return this.parentModel.isAnimationEnabled();\n        }\n      }\n    };\n\n    Model.prototype._doGet = function (pathArr, parentModel) {\n      var obj = this.option;\n\n      if (!pathArr) {\n        return obj;\n      }\n\n      for (var i = 0; i < pathArr.length; i++) {\n        // Ignore empty\n        if (!pathArr[i]) {\n          continue;\n        } // obj could be number/string/... (like 0)\n\n\n        obj = obj && typeof obj === 'object' ? obj[pathArr[i]] : null;\n\n        if (obj == null) {\n          break;\n        }\n      }\n\n      if (obj == null && parentModel) {\n        obj = parentModel._doGet(this.resolveParentPath(pathArr), parentModel.parentModel);\n      }\n\n      return obj;\n    };\n\n    return Model;\n  }(); // Enable Model.extend.\n\n\n  enableClassExtend(Model);\n  enableClassCheck(Model);\n  mixin(Model, LineStyleMixin);\n  mixin(Model, ItemStyleMixin);\n  mixin(Model, AreaStyleMixin);\n  mixin(Model, TextStyleMixin);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var base = Math.round(Math.random() * 10);\n  /**\n   * @public\n   * @param {string} type\n   * @return {string}\n   */\n\n  function getUID(type) {\n    // Considering the case of crossing js context,\n    // use Math.random to make id as unique as possible.\n    return [type || '', base++].join('_');\n  }\n  /**\n   * Implements `SubTypeDefaulterManager` for `target`.\n   */\n\n\n  function enableSubTypeDefaulter(target) {\n    var subTypeDefaulters = {};\n\n    target.registerSubTypeDefaulter = function (componentType, defaulter) {\n      var componentTypeInfo = parseClassType(componentType);\n      subTypeDefaulters[componentTypeInfo.main] = defaulter;\n    };\n\n    target.determineSubType = function (componentType, option) {\n      var type = option.type;\n\n      if (!type) {\n        var componentTypeMain = parseClassType(componentType).main;\n\n        if (target.hasSubTypes(componentType) && subTypeDefaulters[componentTypeMain]) {\n          type = subTypeDefaulters[componentTypeMain](option);\n        }\n      }\n\n      return type;\n    };\n  }\n  /**\n   * Implements `TopologicalTravelable<any>` for `entity`.\n   *\n   * Topological travel on Activity Network (Activity On Vertices).\n   * Dependencies is defined in Model.prototype.dependencies, like ['xAxis', 'yAxis'].\n   * If 'xAxis' or 'yAxis' is absent in componentTypeList, just ignore it in topology.\n   * If there is circular dependencey, Error will be thrown.\n   */\n\n\n  function enableTopologicalTravel(entity, dependencyGetter) {\n    /**\n     * @param targetNameList Target Component type list.\n     *                       Can be ['aa', 'bb', 'aa.xx']\n     * @param fullNameList By which we can build dependency graph.\n     * @param callback Params: componentType, dependencies.\n     * @param context Scope of callback.\n     */\n    entity.topologicalTravel = function (targetNameList, fullNameList, callback, context) {\n      if (!targetNameList.length) {\n        return;\n      }\n\n      var result = makeDepndencyGraph(fullNameList);\n      var graph = result.graph;\n      var noEntryList = result.noEntryList;\n      var targetNameSet = {};\n      each(targetNameList, function (name) {\n        targetNameSet[name] = true;\n      });\n\n      while (noEntryList.length) {\n        var currComponentType = noEntryList.pop();\n        var currVertex = graph[currComponentType];\n        var isInTargetNameSet = !!targetNameSet[currComponentType];\n\n        if (isInTargetNameSet) {\n          callback.call(context, currComponentType, currVertex.originalDeps.slice());\n          delete targetNameSet[currComponentType];\n        }\n\n        each(currVertex.successor, isInTargetNameSet ? removeEdgeAndAdd : removeEdge);\n      }\n\n      each(targetNameSet, function () {\n        var errMsg = '';\n        {\n          errMsg = makePrintable('Circular dependency may exists: ', targetNameSet, targetNameList, fullNameList);\n        }\n        throw new Error(errMsg);\n      });\n\n      function removeEdge(succComponentType) {\n        graph[succComponentType].entryCount--;\n\n        if (graph[succComponentType].entryCount === 0) {\n          noEntryList.push(succComponentType);\n        }\n      } // Consider this case: legend depends on series, and we call\n      // chart.setOption({series: [...]}), where only series is in option.\n      // If we do not have 'removeEdgeAndAdd', legendModel.mergeOption will\n      // not be called, but only sereis.mergeOption is called. Thus legend\n      // have no chance to update its local record about series (like which\n      // name of series is available in legend).\n\n\n      function removeEdgeAndAdd(succComponentType) {\n        targetNameSet[succComponentType] = true;\n        removeEdge(succComponentType);\n      }\n    };\n\n    function makeDepndencyGraph(fullNameList) {\n      var graph = {};\n      var noEntryList = [];\n      each(fullNameList, function (name) {\n        var thisItem = createDependencyGraphItem(graph, name);\n        var originalDeps = thisItem.originalDeps = dependencyGetter(name);\n        var availableDeps = getAvailableDependencies(originalDeps, fullNameList);\n        thisItem.entryCount = availableDeps.length;\n\n        if (thisItem.entryCount === 0) {\n          noEntryList.push(name);\n        }\n\n        each(availableDeps, function (dependentName) {\n          if (indexOf(thisItem.predecessor, dependentName) < 0) {\n            thisItem.predecessor.push(dependentName);\n          }\n\n          var thatItem = createDependencyGraphItem(graph, dependentName);\n\n          if (indexOf(thatItem.successor, dependentName) < 0) {\n            thatItem.successor.push(name);\n          }\n        });\n      });\n      return {\n        graph: graph,\n        noEntryList: noEntryList\n      };\n    }\n\n    function createDependencyGraphItem(graph, name) {\n      if (!graph[name]) {\n        graph[name] = {\n          predecessor: [],\n          successor: []\n        };\n      }\n\n      return graph[name];\n    }\n\n    function getAvailableDependencies(originalDeps, fullNameList) {\n      var availableDeps = [];\n      each(originalDeps, function (dep) {\n        indexOf(fullNameList, dep) >= 0 && availableDeps.push(dep);\n      });\n      return availableDeps;\n    }\n  }\n\n  function inheritDefaultOption(superOption, subOption) {\n    // See also `model/Component.ts#getDefaultOption`\n    return merge(merge({}, superOption, true), subOption, true);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Language: English.\n   */\n\n\n  var langEN = {\n    time: {\n      month: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n      monthAbbr: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n      dayOfWeek: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n      dayOfWeekAbbr: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n    },\n    legend: {\n      selector: {\n        all: 'All',\n        inverse: 'Inv'\n      }\n    },\n    toolbox: {\n      brush: {\n        title: {\n          rect: 'Box Select',\n          polygon: 'Lasso Select',\n          lineX: 'Horizontally Select',\n          lineY: 'Vertically Select',\n          keep: 'Keep Selections',\n          clear: 'Clear Selections'\n        }\n      },\n      dataView: {\n        title: 'Data View',\n        lang: ['Data View', 'Close', 'Refresh']\n      },\n      dataZoom: {\n        title: {\n          zoom: 'Zoom',\n          back: 'Zoom Reset'\n        }\n      },\n      magicType: {\n        title: {\n          line: 'Switch to Line Chart',\n          bar: 'Switch to Bar Chart',\n          stack: 'Stack',\n          tiled: 'Tile'\n        }\n      },\n      restore: {\n        title: 'Restore'\n      },\n      saveAsImage: {\n        title: 'Save as Image',\n        lang: ['Right Click to Save Image']\n      }\n    },\n    series: {\n      typeNames: {\n        pie: 'Pie chart',\n        bar: 'Bar chart',\n        line: 'Line chart',\n        scatter: 'Scatter plot',\n        effectScatter: 'Ripple scatter plot',\n        radar: 'Radar chart',\n        tree: 'Tree',\n        treemap: 'Treemap',\n        boxplot: 'Boxplot',\n        candlestick: 'Candlestick',\n        k: 'K line chart',\n        heatmap: 'Heat map',\n        map: 'Map',\n        parallel: 'Parallel coordinate map',\n        lines: 'Line graph',\n        graph: 'Relationship graph',\n        sankey: 'Sankey diagram',\n        funnel: 'Funnel chart',\n        gauge: 'Gauge',\n        pictorialBar: 'Pictorial bar',\n        themeRiver: 'Theme River Map',\n        sunburst: 'Sunburst'\n      }\n    },\n    aria: {\n      general: {\n        withTitle: 'This is a chart about \"{title}\"',\n        withoutTitle: 'This is a chart'\n      },\n      series: {\n        single: {\n          prefix: '',\n          withName: ' with type {seriesType} named {seriesName}.',\n          withoutName: ' with type {seriesType}.'\n        },\n        multiple: {\n          prefix: '. It consists of {seriesCount} series count.',\n          withName: ' The {seriesId} series is a {seriesType} representing {seriesName}.',\n          withoutName: ' The {seriesId} series is a {seriesType}.',\n          separator: {\n            middle: '',\n            end: ''\n          }\n        }\n      },\n      data: {\n        allData: 'The data is as follows: ',\n        partialData: 'The first {displayCnt} items are: ',\n        withName: 'the data for {name} is {value}',\n        withoutName: '{value}',\n        separator: {\n          middle: ', ',\n          end: '. '\n        }\n      }\n    }\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n   * Licensed to the Apache Software Foundation (ASF) under one\n   * or more contributor license agreements.  See the NOTICE file\n   * distributed with this work for additional information\n   * regarding copyright ownership.  The ASF licenses this file\n   * to you under the Apache License, Version 2.0 (the\n   * \"License\"); you may not use this file except in compliance\n   * with the License.  You may obtain a copy of the License at\n   *\n   *   http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing,\n   * software distributed under the License is distributed on an\n   * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n   * KIND, either express or implied.  See the License for the\n   * specific language governing permissions and limitations\n   * under the License.\n   */\n\n  var langZH = {\n    time: {\n      month: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],\n      monthAbbr: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\n      dayOfWeek: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],\n      dayOfWeekAbbr: ['日', '一', '二', '三', '四', '五', '六']\n    },\n    legend: {\n      selector: {\n        all: '全选',\n        inverse: '反选'\n      }\n    },\n    toolbox: {\n      brush: {\n        title: {\n          rect: '矩形选择',\n          polygon: '圈选',\n          lineX: '横向选择',\n          lineY: '纵向选择',\n          keep: '保持选择',\n          clear: '清除选择'\n        }\n      },\n      dataView: {\n        title: '数据视图',\n        lang: ['数据视图', '关闭', '刷新']\n      },\n      dataZoom: {\n        title: {\n          zoom: '区域缩放',\n          back: '区域缩放还原'\n        }\n      },\n      magicType: {\n        title: {\n          line: '切换为折线图',\n          bar: '切换为柱状图',\n          stack: '切换为堆叠',\n          tiled: '切换为平铺'\n        }\n      },\n      restore: {\n        title: '还原'\n      },\n      saveAsImage: {\n        title: '保存为图片',\n        lang: ['右键另存为图片']\n      }\n    },\n    series: {\n      typeNames: {\n        pie: '饼图',\n        bar: '柱状图',\n        line: '折线图',\n        scatter: '散点图',\n        effectScatter: '涟漪散点图',\n        radar: '雷达图',\n        tree: '树图',\n        treemap: '矩形树图',\n        boxplot: '箱型图',\n        candlestick: 'K线图',\n        k: 'K线图',\n        heatmap: '热力图',\n        map: '地图',\n        parallel: '平行坐标图',\n        lines: '线图',\n        graph: '关系图',\n        sankey: '桑基图',\n        funnel: '漏斗图',\n        gauge: '仪表盘图',\n        pictorialBar: '象形柱图',\n        themeRiver: '主题河流图',\n        sunburst: '旭日图'\n      }\n    },\n    aria: {\n      general: {\n        withTitle: '这是一个关于“{title}”的图表。',\n        withoutTitle: '这是一个图表，'\n      },\n      series: {\n        single: {\n          prefix: '',\n          withName: '图表类型是{seriesType}，表示{seriesName}。',\n          withoutName: '图表类型是{seriesType}。'\n        },\n        multiple: {\n          prefix: '它由{seriesCount}个图表系列组成。',\n          withName: '第{seriesId}个系列是一个表示{seriesName}的{seriesType}，',\n          withoutName: '第{seriesId}个系列是一个{seriesType}，',\n          separator: {\n            middle: '；',\n            end: '。'\n          }\n        }\n      },\n      data: {\n        allData: '其数据是——',\n        partialData: '其中，前{displayCnt}项是——',\n        withName: '{name}的数据是{value}',\n        withoutName: '{value}',\n        separator: {\n          middle: '，',\n          end: ''\n        }\n      }\n    }\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var LOCALE_ZH = 'ZH';\n  var LOCALE_EN = 'EN';\n  var DEFAULT_LOCALE = LOCALE_EN;\n  var localeStorage = {};\n  var localeModels = {};\n  var SYSTEM_LANG = !env.domSupported ? DEFAULT_LOCALE : function () {\n    var langStr = (\n    /* eslint-disable-next-line */\n    document.documentElement.lang || navigator.language || navigator.browserLanguage).toUpperCase();\n    return langStr.indexOf(LOCALE_ZH) > -1 ? LOCALE_ZH : DEFAULT_LOCALE;\n  }();\n\n  function registerLocale(locale, localeObj) {\n    locale = locale.toUpperCase();\n    localeModels[locale] = new Model(localeObj);\n    localeStorage[locale] = localeObj;\n  } // export function getLocale(locale: string) {\n  //     return localeStorage[locale];\n  // }\n\n\n  function createLocaleObject(locale) {\n    if (isString(locale)) {\n      var localeObj = localeStorage[locale.toUpperCase()] || {};\n\n      if (locale === LOCALE_ZH || locale === LOCALE_EN) {\n        return clone(localeObj);\n      } else {\n        return merge(clone(localeObj), clone(localeStorage[DEFAULT_LOCALE]), false);\n      }\n    } else {\n      return merge(clone(locale), clone(localeStorage[DEFAULT_LOCALE]), false);\n    }\n  }\n\n  function getLocaleModel(lang) {\n    return localeModels[lang];\n  }\n\n  function getDefaultLocaleModel() {\n    return localeModels[DEFAULT_LOCALE];\n  } // Default locale\n\n\n  registerLocale(LOCALE_EN, langEN);\n  registerLocale(LOCALE_ZH, langZH);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var ONE_SECOND = 1000;\n  var ONE_MINUTE = ONE_SECOND * 60;\n  var ONE_HOUR = ONE_MINUTE * 60;\n  var ONE_DAY = ONE_HOUR * 24;\n  var ONE_YEAR = ONE_DAY * 365;\n  var defaultLeveledFormatter = {\n    year: '{yyyy}',\n    month: '{MMM}',\n    day: '{d}',\n    hour: '{HH}:{mm}',\n    minute: '{HH}:{mm}',\n    second: '{HH}:{mm}:{ss}',\n    millisecond: '{HH}:{mm}:{ss} {SSS}',\n    none: '{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}'\n  };\n  var fullDayFormatter = '{yyyy}-{MM}-{dd}';\n  var fullLeveledFormatter = {\n    year: '{yyyy}',\n    month: '{yyyy}-{MM}',\n    day: fullDayFormatter,\n    hour: fullDayFormatter + ' ' + defaultLeveledFormatter.hour,\n    minute: fullDayFormatter + ' ' + defaultLeveledFormatter.minute,\n    second: fullDayFormatter + ' ' + defaultLeveledFormatter.second,\n    millisecond: defaultLeveledFormatter.none\n  };\n  var primaryTimeUnits = ['year', 'month', 'day', 'hour', 'minute', 'second', 'millisecond'];\n  var timeUnits = ['year', 'half-year', 'quarter', 'month', 'week', 'half-week', 'day', 'half-day', 'quarter-day', 'hour', 'minute', 'second', 'millisecond'];\n\n  function pad(str, len) {\n    str += '';\n    return '0000'.substr(0, len - str.length) + str;\n  }\n\n  function getPrimaryTimeUnit(timeUnit) {\n    switch (timeUnit) {\n      case 'half-year':\n      case 'quarter':\n        return 'month';\n\n      case 'week':\n      case 'half-week':\n        return 'day';\n\n      case 'half-day':\n      case 'quarter-day':\n        return 'hour';\n\n      default:\n        // year, minutes, second, milliseconds\n        return timeUnit;\n    }\n  }\n\n  function isPrimaryTimeUnit(timeUnit) {\n    return timeUnit === getPrimaryTimeUnit(timeUnit);\n  }\n\n  function getDefaultFormatPrecisionOfInterval(timeUnit) {\n    switch (timeUnit) {\n      case 'year':\n      case 'month':\n        return 'day';\n\n      case 'millisecond':\n        return 'millisecond';\n\n      default:\n        // Also for day, hour, minute, second\n        return 'second';\n    }\n  }\n\n  function format( // Note: The result based on `isUTC` are totally different, which can not be just simply\n  // substituted by the result without `isUTC`. So we make the param `isUTC` mandatory.\n  time, template, isUTC, lang) {\n    var date = parseDate(time);\n    var y = date[fullYearGetterName(isUTC)]();\n    var M = date[monthGetterName(isUTC)]() + 1;\n    var q = Math.floor((M - 1) / 3) + 1;\n    var d = date[dateGetterName(isUTC)]();\n    var e = date['get' + (isUTC ? 'UTC' : '') + 'Day']();\n    var H = date[hoursGetterName(isUTC)]();\n    var h = (H - 1) % 12 + 1;\n    var m = date[minutesGetterName(isUTC)]();\n    var s = date[secondsGetterName(isUTC)]();\n    var S = date[millisecondsGetterName(isUTC)]();\n    var localeModel = lang instanceof Model ? lang : getLocaleModel(lang || SYSTEM_LANG) || getDefaultLocaleModel();\n    var timeModel = localeModel.getModel('time');\n    var month = timeModel.get('month');\n    var monthAbbr = timeModel.get('monthAbbr');\n    var dayOfWeek = timeModel.get('dayOfWeek');\n    var dayOfWeekAbbr = timeModel.get('dayOfWeekAbbr');\n    return (template || '').replace(/{yyyy}/g, y + '').replace(/{yy}/g, y % 100 + '').replace(/{Q}/g, q + '').replace(/{MMMM}/g, month[M - 1]).replace(/{MMM}/g, monthAbbr[M - 1]).replace(/{MM}/g, pad(M, 2)).replace(/{M}/g, M + '').replace(/{dd}/g, pad(d, 2)).replace(/{d}/g, d + '').replace(/{eeee}/g, dayOfWeek[e]).replace(/{ee}/g, dayOfWeekAbbr[e]).replace(/{e}/g, e + '').replace(/{HH}/g, pad(H, 2)).replace(/{H}/g, H + '').replace(/{hh}/g, pad(h + '', 2)).replace(/{h}/g, h + '').replace(/{mm}/g, pad(m, 2)).replace(/{m}/g, m + '').replace(/{ss}/g, pad(s, 2)).replace(/{s}/g, s + '').replace(/{SSS}/g, pad(S, 3)).replace(/{S}/g, S + '');\n  }\n\n  function leveledFormat(tick, idx, formatter, lang, isUTC) {\n    var template = null;\n\n    if (isString(formatter)) {\n      // Single formatter for all units at all levels\n      template = formatter;\n    } else if (isFunction(formatter)) {\n      // Callback formatter\n      template = formatter(tick.value, idx, {\n        level: tick.level\n      });\n    } else {\n      var defaults$$1 = extend({}, defaultLeveledFormatter);\n\n      if (tick.level > 0) {\n        for (var i = 0; i < primaryTimeUnits.length; ++i) {\n          defaults$$1[primaryTimeUnits[i]] = \"{primary|\" + defaults$$1[primaryTimeUnits[i]] + \"}\";\n        }\n      }\n\n      var mergedFormatter = formatter ? formatter.inherit === false ? formatter // Use formatter with bigger units\n      : defaults(formatter, defaults$$1) : defaults$$1;\n      var unit = getUnitFromValue(tick.value, isUTC);\n\n      if (mergedFormatter[unit]) {\n        template = mergedFormatter[unit];\n      } else if (mergedFormatter.inherit) {\n        // Unit formatter is not defined and should inherit from bigger units\n        var targetId = timeUnits.indexOf(unit);\n\n        for (var i = targetId - 1; i >= 0; --i) {\n          if (mergedFormatter[unit]) {\n            template = mergedFormatter[unit];\n            break;\n          }\n        }\n\n        template = template || defaults$$1.none;\n      }\n\n      if (isArray(template)) {\n        var levelId = tick.level == null ? 0 : tick.level >= 0 ? tick.level : template.length + tick.level;\n        levelId = Math.min(levelId, template.length - 1);\n        template = template[levelId];\n      }\n    }\n\n    return format(new Date(tick.value), template, isUTC, lang);\n  }\n\n  function getUnitFromValue(value, isUTC) {\n    var date = parseDate(value);\n    var M = date[monthGetterName(isUTC)]() + 1;\n    var d = date[dateGetterName(isUTC)]();\n    var h = date[hoursGetterName(isUTC)]();\n    var m = date[minutesGetterName(isUTC)]();\n    var s = date[secondsGetterName(isUTC)]();\n    var S = date[millisecondsGetterName(isUTC)]();\n    var isSecond = S === 0;\n    var isMinute = isSecond && s === 0;\n    var isHour = isMinute && m === 0;\n    var isDay = isHour && h === 0;\n    var isMonth = isDay && d === 1;\n    var isYear = isMonth && M === 1;\n\n    if (isYear) {\n      return 'year';\n    } else if (isMonth) {\n      return 'month';\n    } else if (isDay) {\n      return 'day';\n    } else if (isHour) {\n      return 'hour';\n    } else if (isMinute) {\n      return 'minute';\n    } else if (isSecond) {\n      return 'second';\n    } else {\n      return 'millisecond';\n    }\n  }\n\n  function getUnitValue(value, unit, isUTC) {\n    var date = isNumber(value) ? parseDate(value) : value;\n    unit = unit || getUnitFromValue(value, isUTC);\n\n    switch (unit) {\n      case 'year':\n        return date[fullYearGetterName(isUTC)]();\n\n      case 'half-year':\n        return date[monthGetterName(isUTC)]() >= 6 ? 1 : 0;\n\n      case 'quarter':\n        return Math.floor((date[monthGetterName(isUTC)]() + 1) / 4);\n\n      case 'month':\n        return date[monthGetterName(isUTC)]();\n\n      case 'day':\n        return date[dateGetterName(isUTC)]();\n\n      case 'half-day':\n        return date[hoursGetterName(isUTC)]() / 24;\n\n      case 'hour':\n        return date[hoursGetterName(isUTC)]();\n\n      case 'minute':\n        return date[minutesGetterName(isUTC)]();\n\n      case 'second':\n        return date[secondsGetterName(isUTC)]();\n\n      case 'millisecond':\n        return date[millisecondsGetterName(isUTC)]();\n    }\n  }\n\n  function fullYearGetterName(isUTC) {\n    return isUTC ? 'getUTCFullYear' : 'getFullYear';\n  }\n\n  function monthGetterName(isUTC) {\n    return isUTC ? 'getUTCMonth' : 'getMonth';\n  }\n\n  function dateGetterName(isUTC) {\n    return isUTC ? 'getUTCDate' : 'getDate';\n  }\n\n  function hoursGetterName(isUTC) {\n    return isUTC ? 'getUTCHours' : 'getHours';\n  }\n\n  function minutesGetterName(isUTC) {\n    return isUTC ? 'getUTCMinutes' : 'getMinutes';\n  }\n\n  function secondsGetterName(isUTC) {\n    return isUTC ? 'getUTCSeconds' : 'getSeconds';\n  }\n\n  function millisecondsGetterName(isUTC) {\n    return isUTC ? 'getUTCMilliseconds' : 'getMilliseconds';\n  }\n\n  function fullYearSetterName(isUTC) {\n    return isUTC ? 'setUTCFullYear' : 'setFullYear';\n  }\n\n  function monthSetterName(isUTC) {\n    return isUTC ? 'setUTCMonth' : 'setMonth';\n  }\n\n  function dateSetterName(isUTC) {\n    return isUTC ? 'setUTCDate' : 'setDate';\n  }\n\n  function hoursSetterName(isUTC) {\n    return isUTC ? 'setUTCHours' : 'setHours';\n  }\n\n  function minutesSetterName(isUTC) {\n    return isUTC ? 'setUTCMinutes' : 'setMinutes';\n  }\n\n  function secondsSetterName(isUTC) {\n    return isUTC ? 'setUTCSeconds' : 'setSeconds';\n  }\n\n  function millisecondsSetterName(isUTC) {\n    return isUTC ? 'setUTCMilliseconds' : 'setMilliseconds';\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function getTextRect(text, font, align, verticalAlign, padding, rich, truncate, lineHeight) {\n    var textEl = new ZRText({\n      style: {\n        text: text,\n        font: font,\n        align: align,\n        verticalAlign: verticalAlign,\n        padding: padding,\n        rich: rich,\n        overflow: truncate ? 'truncate' : null,\n        lineHeight: lineHeight\n      }\n    });\n    return textEl.getBoundingRect();\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Add a comma each three digit.\n   */\n\n\n  function addCommas(x) {\n    if (!isNumeric(x)) {\n      return isString(x) ? x : '-';\n    }\n\n    var parts = (x + '').split('.');\n    return parts[0].replace(/(\\d{1,3})(?=(?:\\d{3})+(?!\\d))/g, '$1,') + (parts.length > 1 ? '.' + parts[1] : '');\n  }\n\n  function toCamelCase(str, upperCaseFirst) {\n    str = (str || '').toLowerCase().replace(/-(.)/g, function (match, group1) {\n      return group1.toUpperCase();\n    });\n\n    if (upperCaseFirst && str) {\n      str = str.charAt(0).toUpperCase() + str.slice(1);\n    }\n\n    return str;\n  }\n\n  var normalizeCssArray$1 = normalizeCssArray;\n  var replaceReg = /([&<>\"'])/g;\n  var replaceMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    '\\'': '&#39;'\n  };\n\n  function encodeHTML(source) {\n    return source == null ? '' : (source + '').replace(replaceReg, function (str, c) {\n      return replaceMap[c];\n    });\n  }\n  /**\n   * Make value user readable for tooltip and label.\n   * \"User readable\":\n   *     Try to not print programmer-specific text like NaN, Infinity, null, undefined.\n   *     Avoid to display an empty string, which users can not recognize there is\n   *     a value and it might look like a bug.\n   */\n\n\n  function makeValueReadable(value, valueType, useUTC) {\n    var USER_READABLE_DEFUALT_TIME_PATTERN = '{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}';\n\n    function stringToUserReadable(str) {\n      return str && trim(str) ? str : '-';\n    }\n\n    function isNumberUserReadable(num) {\n      return !!(num != null && !isNaN(num) && isFinite(num));\n    }\n\n    var isTypeTime = valueType === 'time';\n    var isValueDate = value instanceof Date;\n\n    if (isTypeTime || isValueDate) {\n      var date = isTypeTime ? parseDate(value) : value;\n\n      if (!isNaN(+date)) {\n        return format(date, USER_READABLE_DEFUALT_TIME_PATTERN, useUTC);\n      } else if (isValueDate) {\n        return '-';\n      } // In other cases, continue to try to display the value in the following code.\n\n    }\n\n    if (valueType === 'ordinal') {\n      return isStringSafe(value) ? stringToUserReadable(value) : isNumber(value) ? isNumberUserReadable(value) ? value + '' : '-' : '-';\n    } // By default.\n\n\n    var numericResult = numericToNumber(value);\n    return isNumberUserReadable(numericResult) ? addCommas(numericResult) : isStringSafe(value) ? stringToUserReadable(value) : typeof value === 'boolean' ? value + '' : '-';\n  }\n\n  var TPL_VAR_ALIAS = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];\n\n  var wrapVar = function (varName, seriesIdx) {\n    return '{' + varName + (seriesIdx == null ? '' : seriesIdx) + '}';\n  };\n  /**\n   * Template formatter\n   * @param {Array.<Object>|Object} paramsList\n   */\n\n\n  function formatTpl(tpl, paramsList, encode) {\n    if (!isArray(paramsList)) {\n      paramsList = [paramsList];\n    }\n\n    var seriesLen = paramsList.length;\n\n    if (!seriesLen) {\n      return '';\n    }\n\n    var $vars = paramsList[0].$vars || [];\n\n    for (var i = 0; i < $vars.length; i++) {\n      var alias = TPL_VAR_ALIAS[i];\n      tpl = tpl.replace(wrapVar(alias), wrapVar(alias, 0));\n    }\n\n    for (var seriesIdx = 0; seriesIdx < seriesLen; seriesIdx++) {\n      for (var k = 0; k < $vars.length; k++) {\n        var val = paramsList[seriesIdx][$vars[k]];\n        tpl = tpl.replace(wrapVar(TPL_VAR_ALIAS[k], seriesIdx), encode ? encodeHTML(val) : val);\n      }\n    }\n\n    return tpl;\n  }\n  /**\n   * simple Template formatter\n   */\n\n\n  function getTooltipMarker(inOpt, extraCssText) {\n    var opt = isString(inOpt) ? {\n      color: inOpt,\n      extraCssText: extraCssText\n    } : inOpt || {};\n    var color = opt.color;\n    var type = opt.type;\n    extraCssText = opt.extraCssText;\n    var renderMode = opt.renderMode || 'html';\n\n    if (!color) {\n      return '';\n    }\n\n    if (renderMode === 'html') {\n      return type === 'subItem' ? '<span style=\"display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;' + 'border-radius:4px;width:4px;height:4px;background-color:' // Only support string\n      + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>' : '<span style=\"display:inline-block;margin-right:4px;' + 'border-radius:10px;width:10px;height:10px;background-color:' + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>';\n    } else {\n      // Should better not to auto generate style name by auto-increment number here.\n      // Because this util is usually called in tooltip formatter, which is probably\n      // called repeatly when mouse move and the auto-increment number increases fast.\n      // Users can make their own style name by theirselves, make it unique and readable.\n      var markerId = opt.markerId || 'markerX';\n      return {\n        renderMode: renderMode,\n        content: '{' + markerId + '|}  ',\n        style: type === 'subItem' ? {\n          width: 4,\n          height: 4,\n          borderRadius: 2,\n          backgroundColor: color\n        } : {\n          width: 10,\n          height: 10,\n          borderRadius: 5,\n          backgroundColor: color\n        }\n      };\n    }\n  }\n  /**\n   * @deprecated Use `time/format` instead.\n   * ISO Date format\n   * @param {string} tpl\n   * @param {number} value\n   * @param {boolean} [isUTC=false] Default in local time.\n   *           see `module:echarts/scale/Time`\n   *           and `module:echarts/util/number#parseDate`.\n   * @inner\n   */\n\n\n  function formatTime(tpl, value, isUTC) {\n    {\n      deprecateReplaceLog('echarts.format.formatTime', 'echarts.time.format');\n    }\n\n    if (tpl === 'week' || tpl === 'month' || tpl === 'quarter' || tpl === 'half-year' || tpl === 'year') {\n      tpl = 'MM-dd\\nyyyy';\n    }\n\n    var date = parseDate(value);\n    var getUTC = isUTC ? 'getUTC' : 'get';\n    var y = date[getUTC + 'FullYear']();\n    var M = date[getUTC + 'Month']() + 1;\n    var d = date[getUTC + 'Date']();\n    var h = date[getUTC + 'Hours']();\n    var m = date[getUTC + 'Minutes']();\n    var s = date[getUTC + 'Seconds']();\n    var S = date[getUTC + 'Milliseconds']();\n    tpl = tpl.replace('MM', pad(M, 2)).replace('M', M).replace('yyyy', y).replace('yy', pad(y % 100 + '', 2)).replace('dd', pad(d, 2)).replace('d', d).replace('hh', pad(h, 2)).replace('h', h).replace('mm', pad(m, 2)).replace('m', m).replace('ss', pad(s, 2)).replace('s', s).replace('SSS', pad(S, 3));\n    return tpl;\n  }\n  /**\n   * Capital first\n   * @param {string} str\n   * @return {string}\n   */\n\n\n  function capitalFirst(str) {\n    return str ? str.charAt(0).toUpperCase() + str.substr(1) : str;\n  }\n  /**\n   * @return Never be null/undefined.\n   */\n\n\n  function convertToColorString(color, defaultColor) {\n    defaultColor = defaultColor || 'transparent';\n    return isString(color) ? color : isObject(color) ? color.colorStops && (color.colorStops[0] || {}).color || defaultColor : defaultColor;\n  }\n  /**\n   * open new tab\n   * @param link url\n   * @param target blank or self\n   */\n\n\n  function windowOpen(link, target) {\n    /* global window */\n    if (target === '_blank' || target === 'blank') {\n      var blank = window.open();\n      blank.opener = null;\n      blank.location.href = link;\n    } else {\n      window.open(link, target);\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // Layout helpers for each component positioning\n\n\n  var each$1 = each;\n  /**\n   * @public\n   */\n\n  var LOCATION_PARAMS = ['left', 'right', 'top', 'bottom', 'width', 'height'];\n  /**\n   * @public\n   */\n\n  var HV_NAMES = [['width', 'left', 'right'], ['height', 'top', 'bottom']];\n\n  function boxLayout(orient, group, gap, maxWidth, maxHeight) {\n    var x = 0;\n    var y = 0;\n\n    if (maxWidth == null) {\n      maxWidth = Infinity;\n    }\n\n    if (maxHeight == null) {\n      maxHeight = Infinity;\n    }\n\n    var currentLineMaxSize = 0;\n    group.eachChild(function (child, idx) {\n      var rect = child.getBoundingRect();\n      var nextChild = group.childAt(idx + 1);\n      var nextChildRect = nextChild && nextChild.getBoundingRect();\n      var nextX;\n      var nextY;\n\n      if (orient === 'horizontal') {\n        var moveX = rect.width + (nextChildRect ? -nextChildRect.x + rect.x : 0);\n        nextX = x + moveX; // Wrap when width exceeds maxWidth or meet a `newline` group\n        // FIXME compare before adding gap?\n\n        if (nextX > maxWidth || child.newline) {\n          x = 0;\n          nextX = moveX;\n          y += currentLineMaxSize + gap;\n          currentLineMaxSize = rect.height;\n        } else {\n          // FIXME: consider rect.y is not `0`?\n          currentLineMaxSize = Math.max(currentLineMaxSize, rect.height);\n        }\n      } else {\n        var moveY = rect.height + (nextChildRect ? -nextChildRect.y + rect.y : 0);\n        nextY = y + moveY; // Wrap when width exceeds maxHeight or meet a `newline` group\n\n        if (nextY > maxHeight || child.newline) {\n          x += currentLineMaxSize + gap;\n          y = 0;\n          nextY = moveY;\n          currentLineMaxSize = rect.width;\n        } else {\n          currentLineMaxSize = Math.max(currentLineMaxSize, rect.width);\n        }\n      }\n\n      if (child.newline) {\n        return;\n      }\n\n      child.x = x;\n      child.y = y;\n      child.markRedraw();\n      orient === 'horizontal' ? x = nextX + gap : y = nextY + gap;\n    });\n  }\n  /**\n   * VBox or HBox layouting\n   * @param {string} orient\n   * @param {module:zrender/graphic/Group} group\n   * @param {number} gap\n   * @param {number} [width=Infinity]\n   * @param {number} [height=Infinity]\n   */\n\n\n  var box = boxLayout;\n  /**\n   * VBox layouting\n   * @param {module:zrender/graphic/Group} group\n   * @param {number} gap\n   * @param {number} [width=Infinity]\n   * @param {number} [height=Infinity]\n   */\n\n  var vbox = curry(boxLayout, 'vertical');\n  /**\n   * HBox layouting\n   * @param {module:zrender/graphic/Group} group\n   * @param {number} gap\n   * @param {number} [width=Infinity]\n   * @param {number} [height=Infinity]\n   */\n\n  var hbox = curry(boxLayout, 'horizontal');\n  /**\n   * If x or x2 is not specified or 'center' 'left' 'right',\n   * the width would be as long as possible.\n   * If y or y2 is not specified or 'middle' 'top' 'bottom',\n   * the height would be as long as possible.\n   */\n\n  /**\n   * Parse position info.\n   */\n\n  function getLayoutRect(positionInfo, containerRect, margin) {\n    margin = normalizeCssArray$1(margin || 0);\n    var containerWidth = containerRect.width;\n    var containerHeight = containerRect.height;\n    var left = parsePercent$1(positionInfo.left, containerWidth);\n    var top = parsePercent$1(positionInfo.top, containerHeight);\n    var right = parsePercent$1(positionInfo.right, containerWidth);\n    var bottom = parsePercent$1(positionInfo.bottom, containerHeight);\n    var width = parsePercent$1(positionInfo.width, containerWidth);\n    var height = parsePercent$1(positionInfo.height, containerHeight);\n    var verticalMargin = margin[2] + margin[0];\n    var horizontalMargin = margin[1] + margin[3];\n    var aspect = positionInfo.aspect; // If width is not specified, calculate width from left and right\n\n    if (isNaN(width)) {\n      width = containerWidth - right - horizontalMargin - left;\n    }\n\n    if (isNaN(height)) {\n      height = containerHeight - bottom - verticalMargin - top;\n    }\n\n    if (aspect != null) {\n      // If width and height are not given\n      // 1. Graph should not exceeds the container\n      // 2. Aspect must be keeped\n      // 3. Graph should take the space as more as possible\n      // FIXME\n      // Margin is not considered, because there is no case that both\n      // using margin and aspect so far.\n      if (isNaN(width) && isNaN(height)) {\n        if (aspect > containerWidth / containerHeight) {\n          width = containerWidth * 0.8;\n        } else {\n          height = containerHeight * 0.8;\n        }\n      } // Calculate width or height with given aspect\n\n\n      if (isNaN(width)) {\n        width = aspect * height;\n      }\n\n      if (isNaN(height)) {\n        height = width / aspect;\n      }\n    } // If left is not specified, calculate left from right and width\n\n\n    if (isNaN(left)) {\n      left = containerWidth - right - width - horizontalMargin;\n    }\n\n    if (isNaN(top)) {\n      top = containerHeight - bottom - height - verticalMargin;\n    } // Align left and top\n\n\n    switch (positionInfo.left || positionInfo.right) {\n      case 'center':\n        left = containerWidth / 2 - width / 2 - margin[3];\n        break;\n\n      case 'right':\n        left = containerWidth - width - horizontalMargin;\n        break;\n    }\n\n    switch (positionInfo.top || positionInfo.bottom) {\n      case 'middle':\n      case 'center':\n        top = containerHeight / 2 - height / 2 - margin[0];\n        break;\n\n      case 'bottom':\n        top = containerHeight - height - verticalMargin;\n        break;\n    } // If something is wrong and left, top, width, height are calculated as NaN\n\n\n    left = left || 0;\n    top = top || 0;\n\n    if (isNaN(width)) {\n      // Width may be NaN if only one value is given except width\n      width = containerWidth - horizontalMargin - left - (right || 0);\n    }\n\n    if (isNaN(height)) {\n      // Height may be NaN if only one value is given except height\n      height = containerHeight - verticalMargin - top - (bottom || 0);\n    }\n\n    var rect = new BoundingRect(left + margin[3], top + margin[0], width, height);\n    rect.margin = margin;\n    return rect;\n  }\n  /**\n   * Position a zr element in viewport\n   *  Group position is specified by either\n   *  {left, top}, {right, bottom}\n   *  If all properties exists, right and bottom will be igonred.\n   *\n   * Logic:\n   *     1. Scale (against origin point in parent coord)\n   *     2. Rotate (against origin point in parent coord)\n   *     3. Traslate (with el.position by this method)\n   * So this method only fixes the last step 'Traslate', which does not affect\n   * scaling and rotating.\n   *\n   * If be called repeatly with the same input el, the same result will be gotten.\n   *\n   * Return true if the layout happend.\n   *\n   * @param el Should have `getBoundingRect` method.\n   * @param positionInfo\n   * @param positionInfo.left\n   * @param positionInfo.top\n   * @param positionInfo.right\n   * @param positionInfo.bottom\n   * @param positionInfo.width Only for opt.boundingModel: 'raw'\n   * @param positionInfo.height Only for opt.boundingModel: 'raw'\n   * @param containerRect\n   * @param margin\n   * @param opt\n   * @param opt.hv Only horizontal or only vertical. Default to be [1, 1]\n   * @param opt.boundingMode\n   *        Specify how to calculate boundingRect when locating.\n   *        'all': Position the boundingRect that is transformed and uioned\n   *               both itself and its descendants.\n   *               This mode simplies confine the elements in the bounding\n   *               of their container (e.g., using 'right: 0').\n   *        'raw': Position the boundingRect that is not transformed and only itself.\n   *               This mode is useful when you want a element can overflow its\n   *               container. (Consider a rotated circle needs to be located in a corner.)\n   *               In this mode positionInfo.width/height can only be number.\n   */\n\n\n  function positionElement(el, positionInfo, containerRect, margin, opt, out) {\n    var h = !opt || !opt.hv || opt.hv[0];\n    var v = !opt || !opt.hv || opt.hv[1];\n    var boundingMode = opt && opt.boundingMode || 'all';\n    out = out || el;\n    out.x = el.x;\n    out.y = el.y;\n\n    if (!h && !v) {\n      return false;\n    }\n\n    var rect;\n\n    if (boundingMode === 'raw') {\n      rect = el.type === 'group' ? new BoundingRect(0, 0, +positionInfo.width || 0, +positionInfo.height || 0) : el.getBoundingRect();\n    } else {\n      rect = el.getBoundingRect();\n\n      if (el.needLocalTransform()) {\n        var transform = el.getLocalTransform(); // Notice: raw rect may be inner object of el,\n        // which should not be modified.\n\n        rect = rect.clone();\n        rect.applyTransform(transform);\n      }\n    } // The real width and height can not be specified but calculated by the given el.\n\n\n    var layoutRect = getLayoutRect(defaults({\n      width: rect.width,\n      height: rect.height\n    }, positionInfo), containerRect, margin); // Because 'tranlate' is the last step in transform\n    // (see zrender/core/Transformable#getLocalTransform),\n    // we can just only modify el.position to get final result.\n\n    var dx = h ? layoutRect.x - rect.x : 0;\n    var dy = v ? layoutRect.y - rect.y : 0;\n\n    if (boundingMode === 'raw') {\n      out.x = dx;\n      out.y = dy;\n    } else {\n      out.x += dx;\n      out.y += dy;\n    }\n\n    if (out === el) {\n      el.markRedraw();\n    }\n\n    return true;\n  }\n  /**\n   * @param option Contains some of the properties in HV_NAMES.\n   * @param hvIdx 0: horizontal; 1: vertical.\n   */\n\n\n  function fetchLayoutMode(ins) {\n    var layoutMode = ins.layoutMode || ins.constructor.layoutMode;\n    return isObject(layoutMode) ? layoutMode : layoutMode ? {\n      type: layoutMode\n    } : null;\n  }\n  /**\n   * Consider Case:\n   * When default option has {left: 0, width: 100}, and we set {right: 0}\n   * through setOption or media query, using normal zrUtil.merge will cause\n   * {right: 0} does not take effect.\n   *\n   * @example\n   * ComponentModel.extend({\n   *     init: function () {\n   *         ...\n   *         let inputPositionParams = layout.getLayoutParams(option);\n   *         this.mergeOption(inputPositionParams);\n   *     },\n   *     mergeOption: function (newOption) {\n   *         newOption && zrUtil.merge(thisOption, newOption, true);\n   *         layout.mergeLayoutParam(thisOption, newOption);\n   *     }\n   * });\n   *\n   * @param targetOption\n   * @param newOption\n   * @param opt\n   */\n\n\n  function mergeLayoutParam(targetOption, newOption, opt) {\n    var ignoreSize = opt && opt.ignoreSize;\n    !isArray(ignoreSize) && (ignoreSize = [ignoreSize, ignoreSize]);\n    var hResult = merge$$1(HV_NAMES[0], 0);\n    var vResult = merge$$1(HV_NAMES[1], 1);\n    copy(HV_NAMES[0], targetOption, hResult);\n    copy(HV_NAMES[1], targetOption, vResult);\n\n    function merge$$1(names, hvIdx) {\n      var newParams = {};\n      var newValueCount = 0;\n      var merged = {};\n      var mergedValueCount = 0;\n      var enoughParamNumber = 2;\n      each$1(names, function (name) {\n        merged[name] = targetOption[name];\n      });\n      each$1(names, function (name) {\n        // Consider case: newOption.width is null, which is\n        // set by user for removing width setting.\n        hasProp(newOption, name) && (newParams[name] = merged[name] = newOption[name]);\n        hasValue(newParams, name) && newValueCount++;\n        hasValue(merged, name) && mergedValueCount++;\n      });\n\n      if (ignoreSize[hvIdx]) {\n        // Only one of left/right is premitted to exist.\n        if (hasValue(newOption, names[1])) {\n          merged[names[2]] = null;\n        } else if (hasValue(newOption, names[2])) {\n          merged[names[1]] = null;\n        }\n\n        return merged;\n      } // Case: newOption: {width: ..., right: ...},\n      // or targetOption: {right: ...} and newOption: {width: ...},\n      // There is no conflict when merged only has params count\n      // little than enoughParamNumber.\n\n\n      if (mergedValueCount === enoughParamNumber || !newValueCount) {\n        return merged;\n      } // Case: newOption: {width: ..., right: ...},\n      // Than we can make sure user only want those two, and ignore\n      // all origin params in targetOption.\n      else if (newValueCount >= enoughParamNumber) {\n          return newParams;\n        } else {\n          // Chose another param from targetOption by priority.\n          for (var i = 0; i < names.length; i++) {\n            var name_1 = names[i];\n\n            if (!hasProp(newParams, name_1) && hasProp(targetOption, name_1)) {\n              newParams[name_1] = targetOption[name_1];\n              break;\n            }\n          }\n\n          return newParams;\n        }\n    }\n\n    function hasProp(obj, name) {\n      return obj.hasOwnProperty(name);\n    }\n\n    function hasValue(obj, name) {\n      return obj[name] != null && obj[name] !== 'auto';\n    }\n\n    function copy(names, target, source) {\n      each$1(names, function (name) {\n        target[name] = source[name];\n      });\n    }\n  }\n  /**\n   * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n   */\n\n\n  function getLayoutParams(source) {\n    return copyLayoutParams({}, source);\n  }\n  /**\n   * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n   * @param {Object} source\n   * @return {Object} Result contains those props.\n   */\n\n\n  function copyLayoutParams(target, source) {\n    source && target && each$1(LOCATION_PARAMS, function (name) {\n      source.hasOwnProperty(name) && (target[name] = source[name]);\n    });\n    return target;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var inner = makeInner();\n\n  var ComponentModel =\n  /** @class */\n  function (_super) {\n    __extends(ComponentModel, _super);\n\n    function ComponentModel(option, parentModel, ecModel) {\n      var _this = _super.call(this, option, parentModel, ecModel) || this;\n\n      _this.uid = getUID('ec_cpt_model');\n      return _this;\n    }\n\n    ComponentModel.prototype.init = function (option, parentModel, ecModel) {\n      this.mergeDefaultAndTheme(option, ecModel);\n    };\n\n    ComponentModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n      var layoutMode = fetchLayoutMode(this);\n      var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n      var themeModel = ecModel.getTheme();\n      merge(option, themeModel.get(this.mainType));\n      merge(option, this.getDefaultOption());\n\n      if (layoutMode) {\n        mergeLayoutParam(option, inputPositionParams, layoutMode);\n      }\n    };\n\n    ComponentModel.prototype.mergeOption = function (option, ecModel) {\n      merge(this.option, option, true);\n      var layoutMode = fetchLayoutMode(this);\n\n      if (layoutMode) {\n        mergeLayoutParam(this.option, option, layoutMode);\n      }\n    };\n    /**\n     * Called immediately after `init` or `mergeOption` of this instance called.\n     */\n\n\n    ComponentModel.prototype.optionUpdated = function (newCptOption, isInit) {};\n    /**\n     * [How to declare defaultOption]:\n     *\n     * (A) If using class declaration in typescript (since echarts 5):\n     * ```ts\n     * import {ComponentOption} from '../model/option.js';\n     * export interface XxxOption extends ComponentOption {\n     *     aaa: number\n     * }\n     * export class XxxModel extends Component {\n     *     static type = 'xxx';\n     *     static defaultOption: XxxOption = {\n     *         aaa: 123\n     *     }\n     * }\n     * Component.registerClass(XxxModel);\n     * ```\n     * ```ts\n     * import {inheritDefaultOption} from '../util/component.js';\n     * import {XxxModel, XxxOption} from './XxxModel.js';\n     * export interface XxxSubOption extends XxxOption {\n     *     bbb: number\n     * }\n     * class XxxSubModel extends XxxModel {\n     *     static defaultOption: XxxSubOption = inheritDefaultOption(XxxModel.defaultOption, {\n     *         bbb: 456\n     *     })\n     *     fn() {\n     *         let opt = this.getDefaultOption();\n     *         // opt is {aaa: 123, bbb: 456}\n     *     }\n     * }\n     * ```\n     *\n     * (B) If using class extend (previous approach in echarts 3 & 4):\n     * ```js\n     * let XxxComponent = Component.extend({\n     *     defaultOption: {\n     *         xx: 123\n     *     }\n     * })\n     * ```\n     * ```js\n     * let XxxSubComponent = XxxComponent.extend({\n     *     defaultOption: {\n     *         yy: 456\n     *     },\n     *     fn: function () {\n     *         let opt = this.getDefaultOption();\n     *         // opt is {xx: 123, yy: 456}\n     *     }\n     * })\n     * ```\n     */\n\n\n    ComponentModel.prototype.getDefaultOption = function () {\n      var ctor = this.constructor; // If using class declaration, it is different to travel super class\n      // in legacy env and auto merge defaultOption. So if using class\n      // declaration, defaultOption should be merged manually.\n\n      if (!isExtendedClass(ctor)) {\n        // When using ts class, defaultOption must be declared as static.\n        return ctor.defaultOption;\n      } // FIXME: remove this approach?\n\n\n      var fields = inner(this);\n\n      if (!fields.defaultOption) {\n        var optList = [];\n        var clz = ctor;\n\n        while (clz) {\n          var opt = clz.prototype.defaultOption;\n          opt && optList.push(opt);\n          clz = clz.superClass;\n        }\n\n        var defaultOption = {};\n\n        for (var i = optList.length - 1; i >= 0; i--) {\n          defaultOption = merge(defaultOption, optList[i], true);\n        }\n\n        fields.defaultOption = defaultOption;\n      }\n\n      return fields.defaultOption;\n    };\n    /**\n     * Notice: always force to input param `useDefault` in case that forget to consider it.\n     * The same behavior as `modelUtil.parseFinder`.\n     *\n     * @param useDefault In many cases like series refer axis and axis refer grid,\n     *        If axis index / axis id not specified, use the first target as default.\n     *        In other cases like dataZoom refer axis, if not specified, measn no refer.\n     */\n\n\n    ComponentModel.prototype.getReferringComponents = function (mainType, opt) {\n      var indexKey = mainType + 'Index';\n      var idKey = mainType + 'Id';\n      return queryReferringComponents(this.ecModel, mainType, {\n        index: this.get(indexKey, true),\n        id: this.get(idKey, true)\n      }, opt);\n    };\n\n    ComponentModel.prototype.getBoxLayoutParams = function () {\n      // Consider itself having box layout configs.\n      var boxLayoutModel = this;\n      return {\n        left: boxLayoutModel.get('left'),\n        top: boxLayoutModel.get('top'),\n        right: boxLayoutModel.get('right'),\n        bottom: boxLayoutModel.get('bottom'),\n        width: boxLayoutModel.get('width'),\n        height: boxLayoutModel.get('height')\n      };\n    };\n    /**\n     * Get key for zlevel.\n     * If developers don't configure zlevel. We will assign zlevel to series based on the key.\n     * For example, lines with trail effect and progressive series will in an individual zlevel.\n     */\n\n\n    ComponentModel.prototype.getZLevelKey = function () {\n      return '';\n    };\n\n    ComponentModel.prototype.setZLevel = function (zlevel) {\n      this.option.zlevel = zlevel;\n    };\n\n    ComponentModel.protoInitialize = function () {\n      var proto = ComponentModel.prototype;\n      proto.type = 'component';\n      proto.id = '';\n      proto.name = '';\n      proto.mainType = '';\n      proto.subType = '';\n      proto.componentIndex = 0;\n    }();\n\n    return ComponentModel;\n  }(Model);\n\n  mountExtend(ComponentModel, Model);\n  enableClassManagement(ComponentModel);\n  enableSubTypeDefaulter(ComponentModel);\n  enableTopologicalTravel(ComponentModel, getDependencies);\n\n  function getDependencies(componentType) {\n    var deps = [];\n    each(ComponentModel.getClassesByMainType(componentType), function (clz) {\n      deps = deps.concat(clz.dependencies || clz.prototype.dependencies || []);\n    }); // Ensure main type.\n\n    deps = map(deps, function (type) {\n      return parseClassType(type).main;\n    }); // Hack dataset for convenience.\n\n    if (componentType !== 'dataset' && indexOf(deps, 'dataset') <= 0) {\n      deps.unshift('dataset');\n    }\n\n    return deps;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var platform = ''; // Navigator not exists in node\n\n  if (typeof navigator !== 'undefined') {\n    /* global navigator */\n    platform = navigator.platform || '';\n  }\n\n  var decalColor = 'rgba(0, 0, 0, 0.2)';\n  var globalDefault = {\n    darkMode: 'auto',\n    // backgroundColor: 'rgba(0,0,0,0)',\n    colorBy: 'series',\n    color: ['#5470c6', '#91cc75', '#fac858', '#ee6666', '#73c0de', '#3ba272', '#fc8452', '#9a60b4', '#ea7ccc'],\n    gradientColor: ['#f6efa6', '#d88273', '#bf444c'],\n    aria: {\n      decal: {\n        decals: [{\n          color: decalColor,\n          dashArrayX: [1, 0],\n          dashArrayY: [2, 5],\n          symbolSize: 1,\n          rotation: Math.PI / 6\n        }, {\n          color: decalColor,\n          symbol: 'circle',\n          dashArrayX: [[8, 8], [0, 8, 8, 0]],\n          dashArrayY: [6, 0],\n          symbolSize: 0.8\n        }, {\n          color: decalColor,\n          dashArrayX: [1, 0],\n          dashArrayY: [4, 3],\n          rotation: -Math.PI / 4\n        }, {\n          color: decalColor,\n          dashArrayX: [[6, 6], [0, 6, 6, 0]],\n          dashArrayY: [6, 0]\n        }, {\n          color: decalColor,\n          dashArrayX: [[1, 0], [1, 6]],\n          dashArrayY: [1, 0, 6, 0],\n          rotation: Math.PI / 4\n        }, {\n          color: decalColor,\n          symbol: 'triangle',\n          dashArrayX: [[9, 9], [0, 9, 9, 0]],\n          dashArrayY: [7, 2],\n          symbolSize: 0.75\n        }]\n      }\n    },\n    // If xAxis and yAxis declared, grid is created by default.\n    // grid: {},\n    textStyle: {\n      // color: '#000',\n      // decoration: 'none',\n      // PENDING\n      fontFamily: platform.match(/^Win/) ? 'Microsoft YaHei' : 'sans-serif',\n      // fontFamily: 'Arial, Verdana, sans-serif',\n      fontSize: 12,\n      fontStyle: 'normal',\n      fontWeight: 'normal'\n    },\n    // http://blogs.adobe.com/webplatform/2014/02/24/using-blend-modes-in-html-canvas/\n    // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n    // Default is source-over\n    blendMode: null,\n    stateAnimation: {\n      duration: 300,\n      easing: 'cubicOut'\n    },\n    animation: 'auto',\n    animationDuration: 1000,\n    animationDurationUpdate: 500,\n    animationEasing: 'cubicInOut',\n    animationEasingUpdate: 'cubicInOut',\n    animationThreshold: 2000,\n    // Configuration for progressive/incremental rendering\n    progressiveThreshold: 3000,\n    progressive: 400,\n    // Threshold of if use single hover layer to optimize.\n    // It is recommended that `hoverLayerThreshold` is equivalent to or less than\n    // `progressiveThreshold`, otherwise hover will cause restart of progressive,\n    // which is unexpected.\n    // see example <echarts/test/heatmap-large.html>.\n    hoverLayerThreshold: 3000,\n    // See: module:echarts/scale/Time\n    useUTC: false\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var VISUAL_DIMENSIONS = createHashMap(['tooltip', 'label', 'itemName', 'itemId', 'itemGroupId', 'seriesName']);\n  var SOURCE_FORMAT_ORIGINAL = 'original';\n  var SOURCE_FORMAT_ARRAY_ROWS = 'arrayRows';\n  var SOURCE_FORMAT_OBJECT_ROWS = 'objectRows';\n  var SOURCE_FORMAT_KEYED_COLUMNS = 'keyedColumns';\n  var SOURCE_FORMAT_TYPED_ARRAY = 'typedArray';\n  var SOURCE_FORMAT_UNKNOWN = 'unknown';\n  var SERIES_LAYOUT_BY_COLUMN = 'column';\n  var SERIES_LAYOUT_BY_ROW = 'row';\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var BE_ORDINAL = {\n    Must: 1,\n    Might: 2,\n    Not: 3 // Other cases\n\n  };\n  var innerGlobalModel = makeInner();\n  /**\n   * MUST be called before mergeOption of all series.\n   */\n\n  function resetSourceDefaulter(ecModel) {\n    // `datasetMap` is used to make default encode.\n    innerGlobalModel(ecModel).datasetMap = createHashMap();\n  }\n  /**\n   * [The strategy of the arrengment of data dimensions for dataset]:\n   * \"value way\": all axes are non-category axes. So series one by one take\n   *     several (the number is coordSysDims.length) dimensions from dataset.\n   *     The result of data arrengment of data dimensions like:\n   *     | ser0_x | ser0_y | ser1_x | ser1_y | ser2_x | ser2_y |\n   * \"category way\": at least one axis is category axis. So the the first data\n   *     dimension is always mapped to the first category axis and shared by\n   *     all of the series. The other data dimensions are taken by series like\n   *     \"value way\" does.\n   *     The result of data arrengment of data dimensions like:\n   *     | ser_shared_x | ser0_y | ser1_y | ser2_y |\n   *\n   * @return encode Never be `null/undefined`.\n   */\n\n\n  function makeSeriesEncodeForAxisCoordSys(coordDimensions, seriesModel, source) {\n    var encode = {};\n    var datasetModel = querySeriesUpstreamDatasetModel(seriesModel); // Currently only make default when using dataset, util more reqirements occur.\n\n    if (!datasetModel || !coordDimensions) {\n      return encode;\n    }\n\n    var encodeItemName = [];\n    var encodeSeriesName = [];\n    var ecModel = seriesModel.ecModel;\n    var datasetMap = innerGlobalModel(ecModel).datasetMap;\n    var key = datasetModel.uid + '_' + source.seriesLayoutBy;\n    var baseCategoryDimIndex;\n    var categoryWayValueDimStart;\n    coordDimensions = coordDimensions.slice();\n    each(coordDimensions, function (coordDimInfoLoose, coordDimIdx) {\n      var coordDimInfo = isObject(coordDimInfoLoose) ? coordDimInfoLoose : coordDimensions[coordDimIdx] = {\n        name: coordDimInfoLoose\n      };\n\n      if (coordDimInfo.type === 'ordinal' && baseCategoryDimIndex == null) {\n        baseCategoryDimIndex = coordDimIdx;\n        categoryWayValueDimStart = getDataDimCountOnCoordDim(coordDimInfo);\n      }\n\n      encode[coordDimInfo.name] = [];\n    });\n    var datasetRecord = datasetMap.get(key) || datasetMap.set(key, {\n      categoryWayDim: categoryWayValueDimStart,\n      valueWayDim: 0\n    }); // TODO\n    // Auto detect first time axis and do arrangement.\n\n    each(coordDimensions, function (coordDimInfo, coordDimIdx) {\n      var coordDimName = coordDimInfo.name;\n      var count = getDataDimCountOnCoordDim(coordDimInfo); // In value way.\n\n      if (baseCategoryDimIndex == null) {\n        var start = datasetRecord.valueWayDim;\n        pushDim(encode[coordDimName], start, count);\n        pushDim(encodeSeriesName, start, count);\n        datasetRecord.valueWayDim += count; // ??? TODO give a better default series name rule?\n        // especially when encode x y specified.\n        // consider: when mutiple series share one dimension\n        // category axis, series name should better use\n        // the other dimsion name. On the other hand, use\n        // both dimensions name.\n      } // In category way, the first category axis.\n      else if (baseCategoryDimIndex === coordDimIdx) {\n          pushDim(encode[coordDimName], 0, count);\n          pushDim(encodeItemName, 0, count);\n        } // In category way, the other axis.\n        else {\n            var start = datasetRecord.categoryWayDim;\n            pushDim(encode[coordDimName], start, count);\n            pushDim(encodeSeriesName, start, count);\n            datasetRecord.categoryWayDim += count;\n          }\n    });\n\n    function pushDim(dimIdxArr, idxFrom, idxCount) {\n      for (var i = 0; i < idxCount; i++) {\n        dimIdxArr.push(idxFrom + i);\n      }\n    }\n\n    function getDataDimCountOnCoordDim(coordDimInfo) {\n      var dimsDef = coordDimInfo.dimsDef;\n      return dimsDef ? dimsDef.length : 1;\n    }\n\n    encodeItemName.length && (encode.itemName = encodeItemName);\n    encodeSeriesName.length && (encode.seriesName = encodeSeriesName);\n    return encode;\n  }\n  /**\n   * Work for data like [{name: ..., value: ...}, ...].\n   *\n   * @return encode Never be `null/undefined`.\n   */\n\n\n  function makeSeriesEncodeForNameBased(seriesModel, source, dimCount) {\n    var encode = {};\n    var datasetModel = querySeriesUpstreamDatasetModel(seriesModel); // Currently only make default when using dataset, util more reqirements occur.\n\n    if (!datasetModel) {\n      return encode;\n    }\n\n    var sourceFormat = source.sourceFormat;\n    var dimensionsDefine = source.dimensionsDefine;\n    var potentialNameDimIndex;\n\n    if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n      each(dimensionsDefine, function (dim, idx) {\n        if ((isObject(dim) ? dim.name : dim) === 'name') {\n          potentialNameDimIndex = idx;\n        }\n      });\n    }\n\n    var idxResult = function () {\n      var idxRes0 = {};\n      var idxRes1 = {};\n      var guessRecords = []; // 5 is an experience value.\n\n      for (var i = 0, len = Math.min(5, dimCount); i < len; i++) {\n        var guessResult = doGuessOrdinal(source.data, sourceFormat, source.seriesLayoutBy, dimensionsDefine, source.startIndex, i);\n        guessRecords.push(guessResult);\n        var isPureNumber = guessResult === BE_ORDINAL.Not; // [Strategy of idxRes0]: find the first BE_ORDINAL.Not as the value dim,\n        // and then find a name dim with the priority:\n        // \"BE_ORDINAL.Might|BE_ORDINAL.Must\" > \"other dim\" > \"the value dim itself\".\n\n        if (isPureNumber && idxRes0.v == null && i !== potentialNameDimIndex) {\n          idxRes0.v = i;\n        }\n\n        if (idxRes0.n == null || idxRes0.n === idxRes0.v || !isPureNumber && guessRecords[idxRes0.n] === BE_ORDINAL.Not) {\n          idxRes0.n = i;\n        }\n\n        if (fulfilled(idxRes0) && guessRecords[idxRes0.n] !== BE_ORDINAL.Not) {\n          return idxRes0;\n        } // [Strategy of idxRes1]: if idxRes0 not satisfied (that is, no BE_ORDINAL.Not),\n        // find the first BE_ORDINAL.Might as the value dim,\n        // and then find a name dim with the priority:\n        // \"other dim\" > \"the value dim itself\".\n        // That is for backward compat: number-like (e.g., `'3'`, `'55'`) can be\n        // treated as number.\n\n\n        if (!isPureNumber) {\n          if (guessResult === BE_ORDINAL.Might && idxRes1.v == null && i !== potentialNameDimIndex) {\n            idxRes1.v = i;\n          }\n\n          if (idxRes1.n == null || idxRes1.n === idxRes1.v) {\n            idxRes1.n = i;\n          }\n        }\n      }\n\n      function fulfilled(idxResult) {\n        return idxResult.v != null && idxResult.n != null;\n      }\n\n      return fulfilled(idxRes0) ? idxRes0 : fulfilled(idxRes1) ? idxRes1 : null;\n    }();\n\n    if (idxResult) {\n      encode.value = [idxResult.v]; // `potentialNameDimIndex` has highest priority.\n\n      var nameDimIndex = potentialNameDimIndex != null ? potentialNameDimIndex : idxResult.n; // By default, label use itemName in charts.\n      // So we dont set encodeLabel here.\n\n      encode.itemName = [nameDimIndex];\n      encode.seriesName = [nameDimIndex];\n    }\n\n    return encode;\n  }\n  /**\n   * @return If return null/undefined, indicate that should not use datasetModel.\n   */\n\n\n  function querySeriesUpstreamDatasetModel(seriesModel) {\n    // Caution: consider the scenario:\n    // A dataset is declared and a series is not expected to use the dataset,\n    // and at the beginning `setOption({series: { noData })` (just prepare other\n    // option but no data), then `setOption({series: {data: [...]}); In this case,\n    // the user should set an empty array to avoid that dataset is used by default.\n    var thisData = seriesModel.get('data', true);\n\n    if (!thisData) {\n      return queryReferringComponents(seriesModel.ecModel, 'dataset', {\n        index: seriesModel.get('datasetIndex', true),\n        id: seriesModel.get('datasetId', true)\n      }, SINGLE_REFERRING).models[0];\n    }\n  }\n  /**\n   * @return Always return an array event empty.\n   */\n\n\n  function queryDatasetUpstreamDatasetModels(datasetModel) {\n    // Only these attributes declared, we by defualt reference to `datasetIndex: 0`.\n    // Otherwise, no reference.\n    if (!datasetModel.get('transform', true) && !datasetModel.get('fromTransformResult', true)) {\n      return [];\n    }\n\n    return queryReferringComponents(datasetModel.ecModel, 'dataset', {\n      index: datasetModel.get('fromDatasetIndex', true),\n      id: datasetModel.get('fromDatasetId', true)\n    }, SINGLE_REFERRING).models;\n  }\n  /**\n   * The rule should not be complex, otherwise user might not\n   * be able to known where the data is wrong.\n   * The code is ugly, but how to make it neat?\n   */\n\n\n  function guessOrdinal(source, dimIndex) {\n    return doGuessOrdinal(source.data, source.sourceFormat, source.seriesLayoutBy, source.dimensionsDefine, source.startIndex, dimIndex);\n  } // dimIndex may be overflow source data.\n  // return {BE_ORDINAL}\n\n\n  function doGuessOrdinal(data, sourceFormat, seriesLayoutBy, dimensionsDefine, startIndex, dimIndex) {\n    var result; // Experience value.\n\n    var maxLoop = 5;\n\n    if (isTypedArray(data)) {\n      return BE_ORDINAL.Not;\n    } // When sourceType is 'objectRows' or 'keyedColumns', dimensionsDefine\n    // always exists in source.\n\n\n    var dimName;\n    var dimType;\n\n    if (dimensionsDefine) {\n      var dimDefItem = dimensionsDefine[dimIndex];\n\n      if (isObject(dimDefItem)) {\n        dimName = dimDefItem.name;\n        dimType = dimDefItem.type;\n      } else if (isString(dimDefItem)) {\n        dimName = dimDefItem;\n      }\n    }\n\n    if (dimType != null) {\n      return dimType === 'ordinal' ? BE_ORDINAL.Must : BE_ORDINAL.Not;\n    }\n\n    if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n      var dataArrayRows = data;\n\n      if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n        var sample = dataArrayRows[dimIndex];\n\n        for (var i = 0; i < (sample || []).length && i < maxLoop; i++) {\n          if ((result = detectValue(sample[startIndex + i])) != null) {\n            return result;\n          }\n        }\n      } else {\n        for (var i = 0; i < dataArrayRows.length && i < maxLoop; i++) {\n          var row = dataArrayRows[startIndex + i];\n\n          if (row && (result = detectValue(row[dimIndex])) != null) {\n            return result;\n          }\n        }\n      }\n    } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n      var dataObjectRows = data;\n\n      if (!dimName) {\n        return BE_ORDINAL.Not;\n      }\n\n      for (var i = 0; i < dataObjectRows.length && i < maxLoop; i++) {\n        var item = dataObjectRows[i];\n\n        if (item && (result = detectValue(item[dimName])) != null) {\n          return result;\n        }\n      }\n    } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n      var dataKeyedColumns = data;\n\n      if (!dimName) {\n        return BE_ORDINAL.Not;\n      }\n\n      var sample = dataKeyedColumns[dimName];\n\n      if (!sample || isTypedArray(sample)) {\n        return BE_ORDINAL.Not;\n      }\n\n      for (var i = 0; i < sample.length && i < maxLoop; i++) {\n        if ((result = detectValue(sample[i])) != null) {\n          return result;\n        }\n      }\n    } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n      var dataOriginal = data;\n\n      for (var i = 0; i < dataOriginal.length && i < maxLoop; i++) {\n        var item = dataOriginal[i];\n        var val = getDataItemValue(item);\n\n        if (!isArray(val)) {\n          return BE_ORDINAL.Not;\n        }\n\n        if ((result = detectValue(val[dimIndex])) != null) {\n          return result;\n        }\n      }\n    }\n\n    function detectValue(val) {\n      var beStr = isString(val); // Consider usage convenience, '1', '2' will be treated as \"number\".\n      // `isFinit('')` get `true`.\n\n      if (val != null && isFinite(val) && val !== '') {\n        return beStr ? BE_ORDINAL.Might : BE_ORDINAL.Not;\n      } else if (beStr && val !== '-') {\n        return BE_ORDINAL.Must;\n      }\n    }\n\n    return BE_ORDINAL.Not;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var internalOptionCreatorMap = createHashMap();\n\n  function registerInternalOptionCreator(mainType, creator) {\n    assert(internalOptionCreatorMap.get(mainType) == null && creator);\n    internalOptionCreatorMap.set(mainType, creator);\n  }\n\n  function concatInternalOptions(ecModel, mainType, newCmptOptionList) {\n    var internalOptionCreator = internalOptionCreatorMap.get(mainType);\n\n    if (!internalOptionCreator) {\n      return newCmptOptionList;\n    }\n\n    var internalOptions = internalOptionCreator(ecModel);\n\n    if (!internalOptions) {\n      return newCmptOptionList;\n    }\n\n    {\n      for (var i = 0; i < internalOptions.length; i++) {\n        assert(isComponentIdInternal(internalOptions[i]));\n      }\n    }\n    return newCmptOptionList.concat(internalOptions);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var innerColor = makeInner();\n  var innerDecal = makeInner();\n\n  var PaletteMixin =\n  /** @class */\n  function () {\n    function PaletteMixin() {}\n\n    PaletteMixin.prototype.getColorFromPalette = function (name, scope, requestNum) {\n      var defaultPalette = normalizeToArray(this.get('color', true));\n      var layeredPalette = this.get('colorLayer', true);\n      return getFromPalette(this, innerColor, defaultPalette, layeredPalette, name, scope, requestNum);\n    };\n\n    PaletteMixin.prototype.clearColorPalette = function () {\n      clearPalette(this, innerColor);\n    };\n\n    return PaletteMixin;\n  }();\n\n  function getNearestPalette(palettes, requestColorNum) {\n    var paletteNum = palettes.length; // TODO palettes must be in order\n\n    for (var i = 0; i < paletteNum; i++) {\n      if (palettes[i].length > requestColorNum) {\n        return palettes[i];\n      }\n    }\n\n    return palettes[paletteNum - 1];\n  }\n  /**\n   * @param name MUST NOT be null/undefined. Otherwise call this function\n   *             twise with the same parameters will get different result.\n   * @param scope default this.\n   * @return Can be null/undefined\n   */\n\n\n  function getFromPalette(that, inner, defaultPalette, layeredPalette, name, scope, requestNum) {\n    scope = scope || that;\n    var scopeFields = inner(scope);\n    var paletteIdx = scopeFields.paletteIdx || 0;\n    var paletteNameMap = scopeFields.paletteNameMap = scopeFields.paletteNameMap || {}; // Use `hasOwnProperty` to avoid conflict with Object.prototype.\n\n    if (paletteNameMap.hasOwnProperty(name)) {\n      return paletteNameMap[name];\n    }\n\n    var palette = requestNum == null || !layeredPalette ? defaultPalette : getNearestPalette(layeredPalette, requestNum); // In case can't find in layered color palette.\n\n    palette = palette || defaultPalette;\n\n    if (!palette || !palette.length) {\n      return;\n    }\n\n    var pickedPaletteItem = palette[paletteIdx];\n\n    if (name) {\n      paletteNameMap[name] = pickedPaletteItem;\n    }\n\n    scopeFields.paletteIdx = (paletteIdx + 1) % palette.length;\n    return pickedPaletteItem;\n  }\n\n  function clearPalette(that, inner) {\n    inner(that).paletteIdx = 0;\n    inner(that).paletteNameMap = {};\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Caution: If the mechanism should be changed some day, these cases\n   * should be considered:\n   *\n   * (1) In `merge option` mode, if using the same option to call `setOption`\n   * many times, the result should be the same (try our best to ensure that).\n   * (2) In `merge option` mode, if a component has no id/name specified, it\n   * will be merged by index, and the result sequence of the components is\n   * consistent to the original sequence.\n   * (3) In `replaceMerge` mode, keep the result sequence of the components is\n   * consistent to the original sequence, even though there might result in \"hole\".\n   * (4) `reset` feature (in toolbox). Find detailed info in comments about\n   * `mergeOption` in module:echarts/model/OptionManager.\n   */\n  // Internal method names:\n  // -----------------------\n\n\n  var reCreateSeriesIndices;\n  var assertSeriesInitialized;\n  var initBase;\n  var OPTION_INNER_KEY = '\\0_ec_inner';\n  var OPTION_INNER_VALUE = 1;\n  var BUITIN_COMPONENTS_MAP = {\n    grid: 'GridComponent',\n    polar: 'PolarComponent',\n    geo: 'GeoComponent',\n    singleAxis: 'SingleAxisComponent',\n    parallel: 'ParallelComponent',\n    calendar: 'CalendarComponent',\n    graphic: 'GraphicComponent',\n    toolbox: 'ToolboxComponent',\n    tooltip: 'TooltipComponent',\n    axisPointer: 'AxisPointerComponent',\n    brush: 'BrushComponent',\n    title: 'TitleComponent',\n    timeline: 'TimelineComponent',\n    markPoint: 'MarkPointComponent',\n    markLine: 'MarkLineComponent',\n    markArea: 'MarkAreaComponent',\n    legend: 'LegendComponent',\n    dataZoom: 'DataZoomComponent',\n    visualMap: 'VisualMapComponent',\n    // aria: 'AriaComponent',\n    // dataset: 'DatasetComponent',\n    // Dependencies\n    xAxis: 'GridComponent',\n    yAxis: 'GridComponent',\n    angleAxis: 'PolarComponent',\n    radiusAxis: 'PolarComponent'\n  };\n  var BUILTIN_CHARTS_MAP = {\n    line: 'LineChart',\n    bar: 'BarChart',\n    pie: 'PieChart',\n    scatter: 'ScatterChart',\n    radar: 'RadarChart',\n    map: 'MapChart',\n    tree: 'TreeChart',\n    treemap: 'TreemapChart',\n    graph: 'GraphChart',\n    gauge: 'GaugeChart',\n    funnel: 'FunnelChart',\n    parallel: 'ParallelChart',\n    sankey: 'SankeyChart',\n    boxplot: 'BoxplotChart',\n    candlestick: 'CandlestickChart',\n    effectScatter: 'EffectScatterChart',\n    lines: 'LinesChart',\n    heatmap: 'HeatmapChart',\n    pictorialBar: 'PictorialBarChart',\n    themeRiver: 'ThemeRiverChart',\n    sunburst: 'SunburstChart',\n    custom: 'CustomChart'\n  };\n  var componetsMissingLogPrinted = {};\n\n  function checkMissingComponents(option) {\n    each(option, function (componentOption, mainType) {\n      if (!ComponentModel.hasClass(mainType)) {\n        var componentImportName = BUITIN_COMPONENTS_MAP[mainType];\n\n        if (componentImportName && !componetsMissingLogPrinted[componentImportName]) {\n          error(\"Component \" + mainType + \" is used but not imported.\\nimport { \" + componentImportName + \" } from 'echarts/components';\\necharts.use([\" + componentImportName + \"]);\");\n          componetsMissingLogPrinted[componentImportName] = true;\n        }\n      }\n    });\n  }\n\n  var GlobalModel =\n  /** @class */\n  function (_super) {\n    __extends(GlobalModel, _super);\n\n    function GlobalModel() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    GlobalModel.prototype.init = function (option, parentModel, ecModel, theme, locale, optionManager) {\n      theme = theme || {};\n      this.option = null; // Mark as not initialized.\n\n      this._theme = new Model(theme);\n      this._locale = new Model(locale);\n      this._optionManager = optionManager;\n    };\n\n    GlobalModel.prototype.setOption = function (option, opts, optionPreprocessorFuncs) {\n      {\n        assert(option != null, 'option is null/undefined');\n        assert(option[OPTION_INNER_KEY] !== OPTION_INNER_VALUE, 'please use chart.getOption()');\n      }\n      var innerOpt = normalizeSetOptionInput(opts);\n\n      this._optionManager.setOption(option, optionPreprocessorFuncs, innerOpt);\n\n      this._resetOption(null, innerOpt);\n    };\n    /**\n     * @param type null/undefined: reset all.\n     *        'recreate': force recreate all.\n     *        'timeline': only reset timeline option\n     *        'media': only reset media query option\n     * @return Whether option changed.\n     */\n\n\n    GlobalModel.prototype.resetOption = function (type, opt) {\n      return this._resetOption(type, normalizeSetOptionInput(opt));\n    };\n\n    GlobalModel.prototype._resetOption = function (type, opt) {\n      var optionChanged = false;\n      var optionManager = this._optionManager;\n\n      if (!type || type === 'recreate') {\n        var baseOption = optionManager.mountOption(type === 'recreate');\n        {\n          checkMissingComponents(baseOption);\n        }\n\n        if (!this.option || type === 'recreate') {\n          initBase(this, baseOption);\n        } else {\n          this.restoreData();\n\n          this._mergeOption(baseOption, opt);\n        }\n\n        optionChanged = true;\n      }\n\n      if (type === 'timeline' || type === 'media') {\n        this.restoreData();\n      } // By design, if `setOption(option2)` at the second time, and `option2` is a `ECUnitOption`,\n      // it should better not have the same props with `MediaUnit['option']`.\n      // Becuase either `option2` or `MediaUnit['option']` will be always merged to \"current option\"\n      // rather than original \"baseOption\". If they both override a prop, the result might be\n      // unexpected when media state changed after `setOption` called.\n      // If we really need to modify a props in each `MediaUnit['option']`, use the full version\n      // (`{baseOption, media}`) in `setOption`.\n      // For `timeline`, the case is the same.\n\n\n      if (!type || type === 'recreate' || type === 'timeline') {\n        var timelineOption = optionManager.getTimelineOption(this);\n\n        if (timelineOption) {\n          optionChanged = true;\n\n          this._mergeOption(timelineOption, opt);\n        }\n      }\n\n      if (!type || type === 'recreate' || type === 'media') {\n        var mediaOptions = optionManager.getMediaOption(this);\n\n        if (mediaOptions.length) {\n          each(mediaOptions, function (mediaOption) {\n            optionChanged = true;\n\n            this._mergeOption(mediaOption, opt);\n          }, this);\n        }\n      }\n\n      return optionChanged;\n    };\n\n    GlobalModel.prototype.mergeOption = function (option) {\n      this._mergeOption(option, null);\n    };\n\n    GlobalModel.prototype._mergeOption = function (newOption, opt) {\n      var option = this.option;\n      var componentsMap = this._componentsMap;\n      var componentsCount = this._componentsCount;\n      var newCmptTypes = [];\n      var newCmptTypeMap = createHashMap();\n      var replaceMergeMainTypeMap = opt && opt.replaceMergeMainTypeMap;\n      resetSourceDefaulter(this); // If no component class, merge directly.\n      // For example: color, animaiton options, etc.\n\n      each(newOption, function (componentOption, mainType) {\n        if (componentOption == null) {\n          return;\n        }\n\n        if (!ComponentModel.hasClass(mainType)) {\n          // globalSettingTask.dirty();\n          option[mainType] = option[mainType] == null ? clone(componentOption) : merge(option[mainType], componentOption, true);\n        } else if (mainType) {\n          newCmptTypes.push(mainType);\n          newCmptTypeMap.set(mainType, true);\n        }\n      });\n\n      if (replaceMergeMainTypeMap) {\n        // If there is a mainType `xxx` in `replaceMerge` but not declared in option,\n        // we trade it as it is declared in option as `{xxx: []}`. Because:\n        // (1) for normal merge, `{xxx: null/undefined}` are the same meaning as `{xxx: []}`.\n        // (2) some preprocessor may convert some of `{xxx: null/undefined}` to `{xxx: []}`.\n        replaceMergeMainTypeMap.each(function (val, mainTypeInReplaceMerge) {\n          if (ComponentModel.hasClass(mainTypeInReplaceMerge) && !newCmptTypeMap.get(mainTypeInReplaceMerge)) {\n            newCmptTypes.push(mainTypeInReplaceMerge);\n            newCmptTypeMap.set(mainTypeInReplaceMerge, true);\n          }\n        });\n      }\n\n      ComponentModel.topologicalTravel(newCmptTypes, ComponentModel.getAllClassMainTypes(), visitComponent, this);\n\n      function visitComponent(mainType) {\n        var newCmptOptionList = concatInternalOptions(this, mainType, normalizeToArray(newOption[mainType]));\n        var oldCmptList = componentsMap.get(mainType);\n        var mergeMode = // `!oldCmptList` means init. See the comment in `mappingToExists`\n        !oldCmptList ? 'replaceAll' : replaceMergeMainTypeMap && replaceMergeMainTypeMap.get(mainType) ? 'replaceMerge' : 'normalMerge';\n        var mappingResult = mappingToExists(oldCmptList, newCmptOptionList, mergeMode); // Set mainType and complete subType.\n\n        setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel); // Empty it before the travel, in order to prevent `this._componentsMap`\n        // from being used in the `init`/`mergeOption`/`optionUpdated` of some\n        // components, which is probably incorrect logic.\n\n        option[mainType] = null;\n        componentsMap.set(mainType, null);\n        componentsCount.set(mainType, 0);\n        var optionsByMainType = [];\n        var cmptsByMainType = [];\n        var cmptsCountByMainType = 0;\n        var tooltipExists;\n        var tooltipWarningLogged;\n        each(mappingResult, function (resultItem, index) {\n          var componentModel = resultItem.existing;\n          var newCmptOption = resultItem.newOption;\n\n          if (!newCmptOption) {\n            if (componentModel) {\n              // Consider where is no new option and should be merged using {},\n              // see removeEdgeAndAdd in topologicalTravel and\n              // ComponentModel.getAllClassMainTypes.\n              componentModel.mergeOption({}, this);\n              componentModel.optionUpdated({}, false);\n            } // If no both `resultItem.exist` and `resultItem.option`,\n            // either it is in `replaceMerge` and not matched by any id,\n            // or it has been removed in previous `replaceMerge` and left a \"hole\" in this component index.\n\n          } else {\n            var isSeriesType = mainType === 'series';\n            var ComponentModelClass = ComponentModel.getClass(mainType, resultItem.keyInfo.subType, !isSeriesType // Give a more detailed warn later if series don't exists\n            );\n\n            if (!ComponentModelClass) {\n              {\n                var subType = resultItem.keyInfo.subType;\n                var seriesImportName = BUILTIN_CHARTS_MAP[subType];\n\n                if (!componetsMissingLogPrinted[subType]) {\n                  componetsMissingLogPrinted[subType] = true;\n\n                  if (seriesImportName) {\n                    error(\"Series \" + subType + \" is used but not imported.\\nimport { \" + seriesImportName + \" } from 'echarts/charts';\\necharts.use([\" + seriesImportName + \"]);\");\n                  } else {\n                    error(\"Unkown series \" + subType);\n                  }\n                }\n              }\n              return;\n            } // TODO Before multiple tooltips get supported, we do this check to avoid unexpected exception.\n\n\n            if (mainType === 'tooltip') {\n              if (tooltipExists) {\n                {\n                  if (!tooltipWarningLogged) {\n                    warn('Currently only one tooltip component is allowed.');\n                    tooltipWarningLogged = true;\n                  }\n                }\n                return;\n              }\n\n              tooltipExists = true;\n            }\n\n            if (componentModel && componentModel.constructor === ComponentModelClass) {\n              componentModel.name = resultItem.keyInfo.name; // componentModel.settingTask && componentModel.settingTask.dirty();\n\n              componentModel.mergeOption(newCmptOption, this);\n              componentModel.optionUpdated(newCmptOption, false);\n            } else {\n              // PENDING Global as parent ?\n              var extraOpt = extend({\n                componentIndex: index\n              }, resultItem.keyInfo);\n              componentModel = new ComponentModelClass(newCmptOption, this, this, extraOpt); // Assign `keyInfo`\n\n              extend(componentModel, extraOpt);\n\n              if (resultItem.brandNew) {\n                componentModel.__requireNewView = true;\n              }\n\n              componentModel.init(newCmptOption, this, this); // Call optionUpdated after init.\n              // newCmptOption has been used as componentModel.option\n              // and may be merged with theme and default, so pass null\n              // to avoid confusion.\n\n              componentModel.optionUpdated(null, true);\n            }\n          }\n\n          if (componentModel) {\n            optionsByMainType.push(componentModel.option);\n            cmptsByMainType.push(componentModel);\n            cmptsCountByMainType++;\n          } else {\n            // Always do assign to avoid elided item in array.\n            optionsByMainType.push(void 0);\n            cmptsByMainType.push(void 0);\n          }\n        }, this);\n        option[mainType] = optionsByMainType;\n        componentsMap.set(mainType, cmptsByMainType);\n        componentsCount.set(mainType, cmptsCountByMainType); // Backup series for filtering.\n\n        if (mainType === 'series') {\n          reCreateSeriesIndices(this);\n        }\n      } // If no series declared, ensure `_seriesIndices` initialized.\n\n\n      if (!this._seriesIndices) {\n        reCreateSeriesIndices(this);\n      }\n    };\n    /**\n     * Get option for output (cloned option and inner info removed)\n     */\n\n\n    GlobalModel.prototype.getOption = function () {\n      var option = clone(this.option);\n      each(option, function (optInMainType, mainType) {\n        if (ComponentModel.hasClass(mainType)) {\n          var opts = normalizeToArray(optInMainType); // Inner cmpts need to be removed.\n          // Inner cmpts might not be at last since ec5.0, but still\n          // compatible for users: if inner cmpt at last, splice the returned array.\n\n          var realLen = opts.length;\n          var metNonInner = false;\n\n          for (var i = realLen - 1; i >= 0; i--) {\n            // Remove options with inner id.\n            if (opts[i] && !isComponentIdInternal(opts[i])) {\n              metNonInner = true;\n            } else {\n              opts[i] = null;\n              !metNonInner && realLen--;\n            }\n          }\n\n          opts.length = realLen;\n          option[mainType] = opts;\n        }\n      });\n      delete option[OPTION_INNER_KEY];\n      return option;\n    };\n\n    GlobalModel.prototype.getTheme = function () {\n      return this._theme;\n    };\n\n    GlobalModel.prototype.getLocaleModel = function () {\n      return this._locale;\n    };\n\n    GlobalModel.prototype.setUpdatePayload = function (payload) {\n      this._payload = payload;\n    };\n\n    GlobalModel.prototype.getUpdatePayload = function () {\n      return this._payload;\n    };\n    /**\n     * @param idx If not specified, return the first one.\n     */\n\n\n    GlobalModel.prototype.getComponent = function (mainType, idx) {\n      var list = this._componentsMap.get(mainType);\n\n      if (list) {\n        var cmpt = list[idx || 0];\n\n        if (cmpt) {\n          return cmpt;\n        } else if (idx == null) {\n          for (var i = 0; i < list.length; i++) {\n            if (list[i]) {\n              return list[i];\n            }\n          }\n        }\n      }\n    };\n    /**\n     * @return Never be null/undefined.\n     */\n\n\n    GlobalModel.prototype.queryComponents = function (condition) {\n      var mainType = condition.mainType;\n\n      if (!mainType) {\n        return [];\n      }\n\n      var index = condition.index;\n      var id = condition.id;\n      var name = condition.name;\n\n      var cmpts = this._componentsMap.get(mainType);\n\n      if (!cmpts || !cmpts.length) {\n        return [];\n      }\n\n      var result;\n\n      if (index != null) {\n        result = [];\n        each(normalizeToArray(index), function (idx) {\n          cmpts[idx] && result.push(cmpts[idx]);\n        });\n      } else if (id != null) {\n        result = queryByIdOrName('id', id, cmpts);\n      } else if (name != null) {\n        result = queryByIdOrName('name', name, cmpts);\n      } else {\n        // Return all non-empty components in that mainType\n        result = filter(cmpts, function (cmpt) {\n          return !!cmpt;\n        });\n      }\n\n      return filterBySubType(result, condition);\n    };\n    /**\n     * The interface is different from queryComponents,\n     * which is convenient for inner usage.\n     *\n     * @usage\n     * let result = findComponents(\n     *     {mainType: 'dataZoom', query: {dataZoomId: 'abc'}}\n     * );\n     * let result = findComponents(\n     *     {mainType: 'series', subType: 'pie', query: {seriesName: 'uio'}}\n     * );\n     * let result = findComponents(\n     *     {mainType: 'series',\n     *     filter: function (model, index) {...}}\n     * );\n     * // result like [component0, componnet1, ...]\n     */\n\n\n    GlobalModel.prototype.findComponents = function (condition) {\n      var query = condition.query;\n      var mainType = condition.mainType;\n      var queryCond = getQueryCond(query);\n      var result = queryCond ? this.queryComponents(queryCond) // Retrieve all non-empty components.\n      : filter(this._componentsMap.get(mainType), function (cmpt) {\n        return !!cmpt;\n      });\n      return doFilter(filterBySubType(result, condition));\n\n      function getQueryCond(q) {\n        var indexAttr = mainType + 'Index';\n        var idAttr = mainType + 'Id';\n        var nameAttr = mainType + 'Name';\n        return q && (q[indexAttr] != null || q[idAttr] != null || q[nameAttr] != null) ? {\n          mainType: mainType,\n          // subType will be filtered finally.\n          index: q[indexAttr],\n          id: q[idAttr],\n          name: q[nameAttr]\n        } : null;\n      }\n\n      function doFilter(res) {\n        return condition.filter ? filter(res, condition.filter) : res;\n      }\n    };\n\n    GlobalModel.prototype.eachComponent = function (mainType, cb, context) {\n      var componentsMap = this._componentsMap;\n\n      if (isFunction(mainType)) {\n        var ctxForAll_1 = cb;\n        var cbForAll_1 = mainType;\n        componentsMap.each(function (cmpts, componentType) {\n          for (var i = 0; cmpts && i < cmpts.length; i++) {\n            var cmpt = cmpts[i];\n            cmpt && cbForAll_1.call(ctxForAll_1, componentType, cmpt, cmpt.componentIndex);\n          }\n        });\n      } else {\n        var cmpts = isString(mainType) ? componentsMap.get(mainType) : isObject(mainType) ? this.findComponents(mainType) : null;\n\n        for (var i = 0; cmpts && i < cmpts.length; i++) {\n          var cmpt = cmpts[i];\n          cmpt && cb.call(context, cmpt, cmpt.componentIndex);\n        }\n      }\n    };\n    /**\n     * Get series list before filtered by name.\n     */\n\n\n    GlobalModel.prototype.getSeriesByName = function (name) {\n      var nameStr = convertOptionIdName(name, null);\n      return filter(this._componentsMap.get('series'), function (oneSeries) {\n        return !!oneSeries && nameStr != null && oneSeries.name === nameStr;\n      });\n    };\n    /**\n     * Get series list before filtered by index.\n     */\n\n\n    GlobalModel.prototype.getSeriesByIndex = function (seriesIndex) {\n      return this._componentsMap.get('series')[seriesIndex];\n    };\n    /**\n     * Get series list before filtered by type.\n     * FIXME: rename to getRawSeriesByType?\n     */\n\n\n    GlobalModel.prototype.getSeriesByType = function (subType) {\n      return filter(this._componentsMap.get('series'), function (oneSeries) {\n        return !!oneSeries && oneSeries.subType === subType;\n      });\n    };\n    /**\n     * Get all series before filtered.\n     */\n\n\n    GlobalModel.prototype.getSeries = function () {\n      return filter(this._componentsMap.get('series'), function (oneSeries) {\n        return !!oneSeries;\n      });\n    };\n    /**\n     * Count series before filtered.\n     */\n\n\n    GlobalModel.prototype.getSeriesCount = function () {\n      return this._componentsCount.get('series');\n    };\n    /**\n     * After filtering, series may be different\n     * frome raw series.\n     */\n\n\n    GlobalModel.prototype.eachSeries = function (cb, context) {\n      assertSeriesInitialized(this);\n      each(this._seriesIndices, function (rawSeriesIndex) {\n        var series = this._componentsMap.get('series')[rawSeriesIndex];\n\n        cb.call(context, series, rawSeriesIndex);\n      }, this);\n    };\n    /**\n     * Iterate raw series before filtered.\n     *\n     * @param {Function} cb\n     * @param {*} context\n     */\n\n\n    GlobalModel.prototype.eachRawSeries = function (cb, context) {\n      each(this._componentsMap.get('series'), function (series) {\n        series && cb.call(context, series, series.componentIndex);\n      });\n    };\n    /**\n     * After filtering, series may be different.\n     * frome raw series.\n     */\n\n\n    GlobalModel.prototype.eachSeriesByType = function (subType, cb, context) {\n      assertSeriesInitialized(this);\n      each(this._seriesIndices, function (rawSeriesIndex) {\n        var series = this._componentsMap.get('series')[rawSeriesIndex];\n\n        if (series.subType === subType) {\n          cb.call(context, series, rawSeriesIndex);\n        }\n      }, this);\n    };\n    /**\n     * Iterate raw series before filtered of given type.\n     */\n\n\n    GlobalModel.prototype.eachRawSeriesByType = function (subType, cb, context) {\n      return each(this.getSeriesByType(subType), cb, context);\n    };\n\n    GlobalModel.prototype.isSeriesFiltered = function (seriesModel) {\n      assertSeriesInitialized(this);\n      return this._seriesIndicesMap.get(seriesModel.componentIndex) == null;\n    };\n\n    GlobalModel.prototype.getCurrentSeriesIndices = function () {\n      return (this._seriesIndices || []).slice();\n    };\n\n    GlobalModel.prototype.filterSeries = function (cb, context) {\n      assertSeriesInitialized(this);\n      var newSeriesIndices = [];\n      each(this._seriesIndices, function (seriesRawIdx) {\n        var series = this._componentsMap.get('series')[seriesRawIdx];\n\n        cb.call(context, series, seriesRawIdx) && newSeriesIndices.push(seriesRawIdx);\n      }, this);\n      this._seriesIndices = newSeriesIndices;\n      this._seriesIndicesMap = createHashMap(newSeriesIndices);\n    };\n\n    GlobalModel.prototype.restoreData = function (payload) {\n      reCreateSeriesIndices(this);\n      var componentsMap = this._componentsMap;\n      var componentTypes = [];\n      componentsMap.each(function (components, componentType) {\n        if (ComponentModel.hasClass(componentType)) {\n          componentTypes.push(componentType);\n        }\n      });\n      ComponentModel.topologicalTravel(componentTypes, ComponentModel.getAllClassMainTypes(), function (componentType) {\n        each(componentsMap.get(componentType), function (component) {\n          if (component && (componentType !== 'series' || !isNotTargetSeries(component, payload))) {\n            component.restoreData();\n          }\n        });\n      });\n    };\n\n    GlobalModel.internalField = function () {\n      reCreateSeriesIndices = function (ecModel) {\n        var seriesIndices = ecModel._seriesIndices = [];\n        each(ecModel._componentsMap.get('series'), function (series) {\n          // series may have been removed by `replaceMerge`.\n          series && seriesIndices.push(series.componentIndex);\n        });\n        ecModel._seriesIndicesMap = createHashMap(seriesIndices);\n      };\n\n      assertSeriesInitialized = function (ecModel) {\n        // Components that use _seriesIndices should depends on series component,\n        // which make sure that their initialization is after series.\n        {\n          if (!ecModel._seriesIndices) {\n            throw new Error('Option should contains series.');\n          }\n        }\n      };\n\n      initBase = function (ecModel, baseOption) {\n        // Using OPTION_INNER_KEY to mark that this option can not be used outside,\n        // i.e. `chart.setOption(chart.getModel().option);` is forbiden.\n        ecModel.option = {};\n        ecModel.option[OPTION_INNER_KEY] = OPTION_INNER_VALUE; // Init with series: [], in case of calling findSeries method\n        // before series initialized.\n\n        ecModel._componentsMap = createHashMap({\n          series: []\n        });\n        ecModel._componentsCount = createHashMap(); // If user spefied `option.aria`, aria will be enable. This detection should be\n        // performed before theme and globalDefault merge.\n\n        var airaOption = baseOption.aria;\n\n        if (isObject(airaOption) && airaOption.enabled == null) {\n          airaOption.enabled = true;\n        }\n\n        mergeTheme(baseOption, ecModel._theme.option); // TODO Needs clone when merging to the unexisted property\n\n        merge(baseOption, globalDefault, false);\n\n        ecModel._mergeOption(baseOption, null);\n      };\n    }();\n\n    return GlobalModel;\n  }(Model);\n\n  function isNotTargetSeries(seriesModel, payload) {\n    if (payload) {\n      var index = payload.seriesIndex;\n      var id = payload.seriesId;\n      var name_1 = payload.seriesName;\n      return index != null && seriesModel.componentIndex !== index || id != null && seriesModel.id !== id || name_1 != null && seriesModel.name !== name_1;\n    }\n  }\n\n  function mergeTheme(option, theme) {\n    // PENDING\n    // NOT use `colorLayer` in theme if option has `color`\n    var notMergeColorLayer = option.color && !option.colorLayer;\n    each(theme, function (themeItem, name) {\n      if (name === 'colorLayer' && notMergeColorLayer) {\n        return;\n      } // If it is component model mainType, the model handles that merge later.\n      // otherwise, merge them here.\n\n\n      if (!ComponentModel.hasClass(name)) {\n        if (typeof themeItem === 'object') {\n          option[name] = !option[name] ? clone(themeItem) : merge(option[name], themeItem, false);\n        } else {\n          if (option[name] == null) {\n            option[name] = themeItem;\n          }\n        }\n      }\n    });\n  }\n\n  function queryByIdOrName(attr, idOrName, cmpts) {\n    // Here is a break from echarts4: string and number are\n    // treated as equal.\n    if (isArray(idOrName)) {\n      var keyMap_1 = createHashMap();\n      each(idOrName, function (idOrNameItem) {\n        if (idOrNameItem != null) {\n          var idName = convertOptionIdName(idOrNameItem, null);\n          idName != null && keyMap_1.set(idOrNameItem, true);\n        }\n      });\n      return filter(cmpts, function (cmpt) {\n        return cmpt && keyMap_1.get(cmpt[attr]);\n      });\n    } else {\n      var idName_1 = convertOptionIdName(idOrName, null);\n      return filter(cmpts, function (cmpt) {\n        return cmpt && idName_1 != null && cmpt[attr] === idName_1;\n      });\n    }\n  }\n\n  function filterBySubType(components, condition) {\n    // Using hasOwnProperty for restrict. Consider\n    // subType is undefined in user payload.\n    return condition.hasOwnProperty('subType') ? filter(components, function (cmpt) {\n      return cmpt && cmpt.subType === condition.subType;\n    }) : components;\n  }\n\n  function normalizeSetOptionInput(opts) {\n    var replaceMergeMainTypeMap = createHashMap();\n    opts && each(normalizeToArray(opts.replaceMerge), function (mainType) {\n      {\n        assert(ComponentModel.hasClass(mainType), '\"' + mainType + '\" is not valid component main type in \"replaceMerge\"');\n      }\n      replaceMergeMainTypeMap.set(mainType, true);\n    });\n    return {\n      replaceMergeMainTypeMap: replaceMergeMainTypeMap\n    };\n  }\n\n  mixin(GlobalModel, PaletteMixin);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var availableMethods = ['getDom', 'getZr', 'getWidth', 'getHeight', 'getDevicePixelRatio', 'dispatchAction', 'isSSR', 'isDisposed', 'on', 'off', 'getDataURL', 'getConnectedDataURL', // 'getModel',\n  'getOption', // 'getViewOfComponentModel',\n  // 'getViewOfSeriesModel',\n  'getId', 'updateLabelLayout'];\n\n  var ExtensionAPI =\n  /** @class */\n  function () {\n    function ExtensionAPI(ecInstance) {\n      each(availableMethods, function (methodName) {\n        this[methodName] = bind(ecInstance[methodName], ecInstance);\n      }, this);\n    }\n\n    return ExtensionAPI;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var coordinateSystemCreators = {};\n\n  var CoordinateSystemManager =\n  /** @class */\n  function () {\n    function CoordinateSystemManager() {\n      this._coordinateSystems = [];\n    }\n\n    CoordinateSystemManager.prototype.create = function (ecModel, api) {\n      var coordinateSystems = [];\n      each(coordinateSystemCreators, function (creater, type) {\n        var list = creater.create(ecModel, api);\n        coordinateSystems = coordinateSystems.concat(list || []);\n      });\n      this._coordinateSystems = coordinateSystems;\n    };\n\n    CoordinateSystemManager.prototype.update = function (ecModel, api) {\n      each(this._coordinateSystems, function (coordSys) {\n        coordSys.update && coordSys.update(ecModel, api);\n      });\n    };\n\n    CoordinateSystemManager.prototype.getCoordinateSystems = function () {\n      return this._coordinateSystems.slice();\n    };\n\n    CoordinateSystemManager.register = function (type, creator) {\n      coordinateSystemCreators[type] = creator;\n    };\n\n    CoordinateSystemManager.get = function (type) {\n      return coordinateSystemCreators[type];\n    };\n\n    return CoordinateSystemManager;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var QUERY_REG = /^(min|max)?(.+)$/; // Key: mainType\n  // type FakeComponentsMap = HashMap<(MappingExistingItem & { subType: string })[]>;\n\n  /**\n   * TERM EXPLANATIONS:\n   * See `ECOption` and `ECUnitOption` in `src/util/types.ts`.\n   */\n\n  var OptionManager =\n  /** @class */\n  function () {\n    // timeline.notMerge is not supported in ec3. Firstly there is rearly\n    // case that notMerge is needed. Secondly supporting 'notMerge' requires\n    // rawOption cloned and backuped when timeline changed, which does no\n    // good to performance. What's more, that both timeline and setOption\n    // method supply 'notMerge' brings complex and some problems.\n    // Consider this case:\n    // (step1) chart.setOption({timeline: {notMerge: false}, ...}, false);\n    // (step2) chart.setOption({timeline: {notMerge: true}, ...}, false);\n    function OptionManager(api) {\n      this._timelineOptions = [];\n      this._mediaList = [];\n      /**\n       * -1, means default.\n       * empty means no media.\n       */\n\n      this._currentMediaIndices = [];\n      this._api = api;\n    }\n\n    OptionManager.prototype.setOption = function (rawOption, optionPreprocessorFuncs, opt) {\n      if (rawOption) {\n        // That set dat primitive is dangerous if user reuse the data when setOption again.\n        each(normalizeToArray(rawOption.series), function (series) {\n          series && series.data && isTypedArray(series.data) && setAsPrimitive(series.data);\n        });\n        each(normalizeToArray(rawOption.dataset), function (dataset) {\n          dataset && dataset.source && isTypedArray(dataset.source) && setAsPrimitive(dataset.source);\n        });\n      } // Caution: some series modify option data, if do not clone,\n      // it should ensure that the repeat modify correctly\n      // (create a new object when modify itself).\n\n\n      rawOption = clone(rawOption); // FIXME\n      // If some property is set in timeline options or media option but\n      // not set in baseOption, a warning should be given.\n\n      var optionBackup = this._optionBackup;\n      var newParsedOption = parseRawOption(rawOption, optionPreprocessorFuncs, !optionBackup);\n      this._newBaseOption = newParsedOption.baseOption; // For setOption at second time (using merge mode);\n\n      if (optionBackup) {\n        // FIXME\n        // the restore merge solution is essentially incorrect.\n        // the mapping can not be 100% consistent with ecModel, which probably brings\n        // potential bug!\n        // The first merge is delayed, becuase in most cases, users do not call `setOption` twice.\n        // let fakeCmptsMap = this._fakeCmptsMap;\n        // if (!fakeCmptsMap) {\n        //     fakeCmptsMap = this._fakeCmptsMap = createHashMap();\n        //     mergeToBackupOption(fakeCmptsMap, null, optionBackup.baseOption, null);\n        // }\n        // mergeToBackupOption(\n        //     fakeCmptsMap, optionBackup.baseOption, newParsedOption.baseOption, opt\n        // );\n        // For simplicity, timeline options and media options do not support merge,\n        // that is, if you `setOption` twice and both has timeline options, the latter\n        // timeline opitons will not be merged to the formers, but just substitude them.\n        if (newParsedOption.timelineOptions.length) {\n          optionBackup.timelineOptions = newParsedOption.timelineOptions;\n        }\n\n        if (newParsedOption.mediaList.length) {\n          optionBackup.mediaList = newParsedOption.mediaList;\n        }\n\n        if (newParsedOption.mediaDefault) {\n          optionBackup.mediaDefault = newParsedOption.mediaDefault;\n        }\n      } else {\n        this._optionBackup = newParsedOption;\n      }\n    };\n\n    OptionManager.prototype.mountOption = function (isRecreate) {\n      var optionBackup = this._optionBackup;\n      this._timelineOptions = optionBackup.timelineOptions;\n      this._mediaList = optionBackup.mediaList;\n      this._mediaDefault = optionBackup.mediaDefault;\n      this._currentMediaIndices = [];\n      return clone(isRecreate // this._optionBackup.baseOption, which is created at the first `setOption`\n      // called, and is merged into every new option by inner method `mergeToBackupOption`\n      // each time `setOption` called, can be only used in `isRecreate`, because\n      // its reliability is under suspicion. In other cases option merge is\n      // performed by `model.mergeOption`.\n      ? optionBackup.baseOption : this._newBaseOption);\n    };\n\n    OptionManager.prototype.getTimelineOption = function (ecModel) {\n      var option;\n      var timelineOptions = this._timelineOptions;\n\n      if (timelineOptions.length) {\n        // getTimelineOption can only be called after ecModel inited,\n        // so we can get currentIndex from timelineModel.\n        var timelineModel = ecModel.getComponent('timeline');\n\n        if (timelineModel) {\n          option = clone( // FIXME:TS as TimelineModel or quivlant interface\n          timelineOptions[timelineModel.getCurrentIndex()]);\n        }\n      }\n\n      return option;\n    };\n\n    OptionManager.prototype.getMediaOption = function (ecModel) {\n      var ecWidth = this._api.getWidth();\n\n      var ecHeight = this._api.getHeight();\n\n      var mediaList = this._mediaList;\n      var mediaDefault = this._mediaDefault;\n      var indices = [];\n      var result = []; // No media defined.\n\n      if (!mediaList.length && !mediaDefault) {\n        return result;\n      } // Multi media may be applied, the latter defined media has higher priority.\n\n\n      for (var i = 0, len = mediaList.length; i < len; i++) {\n        if (applyMediaQuery(mediaList[i].query, ecWidth, ecHeight)) {\n          indices.push(i);\n        }\n      } // FIXME\n      // Whether mediaDefault should force users to provide? Otherwise\n      // the change by media query can not be recorvered.\n\n\n      if (!indices.length && mediaDefault) {\n        indices = [-1];\n      }\n\n      if (indices.length && !indicesEquals(indices, this._currentMediaIndices)) {\n        result = map(indices, function (index) {\n          return clone(index === -1 ? mediaDefault.option : mediaList[index].option);\n        });\n      } // Otherwise return nothing.\n\n\n      this._currentMediaIndices = indices;\n      return result;\n    };\n\n    return OptionManager;\n  }();\n  /**\n   * [RAW_OPTION_PATTERNS]\n   * (Note: \"series: []\" represents all other props in `ECUnitOption`)\n   *\n   * (1) No prop \"baseOption\" declared:\n   * Root option is used as \"baseOption\" (except prop \"options\" and \"media\").\n   * ```js\n   * option = {\n   *     series: [],\n   *     timeline: {},\n   *     options: [],\n   * };\n   * option = {\n   *     series: [],\n   *     media: {},\n   * };\n   * option = {\n   *     series: [],\n   *     timeline: {},\n   *     options: [],\n   *     media: {},\n   * }\n   * ```\n   *\n   * (2) Prop \"baseOption\" declared:\n   * If \"baseOption\" declared, `ECUnitOption` props can only be declared\n   * inside \"baseOption\" except prop \"timeline\" (compat ec2).\n   * ```js\n   * option = {\n   *     baseOption: {\n   *         timeline: {},\n   *         series: [],\n   *     },\n   *     options: []\n   * };\n   * option = {\n   *     baseOption: {\n   *         series: [],\n   *     },\n   *     media: []\n   * };\n   * option = {\n   *     baseOption: {\n   *         timeline: {},\n   *         series: [],\n   *     },\n   *     options: []\n   *     media: []\n   * };\n   * option = {\n   *     // ec3 compat ec2: allow (only) `timeline` declared\n   *     // outside baseOption. Keep this setting for compat.\n   *     timeline: {},\n   *     baseOption: {\n   *         series: [],\n   *     },\n   *     options: [],\n   *     media: []\n   * };\n   * ```\n   */\n\n\n  function parseRawOption( // `rawOption` May be modified\n  rawOption, optionPreprocessorFuncs, isNew) {\n    var mediaList = [];\n    var mediaDefault;\n    var baseOption;\n    var declaredBaseOption = rawOption.baseOption; // Compatible with ec2, [RAW_OPTION_PATTERNS] above.\n\n    var timelineOnRoot = rawOption.timeline;\n    var timelineOptionsOnRoot = rawOption.options;\n    var mediaOnRoot = rawOption.media;\n    var hasMedia = !!rawOption.media;\n    var hasTimeline = !!(timelineOptionsOnRoot || timelineOnRoot || declaredBaseOption && declaredBaseOption.timeline);\n\n    if (declaredBaseOption) {\n      baseOption = declaredBaseOption; // For merge option.\n\n      if (!baseOption.timeline) {\n        baseOption.timeline = timelineOnRoot;\n      }\n    } // For convenience, enable to use the root option as the `baseOption`:\n    // `{ ...normalOptionProps, media: [{ ... }, { ... }] }`\n    else {\n        if (hasTimeline || hasMedia) {\n          rawOption.options = rawOption.media = null;\n        }\n\n        baseOption = rawOption;\n      }\n\n    if (hasMedia) {\n      if (isArray(mediaOnRoot)) {\n        each(mediaOnRoot, function (singleMedia) {\n          {\n            // Real case of wrong config.\n            if (singleMedia && !singleMedia.option && isObject(singleMedia.query) && isObject(singleMedia.query.option)) {\n              error('Illegal media option. Must be like { media: [ { query: {}, option: {} } ] }');\n            }\n          }\n\n          if (singleMedia && singleMedia.option) {\n            if (singleMedia.query) {\n              mediaList.push(singleMedia);\n            } else if (!mediaDefault) {\n              // Use the first media default.\n              mediaDefault = singleMedia;\n            }\n          }\n        });\n      } else {\n        {\n          // Real case of wrong config.\n          error('Illegal media option. Must be an array. Like { media: [ {...}, {...} ] }');\n        }\n      }\n    }\n\n    doPreprocess(baseOption);\n    each(timelineOptionsOnRoot, function (option) {\n      return doPreprocess(option);\n    });\n    each(mediaList, function (media) {\n      return doPreprocess(media.option);\n    });\n\n    function doPreprocess(option) {\n      each(optionPreprocessorFuncs, function (preProcess) {\n        preProcess(option, isNew);\n      });\n    }\n\n    return {\n      baseOption: baseOption,\n      timelineOptions: timelineOptionsOnRoot || [],\n      mediaDefault: mediaDefault,\n      mediaList: mediaList\n    };\n  }\n  /**\n   * @see <http://www.w3.org/TR/css3-mediaqueries/#media1>\n   * Support: width, height, aspectRatio\n   * Can use max or min as prefix.\n   */\n\n\n  function applyMediaQuery(query, ecWidth, ecHeight) {\n    var realMap = {\n      width: ecWidth,\n      height: ecHeight,\n      aspectratio: ecWidth / ecHeight // lowser case for convenientce.\n\n    };\n    var applicatable = true;\n    each(query, function (value, attr) {\n      var matched = attr.match(QUERY_REG);\n\n      if (!matched || !matched[1] || !matched[2]) {\n        return;\n      }\n\n      var operator = matched[1];\n      var realAttr = matched[2].toLowerCase();\n\n      if (!compare(realMap[realAttr], value, operator)) {\n        applicatable = false;\n      }\n    });\n    return applicatable;\n  }\n\n  function compare(real, expect, operator) {\n    if (operator === 'min') {\n      return real >= expect;\n    } else if (operator === 'max') {\n      return real <= expect;\n    } else {\n      // Equals\n      return real === expect;\n    }\n  }\n\n  function indicesEquals(indices1, indices2) {\n    // indices is always order by asc and has only finite number.\n    return indices1.join(',') === indices2.join(',');\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var each$2 = each;\n  var isObject$1 = isObject;\n  var POSSIBLE_STYLES = ['areaStyle', 'lineStyle', 'nodeStyle', 'linkStyle', 'chordStyle', 'label', 'labelLine'];\n\n  function compatEC2ItemStyle(opt) {\n    var itemStyleOpt = opt && opt.itemStyle;\n\n    if (!itemStyleOpt) {\n      return;\n    }\n\n    for (var i = 0, len = POSSIBLE_STYLES.length; i < len; i++) {\n      var styleName = POSSIBLE_STYLES[i];\n      var normalItemStyleOpt = itemStyleOpt.normal;\n      var emphasisItemStyleOpt = itemStyleOpt.emphasis;\n\n      if (normalItemStyleOpt && normalItemStyleOpt[styleName]) {\n        {\n          deprecateReplaceLog(\"itemStyle.normal.\" + styleName, styleName);\n        }\n        opt[styleName] = opt[styleName] || {};\n\n        if (!opt[styleName].normal) {\n          opt[styleName].normal = normalItemStyleOpt[styleName];\n        } else {\n          merge(opt[styleName].normal, normalItemStyleOpt[styleName]);\n        }\n\n        normalItemStyleOpt[styleName] = null;\n      }\n\n      if (emphasisItemStyleOpt && emphasisItemStyleOpt[styleName]) {\n        {\n          deprecateReplaceLog(\"itemStyle.emphasis.\" + styleName, \"emphasis.\" + styleName);\n        }\n        opt[styleName] = opt[styleName] || {};\n\n        if (!opt[styleName].emphasis) {\n          opt[styleName].emphasis = emphasisItemStyleOpt[styleName];\n        } else {\n          merge(opt[styleName].emphasis, emphasisItemStyleOpt[styleName]);\n        }\n\n        emphasisItemStyleOpt[styleName] = null;\n      }\n    }\n  }\n\n  function convertNormalEmphasis(opt, optType, useExtend) {\n    if (opt && opt[optType] && (opt[optType].normal || opt[optType].emphasis)) {\n      var normalOpt = opt[optType].normal;\n      var emphasisOpt = opt[optType].emphasis;\n\n      if (normalOpt) {\n        {\n          // eslint-disable-next-line max-len\n          deprecateLog(\"'normal' hierarchy in \" + optType + \" has been removed since 4.0. All style properties are configured in \" + optType + \" directly now.\");\n        } // Timeline controlStyle has other properties besides normal and emphasis\n\n        if (useExtend) {\n          opt[optType].normal = opt[optType].emphasis = null;\n          defaults(opt[optType], normalOpt);\n        } else {\n          opt[optType] = normalOpt;\n        }\n      }\n\n      if (emphasisOpt) {\n        {\n          deprecateLog(optType + \".emphasis has been changed to emphasis.\" + optType + \" since 4.0\");\n        }\n        opt.emphasis = opt.emphasis || {};\n        opt.emphasis[optType] = emphasisOpt; // Also compat the case user mix the style and focus together in ec3 style\n        // for example: { itemStyle: { normal: {}, emphasis: {focus, shadowBlur} } }\n\n        if (emphasisOpt.focus) {\n          opt.emphasis.focus = emphasisOpt.focus;\n        }\n\n        if (emphasisOpt.blurScope) {\n          opt.emphasis.blurScope = emphasisOpt.blurScope;\n        }\n      }\n    }\n  }\n\n  function removeEC3NormalStatus(opt) {\n    convertNormalEmphasis(opt, 'itemStyle');\n    convertNormalEmphasis(opt, 'lineStyle');\n    convertNormalEmphasis(opt, 'areaStyle');\n    convertNormalEmphasis(opt, 'label');\n    convertNormalEmphasis(opt, 'labelLine'); // treemap\n\n    convertNormalEmphasis(opt, 'upperLabel'); // graph\n\n    convertNormalEmphasis(opt, 'edgeLabel');\n  }\n\n  function compatTextStyle(opt, propName) {\n    // Check whether is not object (string\\null\\undefined ...)\n    var labelOptSingle = isObject$1(opt) && opt[propName];\n    var textStyle = isObject$1(labelOptSingle) && labelOptSingle.textStyle;\n\n    if (textStyle) {\n      {\n        // eslint-disable-next-line max-len\n        deprecateLog(\"textStyle hierarchy in \" + propName + \" has been removed since 4.0. All textStyle properties are configured in \" + propName + \" directly now.\");\n      }\n\n      for (var i = 0, len = TEXT_STYLE_OPTIONS.length; i < len; i++) {\n        var textPropName = TEXT_STYLE_OPTIONS[i];\n\n        if (textStyle.hasOwnProperty(textPropName)) {\n          labelOptSingle[textPropName] = textStyle[textPropName];\n        }\n      }\n    }\n  }\n\n  function compatEC3CommonStyles(opt) {\n    if (opt) {\n      removeEC3NormalStatus(opt);\n      compatTextStyle(opt, 'label');\n      opt.emphasis && compatTextStyle(opt.emphasis, 'label');\n    }\n  }\n\n  function processSeries(seriesOpt) {\n    if (!isObject$1(seriesOpt)) {\n      return;\n    }\n\n    compatEC2ItemStyle(seriesOpt);\n    removeEC3NormalStatus(seriesOpt);\n    compatTextStyle(seriesOpt, 'label'); // treemap\n\n    compatTextStyle(seriesOpt, 'upperLabel'); // graph\n\n    compatTextStyle(seriesOpt, 'edgeLabel');\n\n    if (seriesOpt.emphasis) {\n      compatTextStyle(seriesOpt.emphasis, 'label'); // treemap\n\n      compatTextStyle(seriesOpt.emphasis, 'upperLabel'); // graph\n\n      compatTextStyle(seriesOpt.emphasis, 'edgeLabel');\n    }\n\n    var markPoint = seriesOpt.markPoint;\n\n    if (markPoint) {\n      compatEC2ItemStyle(markPoint);\n      compatEC3CommonStyles(markPoint);\n    }\n\n    var markLine = seriesOpt.markLine;\n\n    if (markLine) {\n      compatEC2ItemStyle(markLine);\n      compatEC3CommonStyles(markLine);\n    }\n\n    var markArea = seriesOpt.markArea;\n\n    if (markArea) {\n      compatEC3CommonStyles(markArea);\n    }\n\n    var data = seriesOpt.data; // Break with ec3: if `setOption` again, there may be no `type` in option,\n    // then the backward compat based on option type will not be performed.\n\n    if (seriesOpt.type === 'graph') {\n      data = data || seriesOpt.nodes;\n      var edgeData = seriesOpt.links || seriesOpt.edges;\n\n      if (edgeData && !isTypedArray(edgeData)) {\n        for (var i = 0; i < edgeData.length; i++) {\n          compatEC3CommonStyles(edgeData[i]);\n        }\n      }\n\n      each(seriesOpt.categories, function (opt) {\n        removeEC3NormalStatus(opt);\n      });\n    }\n\n    if (data && !isTypedArray(data)) {\n      for (var i = 0; i < data.length; i++) {\n        compatEC3CommonStyles(data[i]);\n      }\n    } // mark point data\n\n\n    markPoint = seriesOpt.markPoint;\n\n    if (markPoint && markPoint.data) {\n      var mpData = markPoint.data;\n\n      for (var i = 0; i < mpData.length; i++) {\n        compatEC3CommonStyles(mpData[i]);\n      }\n    } // mark line data\n\n\n    markLine = seriesOpt.markLine;\n\n    if (markLine && markLine.data) {\n      var mlData = markLine.data;\n\n      for (var i = 0; i < mlData.length; i++) {\n        if (isArray(mlData[i])) {\n          compatEC3CommonStyles(mlData[i][0]);\n          compatEC3CommonStyles(mlData[i][1]);\n        } else {\n          compatEC3CommonStyles(mlData[i]);\n        }\n      }\n    } // Series\n\n\n    if (seriesOpt.type === 'gauge') {\n      compatTextStyle(seriesOpt, 'axisLabel');\n      compatTextStyle(seriesOpt, 'title');\n      compatTextStyle(seriesOpt, 'detail');\n    } else if (seriesOpt.type === 'treemap') {\n      convertNormalEmphasis(seriesOpt.breadcrumb, 'itemStyle');\n      each(seriesOpt.levels, function (opt) {\n        removeEC3NormalStatus(opt);\n      });\n    } else if (seriesOpt.type === 'tree') {\n      removeEC3NormalStatus(seriesOpt.leaves);\n    } // sunburst starts from ec4, so it does not need to compat levels.\n\n  }\n\n  function toArr(o) {\n    return isArray(o) ? o : o ? [o] : [];\n  }\n\n  function toObj(o) {\n    return (isArray(o) ? o[0] : o) || {};\n  }\n\n  function globalCompatStyle(option, isTheme) {\n    each$2(toArr(option.series), function (seriesOpt) {\n      isObject$1(seriesOpt) && processSeries(seriesOpt);\n    });\n    var axes = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'parallelAxis', 'radar'];\n    isTheme && axes.push('valueAxis', 'categoryAxis', 'logAxis', 'timeAxis');\n    each$2(axes, function (axisName) {\n      each$2(toArr(option[axisName]), function (axisOpt) {\n        if (axisOpt) {\n          compatTextStyle(axisOpt, 'axisLabel');\n          compatTextStyle(axisOpt.axisPointer, 'label');\n        }\n      });\n    });\n    each$2(toArr(option.parallel), function (parallelOpt) {\n      var parallelAxisDefault = parallelOpt && parallelOpt.parallelAxisDefault;\n      compatTextStyle(parallelAxisDefault, 'axisLabel');\n      compatTextStyle(parallelAxisDefault && parallelAxisDefault.axisPointer, 'label');\n    });\n    each$2(toArr(option.calendar), function (calendarOpt) {\n      convertNormalEmphasis(calendarOpt, 'itemStyle');\n      compatTextStyle(calendarOpt, 'dayLabel');\n      compatTextStyle(calendarOpt, 'monthLabel');\n      compatTextStyle(calendarOpt, 'yearLabel');\n    }); // radar.name.textStyle\n\n    each$2(toArr(option.radar), function (radarOpt) {\n      compatTextStyle(radarOpt, 'name'); // Use axisName instead of name because component has name property\n\n      if (radarOpt.name && radarOpt.axisName == null) {\n        radarOpt.axisName = radarOpt.name;\n        delete radarOpt.name;\n        {\n          deprecateLog('name property in radar component has been changed to axisName');\n        }\n      }\n\n      if (radarOpt.nameGap != null && radarOpt.axisNameGap == null) {\n        radarOpt.axisNameGap = radarOpt.nameGap;\n        delete radarOpt.nameGap;\n        {\n          deprecateLog('nameGap property in radar component has been changed to axisNameGap');\n        }\n      }\n\n      {\n        each$2(radarOpt.indicator, function (indicatorOpt) {\n          if (indicatorOpt.text) {\n            deprecateReplaceLog('text', 'name', 'radar.indicator');\n          }\n        });\n      }\n    });\n    each$2(toArr(option.geo), function (geoOpt) {\n      if (isObject$1(geoOpt)) {\n        compatEC3CommonStyles(geoOpt);\n        each$2(toArr(geoOpt.regions), function (regionObj) {\n          compatEC3CommonStyles(regionObj);\n        });\n      }\n    });\n    each$2(toArr(option.timeline), function (timelineOpt) {\n      compatEC3CommonStyles(timelineOpt);\n      convertNormalEmphasis(timelineOpt, 'label');\n      convertNormalEmphasis(timelineOpt, 'itemStyle');\n      convertNormalEmphasis(timelineOpt, 'controlStyle', true);\n      var data = timelineOpt.data;\n      isArray(data) && each(data, function (item) {\n        if (isObject(item)) {\n          convertNormalEmphasis(item, 'label');\n          convertNormalEmphasis(item, 'itemStyle');\n        }\n      });\n    });\n    each$2(toArr(option.toolbox), function (toolboxOpt) {\n      convertNormalEmphasis(toolboxOpt, 'iconStyle');\n      each$2(toolboxOpt.feature, function (featureOpt) {\n        convertNormalEmphasis(featureOpt, 'iconStyle');\n      });\n    });\n    compatTextStyle(toObj(option.axisPointer), 'label');\n    compatTextStyle(toObj(option.tooltip).axisPointer, 'label'); // Clean logs\n    // storedLogs = {};\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function get(opt, path) {\n    var pathArr = path.split(',');\n    var obj = opt;\n\n    for (var i = 0; i < pathArr.length; i++) {\n      obj = obj && obj[pathArr[i]];\n\n      if (obj == null) {\n        break;\n      }\n    }\n\n    return obj;\n  }\n\n  function set$1(opt, path, val, overwrite) {\n    var pathArr = path.split(',');\n    var obj = opt;\n    var key;\n    var i = 0;\n\n    for (; i < pathArr.length - 1; i++) {\n      key = pathArr[i];\n\n      if (obj[key] == null) {\n        obj[key] = {};\n      }\n\n      obj = obj[key];\n    }\n\n    if (overwrite || obj[pathArr[i]] == null) {\n      obj[pathArr[i]] = val;\n    }\n  }\n\n  function compatLayoutProperties(option) {\n    option && each(LAYOUT_PROPERTIES, function (prop) {\n      if (prop[0] in option && !(prop[1] in option)) {\n        option[prop[1]] = option[prop[0]];\n      }\n    });\n  }\n\n  var LAYOUT_PROPERTIES = [['x', 'left'], ['y', 'top'], ['x2', 'right'], ['y2', 'bottom']];\n  var COMPATITABLE_COMPONENTS = ['grid', 'geo', 'parallel', 'legend', 'toolbox', 'title', 'visualMap', 'dataZoom', 'timeline'];\n  var BAR_ITEM_STYLE_MAP = [['borderRadius', 'barBorderRadius'], ['borderColor', 'barBorderColor'], ['borderWidth', 'barBorderWidth']];\n\n  function compatBarItemStyle(option) {\n    var itemStyle = option && option.itemStyle;\n\n    if (itemStyle) {\n      for (var i = 0; i < BAR_ITEM_STYLE_MAP.length; i++) {\n        var oldName = BAR_ITEM_STYLE_MAP[i][1];\n        var newName = BAR_ITEM_STYLE_MAP[i][0];\n\n        if (itemStyle[oldName] != null) {\n          itemStyle[newName] = itemStyle[oldName];\n          {\n            deprecateReplaceLog(oldName, newName);\n          }\n        }\n      }\n    }\n  }\n\n  function compatPieLabel(option) {\n    if (!option) {\n      return;\n    }\n\n    if (option.alignTo === 'edge' && option.margin != null && option.edgeDistance == null) {\n      {\n        deprecateReplaceLog('label.margin', 'label.edgeDistance', 'pie');\n      }\n      option.edgeDistance = option.margin;\n    }\n  }\n\n  function compatSunburstState(option) {\n    if (!option) {\n      return;\n    }\n\n    if (option.downplay && !option.blur) {\n      option.blur = option.downplay;\n      {\n        deprecateReplaceLog('downplay', 'blur', 'sunburst');\n      }\n    }\n  }\n\n  function compatGraphFocus(option) {\n    if (!option) {\n      return;\n    }\n\n    if (option.focusNodeAdjacency != null) {\n      option.emphasis = option.emphasis || {};\n\n      if (option.emphasis.focus == null) {\n        {\n          deprecateReplaceLog('focusNodeAdjacency', 'emphasis: { focus: \\'adjacency\\'}', 'graph/sankey');\n        }\n        option.emphasis.focus = 'adjacency';\n      }\n    }\n  }\n\n  function traverseTree(data, cb) {\n    if (data) {\n      for (var i = 0; i < data.length; i++) {\n        cb(data[i]);\n        data[i] && traverseTree(data[i].children, cb);\n      }\n    }\n  }\n\n  function globalBackwardCompat(option, isTheme) {\n    globalCompatStyle(option, isTheme); // Make sure series array for model initialization.\n\n    option.series = normalizeToArray(option.series);\n    each(option.series, function (seriesOpt) {\n      if (!isObject(seriesOpt)) {\n        return;\n      }\n\n      var seriesType = seriesOpt.type;\n\n      if (seriesType === 'line') {\n        if (seriesOpt.clipOverflow != null) {\n          seriesOpt.clip = seriesOpt.clipOverflow;\n          {\n            deprecateReplaceLog('clipOverflow', 'clip', 'line');\n          }\n        }\n      } else if (seriesType === 'pie' || seriesType === 'gauge') {\n        if (seriesOpt.clockWise != null) {\n          seriesOpt.clockwise = seriesOpt.clockWise;\n          {\n            deprecateReplaceLog('clockWise', 'clockwise');\n          }\n        }\n\n        compatPieLabel(seriesOpt.label);\n        var data = seriesOpt.data;\n\n        if (data && !isTypedArray(data)) {\n          for (var i = 0; i < data.length; i++) {\n            compatPieLabel(data[i]);\n          }\n        }\n\n        if (seriesOpt.hoverOffset != null) {\n          seriesOpt.emphasis = seriesOpt.emphasis || {};\n\n          if (seriesOpt.emphasis.scaleSize = null) {\n            {\n              deprecateReplaceLog('hoverOffset', 'emphasis.scaleSize');\n            }\n            seriesOpt.emphasis.scaleSize = seriesOpt.hoverOffset;\n          }\n        }\n      } else if (seriesType === 'gauge') {\n        var pointerColor = get(seriesOpt, 'pointer.color');\n        pointerColor != null && set$1(seriesOpt, 'itemStyle.color', pointerColor);\n      } else if (seriesType === 'bar') {\n        compatBarItemStyle(seriesOpt);\n        compatBarItemStyle(seriesOpt.backgroundStyle);\n        compatBarItemStyle(seriesOpt.emphasis);\n        var data = seriesOpt.data;\n\n        if (data && !isTypedArray(data)) {\n          for (var i = 0; i < data.length; i++) {\n            if (typeof data[i] === 'object') {\n              compatBarItemStyle(data[i]);\n              compatBarItemStyle(data[i] && data[i].emphasis);\n            }\n          }\n        }\n      } else if (seriesType === 'sunburst') {\n        var highlightPolicy = seriesOpt.highlightPolicy;\n\n        if (highlightPolicy) {\n          seriesOpt.emphasis = seriesOpt.emphasis || {};\n\n          if (!seriesOpt.emphasis.focus) {\n            seriesOpt.emphasis.focus = highlightPolicy;\n            {\n              deprecateReplaceLog('highlightPolicy', 'emphasis.focus', 'sunburst');\n            }\n          }\n        }\n\n        compatSunburstState(seriesOpt);\n        traverseTree(seriesOpt.data, compatSunburstState);\n      } else if (seriesType === 'graph' || seriesType === 'sankey') {\n        compatGraphFocus(seriesOpt); // TODO nodes, edges?\n      } else if (seriesType === 'map') {\n        if (seriesOpt.mapType && !seriesOpt.map) {\n          {\n            deprecateReplaceLog('mapType', 'map', 'map');\n          }\n          seriesOpt.map = seriesOpt.mapType;\n        }\n\n        if (seriesOpt.mapLocation) {\n          {\n            deprecateLog('`mapLocation` is not used anymore.');\n          }\n          defaults(seriesOpt, seriesOpt.mapLocation);\n        }\n      }\n\n      if (seriesOpt.hoverAnimation != null) {\n        seriesOpt.emphasis = seriesOpt.emphasis || {};\n\n        if (seriesOpt.emphasis && seriesOpt.emphasis.scale == null) {\n          {\n            deprecateReplaceLog('hoverAnimation', 'emphasis.scale');\n          }\n          seriesOpt.emphasis.scale = seriesOpt.hoverAnimation;\n        }\n      }\n\n      compatLayoutProperties(seriesOpt);\n    }); // dataRange has changed to visualMap\n\n    if (option.dataRange) {\n      option.visualMap = option.dataRange;\n    }\n\n    each(COMPATITABLE_COMPONENTS, function (componentName) {\n      var options = option[componentName];\n\n      if (options) {\n        if (!isArray(options)) {\n          options = [options];\n        }\n\n        each(options, function (option) {\n          compatLayoutProperties(option);\n        });\n      }\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  //     data processing stage is blocked in stream.\n  //     See <module:echarts/stream/Scheduler#performDataProcessorTasks>\n  // (2) Only register once when import repeatedly.\n  //     Should be executed after series is filtered and before stack calculation.\n\n\n  function dataStack(ecModel) {\n    var stackInfoMap = createHashMap();\n    ecModel.eachSeries(function (seriesModel) {\n      var stack = seriesModel.get('stack'); // Compatible: when `stack` is set as '', do not stack.\n\n      if (stack) {\n        var stackInfoList = stackInfoMap.get(stack) || stackInfoMap.set(stack, []);\n        var data = seriesModel.getData();\n        var stackInfo = {\n          // Used for calculate axis extent automatically.\n          // TODO: Type getCalculationInfo return more specific type?\n          stackResultDimension: data.getCalculationInfo('stackResultDimension'),\n          stackedOverDimension: data.getCalculationInfo('stackedOverDimension'),\n          stackedDimension: data.getCalculationInfo('stackedDimension'),\n          stackedByDimension: data.getCalculationInfo('stackedByDimension'),\n          isStackedByIndex: data.getCalculationInfo('isStackedByIndex'),\n          data: data,\n          seriesModel: seriesModel\n        }; // If stacked on axis that do not support data stack.\n\n        if (!stackInfo.stackedDimension || !(stackInfo.isStackedByIndex || stackInfo.stackedByDimension)) {\n          return;\n        }\n\n        stackInfoList.length && data.setCalculationInfo('stackedOnSeries', stackInfoList[stackInfoList.length - 1].seriesModel);\n        stackInfoList.push(stackInfo);\n      }\n    });\n    stackInfoMap.each(calculateStack);\n  }\n\n  function calculateStack(stackInfoList) {\n    each(stackInfoList, function (targetStackInfo, idxInStack) {\n      var resultVal = [];\n      var resultNaN = [NaN, NaN];\n      var dims = [targetStackInfo.stackResultDimension, targetStackInfo.stackedOverDimension];\n      var targetData = targetStackInfo.data;\n      var isStackedByIndex = targetStackInfo.isStackedByIndex;\n      var stackStrategy = targetStackInfo.seriesModel.get('stackStrategy') || 'samesign'; // Should not write on raw data, because stack series model list changes\n      // depending on legend selection.\n\n      targetData.modify(dims, function (v0, v1, dataIndex) {\n        var sum = targetData.get(targetStackInfo.stackedDimension, dataIndex); // Consider `connectNulls` of line area, if value is NaN, stackedOver\n        // should also be NaN, to draw a appropriate belt area.\n\n        if (isNaN(sum)) {\n          return resultNaN;\n        }\n\n        var byValue;\n        var stackedDataRawIndex;\n\n        if (isStackedByIndex) {\n          stackedDataRawIndex = targetData.getRawIndex(dataIndex);\n        } else {\n          byValue = targetData.get(targetStackInfo.stackedByDimension, dataIndex);\n        } // If stackOver is NaN, chart view will render point on value start.\n\n\n        var stackedOver = NaN;\n\n        for (var j = idxInStack - 1; j >= 0; j--) {\n          var stackInfo = stackInfoList[j]; // Has been optimized by inverted indices on `stackedByDimension`.\n\n          if (!isStackedByIndex) {\n            stackedDataRawIndex = stackInfo.data.rawIndexOf(stackInfo.stackedByDimension, byValue);\n          }\n\n          if (stackedDataRawIndex >= 0) {\n            var val = stackInfo.data.getByRawIndex(stackInfo.stackResultDimension, stackedDataRawIndex); // Considering positive stack, negative stack and empty data\n\n            if (stackStrategy === 'all' // single stack group\n            || stackStrategy === 'positive' && val > 0 || stackStrategy === 'negative' && val < 0 || stackStrategy === 'samesign' && sum >= 0 && val > 0 // All positive stack\n            || stackStrategy === 'samesign' && sum <= 0 && val < 0 // All negative stack\n            ) {\n                // The sum has to be very small to be affected by the\n                // floating arithmetic problem. An incorrect result will probably\n                // cause axis min/max to be filtered incorrectly.\n                sum = addSafe(sum, val);\n                stackedOver = val;\n                break;\n              }\n          }\n        }\n\n        resultVal[0] = sum;\n        resultVal[1] = stackedOver;\n        return resultVal;\n      });\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // @inner\n\n\n  var SourceImpl =\n  /** @class */\n  function () {\n    function SourceImpl(fields) {\n      this.data = fields.data || (fields.sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS ? {} : []);\n      this.sourceFormat = fields.sourceFormat || SOURCE_FORMAT_UNKNOWN; // Visit config\n\n      this.seriesLayoutBy = fields.seriesLayoutBy || SERIES_LAYOUT_BY_COLUMN;\n      this.startIndex = fields.startIndex || 0;\n      this.dimensionsDetectedCount = fields.dimensionsDetectedCount;\n      this.metaRawOption = fields.metaRawOption;\n      var dimensionsDefine = this.dimensionsDefine = fields.dimensionsDefine;\n\n      if (dimensionsDefine) {\n        for (var i = 0; i < dimensionsDefine.length; i++) {\n          var dim = dimensionsDefine[i];\n\n          if (dim.type == null) {\n            if (guessOrdinal(this, i) === BE_ORDINAL.Must) {\n              dim.type = 'ordinal';\n            }\n          }\n        }\n      }\n    }\n\n    return SourceImpl;\n  }();\n\n  function isSourceInstance(val) {\n    return val instanceof SourceImpl;\n  }\n  /**\n   * Create a source from option.\n   * NOTE: Created source is immutable. Don't change any properties in it.\n   */\n\n\n  function createSource(sourceData, thisMetaRawOption, // can be null. If not provided, auto detect it from `sourceData`.\n  sourceFormat) {\n    sourceFormat = sourceFormat || detectSourceFormat(sourceData);\n    var seriesLayoutBy = thisMetaRawOption.seriesLayoutBy;\n    var determined = determineSourceDimensions(sourceData, sourceFormat, seriesLayoutBy, thisMetaRawOption.sourceHeader, thisMetaRawOption.dimensions);\n    var source = new SourceImpl({\n      data: sourceData,\n      sourceFormat: sourceFormat,\n      seriesLayoutBy: seriesLayoutBy,\n      dimensionsDefine: determined.dimensionsDefine,\n      startIndex: determined.startIndex,\n      dimensionsDetectedCount: determined.dimensionsDetectedCount,\n      metaRawOption: clone(thisMetaRawOption)\n    });\n    return source;\n  }\n  /**\n   * Wrap original series data for some compatibility cases.\n   */\n\n\n  function createSourceFromSeriesDataOption(data) {\n    return new SourceImpl({\n      data: data,\n      sourceFormat: isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL\n    });\n  }\n  /**\n   * Clone source but excludes source data.\n   */\n\n\n  function cloneSourceShallow(source) {\n    return new SourceImpl({\n      data: source.data,\n      sourceFormat: source.sourceFormat,\n      seriesLayoutBy: source.seriesLayoutBy,\n      dimensionsDefine: clone(source.dimensionsDefine),\n      startIndex: source.startIndex,\n      dimensionsDetectedCount: source.dimensionsDetectedCount\n    });\n  }\n  /**\n   * Note: An empty array will be detected as `SOURCE_FORMAT_ARRAY_ROWS`.\n   */\n\n\n  function detectSourceFormat(data) {\n    var sourceFormat = SOURCE_FORMAT_UNKNOWN;\n\n    if (isTypedArray(data)) {\n      sourceFormat = SOURCE_FORMAT_TYPED_ARRAY;\n    } else if (isArray(data)) {\n      // FIXME Whether tolerate null in top level array?\n      if (data.length === 0) {\n        sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n      }\n\n      for (var i = 0, len = data.length; i < len; i++) {\n        var item = data[i];\n\n        if (item == null) {\n          continue;\n        } else if (isArray(item)) {\n          sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n          break;\n        } else if (isObject(item)) {\n          sourceFormat = SOURCE_FORMAT_OBJECT_ROWS;\n          break;\n        }\n      }\n    } else if (isObject(data)) {\n      for (var key in data) {\n        if (hasOwn(data, key) && isArrayLike(data[key])) {\n          sourceFormat = SOURCE_FORMAT_KEYED_COLUMNS;\n          break;\n        }\n      }\n    }\n\n    return sourceFormat;\n  }\n  /**\n   * Determine the source definitions from data standalone dimensions definitions\n   * are not specified.\n   */\n\n\n  function determineSourceDimensions(data, sourceFormat, seriesLayoutBy, sourceHeader, // standalone raw dimensions definition, like:\n  // {\n  //     dimensions: ['aa', 'bb', { name: 'cc', type: 'time' }]\n  // }\n  // in `dataset` or `series`\n  dimensionsDefine) {\n    var dimensionsDetectedCount;\n    var startIndex; // PEDING: could data be null/undefined here?\n    // currently, if `dataset.source` not specified, error thrown.\n    // if `series.data` not specified, nothing rendered without error thrown.\n    // Should test these cases.\n\n    if (!data) {\n      return {\n        dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\n        startIndex: startIndex,\n        dimensionsDetectedCount: dimensionsDetectedCount\n      };\n    }\n\n    if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n      var dataArrayRows = data; // Rule: Most of the first line are string: it is header.\n      // Caution: consider a line with 5 string and 1 number,\n      // it still can not be sure it is a head, because the\n      // 5 string may be 5 values of category columns.\n\n      if (sourceHeader === 'auto' || sourceHeader == null) {\n        arrayRowsTravelFirst(function (val) {\n          // '-' is regarded as null/undefined.\n          if (val != null && val !== '-') {\n            if (isString(val)) {\n              startIndex == null && (startIndex = 1);\n            } else {\n              startIndex = 0;\n            }\n          } // 10 is an experience number, avoid long loop.\n\n        }, seriesLayoutBy, dataArrayRows, 10);\n      } else {\n        startIndex = isNumber(sourceHeader) ? sourceHeader : sourceHeader ? 1 : 0;\n      }\n\n      if (!dimensionsDefine && startIndex === 1) {\n        dimensionsDefine = [];\n        arrayRowsTravelFirst(function (val, index) {\n          dimensionsDefine[index] = val != null ? val + '' : '';\n        }, seriesLayoutBy, dataArrayRows, Infinity);\n      }\n\n      dimensionsDetectedCount = dimensionsDefine ? dimensionsDefine.length : seriesLayoutBy === SERIES_LAYOUT_BY_ROW ? dataArrayRows.length : dataArrayRows[0] ? dataArrayRows[0].length : null;\n    } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n      if (!dimensionsDefine) {\n        dimensionsDefine = objectRowsCollectDimensions(data);\n      }\n    } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n      if (!dimensionsDefine) {\n        dimensionsDefine = [];\n        each(data, function (colArr, key) {\n          dimensionsDefine.push(key);\n        });\n      }\n    } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n      var value0 = getDataItemValue(data[0]);\n      dimensionsDetectedCount = isArray(value0) && value0.length || 1;\n    } else if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n      {\n        assert(!!dimensionsDefine, 'dimensions must be given if data is TypedArray.');\n      }\n    }\n\n    return {\n      startIndex: startIndex,\n      dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\n      dimensionsDetectedCount: dimensionsDetectedCount\n    };\n  }\n\n  function objectRowsCollectDimensions(data) {\n    var firstIndex = 0;\n    var obj;\n\n    while (firstIndex < data.length && !(obj = data[firstIndex++])) {} // jshint ignore: line\n\n\n    if (obj) {\n      var dimensions_1 = [];\n      each(obj, function (value, key) {\n        dimensions_1.push(key);\n      });\n      return dimensions_1;\n    }\n  } // Consider dimensions defined like ['A', 'price', 'B', 'price', 'C', 'price'],\n  // which is reasonable. But dimension name is duplicated.\n  // Returns undefined or an array contains only object without null/undefiend or string.\n\n\n  function normalizeDimensionsOption(dimensionsDefine) {\n    if (!dimensionsDefine) {\n      // The meaning of null/undefined is different from empty array.\n      return;\n    }\n\n    var nameMap = createHashMap();\n    return map(dimensionsDefine, function (rawItem, index) {\n      rawItem = isObject(rawItem) ? rawItem : {\n        name: rawItem\n      }; // Other fields will be discarded.\n\n      var item = {\n        name: rawItem.name,\n        displayName: rawItem.displayName,\n        type: rawItem.type\n      }; // User can set null in dimensions.\n      // We dont auto specify name, othewise a given name may\n      // cause it be refered unexpectedly.\n\n      if (item.name == null) {\n        return item;\n      } // Also consider number form like 2012.\n\n\n      item.name += ''; // User may also specify displayName.\n      // displayName will always exists except user not\n      // specified or dim name is not specified or detected.\n      // (A auto generated dim name will not be used as\n      // displayName).\n\n      if (item.displayName == null) {\n        item.displayName = item.name;\n      }\n\n      var exist = nameMap.get(item.name);\n\n      if (!exist) {\n        nameMap.set(item.name, {\n          count: 1\n        });\n      } else {\n        item.name += '-' + exist.count++;\n      }\n\n      return item;\n    });\n  }\n\n  function arrayRowsTravelFirst(cb, seriesLayoutBy, data, maxLoop) {\n    if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n      for (var i = 0; i < data.length && i < maxLoop; i++) {\n        cb(data[i] ? data[i][0] : null, i);\n      }\n    } else {\n      var value0 = data[0] || [];\n\n      for (var i = 0; i < value0.length && i < maxLoop; i++) {\n        cb(value0[i], i);\n      }\n    }\n  }\n\n  function shouldRetrieveDataByName(source) {\n    var sourceFormat = source.sourceFormat;\n    return sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var _a;\n\n  var _b;\n\n  var _c; // TODO\n  // ??? refactor? check the outer usage of data provider.\n  // merge with defaultDimValueGetter?\n\n\n  var providerMethods;\n  var mountMethods;\n  /**\n   * If normal array used, mutable chunk size is supported.\n   * If typed array used, chunk size must be fixed.\n   */\n\n  var DefaultDataProvider =\n  /** @class */\n  function () {\n    function DefaultDataProvider(sourceParam, dimSize) {\n      // let source: Source;\n      var source = !isSourceInstance(sourceParam) ? createSourceFromSeriesDataOption(sourceParam) : sourceParam; // declare source is Source;\n\n      this._source = source;\n      var data = this._data = source.data; // Typed array. TODO IE10+?\n\n      if (source.sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n        {\n          if (dimSize == null) {\n            throw new Error('Typed array data must specify dimension size');\n          }\n        }\n        this._offset = 0;\n        this._dimSize = dimSize;\n        this._data = data;\n      }\n\n      mountMethods(this, data, source);\n    }\n\n    DefaultDataProvider.prototype.getSource = function () {\n      return this._source;\n    };\n\n    DefaultDataProvider.prototype.count = function () {\n      return 0;\n    };\n\n    DefaultDataProvider.prototype.getItem = function (idx, out) {\n      return;\n    };\n\n    DefaultDataProvider.prototype.appendData = function (newData) {};\n\n    DefaultDataProvider.prototype.clean = function () {};\n\n    DefaultDataProvider.protoInitialize = function () {\n      // PENDING: To avoid potential incompat (e.g., prototype\n      // is visited somewhere), still init them on prototype.\n      var proto = DefaultDataProvider.prototype;\n      proto.pure = false;\n      proto.persistent = true;\n    }();\n\n    DefaultDataProvider.internalField = function () {\n      var _a;\n\n      mountMethods = function (provider, data, source) {\n        var sourceFormat = source.sourceFormat;\n        var seriesLayoutBy = source.seriesLayoutBy;\n        var startIndex = source.startIndex;\n        var dimsDef = source.dimensionsDefine;\n        var methods = providerMethods[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n        {\n          assert(methods, 'Invalide sourceFormat: ' + sourceFormat);\n        }\n        extend(provider, methods);\n\n        if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n          provider.getItem = getItemForTypedArray;\n          provider.count = countForTypedArray;\n          provider.fillStorage = fillStorageForTypedArray;\n        } else {\n          var rawItemGetter = getRawSourceItemGetter(sourceFormat, seriesLayoutBy);\n          provider.getItem = bind(rawItemGetter, null, data, startIndex, dimsDef);\n          var rawCounter = getRawSourceDataCounter(sourceFormat, seriesLayoutBy);\n          provider.count = bind(rawCounter, null, data, startIndex, dimsDef);\n        }\n      };\n\n      var getItemForTypedArray = function (idx, out) {\n        idx = idx - this._offset;\n        out = out || [];\n        var data = this._data;\n        var dimSize = this._dimSize;\n        var offset = dimSize * idx;\n\n        for (var i = 0; i < dimSize; i++) {\n          out[i] = data[offset + i];\n        }\n\n        return out;\n      };\n\n      var fillStorageForTypedArray = function (start, end, storage, extent) {\n        var data = this._data;\n        var dimSize = this._dimSize;\n\n        for (var dim = 0; dim < dimSize; dim++) {\n          var dimExtent = extent[dim];\n          var min = dimExtent[0] == null ? Infinity : dimExtent[0];\n          var max = dimExtent[1] == null ? -Infinity : dimExtent[1];\n          var count = end - start;\n          var arr = storage[dim];\n\n          for (var i = 0; i < count; i++) {\n            // appendData with TypedArray will always do replace in provider.\n            var val = data[i * dimSize + dim];\n            arr[start + i] = val;\n            val < min && (min = val);\n            val > max && (max = val);\n          }\n\n          dimExtent[0] = min;\n          dimExtent[1] = max;\n        }\n      };\n\n      var countForTypedArray = function () {\n        return this._data ? this._data.length / this._dimSize : 0;\n      };\n\n      providerMethods = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = {\n        pure: true,\n        appendData: appendDataSimply\n      }, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = {\n        pure: true,\n        appendData: function () {\n          throw new Error('Do not support appendData when set seriesLayoutBy: \"row\".');\n        }\n      }, _a[SOURCE_FORMAT_OBJECT_ROWS] = {\n        pure: true,\n        appendData: appendDataSimply\n      }, _a[SOURCE_FORMAT_KEYED_COLUMNS] = {\n        pure: true,\n        appendData: function (newData) {\n          var data = this._data;\n          each(newData, function (newCol, key) {\n            var oldCol = data[key] || (data[key] = []);\n\n            for (var i = 0; i < (newCol || []).length; i++) {\n              oldCol.push(newCol[i]);\n            }\n          });\n        }\n      }, _a[SOURCE_FORMAT_ORIGINAL] = {\n        appendData: appendDataSimply\n      }, _a[SOURCE_FORMAT_TYPED_ARRAY] = {\n        persistent: false,\n        pure: true,\n        appendData: function (newData) {\n          {\n            assert(isTypedArray(newData), 'Added data must be TypedArray if data in initialization is TypedArray');\n          }\n          this._data = newData;\n        },\n        // Clean self if data is already used.\n        clean: function () {\n          // PENDING\n          this._offset += this.count();\n          this._data = null;\n        }\n      }, _a);\n\n      function appendDataSimply(newData) {\n        for (var i = 0; i < newData.length; i++) {\n          this._data.push(newData[i]);\n        }\n      }\n    }();\n\n    return DefaultDataProvider;\n  }();\n\n  var getItemSimply = function (rawData, startIndex, dimsDef, idx) {\n    return rawData[idx];\n  };\n\n  var rawSourceItemGetterMap = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef, idx) {\n    return rawData[idx + startIndex];\n  }, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef, idx, out) {\n    idx += startIndex;\n    var item = out || [];\n    var data = rawData;\n\n    for (var i = 0; i < data.length; i++) {\n      var row = data[i];\n      item[i] = row ? row[idx] : null;\n    }\n\n    return item;\n  }, _a[SOURCE_FORMAT_OBJECT_ROWS] = getItemSimply, _a[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef, idx, out) {\n    var item = out || [];\n\n    for (var i = 0; i < dimsDef.length; i++) {\n      var dimName = dimsDef[i].name;\n      {\n        if (dimName == null) {\n          throw new Error();\n        }\n      }\n      var col = rawData[dimName];\n      item[i] = col ? col[idx] : null;\n    }\n\n    return item;\n  }, _a[SOURCE_FORMAT_ORIGINAL] = getItemSimply, _a);\n\n  function getRawSourceItemGetter(sourceFormat, seriesLayoutBy) {\n    var method = rawSourceItemGetterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n    {\n      assert(method, 'Do not support get item on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\n    }\n    return method;\n  }\n\n  var countSimply = function (rawData, startIndex, dimsDef) {\n    return rawData.length;\n  };\n\n  var rawSourceDataCounterMap = (_b = {}, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef) {\n    return Math.max(0, rawData.length - startIndex);\n  }, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef) {\n    var row = rawData[0];\n    return row ? Math.max(0, row.length - startIndex) : 0;\n  }, _b[SOURCE_FORMAT_OBJECT_ROWS] = countSimply, _b[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef) {\n    var dimName = dimsDef[0].name;\n    {\n      if (dimName == null) {\n        throw new Error();\n      }\n    }\n    var col = rawData[dimName];\n    return col ? col.length : 0;\n  }, _b[SOURCE_FORMAT_ORIGINAL] = countSimply, _b);\n\n  function getRawSourceDataCounter(sourceFormat, seriesLayoutBy) {\n    var method = rawSourceDataCounterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n    {\n      assert(method, 'Do not suppport count on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\n    }\n    return method;\n  }\n\n  var getRawValueSimply = function (dataItem, dimIndex, property) {\n    return dataItem[dimIndex];\n  };\n\n  var rawSourceValueGetterMap = (_c = {}, _c[SOURCE_FORMAT_ARRAY_ROWS] = getRawValueSimply, _c[SOURCE_FORMAT_OBJECT_ROWS] = function (dataItem, dimIndex, property) {\n    return dataItem[property];\n  }, _c[SOURCE_FORMAT_KEYED_COLUMNS] = getRawValueSimply, _c[SOURCE_FORMAT_ORIGINAL] = function (dataItem, dimIndex, property) {\n    // FIXME: In some case (markpoint in geo (geo-map.html)),\n    // dataItem is {coord: [...]}\n    var value = getDataItemValue(dataItem);\n    return !(value instanceof Array) ? value : value[dimIndex];\n  }, _c[SOURCE_FORMAT_TYPED_ARRAY] = getRawValueSimply, _c);\n\n  function getRawSourceValueGetter(sourceFormat) {\n    var method = rawSourceValueGetterMap[sourceFormat];\n    {\n      assert(method, 'Do not suppport get value on \"' + sourceFormat + '\".');\n    }\n    return method;\n  }\n\n  function getMethodMapKey(sourceFormat, seriesLayoutBy) {\n    return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS ? sourceFormat + '_' + seriesLayoutBy : sourceFormat;\n  } // ??? FIXME can these logic be more neat: getRawValue, getRawDataItem,\n  // Consider persistent.\n  // Caution: why use raw value to display on label or tooltip?\n  // A reason is to avoid format. For example time value we do not know\n  // how to format is expected. More over, if stack is used, calculated\n  // value may be 0.91000000001, which have brings trouble to display.\n  // TODO: consider how to treat null/undefined/NaN when display?\n\n\n  function retrieveRawValue(data, dataIndex, // If dimIndex is null/undefined, return OptionDataItem.\n  // Otherwise, return OptionDataValue.\n  dim) {\n    if (!data) {\n      return;\n    } // Consider data may be not persistent.\n\n\n    var dataItem = data.getRawDataItem(dataIndex);\n\n    if (dataItem == null) {\n      return;\n    }\n\n    var store = data.getStore();\n    var sourceFormat = store.getSource().sourceFormat;\n\n    if (dim != null) {\n      var dimIndex = data.getDimensionIndex(dim);\n      var property = store.getDimensionProperty(dimIndex);\n      return getRawSourceValueGetter(sourceFormat)(dataItem, dimIndex, property);\n    } else {\n      var result = dataItem;\n\n      if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n        result = getDataItemValue(dataItem);\n      }\n\n      return result;\n    }\n  }\n  /**\n   * Compatible with some cases (in pie, map) like:\n   * data: [{name: 'xx', value: 5, selected: true}, ...]\n   * where only sourceFormat is 'original' and 'objectRows' supported.\n   *\n   * // TODO\n   * Supported detail options in data item when using 'arrayRows'.\n   *\n   * @param data\n   * @param dataIndex\n   * @param attr like 'selected'\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var DIMENSION_LABEL_REG = /\\{@(.+?)\\}/g;\n\n  var DataFormatMixin =\n  /** @class */\n  function () {\n    function DataFormatMixin() {}\n    /**\n     * Get params for formatter\n     */\n\n\n    DataFormatMixin.prototype.getDataParams = function (dataIndex, dataType) {\n      var data = this.getData(dataType);\n      var rawValue = this.getRawValue(dataIndex, dataType);\n      var rawDataIndex = data.getRawIndex(dataIndex);\n      var name = data.getName(dataIndex);\n      var itemOpt = data.getRawDataItem(dataIndex);\n      var style = data.getItemVisual(dataIndex, 'style');\n      var color = style && style[data.getItemVisual(dataIndex, 'drawType') || 'fill'];\n      var borderColor = style && style.stroke;\n      var mainType = this.mainType;\n      var isSeries = mainType === 'series';\n      var userOutput = data.userOutput && data.userOutput.get();\n      return {\n        componentType: mainType,\n        componentSubType: this.subType,\n        componentIndex: this.componentIndex,\n        seriesType: isSeries ? this.subType : null,\n        seriesIndex: this.seriesIndex,\n        seriesId: isSeries ? this.id : null,\n        seriesName: isSeries ? this.name : null,\n        name: name,\n        dataIndex: rawDataIndex,\n        data: itemOpt,\n        dataType: dataType,\n        value: rawValue,\n        color: color,\n        borderColor: borderColor,\n        dimensionNames: userOutput ? userOutput.fullDimensions : null,\n        encode: userOutput ? userOutput.encode : null,\n        // Param name list for mapping `a`, `b`, `c`, `d`, `e`\n        $vars: ['seriesName', 'name', 'value']\n      };\n    };\n    /**\n     * Format label\n     * @param dataIndex\n     * @param status 'normal' by default\n     * @param dataType\n     * @param labelDimIndex Only used in some chart that\n     *        use formatter in different dimensions, like radar.\n     * @param formatter Formatter given outside.\n     * @return return null/undefined if no formatter\n     */\n\n\n    DataFormatMixin.prototype.getFormattedLabel = function (dataIndex, status, dataType, labelDimIndex, formatter, extendParams) {\n      status = status || 'normal';\n      var data = this.getData(dataType);\n      var params = this.getDataParams(dataIndex, dataType);\n\n      if (extendParams) {\n        params.value = extendParams.interpolatedValue;\n      }\n\n      if (labelDimIndex != null && isArray(params.value)) {\n        params.value = params.value[labelDimIndex];\n      }\n\n      if (!formatter) {\n        var itemModel = data.getItemModel(dataIndex); // @ts-ignore\n\n        formatter = itemModel.get(status === 'normal' ? ['label', 'formatter'] : [status, 'label', 'formatter']);\n      }\n\n      if (isFunction(formatter)) {\n        params.status = status;\n        params.dimensionIndex = labelDimIndex;\n        return formatter(params);\n      } else if (isString(formatter)) {\n        var str = formatTpl(formatter, params); // Support 'aaa{@[3]}bbb{@product}ccc'.\n        // Do not support '}' in dim name util have to.\n\n        return str.replace(DIMENSION_LABEL_REG, function (origin, dimStr) {\n          var len = dimStr.length;\n          var dimLoose = dimStr;\n\n          if (dimLoose.charAt(0) === '[' && dimLoose.charAt(len - 1) === ']') {\n            dimLoose = +dimLoose.slice(1, len - 1); // Also support: '[]' => 0\n\n            {\n              if (isNaN(dimLoose)) {\n                error(\"Invalide label formatter: @\" + dimStr + \", only support @[0], @[1], @[2], ...\");\n              }\n            }\n          }\n\n          var val = retrieveRawValue(data, dataIndex, dimLoose);\n\n          if (extendParams && isArray(extendParams.interpolatedValue)) {\n            var dimIndex = data.getDimensionIndex(dimLoose);\n\n            if (dimIndex >= 0) {\n              val = extendParams.interpolatedValue[dimIndex];\n            }\n          }\n\n          return val != null ? val + '' : '';\n        });\n      }\n    };\n    /**\n     * Get raw value in option\n     */\n\n\n    DataFormatMixin.prototype.getRawValue = function (idx, dataType) {\n      return retrieveRawValue(this.getData(dataType), idx);\n    };\n    /**\n     * Should be implemented.\n     * @param {number} dataIndex\n     * @param {boolean} [multipleSeries=false]\n     * @param {string} [dataType]\n     */\n\n\n    DataFormatMixin.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n      // Empty function\n      return;\n    };\n\n    return DataFormatMixin;\n  }(); // PENDING: previously we accept this type when calling `formatTooltip`,\n  // but guess little chance has been used outside. Do we need to backward\n  // compat it?\n  // type TooltipFormatResultLegacyObject = {\n  //     // `html` means the markup language text, either in 'html' or 'richText'.\n  //     // The name `html` is not appropriate becuase in 'richText' it is not a HTML\n  //     // string. But still support it for backward compat.\n  //     html: string;\n  //     markers: Dictionary<ColorString>;\n  // };\n\n  /**\n   * For backward compat, normalize the return from `formatTooltip`.\n   */\n\n\n  function normalizeTooltipFormatResult(result) {\n    var markupText; // let markers: Dictionary<ColorString>;\n\n    var markupFragment;\n\n    if (isObject(result)) {\n      if (result.type) {\n        markupFragment = result;\n      } else {\n        {\n          console.warn('The return type of `formatTooltip` is not supported: ' + makePrintable(result));\n        }\n      } // else {\n      //     markupText = (result as TooltipFormatResultLegacyObject).html;\n      //     markers = (result as TooltipFormatResultLegacyObject).markers;\n      //     if (markersExisting) {\n      //         markers = zrUtil.merge(markersExisting, markers);\n      //     }\n      // }\n\n    } else {\n      markupText = result;\n    }\n\n    return {\n      text: markupText,\n      // markers: markers || markersExisting,\n      frag: markupFragment\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * @param {Object} define\n   * @return See the return of `createTask`.\n   */\n\n\n  function createTask(define) {\n    return new Task(define);\n  }\n\n  var Task =\n  /** @class */\n  function () {\n    function Task(define) {\n      define = define || {};\n      this._reset = define.reset;\n      this._plan = define.plan;\n      this._count = define.count;\n      this._onDirty = define.onDirty;\n      this._dirty = true;\n    }\n    /**\n     * @param step Specified step.\n     * @param skip Skip customer perform call.\n     * @param modBy Sampling window size.\n     * @param modDataCount Sampling count.\n     * @return whether unfinished.\n     */\n\n\n    Task.prototype.perform = function (performArgs) {\n      var upTask = this._upstream;\n      var skip = performArgs && performArgs.skip; // TODO some refactor.\n      // Pull data. Must pull data each time, because context.data\n      // may be updated by Series.setData.\n\n      if (this._dirty && upTask) {\n        var context = this.context;\n        context.data = context.outputData = upTask.context.outputData;\n      }\n\n      if (this.__pipeline) {\n        this.__pipeline.currentTask = this;\n      }\n\n      var planResult;\n\n      if (this._plan && !skip) {\n        planResult = this._plan(this.context);\n      } // Support sharding by mod, which changes the render sequence and makes the rendered graphic\n      // elements uniformed distributed when progress, especially when moving or zooming.\n\n\n      var lastModBy = normalizeModBy(this._modBy);\n      var lastModDataCount = this._modDataCount || 0;\n      var modBy = normalizeModBy(performArgs && performArgs.modBy);\n      var modDataCount = performArgs && performArgs.modDataCount || 0;\n\n      if (lastModBy !== modBy || lastModDataCount !== modDataCount) {\n        planResult = 'reset';\n      }\n\n      function normalizeModBy(val) {\n        !(val >= 1) && (val = 1); // jshint ignore:line\n\n        return val;\n      }\n\n      var forceFirstProgress;\n\n      if (this._dirty || planResult === 'reset') {\n        this._dirty = false;\n        forceFirstProgress = this._doReset(skip);\n      }\n\n      this._modBy = modBy;\n      this._modDataCount = modDataCount;\n      var step = performArgs && performArgs.step;\n\n      if (upTask) {\n        {\n          assert(upTask._outputDueEnd != null);\n        }\n        this._dueEnd = upTask._outputDueEnd;\n      } // DataTask or overallTask\n      else {\n          {\n            assert(!this._progress || this._count);\n          }\n          this._dueEnd = this._count ? this._count(this.context) : Infinity;\n        } // Note: Stubs, that its host overall task let it has progress, has progress.\n      // If no progress, pass index from upstream to downstream each time plan called.\n\n\n      if (this._progress) {\n        var start = this._dueIndex;\n        var end = Math.min(step != null ? this._dueIndex + step : Infinity, this._dueEnd);\n\n        if (!skip && (forceFirstProgress || start < end)) {\n          var progress = this._progress;\n\n          if (isArray(progress)) {\n            for (var i = 0; i < progress.length; i++) {\n              this._doProgress(progress[i], start, end, modBy, modDataCount);\n            }\n          } else {\n            this._doProgress(progress, start, end, modBy, modDataCount);\n          }\n        }\n\n        this._dueIndex = end; // If no `outputDueEnd`, assume that output data and\n        // input data is the same, so use `dueIndex` as `outputDueEnd`.\n\n        var outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : end;\n        {\n          // ??? Can not rollback.\n          assert(outputDueEnd >= this._outputDueEnd);\n        }\n        this._outputDueEnd = outputDueEnd;\n      } else {\n        // (1) Some overall task has no progress.\n        // (2) Stubs, that its host overall task do not let it has progress, has no progress.\n        // This should always be performed so it can be passed to downstream.\n        this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : this._dueEnd;\n      }\n\n      return this.unfinished();\n    };\n\n    Task.prototype.dirty = function () {\n      this._dirty = true;\n      this._onDirty && this._onDirty(this.context);\n    };\n\n    Task.prototype._doProgress = function (progress, start, end, modBy, modDataCount) {\n      iterator.reset(start, end, modBy, modDataCount);\n      this._callingProgress = progress;\n\n      this._callingProgress({\n        start: start,\n        end: end,\n        count: end - start,\n        next: iterator.next\n      }, this.context);\n    };\n\n    Task.prototype._doReset = function (skip) {\n      this._dueIndex = this._outputDueEnd = this._dueEnd = 0;\n      this._settedOutputEnd = null;\n      var progress;\n      var forceFirstProgress;\n\n      if (!skip && this._reset) {\n        progress = this._reset(this.context);\n\n        if (progress && progress.progress) {\n          forceFirstProgress = progress.forceFirstProgress;\n          progress = progress.progress;\n        } // To simplify no progress checking, array must has item.\n\n\n        if (isArray(progress) && !progress.length) {\n          progress = null;\n        }\n      }\n\n      this._progress = progress;\n      this._modBy = this._modDataCount = null;\n      var downstream = this._downstream;\n      downstream && downstream.dirty();\n      return forceFirstProgress;\n    };\n\n    Task.prototype.unfinished = function () {\n      return this._progress && this._dueIndex < this._dueEnd;\n    };\n    /**\n     * @param downTask The downstream task.\n     * @return The downstream task.\n     */\n\n\n    Task.prototype.pipe = function (downTask) {\n      {\n        assert(downTask && !downTask._disposed && downTask !== this);\n      } // If already downstream, do not dirty downTask.\n\n      if (this._downstream !== downTask || this._dirty) {\n        this._downstream = downTask;\n        downTask._upstream = this;\n        downTask.dirty();\n      }\n    };\n\n    Task.prototype.dispose = function () {\n      if (this._disposed) {\n        return;\n      }\n\n      this._upstream && (this._upstream._downstream = null);\n      this._downstream && (this._downstream._upstream = null);\n      this._dirty = false;\n      this._disposed = true;\n    };\n\n    Task.prototype.getUpstream = function () {\n      return this._upstream;\n    };\n\n    Task.prototype.getDownstream = function () {\n      return this._downstream;\n    };\n\n    Task.prototype.setOutputEnd = function (end) {\n      // This only happend in dataTask, dataZoom, map, currently.\n      // where dataZoom do not set end each time, but only set\n      // when reset. So we should record the setted end, in case\n      // that the stub of dataZoom perform again and earse the\n      // setted end by upstream.\n      this._outputDueEnd = this._settedOutputEnd = end;\n    };\n\n    return Task;\n  }();\n\n  var iterator = function () {\n    var end;\n    var current;\n    var modBy;\n    var modDataCount;\n    var winCount;\n    var it = {\n      reset: function (s, e, sStep, sCount) {\n        current = s;\n        end = e;\n        modBy = sStep;\n        modDataCount = sCount;\n        winCount = Math.ceil(modDataCount / modBy);\n        it.next = modBy > 1 && modDataCount > 0 ? modNext : sequentialNext;\n      }\n    };\n    return it;\n\n    function sequentialNext() {\n      return current < end ? current++ : null;\n    }\n\n    function modNext() {\n      var dataIndex = current % winCount * modBy + Math.ceil(current / winCount);\n      var result = current >= end ? null : dataIndex < modDataCount ? dataIndex // If modDataCount is smaller than data.count() (consider `appendData` case),\n      // Use normal linear rendering mode.\n      : current;\n      current++;\n      return result;\n    }\n  }(); ///////////////////////////////////////////////////////////\n  // For stream debug (Should be commented out after used!)\n  // @usage: printTask(this, 'begin');\n  // @usage: printTask(this, null, {someExtraProp});\n  // @usage: Use `__idxInPipeline` as conditional breakpiont.\n  //\n  // window.printTask = function (task: any, prefix: string, extra: { [key: string]: unknown }): void {\n  //     window.ecTaskUID == null && (window.ecTaskUID = 0);\n  //     task.uidDebug == null && (task.uidDebug = `task_${window.ecTaskUID++}`);\n  //     task.agent && task.agent.uidDebug == null && (task.agent.uidDebug = `task_${window.ecTaskUID++}`);\n  //     let props = [];\n  //     if (task.__pipeline) {\n  //         let val = `${task.__idxInPipeline}/${task.__pipeline.tail.__idxInPipeline} ${task.agent ? '(stub)' : ''}`;\n  //         props.push({text: '__idxInPipeline/total', value: val});\n  //     } else {\n  //         let stubCount = 0;\n  //         task.agentStubMap.each(() => stubCount++);\n  //         props.push({text: 'idx', value: `overall (stubs: ${stubCount})`});\n  //     }\n  //     props.push({text: 'uid', value: task.uidDebug});\n  //     if (task.__pipeline) {\n  //         props.push({text: 'pipelineId', value: task.__pipeline.id});\n  //         task.agent && props.push(\n  //             {text: 'stubFor', value: task.agent.uidDebug}\n  //         );\n  //     }\n  //     props.push(\n  //         {text: 'dirty', value: task._dirty},\n  //         {text: 'dueIndex', value: task._dueIndex},\n  //         {text: 'dueEnd', value: task._dueEnd},\n  //         {text: 'outputDueEnd', value: task._outputDueEnd}\n  //     );\n  //     if (extra) {\n  //         Object.keys(extra).forEach(key => {\n  //             props.push({text: key, value: extra[key]});\n  //         });\n  //     }\n  //     let args = ['color: blue'];\n  //     let msg = `%c[${prefix || 'T'}] %c` + props.map(item => (\n  //         args.push('color: green', 'color: red'),\n  //         `${item.text}: %c${item.value}`\n  //     )).join('%c, ');\n  //     console.log.apply(console, [msg].concat(args));\n  //     // console.log(this);\n  // };\n  // window.printPipeline = function (task: any, prefix: string) {\n  //     const pipeline = task.__pipeline;\n  //     let currTask = pipeline.head;\n  //     while (currTask) {\n  //         window.printTask(currTask, prefix);\n  //         currTask = currTask._downstream;\n  //     }\n  // };\n  // window.showChain = function (chainHeadTask) {\n  //     var chain = [];\n  //     var task = chainHeadTask;\n  //     while (task) {\n  //         chain.push({\n  //             task: task,\n  //             up: task._upstream,\n  //             down: task._downstream,\n  //             idxInPipeline: task.__idxInPipeline\n  //         });\n  //         task = task._downstream;\n  //     }\n  //     return chain;\n  // };\n  // window.findTaskInChain = function (task, chainHeadTask) {\n  //     let chain = window.showChain(chainHeadTask);\n  //     let result = [];\n  //     for (let i = 0; i < chain.length; i++) {\n  //         let chainItem = chain[i];\n  //         if (chainItem.task === task) {\n  //             result.push(i);\n  //         }\n  //     }\n  //     return result;\n  // };\n  // window.printChainAEachInChainB = function (chainHeadTaskA, chainHeadTaskB) {\n  //     let chainA = window.showChain(chainHeadTaskA);\n  //     for (let i = 0; i < chainA.length; i++) {\n  //         console.log('chainAIdx:', i, 'inChainB:', window.findTaskInChain(chainA[i].task, chainHeadTaskB));\n  //     }\n  // };\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Convert raw the value in to inner value in List.\n   *\n   * [Performance sensitive]\n   *\n   * [Caution]: this is the key logic of user value parser.\n   * For backward compatibiliy, do not modify it until have to!\n   */\n\n\n  function parseDataValue(value, // For high performance, do not omit the second param.\n  opt) {\n    // Performance sensitive.\n    var dimType = opt && opt.type;\n\n    if (dimType === 'ordinal') {\n      // If given value is a category string\n      return value;\n    }\n\n    if (dimType === 'time' // spead up when using timestamp\n    && !isNumber(value) && value != null && value !== '-') {\n      value = +parseDate(value);\n    } // dimType defaults 'number'.\n    // If dimType is not ordinal and value is null or undefined or NaN or '-',\n    // parse to NaN.\n    // number-like string (like ' 123 ') can be converted to a number.\n    // where null/undefined or other string will be converted to NaN.\n\n\n    return value == null || value === '' ? NaN // If string (like '-'), using '+' parse to NaN\n    // If object, also parse to NaN\n    : +value;\n  }\n\n  var valueParserMap = createHashMap({\n    'number': function (val) {\n      // Do not use `numericToNumber` here. We have by defualt `numericToNumber`.\n      // Here the number parser can have loose rule:\n      // enable to cut suffix: \"120px\" => 120, \"14%\" => 14.\n      return parseFloat(val);\n    },\n    'time': function (val) {\n      // return timestamp.\n      return +parseDate(val);\n    },\n    'trim': function (val) {\n      return isString(val) ? trim(val) : val;\n    }\n  });\n  var ORDER_COMPARISON_OP_MAP = {\n    lt: function (lval, rval) {\n      return lval < rval;\n    },\n    lte: function (lval, rval) {\n      return lval <= rval;\n    },\n    gt: function (lval, rval) {\n      return lval > rval;\n    },\n    gte: function (lval, rval) {\n      return lval >= rval;\n    }\n  };\n\n  var FilterOrderComparator =\n  /** @class */\n  function () {\n    function FilterOrderComparator(op, rval) {\n      if (!isNumber(rval)) {\n        var errMsg = '';\n        {\n          errMsg = 'rvalue of \"<\", \">\", \"<=\", \">=\" can only be number in filter.';\n        }\n        throwError(errMsg);\n      }\n\n      this._opFn = ORDER_COMPARISON_OP_MAP[op];\n      this._rvalFloat = numericToNumber(rval);\n    } // Performance sensitive.\n\n\n    FilterOrderComparator.prototype.evaluate = function (lval) {\n      // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\n      return isNumber(lval) ? this._opFn(lval, this._rvalFloat) : this._opFn(numericToNumber(lval), this._rvalFloat);\n    };\n\n    return FilterOrderComparator;\n  }();\n\n  var SortOrderComparator =\n  /** @class */\n  function () {\n    /**\n     * @param order by defualt: 'asc'\n     * @param incomparable by defualt: Always on the tail.\n     *        That is, if 'asc' => 'max', if 'desc' => 'min'\n     *        See the definition of \"incomparable\" in [SORT_COMPARISON_RULE]\n     */\n    function SortOrderComparator(order, incomparable) {\n      var isDesc = order === 'desc';\n      this._resultLT = isDesc ? 1 : -1;\n\n      if (incomparable == null) {\n        incomparable = isDesc ? 'min' : 'max';\n      }\n\n      this._incomparable = incomparable === 'min' ? -Infinity : Infinity;\n    } // See [SORT_COMPARISON_RULE].\n    // Performance sensitive.\n\n\n    SortOrderComparator.prototype.evaluate = function (lval, rval) {\n      // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\n      var lvalFloat = isNumber(lval) ? lval : numericToNumber(lval);\n      var rvalFloat = isNumber(rval) ? rval : numericToNumber(rval);\n      var lvalNotNumeric = isNaN(lvalFloat);\n      var rvalNotNumeric = isNaN(rvalFloat);\n\n      if (lvalNotNumeric) {\n        lvalFloat = this._incomparable;\n      }\n\n      if (rvalNotNumeric) {\n        rvalFloat = this._incomparable;\n      }\n\n      if (lvalNotNumeric && rvalNotNumeric) {\n        var lvalIsStr = isString(lval);\n        var rvalIsStr = isString(rval);\n\n        if (lvalIsStr) {\n          lvalFloat = rvalIsStr ? lval : 0;\n        }\n\n        if (rvalIsStr) {\n          rvalFloat = lvalIsStr ? rval : 0;\n        }\n      }\n\n      return lvalFloat < rvalFloat ? this._resultLT : lvalFloat > rvalFloat ? -this._resultLT : 0;\n    };\n\n    return SortOrderComparator;\n  }();\n\n  var FilterEqualityComparator =\n  /** @class */\n  function () {\n    function FilterEqualityComparator(isEq, rval) {\n      this._rval = rval;\n      this._isEQ = isEq;\n      this._rvalTypeof = typeof rval;\n      this._rvalFloat = numericToNumber(rval);\n    } // Performance sensitive.\n\n\n    FilterEqualityComparator.prototype.evaluate = function (lval) {\n      var eqResult = lval === this._rval;\n\n      if (!eqResult) {\n        var lvalTypeof = typeof lval;\n\n        if (lvalTypeof !== this._rvalTypeof && (lvalTypeof === 'number' || this._rvalTypeof === 'number')) {\n          eqResult = numericToNumber(lval) === this._rvalFloat;\n        }\n      }\n\n      return this._isEQ ? eqResult : !eqResult;\n    };\n\n    return FilterEqualityComparator;\n  }();\n  /**\n   * [FILTER_COMPARISON_RULE]\n   * `lt`|`lte`|`gt`|`gte`:\n   * + rval must be a number. And lval will be converted to number (`numericToNumber`) to compare.\n   * `eq`:\n   * + If same type, compare with `===`.\n   * + If there is one number, convert to number (`numericToNumber`) to compare.\n   * + Else return `false`.\n   * `ne`:\n   * + Not `eq`.\n   *\n   *\n   * [SORT_COMPARISON_RULE]\n   * All the values are grouped into three categories:\n   * + \"numeric\" (number and numeric string)\n   * + \"non-numeric-string\" (string that excluding numeric string)\n   * + \"others\"\n   * \"numeric\" vs \"numeric\": values are ordered by number order.\n   * \"non-numeric-string\" vs \"non-numeric-string\": values are ordered by ES spec (#sec-abstract-relational-comparison).\n   * \"others\" vs \"others\": do not change order (always return 0).\n   * \"numeric\" vs \"non-numeric-string\": \"non-numeric-string\" is treated as \"incomparable\".\n   * \"number\" vs \"others\": \"others\" is treated as \"incomparable\".\n   * \"non-numeric-string\" vs \"others\": \"others\" is treated as \"incomparable\".\n   * \"incomparable\" will be seen as -Infinity or Infinity (depends on the settings).\n   * MEMO:\n   *   non-numeric string sort make sence when need to put the items with the same tag together.\n   *   But if we support string sort, we still need to avoid the misleading like `'2' > '12'`,\n   *   So we treat \"numeric-string\" sorted by number order rather than string comparison.\n   *\n   *\n   * [CHECK_LIST_OF_THE_RULE_DESIGN]\n   * + Do not support string comparison until required. And also need to\n   *   void the misleading of \"2\" > \"12\".\n   * + Should avoid the misleading case:\n   *   `\" 22 \" gte \"22\"` is `true` but `\" 22 \" eq \"22\"` is `false`.\n   * + JS bad case should be avoided: null <= 0, [] <= 0, ' ' <= 0, ...\n   * + Only \"numeric\" can be converted to comparable number, otherwise converted to NaN.\n   *   See `util/number.ts#numericToNumber`.\n   *\n   * @return If `op` is not `RelationalOperator`, return null;\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * TODO: disable writable.\n   * This structure will be exposed to users.\n   */\n\n\n  var ExternalSource =\n  /** @class */\n  function () {\n    function ExternalSource() {}\n\n    ExternalSource.prototype.getRawData = function () {\n      // Only built-in transform available.\n      throw new Error('not supported');\n    };\n\n    ExternalSource.prototype.getRawDataItem = function (dataIndex) {\n      // Only built-in transform available.\n      throw new Error('not supported');\n    };\n\n    ExternalSource.prototype.cloneRawData = function () {\n      return;\n    };\n    /**\n     * @return If dimension not found, return null/undefined.\n     */\n\n\n    ExternalSource.prototype.getDimensionInfo = function (dim) {\n      return;\n    };\n    /**\n     * dimensions defined if and only if either:\n     * (a) dataset.dimensions are declared.\n     * (b) dataset data include dimensions definitions in data (detected or via specified `sourceHeader`).\n     * If dimensions are defined, `dimensionInfoAll` is corresponding to\n     * the defined dimensions.\n     * Otherwise, `dimensionInfoAll` is determined by data columns.\n     * @return Always return an array (even empty array).\n     */\n\n\n    ExternalSource.prototype.cloneAllDimensionInfo = function () {\n      return;\n    };\n\n    ExternalSource.prototype.count = function () {\n      return;\n    };\n    /**\n     * Only support by dimension index.\n     * No need to support by dimension name in transform function,\n     * becuase transform function is not case-specific, no need to use name literally.\n     */\n\n\n    ExternalSource.prototype.retrieveValue = function (dataIndex, dimIndex) {\n      return;\n    };\n\n    ExternalSource.prototype.retrieveValueFromItem = function (dataItem, dimIndex) {\n      return;\n    };\n\n    ExternalSource.prototype.convertValue = function (rawVal, dimInfo) {\n      return parseDataValue(rawVal, dimInfo);\n    };\n\n    return ExternalSource;\n  }();\n\n  function createExternalSource(internalSource, externalTransform) {\n    var extSource = new ExternalSource();\n    var data = internalSource.data;\n    var sourceFormat = extSource.sourceFormat = internalSource.sourceFormat;\n    var sourceHeaderCount = internalSource.startIndex;\n    var errMsg = '';\n\n    if (internalSource.seriesLayoutBy !== SERIES_LAYOUT_BY_COLUMN) {\n      // For the logic simplicity in transformer, only 'culumn' is\n      // supported in data transform. Otherwise, the `dimensionsDefine`\n      // might be detected by 'row', which probably confuses users.\n      {\n        errMsg = '`seriesLayoutBy` of upstream dataset can only be \"column\" in data transform.';\n      }\n      throwError(errMsg);\n    } // [MEMO]\n    // Create a new dimensions structure for exposing.\n    // Do not expose all dimension info to users directly.\n    // Becuase the dimension is probably auto detected from data and not might reliable.\n    // Should not lead the transformers to think that is relialbe and return it.\n    // See [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\n\n\n    var dimensions = [];\n    var dimsByName = {};\n    var dimsDef = internalSource.dimensionsDefine;\n\n    if (dimsDef) {\n      each(dimsDef, function (dimDef, idx) {\n        var name = dimDef.name;\n        var dimDefExt = {\n          index: idx,\n          name: name,\n          displayName: dimDef.displayName\n        };\n        dimensions.push(dimDefExt); // Users probably not sepcify dimension name. For simplicity, data transform\n        // do not generate dimension name.\n\n        if (name != null) {\n          // Dimension name should not be duplicated.\n          // For simplicity, data transform forbid name duplication, do not generate\n          // new name like module `completeDimensions.ts` did, but just tell users.\n          var errMsg_1 = '';\n\n          if (hasOwn(dimsByName, name)) {\n            {\n              errMsg_1 = 'dimension name \"' + name + '\" duplicated.';\n            }\n            throwError(errMsg_1);\n          }\n\n          dimsByName[name] = dimDefExt;\n        }\n      });\n    } // If dimension definitions are not defined and can not be detected.\n    // e.g., pure data `[[11, 22], ...]`.\n    else {\n        for (var i = 0; i < internalSource.dimensionsDetectedCount || 0; i++) {\n          // Do not generete name or anything others. The consequence process in\n          // `transform` or `series` probably have there own name generation strategry.\n          dimensions.push({\n            index: i\n          });\n        }\n      } // Implement public methods:\n\n\n    var rawItemGetter = getRawSourceItemGetter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\n\n    if (externalTransform.__isBuiltIn) {\n      extSource.getRawDataItem = function (dataIndex) {\n        return rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\n      };\n\n      extSource.getRawData = bind(getRawData, null, internalSource);\n    }\n\n    extSource.cloneRawData = bind(cloneRawData, null, internalSource);\n    var rawCounter = getRawSourceDataCounter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\n    extSource.count = bind(rawCounter, null, data, sourceHeaderCount, dimensions);\n    var rawValueGetter = getRawSourceValueGetter(sourceFormat);\n\n    extSource.retrieveValue = function (dataIndex, dimIndex) {\n      var rawItem = rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\n      return retrieveValueFromItem(rawItem, dimIndex);\n    };\n\n    var retrieveValueFromItem = extSource.retrieveValueFromItem = function (dataItem, dimIndex) {\n      if (dataItem == null) {\n        return;\n      }\n\n      var dimDef = dimensions[dimIndex]; // When `dimIndex` is `null`, `rawValueGetter` return the whole item.\n\n      if (dimDef) {\n        return rawValueGetter(dataItem, dimIndex, dimDef.name);\n      }\n    };\n\n    extSource.getDimensionInfo = bind(getDimensionInfo, null, dimensions, dimsByName);\n    extSource.cloneAllDimensionInfo = bind(cloneAllDimensionInfo, null, dimensions);\n    return extSource;\n  }\n\n  function getRawData(upstream) {\n    var sourceFormat = upstream.sourceFormat;\n\n    if (!isSupportedSourceFormat(sourceFormat)) {\n      var errMsg = '';\n      {\n        errMsg = '`getRawData` is not supported in source format ' + sourceFormat;\n      }\n      throwError(errMsg);\n    }\n\n    return upstream.data;\n  }\n\n  function cloneRawData(upstream) {\n    var sourceFormat = upstream.sourceFormat;\n    var data = upstream.data;\n\n    if (!isSupportedSourceFormat(sourceFormat)) {\n      var errMsg = '';\n      {\n        errMsg = '`cloneRawData` is not supported in source format ' + sourceFormat;\n      }\n      throwError(errMsg);\n    }\n\n    if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n      var result = [];\n\n      for (var i = 0, len = data.length; i < len; i++) {\n        // Not strictly clone for performance\n        result.push(data[i].slice());\n      }\n\n      return result;\n    } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n      var result = [];\n\n      for (var i = 0, len = data.length; i < len; i++) {\n        // Not strictly clone for performance\n        result.push(extend({}, data[i]));\n      }\n\n      return result;\n    }\n  }\n\n  function getDimensionInfo(dimensions, dimsByName, dim) {\n    if (dim == null) {\n      return;\n    } // Keep the same logic as `List::getDimension` did.\n\n\n    if (isNumber(dim) // If being a number-like string but not being defined a dimension name.\n    || !isNaN(dim) && !hasOwn(dimsByName, dim)) {\n      return dimensions[dim];\n    } else if (hasOwn(dimsByName, dim)) {\n      return dimsByName[dim];\n    }\n  }\n\n  function cloneAllDimensionInfo(dimensions) {\n    return clone(dimensions);\n  }\n\n  var externalTransformMap = createHashMap();\n\n  function registerExternalTransform(externalTransform) {\n    externalTransform = clone(externalTransform);\n    var type = externalTransform.type;\n    var errMsg = '';\n\n    if (!type) {\n      {\n        errMsg = 'Must have a `type` when `registerTransform`.';\n      }\n      throwError(errMsg);\n    }\n\n    var typeParsed = type.split(':');\n\n    if (typeParsed.length !== 2) {\n      {\n        errMsg = 'Name must include namespace like \"ns:regression\".';\n      }\n      throwError(errMsg);\n    } // Namespace 'echarts:xxx' is official namespace, where the transforms should\n    // be called directly via 'xxx' rather than 'echarts:xxx'.\n\n\n    var isBuiltIn = false;\n\n    if (typeParsed[0] === 'echarts') {\n      type = typeParsed[1];\n      isBuiltIn = true;\n    }\n\n    externalTransform.__isBuiltIn = isBuiltIn;\n    externalTransformMap.set(type, externalTransform);\n  }\n\n  function applyDataTransform(rawTransOption, sourceList, infoForPrint) {\n    var pipedTransOption = normalizeToArray(rawTransOption);\n    var pipeLen = pipedTransOption.length;\n    var errMsg = '';\n\n    if (!pipeLen) {\n      {\n        errMsg = 'If `transform` declared, it should at least contain one transform.';\n      }\n      throwError(errMsg);\n    }\n\n    for (var i = 0, len = pipeLen; i < len; i++) {\n      var transOption = pipedTransOption[i];\n      sourceList = applySingleDataTransform(transOption, sourceList, infoForPrint, pipeLen === 1 ? null : i); // piped transform only support single input, except the fist one.\n      // piped transform only support single output, except the last one.\n\n      if (i !== len - 1) {\n        sourceList.length = Math.max(sourceList.length, 1);\n      }\n    }\n\n    return sourceList;\n  }\n\n  function applySingleDataTransform(transOption, upSourceList, infoForPrint, // If `pipeIndex` is null/undefined, no piped transform.\n  pipeIndex) {\n    var errMsg = '';\n\n    if (!upSourceList.length) {\n      {\n        errMsg = 'Must have at least one upstream dataset.';\n      }\n      throwError(errMsg);\n    }\n\n    if (!isObject(transOption)) {\n      {\n        errMsg = 'transform declaration must be an object rather than ' + typeof transOption + '.';\n      }\n      throwError(errMsg);\n    }\n\n    var transType = transOption.type;\n    var externalTransform = externalTransformMap.get(transType);\n\n    if (!externalTransform) {\n      {\n        errMsg = 'Can not find transform on type \"' + transType + '\".';\n      }\n      throwError(errMsg);\n    } // Prepare source\n\n\n    var extUpSourceList = map(upSourceList, function (upSource) {\n      return createExternalSource(upSource, externalTransform);\n    });\n    var resultList = normalizeToArray(externalTransform.transform({\n      upstream: extUpSourceList[0],\n      upstreamList: extUpSourceList,\n      config: clone(transOption.config)\n    }));\n    {\n      if (transOption.print) {\n        var printStrArr = map(resultList, function (extSource) {\n          var pipeIndexStr = pipeIndex != null ? ' === pipe index: ' + pipeIndex : '';\n          return ['=== dataset index: ' + infoForPrint.datasetIndex + pipeIndexStr + ' ===', '- transform result data:', makePrintable(extSource.data), '- transform result dimensions:', makePrintable(extSource.dimensions)].join('\\n');\n        }).join('\\n');\n        log(printStrArr);\n      }\n    }\n    return map(resultList, function (result, resultIndex) {\n      var errMsg = '';\n\n      if (!isObject(result)) {\n        {\n          errMsg = 'A transform should not return some empty results.';\n        }\n        throwError(errMsg);\n      }\n\n      if (!result.data) {\n        {\n          errMsg = 'Transform result data should be not be null or undefined';\n        }\n        throwError(errMsg);\n      }\n\n      var sourceFormat = detectSourceFormat(result.data);\n\n      if (!isSupportedSourceFormat(sourceFormat)) {\n        {\n          errMsg = 'Transform result data should be array rows or object rows.';\n        }\n        throwError(errMsg);\n      }\n\n      var resultMetaRawOption;\n      var firstUpSource = upSourceList[0];\n      /**\n       * Intuitively, the end users known the content of the original `dataset.source`,\n       * calucating the transform result in mind.\n       * Suppose the original `dataset.source` is:\n       * ```js\n       * [\n       *     ['product', '2012', '2013', '2014', '2015'],\n       *     ['AAA', 41.1, 30.4, 65.1, 53.3],\n       *     ['BBB', 86.5, 92.1, 85.7, 83.1],\n       *     ['CCC', 24.1, 67.2, 79.5, 86.4]\n       * ]\n       * ```\n       * The dimension info have to be detected from the source data.\n       * Some of the transformers (like filter, sort) will follow the dimension info\n       * of upstream, while others use new dimensions (like aggregate).\n       * Transformer can output a field `dimensions` to define the its own output dimensions.\n       * We also allow transformers to ignore the output `dimensions` field, and\n       * inherit the upstream dimensions definition. It can reduce the burden of handling\n       * dimensions in transformers.\n       *\n       * See also [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\n       */\n\n      if (firstUpSource && resultIndex === 0 // If transformer returns `dimensions`, it means that the transformer has different\n      // dimensions definitions. We do not inherit anything from upstream.\n      && !result.dimensions) {\n        var startIndex = firstUpSource.startIndex; // We copy the header of upstream to the result becuase:\n        // (1) The returned data always does not contain header line and can not be used\n        // as dimension-detection. In this case we can not use \"detected dimensions\" of\n        // upstream directly, because it might be detected based on different `seriesLayoutBy`.\n        // (2) We should support that the series read the upstream source in `seriesLayoutBy: 'row'`.\n        // So the original detected header should be add to the result, otherwise they can not be read.\n\n        if (startIndex) {\n          result.data = firstUpSource.data.slice(0, startIndex).concat(result.data);\n        }\n\n        resultMetaRawOption = {\n          seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n          sourceHeader: startIndex,\n          dimensions: firstUpSource.metaRawOption.dimensions\n        };\n      } else {\n        resultMetaRawOption = {\n          seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n          sourceHeader: 0,\n          dimensions: result.dimensions\n        };\n      }\n\n      return createSource(result.data, resultMetaRawOption, null);\n    });\n  }\n\n  function isSupportedSourceFormat(sourceFormat) {\n    return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS || sourceFormat === SOURCE_FORMAT_OBJECT_ROWS;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var UNDEFINED = 'undefined';\n  /* global Float64Array, Int32Array, Uint32Array, Uint16Array */\n  // Caution: MUST not use `new CtorUint32Array(arr, 0, len)`, because the Ctor of array is\n  // different from the Ctor of typed array.\n\n  var CtorUint32Array = typeof Uint32Array === UNDEFINED ? Array : Uint32Array;\n  var CtorUint16Array = typeof Uint16Array === UNDEFINED ? Array : Uint16Array;\n  var CtorInt32Array = typeof Int32Array === UNDEFINED ? Array : Int32Array;\n  var CtorFloat64Array = typeof Float64Array === UNDEFINED ? Array : Float64Array;\n  /**\n   * Multi dimensional data store\n   */\n\n  var dataCtors = {\n    'float': CtorFloat64Array,\n    'int': CtorInt32Array,\n    // Ordinal data type can be string or int\n    'ordinal': Array,\n    'number': Array,\n    'time': CtorFloat64Array\n  };\n  var defaultDimValueGetters;\n\n  function getIndicesCtor(rawCount) {\n    // The possible max value in this._indicies is always this._rawCount despite of filtering.\n    return rawCount > 65535 ? CtorUint32Array : CtorUint16Array;\n  }\n\n  function getInitialExtent() {\n    return [Infinity, -Infinity];\n  }\n\n  function cloneChunk(originalChunk) {\n    var Ctor = originalChunk.constructor; // Only shallow clone is enough when Array.\n\n    return Ctor === Array ? originalChunk.slice() : new Ctor(originalChunk);\n  }\n\n  function prepareStore(store, dimIdx, dimType, end, append) {\n    var DataCtor = dataCtors[dimType || 'float'];\n\n    if (append) {\n      var oldStore = store[dimIdx];\n      var oldLen = oldStore && oldStore.length;\n\n      if (!(oldLen === end)) {\n        var newStore = new DataCtor(end); // The cost of the copy is probably inconsiderable\n        // within the initial chunkSize.\n\n        for (var j = 0; j < oldLen; j++) {\n          newStore[j] = oldStore[j];\n        }\n\n        store[dimIdx] = newStore;\n      }\n    } else {\n      store[dimIdx] = new DataCtor(end);\n    }\n  }\n  /**\n   * Basically, DataStore API keep immutable.\n   */\n\n\n  var DataStore =\n  /** @class */\n  function () {\n    function DataStore() {\n      this._chunks = []; // It will not be calculated util needed.\n\n      this._rawExtent = [];\n      this._extent = [];\n      this._count = 0;\n      this._rawCount = 0;\n      this._calcDimNameToIdx = createHashMap();\n    }\n    /**\n     * Initialize from data\n     */\n\n\n    DataStore.prototype.initData = function (provider, inputDimensions, dimValueGetter) {\n      {\n        assert(isFunction(provider.getItem) && isFunction(provider.count), 'Invalid data provider.');\n      }\n      this._provider = provider; // Clear\n\n      this._chunks = [];\n      this._indices = null;\n      this.getRawIndex = this._getRawIdxIdentity;\n      var source = provider.getSource();\n      var defaultGetter = this.defaultDimValueGetter = defaultDimValueGetters[source.sourceFormat]; // Default dim value getter\n\n      this._dimValueGetter = dimValueGetter || defaultGetter; // Reset raw extent.\n\n      this._rawExtent = [];\n      var willRetrieveDataByName = shouldRetrieveDataByName(source);\n      this._dimensions = map(inputDimensions, function (dim) {\n        {\n          if (willRetrieveDataByName) {\n            assert(dim.property != null);\n          }\n        }\n        return {\n          // Only pick these two props. Not leak other properties like orderMeta.\n          type: dim.type,\n          property: dim.property\n        };\n      });\n\n      this._initDataFromProvider(0, provider.count());\n    };\n\n    DataStore.prototype.getProvider = function () {\n      return this._provider;\n    };\n    /**\n     * Caution: even when a `source` instance owned by a series, the created data store\n     * may still be shared by different sereis (the source hash does not use all `source`\n     * props, see `sourceManager`). In this case, the `source` props that are not used in\n     * hash (like `source.dimensionDefine`) probably only belongs to a certain series and\n     * thus should not be fetch here.\n     */\n\n\n    DataStore.prototype.getSource = function () {\n      return this._provider.getSource();\n    };\n    /**\n     * @caution Only used in dataStack.\n     */\n\n\n    DataStore.prototype.ensureCalculationDimension = function (dimName, type) {\n      var calcDimNameToIdx = this._calcDimNameToIdx;\n      var dimensions = this._dimensions;\n      var calcDimIdx = calcDimNameToIdx.get(dimName);\n\n      if (calcDimIdx != null) {\n        if (dimensions[calcDimIdx].type === type) {\n          return calcDimIdx;\n        }\n      } else {\n        calcDimIdx = dimensions.length;\n      }\n\n      dimensions[calcDimIdx] = {\n        type: type\n      };\n      calcDimNameToIdx.set(dimName, calcDimIdx);\n      this._chunks[calcDimIdx] = new dataCtors[type || 'float'](this._rawCount);\n      this._rawExtent[calcDimIdx] = getInitialExtent();\n      return calcDimIdx;\n    };\n\n    DataStore.prototype.collectOrdinalMeta = function (dimIdx, ordinalMeta) {\n      var chunk = this._chunks[dimIdx];\n      var dim = this._dimensions[dimIdx];\n      var rawExtents = this._rawExtent;\n      var offset = dim.ordinalOffset || 0;\n      var len = chunk.length;\n\n      if (offset === 0) {\n        // We need to reset the rawExtent if collect is from start.\n        // Because this dimension may be guessed as number and calcuating a wrong extent.\n        rawExtents[dimIdx] = getInitialExtent();\n      }\n\n      var dimRawExtent = rawExtents[dimIdx]; // Parse from previous data offset. len may be changed after appendData\n\n      for (var i = offset; i < len; i++) {\n        var val = chunk[i] = ordinalMeta.parseAndCollect(chunk[i]);\n\n        if (!isNaN(val)) {\n          dimRawExtent[0] = Math.min(val, dimRawExtent[0]);\n          dimRawExtent[1] = Math.max(val, dimRawExtent[1]);\n        }\n      }\n\n      dim.ordinalMeta = ordinalMeta;\n      dim.ordinalOffset = len;\n      dim.type = 'ordinal'; // Force to be ordinal\n    };\n\n    DataStore.prototype.getOrdinalMeta = function (dimIdx) {\n      var dimInfo = this._dimensions[dimIdx];\n      var ordinalMeta = dimInfo.ordinalMeta;\n      return ordinalMeta;\n    };\n\n    DataStore.prototype.getDimensionProperty = function (dimIndex) {\n      var item = this._dimensions[dimIndex];\n      return item && item.property;\n    };\n    /**\n     * Caution: Can be only called on raw data (before `this._indices` created).\n     */\n\n\n    DataStore.prototype.appendData = function (data) {\n      {\n        assert(!this._indices, 'appendData can only be called on raw data.');\n      }\n      var provider = this._provider;\n      var start = this.count();\n      provider.appendData(data);\n      var end = provider.count();\n\n      if (!provider.persistent) {\n        end += start;\n      }\n\n      if (start < end) {\n        this._initDataFromProvider(start, end, true);\n      }\n\n      return [start, end];\n    };\n\n    DataStore.prototype.appendValues = function (values, minFillLen) {\n      var chunks = this._chunks;\n      var dimensions = this._dimensions;\n      var dimLen = dimensions.length;\n      var rawExtent = this._rawExtent;\n      var start = this.count();\n      var end = start + Math.max(values.length, minFillLen || 0);\n\n      for (var i = 0; i < dimLen; i++) {\n        var dim = dimensions[i];\n        prepareStore(chunks, i, dim.type, end, true);\n      }\n\n      var emptyDataItem = [];\n\n      for (var idx = start; idx < end; idx++) {\n        var sourceIdx = idx - start; // Store the data by dimensions\n\n        for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\n          var dim = dimensions[dimIdx];\n          var val = defaultDimValueGetters.arrayRows.call(this, values[sourceIdx] || emptyDataItem, dim.property, sourceIdx, dimIdx);\n          chunks[dimIdx][idx] = val;\n          var dimRawExtent = rawExtent[dimIdx];\n          val < dimRawExtent[0] && (dimRawExtent[0] = val);\n          val > dimRawExtent[1] && (dimRawExtent[1] = val);\n        }\n      }\n\n      this._rawCount = this._count = end;\n      return {\n        start: start,\n        end: end\n      };\n    };\n\n    DataStore.prototype._initDataFromProvider = function (start, end, append) {\n      var provider = this._provider;\n      var chunks = this._chunks;\n      var dimensions = this._dimensions;\n      var dimLen = dimensions.length;\n      var rawExtent = this._rawExtent;\n      var dimNames = map(dimensions, function (dim) {\n        return dim.property;\n      });\n\n      for (var i = 0; i < dimLen; i++) {\n        var dim = dimensions[i];\n\n        if (!rawExtent[i]) {\n          rawExtent[i] = getInitialExtent();\n        }\n\n        prepareStore(chunks, i, dim.type, end, append);\n      }\n\n      if (provider.fillStorage) {\n        provider.fillStorage(start, end, chunks, rawExtent);\n      } else {\n        var dataItem = [];\n\n        for (var idx = start; idx < end; idx++) {\n          // NOTICE: Try not to write things into dataItem\n          dataItem = provider.getItem(idx, dataItem); // Each data item is value\n          // [1, 2]\n          // 2\n          // Bar chart, line chart which uses category axis\n          // only gives the 'y' value. 'x' value is the indices of category\n          // Use a tempValue to normalize the value to be a (x, y) value\n          // Store the data by dimensions\n\n          for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\n            var dimStorage = chunks[dimIdx]; // PENDING NULL is empty or zero\n\n            var val = this._dimValueGetter(dataItem, dimNames[dimIdx], idx, dimIdx);\n\n            dimStorage[idx] = val;\n            var dimRawExtent = rawExtent[dimIdx];\n            val < dimRawExtent[0] && (dimRawExtent[0] = val);\n            val > dimRawExtent[1] && (dimRawExtent[1] = val);\n          }\n        }\n      }\n\n      if (!provider.persistent && provider.clean) {\n        // Clean unused data if data source is typed array.\n        provider.clean();\n      }\n\n      this._rawCount = this._count = end; // Reset data extent\n\n      this._extent = [];\n    };\n\n    DataStore.prototype.count = function () {\n      return this._count;\n    };\n    /**\n     * Get value. Return NaN if idx is out of range.\n     */\n\n\n    DataStore.prototype.get = function (dim, idx) {\n      if (!(idx >= 0 && idx < this._count)) {\n        return NaN;\n      }\n\n      var dimStore = this._chunks[dim];\n      return dimStore ? dimStore[this.getRawIndex(idx)] : NaN;\n    };\n\n    DataStore.prototype.getValues = function (dimensions, idx) {\n      var values = [];\n      var dimArr = [];\n\n      if (idx == null) {\n        idx = dimensions; // TODO get all from store?\n\n        dimensions = []; // All dimensions\n\n        for (var i = 0; i < this._dimensions.length; i++) {\n          dimArr.push(i);\n        }\n      } else {\n        dimArr = dimensions;\n      }\n\n      for (var i = 0, len = dimArr.length; i < len; i++) {\n        values.push(this.get(dimArr[i], idx));\n      }\n\n      return values;\n    };\n    /**\n     * @param dim concrete dim\n     */\n\n\n    DataStore.prototype.getByRawIndex = function (dim, rawIdx) {\n      if (!(rawIdx >= 0 && rawIdx < this._rawCount)) {\n        return NaN;\n      }\n\n      var dimStore = this._chunks[dim];\n      return dimStore ? dimStore[rawIdx] : NaN;\n    };\n    /**\n     * Get sum of data in one dimension\n     */\n\n\n    DataStore.prototype.getSum = function (dim) {\n      var dimData = this._chunks[dim];\n      var sum = 0;\n\n      if (dimData) {\n        for (var i = 0, len = this.count(); i < len; i++) {\n          var value = this.get(dim, i);\n\n          if (!isNaN(value)) {\n            sum += value;\n          }\n        }\n      }\n\n      return sum;\n    };\n    /**\n     * Get median of data in one dimension\n     */\n\n\n    DataStore.prototype.getMedian = function (dim) {\n      var dimDataArray = []; // map all data of one dimension\n\n      this.each([dim], function (val) {\n        if (!isNaN(val)) {\n          dimDataArray.push(val);\n        }\n      }); // TODO\n      // Use quick select?\n\n      var sortedDimDataArray = dimDataArray.sort(function (a, b) {\n        return a - b;\n      });\n      var len = this.count(); // calculate median\n\n      return len === 0 ? 0 : len % 2 === 1 ? sortedDimDataArray[(len - 1) / 2] : (sortedDimDataArray[len / 2] + sortedDimDataArray[len / 2 - 1]) / 2;\n    };\n    /**\n     * Retreive the index with given raw data index\n     */\n\n\n    DataStore.prototype.indexOfRawIndex = function (rawIndex) {\n      if (rawIndex >= this._rawCount || rawIndex < 0) {\n        return -1;\n      }\n\n      if (!this._indices) {\n        return rawIndex;\n      } // Indices are ascending\n\n\n      var indices = this._indices; // If rawIndex === dataIndex\n\n      var rawDataIndex = indices[rawIndex];\n\n      if (rawDataIndex != null && rawDataIndex < this._count && rawDataIndex === rawIndex) {\n        return rawIndex;\n      }\n\n      var left = 0;\n      var right = this._count - 1;\n\n      while (left <= right) {\n        var mid = (left + right) / 2 | 0;\n\n        if (indices[mid] < rawIndex) {\n          left = mid + 1;\n        } else if (indices[mid] > rawIndex) {\n          right = mid - 1;\n        } else {\n          return mid;\n        }\n      }\n\n      return -1;\n    };\n    /**\n     * Retreive the index of nearest value\n     * @param dim\n     * @param value\n     * @param [maxDistance=Infinity]\n     * @return If and only if multiple indices has\n     *         the same value, they are put to the result.\n     */\n\n\n    DataStore.prototype.indicesOfNearest = function (dim, value, maxDistance) {\n      var chunks = this._chunks;\n      var dimData = chunks[dim];\n      var nearestIndices = [];\n\n      if (!dimData) {\n        return nearestIndices;\n      }\n\n      if (maxDistance == null) {\n        maxDistance = Infinity;\n      }\n\n      var minDist = Infinity;\n      var minDiff = -1;\n      var nearestIndicesLen = 0; // Check the test case of `test/ut/spec/data/SeriesData.js`.\n\n      for (var i = 0, len = this.count(); i < len; i++) {\n        var dataIndex = this.getRawIndex(i);\n        var diff = value - dimData[dataIndex];\n        var dist = Math.abs(diff);\n\n        if (dist <= maxDistance) {\n          // When the `value` is at the middle of `this.get(dim, i)` and `this.get(dim, i+1)`,\n          // we'd better not push both of them to `nearestIndices`, otherwise it is easy to\n          // get more than one item in `nearestIndices` (more specifically, in `tooltip`).\n          // So we chose the one that `diff >= 0` in this csae.\n          // But if `this.get(dim, i)` and `this.get(dim, j)` get the same value, both of them\n          // should be push to `nearestIndices`.\n          if (dist < minDist || dist === minDist && diff >= 0 && minDiff < 0) {\n            minDist = dist;\n            minDiff = diff;\n            nearestIndicesLen = 0;\n          }\n\n          if (diff === minDiff) {\n            nearestIndices[nearestIndicesLen++] = i;\n          }\n        }\n      }\n\n      nearestIndices.length = nearestIndicesLen;\n      return nearestIndices;\n    };\n\n    DataStore.prototype.getIndices = function () {\n      var newIndices;\n      var indices = this._indices;\n\n      if (indices) {\n        var Ctor = indices.constructor;\n        var thisCount = this._count; // `new Array(a, b, c)` is different from `new Uint32Array(a, b, c)`.\n\n        if (Ctor === Array) {\n          newIndices = new Ctor(thisCount);\n\n          for (var i = 0; i < thisCount; i++) {\n            newIndices[i] = indices[i];\n          }\n        } else {\n          newIndices = new Ctor(indices.buffer, 0, thisCount);\n        }\n      } else {\n        var Ctor = getIndicesCtor(this._rawCount);\n        newIndices = new Ctor(this.count());\n\n        for (var i = 0; i < newIndices.length; i++) {\n          newIndices[i] = i;\n        }\n      }\n\n      return newIndices;\n    };\n    /**\n     * Data filter.\n     */\n\n\n    DataStore.prototype.filter = function (dims, cb) {\n      if (!this._count) {\n        return this;\n      }\n\n      var newStore = this.clone();\n      var count = newStore.count();\n      var Ctor = getIndicesCtor(newStore._rawCount);\n      var newIndices = new Ctor(count);\n      var value = [];\n      var dimSize = dims.length;\n      var offset = 0;\n      var dim0 = dims[0];\n      var chunks = newStore._chunks;\n\n      for (var i = 0; i < count; i++) {\n        var keep = void 0;\n        var rawIdx = newStore.getRawIndex(i); // Simple optimization\n\n        if (dimSize === 0) {\n          keep = cb(i);\n        } else if (dimSize === 1) {\n          var val = chunks[dim0][rawIdx];\n          keep = cb(val, i);\n        } else {\n          var k = 0;\n\n          for (; k < dimSize; k++) {\n            value[k] = chunks[dims[k]][rawIdx];\n          }\n\n          value[k] = i;\n          keep = cb.apply(null, value);\n        }\n\n        if (keep) {\n          newIndices[offset++] = rawIdx;\n        }\n      } // Set indices after filtered.\n\n\n      if (offset < count) {\n        newStore._indices = newIndices;\n      }\n\n      newStore._count = offset; // Reset data extent\n\n      newStore._extent = [];\n\n      newStore._updateGetRawIdx();\n\n      return newStore;\n    };\n    /**\n     * Select data in range. (For optimization of filter)\n     * (Manually inline code, support 5 million data filtering in data zoom.)\n     */\n\n\n    DataStore.prototype.selectRange = function (range) {\n      var newStore = this.clone();\n      var len = newStore._count;\n\n      if (!len) {\n        return this;\n      }\n\n      var dims = keys(range);\n      var dimSize = dims.length;\n\n      if (!dimSize) {\n        return this;\n      }\n\n      var originalCount = newStore.count();\n      var Ctor = getIndicesCtor(newStore._rawCount);\n      var newIndices = new Ctor(originalCount);\n      var offset = 0;\n      var dim0 = dims[0];\n      var min = range[dim0][0];\n      var max = range[dim0][1];\n      var storeArr = newStore._chunks;\n      var quickFinished = false;\n\n      if (!newStore._indices) {\n        // Extreme optimization for common case. About 2x faster in chrome.\n        var idx = 0;\n\n        if (dimSize === 1) {\n          var dimStorage = storeArr[dims[0]];\n\n          for (var i = 0; i < len; i++) {\n            var val = dimStorage[i]; // NaN will not be filtered. Consider the case, in line chart, empty\n            // value indicates the line should be broken. But for the case like\n            // scatter plot, a data item with empty value will not be rendered,\n            // but the axis extent may be effected if some other dim of the data\n            // item has value. Fortunately it is not a significant negative effect.\n\n            if (val >= min && val <= max || isNaN(val)) {\n              newIndices[offset++] = idx;\n            }\n\n            idx++;\n          }\n\n          quickFinished = true;\n        } else if (dimSize === 2) {\n          var dimStorage = storeArr[dims[0]];\n          var dimStorage2 = storeArr[dims[1]];\n          var min2 = range[dims[1]][0];\n          var max2 = range[dims[1]][1];\n\n          for (var i = 0; i < len; i++) {\n            var val = dimStorage[i];\n            var val2 = dimStorage2[i]; // Do not filter NaN, see comment above.\n\n            if ((val >= min && val <= max || isNaN(val)) && (val2 >= min2 && val2 <= max2 || isNaN(val2))) {\n              newIndices[offset++] = idx;\n            }\n\n            idx++;\n          }\n\n          quickFinished = true;\n        }\n      }\n\n      if (!quickFinished) {\n        if (dimSize === 1) {\n          for (var i = 0; i < originalCount; i++) {\n            var rawIndex = newStore.getRawIndex(i);\n            var val = storeArr[dims[0]][rawIndex]; // Do not filter NaN, see comment above.\n\n            if (val >= min && val <= max || isNaN(val)) {\n              newIndices[offset++] = rawIndex;\n            }\n          }\n        } else {\n          for (var i = 0; i < originalCount; i++) {\n            var keep = true;\n            var rawIndex = newStore.getRawIndex(i);\n\n            for (var k = 0; k < dimSize; k++) {\n              var dimk = dims[k];\n              var val = storeArr[dimk][rawIndex]; // Do not filter NaN, see comment above.\n\n              if (val < range[dimk][0] || val > range[dimk][1]) {\n                keep = false;\n              }\n            }\n\n            if (keep) {\n              newIndices[offset++] = newStore.getRawIndex(i);\n            }\n          }\n        }\n      } // Set indices after filtered.\n\n\n      if (offset < originalCount) {\n        newStore._indices = newIndices;\n      }\n\n      newStore._count = offset; // Reset data extent\n\n      newStore._extent = [];\n\n      newStore._updateGetRawIdx();\n\n      return newStore;\n    }; // /**\n    //  * Data mapping to a plain array\n    //  */\n    // mapArray(dims: DimensionIndex[], cb: MapArrayCb): any[] {\n    //     const result: any[] = [];\n    //     this.each(dims, function () {\n    //         result.push(cb && (cb as MapArrayCb).apply(null, arguments));\n    //     });\n    //     return result;\n    // }\n\n    /**\n     * Data mapping to a new List with given dimensions\n     */\n\n\n    DataStore.prototype.map = function (dims, cb) {\n      // TODO only clone picked chunks.\n      var target = this.clone(dims);\n\n      this._updateDims(target, dims, cb);\n\n      return target;\n    };\n    /**\n     * @caution Danger!! Only used in dataStack.\n     */\n\n\n    DataStore.prototype.modify = function (dims, cb) {\n      this._updateDims(this, dims, cb);\n    };\n\n    DataStore.prototype._updateDims = function (target, dims, cb) {\n      var targetChunks = target._chunks;\n      var tmpRetValue = [];\n      var dimSize = dims.length;\n      var dataCount = target.count();\n      var values = [];\n      var rawExtent = target._rawExtent;\n\n      for (var i = 0; i < dims.length; i++) {\n        rawExtent[dims[i]] = getInitialExtent();\n      }\n\n      for (var dataIndex = 0; dataIndex < dataCount; dataIndex++) {\n        var rawIndex = target.getRawIndex(dataIndex);\n\n        for (var k = 0; k < dimSize; k++) {\n          values[k] = targetChunks[dims[k]][rawIndex];\n        }\n\n        values[dimSize] = dataIndex;\n        var retValue = cb && cb.apply(null, values);\n\n        if (retValue != null) {\n          // a number or string (in oridinal dimension)?\n          if (typeof retValue !== 'object') {\n            tmpRetValue[0] = retValue;\n            retValue = tmpRetValue;\n          }\n\n          for (var i = 0; i < retValue.length; i++) {\n            var dim = dims[i];\n            var val = retValue[i];\n            var rawExtentOnDim = rawExtent[dim];\n            var dimStore = targetChunks[dim];\n\n            if (dimStore) {\n              dimStore[rawIndex] = val;\n            }\n\n            if (val < rawExtentOnDim[0]) {\n              rawExtentOnDim[0] = val;\n            }\n\n            if (val > rawExtentOnDim[1]) {\n              rawExtentOnDim[1] = val;\n            }\n          }\n        }\n      }\n    };\n    /**\n     * Large data down sampling using largest-triangle-three-buckets\n     * @param {string} valueDimension\n     * @param {number} targetCount\n     */\n\n\n    DataStore.prototype.lttbDownSample = function (valueDimension, rate) {\n      var target = this.clone([valueDimension], true);\n      var targetStorage = target._chunks;\n      var dimStore = targetStorage[valueDimension];\n      var len = this.count();\n      var sampledIndex = 0;\n      var frameSize = Math.floor(1 / rate);\n      var currentRawIndex = this.getRawIndex(0);\n      var maxArea;\n      var area;\n      var nextRawIndex;\n      var newIndices = new (getIndicesCtor(this._rawCount))(Math.min((Math.ceil(len / frameSize) + 2) * 2, len)); // First frame use the first data.\n\n      newIndices[sampledIndex++] = currentRawIndex;\n\n      for (var i = 1; i < len - 1; i += frameSize) {\n        var nextFrameStart = Math.min(i + frameSize, len - 1);\n        var nextFrameEnd = Math.min(i + frameSize * 2, len);\n        var avgX = (nextFrameEnd + nextFrameStart) / 2;\n        var avgY = 0;\n\n        for (var idx = nextFrameStart; idx < nextFrameEnd; idx++) {\n          var rawIndex = this.getRawIndex(idx);\n          var y = dimStore[rawIndex];\n\n          if (isNaN(y)) {\n            continue;\n          }\n\n          avgY += y;\n        }\n\n        avgY /= nextFrameEnd - nextFrameStart;\n        var frameStart = i;\n        var frameEnd = Math.min(i + frameSize, len);\n        var pointAX = i - 1;\n        var pointAY = dimStore[currentRawIndex];\n        maxArea = -1;\n        nextRawIndex = frameStart;\n        var firstNaNIndex = -1;\n        var countNaN = 0; // Find a point from current frame that construct a triangel with largest area with previous selected point\n        // And the average of next frame.\n\n        for (var idx = frameStart; idx < frameEnd; idx++) {\n          var rawIndex = this.getRawIndex(idx);\n          var y = dimStore[rawIndex];\n\n          if (isNaN(y)) {\n            countNaN++;\n\n            if (firstNaNIndex < 0) {\n              firstNaNIndex = rawIndex;\n            }\n\n            continue;\n          } // Calculate triangle area over three buckets\n\n\n          area = Math.abs((pointAX - avgX) * (y - pointAY) - (pointAX - idx) * (avgY - pointAY));\n\n          if (area > maxArea) {\n            maxArea = area;\n            nextRawIndex = rawIndex; // Next a is this b\n          }\n        }\n\n        if (countNaN > 0 && countNaN < frameEnd - frameStart) {\n          // Append first NaN point in every bucket.\n          // It is necessary to ensure the correct order of indices.\n          newIndices[sampledIndex++] = Math.min(firstNaNIndex, nextRawIndex);\n          nextRawIndex = Math.max(firstNaNIndex, nextRawIndex);\n        }\n\n        newIndices[sampledIndex++] = nextRawIndex;\n        currentRawIndex = nextRawIndex; // This a is the next a (chosen b)\n      } // First frame use the last data.\n\n\n      newIndices[sampledIndex++] = this.getRawIndex(len - 1);\n      target._count = sampledIndex;\n      target._indices = newIndices;\n      target.getRawIndex = this._getRawIdx;\n      return target;\n    };\n    /**\n     * Large data down sampling on given dimension\n     * @param sampleIndex Sample index for name and id\n     */\n\n\n    DataStore.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n      var target = this.clone([dimension], true);\n      var targetStorage = target._chunks;\n      var frameValues = [];\n      var frameSize = Math.floor(1 / rate);\n      var dimStore = targetStorage[dimension];\n      var len = this.count();\n      var rawExtentOnDim = target._rawExtent[dimension] = getInitialExtent();\n      var newIndices = new (getIndicesCtor(this._rawCount))(Math.ceil(len / frameSize));\n      var offset = 0;\n\n      for (var i = 0; i < len; i += frameSize) {\n        // Last frame\n        if (frameSize > len - i) {\n          frameSize = len - i;\n          frameValues.length = frameSize;\n        }\n\n        for (var k = 0; k < frameSize; k++) {\n          var dataIdx = this.getRawIndex(i + k);\n          frameValues[k] = dimStore[dataIdx];\n        }\n\n        var value = sampleValue(frameValues);\n        var sampleFrameIdx = this.getRawIndex(Math.min(i + sampleIndex(frameValues, value) || 0, len - 1)); // Only write value on the filtered data\n\n        dimStore[sampleFrameIdx] = value;\n\n        if (value < rawExtentOnDim[0]) {\n          rawExtentOnDim[0] = value;\n        }\n\n        if (value > rawExtentOnDim[1]) {\n          rawExtentOnDim[1] = value;\n        }\n\n        newIndices[offset++] = sampleFrameIdx;\n      }\n\n      target._count = offset;\n      target._indices = newIndices;\n\n      target._updateGetRawIdx();\n\n      return target;\n    };\n    /**\n     * Data iteration\n     * @param ctx default this\n     * @example\n     *  list.each('x', function (x, idx) {});\n     *  list.each(['x', 'y'], function (x, y, idx) {});\n     *  list.each(function (idx) {})\n     */\n\n\n    DataStore.prototype.each = function (dims, cb) {\n      if (!this._count) {\n        return;\n      }\n\n      var dimSize = dims.length;\n      var chunks = this._chunks;\n\n      for (var i = 0, len = this.count(); i < len; i++) {\n        var rawIdx = this.getRawIndex(i); // Simple optimization\n\n        switch (dimSize) {\n          case 0:\n            cb(i);\n            break;\n\n          case 1:\n            cb(chunks[dims[0]][rawIdx], i);\n            break;\n\n          case 2:\n            cb(chunks[dims[0]][rawIdx], chunks[dims[1]][rawIdx], i);\n            break;\n\n          default:\n            var k = 0;\n            var value = [];\n\n            for (; k < dimSize; k++) {\n              value[k] = chunks[dims[k]][rawIdx];\n            } // Index\n\n\n            value[k] = i;\n            cb.apply(null, value);\n        }\n      }\n    };\n    /**\n     * Get extent of data in one dimension\n     */\n\n\n    DataStore.prototype.getDataExtent = function (dim) {\n      // Make sure use concrete dim as cache name.\n      var dimData = this._chunks[dim];\n      var initialExtent = getInitialExtent();\n\n      if (!dimData) {\n        return initialExtent;\n      } // Make more strict checkings to ensure hitting cache.\n\n\n      var currEnd = this.count(); // Consider the most cases when using data zoom, `getDataExtent`\n      // happened before filtering. We cache raw extent, which is not\n      // necessary to be cleared and recalculated when restore data.\n\n      var useRaw = !this._indices;\n      var dimExtent;\n\n      if (useRaw) {\n        return this._rawExtent[dim].slice();\n      }\n\n      dimExtent = this._extent[dim];\n\n      if (dimExtent) {\n        return dimExtent.slice();\n      }\n\n      dimExtent = initialExtent;\n      var min = dimExtent[0];\n      var max = dimExtent[1];\n\n      for (var i = 0; i < currEnd; i++) {\n        var rawIdx = this.getRawIndex(i);\n        var value = dimData[rawIdx];\n        value < min && (min = value);\n        value > max && (max = value);\n      }\n\n      dimExtent = [min, max];\n      this._extent[dim] = dimExtent;\n      return dimExtent;\n    };\n    /**\n     * Get raw data item\n     */\n\n\n    DataStore.prototype.getRawDataItem = function (idx) {\n      var rawIdx = this.getRawIndex(idx);\n\n      if (!this._provider.persistent) {\n        var val = [];\n        var chunks = this._chunks;\n\n        for (var i = 0; i < chunks.length; i++) {\n          val.push(chunks[i][rawIdx]);\n        }\n\n        return val;\n      } else {\n        return this._provider.getItem(rawIdx);\n      }\n    };\n    /**\n     * Clone shallow.\n     *\n     * @param clonedDims Determine which dims to clone. Will share the data if not specified.\n     */\n\n\n    DataStore.prototype.clone = function (clonedDims, ignoreIndices) {\n      var target = new DataStore();\n      var chunks = this._chunks;\n      var clonedDimsMap = clonedDims && reduce(clonedDims, function (obj, dimIdx) {\n        obj[dimIdx] = true;\n        return obj;\n      }, {});\n\n      if (clonedDimsMap) {\n        for (var i = 0; i < chunks.length; i++) {\n          // Not clone if dim is not picked.\n          target._chunks[i] = !clonedDimsMap[i] ? chunks[i] : cloneChunk(chunks[i]);\n        }\n      } else {\n        target._chunks = chunks;\n      }\n\n      this._copyCommonProps(target);\n\n      if (!ignoreIndices) {\n        target._indices = this._cloneIndices();\n      }\n\n      target._updateGetRawIdx();\n\n      return target;\n    };\n\n    DataStore.prototype._copyCommonProps = function (target) {\n      target._count = this._count;\n      target._rawCount = this._rawCount;\n      target._provider = this._provider;\n      target._dimensions = this._dimensions;\n      target._extent = clone(this._extent);\n      target._rawExtent = clone(this._rawExtent);\n    };\n\n    DataStore.prototype._cloneIndices = function () {\n      if (this._indices) {\n        var Ctor = this._indices.constructor;\n        var indices = void 0;\n\n        if (Ctor === Array) {\n          var thisCount = this._indices.length;\n          indices = new Ctor(thisCount);\n\n          for (var i = 0; i < thisCount; i++) {\n            indices[i] = this._indices[i];\n          }\n        } else {\n          indices = new Ctor(this._indices);\n        }\n\n        return indices;\n      }\n\n      return null;\n    };\n\n    DataStore.prototype._getRawIdxIdentity = function (idx) {\n      return idx;\n    };\n\n    DataStore.prototype._getRawIdx = function (idx) {\n      if (idx < this._count && idx >= 0) {\n        return this._indices[idx];\n      }\n\n      return -1;\n    };\n\n    DataStore.prototype._updateGetRawIdx = function () {\n      this.getRawIndex = this._indices ? this._getRawIdx : this._getRawIdxIdentity;\n    };\n\n    DataStore.internalField = function () {\n      function getDimValueSimply(dataItem, property, dataIndex, dimIndex) {\n        return parseDataValue(dataItem[dimIndex], this._dimensions[dimIndex]);\n      }\n\n      defaultDimValueGetters = {\n        arrayRows: getDimValueSimply,\n        objectRows: function (dataItem, property, dataIndex, dimIndex) {\n          return parseDataValue(dataItem[property], this._dimensions[dimIndex]);\n        },\n        keyedColumns: getDimValueSimply,\n        original: function (dataItem, property, dataIndex, dimIndex) {\n          // Performance sensitive, do not use modelUtil.getDataItemValue.\n          // If dataItem is an plain object with no value field, the let `value`\n          // will be assigned with the object, but it will be tread correctly\n          // in the `convertValue`.\n          var value = dataItem && (dataItem.value == null ? dataItem : dataItem.value);\n          return parseDataValue(value instanceof Array ? value[dimIndex] // If value is a single number or something else not array.\n          : value, this._dimensions[dimIndex]);\n        },\n        typedArray: function (dataItem, property, dataIndex, dimIndex) {\n          return dataItem[dimIndex];\n        }\n      };\n    }();\n\n    return DataStore;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * [REQUIREMENT_MEMO]:\n   * (0) `metaRawOption` means `dimensions`/`sourceHeader`/`seriesLayoutBy` in raw option.\n   * (1) Keep support the feature: `metaRawOption` can be specified both on `series` and\n   * `root-dataset`. Them on `series` has higher priority.\n   * (2) Do not support to set `metaRawOption` on a `non-root-dataset`, because it might\n   * confuse users: whether those props indicate how to visit the upstream source or visit\n   * the transform result source, and some transforms has nothing to do with these props,\n   * and some transforms might have multiple upstream.\n   * (3) Transforms should specify `metaRawOption` in each output, just like they can be\n   * declared in `root-dataset`.\n   * (4) At present only support visit source in `SERIES_LAYOUT_BY_COLUMN` in transforms.\n   * That is for reducing complexity in transfroms.\n   * PENDING: Whether to provide transposition transform?\n   *\n   * [IMPLEMENTAION_MEMO]:\n   * \"sourceVisitConfig\" are calculated from `metaRawOption` and `data`.\n   * They will not be calculated until `source` is about to be visited (to prevent from\n   * duplicate calcuation). `source` is visited only in series and input to transforms.\n   *\n   * [DIMENSION_INHERIT_RULE]:\n   * By default the dimensions are inherited from ancestors, unless a transform return\n   * a new dimensions definition.\n   * Consider the case:\n   * ```js\n   * dataset: [{\n   *     source: [ ['Product', 'Sales', 'Prise'], ['Cookies', 321, 44.21], ...]\n   * }, {\n   *     transform: { type: 'filter', ... }\n   * }]\n   * dataset: [{\n   *     dimension: ['Product', 'Sales', 'Prise'],\n   *     source: [ ['Cookies', 321, 44.21], ...]\n   * }, {\n   *     transform: { type: 'filter', ... }\n   * }]\n   * ```\n   * The two types of option should have the same behavior after transform.\n   *\n   *\n   * [SCENARIO]:\n   * (1) Provide source data directly:\n   * ```js\n   * series: {\n   *     encode: {...},\n   *     dimensions: [...]\n   *     seriesLayoutBy: 'row',\n   *     data: [[...]]\n   * }\n   * ```\n   * (2) Series refer to dataset.\n   * ```js\n   * series: [{\n   *     encode: {...}\n   *     // Ignore datasetIndex means `datasetIndex: 0`\n   *     // and the dimensions defination in dataset is used\n   * }, {\n   *     encode: {...},\n   *     seriesLayoutBy: 'column',\n   *     datasetIndex: 1\n   * }]\n   * ```\n   * (3) dataset transform\n   * ```js\n   * dataset: [{\n   *     source: [...]\n   * }, {\n   *     source: [...]\n   * }, {\n   *     // By default from 0.\n   *     transform: { type: 'filter', config: {...} }\n   * }, {\n   *     // Piped.\n   *     transform: [\n   *         { type: 'filter', config: {...} },\n   *         { type: 'sort', config: {...} }\n   *     ]\n   * }, {\n   *     id: 'regressionData',\n   *     fromDatasetIndex: 1,\n   *     // Third-party transform\n   *     transform: { type: 'ecStat:regression', config: {...} }\n   * }, {\n   *     // retrieve the extra result.\n   *     id: 'regressionFormula',\n   *     fromDatasetId: 'regressionData',\n   *     fromTransformResult: 1\n   * }]\n   * ```\n   */\n\n\n  var SourceManager =\n  /** @class */\n  function () {\n    function SourceManager(sourceHost) {\n      // Cached source. Do not repeat calculating if not dirty.\n      this._sourceList = [];\n      this._storeList = []; // version sign of each upstream source manager.\n\n      this._upstreamSignList = [];\n      this._versionSignBase = 0;\n      this._dirty = true;\n      this._sourceHost = sourceHost;\n    }\n    /**\n     * Mark dirty.\n     */\n\n\n    SourceManager.prototype.dirty = function () {\n      this._setLocalSource([], []);\n\n      this._storeList = [];\n      this._dirty = true;\n    };\n\n    SourceManager.prototype._setLocalSource = function (sourceList, upstreamSignList) {\n      this._sourceList = sourceList;\n      this._upstreamSignList = upstreamSignList;\n      this._versionSignBase++;\n\n      if (this._versionSignBase > 9e10) {\n        this._versionSignBase = 0;\n      }\n    };\n    /**\n     * For detecting whether the upstream source is dirty, so that\n     * the local cached source (in `_sourceList`) should be discarded.\n     */\n\n\n    SourceManager.prototype._getVersionSign = function () {\n      return this._sourceHost.uid + '_' + this._versionSignBase;\n    };\n    /**\n     * Always return a source instance. Otherwise throw error.\n     */\n\n\n    SourceManager.prototype.prepareSource = function () {\n      // For the case that call `setOption` multiple time but no data changed,\n      // cache the result source to prevent from repeating transform.\n      if (this._isDirty()) {\n        this._createSource();\n\n        this._dirty = false;\n      }\n    };\n\n    SourceManager.prototype._createSource = function () {\n      this._setLocalSource([], []);\n\n      var sourceHost = this._sourceHost;\n\n      var upSourceMgrList = this._getUpstreamSourceManagers();\n\n      var hasUpstream = !!upSourceMgrList.length;\n      var resultSourceList;\n      var upstreamSignList;\n\n      if (isSeries(sourceHost)) {\n        var seriesModel = sourceHost;\n        var data = void 0;\n        var sourceFormat = void 0;\n        var upSource = void 0; // Has upstream dataset\n\n        if (hasUpstream) {\n          var upSourceMgr = upSourceMgrList[0];\n          upSourceMgr.prepareSource();\n          upSource = upSourceMgr.getSource();\n          data = upSource.data;\n          sourceFormat = upSource.sourceFormat;\n          upstreamSignList = [upSourceMgr._getVersionSign()];\n        } // Series data is from own.\n        else {\n            data = seriesModel.get('data', true);\n            sourceFormat = isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL;\n            upstreamSignList = [];\n          } // See [REQUIREMENT_MEMO], merge settings on series and parent dataset if it is root.\n\n\n        var newMetaRawOption = this._getSourceMetaRawOption() || {};\n        var upMetaRawOption = upSource && upSource.metaRawOption || {};\n        var seriesLayoutBy = retrieve2(newMetaRawOption.seriesLayoutBy, upMetaRawOption.seriesLayoutBy) || null;\n        var sourceHeader = retrieve2(newMetaRawOption.sourceHeader, upMetaRawOption.sourceHeader); // Note here we should not use `upSource.dimensionsDefine`. Consider the case:\n        // `upSource.dimensionsDefine` is detected by `seriesLayoutBy: 'column'`,\n        // but series need `seriesLayoutBy: 'row'`.\n\n        var dimensions = retrieve2(newMetaRawOption.dimensions, upMetaRawOption.dimensions); // We share source with dataset as much as possible\n        // to avoid extra memroy cost of high dimensional data.\n\n        var needsCreateSource = seriesLayoutBy !== upMetaRawOption.seriesLayoutBy || !!sourceHeader !== !!upMetaRawOption.sourceHeader || dimensions;\n        resultSourceList = needsCreateSource ? [createSource(data, {\n          seriesLayoutBy: seriesLayoutBy,\n          sourceHeader: sourceHeader,\n          dimensions: dimensions\n        }, sourceFormat)] : [];\n      } else {\n        var datasetModel = sourceHost; // Has upstream dataset.\n\n        if (hasUpstream) {\n          var result = this._applyTransform(upSourceMgrList);\n\n          resultSourceList = result.sourceList;\n          upstreamSignList = result.upstreamSignList;\n        } // Is root dataset.\n        else {\n            var sourceData = datasetModel.get('source', true);\n            resultSourceList = [createSource(sourceData, this._getSourceMetaRawOption(), null)];\n            upstreamSignList = [];\n          }\n      }\n\n      {\n        assert(resultSourceList && upstreamSignList);\n      }\n\n      this._setLocalSource(resultSourceList, upstreamSignList);\n    };\n\n    SourceManager.prototype._applyTransform = function (upMgrList) {\n      var datasetModel = this._sourceHost;\n      var transformOption = datasetModel.get('transform', true);\n      var fromTransformResult = datasetModel.get('fromTransformResult', true);\n      {\n        assert(fromTransformResult != null || transformOption != null);\n      }\n\n      if (fromTransformResult != null) {\n        var errMsg = '';\n\n        if (upMgrList.length !== 1) {\n          {\n            errMsg = 'When using `fromTransformResult`, there should be only one upstream dataset';\n          }\n          doThrow(errMsg);\n        }\n      }\n\n      var sourceList;\n      var upSourceList = [];\n      var upstreamSignList = [];\n      each(upMgrList, function (upMgr) {\n        upMgr.prepareSource();\n        var upSource = upMgr.getSource(fromTransformResult || 0);\n        var errMsg = '';\n\n        if (fromTransformResult != null && !upSource) {\n          {\n            errMsg = 'Can not retrieve result by `fromTransformResult`: ' + fromTransformResult;\n          }\n          doThrow(errMsg);\n        }\n\n        upSourceList.push(upSource);\n        upstreamSignList.push(upMgr._getVersionSign());\n      });\n\n      if (transformOption) {\n        sourceList = applyDataTransform(transformOption, upSourceList, {\n          datasetIndex: datasetModel.componentIndex\n        });\n      } else if (fromTransformResult != null) {\n        sourceList = [cloneSourceShallow(upSourceList[0])];\n      }\n\n      return {\n        sourceList: sourceList,\n        upstreamSignList: upstreamSignList\n      };\n    };\n\n    SourceManager.prototype._isDirty = function () {\n      if (this._dirty) {\n        return true;\n      } // All sourceList is from the some upsteam.\n\n\n      var upSourceMgrList = this._getUpstreamSourceManagers();\n\n      for (var i = 0; i < upSourceMgrList.length; i++) {\n        var upSrcMgr = upSourceMgrList[i];\n\n        if ( // Consider the case that there is ancestor diry, call it recursively.\n        // The performance is probably not an issue because usually the chain is not long.\n        upSrcMgr._isDirty() || this._upstreamSignList[i] !== upSrcMgr._getVersionSign()) {\n          return true;\n        }\n      }\n    };\n    /**\n     * @param sourceIndex By defualt 0, means \"main source\".\n     *                    Most cases there is only one source.\n     */\n\n\n    SourceManager.prototype.getSource = function (sourceIndex) {\n      sourceIndex = sourceIndex || 0;\n      var source = this._sourceList[sourceIndex];\n\n      if (!source) {\n        // Series may share source instance with dataset.\n        var upSourceMgrList = this._getUpstreamSourceManagers();\n\n        return upSourceMgrList[0] && upSourceMgrList[0].getSource(sourceIndex);\n      }\n\n      return source;\n    };\n    /**\n     *\n     * Get a data store which can be shared across series.\n     * Only available for series.\n     *\n     * @param seriesDimRequest Dimensions that are generated in series.\n     *        Should have been sorted by `storeDimIndex` asc.\n     */\n\n\n    SourceManager.prototype.getSharedDataStore = function (seriesDimRequest) {\n      {\n        assert(isSeries(this._sourceHost), 'Can only call getDataStore on series source manager.');\n      }\n      var schema = seriesDimRequest.makeStoreSchema();\n      return this._innerGetDataStore(schema.dimensions, seriesDimRequest.source, schema.hash);\n    };\n\n    SourceManager.prototype._innerGetDataStore = function (storeDims, seriesSource, sourceReadKey) {\n      // TODO Can use other sourceIndex?\n      var sourceIndex = 0;\n      var storeList = this._storeList;\n      var cachedStoreMap = storeList[sourceIndex];\n\n      if (!cachedStoreMap) {\n        cachedStoreMap = storeList[sourceIndex] = {};\n      }\n\n      var cachedStore = cachedStoreMap[sourceReadKey];\n\n      if (!cachedStore) {\n        var upSourceMgr = this._getUpstreamSourceManagers()[0];\n\n        if (isSeries(this._sourceHost) && upSourceMgr) {\n          cachedStore = upSourceMgr._innerGetDataStore(storeDims, seriesSource, sourceReadKey);\n        } else {\n          cachedStore = new DataStore(); // Always create store from source of series.\n\n          cachedStore.initData(new DefaultDataProvider(seriesSource, storeDims.length), storeDims);\n        }\n\n        cachedStoreMap[sourceReadKey] = cachedStore;\n      }\n\n      return cachedStore;\n    };\n    /**\n     * PEDING: Is it fast enough?\n     * If no upstream, return empty array.\n     */\n\n\n    SourceManager.prototype._getUpstreamSourceManagers = function () {\n      // Always get the relationship from the raw option.\n      // Do not cache the link of the dependency graph, so that\n      // no need to update them when change happen.\n      var sourceHost = this._sourceHost;\n\n      if (isSeries(sourceHost)) {\n        var datasetModel = querySeriesUpstreamDatasetModel(sourceHost);\n        return !datasetModel ? [] : [datasetModel.getSourceManager()];\n      } else {\n        return map(queryDatasetUpstreamDatasetModels(sourceHost), function (datasetModel) {\n          return datasetModel.getSourceManager();\n        });\n      }\n    };\n\n    SourceManager.prototype._getSourceMetaRawOption = function () {\n      var sourceHost = this._sourceHost;\n      var seriesLayoutBy;\n      var sourceHeader;\n      var dimensions;\n\n      if (isSeries(sourceHost)) {\n        seriesLayoutBy = sourceHost.get('seriesLayoutBy', true);\n        sourceHeader = sourceHost.get('sourceHeader', true);\n        dimensions = sourceHost.get('dimensions', true);\n      } // See [REQUIREMENT_MEMO], `non-root-dataset` do not support them.\n      else if (!this._getUpstreamSourceManagers().length) {\n          var model = sourceHost;\n          seriesLayoutBy = model.get('seriesLayoutBy', true);\n          sourceHeader = model.get('sourceHeader', true);\n          dimensions = model.get('dimensions', true);\n        }\n\n      return {\n        seriesLayoutBy: seriesLayoutBy,\n        sourceHeader: sourceHeader,\n        dimensions: dimensions\n      };\n    };\n\n    return SourceManager;\n  }(); // disable the transform merge, but do not disable transfrom clone from rawOption.\n\n\n  function disableTransformOptionMerge(datasetModel) {\n    var transformOption = datasetModel.option.transform;\n    transformOption && setAsPrimitive(datasetModel.option.transform);\n  }\n\n  function isSeries(sourceHost) {\n    // Avoid circular dependency with Series.ts\n    return sourceHost.mainType === 'series';\n  }\n\n  function doThrow(errMsg) {\n    throw new Error(errMsg);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var TOOLTIP_LINE_HEIGHT_CSS = 'line-height:1'; // TODO: more textStyle option\n\n  function getTooltipTextStyle(textStyle, renderMode) {\n    var nameFontColor = textStyle.color || '#6e7079';\n    var nameFontSize = textStyle.fontSize || 12;\n    var nameFontWeight = textStyle.fontWeight || '400';\n    var valueFontColor = textStyle.color || '#464646';\n    var valueFontSize = textStyle.fontSize || 14;\n    var valueFontWeight = textStyle.fontWeight || '900';\n\n    if (renderMode === 'html') {\n      // `textStyle` is probably from user input, should be encoded to reduce security risk.\n      return {\n        // eslint-disable-next-line max-len\n        nameStyle: \"font-size:\" + encodeHTML(nameFontSize + '') + \"px;color:\" + encodeHTML(nameFontColor) + \";font-weight:\" + encodeHTML(nameFontWeight + ''),\n        // eslint-disable-next-line max-len\n        valueStyle: \"font-size:\" + encodeHTML(valueFontSize + '') + \"px;color:\" + encodeHTML(valueFontColor) + \";font-weight:\" + encodeHTML(valueFontWeight + '')\n      };\n    } else {\n      return {\n        nameStyle: {\n          fontSize: nameFontSize,\n          fill: nameFontColor,\n          fontWeight: nameFontWeight\n        },\n        valueStyle: {\n          fontSize: valueFontSize,\n          fill: valueFontColor,\n          fontWeight: valueFontWeight\n        }\n      };\n    }\n  } // See `TooltipMarkupLayoutIntent['innerGapLevel']`.\n  // (value from UI design)\n\n\n  var HTML_GAPS = [0, 10, 20, 30];\n  var RICH_TEXT_GAPS = ['', '\\n', '\\n\\n', '\\n\\n\\n']; // eslint-disable-next-line max-len\n\n  function createTooltipMarkup(type, option) {\n    option.type = type;\n    return option;\n  }\n\n  function isSectionFragment(frag) {\n    return frag.type === 'section';\n  }\n\n  function getBuilder(frag) {\n    return isSectionFragment(frag) ? buildSection : buildNameValue;\n  }\n\n  function getBlockGapLevel(frag) {\n    if (isSectionFragment(frag)) {\n      var gapLevel_1 = 0;\n      var subBlockLen = frag.blocks.length;\n      var hasInnerGap_1 = subBlockLen > 1 || subBlockLen > 0 && !frag.noHeader;\n      each(frag.blocks, function (subBlock) {\n        var subGapLevel = getBlockGapLevel(subBlock); // If the some of the sub-blocks have some gaps (like 10px) inside, this block\n        // should use a larger gap (like 20px) to distinguish those sub-blocks.\n\n        if (subGapLevel >= gapLevel_1) {\n          gapLevel_1 = subGapLevel + +(hasInnerGap_1 && ( // 0 always can not be readable gap level.\n          !subGapLevel // If no header, always keep the sub gap level. Otherwise\n          // look weird in case `multipleSeries`.\n          || isSectionFragment(subBlock) && !subBlock.noHeader));\n        }\n      });\n      return gapLevel_1;\n    }\n\n    return 0;\n  }\n\n  function buildSection(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n    var noHeader = fragment.noHeader;\n    var gaps = getGap(getBlockGapLevel(fragment));\n    var subMarkupTextList = [];\n    var subBlocks = fragment.blocks || [];\n    assert(!subBlocks || isArray(subBlocks));\n    subBlocks = subBlocks || [];\n    var orderMode = ctx.orderMode;\n\n    if (fragment.sortBlocks && orderMode) {\n      subBlocks = subBlocks.slice();\n      var orderMap = {\n        valueAsc: 'asc',\n        valueDesc: 'desc'\n      };\n\n      if (hasOwn(orderMap, orderMode)) {\n        var comparator_1 = new SortOrderComparator(orderMap[orderMode], null);\n        subBlocks.sort(function (a, b) {\n          return comparator_1.evaluate(a.sortParam, b.sortParam);\n        });\n      } // FIXME 'seriesDesc' necessary?\n      else if (orderMode === 'seriesDesc') {\n          subBlocks.reverse();\n        }\n    }\n\n    each(subBlocks, function (subBlock, idx) {\n      var valueFormatter = fragment.valueFormatter;\n      var subMarkupText = getBuilder(subBlock)( // Inherit valueFormatter\n      valueFormatter ? extend(extend({}, ctx), {\n        valueFormatter: valueFormatter\n      }) : ctx, subBlock, idx > 0 ? gaps.html : 0, toolTipTextStyle);\n      subMarkupText != null && subMarkupTextList.push(subMarkupText);\n    });\n    var subMarkupText = ctx.renderMode === 'richText' ? subMarkupTextList.join(gaps.richText) : wrapBlockHTML(subMarkupTextList.join(''), noHeader ? topMarginForOuterGap : gaps.html);\n\n    if (noHeader) {\n      return subMarkupText;\n    }\n\n    var displayableHeader = makeValueReadable(fragment.header, 'ordinal', ctx.useUTC);\n    var nameStyle = getTooltipTextStyle(toolTipTextStyle, ctx.renderMode).nameStyle;\n\n    if (ctx.renderMode === 'richText') {\n      return wrapInlineNameRichText(ctx, displayableHeader, nameStyle) + gaps.richText + subMarkupText;\n    } else {\n      return wrapBlockHTML(\"<div style=\\\"\" + nameStyle + \";\" + TOOLTIP_LINE_HEIGHT_CSS + \";\\\">\" + encodeHTML(displayableHeader) + '</div>' + subMarkupText, topMarginForOuterGap);\n    }\n  }\n\n  function buildNameValue(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n    var renderMode = ctx.renderMode;\n    var noName = fragment.noName;\n    var noValue = fragment.noValue;\n    var noMarker = !fragment.markerType;\n    var name = fragment.name;\n    var useUTC = ctx.useUTC;\n\n    var valueFormatter = fragment.valueFormatter || ctx.valueFormatter || function (value) {\n      value = isArray(value) ? value : [value];\n      return map(value, function (val, idx) {\n        return makeValueReadable(val, isArray(valueTypeOption) ? valueTypeOption[idx] : valueTypeOption, useUTC);\n      });\n    };\n\n    if (noName && noValue) {\n      return;\n    }\n\n    var markerStr = noMarker ? '' : ctx.markupStyleCreator.makeTooltipMarker(fragment.markerType, fragment.markerColor || '#333', renderMode);\n    var readableName = noName ? '' : makeValueReadable(name, 'ordinal', useUTC);\n    var valueTypeOption = fragment.valueType;\n    var readableValueList = noValue ? [] : valueFormatter(fragment.value);\n    var valueAlignRight = !noMarker || !noName; // It little weird if only value next to marker but far from marker.\n\n    var valueCloseToMarker = !noMarker && noName;\n\n    var _a = getTooltipTextStyle(toolTipTextStyle, renderMode),\n        nameStyle = _a.nameStyle,\n        valueStyle = _a.valueStyle;\n\n    return renderMode === 'richText' ? (noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameRichText(ctx, readableName, nameStyle)) // Value has commas inside, so use ' ' as delimiter for multiple values.\n    + (noValue ? '' : wrapInlineValueRichText(ctx, readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)) : wrapBlockHTML((noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameHTML(readableName, !noMarker, nameStyle)) + (noValue ? '' : wrapInlineValueHTML(readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)), topMarginForOuterGap);\n  }\n  /**\n   * @return markupText. null/undefined means no content.\n   */\n\n\n  function buildTooltipMarkup(fragment, markupStyleCreator, renderMode, orderMode, useUTC, toolTipTextStyle) {\n    if (!fragment) {\n      return;\n    }\n\n    var builder = getBuilder(fragment);\n    var ctx = {\n      useUTC: useUTC,\n      renderMode: renderMode,\n      orderMode: orderMode,\n      markupStyleCreator: markupStyleCreator,\n      valueFormatter: fragment.valueFormatter\n    };\n    return builder(ctx, fragment, 0, toolTipTextStyle);\n  }\n\n  function getGap(gapLevel) {\n    return {\n      html: HTML_GAPS[gapLevel],\n      richText: RICH_TEXT_GAPS[gapLevel]\n    };\n  }\n\n  function wrapBlockHTML(encodedContent, topGap) {\n    var clearfix = '<div style=\"clear:both\"></div>';\n    var marginCSS = \"margin: \" + topGap + \"px 0 0\";\n    return \"<div style=\\\"\" + marginCSS + \";\" + TOOLTIP_LINE_HEIGHT_CSS + \";\\\">\" + encodedContent + clearfix + '</div>';\n  }\n\n  function wrapInlineNameHTML(name, leftHasMarker, style) {\n    var marginCss = leftHasMarker ? 'margin-left:2px' : '';\n    return \"<span style=\\\"\" + style + \";\" + marginCss + \"\\\">\" + encodeHTML(name) + '</span>';\n  }\n\n  function wrapInlineValueHTML(valueList, alignRight, valueCloseToMarker, style) {\n    // Do not too close to marker, considering there are multiple values separated by spaces.\n    var paddingStr = valueCloseToMarker ? '10px' : '20px';\n    var alignCSS = alignRight ? \"float:right;margin-left:\" + paddingStr : '';\n    valueList = isArray(valueList) ? valueList : [valueList];\n    return \"<span style=\\\"\" + alignCSS + \";\" + style + \"\\\">\" // Value has commas inside, so use '  ' as delimiter for multiple values.\n    + map(valueList, function (value) {\n      return encodeHTML(value);\n    }).join('&nbsp;&nbsp;') + '</span>';\n  }\n\n  function wrapInlineNameRichText(ctx, name, style) {\n    return ctx.markupStyleCreator.wrapRichTextStyle(name, style);\n  }\n\n  function wrapInlineValueRichText(ctx, values, alignRight, valueCloseToMarker, style) {\n    var styles = [style];\n    var paddingLeft = valueCloseToMarker ? 10 : 20;\n    alignRight && styles.push({\n      padding: [0, 0, 0, paddingLeft],\n      align: 'right'\n    }); // Value has commas inside, so use '  ' as delimiter for multiple values.\n\n    return ctx.markupStyleCreator.wrapRichTextStyle(isArray(values) ? values.join('  ') : values, styles);\n  }\n\n  function retrieveVisualColorForTooltipMarker(series, dataIndex) {\n    var style = series.getData().getItemVisual(dataIndex, 'style');\n    var color = style[series.visualDrawType];\n    return convertToColorString(color);\n  }\n\n  function getPaddingFromTooltipModel(model, renderMode) {\n    var padding = model.get('padding');\n    return padding != null ? padding // We give slightly different to look pretty.\n    : renderMode === 'richText' ? [8, 10] : 10;\n  }\n  /**\n   * The major feature is generate styles for `renderMode: 'richText'`.\n   * But it also serves `renderMode: 'html'` to provide\n   * \"renderMode-independent\" API.\n   */\n\n\n  var TooltipMarkupStyleCreator =\n  /** @class */\n  function () {\n    function TooltipMarkupStyleCreator() {\n      this.richTextStyles = {}; // Notice that \"generate a style name\" usuall happens repeatly when mouse moving and\n      // displaying a tooltip. So we put the `_nextStyleNameId` as a member of each creator\n      // rather than static shared by all creators (which will cause it increase to fast).\n\n      this._nextStyleNameId = getRandomIdBase();\n    }\n\n    TooltipMarkupStyleCreator.prototype._generateStyleName = function () {\n      return '__EC_aUTo_' + this._nextStyleNameId++;\n    };\n\n    TooltipMarkupStyleCreator.prototype.makeTooltipMarker = function (markerType, colorStr, renderMode) {\n      var markerId = renderMode === 'richText' ? this._generateStyleName() : null;\n      var marker = getTooltipMarker({\n        color: colorStr,\n        type: markerType,\n        renderMode: renderMode,\n        markerId: markerId\n      });\n\n      if (isString(marker)) {\n        return marker;\n      } else {\n        {\n          assert(markerId);\n        }\n        this.richTextStyles[markerId] = marker.style;\n        return marker.content;\n      }\n    };\n    /**\n     * @usage\n     * ```ts\n     * const styledText = markupStyleCreator.wrapRichTextStyle([\n     *     // The styles will be auto merged.\n     *     {\n     *         fontSize: 12,\n     *         color: 'blue'\n     *     },\n     *     {\n     *         padding: 20\n     *     }\n     * ]);\n     * ```\n     */\n\n\n    TooltipMarkupStyleCreator.prototype.wrapRichTextStyle = function (text, styles) {\n      var finalStl = {};\n\n      if (isArray(styles)) {\n        each(styles, function (stl) {\n          return extend(finalStl, stl);\n        });\n      } else {\n        extend(finalStl, styles);\n      }\n\n      var styleName = this._generateStyleName();\n\n      this.richTextStyles[styleName] = finalStl;\n      return \"{\" + styleName + \"|\" + text + \"}\";\n    };\n\n    return TooltipMarkupStyleCreator;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function defaultSeriesFormatTooltip(opt) {\n    var series = opt.series;\n    var dataIndex = opt.dataIndex;\n    var multipleSeries = opt.multipleSeries;\n    var data = series.getData();\n    var tooltipDims = data.mapDimensionsAll('defaultedTooltip');\n    var tooltipDimLen = tooltipDims.length;\n    var value = series.getRawValue(dataIndex);\n    var isValueArr = isArray(value);\n    var markerColor = retrieveVisualColorForTooltipMarker(series, dataIndex); // Complicated rule for pretty tooltip.\n\n    var inlineValue;\n    var inlineValueType;\n    var subBlocks;\n    var sortParam;\n\n    if (tooltipDimLen > 1 || isValueArr && !tooltipDimLen) {\n      var formatArrResult = formatTooltipArrayValue(value, series, dataIndex, tooltipDims, markerColor);\n      inlineValue = formatArrResult.inlineValues;\n      inlineValueType = formatArrResult.inlineValueTypes;\n      subBlocks = formatArrResult.blocks; // Only support tooltip sort by the first inline value. It's enough in most cases.\n\n      sortParam = formatArrResult.inlineValues[0];\n    } else if (tooltipDimLen) {\n      var dimInfo = data.getDimensionInfo(tooltipDims[0]);\n      sortParam = inlineValue = retrieveRawValue(data, dataIndex, tooltipDims[0]);\n      inlineValueType = dimInfo.type;\n    } else {\n      sortParam = inlineValue = isValueArr ? value[0] : value;\n    } // Do not show generated series name. It might not be readable.\n\n\n    var seriesNameSpecified = isNameSpecified(series);\n    var seriesName = seriesNameSpecified && series.name || '';\n    var itemName = data.getName(dataIndex);\n    var inlineName = multipleSeries ? seriesName : itemName;\n    return createTooltipMarkup('section', {\n      header: seriesName,\n      // When series name not specified, do not show a header line with only '-'.\n      // This case alway happen in tooltip.trigger: 'item'.\n      noHeader: multipleSeries || !seriesNameSpecified,\n      sortParam: sortParam,\n      blocks: [createTooltipMarkup('nameValue', {\n        markerType: 'item',\n        markerColor: markerColor,\n        // Do not mix display seriesName and itemName in one tooltip,\n        // which might confuses users.\n        name: inlineName,\n        // name dimension might be auto assigned, where the name might\n        // be not readable. So we check trim here.\n        noName: !trim(inlineName),\n        value: inlineValue,\n        valueType: inlineValueType\n      })].concat(subBlocks || [])\n    });\n  }\n\n  function formatTooltipArrayValue(value, series, dataIndex, tooltipDims, colorStr) {\n    // check: category-no-encode-has-axis-data in dataset.html\n    var data = series.getData();\n    var isValueMultipleLine = reduce(value, function (isValueMultipleLine, val, idx) {\n      var dimItem = data.getDimensionInfo(idx);\n      return isValueMultipleLine = isValueMultipleLine || dimItem && dimItem.tooltip !== false && dimItem.displayName != null;\n    }, false);\n    var inlineValues = [];\n    var inlineValueTypes = [];\n    var blocks = [];\n    tooltipDims.length ? each(tooltipDims, function (dim) {\n      setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\n    }) // By default, all dims is used on tooltip.\n    : each(value, setEachItem);\n\n    function setEachItem(val, dim) {\n      var dimInfo = data.getDimensionInfo(dim); // If `dimInfo.tooltip` is not set, show tooltip.\n\n      if (!dimInfo || dimInfo.otherDims.tooltip === false) {\n        return;\n      }\n\n      if (isValueMultipleLine) {\n        blocks.push(createTooltipMarkup('nameValue', {\n          markerType: 'subItem',\n          markerColor: colorStr,\n          name: dimInfo.displayName,\n          value: val,\n          valueType: dimInfo.type\n        }));\n      } else {\n        inlineValues.push(val);\n        inlineValueTypes.push(dimInfo.type);\n      }\n    }\n\n    return {\n      inlineValues: inlineValues,\n      inlineValueTypes: inlineValueTypes,\n      blocks: blocks\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var inner$1 = makeInner();\n\n  function getSelectionKey(data, dataIndex) {\n    return data.getName(dataIndex) || data.getId(dataIndex);\n  }\n\n  var SERIES_UNIVERSAL_TRANSITION_PROP = '__universalTransitionEnabled';\n\n  var SeriesModel =\n  /** @class */\n  function (_super) {\n    __extends(SeriesModel, _super);\n\n    function SeriesModel() {\n      // [Caution]: Becuase this class or desecendants can be used as `XXX.extend(subProto)`,\n      // the class members must not be initialized in constructor or declaration place.\n      // Otherwise there is bad case:\n      //   class A {xxx = 1;}\n      //   enableClassExtend(A);\n      //   class B extends A {}\n      //   var C = B.extend({xxx: 5});\n      //   var c = new C();\n      //   console.log(c.xxx); // expect 5 but always 1.\n      var _this = _super !== null && _super.apply(this, arguments) || this; // ---------------------------------------\n      // Props about data selection\n      // ---------------------------------------\n\n\n      _this._selectedDataIndicesMap = {};\n      return _this;\n    }\n\n    SeriesModel.prototype.init = function (option, parentModel, ecModel) {\n      this.seriesIndex = this.componentIndex;\n      this.dataTask = createTask({\n        count: dataTaskCount,\n        reset: dataTaskReset\n      });\n      this.dataTask.context = {\n        model: this\n      };\n      this.mergeDefaultAndTheme(option, ecModel);\n      var sourceManager = inner$1(this).sourceManager = new SourceManager(this);\n      sourceManager.prepareSource();\n      var data = this.getInitialData(option, ecModel);\n      wrapData(data, this);\n      this.dataTask.context.data = data;\n      {\n        assert(data, 'getInitialData returned invalid data.');\n      }\n      inner$1(this).dataBeforeProcessed = data; // If we reverse the order (make data firstly, and then make\n      // dataBeforeProcessed by cloneShallow), cloneShallow will\n      // cause data.graph.data !== data when using\n      // module:echarts/data/Graph or module:echarts/data/Tree.\n      // See module:echarts/data/helper/linkSeriesData\n      // Theoretically, it is unreasonable to call `seriesModel.getData()` in the model\n      // init or merge stage, because the data can be restored. So we do not `restoreData`\n      // and `setData` here, which forbids calling `seriesModel.getData()` in this stage.\n      // Call `seriesModel.getRawData()` instead.\n      // this.restoreData();\n\n      autoSeriesName(this);\n\n      this._initSelectedMapFromData(data);\n    };\n    /**\n     * Util for merge default and theme to option\n     */\n\n\n    SeriesModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n      var layoutMode = fetchLayoutMode(this);\n      var inputPositionParams = layoutMode ? getLayoutParams(option) : {}; // Backward compat: using subType on theme.\n      // But if name duplicate between series subType\n      // (for example: parallel) add component mainType,\n      // add suffix 'Series'.\n\n      var themeSubType = this.subType;\n\n      if (ComponentModel.hasClass(themeSubType)) {\n        themeSubType += 'Series';\n      }\n\n      merge(option, ecModel.getTheme().get(this.subType));\n      merge(option, this.getDefaultOption()); // Default label emphasis `show`\n\n      defaultEmphasis(option, 'label', ['show']);\n      this.fillDataTextStyle(option.data);\n\n      if (layoutMode) {\n        mergeLayoutParam(option, inputPositionParams, layoutMode);\n      }\n    };\n\n    SeriesModel.prototype.mergeOption = function (newSeriesOption, ecModel) {\n      // this.settingTask.dirty();\n      newSeriesOption = merge(this.option, newSeriesOption, true);\n      this.fillDataTextStyle(newSeriesOption.data);\n      var layoutMode = fetchLayoutMode(this);\n\n      if (layoutMode) {\n        mergeLayoutParam(this.option, newSeriesOption, layoutMode);\n      }\n\n      var sourceManager = inner$1(this).sourceManager;\n      sourceManager.dirty();\n      sourceManager.prepareSource();\n      var data = this.getInitialData(newSeriesOption, ecModel);\n      wrapData(data, this);\n      this.dataTask.dirty();\n      this.dataTask.context.data = data;\n      inner$1(this).dataBeforeProcessed = data;\n      autoSeriesName(this);\n\n      this._initSelectedMapFromData(data);\n    };\n\n    SeriesModel.prototype.fillDataTextStyle = function (data) {\n      // Default data label emphasis `show`\n      // FIXME Tree structure data ?\n      // FIXME Performance ?\n      if (data && !isTypedArray(data)) {\n        var props = ['show'];\n\n        for (var i = 0; i < data.length; i++) {\n          if (data[i] && data[i].label) {\n            defaultEmphasis(data[i], 'label', props);\n          }\n        }\n      }\n    };\n    /**\n     * Init a data structure from data related option in series\n     * Must be overriden.\n     */\n\n\n    SeriesModel.prototype.getInitialData = function (option, ecModel) {\n      return;\n    };\n    /**\n     * Append data to list\n     */\n\n\n    SeriesModel.prototype.appendData = function (params) {\n      // FIXME ???\n      // (1) If data from dataset, forbidden append.\n      // (2) support append data of dataset.\n      var data = this.getRawData();\n      data.appendData(params.data);\n    };\n    /**\n     * Consider some method like `filter`, `map` need make new data,\n     * We should make sure that `seriesModel.getData()` get correct\n     * data in the stream procedure. So we fetch data from upstream\n     * each time `task.perform` called.\n     */\n\n\n    SeriesModel.prototype.getData = function (dataType) {\n      var task = getCurrentTask(this);\n\n      if (task) {\n        var data = task.context.data;\n        return dataType == null ? data : data.getLinkedData(dataType);\n      } else {\n        // When series is not alive (that may happen when click toolbox\n        // restore or setOption with not merge mode), series data may\n        // be still need to judge animation or something when graphic\n        // elements want to know whether fade out.\n        return inner$1(this).data;\n      }\n    };\n\n    SeriesModel.prototype.getAllData = function () {\n      var mainData = this.getData();\n      return mainData && mainData.getLinkedDataAll ? mainData.getLinkedDataAll() : [{\n        data: mainData\n      }];\n    };\n\n    SeriesModel.prototype.setData = function (data) {\n      var task = getCurrentTask(this);\n\n      if (task) {\n        var context = task.context; // Consider case: filter, data sample.\n        // FIXME:TS never used, so comment it\n        // if (context.data !== data && task.modifyOutputEnd) {\n        //     task.setOutputEnd(data.count());\n        // }\n\n        context.outputData = data; // Caution: setData should update context.data,\n        // Because getData may be called multiply in a\n        // single stage and expect to get the data just\n        // set. (For example, AxisProxy, x y both call\n        // getData and setDate sequentially).\n        // So the context.data should be fetched from\n        // upstream each time when a stage starts to be\n        // performed.\n\n        if (task !== this.dataTask) {\n          context.data = data;\n        }\n      }\n\n      inner$1(this).data = data;\n    };\n\n    SeriesModel.prototype.getEncode = function () {\n      var encode = this.get('encode', true);\n\n      if (encode) {\n        return createHashMap(encode);\n      }\n    };\n\n    SeriesModel.prototype.getSourceManager = function () {\n      return inner$1(this).sourceManager;\n    };\n\n    SeriesModel.prototype.getSource = function () {\n      return this.getSourceManager().getSource();\n    };\n    /**\n     * Get data before processed\n     */\n\n\n    SeriesModel.prototype.getRawData = function () {\n      return inner$1(this).dataBeforeProcessed;\n    };\n\n    SeriesModel.prototype.getColorBy = function () {\n      var colorBy = this.get('colorBy');\n      return colorBy || 'series';\n    };\n\n    SeriesModel.prototype.isColorBySeries = function () {\n      return this.getColorBy() === 'series';\n    };\n    /**\n     * Get base axis if has coordinate system and has axis.\n     * By default use coordSys.getBaseAxis();\n     * Can be overrided for some chart.\n     * @return {type} description\n     */\n\n\n    SeriesModel.prototype.getBaseAxis = function () {\n      var coordSys = this.coordinateSystem; // @ts-ignore\n\n      return coordSys && coordSys.getBaseAxis && coordSys.getBaseAxis();\n    };\n    /**\n     * Default tooltip formatter\n     *\n     * @param dataIndex\n     * @param multipleSeries\n     * @param dataType\n     * @param renderMode valid values: 'html'(by default) and 'richText'.\n     *        'html' is used for rendering tooltip in extra DOM form, and the result\n     *        string is used as DOM HTML content.\n     *        'richText' is used for rendering tooltip in rich text form, for those where\n     *        DOM operation is not supported.\n     * @return formatted tooltip with `html` and `markers`\n     *        Notice: The override method can also return string\n     */\n\n\n    SeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n      return defaultSeriesFormatTooltip({\n        series: this,\n        dataIndex: dataIndex,\n        multipleSeries: multipleSeries\n      });\n    };\n\n    SeriesModel.prototype.isAnimationEnabled = function () {\n      var ecModel = this.ecModel; // Disable animation if using echarts in node but not give ssr flag.\n      // In ssr mode, renderToString will generate svg with css animation.\n\n      if (env.node && !(ecModel && ecModel.ssr)) {\n        return false;\n      }\n\n      var animationEnabled = this.getShallow('animation');\n\n      if (animationEnabled) {\n        if (this.getData().count() > this.getShallow('animationThreshold')) {\n          animationEnabled = false;\n        }\n      }\n\n      return !!animationEnabled;\n    };\n\n    SeriesModel.prototype.restoreData = function () {\n      this.dataTask.dirty();\n    };\n\n    SeriesModel.prototype.getColorFromPalette = function (name, scope, requestColorNum) {\n      var ecModel = this.ecModel; // PENDING\n\n      var color = PaletteMixin.prototype.getColorFromPalette.call(this, name, scope, requestColorNum);\n\n      if (!color) {\n        color = ecModel.getColorFromPalette(name, scope, requestColorNum);\n      }\n\n      return color;\n    };\n    /**\n     * Use `data.mapDimensionsAll(coordDim)` instead.\n     * @deprecated\n     */\n\n\n    SeriesModel.prototype.coordDimToDataDim = function (coordDim) {\n      return this.getRawData().mapDimensionsAll(coordDim);\n    };\n    /**\n     * Get progressive rendering count each step\n     */\n\n\n    SeriesModel.prototype.getProgressive = function () {\n      return this.get('progressive');\n    };\n    /**\n     * Get progressive rendering count each step\n     */\n\n\n    SeriesModel.prototype.getProgressiveThreshold = function () {\n      return this.get('progressiveThreshold');\n    }; // PENGING If selectedMode is null ?\n\n\n    SeriesModel.prototype.select = function (innerDataIndices, dataType) {\n      this._innerSelect(this.getData(dataType), innerDataIndices);\n    };\n\n    SeriesModel.prototype.unselect = function (innerDataIndices, dataType) {\n      var selectedMap = this.option.selectedMap;\n\n      if (!selectedMap) {\n        return;\n      }\n\n      var selectedMode = this.option.selectedMode;\n      var data = this.getData(dataType);\n\n      if (selectedMode === 'series' || selectedMap === 'all') {\n        this.option.selectedMap = {};\n        this._selectedDataIndicesMap = {};\n        return;\n      }\n\n      for (var i = 0; i < innerDataIndices.length; i++) {\n        var dataIndex = innerDataIndices[i];\n        var nameOrId = getSelectionKey(data, dataIndex);\n        selectedMap[nameOrId] = false;\n        this._selectedDataIndicesMap[nameOrId] = -1;\n      }\n    };\n\n    SeriesModel.prototype.toggleSelect = function (innerDataIndices, dataType) {\n      var tmpArr = [];\n\n      for (var i = 0; i < innerDataIndices.length; i++) {\n        tmpArr[0] = innerDataIndices[i];\n        this.isSelected(innerDataIndices[i], dataType) ? this.unselect(tmpArr, dataType) : this.select(tmpArr, dataType);\n      }\n    };\n\n    SeriesModel.prototype.getSelectedDataIndices = function () {\n      if (this.option.selectedMap === 'all') {\n        return [].slice.call(this.getData().getIndices());\n      }\n\n      var selectedDataIndicesMap = this._selectedDataIndicesMap;\n      var nameOrIds = keys(selectedDataIndicesMap);\n      var dataIndices = [];\n\n      for (var i = 0; i < nameOrIds.length; i++) {\n        var dataIndex = selectedDataIndicesMap[nameOrIds[i]];\n\n        if (dataIndex >= 0) {\n          dataIndices.push(dataIndex);\n        }\n      }\n\n      return dataIndices;\n    };\n\n    SeriesModel.prototype.isSelected = function (dataIndex, dataType) {\n      var selectedMap = this.option.selectedMap;\n\n      if (!selectedMap) {\n        return false;\n      }\n\n      var data = this.getData(dataType);\n      return (selectedMap === 'all' || selectedMap[getSelectionKey(data, dataIndex)]) && !data.getItemModel(dataIndex).get(['select', 'disabled']);\n    };\n\n    SeriesModel.prototype.isUniversalTransitionEnabled = function () {\n      if (this[SERIES_UNIVERSAL_TRANSITION_PROP]) {\n        return true;\n      }\n\n      var universalTransitionOpt = this.option.universalTransition; // Quick reject\n\n      if (!universalTransitionOpt) {\n        return false;\n      }\n\n      if (universalTransitionOpt === true) {\n        return true;\n      } // Can be simply 'universalTransition: true'\n\n\n      return universalTransitionOpt && universalTransitionOpt.enabled;\n    };\n\n    SeriesModel.prototype._innerSelect = function (data, innerDataIndices) {\n      var _a, _b;\n\n      var option = this.option;\n      var selectedMode = option.selectedMode;\n      var len = innerDataIndices.length;\n\n      if (!selectedMode || !len) {\n        return;\n      }\n\n      if (selectedMode === 'series') {\n        option.selectedMap = 'all';\n      } else if (selectedMode === 'multiple') {\n        if (!isObject(option.selectedMap)) {\n          option.selectedMap = {};\n        }\n\n        var selectedMap = option.selectedMap;\n\n        for (var i = 0; i < len; i++) {\n          var dataIndex = innerDataIndices[i]; // TODO diffrent types of data share same object.\n\n          var nameOrId = getSelectionKey(data, dataIndex);\n          selectedMap[nameOrId] = true;\n          this._selectedDataIndicesMap[nameOrId] = data.getRawIndex(dataIndex);\n        }\n      } else if (selectedMode === 'single' || selectedMode === true) {\n        var lastDataIndex = innerDataIndices[len - 1];\n        var nameOrId = getSelectionKey(data, lastDataIndex);\n        option.selectedMap = (_a = {}, _a[nameOrId] = true, _a);\n        this._selectedDataIndicesMap = (_b = {}, _b[nameOrId] = data.getRawIndex(lastDataIndex), _b);\n      }\n    };\n\n    SeriesModel.prototype._initSelectedMapFromData = function (data) {\n      // Ignore select info in data if selectedMap exists.\n      // NOTE It's only for legacy usage. edge data is not supported.\n      if (this.option.selectedMap) {\n        return;\n      }\n\n      var dataIndices = [];\n\n      if (data.hasItemOption) {\n        data.each(function (idx) {\n          var rawItem = data.getRawDataItem(idx);\n\n          if (rawItem && rawItem.selected) {\n            dataIndices.push(idx);\n          }\n        });\n      }\n\n      if (dataIndices.length > 0) {\n        this._innerSelect(data, dataIndices);\n      }\n    }; // /**\n    //  * @see {module:echarts/stream/Scheduler}\n    //  */\n    // abstract pipeTask: null\n\n\n    SeriesModel.registerClass = function (clz) {\n      return ComponentModel.registerClass(clz);\n    };\n\n    SeriesModel.protoInitialize = function () {\n      var proto = SeriesModel.prototype;\n      proto.type = 'series.__base__';\n      proto.seriesIndex = 0;\n      proto.ignoreStyleOnData = false;\n      proto.hasSymbolVisual = false;\n      proto.defaultSymbol = 'circle'; // Make sure the values can be accessed!\n\n      proto.visualStyleAccessPath = 'itemStyle';\n      proto.visualDrawType = 'fill';\n    }();\n\n    return SeriesModel;\n  }(ComponentModel);\n\n  mixin(SeriesModel, DataFormatMixin);\n  mixin(SeriesModel, PaletteMixin);\n  mountExtend(SeriesModel, ComponentModel);\n  /**\n   * MUST be called after `prepareSource` called\n   * Here we need to make auto series, especially for auto legend. But we\n   * do not modify series.name in option to avoid side effects.\n   */\n\n  function autoSeriesName(seriesModel) {\n    // User specified name has higher priority, otherwise it may cause\n    // series can not be queried unexpectedly.\n    var name = seriesModel.name;\n\n    if (!isNameSpecified(seriesModel)) {\n      seriesModel.name = getSeriesAutoName(seriesModel) || name;\n    }\n  }\n\n  function getSeriesAutoName(seriesModel) {\n    var data = seriesModel.getRawData();\n    var dataDims = data.mapDimensionsAll('seriesName');\n    var nameArr = [];\n    each(dataDims, function (dataDim) {\n      var dimInfo = data.getDimensionInfo(dataDim);\n      dimInfo.displayName && nameArr.push(dimInfo.displayName);\n    });\n    return nameArr.join(' ');\n  }\n\n  function dataTaskCount(context) {\n    return context.model.getRawData().count();\n  }\n\n  function dataTaskReset(context) {\n    var seriesModel = context.model;\n    seriesModel.setData(seriesModel.getRawData().cloneShallow());\n    return dataTaskProgress;\n  }\n\n  function dataTaskProgress(param, context) {\n    // Avoid repead cloneShallow when data just created in reset.\n    if (context.outputData && param.end > context.outputData.count()) {\n      context.model.getRawData().cloneShallow(context.outputData);\n    }\n  } // TODO refactor\n\n\n  function wrapData(data, seriesModel) {\n    each(concatArray(data.CHANGABLE_METHODS, data.DOWNSAMPLE_METHODS), function (methodName) {\n      data.wrapMethod(methodName, curry(onDataChange, seriesModel));\n    });\n  }\n\n  function onDataChange(seriesModel, newList) {\n    var task = getCurrentTask(seriesModel);\n\n    if (task) {\n      // Consider case: filter, selectRange\n      task.setOutputEnd((newList || this).count());\n    }\n\n    return newList;\n  }\n\n  function getCurrentTask(seriesModel) {\n    var scheduler = (seriesModel.ecModel || {}).scheduler;\n    var pipeline = scheduler && scheduler.getPipeline(seriesModel.uid);\n\n    if (pipeline) {\n      // When pipline finished, the currrentTask keep the last\n      // task (renderTask).\n      var task = pipeline.currentTask;\n\n      if (task) {\n        var agentStubMap = task.agentStubMap;\n\n        if (agentStubMap) {\n          task = agentStubMap.get(seriesModel.uid);\n        }\n      }\n\n      return task;\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var ComponentView =\n  /** @class */\n  function () {\n    function ComponentView() {\n      this.group = new Group();\n      this.uid = getUID('viewComponent');\n    }\n\n    ComponentView.prototype.init = function (ecModel, api) {};\n\n    ComponentView.prototype.render = function (model, ecModel, api, payload) {};\n\n    ComponentView.prototype.dispose = function (ecModel, api) {};\n\n    ComponentView.prototype.updateView = function (model, ecModel, api, payload) {// Do nothing;\n    };\n\n    ComponentView.prototype.updateLayout = function (model, ecModel, api, payload) {// Do nothing;\n    };\n\n    ComponentView.prototype.updateVisual = function (model, ecModel, api, payload) {// Do nothing;\n    };\n    /**\n     * Hook for toggle blur target series.\n     * Can be used in marker for blur or leave blur the markers\n     */\n\n\n    ComponentView.prototype.toggleBlurSeries = function (seriesModels, isBlur, ecModel) {// Do nothing;\n    };\n    /**\n     * Traverse the new rendered elements.\n     *\n     * It will traverse the new added element in progressive rendering.\n     * And traverse all in normal rendering.\n     */\n\n\n    ComponentView.prototype.eachRendered = function (cb) {\n      var group = this.group;\n\n      if (group) {\n        group.traverse(cb);\n      }\n    };\n\n    return ComponentView;\n  }();\n\n  enableClassExtend(ComponentView);\n  enableClassManagement(ComponentView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * @return {string} If large mode changed, return string 'reset';\n   */\n\n  function createRenderPlanner() {\n    var inner = makeInner();\n    return function (seriesModel) {\n      var fields = inner(seriesModel);\n      var pipelineContext = seriesModel.pipelineContext;\n      var originalLarge = !!fields.large;\n      var originalProgressive = !!fields.progressiveRender; // FIXME: if the planner works on a filtered series, `pipelineContext` does not\n      // exists. See #11611 . Probably we need to modify this structure, see the comment\n      // on `performRawSeries` in `Schedular.js`.\n\n      var large = fields.large = !!(pipelineContext && pipelineContext.large);\n      var progressive = fields.progressiveRender = !!(pipelineContext && pipelineContext.progressiveRender);\n      return !!(originalLarge !== large || originalProgressive !== progressive) && 'reset';\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var inner$2 = makeInner();\n  var renderPlanner = createRenderPlanner();\n\n  var ChartView =\n  /** @class */\n  function () {\n    function ChartView() {\n      this.group = new Group();\n      this.uid = getUID('viewChart');\n      this.renderTask = createTask({\n        plan: renderTaskPlan,\n        reset: renderTaskReset\n      });\n      this.renderTask.context = {\n        view: this\n      };\n    }\n\n    ChartView.prototype.init = function (ecModel, api) {};\n\n    ChartView.prototype.render = function (seriesModel, ecModel, api, payload) {\n      {\n        throw new Error('render method must been implemented');\n      }\n    };\n    /**\n     * Highlight series or specified data item.\n     */\n\n\n    ChartView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n      var data = seriesModel.getData(payload && payload.dataType);\n\n      if (!data) {\n        {\n          error(\"Unknown dataType \" + payload.dataType);\n        }\n        return;\n      }\n\n      toggleHighlight(data, payload, 'emphasis');\n    };\n    /**\n     * Downplay series or specified data item.\n     */\n\n\n    ChartView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n      var data = seriesModel.getData(payload && payload.dataType);\n\n      if (!data) {\n        {\n          error(\"Unknown dataType \" + payload.dataType);\n        }\n        return;\n      }\n\n      toggleHighlight(data, payload, 'normal');\n    };\n    /**\n     * Remove self.\n     */\n\n\n    ChartView.prototype.remove = function (ecModel, api) {\n      this.group.removeAll();\n    };\n    /**\n     * Dispose self.\n     */\n\n\n    ChartView.prototype.dispose = function (ecModel, api) {};\n\n    ChartView.prototype.updateView = function (seriesModel, ecModel, api, payload) {\n      this.render(seriesModel, ecModel, api, payload);\n    }; // FIXME never used?\n\n\n    ChartView.prototype.updateLayout = function (seriesModel, ecModel, api, payload) {\n      this.render(seriesModel, ecModel, api, payload);\n    }; // FIXME never used?\n\n\n    ChartView.prototype.updateVisual = function (seriesModel, ecModel, api, payload) {\n      this.render(seriesModel, ecModel, api, payload);\n    };\n    /**\n     * Traverse the new rendered elements.\n     *\n     * It will traverse the new added element in progressive rendering.\n     * And traverse all in normal rendering.\n     */\n\n\n    ChartView.prototype.eachRendered = function (cb) {\n      traverseElements(this.group, cb);\n    };\n\n    ChartView.markUpdateMethod = function (payload, methodName) {\n      inner$2(payload).updateMethod = methodName;\n    };\n\n    ChartView.protoInitialize = function () {\n      var proto = ChartView.prototype;\n      proto.type = 'chart';\n    }();\n\n    return ChartView;\n  }();\n  /**\n   * Set state of single element\n   */\n\n\n  function elSetState(el, state, highlightDigit) {\n    if (el && isHighDownDispatcher(el)) {\n      (state === 'emphasis' ? enterEmphasis : leaveEmphasis)(el, highlightDigit);\n    }\n  }\n\n  function toggleHighlight(data, payload, state) {\n    var dataIndex = queryDataIndex(data, payload);\n    var highlightDigit = payload && payload.highlightKey != null ? getHighlightDigit(payload.highlightKey) : null;\n\n    if (dataIndex != null) {\n      each(normalizeToArray(dataIndex), function (dataIdx) {\n        elSetState(data.getItemGraphicEl(dataIdx), state, highlightDigit);\n      });\n    } else {\n      data.eachItemGraphicEl(function (el) {\n        elSetState(el, state, highlightDigit);\n      });\n    }\n  }\n\n  enableClassExtend(ChartView, ['dispose']);\n  enableClassManagement(ChartView);\n\n  function renderTaskPlan(context) {\n    return renderPlanner(context.model);\n  }\n\n  function renderTaskReset(context) {\n    var seriesModel = context.model;\n    var ecModel = context.ecModel;\n    var api = context.api;\n    var payload = context.payload; // FIXME: remove updateView updateVisual\n\n    var progressiveRender = seriesModel.pipelineContext.progressiveRender;\n    var view = context.view;\n    var updateMethod = payload && inner$2(payload).updateMethod;\n    var methodName = progressiveRender ? 'incrementalPrepareRender' : updateMethod && view[updateMethod] ? updateMethod // `appendData` is also supported when data amount\n    // is less than progressive threshold.\n    : 'render';\n\n    if (methodName !== 'render') {\n      view[methodName](seriesModel, ecModel, api, payload);\n    }\n\n    return progressMethodMap[methodName];\n  }\n\n  var progressMethodMap = {\n    incrementalPrepareRender: {\n      progress: function (params, context) {\n        context.view.incrementalRender(params, context.model, context.ecModel, context.api, context.payload);\n      }\n    },\n    render: {\n      // Put view.render in `progress` to support appendData. But in this case\n      // view.render should not be called in reset, otherwise it will be called\n      // twise. Use `forceFirstProgress` to make sure that view.render is called\n      // in any cases.\n      forceFirstProgress: true,\n      progress: function (params, context) {\n        context.view.render(context.model, context.ecModel, context.api, context.payload);\n      }\n    }\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var ORIGIN_METHOD = '\\0__throttleOriginMethod';\n  var RATE = '\\0__throttleRate';\n  var THROTTLE_TYPE = '\\0__throttleType';\n  /**\n   * @public\n   * @param {(Function)} fn\n   * @param {number} [delay=0] Unit: ms.\n   * @param {boolean} [debounce=false]\n   *        true: If call interval less than `delay`, only the last call works.\n   *        false: If call interval less than `delay, call works on fixed rate.\n   * @return {(Function)} throttled fn.\n   */\n\n  function throttle(fn, delay, debounce) {\n    var currCall;\n    var lastCall = 0;\n    var lastExec = 0;\n    var timer = null;\n    var diff;\n    var scope;\n    var args;\n    var debounceNextCall;\n    delay = delay || 0;\n\n    function exec() {\n      lastExec = new Date().getTime();\n      timer = null;\n      fn.apply(scope, args || []);\n    }\n\n    var cb = function () {\n      var cbArgs = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        cbArgs[_i] = arguments[_i];\n      }\n\n      currCall = new Date().getTime();\n      scope = this;\n      args = cbArgs;\n      var thisDelay = debounceNextCall || delay;\n      var thisDebounce = debounceNextCall || debounce;\n      debounceNextCall = null;\n      diff = currCall - (thisDebounce ? lastCall : lastExec) - thisDelay;\n      clearTimeout(timer); // Here we should make sure that: the `exec` SHOULD NOT be called later\n      // than a new call of `cb`, that is, preserving the command order. Consider\n      // calculating \"scale rate\" when roaming as an example. When a call of `cb`\n      // happens, either the `exec` is called dierectly, or the call is delayed.\n      // But the delayed call should never be later than next call of `cb`. Under\n      // this assurance, we can simply update view state each time `dispatchAction`\n      // triggered by user roaming, but not need to add extra code to avoid the\n      // state being \"rolled-back\".\n\n      if (thisDebounce) {\n        timer = setTimeout(exec, thisDelay);\n      } else {\n        if (diff >= 0) {\n          exec();\n        } else {\n          timer = setTimeout(exec, -diff);\n        }\n      }\n\n      lastCall = currCall;\n    };\n    /**\n     * Clear throttle.\n     * @public\n     */\n\n\n    cb.clear = function () {\n      if (timer) {\n        clearTimeout(timer);\n        timer = null;\n      }\n    };\n    /**\n     * Enable debounce once.\n     */\n\n\n    cb.debounceNextCall = function (debounceDelay) {\n      debounceNextCall = debounceDelay;\n    };\n\n    return cb;\n  }\n  /**\n   * Create throttle method or update throttle rate.\n   *\n   * @example\n   * ComponentView.prototype.render = function () {\n   *     ...\n   *     throttle.createOrUpdate(\n   *         this,\n   *         '_dispatchAction',\n   *         this.model.get('throttle'),\n   *         'fixRate'\n   *     );\n   * };\n   * ComponentView.prototype.remove = function () {\n   *     throttle.clear(this, '_dispatchAction');\n   * };\n   * ComponentView.prototype.dispose = function () {\n   *     throttle.clear(this, '_dispatchAction');\n   * };\n   *\n   */\n\n\n  function createOrUpdate(obj, fnAttr, rate, throttleType) {\n    var fn = obj[fnAttr];\n\n    if (!fn) {\n      return;\n    }\n\n    var originFn = fn[ORIGIN_METHOD] || fn;\n    var lastThrottleType = fn[THROTTLE_TYPE];\n    var lastRate = fn[RATE];\n\n    if (lastRate !== rate || lastThrottleType !== throttleType) {\n      if (rate == null || !throttleType) {\n        return obj[fnAttr] = originFn;\n      }\n\n      fn = obj[fnAttr] = throttle(originFn, rate, throttleType === 'debounce');\n      fn[ORIGIN_METHOD] = originFn;\n      fn[THROTTLE_TYPE] = throttleType;\n      fn[RATE] = rate;\n    }\n\n    return fn;\n  }\n  /**\n   * Clear throttle. Example see throttle.createOrUpdate.\n   */\n\n\n  function clear(obj, fnAttr) {\n    var fn = obj[fnAttr];\n\n    if (fn && fn[ORIGIN_METHOD]) {\n      // Clear throttle\n      fn.clear && fn.clear();\n      obj[fnAttr] = fn[ORIGIN_METHOD];\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var inner$3 = makeInner();\n  var defaultStyleMappers = {\n    itemStyle: makeStyleMapper(ITEM_STYLE_KEY_MAP, true),\n    lineStyle: makeStyleMapper(LINE_STYLE_KEY_MAP, true)\n  };\n  var defaultColorKey = {\n    lineStyle: 'stroke',\n    itemStyle: 'fill'\n  };\n\n  function getStyleMapper(seriesModel, stylePath) {\n    var styleMapper = seriesModel.visualStyleMapper || defaultStyleMappers[stylePath];\n\n    if (!styleMapper) {\n      console.warn(\"Unkown style type '\" + stylePath + \"'.\");\n      return defaultStyleMappers.itemStyle;\n    }\n\n    return styleMapper;\n  }\n\n  function getDefaultColorKey(seriesModel, stylePath) {\n    // return defaultColorKey[stylePath] ||\n    var colorKey = seriesModel.visualDrawType || defaultColorKey[stylePath];\n\n    if (!colorKey) {\n      console.warn(\"Unkown style type '\" + stylePath + \"'.\");\n      return 'fill';\n    }\n\n    return colorKey;\n  }\n\n  var seriesStyleTask = {\n    createOnAllSeries: true,\n    performRawSeries: true,\n    reset: function (seriesModel, ecModel) {\n      var data = seriesModel.getData();\n      var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle'; // Set in itemStyle\n\n      var styleModel = seriesModel.getModel(stylePath);\n      var getStyle = getStyleMapper(seriesModel, stylePath);\n      var globalStyle = getStyle(styleModel);\n      var decalOption = styleModel.getShallow('decal');\n\n      if (decalOption) {\n        data.setVisual('decal', decalOption);\n        decalOption.dirty = true;\n      } // TODO\n\n\n      var colorKey = getDefaultColorKey(seriesModel, stylePath);\n      var color = globalStyle[colorKey]; // TODO style callback\n\n      var colorCallback = isFunction(color) ? color : null;\n      var hasAutoColor = globalStyle.fill === 'auto' || globalStyle.stroke === 'auto'; // Get from color palette by default.\n\n      if (!globalStyle[colorKey] || colorCallback || hasAutoColor) {\n        // Note: if some series has color specified (e.g., by itemStyle.color), we DO NOT\n        // make it effect palette. Bacause some scenarios users need to make some series\n        // transparent or as background, which should better not effect the palette.\n        var colorPalette = seriesModel.getColorFromPalette( // TODO series count changed.\n        seriesModel.name, null, ecModel.getSeriesCount());\n\n        if (!globalStyle[colorKey]) {\n          globalStyle[colorKey] = colorPalette;\n          data.setVisual('colorFromPalette', true);\n        }\n\n        globalStyle.fill = globalStyle.fill === 'auto' || isFunction(globalStyle.fill) ? colorPalette : globalStyle.fill;\n        globalStyle.stroke = globalStyle.stroke === 'auto' || isFunction(globalStyle.stroke) ? colorPalette : globalStyle.stroke;\n      }\n\n      data.setVisual('style', globalStyle);\n      data.setVisual('drawType', colorKey); // Only visible series has each data be visual encoded\n\n      if (!ecModel.isSeriesFiltered(seriesModel) && colorCallback) {\n        data.setVisual('colorFromPalette', false);\n        return {\n          dataEach: function (data, idx) {\n            var dataParams = seriesModel.getDataParams(idx);\n            var itemStyle = extend({}, globalStyle);\n            itemStyle[colorKey] = colorCallback(dataParams);\n            data.setItemVisual(idx, 'style', itemStyle);\n          }\n        };\n      }\n    }\n  };\n  var sharedModel = new Model();\n  var dataStyleTask = {\n    createOnAllSeries: true,\n    performRawSeries: true,\n    reset: function (seriesModel, ecModel) {\n      if (seriesModel.ignoreStyleOnData || ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle'; // Set in itemStyle\n\n      var getStyle = getStyleMapper(seriesModel, stylePath);\n      var colorKey = data.getVisual('drawType');\n      return {\n        dataEach: data.hasItemOption ? function (data, idx) {\n          // Not use getItemModel for performance considuration\n          var rawItem = data.getRawDataItem(idx);\n\n          if (rawItem && rawItem[stylePath]) {\n            sharedModel.option = rawItem[stylePath];\n            var style = getStyle(sharedModel);\n            var existsStyle = data.ensureUniqueItemVisual(idx, 'style');\n            extend(existsStyle, style);\n\n            if (sharedModel.option.decal) {\n              data.setItemVisual(idx, 'decal', sharedModel.option.decal);\n              sharedModel.option.decal.dirty = true;\n            }\n\n            if (colorKey in style) {\n              data.setItemVisual(idx, 'colorFromPalette', false);\n            }\n          }\n        } : null\n      };\n    }\n  }; // Pick color from palette for the data which has not been set with color yet.\n  // Note: do not support stream rendering. No such cases yet.\n\n  var dataColorPaletteTask = {\n    performRawSeries: true,\n    overallReset: function (ecModel) {\n      // Each type of series use one scope.\n      // Pie and funnel are using diferrent scopes\n      var paletteScopeGroupByType = createHashMap();\n      ecModel.eachSeries(function (seriesModel) {\n        var colorBy = seriesModel.getColorBy();\n\n        if (seriesModel.isColorBySeries()) {\n          return;\n        }\n\n        var key = seriesModel.type + '-' + colorBy;\n        var colorScope = paletteScopeGroupByType.get(key);\n\n        if (!colorScope) {\n          colorScope = {};\n          paletteScopeGroupByType.set(key, colorScope);\n        }\n\n        inner$3(seriesModel).scope = colorScope;\n      });\n      ecModel.eachSeries(function (seriesModel) {\n        if (seriesModel.isColorBySeries() || ecModel.isSeriesFiltered(seriesModel)) {\n          return;\n        }\n\n        var dataAll = seriesModel.getRawData();\n        var idxMap = {};\n        var data = seriesModel.getData();\n        var colorScope = inner$3(seriesModel).scope;\n        var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\n        var colorKey = getDefaultColorKey(seriesModel, stylePath);\n        data.each(function (idx) {\n          var rawIdx = data.getRawIndex(idx);\n          idxMap[rawIdx] = idx;\n        }); // Iterate on data before filtered. To make sure color from palette can be\n        // Consistent when toggling legend.\n\n        dataAll.each(function (rawIdx) {\n          var idx = idxMap[rawIdx];\n          var fromPalette = data.getItemVisual(idx, 'colorFromPalette'); // Get color from palette for each data only when the color is inherited from series color, which is\n          // also picked from color palette. So following situation is not in the case:\n          // 1. series.itemStyle.color is set\n          // 2. color is encoded by visualMap\n\n          if (fromPalette) {\n            var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\n            var name_1 = dataAll.getName(rawIdx) || rawIdx + '';\n            var dataCount = dataAll.count();\n            itemStyle[colorKey] = seriesModel.getColorFromPalette(name_1, colorScope, dataCount);\n          }\n        });\n      });\n    }\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var PI$3 = Math.PI;\n  /**\n   * @param {module:echarts/ExtensionAPI} api\n   * @param {Object} [opts]\n   * @param {string} [opts.text]\n   * @param {string} [opts.color]\n   * @param {string} [opts.textColor]\n   * @return {module:zrender/Element}\n   */\n\n  function defaultLoading(api, opts) {\n    opts = opts || {};\n    defaults(opts, {\n      text: 'loading',\n      textColor: '#000',\n      fontSize: 12,\n      fontWeight: 'normal',\n      fontStyle: 'normal',\n      fontFamily: 'sans-serif',\n      maskColor: 'rgba(255, 255, 255, 0.8)',\n      showSpinner: true,\n      color: '#5470c6',\n      spinnerRadius: 10,\n      lineWidth: 5,\n      zlevel: 0\n    });\n    var group = new Group();\n    var mask = new Rect({\n      style: {\n        fill: opts.maskColor\n      },\n      zlevel: opts.zlevel,\n      z: 10000\n    });\n    group.add(mask);\n    var textContent = new ZRText({\n      style: {\n        text: opts.text,\n        fill: opts.textColor,\n        fontSize: opts.fontSize,\n        fontWeight: opts.fontWeight,\n        fontStyle: opts.fontStyle,\n        fontFamily: opts.fontFamily\n      },\n      zlevel: opts.zlevel,\n      z: 10001\n    });\n    var labelRect = new Rect({\n      style: {\n        fill: 'none'\n      },\n      textContent: textContent,\n      textConfig: {\n        position: 'right',\n        distance: 10\n      },\n      zlevel: opts.zlevel,\n      z: 10001\n    });\n    group.add(labelRect);\n    var arc;\n\n    if (opts.showSpinner) {\n      arc = new Arc({\n        shape: {\n          startAngle: -PI$3 / 2,\n          endAngle: -PI$3 / 2 + 0.1,\n          r: opts.spinnerRadius\n        },\n        style: {\n          stroke: opts.color,\n          lineCap: 'round',\n          lineWidth: opts.lineWidth\n        },\n        zlevel: opts.zlevel,\n        z: 10001\n      });\n      arc.animateShape(true).when(1000, {\n        endAngle: PI$3 * 3 / 2\n      }).start('circularInOut');\n      arc.animateShape(true).when(1000, {\n        startAngle: PI$3 * 3 / 2\n      }).delay(300).start('circularInOut');\n      group.add(arc);\n    } // Inject resize\n\n\n    group.resize = function () {\n      var textWidth = textContent.getBoundingRect().width;\n      var r = opts.showSpinner ? opts.spinnerRadius : 0; // cx = (containerWidth - arcDiameter - textDistance - textWidth) / 2\n      // textDistance needs to be calculated when both animation and text exist\n\n      var cx = (api.getWidth() - r * 2 - (opts.showSpinner && textWidth ? 10 : 0) - textWidth) / 2 - (opts.showSpinner && textWidth ? 0 : 5 + textWidth / 2) // only show the text\n      + (opts.showSpinner ? 0 : textWidth / 2) // only show the spinner\n      + (textWidth ? 0 : r);\n      var cy = api.getHeight() / 2;\n      opts.showSpinner && arc.setShape({\n        cx: cx,\n        cy: cy\n      });\n      labelRect.setShape({\n        x: cx - r,\n        y: cy - r,\n        width: r * 2,\n        height: r * 2\n      });\n      mask.setShape({\n        x: 0,\n        y: 0,\n        width: api.getWidth(),\n        height: api.getHeight()\n      });\n    };\n\n    group.resize();\n    return group;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var Scheduler =\n  /** @class */\n  function () {\n    function Scheduler(ecInstance, api, dataProcessorHandlers, visualHandlers) {\n      // key: handlerUID\n      this._stageTaskMap = createHashMap();\n      this.ecInstance = ecInstance;\n      this.api = api; // Fix current processors in case that in some rear cases that\n      // processors might be registered after echarts instance created.\n      // Register processors incrementally for a echarts instance is\n      // not supported by this stream architecture.\n\n      dataProcessorHandlers = this._dataProcessorHandlers = dataProcessorHandlers.slice();\n      visualHandlers = this._visualHandlers = visualHandlers.slice();\n      this._allHandlers = dataProcessorHandlers.concat(visualHandlers);\n    }\n\n    Scheduler.prototype.restoreData = function (ecModel, payload) {\n      // TODO: Only restore needed series and components, but not all components.\n      // Currently `restoreData` of all of the series and component will be called.\n      // But some independent components like `title`, `legend`, `graphic`, `toolbox`,\n      // `tooltip`, `axisPointer`, etc, do not need series refresh when `setOption`,\n      // and some components like coordinate system, axes, dataZoom, visualMap only\n      // need their target series refresh.\n      // (1) If we are implementing this feature some day, we should consider these cases:\n      // if a data processor depends on a component (e.g., dataZoomProcessor depends\n      // on the settings of `dataZoom`), it should be re-performed if the component\n      // is modified by `setOption`.\n      // (2) If a processor depends on sevral series, speicified by its `getTargetSeries`,\n      // it should be re-performed when the result array of `getTargetSeries` changed.\n      // We use `dependencies` to cover these issues.\n      // (3) How to update target series when coordinate system related components modified.\n      // TODO: simply the dirty mechanism? Check whether only the case here can set tasks dirty,\n      // and this case all of the tasks will be set as dirty.\n      ecModel.restoreData(payload); // Theoretically an overall task not only depends on each of its target series, but also\n      // depends on all of the series.\n      // The overall task is not in pipeline, and `ecModel.restoreData` only set pipeline tasks\n      // dirty. If `getTargetSeries` of an overall task returns nothing, we should also ensure\n      // that the overall task is set as dirty and to be performed, otherwise it probably cause\n      // state chaos. So we have to set dirty of all of the overall tasks manually, otherwise it\n      // probably cause state chaos (consider `dataZoomProcessor`).\n\n      this._stageTaskMap.each(function (taskRecord) {\n        var overallTask = taskRecord.overallTask;\n        overallTask && overallTask.dirty();\n      });\n    }; // If seriesModel provided, incremental threshold is check by series data.\n\n\n    Scheduler.prototype.getPerformArgs = function (task, isBlock) {\n      // For overall task\n      if (!task.__pipeline) {\n        return;\n      }\n\n      var pipeline = this._pipelineMap.get(task.__pipeline.id);\n\n      var pCtx = pipeline.context;\n      var incremental = !isBlock && pipeline.progressiveEnabled && (!pCtx || pCtx.progressiveRender) && task.__idxInPipeline > pipeline.blockIndex;\n      var step = incremental ? pipeline.step : null;\n      var modDataCount = pCtx && pCtx.modDataCount;\n      var modBy = modDataCount != null ? Math.ceil(modDataCount / step) : null;\n      return {\n        step: step,\n        modBy: modBy,\n        modDataCount: modDataCount\n      };\n    };\n\n    Scheduler.prototype.getPipeline = function (pipelineId) {\n      return this._pipelineMap.get(pipelineId);\n    };\n    /**\n     * Current, progressive rendering starts from visual and layout.\n     * Always detect render mode in the same stage, avoiding that incorrect\n     * detection caused by data filtering.\n     * Caution:\n     * `updateStreamModes` use `seriesModel.getData()`.\n     */\n\n\n    Scheduler.prototype.updateStreamModes = function (seriesModel, view) {\n      var pipeline = this._pipelineMap.get(seriesModel.uid);\n\n      var data = seriesModel.getData();\n      var dataLen = data.count(); // `progressiveRender` means that can render progressively in each\n      // animation frame. Note that some types of series do not provide\n      // `view.incrementalPrepareRender` but support `chart.appendData`. We\n      // use the term `incremental` but not `progressive` to describe the\n      // case that `chart.appendData`.\n\n      var progressiveRender = pipeline.progressiveEnabled && view.incrementalPrepareRender && dataLen >= pipeline.threshold;\n      var large = seriesModel.get('large') && dataLen >= seriesModel.get('largeThreshold'); // TODO: modDataCount should not updated if `appendData`, otherwise cause whole repaint.\n      // see `test/candlestick-large3.html`\n\n      var modDataCount = seriesModel.get('progressiveChunkMode') === 'mod' ? dataLen : null;\n      seriesModel.pipelineContext = pipeline.context = {\n        progressiveRender: progressiveRender,\n        modDataCount: modDataCount,\n        large: large\n      };\n    };\n\n    Scheduler.prototype.restorePipelines = function (ecModel) {\n      var scheduler = this;\n      var pipelineMap = scheduler._pipelineMap = createHashMap();\n      ecModel.eachSeries(function (seriesModel) {\n        var progressive = seriesModel.getProgressive();\n        var pipelineId = seriesModel.uid;\n        pipelineMap.set(pipelineId, {\n          id: pipelineId,\n          head: null,\n          tail: null,\n          threshold: seriesModel.getProgressiveThreshold(),\n          progressiveEnabled: progressive && !(seriesModel.preventIncremental && seriesModel.preventIncremental()),\n          blockIndex: -1,\n          step: Math.round(progressive || 700),\n          count: 0\n        });\n\n        scheduler._pipe(seriesModel, seriesModel.dataTask);\n      });\n    };\n\n    Scheduler.prototype.prepareStageTasks = function () {\n      var stageTaskMap = this._stageTaskMap;\n      var ecModel = this.api.getModel();\n      var api = this.api;\n      each(this._allHandlers, function (handler) {\n        var record = stageTaskMap.get(handler.uid) || stageTaskMap.set(handler.uid, {});\n        var errMsg = '';\n        {\n          // Currently do not need to support to sepecify them both.\n          errMsg = '\"reset\" and \"overallReset\" must not be both specified.';\n        }\n        assert(!(handler.reset && handler.overallReset), errMsg);\n        handler.reset && this._createSeriesStageTask(handler, record, ecModel, api);\n        handler.overallReset && this._createOverallStageTask(handler, record, ecModel, api);\n      }, this);\n    };\n\n    Scheduler.prototype.prepareView = function (view, model, ecModel, api) {\n      var renderTask = view.renderTask;\n      var context = renderTask.context;\n      context.model = model;\n      context.ecModel = ecModel;\n      context.api = api;\n      renderTask.__block = !view.incrementalPrepareRender;\n\n      this._pipe(model, renderTask);\n    };\n\n    Scheduler.prototype.performDataProcessorTasks = function (ecModel, payload) {\n      // If we do not use `block` here, it should be considered when to update modes.\n      this._performStageTasks(this._dataProcessorHandlers, ecModel, payload, {\n        block: true\n      });\n    };\n\n    Scheduler.prototype.performVisualTasks = function (ecModel, payload, opt) {\n      this._performStageTasks(this._visualHandlers, ecModel, payload, opt);\n    };\n\n    Scheduler.prototype._performStageTasks = function (stageHandlers, ecModel, payload, opt) {\n      opt = opt || {};\n      var unfinished = false;\n      var scheduler = this;\n      each(stageHandlers, function (stageHandler, idx) {\n        if (opt.visualType && opt.visualType !== stageHandler.visualType) {\n          return;\n        }\n\n        var stageHandlerRecord = scheduler._stageTaskMap.get(stageHandler.uid);\n\n        var seriesTaskMap = stageHandlerRecord.seriesTaskMap;\n        var overallTask = stageHandlerRecord.overallTask;\n\n        if (overallTask) {\n          var overallNeedDirty_1;\n          var agentStubMap = overallTask.agentStubMap;\n          agentStubMap.each(function (stub) {\n            if (needSetDirty(opt, stub)) {\n              stub.dirty();\n              overallNeedDirty_1 = true;\n            }\n          });\n          overallNeedDirty_1 && overallTask.dirty();\n          scheduler.updatePayload(overallTask, payload);\n          var performArgs_1 = scheduler.getPerformArgs(overallTask, opt.block); // Execute stubs firstly, which may set the overall task dirty,\n          // then execute the overall task. And stub will call seriesModel.setData,\n          // which ensures that in the overallTask seriesModel.getData() will not\n          // return incorrect data.\n\n          agentStubMap.each(function (stub) {\n            stub.perform(performArgs_1);\n          });\n\n          if (overallTask.perform(performArgs_1)) {\n            unfinished = true;\n          }\n        } else if (seriesTaskMap) {\n          seriesTaskMap.each(function (task, pipelineId) {\n            if (needSetDirty(opt, task)) {\n              task.dirty();\n            }\n\n            var performArgs = scheduler.getPerformArgs(task, opt.block); // FIXME\n            // if intending to decalare `performRawSeries` in handlers, only\n            // stream-independent (specifically, data item independent) operations can be\n            // performed. Because is a series is filtered, most of the tasks will not\n            // be performed. A stream-dependent operation probably cause wrong biz logic.\n            // Perhaps we should not provide a separate callback for this case instead\n            // of providing the config `performRawSeries`. The stream-dependent operaions\n            // and stream-independent operations should better not be mixed.\n\n            performArgs.skip = !stageHandler.performRawSeries && ecModel.isSeriesFiltered(task.context.model);\n            scheduler.updatePayload(task, payload);\n\n            if (task.perform(performArgs)) {\n              unfinished = true;\n            }\n          });\n        }\n      });\n\n      function needSetDirty(opt, task) {\n        return opt.setDirty && (!opt.dirtyMap || opt.dirtyMap.get(task.__pipeline.id));\n      }\n\n      this.unfinished = unfinished || this.unfinished;\n    };\n\n    Scheduler.prototype.performSeriesTasks = function (ecModel) {\n      var unfinished;\n      ecModel.eachSeries(function (seriesModel) {\n        // Progress to the end for dataInit and dataRestore.\n        unfinished = seriesModel.dataTask.perform() || unfinished;\n      });\n      this.unfinished = unfinished || this.unfinished;\n    };\n\n    Scheduler.prototype.plan = function () {\n      // Travel pipelines, check block.\n      this._pipelineMap.each(function (pipeline) {\n        var task = pipeline.tail;\n\n        do {\n          if (task.__block) {\n            pipeline.blockIndex = task.__idxInPipeline;\n            break;\n          }\n\n          task = task.getUpstream();\n        } while (task);\n      });\n    };\n\n    Scheduler.prototype.updatePayload = function (task, payload) {\n      payload !== 'remain' && (task.context.payload = payload);\n    };\n\n    Scheduler.prototype._createSeriesStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\n      var scheduler = this;\n      var oldSeriesTaskMap = stageHandlerRecord.seriesTaskMap; // The count of stages are totally about only several dozen, so\n      // do not need to reuse the map.\n\n      var newSeriesTaskMap = stageHandlerRecord.seriesTaskMap = createHashMap();\n      var seriesType = stageHandler.seriesType;\n      var getTargetSeries = stageHandler.getTargetSeries; // If a stageHandler should cover all series, `createOnAllSeries` should be declared mandatorily,\n      // to avoid some typo or abuse. Otherwise if an extension do not specify a `seriesType`,\n      // it works but it may cause other irrelevant charts blocked.\n\n      if (stageHandler.createOnAllSeries) {\n        ecModel.eachRawSeries(create);\n      } else if (seriesType) {\n        ecModel.eachRawSeriesByType(seriesType, create);\n      } else if (getTargetSeries) {\n        getTargetSeries(ecModel, api).each(create);\n      }\n\n      function create(seriesModel) {\n        var pipelineId = seriesModel.uid; // Init tasks for each seriesModel only once.\n        // Reuse original task instance.\n\n        var task = newSeriesTaskMap.set(pipelineId, oldSeriesTaskMap && oldSeriesTaskMap.get(pipelineId) || createTask({\n          plan: seriesTaskPlan,\n          reset: seriesTaskReset,\n          count: seriesTaskCount\n        }));\n        task.context = {\n          model: seriesModel,\n          ecModel: ecModel,\n          api: api,\n          // PENDING: `useClearVisual` not used?\n          useClearVisual: stageHandler.isVisual && !stageHandler.isLayout,\n          plan: stageHandler.plan,\n          reset: stageHandler.reset,\n          scheduler: scheduler\n        };\n\n        scheduler._pipe(seriesModel, task);\n      }\n    };\n\n    Scheduler.prototype._createOverallStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\n      var scheduler = this;\n      var overallTask = stageHandlerRecord.overallTask = stageHandlerRecord.overallTask // For overall task, the function only be called on reset stage.\n      || createTask({\n        reset: overallTaskReset\n      });\n      overallTask.context = {\n        ecModel: ecModel,\n        api: api,\n        overallReset: stageHandler.overallReset,\n        scheduler: scheduler\n      };\n      var oldAgentStubMap = overallTask.agentStubMap; // The count of stages are totally about only several dozen, so\n      // do not need to reuse the map.\n\n      var newAgentStubMap = overallTask.agentStubMap = createHashMap();\n      var seriesType = stageHandler.seriesType;\n      var getTargetSeries = stageHandler.getTargetSeries;\n      var overallProgress = true;\n      var shouldOverallTaskDirty = false; // FIXME:TS never used, so comment it\n      // let modifyOutputEnd = stageHandler.modifyOutputEnd;\n      // An overall task with seriesType detected or has `getTargetSeries`, we add\n      // stub in each pipelines, it will set the overall task dirty when the pipeline\n      // progress. Moreover, to avoid call the overall task each frame (too frequent),\n      // we set the pipeline block.\n\n      var errMsg = '';\n      {\n        errMsg = '\"createOnAllSeries\" do not supported for \"overallReset\", ' + 'becuase it will block all streams.';\n      }\n      assert(!stageHandler.createOnAllSeries, errMsg);\n\n      if (seriesType) {\n        ecModel.eachRawSeriesByType(seriesType, createStub);\n      } else if (getTargetSeries) {\n        getTargetSeries(ecModel, api).each(createStub);\n      } // Otherwise, (usually it is legancy case), the overall task will only be\n      // executed when upstream dirty. Otherwise the progressive rendering of all\n      // pipelines will be disabled unexpectedly. But it still needs stubs to receive\n      // dirty info from upsteam.\n      else {\n          overallProgress = false;\n          each(ecModel.getSeries(), createStub);\n        }\n\n      function createStub(seriesModel) {\n        var pipelineId = seriesModel.uid;\n        var stub = newAgentStubMap.set(pipelineId, oldAgentStubMap && oldAgentStubMap.get(pipelineId) || ( // When the result of `getTargetSeries` changed, the overallTask\n        // should be set as dirty and re-performed.\n        shouldOverallTaskDirty = true, createTask({\n          reset: stubReset,\n          onDirty: stubOnDirty\n        })));\n        stub.context = {\n          model: seriesModel,\n          overallProgress: overallProgress // FIXME:TS never used, so comment it\n          // modifyOutputEnd: modifyOutputEnd\n\n        };\n        stub.agent = overallTask;\n        stub.__block = overallProgress;\n\n        scheduler._pipe(seriesModel, stub);\n      }\n\n      if (shouldOverallTaskDirty) {\n        overallTask.dirty();\n      }\n    };\n\n    Scheduler.prototype._pipe = function (seriesModel, task) {\n      var pipelineId = seriesModel.uid;\n\n      var pipeline = this._pipelineMap.get(pipelineId);\n\n      !pipeline.head && (pipeline.head = task);\n      pipeline.tail && pipeline.tail.pipe(task);\n      pipeline.tail = task;\n      task.__idxInPipeline = pipeline.count++;\n      task.__pipeline = pipeline;\n    };\n\n    Scheduler.wrapStageHandler = function (stageHandler, visualType) {\n      if (isFunction(stageHandler)) {\n        stageHandler = {\n          overallReset: stageHandler,\n          seriesType: detectSeriseType(stageHandler)\n        };\n      }\n\n      stageHandler.uid = getUID('stageHandler');\n      visualType && (stageHandler.visualType = visualType);\n      return stageHandler;\n    };\n\n    return Scheduler;\n  }();\n\n  function overallTaskReset(context) {\n    context.overallReset(context.ecModel, context.api, context.payload);\n  }\n\n  function stubReset(context) {\n    return context.overallProgress && stubProgress;\n  }\n\n  function stubProgress() {\n    this.agent.dirty();\n    this.getDownstream().dirty();\n  }\n\n  function stubOnDirty() {\n    this.agent && this.agent.dirty();\n  }\n\n  function seriesTaskPlan(context) {\n    return context.plan ? context.plan(context.model, context.ecModel, context.api, context.payload) : null;\n  }\n\n  function seriesTaskReset(context) {\n    if (context.useClearVisual) {\n      context.data.clearAllVisual();\n    }\n\n    var resetDefines = context.resetDefines = normalizeToArray(context.reset(context.model, context.ecModel, context.api, context.payload));\n    return resetDefines.length > 1 ? map(resetDefines, function (v, idx) {\n      return makeSeriesTaskProgress(idx);\n    }) : singleSeriesTaskProgress;\n  }\n\n  var singleSeriesTaskProgress = makeSeriesTaskProgress(0);\n\n  function makeSeriesTaskProgress(resetDefineIdx) {\n    return function (params, context) {\n      var data = context.data;\n      var resetDefine = context.resetDefines[resetDefineIdx];\n\n      if (resetDefine && resetDefine.dataEach) {\n        for (var i = params.start; i < params.end; i++) {\n          resetDefine.dataEach(data, i);\n        }\n      } else if (resetDefine && resetDefine.progress) {\n        resetDefine.progress(params, data);\n      }\n    };\n  }\n\n  function seriesTaskCount(context) {\n    return context.data.count();\n  }\n  /**\n   * Only some legacy stage handlers (usually in echarts extensions) are pure function.\n   * To ensure that they can work normally, they should work in block mode, that is,\n   * they should not be started util the previous tasks finished. So they cause the\n   * progressive rendering disabled. We try to detect the series type, to narrow down\n   * the block range to only the series type they concern, but not all series.\n   */\n\n\n  function detectSeriseType(legacyFunc) {\n    seriesType = null;\n\n    try {\n      // Assume there is no async when calling `eachSeriesByType`.\n      legacyFunc(ecModelMock, apiMock);\n    } catch (e) {}\n\n    return seriesType;\n  }\n\n  var ecModelMock = {};\n  var apiMock = {};\n  var seriesType;\n  mockMethods(ecModelMock, GlobalModel);\n  mockMethods(apiMock, ExtensionAPI);\n\n  ecModelMock.eachSeriesByType = ecModelMock.eachRawSeriesByType = function (type) {\n    seriesType = type;\n  };\n\n  ecModelMock.eachComponent = function (cond) {\n    if (cond.mainType === 'series' && cond.subType) {\n      seriesType = cond.subType;\n    }\n  };\n\n  function mockMethods(target, Clz) {\n    /* eslint-disable */\n    for (var name_1 in Clz.prototype) {\n      // Do not use hasOwnProperty\n      target[name_1] = noop;\n    }\n    \n\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var colorAll = ['#37A2DA', '#32C5E9', '#67E0E3', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#E062AE', '#E690D1', '#e7bcf3', '#9d96f5', '#8378EA', '#96BFFF'];\n  var lightTheme = {\n    color: colorAll,\n    colorLayer: [['#37A2DA', '#ffd85c', '#fd7b5f'], ['#37A2DA', '#67E0E3', '#FFDB5C', '#ff9f7f', '#E062AE', '#9d96f5'], ['#37A2DA', '#32C5E9', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#e7bcf3', '#8378EA', '#96BFFF'], colorAll]\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var contrastColor = '#B9B8CE';\n  var backgroundColor = '#100C2A';\n\n  var axisCommon = function () {\n    return {\n      axisLine: {\n        lineStyle: {\n          color: contrastColor\n        }\n      },\n      splitLine: {\n        lineStyle: {\n          color: '#484753'\n        }\n      },\n      splitArea: {\n        areaStyle: {\n          color: ['rgba(255,255,255,0.02)', 'rgba(255,255,255,0.05)']\n        }\n      },\n      minorSplitLine: {\n        lineStyle: {\n          color: '#20203B'\n        }\n      }\n    };\n  };\n\n  var colorPalette = ['#4992ff', '#7cffb2', '#fddd60', '#ff6e76', '#58d9f9', '#05c091', '#ff8a45', '#8d48e3', '#dd79ff'];\n  var theme = {\n    darkMode: true,\n    color: colorPalette,\n    backgroundColor: backgroundColor,\n    axisPointer: {\n      lineStyle: {\n        color: '#817f91'\n      },\n      crossStyle: {\n        color: '#817f91'\n      },\n      label: {\n        // TODO Contrast of label backgorundColor\n        color: '#fff'\n      }\n    },\n    legend: {\n      textStyle: {\n        color: contrastColor\n      }\n    },\n    textStyle: {\n      color: contrastColor\n    },\n    title: {\n      textStyle: {\n        color: '#EEF1FA'\n      },\n      subtextStyle: {\n        color: '#B9B8CE'\n      }\n    },\n    toolbox: {\n      iconStyle: {\n        borderColor: contrastColor\n      }\n    },\n    dataZoom: {\n      borderColor: '#71708A',\n      textStyle: {\n        color: contrastColor\n      },\n      brushStyle: {\n        color: 'rgba(135,163,206,0.3)'\n      },\n      handleStyle: {\n        color: '#353450',\n        borderColor: '#C5CBE3'\n      },\n      moveHandleStyle: {\n        color: '#B0B6C3',\n        opacity: 0.3\n      },\n      fillerColor: 'rgba(135,163,206,0.2)',\n      emphasis: {\n        handleStyle: {\n          borderColor: '#91B7F2',\n          color: '#4D587D'\n        },\n        moveHandleStyle: {\n          color: '#636D9A',\n          opacity: 0.7\n        }\n      },\n      dataBackground: {\n        lineStyle: {\n          color: '#71708A',\n          width: 1\n        },\n        areaStyle: {\n          color: '#71708A'\n        }\n      },\n      selectedDataBackground: {\n        lineStyle: {\n          color: '#87A3CE'\n        },\n        areaStyle: {\n          color: '#87A3CE'\n        }\n      }\n    },\n    visualMap: {\n      textStyle: {\n        color: contrastColor\n      }\n    },\n    timeline: {\n      lineStyle: {\n        color: contrastColor\n      },\n      label: {\n        color: contrastColor\n      },\n      controlStyle: {\n        color: contrastColor,\n        borderColor: contrastColor\n      }\n    },\n    calendar: {\n      itemStyle: {\n        color: backgroundColor\n      },\n      dayLabel: {\n        color: contrastColor\n      },\n      monthLabel: {\n        color: contrastColor\n      },\n      yearLabel: {\n        color: contrastColor\n      }\n    },\n    timeAxis: axisCommon(),\n    logAxis: axisCommon(),\n    valueAxis: axisCommon(),\n    categoryAxis: axisCommon(),\n    line: {\n      symbol: 'circle'\n    },\n    graph: {\n      color: colorPalette\n    },\n    gauge: {\n      title: {\n        color: contrastColor\n      },\n      axisLine: {\n        lineStyle: {\n          color: [[1, 'rgba(207,212,219,0.2)']]\n        }\n      },\n      axisLabel: {\n        color: contrastColor\n      },\n      detail: {\n        color: '#EEF1FA'\n      }\n    },\n    candlestick: {\n      itemStyle: {\n        color: '#f64e56',\n        color0: '#54ea92',\n        borderColor: '#f64e56',\n        borderColor0: '#54ea92' // borderColor: '#ca2824',\n        // borderColor0: '#09a443'\n\n      }\n    }\n  };\n  theme.categoryAxis.splitLine.show = false;\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Usage of query:\n   * `chart.on('click', query, handler);`\n   * The `query` can be:\n   * + The component type query string, only `mainType` or `mainType.subType`,\n   *   like: 'xAxis', 'series', 'xAxis.category' or 'series.line'.\n   * + The component query object, like:\n   *   `{seriesIndex: 2}`, `{seriesName: 'xx'}`, `{seriesId: 'some'}`,\n   *   `{xAxisIndex: 2}`, `{xAxisName: 'xx'}`, `{xAxisId: 'some'}`.\n   * + The data query object, like:\n   *   `{dataIndex: 123}`, `{dataType: 'link'}`, `{name: 'some'}`.\n   * + The other query object (cmponent customized query), like:\n   *   `{element: 'some'}` (only available in custom series).\n   *\n   * Caveat: If a prop in the `query` object is `null/undefined`, it is the\n   * same as there is no such prop in the `query` object.\n   */\n\n  var ECEventProcessor =\n  /** @class */\n  function () {\n    function ECEventProcessor() {}\n\n    ECEventProcessor.prototype.normalizeQuery = function (query) {\n      var cptQuery = {};\n      var dataQuery = {};\n      var otherQuery = {}; // `query` is `mainType` or `mainType.subType` of component.\n\n      if (isString(query)) {\n        var condCptType = parseClassType(query); // `.main` and `.sub` may be ''.\n\n        cptQuery.mainType = condCptType.main || null;\n        cptQuery.subType = condCptType.sub || null;\n      } // `query` is an object, convert to {mainType, index, name, id}.\n      else {\n          // `xxxIndex`, `xxxName`, `xxxId`, `name`, `dataIndex`, `dataType` is reserved,\n          // can not be used in `compomentModel.filterForExposedEvent`.\n          var suffixes_1 = ['Index', 'Name', 'Id'];\n          var dataKeys_1 = {\n            name: 1,\n            dataIndex: 1,\n            dataType: 1\n          };\n          each(query, function (val, key) {\n            var reserved = false;\n\n            for (var i = 0; i < suffixes_1.length; i++) {\n              var propSuffix = suffixes_1[i];\n              var suffixPos = key.lastIndexOf(propSuffix);\n\n              if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {\n                var mainType = key.slice(0, suffixPos); // Consider `dataIndex`.\n\n                if (mainType !== 'data') {\n                  cptQuery.mainType = mainType;\n                  cptQuery[propSuffix.toLowerCase()] = val;\n                  reserved = true;\n                }\n              }\n            }\n\n            if (dataKeys_1.hasOwnProperty(key)) {\n              dataQuery[key] = val;\n              reserved = true;\n            }\n\n            if (!reserved) {\n              otherQuery[key] = val;\n            }\n          });\n        }\n\n      return {\n        cptQuery: cptQuery,\n        dataQuery: dataQuery,\n        otherQuery: otherQuery\n      };\n    };\n\n    ECEventProcessor.prototype.filter = function (eventType, query) {\n      // They should be assigned before each trigger call.\n      var eventInfo = this.eventInfo;\n\n      if (!eventInfo) {\n        return true;\n      }\n\n      var targetEl = eventInfo.targetEl;\n      var packedEvent = eventInfo.packedEvent;\n      var model = eventInfo.model;\n      var view = eventInfo.view; // For event like 'globalout'.\n\n      if (!model || !view) {\n        return true;\n      }\n\n      var cptQuery = query.cptQuery;\n      var dataQuery = query.dataQuery;\n      return check(cptQuery, model, 'mainType') && check(cptQuery, model, 'subType') && check(cptQuery, model, 'index', 'componentIndex') && check(cptQuery, model, 'name') && check(cptQuery, model, 'id') && check(dataQuery, packedEvent, 'name') && check(dataQuery, packedEvent, 'dataIndex') && check(dataQuery, packedEvent, 'dataType') && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));\n\n      function check(query, host, prop, propOnHost) {\n        return query[prop] == null || host[propOnHost || prop] === query[prop];\n      }\n    };\n\n    ECEventProcessor.prototype.afterTrigger = function () {\n      // Make sure the eventInfo wont be used in next trigger.\n      this.eventInfo = null;\n    };\n\n    return ECEventProcessor;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var SYMBOL_PROPS_WITH_CB = ['symbol', 'symbolSize', 'symbolRotate', 'symbolOffset'];\n  var SYMBOL_PROPS = SYMBOL_PROPS_WITH_CB.concat(['symbolKeepAspect']); // Encoding visual for all series include which is filtered for legend drawing\n\n  var seriesSymbolTask = {\n    createOnAllSeries: true,\n    // For legend.\n    performRawSeries: true,\n    reset: function (seriesModel, ecModel) {\n      var data = seriesModel.getData();\n\n      if (seriesModel.legendIcon) {\n        data.setVisual('legendIcon', seriesModel.legendIcon);\n      }\n\n      if (!seriesModel.hasSymbolVisual) {\n        return;\n      }\n\n      var symbolOptions = {};\n      var symbolOptionsCb = {};\n      var hasCallback = false;\n\n      for (var i = 0; i < SYMBOL_PROPS_WITH_CB.length; i++) {\n        var symbolPropName = SYMBOL_PROPS_WITH_CB[i];\n        var val = seriesModel.get(symbolPropName);\n\n        if (isFunction(val)) {\n          hasCallback = true;\n          symbolOptionsCb[symbolPropName] = val;\n        } else {\n          symbolOptions[symbolPropName] = val;\n        }\n      }\n\n      symbolOptions.symbol = symbolOptions.symbol || seriesModel.defaultSymbol;\n      data.setVisual(extend({\n        legendIcon: seriesModel.legendIcon || symbolOptions.symbol,\n        symbolKeepAspect: seriesModel.get('symbolKeepAspect')\n      }, symbolOptions)); // Only visible series has each data be visual encoded\n\n      if (ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      var symbolPropsCb = keys(symbolOptionsCb);\n\n      function dataEach(data, idx) {\n        var rawValue = seriesModel.getRawValue(idx);\n        var params = seriesModel.getDataParams(idx);\n\n        for (var i = 0; i < symbolPropsCb.length; i++) {\n          var symbolPropName = symbolPropsCb[i];\n          data.setItemVisual(idx, symbolPropName, symbolOptionsCb[symbolPropName](rawValue, params));\n        }\n      }\n\n      return {\n        dataEach: hasCallback ? dataEach : null\n      };\n    }\n  };\n  var dataSymbolTask = {\n    createOnAllSeries: true,\n    // For legend.\n    performRawSeries: true,\n    reset: function (seriesModel, ecModel) {\n      if (!seriesModel.hasSymbolVisual) {\n        return;\n      } // Only visible series has each data be visual encoded\n\n\n      if (ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n\n      function dataEach(data, idx) {\n        var itemModel = data.getItemModel(idx);\n\n        for (var i = 0; i < SYMBOL_PROPS.length; i++) {\n          var symbolPropName = SYMBOL_PROPS[i];\n          var val = itemModel.getShallow(symbolPropName, true);\n\n          if (val != null) {\n            data.setItemVisual(idx, symbolPropName, val);\n          }\n        }\n      }\n\n      return {\n        dataEach: data.hasItemOption ? dataEach : null\n      };\n    }\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  function getItemVisualFromData(data, dataIndex, key) {\n    switch (key) {\n      case 'color':\n        var style = data.getItemVisual(dataIndex, 'style');\n        return style[data.getVisual('drawType')];\n\n      case 'opacity':\n        return data.getItemVisual(dataIndex, 'style').opacity;\n\n      case 'symbol':\n      case 'symbolSize':\n      case 'liftZ':\n        return data.getItemVisual(dataIndex, key);\n\n      default:\n        {\n          console.warn(\"Unknown visual type \" + key);\n        }\n    }\n  }\n\n  function getVisualFromData(data, key) {\n    switch (key) {\n      case 'color':\n        var style = data.getVisual('style');\n        return style[data.getVisual('drawType')];\n\n      case 'opacity':\n        return data.getVisual('style').opacity;\n\n      case 'symbol':\n      case 'symbolSize':\n      case 'liftZ':\n        return data.getVisual(key);\n\n      default:\n        {\n          console.warn(\"Unknown visual type \" + key);\n        }\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // Inlucdes: pieSelect, pieUnSelect, pieToggleSelect, mapSelect, mapUnSelect, mapToggleSelect\n\n\n  function createLegacyDataSelectAction(seriesType, ecRegisterAction) {\n    function getSeriesIndices(ecModel, payload) {\n      var seriesIndices = [];\n      ecModel.eachComponent({\n        mainType: 'series',\n        subType: seriesType,\n        query: payload\n      }, function (seriesModel) {\n        seriesIndices.push(seriesModel.seriesIndex);\n      });\n      return seriesIndices;\n    }\n\n    each([[seriesType + 'ToggleSelect', 'toggleSelect'], [seriesType + 'Select', 'select'], [seriesType + 'UnSelect', 'unselect']], function (eventsMap) {\n      ecRegisterAction(eventsMap[0], function (payload, ecModel, api) {\n        payload = extend({}, payload);\n        {\n          deprecateReplaceLog(payload.type, eventsMap[1]);\n        }\n        api.dispatchAction(extend(payload, {\n          type: eventsMap[1],\n          seriesIndex: getSeriesIndices(ecModel, payload)\n        }));\n      });\n    });\n  }\n\n  function handleSeriesLegacySelectEvents(type, eventPostfix, ecIns, ecModel, payload) {\n    var legacyEventName = type + eventPostfix;\n\n    if (!ecIns.isSilent(legacyEventName)) {\n      {\n        deprecateLog(\"event \" + legacyEventName + \" is deprecated.\");\n      }\n      ecModel.eachComponent({\n        mainType: 'series',\n        subType: 'pie'\n      }, function (seriesModel) {\n        var seriesIndex = seriesModel.seriesIndex;\n        var selectedMap = seriesModel.option.selectedMap;\n        var selected = payload.selected;\n\n        for (var i = 0; i < selected.length; i++) {\n          if (selected[i].seriesIndex === seriesIndex) {\n            var data = seriesModel.getData();\n            var dataIndex = queryDataIndex(data, payload.fromActionPayload);\n            ecIns.trigger(legacyEventName, {\n              type: legacyEventName,\n              seriesId: seriesModel.id,\n              name: isArray(dataIndex) ? data.getName(dataIndex[0]) : data.getName(dataIndex),\n              selected: isString(selectedMap) ? selectedMap : extend({}, selectedMap)\n            });\n          }\n        }\n      });\n    }\n  }\n\n  function handleLegacySelectEvents(messageCenter, ecIns, api) {\n    messageCenter.on('selectchanged', function (params) {\n      var ecModel = api.getModel();\n\n      if (params.isFromClick) {\n        handleSeriesLegacySelectEvents('map', 'selectchanged', ecIns, ecModel, params);\n        handleSeriesLegacySelectEvents('pie', 'selectchanged', ecIns, ecModel, params);\n      } else if (params.fromAction === 'select') {\n        handleSeriesLegacySelectEvents('map', 'selected', ecIns, ecModel, params);\n        handleSeriesLegacySelectEvents('pie', 'selected', ecIns, ecModel, params);\n      } else if (params.fromAction === 'unselect') {\n        handleSeriesLegacySelectEvents('map', 'unselected', ecIns, ecModel, params);\n        handleSeriesLegacySelectEvents('pie', 'unselected', ecIns, ecModel, params);\n      }\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function findEventDispatcher(target, det, returnFirstMatch) {\n    var found;\n\n    while (target) {\n      if (det(target)) {\n        found = target;\n\n        if (returnFirstMatch) {\n          break;\n        }\n      }\n\n      target = target.__hostTarget || target.parent;\n    }\n\n    return found;\n  }\n\n  var wmUniqueIndex = Math.round(Math.random() * 9);\n  var supportDefineProperty = typeof Object.defineProperty === 'function';\n\n  var WeakMap = function () {\n    function WeakMap() {\n      this._id = '__ec_inner_' + wmUniqueIndex++;\n    }\n\n    WeakMap.prototype.get = function (key) {\n      return this._guard(key)[this._id];\n    };\n\n    WeakMap.prototype.set = function (key, value) {\n      var target = this._guard(key);\n\n      if (supportDefineProperty) {\n        Object.defineProperty(target, this._id, {\n          value: value,\n          enumerable: false,\n          configurable: true\n        });\n      } else {\n        target[this._id] = value;\n      }\n\n      return this;\n    };\n\n    WeakMap.prototype[\"delete\"] = function (key) {\n      if (this.has(key)) {\n        delete this._guard(key)[this._id];\n        return true;\n      }\n\n      return false;\n    };\n\n    WeakMap.prototype.has = function (key) {\n      return !!this._guard(key)[this._id];\n    };\n\n    WeakMap.prototype._guard = function (key) {\n      if (key !== Object(key)) {\n        throw TypeError('Value of WeakMap is not a non-null object.');\n      }\n\n      return key;\n    };\n\n    return WeakMap;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // Symbol factory\n\n  /**\n   * Triangle shape\n   * @inner\n   */\n\n\n  var Triangle = Path.extend({\n    type: 'triangle',\n    shape: {\n      cx: 0,\n      cy: 0,\n      width: 0,\n      height: 0\n    },\n    buildPath: function (path, shape) {\n      var cx = shape.cx;\n      var cy = shape.cy;\n      var width = shape.width / 2;\n      var height = shape.height / 2;\n      path.moveTo(cx, cy - height);\n      path.lineTo(cx + width, cy + height);\n      path.lineTo(cx - width, cy + height);\n      path.closePath();\n    }\n  });\n  /**\n   * Diamond shape\n   * @inner\n   */\n\n  var Diamond = Path.extend({\n    type: 'diamond',\n    shape: {\n      cx: 0,\n      cy: 0,\n      width: 0,\n      height: 0\n    },\n    buildPath: function (path, shape) {\n      var cx = shape.cx;\n      var cy = shape.cy;\n      var width = shape.width / 2;\n      var height = shape.height / 2;\n      path.moveTo(cx, cy - height);\n      path.lineTo(cx + width, cy);\n      path.lineTo(cx, cy + height);\n      path.lineTo(cx - width, cy);\n      path.closePath();\n    }\n  });\n  /**\n   * Pin shape\n   * @inner\n   */\n\n  var Pin = Path.extend({\n    type: 'pin',\n    shape: {\n      // x, y on the cusp\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    },\n    buildPath: function (path, shape) {\n      var x = shape.x;\n      var y = shape.y;\n      var w = shape.width / 5 * 3; // Height must be larger than width\n\n      var h = Math.max(w, shape.height);\n      var r = w / 2; // Dist on y with tangent point and circle center\n\n      var dy = r * r / (h - r);\n      var cy = y - h + r + dy;\n      var angle = Math.asin(dy / r); // Dist on x with tangent point and circle center\n\n      var dx = Math.cos(angle) * r;\n      var tanX = Math.sin(angle);\n      var tanY = Math.cos(angle);\n      var cpLen = r * 0.6;\n      var cpLen2 = r * 0.7;\n      path.moveTo(x - dx, cy + dy);\n      path.arc(x, cy, r, Math.PI - angle, Math.PI * 2 + angle);\n      path.bezierCurveTo(x + dx - tanX * cpLen, cy + dy + tanY * cpLen, x, y - cpLen2, x, y);\n      path.bezierCurveTo(x, y - cpLen2, x - dx + tanX * cpLen, cy + dy + tanY * cpLen, x - dx, cy + dy);\n      path.closePath();\n    }\n  });\n  /**\n   * Arrow shape\n   * @inner\n   */\n\n  var Arrow = Path.extend({\n    type: 'arrow',\n    shape: {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    },\n    buildPath: function (ctx, shape) {\n      var height = shape.height;\n      var width = shape.width;\n      var x = shape.x;\n      var y = shape.y;\n      var dx = width / 3 * 2;\n      ctx.moveTo(x, y);\n      ctx.lineTo(x + dx, y + height);\n      ctx.lineTo(x, y + height / 4 * 3);\n      ctx.lineTo(x - dx, y + height);\n      ctx.lineTo(x, y);\n      ctx.closePath();\n    }\n  });\n  /**\n   * Map of path contructors\n   */\n  // TODO Use function to build symbol path.\n\n  var symbolCtors = {\n    line: Line,\n    rect: Rect,\n    roundRect: Rect,\n    square: Rect,\n    circle: Circle,\n    diamond: Diamond,\n    pin: Pin,\n    arrow: Arrow,\n    triangle: Triangle\n  };\n  var symbolShapeMakers = {\n    line: function (x, y, w, h, shape) {\n      shape.x1 = x;\n      shape.y1 = y + h / 2;\n      shape.x2 = x + w;\n      shape.y2 = y + h / 2;\n    },\n    rect: function (x, y, w, h, shape) {\n      shape.x = x;\n      shape.y = y;\n      shape.width = w;\n      shape.height = h;\n    },\n    roundRect: function (x, y, w, h, shape) {\n      shape.x = x;\n      shape.y = y;\n      shape.width = w;\n      shape.height = h;\n      shape.r = Math.min(w, h) / 4;\n    },\n    square: function (x, y, w, h, shape) {\n      var size = Math.min(w, h);\n      shape.x = x;\n      shape.y = y;\n      shape.width = size;\n      shape.height = size;\n    },\n    circle: function (x, y, w, h, shape) {\n      // Put circle in the center of square\n      shape.cx = x + w / 2;\n      shape.cy = y + h / 2;\n      shape.r = Math.min(w, h) / 2;\n    },\n    diamond: function (x, y, w, h, shape) {\n      shape.cx = x + w / 2;\n      shape.cy = y + h / 2;\n      shape.width = w;\n      shape.height = h;\n    },\n    pin: function (x, y, w, h, shape) {\n      shape.x = x + w / 2;\n      shape.y = y + h / 2;\n      shape.width = w;\n      shape.height = h;\n    },\n    arrow: function (x, y, w, h, shape) {\n      shape.x = x + w / 2;\n      shape.y = y + h / 2;\n      shape.width = w;\n      shape.height = h;\n    },\n    triangle: function (x, y, w, h, shape) {\n      shape.cx = x + w / 2;\n      shape.cy = y + h / 2;\n      shape.width = w;\n      shape.height = h;\n    }\n  };\n  var symbolBuildProxies = {};\n  each(symbolCtors, function (Ctor, name) {\n    symbolBuildProxies[name] = new Ctor();\n  });\n  var SymbolClz = Path.extend({\n    type: 'symbol',\n    shape: {\n      symbolType: '',\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    },\n    calculateTextPosition: function (out, config, rect) {\n      var res = calculateTextPosition(out, config, rect);\n      var shape = this.shape;\n\n      if (shape && shape.symbolType === 'pin' && config.position === 'inside') {\n        res.y = rect.y + rect.height * 0.4;\n      }\n\n      return res;\n    },\n    buildPath: function (ctx, shape, inBundle) {\n      var symbolType = shape.symbolType;\n\n      if (symbolType !== 'none') {\n        var proxySymbol = symbolBuildProxies[symbolType];\n\n        if (!proxySymbol) {\n          // Default rect\n          symbolType = 'rect';\n          proxySymbol = symbolBuildProxies[symbolType];\n        }\n\n        symbolShapeMakers[symbolType](shape.x, shape.y, shape.width, shape.height, proxySymbol.shape);\n        proxySymbol.buildPath(ctx, proxySymbol.shape, inBundle);\n      }\n    }\n  }); // Provide setColor helper method to avoid determine if set the fill or stroke outside\n\n  function symbolPathSetColor(color, innerColor) {\n    if (this.type !== 'image') {\n      var symbolStyle = this.style;\n\n      if (this.__isEmptyBrush) {\n        symbolStyle.stroke = color;\n        symbolStyle.fill = innerColor || '#fff'; // TODO Same width with lineStyle in LineView\n\n        symbolStyle.lineWidth = 2;\n      } else if (this.shape.symbolType === 'line') {\n        symbolStyle.stroke = color;\n      } else {\n        symbolStyle.fill = color;\n      }\n\n      this.markRedraw();\n    }\n  }\n  /**\n   * Create a symbol element with given symbol configuration: shape, x, y, width, height, color\n   */\n\n\n  function createSymbol(symbolType, x, y, w, h, color, // whether to keep the ratio of w/h,\n  keepAspect) {\n    // TODO Support image object, DynamicImage.\n    var isEmpty = symbolType.indexOf('empty') === 0;\n\n    if (isEmpty) {\n      symbolType = symbolType.substr(5, 1).toLowerCase() + symbolType.substr(6);\n    }\n\n    var symbolPath;\n\n    if (symbolType.indexOf('image://') === 0) {\n      symbolPath = makeImage(symbolType.slice(8), new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n    } else if (symbolType.indexOf('path://') === 0) {\n      symbolPath = makePath(symbolType.slice(7), {}, new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n    } else {\n      symbolPath = new SymbolClz({\n        shape: {\n          symbolType: symbolType,\n          x: x,\n          y: y,\n          width: w,\n          height: h\n        }\n      });\n    }\n\n    symbolPath.__isEmptyBrush = isEmpty; // TODO Should deprecate setColor\n\n    symbolPath.setColor = symbolPathSetColor;\n\n    if (color) {\n      symbolPath.setColor(color);\n    }\n\n    return symbolPath;\n  }\n\n  function normalizeSymbolSize(symbolSize) {\n    if (!isArray(symbolSize)) {\n      symbolSize = [+symbolSize, +symbolSize];\n    }\n\n    return [symbolSize[0] || 0, symbolSize[1] || 0];\n  }\n\n  function normalizeSymbolOffset(symbolOffset, symbolSize) {\n    if (symbolOffset == null) {\n      return;\n    }\n\n    if (!isArray(symbolOffset)) {\n      symbolOffset = [symbolOffset, symbolOffset];\n    }\n\n    return [parsePercent$1(symbolOffset[0], symbolSize[0]) || 0, parsePercent$1(retrieve2(symbolOffset[1], symbolOffset[0]), symbolSize[1]) || 0];\n  }\n\n  function isSafeNum(num) {\n    return isFinite(num);\n  }\n\n  function createLinearGradient(ctx, obj, rect) {\n    var x = obj.x == null ? 0 : obj.x;\n    var x2 = obj.x2 == null ? 1 : obj.x2;\n    var y = obj.y == null ? 0 : obj.y;\n    var y2 = obj.y2 == null ? 0 : obj.y2;\n\n    if (!obj.global) {\n      x = x * rect.width + rect.x;\n      x2 = x2 * rect.width + rect.x;\n      y = y * rect.height + rect.y;\n      y2 = y2 * rect.height + rect.y;\n    }\n\n    x = isSafeNum(x) ? x : 0;\n    x2 = isSafeNum(x2) ? x2 : 1;\n    y = isSafeNum(y) ? y : 0;\n    y2 = isSafeNum(y2) ? y2 : 0;\n    var canvasGradient = ctx.createLinearGradient(x, y, x2, y2);\n    return canvasGradient;\n  }\n\n  function createRadialGradient(ctx, obj, rect) {\n    var width = rect.width;\n    var height = rect.height;\n    var min = Math.min(width, height);\n    var x = obj.x == null ? 0.5 : obj.x;\n    var y = obj.y == null ? 0.5 : obj.y;\n    var r = obj.r == null ? 0.5 : obj.r;\n\n    if (!obj.global) {\n      x = x * width + rect.x;\n      y = y * height + rect.y;\n      r = r * min;\n    }\n\n    x = isSafeNum(x) ? x : 0.5;\n    y = isSafeNum(y) ? y : 0.5;\n    r = r >= 0 && isSafeNum(r) ? r : 0.5;\n    var canvasGradient = ctx.createRadialGradient(x, y, 0, x, y, r);\n    return canvasGradient;\n  }\n\n  function getCanvasGradient(ctx, obj, rect) {\n    var canvasGradient = obj.type === 'radial' ? createRadialGradient(ctx, obj, rect) : createLinearGradient(ctx, obj, rect);\n    var colorStops = obj.colorStops;\n\n    for (var i = 0; i < colorStops.length; i++) {\n      canvasGradient.addColorStop(colorStops[i].offset, colorStops[i].color);\n    }\n\n    return canvasGradient;\n  }\n\n  function isClipPathChanged(clipPaths, prevClipPaths) {\n    if (clipPaths === prevClipPaths || !clipPaths && !prevClipPaths) {\n      return false;\n    }\n\n    if (!clipPaths || !prevClipPaths || clipPaths.length !== prevClipPaths.length) {\n      return true;\n    }\n\n    for (var i = 0; i < clipPaths.length; i++) {\n      if (clipPaths[i] !== prevClipPaths[i]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function parseInt10(val) {\n    return parseInt(val, 10);\n  }\n\n  function getSize(root, whIdx, opts) {\n    var wh = ['width', 'height'][whIdx];\n    var cwh = ['clientWidth', 'clientHeight'][whIdx];\n    var plt = ['paddingLeft', 'paddingTop'][whIdx];\n    var prb = ['paddingRight', 'paddingBottom'][whIdx];\n\n    if (opts[wh] != null && opts[wh] !== 'auto') {\n      return parseFloat(opts[wh]);\n    }\n\n    var stl = document.defaultView.getComputedStyle(root);\n    return (root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh])) - (parseInt10(stl[plt]) || 0) - (parseInt10(stl[prb]) || 0) | 0;\n  }\n\n  function normalizeLineDash(lineType, lineWidth) {\n    if (!lineType || lineType === 'solid' || !(lineWidth > 0)) {\n      return null;\n    }\n\n    return lineType === 'dashed' ? [4 * lineWidth, 2 * lineWidth] : lineType === 'dotted' ? [lineWidth] : isNumber(lineType) ? [lineType] : isArray(lineType) ? lineType : null;\n  }\n\n  function getLineDash(el) {\n    var style = el.style;\n    var lineDash = style.lineDash && style.lineWidth > 0 && normalizeLineDash(style.lineDash, style.lineWidth);\n    var lineDashOffset = style.lineDashOffset;\n\n    if (lineDash) {\n      var lineScale_1 = style.strokeNoScale && el.getLineScale ? el.getLineScale() : 1;\n\n      if (lineScale_1 && lineScale_1 !== 1) {\n        lineDash = map(lineDash, function (rawVal) {\n          return rawVal / lineScale_1;\n        });\n        lineDashOffset /= lineScale_1;\n      }\n    }\n\n    return [lineDash, lineDashOffset];\n  }\n\n  var pathProxyForDraw = new PathProxy(true);\n\n  function styleHasStroke(style) {\n    var stroke = style.stroke;\n    return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n  }\n\n  function isValidStrokeFillStyle(strokeOrFill) {\n    return typeof strokeOrFill === 'string' && strokeOrFill !== 'none';\n  }\n\n  function styleHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== 'none';\n  }\n\n  function doFillPath(ctx, style) {\n    if (style.fillOpacity != null && style.fillOpacity !== 1) {\n      var originalGlobalAlpha = ctx.globalAlpha;\n      ctx.globalAlpha = style.fillOpacity * style.opacity;\n      ctx.fill();\n      ctx.globalAlpha = originalGlobalAlpha;\n    } else {\n      ctx.fill();\n    }\n  }\n\n  function doStrokePath(ctx, style) {\n    if (style.strokeOpacity != null && style.strokeOpacity !== 1) {\n      var originalGlobalAlpha = ctx.globalAlpha;\n      ctx.globalAlpha = style.strokeOpacity * style.opacity;\n      ctx.stroke();\n      ctx.globalAlpha = originalGlobalAlpha;\n    } else {\n      ctx.stroke();\n    }\n  }\n\n  function createCanvasPattern(ctx, pattern, el) {\n    var image = createOrUpdateImage(pattern.image, pattern.__image, el);\n\n    if (isImageReady(image)) {\n      var canvasPattern = ctx.createPattern(image, pattern.repeat || 'repeat');\n\n      if (typeof DOMMatrix === 'function' && canvasPattern && canvasPattern.setTransform) {\n        var matrix = new DOMMatrix();\n        matrix.translateSelf(pattern.x || 0, pattern.y || 0);\n        matrix.rotateSelf(0, 0, (pattern.rotation || 0) * RADIAN_TO_DEGREE);\n        matrix.scaleSelf(pattern.scaleX || 1, pattern.scaleY || 1);\n        canvasPattern.setTransform(matrix);\n      }\n\n      return canvasPattern;\n    }\n  }\n\n  function brushPath(ctx, el, style, inBatch) {\n    var _a;\n\n    var hasStroke = styleHasStroke(style);\n    var hasFill = styleHasFill(style);\n    var strokePercent = style.strokePercent;\n    var strokePart = strokePercent < 1;\n    var firstDraw = !el.path;\n\n    if ((!el.silent || strokePart) && firstDraw) {\n      el.createPathProxy();\n    }\n\n    var path = el.path || pathProxyForDraw;\n    var dirtyFlag = el.__dirty;\n\n    if (!inBatch) {\n      var fill = style.fill;\n      var stroke = style.stroke;\n      var hasFillGradient = hasFill && !!fill.colorStops;\n      var hasStrokeGradient = hasStroke && !!stroke.colorStops;\n      var hasFillPattern = hasFill && !!fill.image;\n      var hasStrokePattern = hasStroke && !!stroke.image;\n      var fillGradient = void 0;\n      var strokeGradient = void 0;\n      var fillPattern = void 0;\n      var strokePattern = void 0;\n      var rect = void 0;\n\n      if (hasFillGradient || hasStrokeGradient) {\n        rect = el.getBoundingRect();\n      }\n\n      if (hasFillGradient) {\n        fillGradient = dirtyFlag ? getCanvasGradient(ctx, fill, rect) : el.__canvasFillGradient;\n        el.__canvasFillGradient = fillGradient;\n      }\n\n      if (hasStrokeGradient) {\n        strokeGradient = dirtyFlag ? getCanvasGradient(ctx, stroke, rect) : el.__canvasStrokeGradient;\n        el.__canvasStrokeGradient = strokeGradient;\n      }\n\n      if (hasFillPattern) {\n        fillPattern = dirtyFlag || !el.__canvasFillPattern ? createCanvasPattern(ctx, fill, el) : el.__canvasFillPattern;\n        el.__canvasFillPattern = fillPattern;\n      }\n\n      if (hasStrokePattern) {\n        strokePattern = dirtyFlag || !el.__canvasStrokePattern ? createCanvasPattern(ctx, stroke, el) : el.__canvasStrokePattern;\n        el.__canvasStrokePattern = fillPattern;\n      }\n\n      if (hasFillGradient) {\n        ctx.fillStyle = fillGradient;\n      } else if (hasFillPattern) {\n        if (fillPattern) {\n          ctx.fillStyle = fillPattern;\n        } else {\n          hasFill = false;\n        }\n      }\n\n      if (hasStrokeGradient) {\n        ctx.strokeStyle = strokeGradient;\n      } else if (hasStrokePattern) {\n        if (strokePattern) {\n          ctx.strokeStyle = strokePattern;\n        } else {\n          hasStroke = false;\n        }\n      }\n    }\n\n    var scale = el.getGlobalScale();\n    path.setScale(scale[0], scale[1], el.segmentIgnoreThreshold);\n    var lineDash;\n    var lineDashOffset;\n\n    if (ctx.setLineDash && style.lineDash) {\n      _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n    }\n\n    var needsRebuild = true;\n\n    if (firstDraw || dirtyFlag & SHAPE_CHANGED_BIT) {\n      path.setDPR(ctx.dpr);\n\n      if (strokePart) {\n        path.setContext(null);\n      } else {\n        path.setContext(ctx);\n        needsRebuild = false;\n      }\n\n      path.reset();\n      el.buildPath(path, el.shape, inBatch);\n      path.toStatic();\n      el.pathUpdated();\n    }\n\n    if (needsRebuild) {\n      path.rebuildPath(ctx, strokePart ? strokePercent : 1);\n    }\n\n    if (lineDash) {\n      ctx.setLineDash(lineDash);\n      ctx.lineDashOffset = lineDashOffset;\n    }\n\n    if (!inBatch) {\n      if (style.strokeFirst) {\n        if (hasStroke) {\n          doStrokePath(ctx, style);\n        }\n\n        if (hasFill) {\n          doFillPath(ctx, style);\n        }\n      } else {\n        if (hasFill) {\n          doFillPath(ctx, style);\n        }\n\n        if (hasStroke) {\n          doStrokePath(ctx, style);\n        }\n      }\n    }\n\n    if (lineDash) {\n      ctx.setLineDash([]);\n    }\n  }\n\n  function brushImage(ctx, el, style) {\n    var image = el.__image = createOrUpdateImage(style.image, el.__image, el, el.onload);\n\n    if (!image || !isImageReady(image)) {\n      return;\n    }\n\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = el.getWidth();\n    var height = el.getHeight();\n    var aspect = image.width / image.height;\n\n    if (width == null && height != null) {\n      width = height * aspect;\n    } else if (height == null && width != null) {\n      height = width / aspect;\n    } else if (width == null && height == null) {\n      width = image.width;\n      height = image.height;\n    }\n\n    if (style.sWidth && style.sHeight) {\n      var sx = style.sx || 0;\n      var sy = style.sy || 0;\n      ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    } else if (style.sx && style.sy) {\n      var sx = style.sx;\n      var sy = style.sy;\n      var sWidth = width - sx;\n      var sHeight = height - sy;\n      ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    } else {\n      ctx.drawImage(image, x, y, width, height);\n    }\n  }\n\n  function brushText(ctx, el, style) {\n    var _a;\n\n    var text = style.text;\n    text != null && (text += '');\n\n    if (text) {\n      ctx.font = style.font || DEFAULT_FONT;\n      ctx.textAlign = style.textAlign;\n      ctx.textBaseline = style.textBaseline;\n      var lineDash = void 0;\n      var lineDashOffset = void 0;\n\n      if (ctx.setLineDash && style.lineDash) {\n        _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n      }\n\n      if (lineDash) {\n        ctx.setLineDash(lineDash);\n        ctx.lineDashOffset = lineDashOffset;\n      }\n\n      if (style.strokeFirst) {\n        if (styleHasStroke(style)) {\n          ctx.strokeText(text, style.x, style.y);\n        }\n\n        if (styleHasFill(style)) {\n          ctx.fillText(text, style.x, style.y);\n        }\n      } else {\n        if (styleHasFill(style)) {\n          ctx.fillText(text, style.x, style.y);\n        }\n\n        if (styleHasStroke(style)) {\n          ctx.strokeText(text, style.x, style.y);\n        }\n      }\n\n      if (lineDash) {\n        ctx.setLineDash([]);\n      }\n    }\n  }\n\n  var SHADOW_NUMBER_PROPS = ['shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n  var STROKE_PROPS = [['lineCap', 'butt'], ['lineJoin', 'miter'], ['miterLimit', 10]];\n\n  function bindCommonProps(ctx, style, prevStyle, forceSetAll, scope) {\n    var styleChanged = false;\n\n    if (!forceSetAll) {\n      prevStyle = prevStyle || {};\n\n      if (style === prevStyle) {\n        return false;\n      }\n    }\n\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n      flushPathDrawn(ctx, scope);\n      styleChanged = true;\n      var opacity = Math.max(Math.min(style.opacity, 1), 0);\n      ctx.globalAlpha = isNaN(opacity) ? DEFAULT_COMMON_STYLE.opacity : opacity;\n    }\n\n    if (forceSetAll || style.blend !== prevStyle.blend) {\n      if (!styleChanged) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n      }\n\n      ctx.globalCompositeOperation = style.blend || DEFAULT_COMMON_STYLE.blend;\n    }\n\n    for (var i = 0; i < SHADOW_NUMBER_PROPS.length; i++) {\n      var propName = SHADOW_NUMBER_PROPS[i];\n\n      if (forceSetAll || style[propName] !== prevStyle[propName]) {\n        if (!styleChanged) {\n          flushPathDrawn(ctx, scope);\n          styleChanged = true;\n        }\n\n        ctx[propName] = ctx.dpr * (style[propName] || 0);\n      }\n    }\n\n    if (forceSetAll || style.shadowColor !== prevStyle.shadowColor) {\n      if (!styleChanged) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n      }\n\n      ctx.shadowColor = style.shadowColor || DEFAULT_COMMON_STYLE.shadowColor;\n    }\n\n    return styleChanged;\n  }\n\n  function bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetAll, scope) {\n    var style = getStyle(el, scope.inHover);\n    var prevStyle = forceSetAll ? null : prevEl && getStyle(prevEl, scope.inHover) || {};\n\n    if (style === prevStyle) {\n      return false;\n    }\n\n    var styleChanged = bindCommonProps(ctx, style, prevStyle, forceSetAll, scope);\n\n    if (forceSetAll || style.fill !== prevStyle.fill) {\n      if (!styleChanged) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n      }\n\n      isValidStrokeFillStyle(style.fill) && (ctx.fillStyle = style.fill);\n    }\n\n    if (forceSetAll || style.stroke !== prevStyle.stroke) {\n      if (!styleChanged) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n      }\n\n      isValidStrokeFillStyle(style.stroke) && (ctx.strokeStyle = style.stroke);\n    }\n\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n      if (!styleChanged) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n      }\n\n      ctx.globalAlpha = style.opacity == null ? 1 : style.opacity;\n    }\n\n    if (el.hasStroke()) {\n      var lineWidth = style.lineWidth;\n      var newLineWidth = lineWidth / (style.strokeNoScale && el.getLineScale ? el.getLineScale() : 1);\n\n      if (ctx.lineWidth !== newLineWidth) {\n        if (!styleChanged) {\n          flushPathDrawn(ctx, scope);\n          styleChanged = true;\n        }\n\n        ctx.lineWidth = newLineWidth;\n      }\n    }\n\n    for (var i = 0; i < STROKE_PROPS.length; i++) {\n      var prop = STROKE_PROPS[i];\n      var propName = prop[0];\n\n      if (forceSetAll || style[propName] !== prevStyle[propName]) {\n        if (!styleChanged) {\n          flushPathDrawn(ctx, scope);\n          styleChanged = true;\n        }\n\n        ctx[propName] = style[propName] || prop[1];\n      }\n    }\n\n    return styleChanged;\n  }\n\n  function bindImageStyle(ctx, el, prevEl, forceSetAll, scope) {\n    return bindCommonProps(ctx, getStyle(el, scope.inHover), prevEl && getStyle(prevEl, scope.inHover), forceSetAll, scope);\n  }\n\n  function setContextTransform(ctx, el) {\n    var m = el.transform;\n    var dpr = ctx.dpr || 1;\n\n    if (m) {\n      ctx.setTransform(dpr * m[0], dpr * m[1], dpr * m[2], dpr * m[3], dpr * m[4], dpr * m[5]);\n    } else {\n      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n    }\n  }\n\n  function updateClipStatus(clipPaths, ctx, scope) {\n    var allClipped = false;\n\n    for (var i = 0; i < clipPaths.length; i++) {\n      var clipPath = clipPaths[i];\n      allClipped = allClipped || clipPath.isZeroArea();\n      setContextTransform(ctx, clipPath);\n      ctx.beginPath();\n      clipPath.buildPath(ctx, clipPath.shape);\n      ctx.clip();\n    }\n\n    scope.allClipped = allClipped;\n  }\n\n  function isTransformChanged(m0, m1) {\n    if (m0 && m1) {\n      return m0[0] !== m1[0] || m0[1] !== m1[1] || m0[2] !== m1[2] || m0[3] !== m1[3] || m0[4] !== m1[4] || m0[5] !== m1[5];\n    } else if (!m0 && !m1) {\n      return false;\n    }\n\n    return true;\n  }\n\n  var DRAW_TYPE_PATH = 1;\n  var DRAW_TYPE_IMAGE = 2;\n  var DRAW_TYPE_TEXT = 3;\n  var DRAW_TYPE_INCREMENTAL = 4;\n\n  function canPathBatch(style) {\n    var hasFill = styleHasFill(style);\n    var hasStroke = styleHasStroke(style);\n    return !(style.lineDash || !(+hasFill ^ +hasStroke) || hasFill && typeof style.fill !== 'string' || hasStroke && typeof style.stroke !== 'string' || style.strokePercent < 1 || style.strokeOpacity < 1 || style.fillOpacity < 1);\n  }\n\n  function flushPathDrawn(ctx, scope) {\n    scope.batchFill && ctx.fill();\n    scope.batchStroke && ctx.stroke();\n    scope.batchFill = '';\n    scope.batchStroke = '';\n  }\n\n  function getStyle(el, inHover) {\n    return inHover ? el.__hoverStyle || el.style : el.style;\n  }\n\n  function brushSingle(ctx, el) {\n    brush(ctx, el, {\n      inHover: false,\n      viewWidth: 0,\n      viewHeight: 0\n    }, true);\n  }\n\n  function brush(ctx, el, scope, isLast) {\n    var m = el.transform;\n\n    if (!el.shouldBePainted(scope.viewWidth, scope.viewHeight, false, false)) {\n      el.__dirty &= ~REDRAW_BIT;\n      el.__isRendered = false;\n      return;\n    }\n\n    var clipPaths = el.__clipPaths;\n    var prevElClipPaths = scope.prevElClipPaths;\n    var forceSetTransform = false;\n    var forceSetStyle = false;\n\n    if (!prevElClipPaths || isClipPathChanged(clipPaths, prevElClipPaths)) {\n      if (prevElClipPaths && prevElClipPaths.length) {\n        flushPathDrawn(ctx, scope);\n        ctx.restore();\n        forceSetStyle = forceSetTransform = true;\n        scope.prevElClipPaths = null;\n        scope.allClipped = false;\n        scope.prevEl = null;\n      }\n\n      if (clipPaths && clipPaths.length) {\n        flushPathDrawn(ctx, scope);\n        ctx.save();\n        updateClipStatus(clipPaths, ctx, scope);\n        forceSetTransform = true;\n      }\n\n      scope.prevElClipPaths = clipPaths;\n    }\n\n    if (scope.allClipped) {\n      el.__isRendered = false;\n      return;\n    }\n\n    el.beforeBrush && el.beforeBrush();\n    el.innerBeforeBrush();\n    var prevEl = scope.prevEl;\n\n    if (!prevEl) {\n      forceSetStyle = forceSetTransform = true;\n    }\n\n    var canBatchPath = el instanceof Path && el.autoBatch && canPathBatch(el.style);\n\n    if (forceSetTransform || isTransformChanged(m, prevEl.transform)) {\n      flushPathDrawn(ctx, scope);\n      setContextTransform(ctx, el);\n    } else if (!canBatchPath) {\n      flushPathDrawn(ctx, scope);\n    }\n\n    var style = getStyle(el, scope.inHover);\n\n    if (el instanceof Path) {\n      if (scope.lastDrawType !== DRAW_TYPE_PATH) {\n        forceSetStyle = true;\n        scope.lastDrawType = DRAW_TYPE_PATH;\n      }\n\n      bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n\n      if (!canBatchPath || !scope.batchFill && !scope.batchStroke) {\n        ctx.beginPath();\n      }\n\n      brushPath(ctx, el, style, canBatchPath);\n\n      if (canBatchPath) {\n        scope.batchFill = style.fill || '';\n        scope.batchStroke = style.stroke || '';\n      }\n    } else {\n      if (el instanceof TSpan) {\n        if (scope.lastDrawType !== DRAW_TYPE_TEXT) {\n          forceSetStyle = true;\n          scope.lastDrawType = DRAW_TYPE_TEXT;\n        }\n\n        bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n        brushText(ctx, el, style);\n      } else if (el instanceof ZRImage) {\n        if (scope.lastDrawType !== DRAW_TYPE_IMAGE) {\n          forceSetStyle = true;\n          scope.lastDrawType = DRAW_TYPE_IMAGE;\n        }\n\n        bindImageStyle(ctx, el, prevEl, forceSetStyle, scope);\n        brushImage(ctx, el, style);\n      } else if (el.getTemporalDisplayables) {\n        if (scope.lastDrawType !== DRAW_TYPE_INCREMENTAL) {\n          forceSetStyle = true;\n          scope.lastDrawType = DRAW_TYPE_INCREMENTAL;\n        }\n\n        brushIncremental(ctx, el, scope);\n      }\n    }\n\n    if (canBatchPath && isLast) {\n      flushPathDrawn(ctx, scope);\n    }\n\n    el.innerAfterBrush();\n    el.afterBrush && el.afterBrush();\n    scope.prevEl = el;\n    el.__dirty = 0;\n    el.__isRendered = true;\n  }\n\n  function brushIncremental(ctx, el, scope) {\n    var displayables = el.getDisplayables();\n    var temporalDisplayables = el.getTemporalDisplayables();\n    ctx.save();\n    var innerScope = {\n      prevElClipPaths: null,\n      prevEl: null,\n      allClipped: false,\n      viewWidth: scope.viewWidth,\n      viewHeight: scope.viewHeight,\n      inHover: scope.inHover\n    };\n    var i;\n    var len;\n\n    for (i = el.getCursor(), len = displayables.length; i < len; i++) {\n      var displayable = displayables[i];\n      displayable.beforeBrush && displayable.beforeBrush();\n      displayable.innerBeforeBrush();\n      brush(ctx, displayable, innerScope, i === len - 1);\n      displayable.innerAfterBrush();\n      displayable.afterBrush && displayable.afterBrush();\n      innerScope.prevEl = displayable;\n    }\n\n    for (var i_1 = 0, len_1 = temporalDisplayables.length; i_1 < len_1; i_1++) {\n      var displayable = temporalDisplayables[i_1];\n      displayable.beforeBrush && displayable.beforeBrush();\n      displayable.innerBeforeBrush();\n      brush(ctx, displayable, innerScope, i_1 === len_1 - 1);\n      displayable.innerAfterBrush();\n      displayable.afterBrush && displayable.afterBrush();\n      innerScope.prevEl = displayable;\n    }\n\n    el.clearTemporalDisplayables();\n    el.notClear = true;\n    ctx.restore();\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var decalMap = new WeakMap();\n  var decalCache = new LRU(100);\n  var decalKeys = ['symbol', 'symbolSize', 'symbolKeepAspect', 'color', 'backgroundColor', 'dashArrayX', 'dashArrayY', 'maxTileWidth', 'maxTileHeight'];\n  /**\n   * Create or update pattern image from decal options\n   *\n   * @param {InnerDecalObject | 'none'} decalObject decal options, 'none' if no decal\n   * @return {Pattern} pattern with generated image, null if no decal\n   */\n\n  function createOrUpdatePatternFromDecal(decalObject, api) {\n    if (decalObject === 'none') {\n      return null;\n    }\n\n    var dpr = api.getDevicePixelRatio();\n    var zr = api.getZr();\n    var isSVG = zr.painter.type === 'svg';\n\n    if (decalObject.dirty) {\n      decalMap[\"delete\"](decalObject);\n    }\n\n    var oldPattern = decalMap.get(decalObject);\n\n    if (oldPattern) {\n      return oldPattern;\n    }\n\n    var decalOpt = defaults(decalObject, {\n      symbol: 'rect',\n      symbolSize: 1,\n      symbolKeepAspect: true,\n      color: 'rgba(0, 0, 0, 0.2)',\n      backgroundColor: null,\n      dashArrayX: 5,\n      dashArrayY: 5,\n      rotation: 0,\n      maxTileWidth: 512,\n      maxTileHeight: 512\n    });\n\n    if (decalOpt.backgroundColor === 'none') {\n      decalOpt.backgroundColor = null;\n    }\n\n    var pattern = {\n      repeat: 'repeat'\n    };\n    setPatternnSource(pattern);\n    pattern.rotation = decalOpt.rotation;\n    pattern.scaleX = pattern.scaleY = isSVG ? 1 : 1 / dpr;\n    decalMap.set(decalObject, pattern);\n    decalObject.dirty = false;\n    return pattern;\n\n    function setPatternnSource(pattern) {\n      var keys$$1 = [dpr];\n      var isValidKey = true;\n\n      for (var i = 0; i < decalKeys.length; ++i) {\n        var value = decalOpt[decalKeys[i]];\n\n        if (value != null && !isArray(value) && !isString(value) && !isNumber(value) && typeof value !== 'boolean') {\n          isValidKey = false;\n          break;\n        }\n\n        keys$$1.push(value);\n      }\n\n      var cacheKey;\n\n      if (isValidKey) {\n        cacheKey = keys$$1.join(',') + (isSVG ? '-svg' : '');\n        var cache = decalCache.get(cacheKey);\n\n        if (cache) {\n          isSVG ? pattern.svgElement = cache : pattern.image = cache;\n        }\n      }\n\n      var dashArrayX = normalizeDashArrayX(decalOpt.dashArrayX);\n      var dashArrayY = normalizeDashArrayY(decalOpt.dashArrayY);\n      var symbolArray = normalizeSymbolArray(decalOpt.symbol);\n      var lineBlockLengthsX = getLineBlockLengthX(dashArrayX);\n      var lineBlockLengthY = getLineBlockLengthY(dashArrayY);\n      var canvas = !isSVG && platformApi.createCanvas();\n      var svgRoot = isSVG && {\n        tag: 'g',\n        attrs: {},\n        key: 'dcl',\n        children: []\n      };\n      var pSize = getPatternSize();\n      var ctx;\n\n      if (canvas) {\n        canvas.width = pSize.width * dpr;\n        canvas.height = pSize.height * dpr;\n        ctx = canvas.getContext('2d');\n      }\n\n      brushDecal();\n\n      if (isValidKey) {\n        decalCache.put(cacheKey, canvas || svgRoot);\n      }\n\n      pattern.image = canvas;\n      pattern.svgElement = svgRoot;\n      pattern.svgWidth = pSize.width;\n      pattern.svgHeight = pSize.height;\n      /**\n       * Get minumum length that can make a repeatable pattern.\n       *\n       * @return {Object} pattern width and height\n       */\n\n      function getPatternSize() {\n        /**\n         * For example, if dash is [[3, 2], [2, 1]] for X, it looks like\n         * |---  ---  ---  ---  --- ...\n         * |-- -- -- -- -- -- -- -- ...\n         * |---  ---  ---  ---  --- ...\n         * |-- -- -- -- -- -- -- -- ...\n         * So the minumum length of X is 15,\n         * which is the least common multiple of `3 + 2` and `2 + 1`\n         * |---  ---  ---  |---  --- ...\n         * |-- -- -- -- -- |-- -- -- ...\n         */\n        var width = 1;\n\n        for (var i = 0, xlen = lineBlockLengthsX.length; i < xlen; ++i) {\n          width = getLeastCommonMultiple(width, lineBlockLengthsX[i]);\n        }\n\n        var symbolRepeats = 1;\n\n        for (var i = 0, xlen = symbolArray.length; i < xlen; ++i) {\n          symbolRepeats = getLeastCommonMultiple(symbolRepeats, symbolArray[i].length);\n        }\n\n        width *= symbolRepeats;\n        var height = lineBlockLengthY * lineBlockLengthsX.length * symbolArray.length;\n        {\n          var warn = function (attrName) {\n            /* eslint-disable-next-line */\n            console.warn(\"Calculated decal size is greater than \" + attrName + \" due to decal option settings so \" + attrName + \" is used for the decal size. Please consider changing the decal option to make a smaller decal or set \" + attrName + \" to be larger to avoid incontinuity.\");\n          };\n\n          if (width > decalOpt.maxTileWidth) {\n            warn('maxTileWidth');\n          }\n\n          if (height > decalOpt.maxTileHeight) {\n            warn('maxTileHeight');\n          }\n        }\n        return {\n          width: Math.max(1, Math.min(width, decalOpt.maxTileWidth)),\n          height: Math.max(1, Math.min(height, decalOpt.maxTileHeight))\n        };\n      }\n\n      function brushDecal() {\n        if (ctx) {\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n          if (decalOpt.backgroundColor) {\n            ctx.fillStyle = decalOpt.backgroundColor;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n          }\n        }\n\n        var ySum = 0;\n\n        for (var i = 0; i < dashArrayY.length; ++i) {\n          ySum += dashArrayY[i];\n        }\n\n        if (ySum <= 0) {\n          // dashArrayY is 0, draw nothing\n          return;\n        }\n\n        var y = -lineBlockLengthY;\n        var yId = 0;\n        var yIdTotal = 0;\n        var xId0 = 0;\n\n        while (y < pSize.height) {\n          if (yId % 2 === 0) {\n            var symbolYId = yIdTotal / 2 % symbolArray.length;\n            var x = 0;\n            var xId1 = 0;\n            var xId1Total = 0;\n\n            while (x < pSize.width * 2) {\n              var xSum = 0;\n\n              for (var i = 0; i < dashArrayX[xId0].length; ++i) {\n                xSum += dashArrayX[xId0][i];\n              }\n\n              if (xSum <= 0) {\n                // Skip empty line\n                break;\n              } // E.g., [15, 5, 20, 5] draws only for 15 and 20\n\n\n              if (xId1 % 2 === 0) {\n                var size = (1 - decalOpt.symbolSize) * 0.5;\n                var left = x + dashArrayX[xId0][xId1] * size;\n                var top_1 = y + dashArrayY[yId] * size;\n                var width = dashArrayX[xId0][xId1] * decalOpt.symbolSize;\n                var height = dashArrayY[yId] * decalOpt.symbolSize;\n                var symbolXId = xId1Total / 2 % symbolArray[symbolYId].length;\n                brushSymbol(left, top_1, width, height, symbolArray[symbolYId][symbolXId]);\n              }\n\n              x += dashArrayX[xId0][xId1];\n              ++xId1Total;\n              ++xId1;\n\n              if (xId1 === dashArrayX[xId0].length) {\n                xId1 = 0;\n              }\n            }\n\n            ++xId0;\n\n            if (xId0 === dashArrayX.length) {\n              xId0 = 0;\n            }\n          }\n\n          y += dashArrayY[yId];\n          ++yIdTotal;\n          ++yId;\n\n          if (yId === dashArrayY.length) {\n            yId = 0;\n          }\n        }\n\n        function brushSymbol(x, y, width, height, symbolType) {\n          var scale = isSVG ? 1 : dpr;\n          var symbol = createSymbol(symbolType, x * scale, y * scale, width * scale, height * scale, decalOpt.color, decalOpt.symbolKeepAspect);\n\n          if (isSVG) {\n            var symbolVNode = zr.painter.renderOneToVNode(symbol);\n\n            if (symbolVNode) {\n              svgRoot.children.push(symbolVNode);\n            }\n          } else {\n            // Paint to canvas for all other renderers.\n            brushSingle(ctx, symbol);\n          }\n        }\n      }\n    }\n  }\n  /**\n   * Convert symbol array into normalized array\n   *\n   * @param {string | (string | string[])[]} symbol symbol input\n   * @return {string[][]} normolized symbol array\n   */\n\n\n  function normalizeSymbolArray(symbol) {\n    if (!symbol || symbol.length === 0) {\n      return [['rect']];\n    }\n\n    if (isString(symbol)) {\n      return [[symbol]];\n    }\n\n    var isAllString = true;\n\n    for (var i = 0; i < symbol.length; ++i) {\n      if (!isString(symbol[i])) {\n        isAllString = false;\n        break;\n      }\n    }\n\n    if (isAllString) {\n      return normalizeSymbolArray([symbol]);\n    }\n\n    var result = [];\n\n    for (var i = 0; i < symbol.length; ++i) {\n      if (isString(symbol[i])) {\n        result.push([symbol[i]]);\n      } else {\n        result.push(symbol[i]);\n      }\n    }\n\n    return result;\n  }\n  /**\n   * Convert dash input into dashArray\n   *\n   * @param {DecalDashArrayX} dash dash input\n   * @return {number[][]} normolized dash array\n   */\n\n\n  function normalizeDashArrayX(dash) {\n    if (!dash || dash.length === 0) {\n      return [[0, 0]];\n    }\n\n    if (isNumber(dash)) {\n      var dashValue = Math.ceil(dash);\n      return [[dashValue, dashValue]];\n    }\n    /**\n     * [20, 5] should be normalized into [[20, 5]],\n     * while [20, [5, 10]] should be normalized into [[20, 20], [5, 10]]\n     */\n\n\n    var isAllNumber = true;\n\n    for (var i = 0; i < dash.length; ++i) {\n      if (!isNumber(dash[i])) {\n        isAllNumber = false;\n        break;\n      }\n    }\n\n    if (isAllNumber) {\n      return normalizeDashArrayX([dash]);\n    }\n\n    var result = [];\n\n    for (var i = 0; i < dash.length; ++i) {\n      if (isNumber(dash[i])) {\n        var dashValue = Math.ceil(dash[i]);\n        result.push([dashValue, dashValue]);\n      } else {\n        var dashValue = map(dash[i], function (n) {\n          return Math.ceil(n);\n        });\n\n        if (dashValue.length % 2 === 1) {\n          // [4, 2, 1] means |----  -    -- |----  -    -- |\n          // so normalize it to be [4, 2, 1, 4, 2, 1]\n          result.push(dashValue.concat(dashValue));\n        } else {\n          result.push(dashValue);\n        }\n      }\n    }\n\n    return result;\n  }\n  /**\n   * Convert dash input into dashArray\n   *\n   * @param {DecalDashArrayY} dash dash input\n   * @return {number[]} normolized dash array\n   */\n\n\n  function normalizeDashArrayY(dash) {\n    if (!dash || typeof dash === 'object' && dash.length === 0) {\n      return [0, 0];\n    }\n\n    if (isNumber(dash)) {\n      var dashValue_1 = Math.ceil(dash);\n      return [dashValue_1, dashValue_1];\n    }\n\n    var dashValue = map(dash, function (n) {\n      return Math.ceil(n);\n    });\n    return dash.length % 2 ? dashValue.concat(dashValue) : dashValue;\n  }\n  /**\n   * Get block length of each line. A block is the length of dash line and space.\n   * For example, a line with [4, 1] has a dash line of 4 and a space of 1 after\n   * that, so the block length of this line is 5.\n   *\n   * @param {number[][]} dash dash arrary of X or Y\n   * @return {number[]} block length of each line\n   */\n\n\n  function getLineBlockLengthX(dash) {\n    return map(dash, function (line) {\n      return getLineBlockLengthY(line);\n    });\n  }\n\n  function getLineBlockLengthY(dash) {\n    var blockLength = 0;\n\n    for (var i = 0; i < dash.length; ++i) {\n      blockLength += dash[i];\n    }\n\n    if (dash.length % 2 === 1) {\n      // [4, 2, 1] means |----  -    -- |----  -    -- |\n      // So total length is (4 + 2 + 1) * 2\n      return blockLength * 2;\n    }\n\n    return blockLength;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function decalVisual(ecModel, api) {\n    ecModel.eachRawSeries(function (seriesModel) {\n      if (ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n\n      if (data.hasItemVisual()) {\n        data.each(function (idx) {\n          var decal = data.getItemVisual(idx, 'decal');\n\n          if (decal) {\n            var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\n            itemStyle.decal = createOrUpdatePatternFromDecal(decal, api);\n          }\n        });\n      }\n\n      var decal = data.getVisual('decal');\n\n      if (decal) {\n        var style = data.getVisual('style');\n        style.decal = createOrUpdatePatternFromDecal(decal, api);\n      }\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var lifecycle = new Eventful();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // The implentations will be registered when installing the component.\n  // Avoid these code being bundled to the core module.\n\n  var implsStore = {}; // TODO Type\n\n  function registerImpl(name, impl) {\n    {\n      if (implsStore[name]) {\n        error(\"Already has an implementation of \" + name + \".\");\n      }\n    }\n    implsStore[name] = impl;\n  }\n\n  function getImpl(name) {\n    {\n      if (!implsStore[name]) {\n        error(\"Implementation of \" + name + \" doesn't exists.\");\n      }\n    }\n    return implsStore[name];\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var hasWindow = typeof window !== 'undefined';\n  var version = '5.3.3';\n  var dependencies = {\n    zrender: '5.3.2'\n  };\n  var TEST_FRAME_REMAIN_TIME = 1;\n  var PRIORITY_PROCESSOR_SERIES_FILTER = 800; // Some data processors depends on the stack result dimension (to calculate data extent).\n  // So data stack stage should be in front of data processing stage.\n\n  var PRIORITY_PROCESSOR_DATASTACK = 900; // \"Data filter\" will block the stream, so it should be\n  // put at the begining of data processing.\n\n  var PRIORITY_PROCESSOR_FILTER = 1000;\n  var PRIORITY_PROCESSOR_DEFAULT = 2000;\n  var PRIORITY_PROCESSOR_STATISTIC = 5000;\n  var PRIORITY_VISUAL_LAYOUT = 1000;\n  var PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\n  var PRIORITY_VISUAL_GLOBAL = 2000;\n  var PRIORITY_VISUAL_CHART = 3000;\n  var PRIORITY_VISUAL_COMPONENT = 4000; // Visual property in data. Greater than `PRIORITY_VISUAL_COMPONENT` to enable to\n  // overwrite the viusal result of component (like `visualMap`)\n  // using data item specific setting (like itemStyle.xxx on data item)\n\n  var PRIORITY_VISUAL_CHART_DATA_CUSTOM = 4500; // Greater than `PRIORITY_VISUAL_CHART_DATA_CUSTOM` to enable to layout based on\n  // visual result like `symbolSize`.\n\n  var PRIORITY_VISUAL_POST_CHART_LAYOUT = 4600;\n  var PRIORITY_VISUAL_BRUSH = 5000;\n  var PRIORITY_VISUAL_ARIA = 6000;\n  var PRIORITY_VISUAL_DECAL = 7000;\n  var PRIORITY = {\n    PROCESSOR: {\n      FILTER: PRIORITY_PROCESSOR_FILTER,\n      SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\n      STATISTIC: PRIORITY_PROCESSOR_STATISTIC\n    },\n    VISUAL: {\n      LAYOUT: PRIORITY_VISUAL_LAYOUT,\n      PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\n      GLOBAL: PRIORITY_VISUAL_GLOBAL,\n      CHART: PRIORITY_VISUAL_CHART,\n      POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\n      COMPONENT: PRIORITY_VISUAL_COMPONENT,\n      BRUSH: PRIORITY_VISUAL_BRUSH,\n      CHART_ITEM: PRIORITY_VISUAL_CHART_DATA_CUSTOM,\n      ARIA: PRIORITY_VISUAL_ARIA,\n      DECAL: PRIORITY_VISUAL_DECAL\n    }\n  }; // Main process have three entries: `setOption`, `dispatchAction` and `resize`,\n  // where they must not be invoked nestedly, except the only case: invoke\n  // dispatchAction with updateMethod \"none\" in main process.\n  // This flag is used to carry out this rule.\n  // All events will be triggered out side main process (i.e. when !this[IN_MAIN_PROCESS]).\n\n  var IN_MAIN_PROCESS_KEY = '__flagInMainProcess';\n  var PENDING_UPDATE = '__pendingUpdate';\n  var STATUS_NEEDS_UPDATE_KEY = '__needsUpdateStatus';\n  var ACTION_REG = /^[a-zA-Z0-9_]+$/;\n  var CONNECT_STATUS_KEY = '__connectUpdateStatus';\n  var CONNECT_STATUS_PENDING = 0;\n  var CONNECT_STATUS_UPDATING = 1;\n  var CONNECT_STATUS_UPDATED = 2;\n\n  function createRegisterEventWithLowercaseECharts(method) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      if (this.isDisposed()) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      return toLowercaseNameAndCallEventful(this, method, args);\n    };\n  }\n\n  function createRegisterEventWithLowercaseMessageCenter(method) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return toLowercaseNameAndCallEventful(this, method, args);\n    };\n  }\n\n  function toLowercaseNameAndCallEventful(host, method, args) {\n    // `args[0]` is event name. Event name is all lowercase.\n    args[0] = args[0] && args[0].toLowerCase();\n    return Eventful.prototype[method].apply(host, args);\n  }\n\n  var MessageCenter =\n  /** @class */\n  function (_super) {\n    __extends(MessageCenter, _super);\n\n    function MessageCenter() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    return MessageCenter;\n  }(Eventful);\n\n  var messageCenterProto = MessageCenter.prototype;\n  messageCenterProto.on = createRegisterEventWithLowercaseMessageCenter('on');\n  messageCenterProto.off = createRegisterEventWithLowercaseMessageCenter('off'); // ---------------------------------------\n  // Internal method names for class ECharts\n  // ---------------------------------------\n\n  var prepare;\n  var prepareView;\n  var updateDirectly;\n  var updateMethods;\n  var doConvertPixel;\n  var updateStreamModes;\n  var doDispatchAction;\n  var flushPendingActions;\n  var triggerUpdatedEvent;\n  var bindRenderedEvent;\n  var bindMouseEvent;\n  var render;\n  var renderComponents;\n  var renderSeries;\n  var createExtensionAPI;\n  var enableConnect;\n  var markStatusToUpdate;\n  var applyChangedStates;\n\n  var ECharts =\n  /** @class */\n  function (_super) {\n    __extends(ECharts, _super);\n\n    function ECharts(dom, // Theme name or themeOption.\n    theme$$1, opts) {\n      var _this = _super.call(this, new ECEventProcessor()) || this;\n\n      _this._chartsViews = [];\n      _this._chartsMap = {};\n      _this._componentsViews = [];\n      _this._componentsMap = {}; // Can't dispatch action during rendering procedure\n\n      _this._pendingActions = [];\n      opts = opts || {}; // Get theme by name\n\n      if (isString(theme$$1)) {\n        theme$$1 = themeStorage[theme$$1];\n      }\n\n      _this._dom = dom;\n      var defaultRenderer = 'canvas';\n      var defaultUseDirtyRect = false;\n      {\n        var root =\n        /* eslint-disable-next-line */\n        hasWindow ? window : global;\n        defaultRenderer = root.__ECHARTS__DEFAULT__RENDERER__ || defaultRenderer;\n        var devUseDirtyRect = root.__ECHARTS__DEFAULT__USE_DIRTY_RECT__;\n        defaultUseDirtyRect = devUseDirtyRect == null ? defaultUseDirtyRect : devUseDirtyRect;\n      }\n      var zr = _this._zr = init$1(dom, {\n        renderer: opts.renderer || defaultRenderer,\n        devicePixelRatio: opts.devicePixelRatio,\n        width: opts.width,\n        height: opts.height,\n        ssr: opts.ssr,\n        useDirtyRect: opts.useDirtyRect == null ? defaultUseDirtyRect : opts.useDirtyRect\n      });\n      _this._ssr = opts.ssr; // Expect 60 fps.\n\n      _this._throttledZrFlush = throttle(bind(zr.flush, zr), 17);\n      theme$$1 = clone(theme$$1);\n      theme$$1 && globalBackwardCompat(theme$$1, true);\n      _this._theme = theme$$1;\n      _this._locale = createLocaleObject(opts.locale || SYSTEM_LANG);\n      _this._coordSysMgr = new CoordinateSystemManager();\n      var api = _this._api = createExtensionAPI(_this); // Sort on demand\n\n      function prioritySortFunc(a, b) {\n        return a.__prio - b.__prio;\n      }\n\n      sort(visualFuncs, prioritySortFunc);\n      sort(dataProcessorFuncs, prioritySortFunc);\n      _this._scheduler = new Scheduler(_this, api, dataProcessorFuncs, visualFuncs);\n      _this._messageCenter = new MessageCenter(); // Init mouse events\n\n      _this._initEvents(); // In case some people write `window.onresize = chart.resize`\n\n\n      _this.resize = bind(_this.resize, _this);\n      zr.animation.on('frame', _this._onframe, _this);\n      bindRenderedEvent(zr, _this);\n      bindMouseEvent(zr, _this); // ECharts instance can be used as value.\n\n      setAsPrimitive(_this);\n      return _this;\n    }\n\n    ECharts.prototype._onframe = function () {\n      if (this._disposed) {\n        return;\n      }\n\n      applyChangedStates(this);\n      var scheduler = this._scheduler; // Lazy update\n\n      if (this[PENDING_UPDATE]) {\n        var silent = this[PENDING_UPDATE].silent;\n        this[IN_MAIN_PROCESS_KEY] = true;\n\n        try {\n          prepare(this);\n          updateMethods.update.call(this, null, this[PENDING_UPDATE].updateParams);\n        } catch (e) {\n          this[IN_MAIN_PROCESS_KEY] = false;\n          this[PENDING_UPDATE] = null;\n          throw e;\n        } // At present, in each frame, zrender performs:\n        //   (1) animation step forward.\n        //   (2) trigger('frame') (where this `_onframe` is called)\n        //   (3) zrender flush (render).\n        // If we do nothing here, since we use `setToFinal: true`, the step (3) above\n        // will render the final state of the elements before the real animation started.\n\n\n        this._zr.flush();\n\n        this[IN_MAIN_PROCESS_KEY] = false;\n        this[PENDING_UPDATE] = null;\n        flushPendingActions.call(this, silent);\n        triggerUpdatedEvent.call(this, silent);\n      } // Avoid do both lazy update and progress in one frame.\n      else if (scheduler.unfinished) {\n          // Stream progress.\n          var remainTime = TEST_FRAME_REMAIN_TIME;\n          var ecModel = this._model;\n          var api = this._api;\n          scheduler.unfinished = false;\n\n          do {\n            var startTime = +new Date();\n            scheduler.performSeriesTasks(ecModel); // Currently dataProcessorFuncs do not check threshold.\n\n            scheduler.performDataProcessorTasks(ecModel);\n            updateStreamModes(this, ecModel); // Do not update coordinate system here. Because that coord system update in\n            // each frame is not a good user experience. So we follow the rule that\n            // the extent of the coordinate system is determin in the first frame (the\n            // frame is executed immedietely after task reset.\n            // this._coordSysMgr.update(ecModel, api);\n            // console.log('--- ec frame visual ---', remainTime);\n\n            scheduler.performVisualTasks(ecModel);\n            renderSeries(this, this._model, api, 'remain', {});\n            remainTime -= +new Date() - startTime;\n          } while (remainTime > 0 && scheduler.unfinished); // Call flush explicitly for trigger finished event.\n\n\n          if (!scheduler.unfinished) {\n            this._zr.flush();\n          } // Else, zr flushing be ensue within the same frame,\n          // because zr flushing is after onframe event.\n\n        }\n    };\n\n    ECharts.prototype.getDom = function () {\n      return this._dom;\n    };\n\n    ECharts.prototype.getId = function () {\n      return this.id;\n    };\n\n    ECharts.prototype.getZr = function () {\n      return this._zr;\n    };\n\n    ECharts.prototype.isSSR = function () {\n      return this._ssr;\n    };\n    /* eslint-disable-next-line */\n\n\n    ECharts.prototype.setOption = function (option, notMerge, lazyUpdate) {\n      if (this[IN_MAIN_PROCESS_KEY]) {\n        {\n          error('`setOption` should not be called during main process.');\n        }\n        return;\n      }\n\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      var silent;\n      var replaceMerge;\n      var transitionOpt;\n\n      if (isObject(notMerge)) {\n        lazyUpdate = notMerge.lazyUpdate;\n        silent = notMerge.silent;\n        replaceMerge = notMerge.replaceMerge;\n        transitionOpt = notMerge.transition;\n        notMerge = notMerge.notMerge;\n      }\n\n      this[IN_MAIN_PROCESS_KEY] = true;\n\n      if (!this._model || notMerge) {\n        var optionManager = new OptionManager(this._api);\n        var theme$$1 = this._theme;\n        var ecModel = this._model = new GlobalModel();\n        ecModel.scheduler = this._scheduler;\n        ecModel.ssr = this._ssr;\n        ecModel.init(null, null, null, theme$$1, this._locale, optionManager);\n      }\n\n      this._model.setOption(option, {\n        replaceMerge: replaceMerge\n      }, optionPreprocessorFuncs);\n\n      var updateParams = {\n        seriesTransition: transitionOpt,\n        optionChanged: true\n      };\n\n      if (lazyUpdate) {\n        this[PENDING_UPDATE] = {\n          silent: silent,\n          updateParams: updateParams\n        };\n        this[IN_MAIN_PROCESS_KEY] = false; // `setOption(option, {lazyMode: true})` may be called when zrender has been slept.\n        // It should wake it up to make sure zrender start to render at the next frame.\n\n        this.getZr().wakeUp();\n      } else {\n        try {\n          prepare(this);\n          updateMethods.update.call(this, null, updateParams);\n        } catch (e) {\n          this[PENDING_UPDATE] = null;\n          this[IN_MAIN_PROCESS_KEY] = false;\n          throw e;\n        } // Ensure zr refresh sychronously, and then pixel in canvas can be\n        // fetched after `setOption`.\n\n\n        if (!this._ssr) {\n          // not use flush when using ssr mode.\n          this._zr.flush();\n        }\n\n        this[PENDING_UPDATE] = null;\n        this[IN_MAIN_PROCESS_KEY] = false;\n        flushPendingActions.call(this, silent);\n        triggerUpdatedEvent.call(this, silent);\n      }\n    };\n    /**\n     * @deprecated\n     */\n\n\n    ECharts.prototype.setTheme = function () {\n      deprecateLog('ECharts#setTheme() is DEPRECATED in ECharts 3.0');\n    }; // We don't want developers to use getModel directly.\n\n\n    ECharts.prototype.getModel = function () {\n      return this._model;\n    };\n\n    ECharts.prototype.getOption = function () {\n      return this._model && this._model.getOption();\n    };\n\n    ECharts.prototype.getWidth = function () {\n      return this._zr.getWidth();\n    };\n\n    ECharts.prototype.getHeight = function () {\n      return this._zr.getHeight();\n    };\n\n    ECharts.prototype.getDevicePixelRatio = function () {\n      return this._zr.painter.dpr\n      /* eslint-disable-next-line */\n      || hasWindow && window.devicePixelRatio || 1;\n    };\n    /**\n     * Get canvas which has all thing rendered\n     * @deprecated Use renderToCanvas instead.\n     */\n\n\n    ECharts.prototype.getRenderedCanvas = function (opts) {\n      {\n        deprecateReplaceLog('getRenderedCanvas', 'renderToCanvas');\n      }\n      return this.renderToCanvas(opts);\n    };\n\n    ECharts.prototype.renderToCanvas = function (opts) {\n      opts = opts || {};\n      var painter = this._zr.painter;\n      {\n        if (painter.type !== 'canvas') {\n          throw new Error('renderToCanvas can only be used in the canvas renderer.');\n        }\n      }\n      return painter.getRenderedCanvas({\n        backgroundColor: opts.backgroundColor || this._model.get('backgroundColor'),\n        pixelRatio: opts.pixelRatio || this.getDevicePixelRatio()\n      });\n    };\n\n    ECharts.prototype.renderToSVGString = function (opts) {\n      opts = opts || {};\n      var painter = this._zr.painter;\n      {\n        if (painter.type !== 'svg') {\n          throw new Error('renderToSVGString can only be used in the svg renderer.');\n        }\n      }\n      return painter.renderToString({\n        useViewBox: opts.useViewBox\n      });\n    };\n    /**\n     * Get svg data url\n     */\n\n\n    ECharts.prototype.getSvgDataURL = function () {\n      if (!env.svgSupported) {\n        return;\n      }\n\n      var zr = this._zr;\n      var list = zr.storage.getDisplayList(); // Stop animations\n\n      each(list, function (el) {\n        el.stopAnimation(null, true);\n      });\n      return zr.painter.toDataURL();\n    };\n\n    ECharts.prototype.getDataURL = function (opts) {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      opts = opts || {};\n      var excludeComponents = opts.excludeComponents;\n      var ecModel = this._model;\n      var excludesComponentViews = [];\n      var self = this;\n      each(excludeComponents, function (componentType) {\n        ecModel.eachComponent({\n          mainType: componentType\n        }, function (component) {\n          var view = self._componentsMap[component.__viewId];\n\n          if (!view.group.ignore) {\n            excludesComponentViews.push(view);\n            view.group.ignore = true;\n          }\n        });\n      });\n      var url = this._zr.painter.getType() === 'svg' ? this.getSvgDataURL() : this.renderToCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\n      each(excludesComponentViews, function (view) {\n        view.group.ignore = false;\n      });\n      return url;\n    };\n\n    ECharts.prototype.getConnectedDataURL = function (opts) {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      var isSvg = opts.type === 'svg';\n      var groupId = this.group;\n      var mathMin = Math.min;\n      var mathMax = Math.max;\n      var MAX_NUMBER = Infinity;\n\n      if (connectedGroups[groupId]) {\n        var left_1 = MAX_NUMBER;\n        var top_1 = MAX_NUMBER;\n        var right_1 = -MAX_NUMBER;\n        var bottom_1 = -MAX_NUMBER;\n        var canvasList_1 = [];\n        var dpr_1 = opts && opts.pixelRatio || this.getDevicePixelRatio();\n        each(instances, function (chart, id) {\n          if (chart.group === groupId) {\n            var canvas = isSvg ? chart.getZr().painter.getSvgDom().innerHTML : chart.renderToCanvas(clone(opts));\n            var boundingRect = chart.getDom().getBoundingClientRect();\n            left_1 = mathMin(boundingRect.left, left_1);\n            top_1 = mathMin(boundingRect.top, top_1);\n            right_1 = mathMax(boundingRect.right, right_1);\n            bottom_1 = mathMax(boundingRect.bottom, bottom_1);\n            canvasList_1.push({\n              dom: canvas,\n              left: boundingRect.left,\n              top: boundingRect.top\n            });\n          }\n        });\n        left_1 *= dpr_1;\n        top_1 *= dpr_1;\n        right_1 *= dpr_1;\n        bottom_1 *= dpr_1;\n        var width = right_1 - left_1;\n        var height = bottom_1 - top_1;\n        var targetCanvas = platformApi.createCanvas();\n        var zr_1 = init$1(targetCanvas, {\n          renderer: isSvg ? 'svg' : 'canvas'\n        });\n        zr_1.resize({\n          width: width,\n          height: height\n        });\n\n        if (isSvg) {\n          var content_1 = '';\n          each(canvasList_1, function (item) {\n            var x = item.left - left_1;\n            var y = item.top - top_1;\n            content_1 += '<g transform=\"translate(' + x + ',' + y + ')\">' + item.dom + '</g>';\n          });\n          zr_1.painter.getSvgRoot().innerHTML = content_1;\n\n          if (opts.connectedBackgroundColor) {\n            zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor);\n          }\n\n          zr_1.refreshImmediately();\n          return zr_1.painter.toDataURL();\n        } else {\n          // Background between the charts\n          if (opts.connectedBackgroundColor) {\n            zr_1.add(new Rect({\n              shape: {\n                x: 0,\n                y: 0,\n                width: width,\n                height: height\n              },\n              style: {\n                fill: opts.connectedBackgroundColor\n              }\n            }));\n          }\n\n          each(canvasList_1, function (item) {\n            var img = new ZRImage({\n              style: {\n                x: item.left * dpr_1 - left_1,\n                y: item.top * dpr_1 - top_1,\n                image: item.dom\n              }\n            });\n            zr_1.add(img);\n          });\n          zr_1.refreshImmediately();\n          return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\n        }\n      } else {\n        return this.getDataURL(opts);\n      }\n    };\n\n    ECharts.prototype.convertToPixel = function (finder, value) {\n      return doConvertPixel(this, 'convertToPixel', finder, value);\n    };\n\n    ECharts.prototype.convertFromPixel = function (finder, value) {\n      return doConvertPixel(this, 'convertFromPixel', finder, value);\n    };\n    /**\n     * Is the specified coordinate systems or components contain the given pixel point.\n     * @param {Array|number} value\n     * @return {boolean} result\n     */\n\n\n    ECharts.prototype.containPixel = function (finder, value) {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      var ecModel = this._model;\n      var result;\n      var findResult = parseFinder(ecModel, finder);\n      each(findResult, function (models, key) {\n        key.indexOf('Models') >= 0 && each(models, function (model) {\n          var coordSys = model.coordinateSystem;\n\n          if (coordSys && coordSys.containPoint) {\n            result = result || !!coordSys.containPoint(value);\n          } else if (key === 'seriesModels') {\n            var view = this._chartsMap[model.__viewId];\n\n            if (view && view.containPoint) {\n              result = result || view.containPoint(value, model);\n            } else {\n              {\n                console.warn(key + ': ' + (view ? 'The found component do not support containPoint.' : 'No view mapping to the found component.'));\n              }\n            }\n          } else {\n            {\n              console.warn(key + ': containPoint is not supported');\n            }\n          }\n        }, this);\n      }, this);\n      return !!result;\n    };\n    /**\n     * Get visual from series or data.\n     * @param finder\n     *        If string, e.g., 'series', means {seriesIndex: 0}.\n     *        If Object, could contain some of these properties below:\n     *        {\n     *            seriesIndex / seriesId / seriesName,\n     *            dataIndex / dataIndexInside\n     *        }\n     *        If dataIndex is not specified, series visual will be fetched,\n     *        but not data item visual.\n     *        If all of seriesIndex, seriesId, seriesName are not specified,\n     *        visual will be fetched from first series.\n     * @param visualType 'color', 'symbol', 'symbolSize'\n     */\n\n\n    ECharts.prototype.getVisual = function (finder, visualType) {\n      var ecModel = this._model;\n      var parsedFinder = parseFinder(ecModel, finder, {\n        defaultMainType: 'series'\n      });\n      var seriesModel = parsedFinder.seriesModel;\n      {\n        if (!seriesModel) {\n          console.warn('There is no specified seires model');\n        }\n      }\n      var data = seriesModel.getData();\n      var dataIndexInside = parsedFinder.hasOwnProperty('dataIndexInside') ? parsedFinder.dataIndexInside : parsedFinder.hasOwnProperty('dataIndex') ? data.indexOfRawIndex(parsedFinder.dataIndex) : null;\n      return dataIndexInside != null ? getItemVisualFromData(data, dataIndexInside, visualType) : getVisualFromData(data, visualType);\n    };\n    /**\n     * Get view of corresponding component model\n     */\n\n\n    ECharts.prototype.getViewOfComponentModel = function (componentModel) {\n      return this._componentsMap[componentModel.__viewId];\n    };\n    /**\n     * Get view of corresponding series model\n     */\n\n\n    ECharts.prototype.getViewOfSeriesModel = function (seriesModel) {\n      return this._chartsMap[seriesModel.__viewId];\n    };\n\n    ECharts.prototype._initEvents = function () {\n      var _this = this;\n\n      each(MOUSE_EVENT_NAMES, function (eveName) {\n        var handler = function (e) {\n          var ecModel = _this.getModel();\n\n          var el = e.target;\n          var params;\n          var isGlobalOut = eveName === 'globalout'; // no e.target when 'globalout'.\n\n          if (isGlobalOut) {\n            params = {};\n          } else {\n            el && findEventDispatcher(el, function (parent) {\n              var ecData = getECData(parent);\n\n              if (ecData && ecData.dataIndex != null) {\n                var dataModel = ecData.dataModel || ecModel.getSeriesByIndex(ecData.seriesIndex);\n                params = dataModel && dataModel.getDataParams(ecData.dataIndex, ecData.dataType) || {};\n                return true;\n              } // If element has custom eventData of components\n              else if (ecData.eventData) {\n                  params = extend({}, ecData.eventData);\n                  return true;\n                }\n            }, true);\n          } // Contract: if params prepared in mouse event,\n          // these properties must be specified:\n          // {\n          //    componentType: string (component main type)\n          //    componentIndex: number\n          // }\n          // Otherwise event query can not work.\n\n\n          if (params) {\n            var componentType = params.componentType;\n            var componentIndex = params.componentIndex; // Special handling for historic reason: when trigger by\n            // markLine/markPoint/markArea, the componentType is\n            // 'markLine'/'markPoint'/'markArea', but we should better\n            // enable them to be queried by seriesIndex, since their\n            // option is set in each series.\n\n            if (componentType === 'markLine' || componentType === 'markPoint' || componentType === 'markArea') {\n              componentType = 'series';\n              componentIndex = params.seriesIndex;\n            }\n\n            var model = componentType && componentIndex != null && ecModel.getComponent(componentType, componentIndex);\n            var view = model && _this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\n            {\n              // `event.componentType` and `event[componentTpype + 'Index']` must not\n              // be missed, otherwise there is no way to distinguish source component.\n              // See `dataFormat.getDataParams`.\n              if (!isGlobalOut && !(model && view)) {\n                console.warn('model or view can not be found by params');\n              }\n            }\n            params.event = e;\n            params.type = eveName;\n            _this._$eventProcessor.eventInfo = {\n              targetEl: el,\n              packedEvent: params,\n              model: model,\n              view: view\n            };\n\n            _this.trigger(eveName, params);\n          }\n        }; // Consider that some component (like tooltip, brush, ...)\n        // register zr event handler, but user event handler might\n        // do anything, such as call `setOption` or `dispatchAction`,\n        // which probably update any of the content and probably\n        // cause problem if it is called previous other inner handlers.\n\n\n        handler.zrEventfulCallAtLast = true;\n\n        _this._zr.on(eveName, handler, _this);\n      });\n      each(eventActionMap, function (actionType, eventType) {\n        _this._messageCenter.on(eventType, function (event) {\n          this.trigger(eventType, event);\n        }, _this);\n      }); // Extra events\n      // TODO register?\n\n      each(['selectchanged'], function (eventType) {\n        _this._messageCenter.on(eventType, function (event) {\n          this.trigger(eventType, event);\n        }, _this);\n      });\n      handleLegacySelectEvents(this._messageCenter, this, this._api);\n    };\n\n    ECharts.prototype.isDisposed = function () {\n      return this._disposed;\n    };\n\n    ECharts.prototype.clear = function () {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      this.setOption({\n        series: []\n      }, true);\n    };\n\n    ECharts.prototype.dispose = function () {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      this._disposed = true;\n      var dom = this.getDom();\n\n      if (dom) {\n        setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\n      }\n\n      var chart = this;\n      var api = chart._api;\n      var ecModel = chart._model;\n      each(chart._componentsViews, function (component) {\n        component.dispose(ecModel, api);\n      });\n      each(chart._chartsViews, function (chart) {\n        chart.dispose(ecModel, api);\n      }); // Dispose after all views disposed\n\n      chart._zr.dispose(); // Set properties to null.\n      // To reduce the memory cost in case the top code still holds this instance unexpectedly.\n\n\n      chart._dom = chart._model = chart._chartsMap = chart._componentsMap = chart._chartsViews = chart._componentsViews = chart._scheduler = chart._api = chart._zr = chart._throttledZrFlush = chart._theme = chart._coordSysMgr = chart._messageCenter = null;\n      delete instances[chart.id];\n    };\n    /**\n     * Resize the chart\n     */\n\n\n    ECharts.prototype.resize = function (opts) {\n      if (this[IN_MAIN_PROCESS_KEY]) {\n        {\n          error('`resize` should not be called during main process.');\n        }\n        return;\n      }\n\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      this._zr.resize(opts);\n\n      var ecModel = this._model; // Resize loading effect\n\n      this._loadingFX && this._loadingFX.resize();\n\n      if (!ecModel) {\n        return;\n      }\n\n      var needPrepare = ecModel.resetOption('media');\n      var silent = opts && opts.silent; // There is some real cases that:\n      // chart.setOption(option, { lazyUpdate: true });\n      // chart.resize();\n\n      if (this[PENDING_UPDATE]) {\n        if (silent == null) {\n          silent = this[PENDING_UPDATE].silent;\n        }\n\n        needPrepare = true;\n        this[PENDING_UPDATE] = null;\n      }\n\n      this[IN_MAIN_PROCESS_KEY] = true;\n\n      try {\n        needPrepare && prepare(this);\n        updateMethods.update.call(this, {\n          type: 'resize',\n          animation: extend({\n            // Disable animation\n            duration: 0\n          }, opts && opts.animation)\n        });\n      } catch (e) {\n        this[IN_MAIN_PROCESS_KEY] = false;\n        throw e;\n      }\n\n      this[IN_MAIN_PROCESS_KEY] = false;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    };\n\n    ECharts.prototype.showLoading = function (name, cfg) {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      if (isObject(name)) {\n        cfg = name;\n        name = '';\n      }\n\n      name = name || 'default';\n      this.hideLoading();\n\n      if (!loadingEffects[name]) {\n        {\n          console.warn('Loading effects ' + name + ' not exists.');\n        }\n        return;\n      }\n\n      var el = loadingEffects[name](this._api, cfg);\n      var zr = this._zr;\n      this._loadingFX = el;\n      zr.add(el);\n    };\n    /**\n     * Hide loading effect\n     */\n\n\n    ECharts.prototype.hideLoading = function () {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      this._loadingFX && this._zr.remove(this._loadingFX);\n      this._loadingFX = null;\n    };\n\n    ECharts.prototype.makeActionFromEvent = function (eventObj) {\n      var payload = extend({}, eventObj);\n      payload.type = eventActionMap[eventObj.type];\n      return payload;\n    };\n    /**\n     * @param opt If pass boolean, means opt.silent\n     * @param opt.silent Default `false`. Whether trigger events.\n     * @param opt.flush Default `undefined`.\n     *        true: Flush immediately, and then pixel in canvas can be fetched\n     *            immediately. Caution: it might affect performance.\n     *        false: Not flush.\n     *        undefined: Auto decide whether perform flush.\n     */\n\n\n    ECharts.prototype.dispatchAction = function (payload, opt) {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      if (!isObject(opt)) {\n        opt = {\n          silent: !!opt\n        };\n      }\n\n      if (!actions[payload.type]) {\n        return;\n      } // Avoid dispatch action before setOption. Especially in `connect`.\n\n\n      if (!this._model) {\n        return;\n      } // May dispatchAction in rendering procedure\n\n\n      if (this[IN_MAIN_PROCESS_KEY]) {\n        this._pendingActions.push(payload);\n\n        return;\n      }\n\n      var silent = opt.silent;\n      doDispatchAction.call(this, payload, silent);\n      var flush = opt.flush;\n\n      if (flush) {\n        this._zr.flush();\n      } else if (flush !== false && env.browser.weChat) {\n        // In WeChat embeded browser, `requestAnimationFrame` and `setInterval`\n        // hang when sliding page (on touch event), which cause that zr does not\n        // refresh util user interaction finished, which is not expected.\n        // But `dispatchAction` may be called too frequently when pan on touch\n        // screen, which impacts performance if do not throttle them.\n        this._throttledZrFlush();\n      }\n\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    };\n\n    ECharts.prototype.updateLabelLayout = function () {\n      lifecycle.trigger('series:layoutlabels', this._model, this._api, {\n        // Not adding series labels.\n        // TODO\n        updatedSeries: []\n      });\n    };\n\n    ECharts.prototype.appendData = function (params) {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      var seriesIndex = params.seriesIndex;\n      var ecModel = this.getModel();\n      var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n      {\n        assert(params.data && seriesModel);\n      }\n      seriesModel.appendData(params); // Note: `appendData` does not support that update extent of coordinate\n      // system, util some scenario require that. In the expected usage of\n      // `appendData`, the initial extent of coordinate system should better\n      // be fixed by axis `min`/`max` setting or initial data, otherwise if\n      // the extent changed while `appendData`, the location of the painted\n      // graphic elements have to be changed, which make the usage of\n      // `appendData` meaningless.\n\n      this._scheduler.unfinished = true;\n      this.getZr().wakeUp();\n    }; // A work around for no `internal` modifier in ts yet but\n    // need to strictly hide private methods to JS users.\n\n\n    ECharts.internalField = function () {\n      prepare = function (ecIns) {\n        var scheduler = ecIns._scheduler;\n        scheduler.restorePipelines(ecIns._model);\n        scheduler.prepareStageTasks();\n        prepareView(ecIns, true);\n        prepareView(ecIns, false);\n        scheduler.plan();\n      };\n      /**\n       * Prepare view instances of charts and components\n       */\n\n\n      prepareView = function (ecIns, isComponent) {\n        var ecModel = ecIns._model;\n        var scheduler = ecIns._scheduler;\n        var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\n        var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\n        var zr = ecIns._zr;\n        var api = ecIns._api;\n\n        for (var i = 0; i < viewList.length; i++) {\n          viewList[i].__alive = false;\n        }\n\n        isComponent ? ecModel.eachComponent(function (componentType, model) {\n          componentType !== 'series' && doPrepare(model);\n        }) : ecModel.eachSeries(doPrepare);\n\n        function doPrepare(model) {\n          // By defaut view will be reused if possible for the case that `setOption` with \"notMerge\"\n          // mode and need to enable transition animation. (Usually, when they have the same id, or\n          // especially no id but have the same type & name & index. See the `model.id` generation\n          // rule in `makeIdAndName` and `viewId` generation rule here).\n          // But in `replaceMerge` mode, this feature should be able to disabled when it is clear that\n          // the new model has nothing to do with the old model.\n          var requireNewView = model.__requireNewView; // This command should not work twice.\n\n          model.__requireNewView = false; // Consider: id same and type changed.\n\n          var viewId = '_ec_' + model.id + '_' + model.type;\n          var view = !requireNewView && viewMap[viewId];\n\n          if (!view) {\n            var classType = parseClassType(model.type);\n            var Clazz = isComponent ? ComponentView.getClass(classType.main, classType.sub) : // FIXME:TS\n            // (ChartView as ChartViewConstructor).getClass('series', classType.sub)\n            // For backward compat, still support a chart type declared as only subType\n            // like \"liquidfill\", but recommend \"series.liquidfill\"\n            // But need a base class to make a type series.\n            ChartView.getClass(classType.sub);\n            {\n              assert(Clazz, classType.sub + ' does not exist.');\n            }\n            view = new Clazz();\n            view.init(ecModel, api);\n            viewMap[viewId] = view;\n            viewList.push(view);\n            zr.add(view.group);\n          }\n\n          model.__viewId = view.__id = viewId;\n          view.__alive = true;\n          view.__model = model;\n          view.group.__ecComponentInfo = {\n            mainType: model.mainType,\n            index: model.componentIndex\n          };\n          !isComponent && scheduler.prepareView(view, model, ecModel, api);\n        }\n\n        for (var i = 0; i < viewList.length;) {\n          var view = viewList[i];\n\n          if (!view.__alive) {\n            !isComponent && view.renderTask.dispose();\n            zr.remove(view.group);\n            view.dispose(ecModel, api);\n            viewList.splice(i, 1);\n\n            if (viewMap[view.__id] === view) {\n              delete viewMap[view.__id];\n            }\n\n            view.__id = view.group.__ecComponentInfo = null;\n          } else {\n            i++;\n          }\n        }\n      };\n\n      updateDirectly = function (ecIns, method, payload, mainType, subType) {\n        var ecModel = ecIns._model;\n        ecModel.setUpdatePayload(payload); // broadcast\n\n        if (!mainType) {\n          // FIXME\n          // Chart will not be update directly here, except set dirty.\n          // But there is no such scenario now.\n          each([].concat(ecIns._componentsViews).concat(ecIns._chartsViews), callView);\n          return;\n        }\n\n        var query = {};\n        query[mainType + 'Id'] = payload[mainType + 'Id'];\n        query[mainType + 'Index'] = payload[mainType + 'Index'];\n        query[mainType + 'Name'] = payload[mainType + 'Name'];\n        var condition = {\n          mainType: mainType,\n          query: query\n        };\n        subType && (condition.subType = subType); // subType may be '' by parseClassType;\n\n        var excludeSeriesId = payload.excludeSeriesId;\n        var excludeSeriesIdMap;\n\n        if (excludeSeriesId != null) {\n          excludeSeriesIdMap = createHashMap();\n          each(normalizeToArray(excludeSeriesId), function (id) {\n            var modelId = convertOptionIdName(id, null);\n\n            if (modelId != null) {\n              excludeSeriesIdMap.set(modelId, true);\n            }\n          });\n        } // If dispatchAction before setOption, do nothing.\n\n\n        ecModel && ecModel.eachComponent(condition, function (model) {\n          var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) !== null;\n\n          if (isExcluded) {\n            return;\n          }\n\n          if (isHighDownPayload(payload)) {\n            if (model instanceof SeriesModel) {\n              if (payload.type === HIGHLIGHT_ACTION_TYPE && !payload.notBlur && !model.get(['emphasis', 'disabled'])) {\n                blurSeriesFromHighlightPayload(model, payload, ecIns._api);\n              }\n            } else {\n              var _a = findComponentHighDownDispatchers(model.mainType, model.componentIndex, payload.name, ecIns._api),\n                  focusSelf = _a.focusSelf,\n                  dispatchers = _a.dispatchers;\n\n              if (payload.type === HIGHLIGHT_ACTION_TYPE && focusSelf && !payload.notBlur) {\n                blurComponent(model.mainType, model.componentIndex, ecIns._api);\n              } // PENDING:\n              // Whether to put this \"enter emphasis\" code in `ComponentView`,\n              // which will be the same as `ChartView` but might be not necessary\n              // and will be far from this logic.\n\n\n              if (dispatchers) {\n                each(dispatchers, function (dispatcher) {\n                  payload.type === HIGHLIGHT_ACTION_TYPE ? enterEmphasis(dispatcher) : leaveEmphasis(dispatcher);\n                });\n              }\n            }\n          } else if (isSelectChangePayload(payload)) {\n            // TODO geo\n            if (model instanceof SeriesModel) {\n              toggleSelectionFromPayload(model, payload, ecIns._api);\n              updateSeriesElementSelection(model);\n              markStatusToUpdate(ecIns);\n            }\n          }\n        }, ecIns);\n        ecModel && ecModel.eachComponent(condition, function (model) {\n          var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) !== null;\n\n          if (isExcluded) {\n            return;\n          }\n\n          callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\n        }, ecIns);\n\n        function callView(view) {\n          view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\n        }\n      };\n\n      updateMethods = {\n        prepareAndUpdate: function (payload) {\n          prepare(this);\n          updateMethods.update.call(this, payload, {\n            // Needs to mark option changed if newOption is given.\n            // It's from MagicType.\n            // TODO If use a separate flag optionChanged in payload?\n            optionChanged: payload.newOption != null\n          });\n        },\n        update: function (payload, updateParams) {\n          var ecModel = this._model;\n          var api = this._api;\n          var zr = this._zr;\n          var coordSysMgr = this._coordSysMgr;\n          var scheduler = this._scheduler; // update before setOption\n\n          if (!ecModel) {\n            return;\n          }\n\n          ecModel.setUpdatePayload(payload);\n          scheduler.restoreData(ecModel, payload);\n          scheduler.performSeriesTasks(ecModel); // TODO\n          // Save total ecModel here for undo/redo (after restoring data and before processing data).\n          // Undo (restoration of total ecModel) can be carried out in 'action' or outside API call.\n          // Create new coordinate system each update\n          // In LineView may save the old coordinate system and use it to get the orignal point\n\n          coordSysMgr.create(ecModel, api);\n          scheduler.performDataProcessorTasks(ecModel, payload); // Current stream render is not supported in data process. So we can update\n          // stream modes after data processing, where the filtered data is used to\n          // deteming whether use progressive rendering.\n\n          updateStreamModes(this, ecModel); // We update stream modes before coordinate system updated, then the modes info\n          // can be fetched when coord sys updating (consider the barGrid extent fix). But\n          // the drawback is the full coord info can not be fetched. Fortunately this full\n          // coord is not requied in stream mode updater currently.\n\n          coordSysMgr.update(ecModel, api);\n          clearColorPalette(ecModel);\n          scheduler.performVisualTasks(ecModel, payload);\n          render(this, ecModel, api, payload, updateParams); // Set background\n\n          var backgroundColor = ecModel.get('backgroundColor') || 'transparent';\n          var darkMode = ecModel.get('darkMode');\n          zr.setBackgroundColor(backgroundColor); // Force set dark mode.\n\n          if (darkMode != null && darkMode !== 'auto') {\n            zr.setDarkMode(darkMode);\n          }\n\n          lifecycle.trigger('afterupdate', ecModel, api);\n        },\n        updateTransform: function (payload) {\n          var _this = this;\n\n          var ecModel = this._model;\n          var api = this._api; // update before setOption\n\n          if (!ecModel) {\n            return;\n          }\n\n          ecModel.setUpdatePayload(payload); // ChartView.markUpdateMethod(payload, 'updateTransform');\n\n          var componentDirtyList = [];\n          ecModel.eachComponent(function (componentType, componentModel) {\n            if (componentType === 'series') {\n              return;\n            }\n\n            var componentView = _this.getViewOfComponentModel(componentModel);\n\n            if (componentView && componentView.__alive) {\n              if (componentView.updateTransform) {\n                var result = componentView.updateTransform(componentModel, ecModel, api, payload);\n                result && result.update && componentDirtyList.push(componentView);\n              } else {\n                componentDirtyList.push(componentView);\n              }\n            }\n          });\n          var seriesDirtyMap = createHashMap();\n          ecModel.eachSeries(function (seriesModel) {\n            var chartView = _this._chartsMap[seriesModel.__viewId];\n\n            if (chartView.updateTransform) {\n              var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\n              result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\n            } else {\n              seriesDirtyMap.set(seriesModel.uid, 1);\n            }\n          });\n          clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n          // this._scheduler.performVisualTasks(ecModel, payload, 'layout', true);\n\n          this._scheduler.performVisualTasks(ecModel, payload, {\n            setDirty: true,\n            dirtyMap: seriesDirtyMap\n          }); // Currently, not call render of components. Geo render cost a lot.\n          // renderComponents(ecIns, ecModel, api, payload, componentDirtyList);\n\n\n          renderSeries(this, ecModel, api, payload, {}, seriesDirtyMap);\n          lifecycle.trigger('afterupdate', ecModel, api);\n        },\n        updateView: function (payload) {\n          var ecModel = this._model; // update before setOption\n\n          if (!ecModel) {\n            return;\n          }\n\n          ecModel.setUpdatePayload(payload);\n          ChartView.markUpdateMethod(payload, 'updateView');\n          clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n\n          this._scheduler.performVisualTasks(ecModel, payload, {\n            setDirty: true\n          });\n\n          render(this, ecModel, this._api, payload, {});\n          lifecycle.trigger('afterupdate', ecModel, this._api);\n        },\n        updateVisual: function (payload) {\n          // updateMethods.update.call(this, payload);\n          var _this = this;\n\n          var ecModel = this._model; // update before setOption\n\n          if (!ecModel) {\n            return;\n          }\n\n          ecModel.setUpdatePayload(payload); // clear all visual\n\n          ecModel.eachSeries(function (seriesModel) {\n            seriesModel.getData().clearAllVisual();\n          }); // Perform visual\n\n          ChartView.markUpdateMethod(payload, 'updateVisual');\n          clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n\n          this._scheduler.performVisualTasks(ecModel, payload, {\n            visualType: 'visual',\n            setDirty: true\n          });\n\n          ecModel.eachComponent(function (componentType, componentModel) {\n            if (componentType !== 'series') {\n              var componentView = _this.getViewOfComponentModel(componentModel);\n\n              componentView && componentView.__alive && componentView.updateVisual(componentModel, ecModel, _this._api, payload);\n            }\n          });\n          ecModel.eachSeries(function (seriesModel) {\n            var chartView = _this._chartsMap[seriesModel.__viewId];\n            chartView.updateVisual(seriesModel, ecModel, _this._api, payload);\n          });\n          lifecycle.trigger('afterupdate', ecModel, this._api);\n        },\n        updateLayout: function (payload) {\n          updateMethods.update.call(this, payload);\n        }\n      };\n\n      doConvertPixel = function (ecIns, methodName, finder, value) {\n        if (ecIns._disposed) {\n          disposedWarning(ecIns.id);\n          return;\n        }\n\n        var ecModel = ecIns._model;\n\n        var coordSysList = ecIns._coordSysMgr.getCoordinateSystems();\n\n        var result;\n        var parsedFinder = parseFinder(ecModel, finder);\n\n        for (var i = 0; i < coordSysList.length; i++) {\n          var coordSys = coordSysList[i];\n\n          if (coordSys[methodName] && (result = coordSys[methodName](ecModel, parsedFinder, value)) != null) {\n            return result;\n          }\n        }\n\n        {\n          console.warn('No coordinate system that supports ' + methodName + ' found by the given finder.');\n        }\n      };\n\n      updateStreamModes = function (ecIns, ecModel) {\n        var chartsMap = ecIns._chartsMap;\n        var scheduler = ecIns._scheduler;\n        ecModel.eachSeries(function (seriesModel) {\n          scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\n        });\n      };\n\n      doDispatchAction = function (payload, silent) {\n        var _this = this;\n\n        var ecModel = this.getModel();\n        var payloadType = payload.type;\n        var escapeConnect = payload.escapeConnect;\n        var actionWrap = actions[payloadType];\n        var actionInfo = actionWrap.actionInfo;\n        var cptTypeTmp = (actionInfo.update || 'update').split(':');\n        var updateMethod = cptTypeTmp.pop();\n        var cptType = cptTypeTmp[0] != null && parseClassType(cptTypeTmp[0]);\n        this[IN_MAIN_PROCESS_KEY] = true;\n        var payloads = [payload];\n        var batched = false; // Batch action\n\n        if (payload.batch) {\n          batched = true;\n          payloads = map(payload.batch, function (item) {\n            item = defaults(extend({}, item), payload);\n            item.batch = null;\n            return item;\n          });\n        }\n\n        var eventObjBatch = [];\n        var eventObj;\n        var isSelectChange = isSelectChangePayload(payload);\n        var isHighDown = isHighDownPayload(payload); // Only leave blur once if there are multiple batches.\n\n        if (isHighDown) {\n          allLeaveBlur(this._api);\n        }\n\n        each(payloads, function (batchItem) {\n          // Action can specify the event by return it.\n          eventObj = actionWrap.action(batchItem, _this._model, _this._api); // Emit event outside\n\n          eventObj = eventObj || extend({}, batchItem); // Convert type to eventType\n\n          eventObj.type = actionInfo.event || eventObj.type;\n          eventObjBatch.push(eventObj); // light update does not perform data process, layout and visual.\n\n          if (isHighDown) {\n            var _a = preParseFinder(payload),\n                queryOptionMap = _a.queryOptionMap,\n                mainTypeSpecified = _a.mainTypeSpecified;\n\n            var componentMainType = mainTypeSpecified ? queryOptionMap.keys()[0] : 'series';\n            updateDirectly(_this, updateMethod, batchItem, componentMainType);\n            markStatusToUpdate(_this);\n          } else if (isSelectChange) {\n            // At present `dispatchAction({ type: 'select', ... })` is not supported on components.\n            // geo still use 'geoselect'.\n            updateDirectly(_this, updateMethod, batchItem, 'series');\n            markStatusToUpdate(_this);\n          } else if (cptType) {\n            updateDirectly(_this, updateMethod, batchItem, cptType.main, cptType.sub);\n          }\n        });\n\n        if (updateMethod !== 'none' && !isHighDown && !isSelectChange && !cptType) {\n          try {\n            // Still dirty\n            if (this[PENDING_UPDATE]) {\n              prepare(this);\n              updateMethods.update.call(this, payload);\n              this[PENDING_UPDATE] = null;\n            } else {\n              updateMethods[updateMethod].call(this, payload);\n            }\n          } catch (e) {\n            this[IN_MAIN_PROCESS_KEY] = false;\n            throw e;\n          }\n        } // Follow the rule of action batch\n\n\n        if (batched) {\n          eventObj = {\n            type: actionInfo.event || payloadType,\n            escapeConnect: escapeConnect,\n            batch: eventObjBatch\n          };\n        } else {\n          eventObj = eventObjBatch[0];\n        }\n\n        this[IN_MAIN_PROCESS_KEY] = false;\n\n        if (!silent) {\n          var messageCenter = this._messageCenter;\n          messageCenter.trigger(eventObj.type, eventObj); // Extra triggered 'selectchanged' event\n\n          if (isSelectChange) {\n            var newObj = {\n              type: 'selectchanged',\n              escapeConnect: escapeConnect,\n              selected: getAllSelectedIndices(ecModel),\n              isFromClick: payload.isFromClick || false,\n              fromAction: payload.type,\n              fromActionPayload: payload\n            };\n            messageCenter.trigger(newObj.type, newObj);\n          }\n        }\n      };\n\n      flushPendingActions = function (silent) {\n        var pendingActions = this._pendingActions;\n\n        while (pendingActions.length) {\n          var payload = pendingActions.shift();\n          doDispatchAction.call(this, payload, silent);\n        }\n      };\n\n      triggerUpdatedEvent = function (silent) {\n        !silent && this.trigger('updated');\n      };\n      /**\n       * Event `rendered` is triggered when zr\n       * rendered. It is useful for realtime\n       * snapshot (reflect animation).\n       *\n       * Event `finished` is triggered when:\n       * (1) zrender rendering finished.\n       * (2) initial animation finished.\n       * (3) progressive rendering finished.\n       * (4) no pending action.\n       * (5) no delayed setOption needs to be processed.\n       */\n\n\n      bindRenderedEvent = function (zr, ecIns) {\n        zr.on('rendered', function (params) {\n          ecIns.trigger('rendered', params); // The `finished` event should not be triggered repeatly,\n          // so it should only be triggered when rendering indeed happend\n          // in zrender. (Consider the case that dipatchAction is keep\n          // triggering when mouse move).\n\n          if ( // Although zr is dirty if initial animation is not finished\n          // and this checking is called on frame, we also check\n          // animation finished for robustness.\n          zr.animation.isFinished() && !ecIns[PENDING_UPDATE] && !ecIns._scheduler.unfinished && !ecIns._pendingActions.length) {\n            ecIns.trigger('finished');\n          }\n        });\n      };\n\n      bindMouseEvent = function (zr, ecIns) {\n        zr.on('mouseover', function (e) {\n          var el = e.target;\n          var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n\n          if (dispatcher) {\n            handleGlobalMouseOverForHighDown(dispatcher, e, ecIns._api);\n            markStatusToUpdate(ecIns);\n          }\n        }).on('mouseout', function (e) {\n          var el = e.target;\n          var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n\n          if (dispatcher) {\n            handleGlobalMouseOutForHighDown(dispatcher, e, ecIns._api);\n            markStatusToUpdate(ecIns);\n          }\n        }).on('click', function (e) {\n          var el = e.target;\n          var dispatcher = findEventDispatcher(el, function (target) {\n            return getECData(target).dataIndex != null;\n          }, true);\n\n          if (dispatcher) {\n            var actionType = dispatcher.selected ? 'unselect' : 'select';\n            var ecData = getECData(dispatcher);\n\n            ecIns._api.dispatchAction({\n              type: actionType,\n              dataType: ecData.dataType,\n              dataIndexInside: ecData.dataIndex,\n              seriesIndex: ecData.seriesIndex,\n              isFromClick: true\n            });\n          }\n        });\n      };\n\n      function clearColorPalette(ecModel) {\n        ecModel.clearColorPalette();\n        ecModel.eachSeries(function (seriesModel) {\n          seriesModel.clearColorPalette();\n        });\n      } // Allocate zlevels for series and components\n\n\n      function allocateZlevels(ecModel) {\n        var componentZLevels = [];\n        var seriesZLevels = [];\n        var hasSeperateZLevel = false;\n        ecModel.eachComponent(function (componentType, componentModel) {\n          var zlevel = componentModel.get('zlevel') || 0;\n          var z = componentModel.get('z') || 0;\n          var zlevelKey = componentModel.getZLevelKey();\n          hasSeperateZLevel = hasSeperateZLevel || !!zlevelKey;\n          (componentType === 'series' ? seriesZLevels : componentZLevels).push({\n            zlevel: zlevel,\n            z: z,\n            idx: componentModel.componentIndex,\n            type: componentType,\n            key: zlevelKey\n          });\n        });\n\n        if (hasSeperateZLevel) {\n          // Series after component\n          var zLevels = componentZLevels.concat(seriesZLevels);\n          var lastSeriesZLevel_1;\n          var lastSeriesKey_1;\n          sort(zLevels, function (a, b) {\n            if (a.zlevel === b.zlevel) {\n              return a.z - b.z;\n            }\n\n            return a.zlevel - b.zlevel;\n          });\n          each(zLevels, function (item) {\n            var componentModel = ecModel.getComponent(item.type, item.idx);\n            var zlevel = item.zlevel;\n            var key = item.key;\n\n            if (lastSeriesZLevel_1 != null) {\n              zlevel = Math.max(lastSeriesZLevel_1, zlevel);\n            }\n\n            if (key) {\n              if (zlevel === lastSeriesZLevel_1 && key !== lastSeriesKey_1) {\n                zlevel++;\n              }\n\n              lastSeriesKey_1 = key;\n            } else if (lastSeriesKey_1) {\n              if (zlevel === lastSeriesZLevel_1) {\n                zlevel++;\n              }\n\n              lastSeriesKey_1 = '';\n            }\n\n            lastSeriesZLevel_1 = zlevel;\n            componentModel.setZLevel(zlevel);\n          });\n        }\n      }\n\n      render = function (ecIns, ecModel, api, payload, updateParams) {\n        allocateZlevels(ecModel);\n        renderComponents(ecIns, ecModel, api, payload, updateParams);\n        each(ecIns._chartsViews, function (chart) {\n          chart.__alive = false;\n        });\n        renderSeries(ecIns, ecModel, api, payload, updateParams); // Remove groups of unrendered charts\n\n        each(ecIns._chartsViews, function (chart) {\n          if (!chart.__alive) {\n            chart.remove(ecModel, api);\n          }\n        });\n      };\n\n      renderComponents = function (ecIns, ecModel, api, payload, updateParams, dirtyList) {\n        each(dirtyList || ecIns._componentsViews, function (componentView) {\n          var componentModel = componentView.__model;\n          clearStates$$1(componentModel, componentView);\n          componentView.render(componentModel, ecModel, api, payload);\n          updateZ(componentModel, componentView);\n          updateStates(componentModel, componentView);\n        });\n      };\n      /**\n       * Render each chart and component\n       */\n\n\n      renderSeries = function (ecIns, ecModel, api, payload, updateParams, dirtyMap) {\n        // Render all charts\n        var scheduler = ecIns._scheduler;\n        updateParams = extend(updateParams || {}, {\n          updatedSeries: ecModel.getSeries()\n        }); // TODO progressive?\n\n        lifecycle.trigger('series:beforeupdate', ecModel, api, updateParams);\n        var unfinished = false;\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = ecIns._chartsMap[seriesModel.__viewId];\n          chartView.__alive = true;\n          var renderTask = chartView.renderTask;\n          scheduler.updatePayload(renderTask, payload); // TODO states on marker.\n\n          clearStates$$1(seriesModel, chartView);\n\n          if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\n            renderTask.dirty();\n          }\n\n          if (renderTask.perform(scheduler.getPerformArgs(renderTask))) {\n            unfinished = true;\n          }\n\n          chartView.group.silent = !!seriesModel.get('silent'); // Should not call markRedraw on group, because it will disable zrender\n          // increamental render (alway render from the __startIndex each frame)\n          // chartView.group.markRedraw();\n\n          updateBlend(seriesModel, chartView);\n          updateSeriesElementSelection(seriesModel);\n        });\n        scheduler.unfinished = unfinished || scheduler.unfinished;\n        lifecycle.trigger('series:layoutlabels', ecModel, api, updateParams); // transition after label is layouted.\n\n        lifecycle.trigger('series:transition', ecModel, api, updateParams);\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = ecIns._chartsMap[seriesModel.__viewId]; // Update Z after labels updated. Before applying states.\n\n          updateZ(seriesModel, chartView); // NOTE: Update states after label is updated.\n          // label should be in normal status when layouting.\n\n          updateStates(seriesModel, chartView);\n        }); // If use hover layer\n\n        updateHoverLayerStatus(ecIns, ecModel);\n        lifecycle.trigger('series:afterupdate', ecModel, api, updateParams);\n      };\n\n      markStatusToUpdate = function (ecIns) {\n        ecIns[STATUS_NEEDS_UPDATE_KEY] = true; // Wake up zrender if it's sleep. Let it update states in the next frame.\n\n        ecIns.getZr().wakeUp();\n      };\n\n      applyChangedStates = function (ecIns) {\n        if (!ecIns[STATUS_NEEDS_UPDATE_KEY]) {\n          return;\n        }\n\n        ecIns.getZr().storage.traverse(function (el) {\n          // Not applied on removed elements, it may still in fading.\n          if (isElementRemoved(el)) {\n            return;\n          }\n\n          applyElementStates(el);\n        });\n        ecIns[STATUS_NEEDS_UPDATE_KEY] = false;\n      };\n\n      function applyElementStates(el) {\n        var newStates = [];\n        var oldStates = el.currentStates; // Keep other states.\n\n        for (var i = 0; i < oldStates.length; i++) {\n          var stateName = oldStates[i];\n\n          if (!(stateName === 'emphasis' || stateName === 'blur' || stateName === 'select')) {\n            newStates.push(stateName);\n          }\n        } // Only use states when it's exists.\n\n\n        if (el.selected && el.states.select) {\n          newStates.push('select');\n        }\n\n        if (el.hoverState === HOVER_STATE_EMPHASIS && el.states.emphasis) {\n          newStates.push('emphasis');\n        } else if (el.hoverState === HOVER_STATE_BLUR && el.states.blur) {\n          newStates.push('blur');\n        }\n\n        el.useStates(newStates);\n      }\n\n      function updateHoverLayerStatus(ecIns, ecModel) {\n        var zr = ecIns._zr;\n        var storage = zr.storage;\n        var elCount = 0;\n        storage.traverse(function (el) {\n          if (!el.isGroup) {\n            elCount++;\n          }\n        });\n\n        if (elCount > ecModel.get('hoverLayerThreshold') && !env.node && !env.worker) {\n          ecModel.eachSeries(function (seriesModel) {\n            if (seriesModel.preventUsingHoverLayer) {\n              return;\n            }\n\n            var chartView = ecIns._chartsMap[seriesModel.__viewId];\n\n            if (chartView.__alive) {\n              chartView.eachRendered(function (el) {\n                if (el.states.emphasis) {\n                  el.states.emphasis.hoverLayer = true;\n                }\n              });\n            }\n          });\n        }\n      }\n      /**\n       * Update chart and blend.\n       */\n\n\n      function updateBlend(seriesModel, chartView) {\n        var blendMode = seriesModel.get('blendMode') || null;\n        chartView.eachRendered(function (el) {\n          // FIXME marker and other components\n          if (!el.isGroup) {\n            // DONT mark the element dirty. In case element is incremental and don't wan't to rerender.\n            el.style.blend = blendMode;\n          }\n        });\n      }\n\n      function updateZ(model, view) {\n        if (model.preventAutoZ) {\n          return;\n        }\n\n        var z = model.get('z') || 0;\n        var zlevel = model.get('zlevel') || 0; // Set z and zlevel\n\n        view.eachRendered(function (el) {\n          doUpdateZ(el, z, zlevel, -Infinity); // Don't traverse the children because it has been traversed in _updateZ.\n\n          return true;\n        });\n      }\n\n      function doUpdateZ(el, z, zlevel, maxZ2) {\n        // Group may also have textContent\n        var label = el.getTextContent();\n        var labelLine = el.getTextGuideLine();\n        var isGroup = el.isGroup;\n\n        if (isGroup) {\n          // set z & zlevel of children elements of Group\n          var children = el.childrenRef();\n\n          for (var i = 0; i < children.length; i++) {\n            maxZ2 = Math.max(doUpdateZ(children[i], z, zlevel, maxZ2), maxZ2);\n          }\n        } else {\n          // not Group\n          el.z = z;\n          el.zlevel = zlevel;\n          maxZ2 = Math.max(el.z2, maxZ2);\n        } // always set z and zlevel if label/labelLine exists\n\n\n        if (label) {\n          label.z = z;\n          label.zlevel = zlevel; // lift z2 of text content\n          // TODO if el.emphasis.z2 is spcefied, what about textContent.\n\n          isFinite(maxZ2) && (label.z2 = maxZ2 + 2);\n        }\n\n        if (labelLine) {\n          var textGuideLineConfig = el.textGuideLineConfig;\n          labelLine.z = z;\n          labelLine.zlevel = zlevel;\n          isFinite(maxZ2) && (labelLine.z2 = maxZ2 + (textGuideLineConfig && textGuideLineConfig.showAbove ? 1 : -1));\n        }\n\n        return maxZ2;\n      } // Clear states without animation.\n      // TODO States on component.\n\n\n      function clearStates$$1(model, view) {\n        view.eachRendered(function (el) {\n          // Not applied on removed elements, it may still in fading.\n          if (isElementRemoved(el)) {\n            return;\n          }\n\n          var textContent = el.getTextContent();\n          var textGuide = el.getTextGuideLine();\n\n          if (el.stateTransition) {\n            el.stateTransition = null;\n          }\n\n          if (textContent && textContent.stateTransition) {\n            textContent.stateTransition = null;\n          }\n\n          if (textGuide && textGuide.stateTransition) {\n            textGuide.stateTransition = null;\n          } // TODO If el is incremental.\n\n\n          if (el.hasState()) {\n            el.prevStates = el.currentStates;\n            el.clearStates();\n          } else if (el.prevStates) {\n            el.prevStates = null;\n          }\n        });\n      }\n\n      function updateStates(model, view) {\n        var stateAnimationModel = model.getModel('stateAnimation');\n        var enableAnimation = model.isAnimationEnabled();\n        var duration = stateAnimationModel.get('duration');\n        var stateTransition = duration > 0 ? {\n          duration: duration,\n          delay: stateAnimationModel.get('delay'),\n          easing: stateAnimationModel.get('easing') // additive: stateAnimationModel.get('additive')\n\n        } : null;\n        view.eachRendered(function (el) {\n          if (el.states && el.states.emphasis) {\n            // Not applied on removed elements, it may still in fading.\n            if (isElementRemoved(el)) {\n              return;\n            }\n\n            if (el instanceof Path) {\n              savePathStates(el);\n            } // Only updated on changed element. In case element is incremental and don't wan't to rerender.\n            // TODO, a more proper way?\n\n\n            if (el.__dirty) {\n              var prevStates = el.prevStates; // Restore states without animation\n\n              if (prevStates) {\n                el.useStates(prevStates);\n              }\n            } // Update state transition and enable animation again.\n\n\n            if (enableAnimation) {\n              el.stateTransition = stateTransition;\n              var textContent = el.getTextContent();\n              var textGuide = el.getTextGuideLine(); // TODO Is it necessary to animate label?\n\n              if (textContent) {\n                textContent.stateTransition = stateTransition;\n              }\n\n              if (textGuide) {\n                textGuide.stateTransition = stateTransition;\n              }\n            } // The use higlighted and selected flag to toggle states.\n\n\n            if (el.__dirty) {\n              applyElementStates(el);\n            }\n          }\n        });\n      }\n\n      createExtensionAPI = function (ecIns) {\n        return new (\n        /** @class */\n        function (_super) {\n          __extends(class_1, _super);\n\n          function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n          }\n\n          class_1.prototype.getCoordinateSystems = function () {\n            return ecIns._coordSysMgr.getCoordinateSystems();\n          };\n\n          class_1.prototype.getComponentByElement = function (el) {\n            while (el) {\n              var modelInfo = el.__ecComponentInfo;\n\n              if (modelInfo != null) {\n                return ecIns._model.getComponent(modelInfo.mainType, modelInfo.index);\n              }\n\n              el = el.parent;\n            }\n          };\n\n          class_1.prototype.enterEmphasis = function (el, highlightDigit) {\n            enterEmphasis(el, highlightDigit);\n            markStatusToUpdate(ecIns);\n          };\n\n          class_1.prototype.leaveEmphasis = function (el, highlightDigit) {\n            leaveEmphasis(el, highlightDigit);\n            markStatusToUpdate(ecIns);\n          };\n\n          class_1.prototype.enterBlur = function (el) {\n            enterBlur(el);\n            markStatusToUpdate(ecIns);\n          };\n\n          class_1.prototype.leaveBlur = function (el) {\n            leaveBlur(el);\n            markStatusToUpdate(ecIns);\n          };\n\n          class_1.prototype.enterSelect = function (el) {\n            enterSelect(el);\n            markStatusToUpdate(ecIns);\n          };\n\n          class_1.prototype.leaveSelect = function (el) {\n            leaveSelect(el);\n            markStatusToUpdate(ecIns);\n          };\n\n          class_1.prototype.getModel = function () {\n            return ecIns.getModel();\n          };\n\n          class_1.prototype.getViewOfComponentModel = function (componentModel) {\n            return ecIns.getViewOfComponentModel(componentModel);\n          };\n\n          class_1.prototype.getViewOfSeriesModel = function (seriesModel) {\n            return ecIns.getViewOfSeriesModel(seriesModel);\n          };\n\n          return class_1;\n        }(ExtensionAPI))(ecIns);\n      };\n\n      enableConnect = function (chart) {\n        function updateConnectedChartsStatus(charts, status) {\n          for (var i = 0; i < charts.length; i++) {\n            var otherChart = charts[i];\n            otherChart[CONNECT_STATUS_KEY] = status;\n          }\n        }\n\n        each(eventActionMap, function (actionType, eventType) {\n          chart._messageCenter.on(eventType, function (event) {\n            if (connectedGroups[chart.group] && chart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_PENDING) {\n              if (event && event.escapeConnect) {\n                return;\n              }\n\n              var action_1 = chart.makeActionFromEvent(event);\n              var otherCharts_1 = [];\n              each(instances, function (otherChart) {\n                if (otherChart !== chart && otherChart.group === chart.group) {\n                  otherCharts_1.push(otherChart);\n                }\n              });\n              updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_PENDING);\n              each(otherCharts_1, function (otherChart) {\n                if (otherChart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_UPDATING) {\n                  otherChart.dispatchAction(action_1);\n                }\n              });\n              updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_UPDATED);\n            }\n          });\n        });\n      };\n    }();\n\n    return ECharts;\n  }(Eventful);\n\n  var echartsProto = ECharts.prototype;\n  echartsProto.on = createRegisterEventWithLowercaseECharts('on');\n  echartsProto.off = createRegisterEventWithLowercaseECharts('off');\n  /**\n   * @deprecated\n   */\n  // @ts-ignore\n\n  echartsProto.one = function (eventName, cb, ctx) {\n    var self = this;\n    deprecateLog('ECharts#one is deprecated.');\n\n    function wrapped() {\n      var args2 = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args2[_i] = arguments[_i];\n      }\n\n      cb && cb.apply && cb.apply(this, args2); // @ts-ignore\n\n      self.off(eventName, wrapped);\n    } // @ts-ignore\n\n\n    this.on.call(this, eventName, wrapped, ctx);\n  };\n\n  var MOUSE_EVENT_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu'];\n\n  function disposedWarning(id) {\n    {\n      console.warn('Instance ' + id + ' has been disposed');\n    }\n  }\n\n  var actions = {};\n  /**\n   * Map eventType to actionType\n   */\n\n  var eventActionMap = {};\n  var dataProcessorFuncs = [];\n  var optionPreprocessorFuncs = [];\n  var visualFuncs = [];\n  var themeStorage = {};\n  var loadingEffects = {};\n  var instances = {};\n  var connectedGroups = {};\n  var idBase = +new Date() - 0;\n  var groupIdBase = +new Date() - 0;\n  var DOM_ATTRIBUTE_KEY = '_echarts_instance_';\n  /**\n   * @param opts.devicePixelRatio Use window.devicePixelRatio by default\n   * @param opts.renderer Can choose 'canvas' or 'svg' to render the chart.\n   * @param opts.width Use clientWidth of the input `dom` by default.\n   *        Can be 'auto' (the same as null/undefined)\n   * @param opts.height Use clientHeight of the input `dom` by default.\n   *        Can be 'auto' (the same as null/undefined)\n   * @param opts.locale Specify the locale.\n   * @param opts.useDirtyRect Enable dirty rectangle rendering or not.\n   */\n\n  function init(dom, theme$$1, opts) {\n    var isClient = !(opts && opts.ssr);\n\n    if (isClient) {\n      {\n        if (!dom) {\n          throw new Error('Initialize failed: invalid dom.');\n        }\n      }\n      var existInstance = getInstanceByDom(dom);\n\n      if (existInstance) {\n        {\n          console.warn('There is a chart instance already initialized on the dom.');\n        }\n        return existInstance;\n      }\n\n      {\n        if (isDom(dom) && dom.nodeName.toUpperCase() !== 'CANVAS' && (!dom.clientWidth && (!opts || opts.width == null) || !dom.clientHeight && (!opts || opts.height == null))) {\n          console.warn('Can\\'t get DOM width or height. Please check ' + 'dom.clientWidth and dom.clientHeight. They should not be 0.' + 'For example, you may need to call this in the callback ' + 'of window.onload.');\n        }\n      }\n    }\n\n    var chart = new ECharts(dom, theme$$1, opts);\n    chart.id = 'ec_' + idBase++;\n    instances[chart.id] = chart;\n    isClient && setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\n    enableConnect(chart);\n    lifecycle.trigger('afterinit', chart);\n    return chart;\n  }\n  /**\n   * @usage\n   * (A)\n   * ```js\n   * let chart1 = echarts.init(dom1);\n   * let chart2 = echarts.init(dom2);\n   * chart1.group = 'xxx';\n   * chart2.group = 'xxx';\n   * echarts.connect('xxx');\n   * ```\n   * (B)\n   * ```js\n   * let chart1 = echarts.init(dom1);\n   * let chart2 = echarts.init(dom2);\n   * echarts.connect('xxx', [chart1, chart2]);\n   * ```\n   */\n\n\n  function connect(groupId) {\n    // Is array of charts\n    if (isArray(groupId)) {\n      var charts = groupId;\n      groupId = null; // If any chart has group\n\n      each(charts, function (chart) {\n        if (chart.group != null) {\n          groupId = chart.group;\n        }\n      });\n      groupId = groupId || 'g_' + groupIdBase++;\n      each(charts, function (chart) {\n        chart.group = groupId;\n      });\n    }\n\n    connectedGroups[groupId] = true;\n    return groupId;\n  }\n  /**\n   * @deprecated\n   */\n\n\n  function disConnect(groupId) {\n    connectedGroups[groupId] = false;\n  }\n  /**\n   * Alias and backword compat\n   */\n\n\n  var disconnect = disConnect;\n  /**\n   * Dispose a chart instance\n   */\n\n  function dispose(chart) {\n    if (isString(chart)) {\n      chart = instances[chart];\n    } else if (!(chart instanceof ECharts)) {\n      // Try to treat as dom\n      chart = getInstanceByDom(chart);\n    }\n\n    if (chart instanceof ECharts && !chart.isDisposed()) {\n      chart.dispose();\n    }\n  }\n\n  function getInstanceByDom(dom) {\n    return instances[getAttribute(dom, DOM_ATTRIBUTE_KEY)];\n  }\n\n  function getInstanceById(key) {\n    return instances[key];\n  }\n  /**\n   * Register theme\n   */\n\n\n  function registerTheme(name, theme$$1) {\n    themeStorage[name] = theme$$1;\n  }\n  /**\n   * Register option preprocessor\n   */\n\n\n  function registerPreprocessor(preprocessorFunc) {\n    if (indexOf(optionPreprocessorFuncs, preprocessorFunc) < 0) {\n      optionPreprocessorFuncs.push(preprocessorFunc);\n    }\n  }\n\n  function registerProcessor(priority, processor) {\n    normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_DEFAULT);\n  }\n  /**\n   * Register postIniter\n   * @param {Function} postInitFunc\n   */\n\n\n  function registerPostInit(postInitFunc) {\n    registerUpdateLifecycle('afterinit', postInitFunc);\n  }\n  /**\n   * Register postUpdater\n   * @param {Function} postUpdateFunc\n   */\n\n\n  function registerPostUpdate(postUpdateFunc) {\n    registerUpdateLifecycle('afterupdate', postUpdateFunc);\n  }\n\n  function registerUpdateLifecycle(name, cb) {\n    lifecycle.on(name, cb);\n  }\n\n  function registerAction(actionInfo, eventName, action) {\n    if (isFunction(eventName)) {\n      action = eventName;\n      eventName = '';\n    }\n\n    var actionType = isObject(actionInfo) ? actionInfo.type : [actionInfo, actionInfo = {\n      event: eventName\n    }][0]; // Event name is all lowercase\n\n    actionInfo.event = (actionInfo.event || actionType).toLowerCase();\n    eventName = actionInfo.event;\n\n    if (eventActionMap[eventName]) {\n      // Already registered.\n      return;\n    } // Validate action type and event name.\n\n\n    assert(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));\n\n    if (!actions[actionType]) {\n      actions[actionType] = {\n        action: action,\n        actionInfo: actionInfo\n      };\n    }\n\n    eventActionMap[eventName] = actionType;\n  }\n\n  function registerCoordinateSystem(type, coordSysCreator) {\n    CoordinateSystemManager.register(type, coordSysCreator);\n  }\n  /**\n   * Get dimensions of specified coordinate system.\n   * @param {string} type\n   * @return {Array.<string|Object>}\n   */\n\n\n  function getCoordinateSystemDimensions(type) {\n    var coordSysCreator = CoordinateSystemManager.get(type);\n\n    if (coordSysCreator) {\n      return coordSysCreator.getDimensionsInfo ? coordSysCreator.getDimensionsInfo() : coordSysCreator.dimensions.slice();\n    }\n  }\n\n  function registerLayout(priority, layoutTask) {\n    normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\n  }\n\n  function registerVisual(priority, visualTask) {\n    normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\n  }\n\n  var registeredTasks = [];\n\n  function normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\n    if (isFunction(priority) || isObject(priority)) {\n      fn = priority;\n      priority = defaultPriority;\n    }\n\n    {\n      if (isNaN(priority) || priority == null) {\n        throw new Error('Illegal priority');\n      } // Check duplicate\n\n\n      each(targetList, function (wrap) {\n        assert(wrap.__raw !== fn);\n      });\n    } // Already registered\n\n    if (indexOf(registeredTasks, fn) >= 0) {\n      return;\n    }\n\n    registeredTasks.push(fn);\n    var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\n    stageHandler.__prio = priority;\n    stageHandler.__raw = fn;\n    targetList.push(stageHandler);\n  }\n\n  function registerLoading(name, loadingFx) {\n    loadingEffects[name] = loadingFx;\n  }\n  /**\n   * ZRender need a canvas context to do measureText.\n   * But in node environment canvas may be created by node-canvas.\n   * So we need to specify how to create a canvas instead of using document.createElement('canvas')\n   *\n   *\n   * @deprecated use setPlatformAPI({ createCanvas }) instead.\n   *\n   * @example\n   *     let Canvas = require('canvas');\n   *     let echarts = require('echarts');\n   *     echarts.setCanvasCreator(function () {\n   *         // Small size is enough.\n   *         return new Canvas(32, 32);\n   *     });\n   */\n\n\n  function setCanvasCreator(creator) {\n    {\n      deprecateLog('setCanvasCreator is deprecated. Use setPlatformAPI({ createCanvas }) instead.');\n    }\n    setPlatformAPI({\n      createCanvas: creator\n    });\n  }\n  /**\n   * The parameters and usage: see `geoSourceManager.registerMap`.\n   * Compatible with previous `echarts.registerMap`.\n   */\n\n\n  function registerMap(mapName, geoJson, specialAreas) {\n    var registerMap = getImpl('registerMap');\n    registerMap && registerMap(mapName, geoJson, specialAreas);\n  }\n\n  function getMap(mapName) {\n    var getMap = getImpl('getMap');\n    return getMap && getMap(mapName);\n  }\n\n  var registerTransform = registerExternalTransform;\n  /**\n   * Globa dispatchAction to a specified chart instance.\n   */\n  // export function dispatchAction(payload: { chartId: string } & Payload, opt?: Parameters<ECharts['dispatchAction']>[1]) {\n  //     if (!payload || !payload.chartId) {\n  //         // Must have chartId to find chart\n  //         return;\n  //     }\n  //     const chart = instances[payload.chartId];\n  //     if (chart) {\n  //         chart.dispatchAction(payload, opt);\n  //     }\n  // }\n  // Buitlin global visual\n\n  registerVisual(PRIORITY_VISUAL_GLOBAL, seriesStyleTask);\n  registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataStyleTask);\n  registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataColorPaletteTask);\n  registerVisual(PRIORITY_VISUAL_GLOBAL, seriesSymbolTask);\n  registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataSymbolTask);\n  registerVisual(PRIORITY_VISUAL_DECAL, decalVisual);\n  registerPreprocessor(globalBackwardCompat);\n  registerProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\n  registerLoading('default', defaultLoading); // Default actions\n\n  registerAction({\n    type: HIGHLIGHT_ACTION_TYPE,\n    event: HIGHLIGHT_ACTION_TYPE,\n    update: HIGHLIGHT_ACTION_TYPE\n  }, noop);\n  registerAction({\n    type: DOWNPLAY_ACTION_TYPE,\n    event: DOWNPLAY_ACTION_TYPE,\n    update: DOWNPLAY_ACTION_TYPE\n  }, noop);\n  registerAction({\n    type: SELECT_ACTION_TYPE,\n    event: SELECT_ACTION_TYPE,\n    update: SELECT_ACTION_TYPE\n  }, noop);\n  registerAction({\n    type: UNSELECT_ACTION_TYPE,\n    event: UNSELECT_ACTION_TYPE,\n    update: UNSELECT_ACTION_TYPE\n  }, noop);\n  registerAction({\n    type: TOGGLE_SELECT_ACTION_TYPE,\n    event: TOGGLE_SELECT_ACTION_TYPE,\n    update: TOGGLE_SELECT_ACTION_TYPE\n  }, noop); // Default theme\n\n  registerTheme('light', lightTheme);\n  registerTheme('dark', theme); // For backward compatibility, where the namespace `dataTool` will\n  // be mounted on `echarts` is the extension `dataTool` is imported.\n\n  var dataTool = {};\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  function dataIndexMapValueLength(valNumOrArrLengthMoreThan2) {\n    return valNumOrArrLengthMoreThan2 == null ? 0 : valNumOrArrLengthMoreThan2.length || 1;\n  }\n\n  function defaultKeyGetter(item) {\n    return item;\n  }\n\n  var DataDiffer =\n  /** @class */\n  function () {\n    /**\n     * @param context Can be visited by this.context in callback.\n     */\n    function DataDiffer(oldArr, newArr, oldKeyGetter, newKeyGetter, context, // By default: 'oneToOne'.\n    diffMode) {\n      this._old = oldArr;\n      this._new = newArr;\n      this._oldKeyGetter = oldKeyGetter || defaultKeyGetter;\n      this._newKeyGetter = newKeyGetter || defaultKeyGetter; // Visible in callback via `this.context`;\n\n      this.context = context;\n      this._diffModeMultiple = diffMode === 'multiple';\n    }\n    /**\n     * Callback function when add a data\n     */\n\n\n    DataDiffer.prototype.add = function (func) {\n      this._add = func;\n      return this;\n    };\n    /**\n     * Callback function when update a data\n     */\n\n\n    DataDiffer.prototype.update = function (func) {\n      this._update = func;\n      return this;\n    };\n    /**\n     * Callback function when update a data and only work in `cbMode: 'byKey'`.\n     */\n\n\n    DataDiffer.prototype.updateManyToOne = function (func) {\n      this._updateManyToOne = func;\n      return this;\n    };\n    /**\n     * Callback function when update a data and only work in `cbMode: 'byKey'`.\n     */\n\n\n    DataDiffer.prototype.updateOneToMany = function (func) {\n      this._updateOneToMany = func;\n      return this;\n    };\n    /**\n     * Callback function when update a data and only work in `cbMode: 'byKey'`.\n     */\n\n\n    DataDiffer.prototype.updateManyToMany = function (func) {\n      this._updateManyToMany = func;\n      return this;\n    };\n    /**\n     * Callback function when remove a data\n     */\n\n\n    DataDiffer.prototype.remove = function (func) {\n      this._remove = func;\n      return this;\n    };\n\n    DataDiffer.prototype.execute = function () {\n      this[this._diffModeMultiple ? '_executeMultiple' : '_executeOneToOne']();\n    };\n\n    DataDiffer.prototype._executeOneToOne = function () {\n      var oldArr = this._old;\n      var newArr = this._new;\n      var newDataIndexMap = {};\n      var oldDataKeyArr = new Array(oldArr.length);\n      var newDataKeyArr = new Array(newArr.length);\n\n      this._initIndexMap(oldArr, null, oldDataKeyArr, '_oldKeyGetter');\n\n      this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\n\n      for (var i = 0; i < oldArr.length; i++) {\n        var oldKey = oldDataKeyArr[i];\n        var newIdxMapVal = newDataIndexMap[oldKey];\n        var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal); // idx can never be empty array here. see 'set null' logic below.\n\n        if (newIdxMapValLen > 1) {\n          // Consider there is duplicate key (for example, use dataItem.name as key).\n          // We should make sure every item in newArr and oldArr can be visited.\n          var newIdx = newIdxMapVal.shift();\n\n          if (newIdxMapVal.length === 1) {\n            newDataIndexMap[oldKey] = newIdxMapVal[0];\n          }\n\n          this._update && this._update(newIdx, i);\n        } else if (newIdxMapValLen === 1) {\n          newDataIndexMap[oldKey] = null;\n          this._update && this._update(newIdxMapVal, i);\n        } else {\n          this._remove && this._remove(i);\n        }\n      }\n\n      this._performRestAdd(newDataKeyArr, newDataIndexMap);\n    };\n    /**\n     * For example, consider the case:\n     * oldData: [o0, o1, o2, o3, o4, o5, o6, o7],\n     * newData: [n0, n1, n2, n3, n4, n5, n6, n7, n8],\n     * Where:\n     *     o0, o1, n0 has key 'a' (many to one)\n     *     o5, n4, n5, n6 has key 'b' (one to many)\n     *     o2, n1 has key 'c' (one to one)\n     *     n2, n3 has key 'd' (add)\n     *     o3, o4 has key 'e' (remove)\n     *     o6, o7, n7, n8 has key 'f' (many to many, treated as add and remove)\n     * Then:\n     *     (The order of the following directives are not ensured.)\n     *     this._updateManyToOne(n0, [o0, o1]);\n     *     this._updateOneToMany([n4, n5, n6], o5);\n     *     this._update(n1, o2);\n     *     this._remove(o3);\n     *     this._remove(o4);\n     *     this._remove(o6);\n     *     this._remove(o7);\n     *     this._add(n2);\n     *     this._add(n3);\n     *     this._add(n7);\n     *     this._add(n8);\n     */\n\n\n    DataDiffer.prototype._executeMultiple = function () {\n      var oldArr = this._old;\n      var newArr = this._new;\n      var oldDataIndexMap = {};\n      var newDataIndexMap = {};\n      var oldDataKeyArr = [];\n      var newDataKeyArr = [];\n\n      this._initIndexMap(oldArr, oldDataIndexMap, oldDataKeyArr, '_oldKeyGetter');\n\n      this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\n\n      for (var i = 0; i < oldDataKeyArr.length; i++) {\n        var oldKey = oldDataKeyArr[i];\n        var oldIdxMapVal = oldDataIndexMap[oldKey];\n        var newIdxMapVal = newDataIndexMap[oldKey];\n        var oldIdxMapValLen = dataIndexMapValueLength(oldIdxMapVal);\n        var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n\n        if (oldIdxMapValLen > 1 && newIdxMapValLen === 1) {\n          this._updateManyToOne && this._updateManyToOne(newIdxMapVal, oldIdxMapVal);\n          newDataIndexMap[oldKey] = null;\n        } else if (oldIdxMapValLen === 1 && newIdxMapValLen > 1) {\n          this._updateOneToMany && this._updateOneToMany(newIdxMapVal, oldIdxMapVal);\n          newDataIndexMap[oldKey] = null;\n        } else if (oldIdxMapValLen === 1 && newIdxMapValLen === 1) {\n          this._update && this._update(newIdxMapVal, oldIdxMapVal);\n          newDataIndexMap[oldKey] = null;\n        } else if (oldIdxMapValLen > 1 && newIdxMapValLen > 1) {\n          this._updateManyToMany && this._updateManyToMany(newIdxMapVal, oldIdxMapVal);\n          newDataIndexMap[oldKey] = null;\n        } else if (oldIdxMapValLen > 1) {\n          for (var i_1 = 0; i_1 < oldIdxMapValLen; i_1++) {\n            this._remove && this._remove(oldIdxMapVal[i_1]);\n          }\n        } else {\n          this._remove && this._remove(oldIdxMapVal);\n        }\n      }\n\n      this._performRestAdd(newDataKeyArr, newDataIndexMap);\n    };\n\n    DataDiffer.prototype._performRestAdd = function (newDataKeyArr, newDataIndexMap) {\n      for (var i = 0; i < newDataKeyArr.length; i++) {\n        var newKey = newDataKeyArr[i];\n        var newIdxMapVal = newDataIndexMap[newKey];\n        var idxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n\n        if (idxMapValLen > 1) {\n          for (var j = 0; j < idxMapValLen; j++) {\n            this._add && this._add(newIdxMapVal[j]);\n          }\n        } else if (idxMapValLen === 1) {\n          this._add && this._add(newIdxMapVal);\n        } // Support both `newDataKeyArr` are duplication removed or not removed.\n\n\n        newDataIndexMap[newKey] = null;\n      }\n    };\n\n    DataDiffer.prototype._initIndexMap = function (arr, // Can be null.\n    map, // In 'byKey', the output `keyArr` is duplication removed.\n    // In 'byIndex', the output `keyArr` is not duplication removed and\n    //     its indices are accurately corresponding to `arr`.\n    keyArr, keyGetterName) {\n      var cbModeMultiple = this._diffModeMultiple;\n\n      for (var i = 0; i < arr.length; i++) {\n        // Add prefix to avoid conflict with Object.prototype.\n        var key = '_ec_' + this[keyGetterName](arr[i], i);\n\n        if (!cbModeMultiple) {\n          keyArr[i] = key;\n        }\n\n        if (!map) {\n          continue;\n        }\n\n        var idxMapVal = map[key];\n        var idxMapValLen = dataIndexMapValueLength(idxMapVal);\n\n        if (idxMapValLen === 0) {\n          // Simple optimize: in most cases, one index has one key,\n          // do not need array.\n          map[key] = i;\n\n          if (cbModeMultiple) {\n            keyArr.push(key);\n          }\n        } else if (idxMapValLen === 1) {\n          map[key] = [idxMapVal, i];\n        } else {\n          idxMapVal.push(i);\n        }\n      }\n    };\n\n    return DataDiffer;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var DimensionUserOuput =\n  /** @class */\n  function () {\n    function DimensionUserOuput(encode, dimRequest) {\n      this._encode = encode;\n      this._schema = dimRequest;\n    }\n\n    DimensionUserOuput.prototype.get = function () {\n      return {\n        // Do not generate full dimension name until fist used.\n        fullDimensions: this._getFullDimensionNames(),\n        encode: this._encode\n      };\n    };\n    /**\n     * Get all data store dimension names.\n     * Theoretically a series data store is defined both by series and used dataset (if any).\n     * If some dimensions are omitted for performance reason in `this.dimensions`,\n     * the dimension name may not be auto-generated if user does not specify a dimension name.\n     * In this case, the dimension name is `null`/`undefined`.\n     */\n\n\n    DimensionUserOuput.prototype._getFullDimensionNames = function () {\n      if (!this._cachedDimNames) {\n        this._cachedDimNames = this._schema ? this._schema.makeOutputDimensionNames() : [];\n      }\n\n      return this._cachedDimNames;\n    };\n\n    return DimensionUserOuput;\n  }();\n\n  function summarizeDimensions(data, schema) {\n    var summary = {};\n    var encode = summary.encode = {};\n    var notExtraCoordDimMap = createHashMap();\n    var defaultedLabel = [];\n    var defaultedTooltip = [];\n    var userOutputEncode = {};\n    each(data.dimensions, function (dimName) {\n      var dimItem = data.getDimensionInfo(dimName);\n      var coordDim = dimItem.coordDim;\n\n      if (coordDim) {\n        {\n          assert(VISUAL_DIMENSIONS.get(coordDim) == null);\n        }\n        var coordDimIndex = dimItem.coordDimIndex;\n        getOrCreateEncodeArr(encode, coordDim)[coordDimIndex] = dimName;\n\n        if (!dimItem.isExtraCoord) {\n          notExtraCoordDimMap.set(coordDim, 1); // Use the last coord dim (and label friendly) as default label,\n          // because when dataset is used, it is hard to guess which dimension\n          // can be value dimension. If both show x, y on label is not look good,\n          // and conventionally y axis is focused more.\n\n          if (mayLabelDimType(dimItem.type)) {\n            defaultedLabel[0] = dimName;\n          } // User output encode do not contain generated coords.\n          // And it only has index. User can use index to retrieve value from the raw item array.\n\n\n          getOrCreateEncodeArr(userOutputEncode, coordDim)[coordDimIndex] = data.getDimensionIndex(dimItem.name);\n        }\n\n        if (dimItem.defaultTooltip) {\n          defaultedTooltip.push(dimName);\n        }\n      }\n\n      VISUAL_DIMENSIONS.each(function (v, otherDim) {\n        var encodeArr = getOrCreateEncodeArr(encode, otherDim);\n        var dimIndex = dimItem.otherDims[otherDim];\n\n        if (dimIndex != null && dimIndex !== false) {\n          encodeArr[dimIndex] = dimItem.name;\n        }\n      });\n    });\n    var dataDimsOnCoord = [];\n    var encodeFirstDimNotExtra = {};\n    notExtraCoordDimMap.each(function (v, coordDim) {\n      var dimArr = encode[coordDim];\n      encodeFirstDimNotExtra[coordDim] = dimArr[0]; // Not necessary to remove duplicate, because a data\n      // dim canot on more than one coordDim.\n\n      dataDimsOnCoord = dataDimsOnCoord.concat(dimArr);\n    });\n    summary.dataDimsOnCoord = dataDimsOnCoord;\n    summary.dataDimIndicesOnCoord = map(dataDimsOnCoord, function (dimName) {\n      return data.getDimensionInfo(dimName).storeDimIndex;\n    });\n    summary.encodeFirstDimNotExtra = encodeFirstDimNotExtra;\n    var encodeLabel = encode.label; // FIXME `encode.label` is not recommanded, because formatter can not be set\n    // in this way. Use label.formatter instead. May be remove this approach someday.\n\n    if (encodeLabel && encodeLabel.length) {\n      defaultedLabel = encodeLabel.slice();\n    }\n\n    var encodeTooltip = encode.tooltip;\n\n    if (encodeTooltip && encodeTooltip.length) {\n      defaultedTooltip = encodeTooltip.slice();\n    } else if (!defaultedTooltip.length) {\n      defaultedTooltip = defaultedLabel.slice();\n    }\n\n    encode.defaultedLabel = defaultedLabel;\n    encode.defaultedTooltip = defaultedTooltip;\n    summary.userOutput = new DimensionUserOuput(userOutputEncode, schema);\n    return summary;\n  }\n\n  function getOrCreateEncodeArr(encode, dim) {\n    if (!encode.hasOwnProperty(dim)) {\n      encode[dim] = [];\n    }\n\n    return encode[dim];\n  } // FIXME:TS should be type `AxisType`\n\n\n  function getDimensionTypeByAxis(axisType) {\n    return axisType === 'category' ? 'ordinal' : axisType === 'time' ? 'time' : 'float';\n  }\n\n  function mayLabelDimType(dimType) {\n    // In most cases, ordinal and time do not suitable for label.\n    // Ordinal info can be displayed on axis. Time is too long.\n    return !(dimType === 'ordinal' || dimType === 'time');\n  } // function findTheLastDimMayLabel(data) {\n  //     // Get last value dim\n  //     let dimensions = data.dimensions.slice();\n  //     let valueType;\n  //     let valueDim;\n  //     while (dimensions.length && (\n  //         valueDim = dimensions.pop(),\n  //         valueType = data.getDimensionInfo(valueDim).type,\n  //         valueType === 'ordinal' || valueType === 'time'\n  //     )) {} // jshint ignore:line\n  //     return valueDim;\n  // }\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var SeriesDimensionDefine =\n  /** @class */\n  function () {\n    /**\n     * @param opt All of the fields will be shallow copied.\n     */\n    function SeriesDimensionDefine(opt) {\n      /**\n       * The format of `otherDims` is:\n       * ```js\n       * {\n       *     tooltip?: number\n       *     label?: number\n       *     itemName?: number\n       *     seriesName?: number\n       * }\n       * ```\n       *\n       * A `series.encode` can specified these fields:\n       * ```js\n       * encode: {\n       *     // \"3, 1, 5\" is the index of data dimension.\n       *     tooltip: [3, 1, 5],\n       *     label: [0, 3],\n       *     ...\n       * }\n       * ```\n       * `otherDims` is the parse result of the `series.encode` above, like:\n       * ```js\n       * // Suppose the index of this data dimension is `3`.\n       * this.otherDims = {\n       *     // `3` is at the index `0` of the `encode.tooltip`\n       *     tooltip: 0,\n       *     // `3` is at the index `1` of the `encode.label`\n       *     label: 1\n       * };\n       * ```\n       *\n       * This prop should never be `null`/`undefined` after initialized.\n       */\n      this.otherDims = {};\n\n      if (opt != null) {\n        extend(this, opt);\n      }\n    }\n\n    return SeriesDimensionDefine;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var inner$4 = makeInner();\n  var dimTypeShort = {\n    float: 'f',\n    int: 'i',\n    ordinal: 'o',\n    number: 'n',\n    time: 't'\n  };\n  /**\n   * Represents the dimension requirement of a series.\n   *\n   * NOTICE:\n   * When there are too many dimensions in dataset and many series, only the used dimensions\n   * (i.e., used by coord sys and declared in `series.encode`) are add to `dimensionDefineList`.\n   * But users may query data by other unused dimension names.\n   * In this case, users can only query data if and only if they have defined dimension names\n   * via ec option, so we provide `getDimensionIndexFromSource`, which only query them from\n   * `source` dimensions.\n   */\n\n  var SeriesDataSchema =\n  /** @class */\n  function () {\n    function SeriesDataSchema(opt) {\n      this.dimensions = opt.dimensions;\n      this._dimOmitted = opt.dimensionOmitted;\n      this.source = opt.source;\n      this._fullDimCount = opt.fullDimensionCount;\n\n      this._updateDimOmitted(opt.dimensionOmitted);\n    }\n\n    SeriesDataSchema.prototype.isDimensionOmitted = function () {\n      return this._dimOmitted;\n    };\n\n    SeriesDataSchema.prototype._updateDimOmitted = function (dimensionOmitted) {\n      this._dimOmitted = dimensionOmitted;\n\n      if (!dimensionOmitted) {\n        return;\n      }\n\n      if (!this._dimNameMap) {\n        this._dimNameMap = ensureSourceDimNameMap(this.source);\n      }\n    };\n    /**\n     * @caution Can only be used when `dimensionOmitted: true`.\n     *\n     * Get index by user defined dimension name (i.e., not internal generate name).\n     * That is, get index from `dimensionsDefine`.\n     * If no `dimensionsDefine`, or no name get, return -1.\n     */\n\n\n    SeriesDataSchema.prototype.getSourceDimensionIndex = function (dimName) {\n      return retrieve2(this._dimNameMap.get(dimName), -1);\n    };\n    /**\n     * @caution Can only be used when `dimensionOmitted: true`.\n     *\n     * Notice: may return `null`/`undefined` if user not specify dimension names.\n     */\n\n\n    SeriesDataSchema.prototype.getSourceDimension = function (dimIndex) {\n      var dimensionsDefine = this.source.dimensionsDefine;\n\n      if (dimensionsDefine) {\n        return dimensionsDefine[dimIndex];\n      }\n    };\n\n    SeriesDataSchema.prototype.makeStoreSchema = function () {\n      var dimCount = this._fullDimCount;\n      var willRetrieveDataByName = shouldRetrieveDataByName(this.source);\n      var makeHashStrict = !shouldOmitUnusedDimensions(dimCount); // If source don't have dimensions or series don't omit unsed dimensions.\n      // Generate from seriesDimList directly\n\n      var dimHash = '';\n      var dims = [];\n\n      for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < dimCount; fullDimIdx++) {\n        var property = void 0;\n        var type = void 0;\n        var ordinalMeta = void 0;\n        var seriesDimDef = this.dimensions[seriesDimIdx]; // The list has been sorted by `storeDimIndex` asc.\n\n        if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\n          property = willRetrieveDataByName ? seriesDimDef.name : null;\n          type = seriesDimDef.type;\n          ordinalMeta = seriesDimDef.ordinalMeta;\n          seriesDimIdx++;\n        } else {\n          var sourceDimDef = this.getSourceDimension(fullDimIdx);\n\n          if (sourceDimDef) {\n            property = willRetrieveDataByName ? sourceDimDef.name : null;\n            type = sourceDimDef.type;\n          }\n        }\n\n        dims.push({\n          property: property,\n          type: type,\n          ordinalMeta: ordinalMeta\n        }); // If retrieving data by index,\n        //   use <index, type, ordinalMeta> to determine whether data can be shared.\n        //   (Becuase in this case there might be no dimension name defined in dataset, but indices always exists).\n        //   (indices are always 0, 1, 2, ..., so we can ignore them to shorten the hash).\n        // Otherwise if retrieving data by property name (like `data: [{aa: 123, bb: 765}, ...]`),\n        //   use <property, type, ordinalMeta> in hash.\n\n        if (willRetrieveDataByName && property != null // For data stack, we have make sure each series has its own dim on this store.\n        // So we do not add property to hash to make sure they can share this store.\n        && (!seriesDimDef || !seriesDimDef.isCalculationCoord)) {\n          dimHash += makeHashStrict // Use escape character '`' in case that property name contains '$'.\n          ? property.replace(/\\`/g, '`1').replace(/\\$/g, '`2') // For better performance, when there are large dimensions, tolerant this defects that hardly meet.\n          : property;\n        }\n\n        dimHash += '$';\n        dimHash += dimTypeShort[type] || 'f';\n\n        if (ordinalMeta) {\n          dimHash += ordinalMeta.uid;\n        }\n\n        dimHash += '$';\n      } // Source from endpoint(usually series) will be read differently\n      // when seriesLayoutBy or startIndex(which is affected by sourceHeader) are different.\n      // So we use this three props as key.\n\n\n      var source = this.source;\n      var hash = [source.seriesLayoutBy, source.startIndex, dimHash].join('$$');\n      return {\n        dimensions: dims,\n        hash: hash\n      };\n    };\n\n    SeriesDataSchema.prototype.makeOutputDimensionNames = function () {\n      var result = [];\n\n      for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < this._fullDimCount; fullDimIdx++) {\n        var name_1 = void 0;\n        var seriesDimDef = this.dimensions[seriesDimIdx]; // The list has been sorted by `storeDimIndex` asc.\n\n        if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\n          if (!seriesDimDef.isCalculationCoord) {\n            name_1 = seriesDimDef.name;\n          }\n\n          seriesDimIdx++;\n        } else {\n          var sourceDimDef = this.getSourceDimension(fullDimIdx);\n\n          if (sourceDimDef) {\n            name_1 = sourceDimDef.name;\n          }\n        }\n\n        result.push(name_1);\n      }\n\n      return result;\n    };\n\n    SeriesDataSchema.prototype.appendCalculationDimension = function (dimDef) {\n      this.dimensions.push(dimDef);\n      dimDef.isCalculationCoord = true;\n      this._fullDimCount++; // If append dimension on a data store, consider the store\n      // might be shared by different series, series dimensions not\n      // really map to store dimensions.\n\n      this._updateDimOmitted(true);\n    };\n\n    return SeriesDataSchema;\n  }();\n\n  function isSeriesDataSchema(schema) {\n    return schema instanceof SeriesDataSchema;\n  }\n\n  function createDimNameMap(dimsDef) {\n    var dataDimNameMap = createHashMap();\n\n    for (var i = 0; i < (dimsDef || []).length; i++) {\n      var dimDefItemRaw = dimsDef[i];\n      var userDimName = isObject(dimDefItemRaw) ? dimDefItemRaw.name : dimDefItemRaw;\n\n      if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\n        dataDimNameMap.set(userDimName, i);\n      }\n    }\n\n    return dataDimNameMap;\n  }\n\n  function ensureSourceDimNameMap(source) {\n    var innerSource = inner$4(source);\n    return innerSource.dimNameMap || (innerSource.dimNameMap = createDimNameMap(source.dimensionsDefine));\n  }\n\n  function shouldOmitUnusedDimensions(dimCount) {\n    return dimCount > 30;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /* global Int32Array */\n\n\n  var isObject$2 = isObject;\n  var map$1 = map;\n  var CtorInt32Array$1 = typeof Int32Array === 'undefined' ? Array : Int32Array; // Use prefix to avoid index to be the same as otherIdList[idx],\n  // which will cause weird udpate animation.\n\n  var ID_PREFIX = 'e\\0\\0';\n  var INDEX_NOT_FOUND = -1; // type SeriesDimensionIndex = DimensionIndex;\n\n  var TRANSFERABLE_PROPERTIES = ['hasItemOption', '_nameList', '_idList', '_invertedIndicesMap', '_dimSummary', 'userOutput', '_rawData', '_dimValueGetter', '_nameDimIdx', '_idDimIdx', '_nameRepeatCount'];\n  var CLONE_PROPERTIES = ['_approximateExtent']; // -----------------------------\n  // Internal method declarations:\n  // -----------------------------\n\n  var prepareInvertedIndex;\n  var getId;\n  var getIdNameFromStore;\n  var normalizeDimensions;\n  var transferProperties;\n  var cloneListForMapAndSample;\n  var makeIdFromName;\n\n  var SeriesData =\n  /** @class */\n  function () {\n    /**\n     * @param dimensionsInput.dimensions\n     *        For example, ['someDimName', {name: 'someDimName', type: 'someDimType'}, ...].\n     *        Dimensions should be concrete names like x, y, z, lng, lat, angle, radius\n     */\n    function SeriesData(dimensionsInput, hostModel) {\n      this.type = 'list';\n      this._dimOmitted = false;\n      this._nameList = [];\n      this._idList = []; // Models of data option is stored sparse for optimizing memory cost\n      // Never used yet (not used yet).\n      // private _optionModels: Model[] = [];\n      // Global visual properties after visual coding\n\n      this._visual = {}; // Globel layout properties.\n\n      this._layout = {}; // Item visual properties after visual coding\n\n      this._itemVisuals = []; // Item layout properties after layout\n\n      this._itemLayouts = []; // Graphic elemnents\n\n      this._graphicEls = []; // key: dim, value: extent\n\n      this._approximateExtent = {};\n      this._calculationInfo = {}; // Having detected that there is data item is non primitive type\n      // (in type `OptionDataItemObject`).\n      // Like `data: [ { value: xx, itemStyle: {...} }, ...]`\n      // At present it only happen in `SOURCE_FORMAT_ORIGINAL`.\n\n      this.hasItemOption = false; // Methods that create a new list based on this list should be listed here.\n      // Notice that those method should `RETURN` the new list.\n\n      this.TRANSFERABLE_METHODS = ['cloneShallow', 'downSample', 'lttbDownSample', 'map']; // Methods that change indices of this list should be listed here.\n\n      this.CHANGABLE_METHODS = ['filterSelf', 'selectRange'];\n      this.DOWNSAMPLE_METHODS = ['downSample', 'lttbDownSample'];\n      var dimensions;\n      var assignStoreDimIdx = false;\n\n      if (isSeriesDataSchema(dimensionsInput)) {\n        dimensions = dimensionsInput.dimensions;\n        this._dimOmitted = dimensionsInput.isDimensionOmitted();\n        this._schema = dimensionsInput;\n      } else {\n        assignStoreDimIdx = true;\n        dimensions = dimensionsInput;\n      }\n\n      dimensions = dimensions || ['x', 'y'];\n      var dimensionInfos = {};\n      var dimensionNames = [];\n      var invertedIndicesMap = {};\n      var needsHasOwn = false;\n      var emptyObj = {};\n\n      for (var i = 0; i < dimensions.length; i++) {\n        // Use the original dimensions[i], where other flag props may exists.\n        var dimInfoInput = dimensions[i];\n        var dimensionInfo = isString(dimInfoInput) ? new SeriesDimensionDefine({\n          name: dimInfoInput\n        }) : !(dimInfoInput instanceof SeriesDimensionDefine) ? new SeriesDimensionDefine(dimInfoInput) : dimInfoInput;\n        var dimensionName = dimensionInfo.name;\n        dimensionInfo.type = dimensionInfo.type || 'float';\n\n        if (!dimensionInfo.coordDim) {\n          dimensionInfo.coordDim = dimensionName;\n          dimensionInfo.coordDimIndex = 0;\n        }\n\n        var otherDims = dimensionInfo.otherDims = dimensionInfo.otherDims || {};\n        dimensionNames.push(dimensionName);\n        dimensionInfos[dimensionName] = dimensionInfo;\n\n        if (emptyObj[dimensionName] != null) {\n          needsHasOwn = true;\n        }\n\n        if (dimensionInfo.createInvertedIndices) {\n          invertedIndicesMap[dimensionName] = [];\n        }\n\n        if (otherDims.itemName === 0) {\n          this._nameDimIdx = i;\n        }\n\n        if (otherDims.itemId === 0) {\n          this._idDimIdx = i;\n        }\n\n        {\n          assert(assignStoreDimIdx || dimensionInfo.storeDimIndex >= 0);\n        }\n\n        if (assignStoreDimIdx) {\n          dimensionInfo.storeDimIndex = i;\n        }\n      }\n\n      this.dimensions = dimensionNames;\n      this._dimInfos = dimensionInfos;\n\n      this._initGetDimensionInfo(needsHasOwn);\n\n      this.hostModel = hostModel;\n      this._invertedIndicesMap = invertedIndicesMap;\n\n      if (this._dimOmitted) {\n        var dimIdxToName_1 = this._dimIdxToName = createHashMap();\n        each(dimensionNames, function (dimName) {\n          dimIdxToName_1.set(dimensionInfos[dimName].storeDimIndex, dimName);\n        });\n      }\n    }\n    /**\n     *\n     * Get concrete dimension name by dimension name or dimension index.\n     * If input a dimension name, do not validate whether the dimension name exits.\n     *\n     * @caution\n     * @param dim Must make sure the dimension is `SeriesDimensionLoose`.\n     * Because only those dimensions will have auto-generated dimension names if not\n     * have a user-specified name, and other dimensions will get a return of null/undefined.\n     *\n     * @notice Becuause of this reason, should better use `getDimensionIndex` instead, for examples:\n     * ```js\n     * const val = data.getStore().get(data.getDimensionIndex(dim), dataIdx);\n     * ```\n     *\n     * @return Concrete dim name.\n     */\n\n\n    SeriesData.prototype.getDimension = function (dim) {\n      var dimIdx = this._recognizeDimIndex(dim);\n\n      if (dimIdx == null) {\n        return dim;\n      }\n\n      dimIdx = dim;\n\n      if (!this._dimOmitted) {\n        return this.dimensions[dimIdx];\n      } // Retrieve from series dimension definition becuase it probably contains\n      // generated dimension name (like 'x', 'y').\n\n\n      var dimName = this._dimIdxToName.get(dimIdx);\n\n      if (dimName != null) {\n        return dimName;\n      }\n\n      var sourceDimDef = this._schema.getSourceDimension(dimIdx);\n\n      if (sourceDimDef) {\n        return sourceDimDef.name;\n      }\n    };\n    /**\n     * Get dimension index in data store. Return -1 if not found.\n     * Can be used to index value from getRawValue.\n     */\n\n\n    SeriesData.prototype.getDimensionIndex = function (dim) {\n      var dimIdx = this._recognizeDimIndex(dim);\n\n      if (dimIdx != null) {\n        return dimIdx;\n      }\n\n      if (dim == null) {\n        return -1;\n      }\n\n      var dimInfo = this._getDimInfo(dim);\n\n      return dimInfo ? dimInfo.storeDimIndex : this._dimOmitted ? this._schema.getSourceDimensionIndex(dim) : -1;\n    };\n    /**\n     * The meanings of the input parameter `dim`:\n     *\n     * + If dim is a number (e.g., `1`), it means the index of the dimension.\n     *   For example, `getDimension(0)` will return 'x' or 'lng' or 'radius'.\n     * + If dim is a number-like string (e.g., `\"1\"`):\n     *     + If there is the same concrete dim name defined in `series.dimensions` or `dataset.dimensions`,\n     *        it means that concrete name.\n     *     + If not, it will be converted to a number, which means the index of the dimension.\n     *        (why? because of the backward compatbility. We have been tolerating number-like string in\n     *        dimension setting, although now it seems that it is not a good idea.)\n     *     For example, `visualMap[i].dimension: \"1\"` is the same meaning as `visualMap[i].dimension: 1`,\n     *     if no dimension name is defined as `\"1\"`.\n     * + If dim is a not-number-like string, it means the concrete dim name.\n     *   For example, it can be be default name `\"x\"`, `\"y\"`, `\"z\"`, `\"lng\"`, `\"lat\"`, `\"angle\"`, `\"radius\"`,\n     *   or customized in `dimensions` property of option like `\"age\"`.\n     *\n     * @return recogonized `DimensionIndex`. Otherwise return null/undefined (means that dim is `DimensionName`).\n     */\n\n\n    SeriesData.prototype._recognizeDimIndex = function (dim) {\n      if (isNumber(dim) // If being a number-like string but not being defined as a dimension name.\n      || dim != null && !isNaN(dim) && !this._getDimInfo(dim) && (!this._dimOmitted || this._schema.getSourceDimensionIndex(dim) < 0)) {\n        return +dim;\n      }\n    };\n\n    SeriesData.prototype._getStoreDimIndex = function (dim) {\n      var dimIdx = this.getDimensionIndex(dim);\n      {\n        if (dimIdx == null) {\n          throw new Error('Unkown dimension ' + dim);\n        }\n      }\n      return dimIdx;\n    };\n    /**\n     * Get type and calculation info of particular dimension\n     * @param dim\n     *        Dimension can be concrete names like x, y, z, lng, lat, angle, radius\n     *        Or a ordinal number. For example getDimensionInfo(0) will return 'x' or 'lng' or 'radius'\n     */\n\n\n    SeriesData.prototype.getDimensionInfo = function (dim) {\n      // Do not clone, because there may be categories in dimInfo.\n      return this._getDimInfo(this.getDimension(dim));\n    };\n\n    SeriesData.prototype._initGetDimensionInfo = function (needsHasOwn) {\n      var dimensionInfos = this._dimInfos;\n      this._getDimInfo = needsHasOwn ? function (dimName) {\n        return dimensionInfos.hasOwnProperty(dimName) ? dimensionInfos[dimName] : undefined;\n      } : function (dimName) {\n        return dimensionInfos[dimName];\n      };\n    };\n    /**\n     * concrete dimension name list on coord.\n     */\n\n\n    SeriesData.prototype.getDimensionsOnCoord = function () {\n      return this._dimSummary.dataDimsOnCoord.slice();\n    };\n\n    SeriesData.prototype.mapDimension = function (coordDim, idx) {\n      var dimensionsSummary = this._dimSummary;\n\n      if (idx == null) {\n        return dimensionsSummary.encodeFirstDimNotExtra[coordDim];\n      }\n\n      var dims = dimensionsSummary.encode[coordDim];\n      return dims ? dims[idx] : null;\n    };\n\n    SeriesData.prototype.mapDimensionsAll = function (coordDim) {\n      var dimensionsSummary = this._dimSummary;\n      var dims = dimensionsSummary.encode[coordDim];\n      return (dims || []).slice();\n    };\n\n    SeriesData.prototype.getStore = function () {\n      return this._store;\n    };\n    /**\n     * Initialize from data\n     * @param data source or data or data store.\n     * @param nameList The name of a datum is used on data diff and\n     *        default label/tooltip.\n     *        A name can be specified in encode.itemName,\n     *        or dataItem.name (only for series option data),\n     *        or provided in nameList from outside.\n     */\n\n\n    SeriesData.prototype.initData = function (data, nameList, dimValueGetter) {\n      var _this = this;\n\n      var store;\n\n      if (data instanceof DataStore) {\n        store = data;\n      }\n\n      if (!store) {\n        var dimensions = this.dimensions;\n        var provider = isSourceInstance(data) || isArrayLike(data) ? new DefaultDataProvider(data, dimensions.length) : data;\n        store = new DataStore();\n        var dimensionInfos = map$1(dimensions, function (dimName) {\n          return {\n            type: _this._dimInfos[dimName].type,\n            property: dimName\n          };\n        });\n        store.initData(provider, dimensionInfos, dimValueGetter);\n      }\n\n      this._store = store; // Reset\n\n      this._nameList = (nameList || []).slice();\n      this._idList = [];\n      this._nameRepeatCount = {};\n\n      this._doInit(0, store.count()); // Cache summary info for fast visit. See \"dimensionHelper\".\n      // Needs to be initialized after store is prepared.\n\n\n      this._dimSummary = summarizeDimensions(this, this._schema);\n      this.userOutput = this._dimSummary.userOutput;\n    };\n    /**\n     * Caution: Can be only called on raw data (before `this._indices` created).\n     */\n\n\n    SeriesData.prototype.appendData = function (data) {\n      var range = this._store.appendData(data);\n\n      this._doInit(range[0], range[1]);\n    };\n    /**\n     * Caution: Can be only called on raw data (before `this._indices` created).\n     * This method does not modify `rawData` (`dataProvider`), but only\n     * add values to store.\n     *\n     * The final count will be increased by `Math.max(values.length, names.length)`.\n     *\n     * @param values That is the SourceType: 'arrayRows', like\n     *        [\n     *            [12, 33, 44],\n     *            [NaN, 43, 1],\n     *            ['-', 'asdf', 0]\n     *        ]\n     *        Each item is exaclty cooresponding to a dimension.\n     */\n\n\n    SeriesData.prototype.appendValues = function (values, names) {\n      var _a = this._store.appendValues(values, names.length),\n          start = _a.start,\n          end = _a.end;\n\n      var shouldMakeIdFromName = this._shouldMakeIdFromName();\n\n      this._updateOrdinalMeta();\n\n      if (names) {\n        for (var idx = start; idx < end; idx++) {\n          var sourceIdx = idx - start;\n          this._nameList[idx] = names[sourceIdx];\n\n          if (shouldMakeIdFromName) {\n            makeIdFromName(this, idx);\n          }\n        }\n      }\n    };\n\n    SeriesData.prototype._updateOrdinalMeta = function () {\n      var store = this._store;\n      var dimensions = this.dimensions;\n\n      for (var i = 0; i < dimensions.length; i++) {\n        var dimInfo = this._dimInfos[dimensions[i]];\n\n        if (dimInfo.ordinalMeta) {\n          store.collectOrdinalMeta(dimInfo.storeDimIndex, dimInfo.ordinalMeta);\n        }\n      }\n    };\n\n    SeriesData.prototype._shouldMakeIdFromName = function () {\n      var provider = this._store.getProvider();\n\n      return this._idDimIdx == null && provider.getSource().sourceFormat !== SOURCE_FORMAT_TYPED_ARRAY && !provider.fillStorage;\n    };\n\n    SeriesData.prototype._doInit = function (start, end) {\n      if (start >= end) {\n        return;\n      }\n\n      var store = this._store;\n      var provider = store.getProvider();\n\n      this._updateOrdinalMeta();\n\n      var nameList = this._nameList;\n      var idList = this._idList;\n      var sourceFormat = provider.getSource().sourceFormat;\n      var isFormatOriginal = sourceFormat === SOURCE_FORMAT_ORIGINAL; // Each data item is value\n      // [1, 2]\n      // 2\n      // Bar chart, line chart which uses category axis\n      // only gives the 'y' value. 'x' value is the indices of category\n      // Use a tempValue to normalize the value to be a (x, y) value\n      // If dataItem is {name: ...} or {id: ...}, it has highest priority.\n      // This kind of ids and names are always stored `_nameList` and `_idList`.\n\n      if (isFormatOriginal && !provider.pure) {\n        var sharedDataItem = [];\n\n        for (var idx = start; idx < end; idx++) {\n          // NOTICE: Try not to write things into dataItem\n          var dataItem = provider.getItem(idx, sharedDataItem);\n\n          if (!this.hasItemOption && isDataItemOption(dataItem)) {\n            this.hasItemOption = true;\n          }\n\n          if (dataItem) {\n            var itemName = dataItem.name;\n\n            if (nameList[idx] == null && itemName != null) {\n              nameList[idx] = convertOptionIdName(itemName, null);\n            }\n\n            var itemId = dataItem.id;\n\n            if (idList[idx] == null && itemId != null) {\n              idList[idx] = convertOptionIdName(itemId, null);\n            }\n          }\n        }\n      }\n\n      if (this._shouldMakeIdFromName()) {\n        for (var idx = start; idx < end; idx++) {\n          makeIdFromName(this, idx);\n        }\n      }\n\n      prepareInvertedIndex(this);\n    };\n    /**\n     * PENDING: In fact currently this function is only used to short-circuit\n     * the calling of `scale.unionExtentFromData` when data have been filtered by modules\n     * like \"dataZoom\". `scale.unionExtentFromData` is used to calculate data extent for series on\n     * an axis, but if a \"axis related data filter module\" is used, the extent of the axis have\n     * been fixed and no need to calling `scale.unionExtentFromData` actually.\n     * But if we add \"custom data filter\" in future, which is not \"axis related\", this method may\n     * be still needed.\n     *\n     * Optimize for the scenario that data is filtered by a given extent.\n     * Consider that if data amount is more than hundreds of thousand,\n     * extent calculation will cost more than 10ms and the cache will\n     * be erased because of the filtering.\n     */\n\n\n    SeriesData.prototype.getApproximateExtent = function (dim) {\n      return this._approximateExtent[dim] || this._store.getDataExtent(this._getStoreDimIndex(dim));\n    };\n    /**\n     * Calculate extent on a filtered data might be time consuming.\n     * Approximate extent is only used for: calculte extent of filtered data outside.\n     */\n\n\n    SeriesData.prototype.setApproximateExtent = function (extent, dim) {\n      dim = this.getDimension(dim);\n      this._approximateExtent[dim] = extent.slice();\n    };\n\n    SeriesData.prototype.getCalculationInfo = function (key) {\n      return this._calculationInfo[key];\n    };\n\n    SeriesData.prototype.setCalculationInfo = function (key, value) {\n      isObject$2(key) ? extend(this._calculationInfo, key) : this._calculationInfo[key] = value;\n    };\n    /**\n     * @return Never be null/undefined. `number` will be converted to string. Becuase:\n     * In most cases, name is used in display, where returning a string is more convenient.\n     * In other cases, name is used in query (see `indexOfName`), where we can keep the\n     * rule that name `2` equals to name `'2'`.\n     */\n\n\n    SeriesData.prototype.getName = function (idx) {\n      var rawIndex = this.getRawIndex(idx);\n      var name = this._nameList[rawIndex];\n\n      if (name == null && this._nameDimIdx != null) {\n        name = getIdNameFromStore(this, this._nameDimIdx, rawIndex);\n      }\n\n      if (name == null) {\n        name = '';\n      }\n\n      return name;\n    };\n\n    SeriesData.prototype._getCategory = function (dimIdx, idx) {\n      var ordinal = this._store.get(dimIdx, idx);\n\n      var ordinalMeta = this._store.getOrdinalMeta(dimIdx);\n\n      if (ordinalMeta) {\n        return ordinalMeta.categories[ordinal];\n      }\n\n      return ordinal;\n    };\n    /**\n     * @return Never null/undefined. `number` will be converted to string. Becuase:\n     * In all cases having encountered at present, id is used in making diff comparison, which\n     * are usually based on hash map. We can keep the rule that the internal id are always string\n     * (treat `2` is the same as `'2'`) to make the related logic simple.\n     */\n\n\n    SeriesData.prototype.getId = function (idx) {\n      return getId(this, this.getRawIndex(idx));\n    };\n\n    SeriesData.prototype.count = function () {\n      return this._store.count();\n    };\n    /**\n     * Get value. Return NaN if idx is out of range.\n     *\n     * @notice Should better to use `data.getStore().get(dimIndex, dataIdx)` instead.\n     */\n\n\n    SeriesData.prototype.get = function (dim, idx) {\n      var store = this._store;\n      var dimInfo = this._dimInfos[dim];\n\n      if (dimInfo) {\n        return store.get(dimInfo.storeDimIndex, idx);\n      }\n    };\n    /**\n     * @notice Should better to use `data.getStore().getByRawIndex(dimIndex, dataIdx)` instead.\n     */\n\n\n    SeriesData.prototype.getByRawIndex = function (dim, rawIdx) {\n      var store = this._store;\n      var dimInfo = this._dimInfos[dim];\n\n      if (dimInfo) {\n        return store.getByRawIndex(dimInfo.storeDimIndex, rawIdx);\n      }\n    };\n\n    SeriesData.prototype.getIndices = function () {\n      return this._store.getIndices();\n    };\n\n    SeriesData.prototype.getDataExtent = function (dim) {\n      return this._store.getDataExtent(this._getStoreDimIndex(dim));\n    };\n\n    SeriesData.prototype.getSum = function (dim) {\n      return this._store.getSum(this._getStoreDimIndex(dim));\n    };\n\n    SeriesData.prototype.getMedian = function (dim) {\n      return this._store.getMedian(this._getStoreDimIndex(dim));\n    };\n\n    SeriesData.prototype.getValues = function (dimensions, idx) {\n      var _this = this;\n\n      var store = this._store;\n      return isArray(dimensions) ? store.getValues(map$1(dimensions, function (dim) {\n        return _this._getStoreDimIndex(dim);\n      }), idx) : store.getValues(dimensions);\n    };\n    /**\n     * If value is NaN. Inlcuding '-'\n     * Only check the coord dimensions.\n     */\n\n\n    SeriesData.prototype.hasValue = function (idx) {\n      var dataDimIndicesOnCoord = this._dimSummary.dataDimIndicesOnCoord;\n\n      for (var i = 0, len = dataDimIndicesOnCoord.length; i < len; i++) {\n        // Ordinal type originally can be string or number.\n        // But when an ordinal type is used on coord, it can\n        // not be string but only number. So we can also use isNaN.\n        if (isNaN(this._store.get(dataDimIndicesOnCoord[i], idx))) {\n          return false;\n        }\n      }\n\n      return true;\n    };\n    /**\n     * Retreive the index with given name\n     */\n\n\n    SeriesData.prototype.indexOfName = function (name) {\n      for (var i = 0, len = this._store.count(); i < len; i++) {\n        if (this.getName(i) === name) {\n          return i;\n        }\n      }\n\n      return -1;\n    };\n\n    SeriesData.prototype.getRawIndex = function (idx) {\n      return this._store.getRawIndex(idx);\n    };\n\n    SeriesData.prototype.indexOfRawIndex = function (rawIndex) {\n      return this._store.indexOfRawIndex(rawIndex);\n    };\n    /**\n     * Only support the dimension which inverted index created.\n     * Do not support other cases until required.\n     * @param dim concrete dim\n     * @param value ordinal index\n     * @return rawIndex\n     */\n\n\n    SeriesData.prototype.rawIndexOf = function (dim, value) {\n      var invertedIndices = dim && this._invertedIndicesMap[dim];\n      {\n        if (!invertedIndices) {\n          throw new Error('Do not supported yet');\n        }\n      }\n      var rawIndex = invertedIndices[value];\n\n      if (rawIndex == null || isNaN(rawIndex)) {\n        return INDEX_NOT_FOUND;\n      }\n\n      return rawIndex;\n    };\n    /**\n     * Retreive the index of nearest value\n     * @param dim\n     * @param value\n     * @param [maxDistance=Infinity]\n     * @return If and only if multiple indices has\n     *         the same value, they are put to the result.\n     */\n\n\n    SeriesData.prototype.indicesOfNearest = function (dim, value, maxDistance) {\n      return this._store.indicesOfNearest(this._getStoreDimIndex(dim), value, maxDistance);\n    };\n\n    SeriesData.prototype.each = function (dims, cb, ctx) {\n      'use strict';\n\n      if (isFunction(dims)) {\n        ctx = cb;\n        cb = dims;\n        dims = [];\n      } // ctxCompat just for compat echarts3\n\n\n      var fCtx = ctx || this;\n      var dimIndices = map$1(normalizeDimensions(dims), this._getStoreDimIndex, this);\n\n      this._store.each(dimIndices, fCtx ? bind(cb, fCtx) : cb);\n    };\n\n    SeriesData.prototype.filterSelf = function (dims, cb, ctx) {\n      'use strict';\n\n      if (isFunction(dims)) {\n        ctx = cb;\n        cb = dims;\n        dims = [];\n      } // ctxCompat just for compat echarts3\n\n\n      var fCtx = ctx || this;\n      var dimIndices = map$1(normalizeDimensions(dims), this._getStoreDimIndex, this);\n      this._store = this._store.filter(dimIndices, fCtx ? bind(cb, fCtx) : cb);\n      return this;\n    };\n    /**\n     * Select data in range. (For optimization of filter)\n     * (Manually inline code, support 5 million data filtering in data zoom.)\n     */\n\n\n    SeriesData.prototype.selectRange = function (range) {\n      'use strict';\n\n      var _this = this;\n\n      var innerRange = {};\n      var dims = keys(range);\n      var dimIndices = [];\n      each(dims, function (dim) {\n        var dimIdx = _this._getStoreDimIndex(dim);\n\n        innerRange[dimIdx] = range[dim];\n        dimIndices.push(dimIdx);\n      });\n      this._store = this._store.selectRange(innerRange);\n      return this;\n    };\n    /* eslint-enable max-len */\n\n\n    SeriesData.prototype.mapArray = function (dims, cb, ctx) {\n      'use strict';\n\n      if (isFunction(dims)) {\n        ctx = cb;\n        cb = dims;\n        dims = [];\n      } // ctxCompat just for compat echarts3\n\n\n      ctx = ctx || this;\n      var result = [];\n      this.each(dims, function () {\n        result.push(cb && cb.apply(this, arguments));\n      }, ctx);\n      return result;\n    };\n\n    SeriesData.prototype.map = function (dims, cb, ctx, ctxCompat) {\n      'use strict'; // ctxCompat just for compat echarts3\n\n      var fCtx = ctx || ctxCompat || this;\n      var dimIndices = map$1(normalizeDimensions(dims), this._getStoreDimIndex, this);\n      var list = cloneListForMapAndSample(this);\n      list._store = this._store.map(dimIndices, fCtx ? bind(cb, fCtx) : cb);\n      return list;\n    };\n\n    SeriesData.prototype.modify = function (dims, cb, ctx, ctxCompat) {\n      var _this = this; // ctxCompat just for compat echarts3\n\n\n      var fCtx = ctx || ctxCompat || this;\n      {\n        each(normalizeDimensions(dims), function (dim) {\n          var dimInfo = _this.getDimensionInfo(dim);\n\n          if (!dimInfo.isCalculationCoord) {\n            console.error('Danger: only stack dimension can be modified');\n          }\n        });\n      }\n      var dimIndices = map$1(normalizeDimensions(dims), this._getStoreDimIndex, this); // If do shallow clone here, if there are too many stacked series,\n      // it still cost lots of memory, becuase `_store.dimensions` are not shared.\n      // We should consider there probably be shallow clone happen in each sereis\n      // in consequent filter/map.\n\n      this._store.modify(dimIndices, fCtx ? bind(cb, fCtx) : cb);\n    };\n    /**\n     * Large data down sampling on given dimension\n     * @param sampleIndex Sample index for name and id\n     */\n\n\n    SeriesData.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n      var list = cloneListForMapAndSample(this);\n      list._store = this._store.downSample(this._getStoreDimIndex(dimension), rate, sampleValue, sampleIndex);\n      return list;\n    };\n    /**\n     * Large data down sampling using largest-triangle-three-buckets\n     * @param {string} valueDimension\n     * @param {number} targetCount\n     */\n\n\n    SeriesData.prototype.lttbDownSample = function (valueDimension, rate) {\n      var list = cloneListForMapAndSample(this);\n      list._store = this._store.lttbDownSample(this._getStoreDimIndex(valueDimension), rate);\n      return list;\n    };\n\n    SeriesData.prototype.getRawDataItem = function (idx) {\n      return this._store.getRawDataItem(idx);\n    };\n    /**\n     * Get model of one data item.\n     */\n    // TODO: Type of data item\n\n\n    SeriesData.prototype.getItemModel = function (idx) {\n      var hostModel = this.hostModel;\n      var dataItem = this.getRawDataItem(idx);\n      return new Model(dataItem, hostModel, hostModel && hostModel.ecModel);\n    };\n    /**\n     * Create a data differ\n     */\n\n\n    SeriesData.prototype.diff = function (otherList) {\n      var thisList = this;\n      return new DataDiffer(otherList ? otherList.getStore().getIndices() : [], this.getStore().getIndices(), function (idx) {\n        return getId(otherList, idx);\n      }, function (idx) {\n        return getId(thisList, idx);\n      });\n    };\n    /**\n     * Get visual property.\n     */\n\n\n    SeriesData.prototype.getVisual = function (key) {\n      var visual = this._visual;\n      return visual && visual[key];\n    };\n\n    SeriesData.prototype.setVisual = function (kvObj, val) {\n      this._visual = this._visual || {};\n\n      if (isObject$2(kvObj)) {\n        extend(this._visual, kvObj);\n      } else {\n        this._visual[kvObj] = val;\n      }\n    };\n    /**\n     * Get visual property of single data item\n     */\n    // eslint-disable-next-line\n\n\n    SeriesData.prototype.getItemVisual = function (idx, key) {\n      var itemVisual = this._itemVisuals[idx];\n      var val = itemVisual && itemVisual[key];\n\n      if (val == null) {\n        // Use global visual property\n        return this.getVisual(key);\n      }\n\n      return val;\n    };\n    /**\n     * If exists visual property of single data item\n     */\n\n\n    SeriesData.prototype.hasItemVisual = function () {\n      return this._itemVisuals.length > 0;\n    };\n    /**\n     * Make sure itemVisual property is unique\n     */\n    // TODO: use key to save visual to reduce memory.\n\n\n    SeriesData.prototype.ensureUniqueItemVisual = function (idx, key) {\n      var itemVisuals = this._itemVisuals;\n      var itemVisual = itemVisuals[idx];\n\n      if (!itemVisual) {\n        itemVisual = itemVisuals[idx] = {};\n      }\n\n      var val = itemVisual[key];\n\n      if (val == null) {\n        val = this.getVisual(key); // TODO Performance?\n\n        if (isArray(val)) {\n          val = val.slice();\n        } else if (isObject$2(val)) {\n          val = extend({}, val);\n        }\n\n        itemVisual[key] = val;\n      }\n\n      return val;\n    }; // eslint-disable-next-line\n\n\n    SeriesData.prototype.setItemVisual = function (idx, key, value) {\n      var itemVisual = this._itemVisuals[idx] || {};\n      this._itemVisuals[idx] = itemVisual;\n\n      if (isObject$2(key)) {\n        extend(itemVisual, key);\n      } else {\n        itemVisual[key] = value;\n      }\n    };\n    /**\n     * Clear itemVisuals and list visual.\n     */\n\n\n    SeriesData.prototype.clearAllVisual = function () {\n      this._visual = {};\n      this._itemVisuals = [];\n    };\n\n    SeriesData.prototype.setLayout = function (key, val) {\n      isObject$2(key) ? extend(this._layout, key) : this._layout[key] = val;\n    };\n    /**\n     * Get layout property.\n     */\n\n\n    SeriesData.prototype.getLayout = function (key) {\n      return this._layout[key];\n    };\n    /**\n     * Get layout of single data item\n     */\n\n\n    SeriesData.prototype.getItemLayout = function (idx) {\n      return this._itemLayouts[idx];\n    };\n    /**\n     * Set layout of single data item\n     */\n\n\n    SeriesData.prototype.setItemLayout = function (idx, layout, merge$$1) {\n      this._itemLayouts[idx] = merge$$1 ? extend(this._itemLayouts[idx] || {}, layout) : layout;\n    };\n    /**\n     * Clear all layout of single data item\n     */\n\n\n    SeriesData.prototype.clearItemLayouts = function () {\n      this._itemLayouts.length = 0;\n    };\n    /**\n     * Set graphic element relative to data. It can be set as null\n     */\n\n\n    SeriesData.prototype.setItemGraphicEl = function (idx, el) {\n      var seriesIndex = this.hostModel && this.hostModel.seriesIndex;\n      setCommonECData(seriesIndex, this.dataType, idx, el);\n      this._graphicEls[idx] = el;\n    };\n\n    SeriesData.prototype.getItemGraphicEl = function (idx) {\n      return this._graphicEls[idx];\n    };\n\n    SeriesData.prototype.eachItemGraphicEl = function (cb, context) {\n      each(this._graphicEls, function (el, idx) {\n        if (el) {\n          cb && cb.call(context, el, idx);\n        }\n      });\n    };\n    /**\n     * Shallow clone a new list except visual and layout properties, and graph elements.\n     * New list only change the indices.\n     */\n\n\n    SeriesData.prototype.cloneShallow = function (list) {\n      if (!list) {\n        list = new SeriesData(this._schema ? this._schema : map$1(this.dimensions, this._getDimInfo, this), this.hostModel);\n      }\n\n      transferProperties(list, this);\n      list._store = this._store;\n      return list;\n    };\n    /**\n     * Wrap some method to add more feature\n     */\n\n\n    SeriesData.prototype.wrapMethod = function (methodName, injectFunction) {\n      var originalMethod = this[methodName];\n\n      if (!isFunction(originalMethod)) {\n        return;\n      }\n\n      this.__wrappedMethods = this.__wrappedMethods || [];\n\n      this.__wrappedMethods.push(methodName);\n\n      this[methodName] = function () {\n        var res = originalMethod.apply(this, arguments);\n        return injectFunction.apply(this, [res].concat(slice(arguments)));\n      };\n    }; // ----------------------------------------------------------\n    // A work around for internal method visiting private member.\n    // ----------------------------------------------------------\n\n\n    SeriesData.internalField = function () {\n      prepareInvertedIndex = function (data) {\n        var invertedIndicesMap = data._invertedIndicesMap;\n        each(invertedIndicesMap, function (invertedIndices, dim) {\n          var dimInfo = data._dimInfos[dim]; // Currently, only dimensions that has ordinalMeta can create inverted indices.\n\n          var ordinalMeta = dimInfo.ordinalMeta;\n          var store = data._store;\n\n          if (ordinalMeta) {\n            invertedIndices = invertedIndicesMap[dim] = new CtorInt32Array$1(ordinalMeta.categories.length); // The default value of TypedArray is 0. To avoid miss\n            // mapping to 0, we should set it as INDEX_NOT_FOUND.\n\n            for (var i = 0; i < invertedIndices.length; i++) {\n              invertedIndices[i] = INDEX_NOT_FOUND;\n            }\n\n            for (var i = 0; i < store.count(); i++) {\n              // Only support the case that all values are distinct.\n              invertedIndices[store.get(dimInfo.storeDimIndex, i)] = i;\n            }\n          }\n        });\n      };\n\n      getIdNameFromStore = function (data, dimIdx, idx) {\n        return convertOptionIdName(data._getCategory(dimIdx, idx), null);\n      };\n      /**\n       * @see the comment of `List['getId']`.\n       */\n\n\n      getId = function (data, rawIndex) {\n        var id = data._idList[rawIndex];\n\n        if (id == null && data._idDimIdx != null) {\n          id = getIdNameFromStore(data, data._idDimIdx, rawIndex);\n        }\n\n        if (id == null) {\n          id = ID_PREFIX + rawIndex;\n        }\n\n        return id;\n      };\n\n      normalizeDimensions = function (dimensions) {\n        if (!isArray(dimensions)) {\n          dimensions = dimensions != null ? [dimensions] : [];\n        }\n\n        return dimensions;\n      };\n      /**\n       * Data in excludeDimensions is copied, otherwise transfered.\n       */\n\n\n      cloneListForMapAndSample = function (original) {\n        var list = new SeriesData(original._schema ? original._schema : map$1(original.dimensions, original._getDimInfo, original), original.hostModel); // FIXME If needs stackedOn, value may already been stacked\n\n        transferProperties(list, original);\n        return list;\n      };\n\n      transferProperties = function (target, source) {\n        each(TRANSFERABLE_PROPERTIES.concat(source.__wrappedMethods || []), function (propName) {\n          if (source.hasOwnProperty(propName)) {\n            target[propName] = source[propName];\n          }\n        });\n        target.__wrappedMethods = source.__wrappedMethods;\n        each(CLONE_PROPERTIES, function (propName) {\n          target[propName] = clone(source[propName]);\n        });\n        target._calculationInfo = extend({}, source._calculationInfo);\n      };\n\n      makeIdFromName = function (data, idx) {\n        var nameList = data._nameList;\n        var idList = data._idList;\n        var nameDimIdx = data._nameDimIdx;\n        var idDimIdx = data._idDimIdx;\n        var name = nameList[idx];\n        var id = idList[idx];\n\n        if (name == null && nameDimIdx != null) {\n          nameList[idx] = name = getIdNameFromStore(data, nameDimIdx, idx);\n        }\n\n        if (id == null && idDimIdx != null) {\n          idList[idx] = id = getIdNameFromStore(data, idDimIdx, idx);\n        }\n\n        if (id == null && name != null) {\n          var nameRepeatCount = data._nameRepeatCount;\n          var nmCnt = nameRepeatCount[name] = (nameRepeatCount[name] || 0) + 1;\n          id = name;\n\n          if (nmCnt > 1) {\n            id += '__ec__' + nmCnt;\n          }\n\n          idList[idx] = id;\n        }\n      };\n    }();\n\n    return SeriesData;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * For outside usage compat (like echarts-gl are using it).\n   */\n\n\n  function createDimensions(source, opt) {\n    return prepareSeriesDataSchema(source, opt).dimensions;\n  }\n  /**\n   * This method builds the relationship between:\n   * + \"what the coord sys or series requires (see `coordDimensions`)\",\n   * + \"what the user defines (in `encode` and `dimensions`, see `opt.dimensionsDefine` and `opt.encodeDefine`)\"\n   * + \"what the data source provids (see `source`)\".\n   *\n   * Some guess strategy will be adapted if user does not define something.\n   * If no 'value' dimension specified, the first no-named dimension will be\n   * named as 'value'.\n   *\n   * @return The results are always sorted by `storeDimIndex` asc.\n   */\n\n\n  function prepareSeriesDataSchema( // TODO: TYPE completeDimensions type\n  source, opt) {\n    if (!isSourceInstance(source)) {\n      source = createSourceFromSeriesDataOption(source);\n    }\n\n    opt = opt || {};\n    var sysDims = opt.coordDimensions || [];\n    var dimsDef = opt.dimensionsDefine || source.dimensionsDefine || [];\n    var coordDimNameMap = createHashMap();\n    var resultList = [];\n    var dimCount = getDimCount(source, sysDims, dimsDef, opt.dimensionsCount); // Try to ignore unsed dimensions if sharing a high dimension datastore\n    // 30 is an experience value.\n\n    var omitUnusedDimensions = opt.canOmitUnusedDimensions && shouldOmitUnusedDimensions(dimCount);\n    var isUsingSourceDimensionsDef = dimsDef === source.dimensionsDefine;\n    var dataDimNameMap = isUsingSourceDimensionsDef ? ensureSourceDimNameMap(source) : createDimNameMap(dimsDef);\n    var encodeDef = opt.encodeDefine;\n\n    if (!encodeDef && opt.encodeDefaulter) {\n      encodeDef = opt.encodeDefaulter(source, dimCount);\n    }\n\n    var encodeDefMap = createHashMap(encodeDef);\n    var indicesMap = new CtorInt32Array(dimCount);\n\n    for (var i = 0; i < indicesMap.length; i++) {\n      indicesMap[i] = -1;\n    }\n\n    function getResultItem(dimIdx) {\n      var idx = indicesMap[dimIdx];\n\n      if (idx < 0) {\n        var dimDefItemRaw = dimsDef[dimIdx];\n        var dimDefItem = isObject(dimDefItemRaw) ? dimDefItemRaw : {\n          name: dimDefItemRaw\n        };\n        var resultItem = new SeriesDimensionDefine();\n        var userDimName = dimDefItem.name;\n\n        if (userDimName != null && dataDimNameMap.get(userDimName) != null) {\n          // Only if `series.dimensions` is defined in option\n          // displayName, will be set, and dimension will be diplayed vertically in\n          // tooltip by default.\n          resultItem.name = resultItem.displayName = userDimName;\n        }\n\n        dimDefItem.type != null && (resultItem.type = dimDefItem.type);\n        dimDefItem.displayName != null && (resultItem.displayName = dimDefItem.displayName);\n        var newIdx = resultList.length;\n        indicesMap[dimIdx] = newIdx;\n        resultItem.storeDimIndex = dimIdx;\n        resultList.push(resultItem);\n        return resultItem;\n      }\n\n      return resultList[idx];\n    }\n\n    if (!omitUnusedDimensions) {\n      for (var i = 0; i < dimCount; i++) {\n        getResultItem(i);\n      }\n    } // Set `coordDim` and `coordDimIndex` by `encodeDefMap` and normalize `encodeDefMap`.\n\n\n    encodeDefMap.each(function (dataDimsRaw, coordDim) {\n      var dataDims = normalizeToArray(dataDimsRaw).slice(); // Note: It is allowed that `dataDims.length` is `0`, e.g., options is\n      // `{encode: {x: -1, y: 1}}`. Should not filter anything in\n      // this case.\n\n      if (dataDims.length === 1 && !isString(dataDims[0]) && dataDims[0] < 0) {\n        encodeDefMap.set(coordDim, false);\n        return;\n      }\n\n      var validDataDims = encodeDefMap.set(coordDim, []);\n      each(dataDims, function (resultDimIdxOrName, idx) {\n        // The input resultDimIdx can be dim name or index.\n        var resultDimIdx = isString(resultDimIdxOrName) ? dataDimNameMap.get(resultDimIdxOrName) : resultDimIdxOrName;\n\n        if (resultDimIdx != null && resultDimIdx < dimCount) {\n          validDataDims[idx] = resultDimIdx;\n          applyDim(getResultItem(resultDimIdx), coordDim, idx);\n        }\n      });\n    }); // Apply templetes and default order from `sysDims`.\n\n    var availDimIdx = 0;\n    each(sysDims, function (sysDimItemRaw) {\n      var coordDim;\n      var sysDimItemDimsDef;\n      var sysDimItemOtherDims;\n      var sysDimItem;\n\n      if (isString(sysDimItemRaw)) {\n        coordDim = sysDimItemRaw;\n        sysDimItem = {};\n      } else {\n        sysDimItem = sysDimItemRaw;\n        coordDim = sysDimItem.name;\n        var ordinalMeta = sysDimItem.ordinalMeta;\n        sysDimItem.ordinalMeta = null;\n        sysDimItem = extend({}, sysDimItem);\n        sysDimItem.ordinalMeta = ordinalMeta; // `coordDimIndex` should not be set directly.\n\n        sysDimItemDimsDef = sysDimItem.dimsDef;\n        sysDimItemOtherDims = sysDimItem.otherDims;\n        sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex = sysDimItem.dimsDef = sysDimItem.otherDims = null;\n      }\n\n      var dataDims = encodeDefMap.get(coordDim); // negative resultDimIdx means no need to mapping.\n\n      if (dataDims === false) {\n        return;\n      }\n\n      dataDims = normalizeToArray(dataDims); // dimensions provides default dim sequences.\n\n      if (!dataDims.length) {\n        for (var i = 0; i < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i++) {\n          while (availDimIdx < dimCount && getResultItem(availDimIdx).coordDim != null) {\n            availDimIdx++;\n          }\n\n          availDimIdx < dimCount && dataDims.push(availDimIdx++);\n        }\n      } // Apply templates.\n\n\n      each(dataDims, function (resultDimIdx, coordDimIndex) {\n        var resultItem = getResultItem(resultDimIdx); // Coordinate system has a higher priority on dim type than source.\n\n        if (isUsingSourceDimensionsDef && sysDimItem.type != null) {\n          resultItem.type = sysDimItem.type;\n        }\n\n        applyDim(defaults(resultItem, sysDimItem), coordDim, coordDimIndex);\n\n        if (resultItem.name == null && sysDimItemDimsDef) {\n          var sysDimItemDimsDefItem = sysDimItemDimsDef[coordDimIndex];\n          !isObject(sysDimItemDimsDefItem) && (sysDimItemDimsDefItem = {\n            name: sysDimItemDimsDefItem\n          });\n          resultItem.name = resultItem.displayName = sysDimItemDimsDefItem.name;\n          resultItem.defaultTooltip = sysDimItemDimsDefItem.defaultTooltip;\n        } // FIXME refactor, currently only used in case: {otherDims: {tooltip: false}}\n\n\n        sysDimItemOtherDims && defaults(resultItem.otherDims, sysDimItemOtherDims);\n      });\n    });\n\n    function applyDim(resultItem, coordDim, coordDimIndex) {\n      if (VISUAL_DIMENSIONS.get(coordDim) != null) {\n        resultItem.otherDims[coordDim] = coordDimIndex;\n      } else {\n        resultItem.coordDim = coordDim;\n        resultItem.coordDimIndex = coordDimIndex;\n        coordDimNameMap.set(coordDim, true);\n      }\n    } // Make sure the first extra dim is 'value'.\n\n\n    var generateCoord = opt.generateCoord;\n    var generateCoordCount = opt.generateCoordCount;\n    var fromZero = generateCoordCount != null;\n    generateCoordCount = generateCoord ? generateCoordCount || 1 : 0;\n    var extra = generateCoord || 'value';\n\n    function ifNoNameFillWithCoordName(resultItem) {\n      if (resultItem.name == null) {\n        // Duplication will be removed in the next step.\n        resultItem.name = resultItem.coordDim;\n      }\n    } // Set dim `name` and other `coordDim` and other props.\n\n\n    if (!omitUnusedDimensions) {\n      for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {\n        var resultItem = getResultItem(resultDimIdx);\n        var coordDim = resultItem.coordDim;\n\n        if (coordDim == null) {\n          // TODO no need to generate coordDim for isExtraCoord?\n          resultItem.coordDim = genCoordDimName(extra, coordDimNameMap, fromZero);\n          resultItem.coordDimIndex = 0; // Series specified generateCoord is using out.\n\n          if (!generateCoord || generateCoordCount <= 0) {\n            resultItem.isExtraCoord = true;\n          }\n\n          generateCoordCount--;\n        }\n\n        ifNoNameFillWithCoordName(resultItem);\n\n        if (resultItem.type == null && (guessOrdinal(source, resultDimIdx) === BE_ORDINAL.Must // Consider the case:\n        // {\n        //    dataset: {source: [\n        //        ['2001', 123],\n        //        ['2002', 456],\n        //        ...\n        //        ['The others', 987],\n        //    ]},\n        //    series: {type: 'pie'}\n        // }\n        // The first colum should better be treated as a \"ordinal\" although it\n        // might not able to be detected as an \"ordinal\" by `guessOrdinal`.\n        || resultItem.isExtraCoord && (resultItem.otherDims.itemName != null || resultItem.otherDims.seriesName != null))) {\n          resultItem.type = 'ordinal';\n        }\n      }\n    } else {\n      each(resultList, function (resultItem) {\n        // PENDING: guessOrdinal or let user specify type: 'ordinal' manually?\n        ifNoNameFillWithCoordName(resultItem);\n      }); // Sort dimensions: there are some rule that use the last dim as label,\n      // and for some latter travel process easier.\n\n      resultList.sort(function (item0, item1) {\n        return item0.storeDimIndex - item1.storeDimIndex;\n      });\n    }\n\n    removeDuplication(resultList);\n    return new SeriesDataSchema({\n      source: source,\n      dimensions: resultList,\n      fullDimensionCount: dimCount,\n      dimensionOmitted: omitUnusedDimensions\n    });\n  }\n\n  function removeDuplication(result) {\n    var duplicationMap = createHashMap();\n\n    for (var i = 0; i < result.length; i++) {\n      var dim = result[i];\n      var dimOriginalName = dim.name;\n      var count = duplicationMap.get(dimOriginalName) || 0;\n\n      if (count > 0) {\n        // Starts from 0.\n        dim.name = dimOriginalName + (count - 1);\n      }\n\n      count++;\n      duplicationMap.set(dimOriginalName, count);\n    }\n  } // ??? TODO\n  // Originally detect dimCount by data[0]. Should we\n  // optimize it to only by sysDims and dimensions and encode.\n  // So only necessary dims will be initialized.\n  // But\n  // (1) custom series should be considered. where other dims\n  // may be visited.\n  // (2) sometimes user need to calcualte bubble size or use visualMap\n  // on other dimensions besides coordSys needed.\n  // So, dims that is not used by system, should be shared in data store?\n\n\n  function getDimCount(source, sysDims, dimsDef, optDimCount) {\n    // Note that the result dimCount should not small than columns count\n    // of data, otherwise `dataDimNameMap` checking will be incorrect.\n    var dimCount = Math.max(source.dimensionsDetectedCount || 1, sysDims.length, dimsDef.length, optDimCount || 0);\n    each(sysDims, function (sysDimItem) {\n      var sysDimItemDimsDef;\n\n      if (isObject(sysDimItem) && (sysDimItemDimsDef = sysDimItem.dimsDef)) {\n        dimCount = Math.max(dimCount, sysDimItemDimsDef.length);\n      }\n    });\n    return dimCount;\n  }\n\n  function genCoordDimName(name, map$$1, fromZero) {\n    var mapData = map$$1.data;\n\n    if (fromZero || mapData.hasOwnProperty(name)) {\n      var i = 0;\n\n      while (mapData.hasOwnProperty(name + i)) {\n        i++;\n      }\n\n      name += i;\n    }\n\n    map$$1.set(name, true);\n    return name;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Helper for model references.\n   * There are many manners to refer axis/coordSys.\n   */\n  // TODO\n  // merge relevant logic to this file?\n  // check: \"modelHelper\" of tooltip and \"BrushTargetManager\".\n\n  /**\n   * @class\n   * For example:\n   * {\n   *     coordSysName: 'cartesian2d',\n   *     coordSysDims: ['x', 'y', ...],\n   *     axisMap: HashMap({\n   *         x: xAxisModel,\n   *         y: yAxisModel\n   *     }),\n   *     categoryAxisMap: HashMap({\n   *         x: xAxisModel,\n   *         y: undefined\n   *     }),\n   *     // The index of the first category axis in `coordSysDims`.\n   *     // `null/undefined` means no category axis exists.\n   *     firstCategoryDimIndex: 1,\n   *     // To replace user specified encode.\n   * }\n   */\n\n\n  var CoordSysInfo =\n  /** @class */\n  function () {\n    function CoordSysInfo(coordSysName) {\n      this.coordSysDims = [];\n      this.axisMap = createHashMap();\n      this.categoryAxisMap = createHashMap();\n      this.coordSysName = coordSysName;\n    }\n\n    return CoordSysInfo;\n  }();\n\n  function getCoordSysInfoBySeries(seriesModel) {\n    var coordSysName = seriesModel.get('coordinateSystem');\n    var result = new CoordSysInfo(coordSysName);\n    var fetch = fetchers[coordSysName];\n\n    if (fetch) {\n      fetch(seriesModel, result, result.axisMap, result.categoryAxisMap);\n      return result;\n    }\n  }\n\n  var fetchers = {\n    cartesian2d: function (seriesModel, result, axisMap, categoryAxisMap) {\n      var xAxisModel = seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n      var yAxisModel = seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n      {\n        if (!xAxisModel) {\n          throw new Error('xAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('xAxisId'), 0) + '\" not found');\n        }\n\n        if (!yAxisModel) {\n          throw new Error('yAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('yAxisId'), 0) + '\" not found');\n        }\n      }\n      result.coordSysDims = ['x', 'y'];\n      axisMap.set('x', xAxisModel);\n      axisMap.set('y', yAxisModel);\n\n      if (isCategory(xAxisModel)) {\n        categoryAxisMap.set('x', xAxisModel);\n        result.firstCategoryDimIndex = 0;\n      }\n\n      if (isCategory(yAxisModel)) {\n        categoryAxisMap.set('y', yAxisModel);\n        result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n      }\n    },\n    singleAxis: function (seriesModel, result, axisMap, categoryAxisMap) {\n      var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n      {\n        if (!singleAxisModel) {\n          throw new Error('singleAxis should be specified.');\n        }\n      }\n      result.coordSysDims = ['single'];\n      axisMap.set('single', singleAxisModel);\n\n      if (isCategory(singleAxisModel)) {\n        categoryAxisMap.set('single', singleAxisModel);\n        result.firstCategoryDimIndex = 0;\n      }\n    },\n    polar: function (seriesModel, result, axisMap, categoryAxisMap) {\n      var polarModel = seriesModel.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n      var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n      var angleAxisModel = polarModel.findAxisModel('angleAxis');\n      {\n        if (!angleAxisModel) {\n          throw new Error('angleAxis option not found');\n        }\n\n        if (!radiusAxisModel) {\n          throw new Error('radiusAxis option not found');\n        }\n      }\n      result.coordSysDims = ['radius', 'angle'];\n      axisMap.set('radius', radiusAxisModel);\n      axisMap.set('angle', angleAxisModel);\n\n      if (isCategory(radiusAxisModel)) {\n        categoryAxisMap.set('radius', radiusAxisModel);\n        result.firstCategoryDimIndex = 0;\n      }\n\n      if (isCategory(angleAxisModel)) {\n        categoryAxisMap.set('angle', angleAxisModel);\n        result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n      }\n    },\n    geo: function (seriesModel, result, axisMap, categoryAxisMap) {\n      result.coordSysDims = ['lng', 'lat'];\n    },\n    parallel: function (seriesModel, result, axisMap, categoryAxisMap) {\n      var ecModel = seriesModel.ecModel;\n      var parallelModel = ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n      var coordSysDims = result.coordSysDims = parallelModel.dimensions.slice();\n      each(parallelModel.parallelAxisIndex, function (axisIndex, index) {\n        var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n        var axisDim = coordSysDims[index];\n        axisMap.set(axisDim, axisModel);\n\n        if (isCategory(axisModel)) {\n          categoryAxisMap.set(axisDim, axisModel);\n\n          if (result.firstCategoryDimIndex == null) {\n            result.firstCategoryDimIndex = index;\n          }\n        }\n      });\n    }\n  };\n\n  function isCategory(axisModel) {\n    return axisModel.get('type') === 'category';\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Note that it is too complicated to support 3d stack by value\n   * (have to create two-dimension inverted index), so in 3d case\n   * we just support that stacked by index.\n   *\n   * @param seriesModel\n   * @param dimensionsInput The same as the input of <module:echarts/data/SeriesData>.\n   *        The input will be modified.\n   * @param opt\n   * @param opt.stackedCoordDimension Specify a coord dimension if needed.\n   * @param opt.byIndex=false\n   * @return calculationInfo\n   * {\n   *     stackedDimension: string\n   *     stackedByDimension: string\n   *     isStackedByIndex: boolean\n   *     stackedOverDimension: string\n   *     stackResultDimension: string\n   * }\n   */\n\n\n  function enableDataStack(seriesModel, dimensionsInput, opt) {\n    opt = opt || {};\n    var byIndex = opt.byIndex;\n    var stackedCoordDimension = opt.stackedCoordDimension;\n    var dimensionDefineList;\n    var schema;\n    var store;\n\n    if (isLegacyDimensionsInput(dimensionsInput)) {\n      dimensionDefineList = dimensionsInput;\n    } else {\n      schema = dimensionsInput.schema;\n      dimensionDefineList = schema.dimensions;\n      store = dimensionsInput.store;\n    } // Compatibal: when `stack` is set as '', do not stack.\n\n\n    var mayStack = !!(seriesModel && seriesModel.get('stack'));\n    var stackedByDimInfo;\n    var stackedDimInfo;\n    var stackResultDimension;\n    var stackedOverDimension;\n    each(dimensionDefineList, function (dimensionInfo, index) {\n      if (isString(dimensionInfo)) {\n        dimensionDefineList[index] = dimensionInfo = {\n          name: dimensionInfo\n        };\n      }\n\n      if (mayStack && !dimensionInfo.isExtraCoord) {\n        // Find the first ordinal dimension as the stackedByDimInfo.\n        if (!byIndex && !stackedByDimInfo && dimensionInfo.ordinalMeta) {\n          stackedByDimInfo = dimensionInfo;\n        } // Find the first stackable dimension as the stackedDimInfo.\n\n\n        if (!stackedDimInfo && dimensionInfo.type !== 'ordinal' && dimensionInfo.type !== 'time' && (!stackedCoordDimension || stackedCoordDimension === dimensionInfo.coordDim)) {\n          stackedDimInfo = dimensionInfo;\n        }\n      }\n    });\n\n    if (stackedDimInfo && !byIndex && !stackedByDimInfo) {\n      // Compatible with previous design, value axis (time axis) only stack by index.\n      // It may make sense if the user provides elaborately constructed data.\n      byIndex = true;\n    } // Add stack dimension, they can be both calculated by coordinate system in `unionExtent`.\n    // That put stack logic in List is for using conveniently in echarts extensions, but it\n    // might not be a good way.\n\n\n    if (stackedDimInfo) {\n      // Use a weird name that not duplicated with other names.\n      // Also need to use seriesModel.id as postfix because different\n      // series may share same data store. The stack dimension needs to be distinguished.\n      stackResultDimension = '__\\0ecstackresult_' + seriesModel.id;\n      stackedOverDimension = '__\\0ecstackedover_' + seriesModel.id; // Create inverted index to fast query index by value.\n\n      if (stackedByDimInfo) {\n        stackedByDimInfo.createInvertedIndices = true;\n      }\n\n      var stackedDimCoordDim_1 = stackedDimInfo.coordDim;\n      var stackedDimType = stackedDimInfo.type;\n      var stackedDimCoordIndex_1 = 0;\n      each(dimensionDefineList, function (dimensionInfo) {\n        if (dimensionInfo.coordDim === stackedDimCoordDim_1) {\n          stackedDimCoordIndex_1++;\n        }\n      });\n      var stackedOverDimensionDefine = {\n        name: stackResultDimension,\n        coordDim: stackedDimCoordDim_1,\n        coordDimIndex: stackedDimCoordIndex_1,\n        type: stackedDimType,\n        isExtraCoord: true,\n        isCalculationCoord: true,\n        storeDimIndex: dimensionDefineList.length\n      };\n      var stackResultDimensionDefine = {\n        name: stackedOverDimension,\n        // This dimension contains stack base (generally, 0), so do not set it as\n        // `stackedDimCoordDim` to avoid extent calculation, consider log scale.\n        coordDim: stackedOverDimension,\n        coordDimIndex: stackedDimCoordIndex_1 + 1,\n        type: stackedDimType,\n        isExtraCoord: true,\n        isCalculationCoord: true,\n        storeDimIndex: dimensionDefineList.length + 1\n      };\n\n      if (schema) {\n        if (store) {\n          stackedOverDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackedOverDimension, stackedDimType);\n          stackResultDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackResultDimension, stackedDimType);\n        }\n\n        schema.appendCalculationDimension(stackedOverDimensionDefine);\n        schema.appendCalculationDimension(stackResultDimensionDefine);\n      } else {\n        dimensionDefineList.push(stackedOverDimensionDefine);\n        dimensionDefineList.push(stackResultDimensionDefine);\n      }\n    }\n\n    return {\n      stackedDimension: stackedDimInfo && stackedDimInfo.name,\n      stackedByDimension: stackedByDimInfo && stackedByDimInfo.name,\n      isStackedByIndex: byIndex,\n      stackedOverDimension: stackedOverDimension,\n      stackResultDimension: stackResultDimension\n    };\n  }\n\n  function isLegacyDimensionsInput(dimensionsInput) {\n    return !isSeriesDataSchema(dimensionsInput.schema);\n  }\n\n  function isDimensionStacked(data, stackedDim) {\n    // Each single series only maps to one pair of axis. So we do not need to\n    // check stackByDim, whatever stacked by a dimension or stacked by index.\n    return !!stackedDim && stackedDim === data.getCalculationInfo('stackedDimension');\n  }\n\n  function getStackedDimension(data, targetDim) {\n    return isDimensionStacked(data, targetDim) ? data.getCalculationInfo('stackResultDimension') : targetDim;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function getCoordSysDimDefs(seriesModel, coordSysInfo) {\n    var coordSysName = seriesModel.get('coordinateSystem');\n    var registeredCoordSys = CoordinateSystemManager.get(coordSysName);\n    var coordSysDimDefs;\n\n    if (coordSysInfo && coordSysInfo.coordSysDims) {\n      coordSysDimDefs = map(coordSysInfo.coordSysDims, function (dim) {\n        var dimInfo = {\n          name: dim\n        };\n        var axisModel = coordSysInfo.axisMap.get(dim);\n\n        if (axisModel) {\n          var axisType = axisModel.get('type');\n          dimInfo.type = getDimensionTypeByAxis(axisType);\n        }\n\n        return dimInfo;\n      });\n    }\n\n    if (!coordSysDimDefs) {\n      // Get dimensions from registered coordinate system\n      coordSysDimDefs = registeredCoordSys && (registeredCoordSys.getDimensionsInfo ? registeredCoordSys.getDimensionsInfo() : registeredCoordSys.dimensions.slice()) || ['x', 'y'];\n    }\n\n    return coordSysDimDefs;\n  }\n\n  function injectOrdinalMeta(dimInfoList, createInvertedIndices, coordSysInfo) {\n    var firstCategoryDimIndex;\n    var hasNameEncode;\n    coordSysInfo && each(dimInfoList, function (dimInfo, dimIndex) {\n      var coordDim = dimInfo.coordDim;\n      var categoryAxisModel = coordSysInfo.categoryAxisMap.get(coordDim);\n\n      if (categoryAxisModel) {\n        if (firstCategoryDimIndex == null) {\n          firstCategoryDimIndex = dimIndex;\n        }\n\n        dimInfo.ordinalMeta = categoryAxisModel.getOrdinalMeta();\n\n        if (createInvertedIndices) {\n          dimInfo.createInvertedIndices = true;\n        }\n      }\n\n      if (dimInfo.otherDims.itemName != null) {\n        hasNameEncode = true;\n      }\n    });\n\n    if (!hasNameEncode && firstCategoryDimIndex != null) {\n      dimInfoList[firstCategoryDimIndex].otherDims.itemName = 0;\n    }\n\n    return firstCategoryDimIndex;\n  }\n  /**\n   * Caution: there are side effects to `sourceManager` in this method.\n   * Should better only be called in `Series['getInitialData']`.\n   */\n\n\n  function createSeriesData(sourceRaw, seriesModel, opt) {\n    opt = opt || {};\n    var sourceManager = seriesModel.getSourceManager();\n    var source;\n    var isOriginalSource = false;\n\n    if (sourceRaw) {\n      isOriginalSource = true;\n      source = createSourceFromSeriesDataOption(sourceRaw);\n    } else {\n      source = sourceManager.getSource(); // Is series.data. not dataset.\n\n      isOriginalSource = source.sourceFormat === SOURCE_FORMAT_ORIGINAL;\n    }\n\n    var coordSysInfo = getCoordSysInfoBySeries(seriesModel);\n    var coordSysDimDefs = getCoordSysDimDefs(seriesModel, coordSysInfo);\n    var useEncodeDefaulter = opt.useEncodeDefaulter;\n    var encodeDefaulter = isFunction(useEncodeDefaulter) ? useEncodeDefaulter : useEncodeDefaulter ? curry(makeSeriesEncodeForAxisCoordSys, coordSysDimDefs, seriesModel) : null;\n    var createDimensionOptions = {\n      coordDimensions: coordSysDimDefs,\n      generateCoord: opt.generateCoord,\n      encodeDefine: seriesModel.getEncode(),\n      encodeDefaulter: encodeDefaulter,\n      canOmitUnusedDimensions: !isOriginalSource\n    };\n    var schema = prepareSeriesDataSchema(source, createDimensionOptions);\n    var firstCategoryDimIndex = injectOrdinalMeta(schema.dimensions, opt.createInvertedIndices, coordSysInfo);\n    var store = !isOriginalSource ? sourceManager.getSharedDataStore(schema) : null;\n    var stackCalculationInfo = enableDataStack(seriesModel, {\n      schema: schema,\n      store: store\n    });\n    var data = new SeriesData(schema, seriesModel);\n    data.setCalculationInfo(stackCalculationInfo);\n    var dimValueGetter = firstCategoryDimIndex != null && isNeedCompleteOrdinalData(source) ? function (itemOpt, dimName, dataIndex, dimIndex) {\n      // Use dataIndex as ordinal value in categoryAxis\n      return dimIndex === firstCategoryDimIndex ? dataIndex : this.defaultDimValueGetter(itemOpt, dimName, dataIndex, dimIndex);\n    } : null;\n    data.hasItemOption = false;\n    data.initData( // Try to reuse the data store in sourceManager if using dataset.\n    isOriginalSource ? source : store, null, dimValueGetter);\n    return data;\n  }\n\n  function isNeedCompleteOrdinalData(source) {\n    if (source.sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n      var sampleItem = firstDataNotNull(source.data || []);\n      return !isArray(getDataItemValue(sampleItem));\n    }\n  }\n\n  function firstDataNotNull(arr) {\n    var i = 0;\n\n    while (i < arr.length && arr[i] == null) {\n      i++;\n    }\n\n    return arr[i];\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var Scale =\n  /** @class */\n  function () {\n    function Scale(setting) {\n      this._setting = setting || {};\n      this._extent = [Infinity, -Infinity];\n    }\n\n    Scale.prototype.getSetting = function (name) {\n      return this._setting[name];\n    };\n    /**\n     * Set extent from data\n     */\n\n\n    Scale.prototype.unionExtent = function (other) {\n      var extent = this._extent;\n      other[0] < extent[0] && (extent[0] = other[0]);\n      other[1] > extent[1] && (extent[1] = other[1]); // not setExtent because in log axis it may transformed to power\n      // this.setExtent(extent[0], extent[1]);\n    };\n    /**\n     * Set extent from data\n     */\n\n\n    Scale.prototype.unionExtentFromData = function (data, dim) {\n      this.unionExtent(data.getApproximateExtent(dim));\n    };\n    /**\n     * Get extent\n     *\n     * Extent is always in increase order.\n     */\n\n\n    Scale.prototype.getExtent = function () {\n      return this._extent.slice();\n    };\n    /**\n     * Set extent\n     */\n\n\n    Scale.prototype.setExtent = function (start, end) {\n      var thisExtent = this._extent;\n\n      if (!isNaN(start)) {\n        thisExtent[0] = start;\n      }\n\n      if (!isNaN(end)) {\n        thisExtent[1] = end;\n      }\n    };\n    /**\n     * If value is in extent range\n     */\n\n\n    Scale.prototype.isInExtentRange = function (value) {\n      return this._extent[0] <= value && this._extent[1] >= value;\n    };\n    /**\n     * When axis extent depends on data and no data exists,\n     * axis ticks should not be drawn, which is named 'blank'.\n     */\n\n\n    Scale.prototype.isBlank = function () {\n      return this._isBlank;\n    };\n    /**\n     * When axis extent depends on data and no data exists,\n     * axis ticks should not be drawn, which is named 'blank'.\n     */\n\n\n    Scale.prototype.setBlank = function (isBlank) {\n      this._isBlank = isBlank;\n    };\n\n    return Scale;\n  }();\n\n  enableClassManagement(Scale);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var uidBase = 0;\n\n  var OrdinalMeta =\n  /** @class */\n  function () {\n    function OrdinalMeta(opt) {\n      this.categories = opt.categories || [];\n      this._needCollect = opt.needCollect;\n      this._deduplication = opt.deduplication;\n      this.uid = ++uidBase;\n    }\n\n    OrdinalMeta.createByAxisModel = function (axisModel) {\n      var option = axisModel.option;\n      var data = option.data;\n      var categories = data && map(data, getName);\n      return new OrdinalMeta({\n        categories: categories,\n        needCollect: !categories,\n        // deduplication is default in axis.\n        deduplication: option.dedplication !== false\n      });\n    };\n\n    OrdinalMeta.prototype.getOrdinal = function (category) {\n      // @ts-ignore\n      return this._getOrCreateMap().get(category);\n    };\n    /**\n     * @return The ordinal. If not found, return NaN.\n     */\n\n\n    OrdinalMeta.prototype.parseAndCollect = function (category) {\n      var index;\n      var needCollect = this._needCollect; // The value of category dim can be the index of the given category set.\n      // This feature is only supported when !needCollect, because we should\n      // consider a common case: a value is 2017, which is a number but is\n      // expected to be tread as a category. This case usually happen in dataset,\n      // where it happent to be no need of the index feature.\n\n      if (!isString(category) && !needCollect) {\n        return category;\n      } // Optimize for the scenario:\n      // category is ['2012-01-01', '2012-01-02', ...], where the input\n      // data has been ensured not duplicate and is large data.\n      // Notice, if a dataset dimension provide categroies, usually echarts\n      // should remove duplication except user tell echarts dont do that\n      // (set axis.deduplication = false), because echarts do not know whether\n      // the values in the category dimension has duplication (consider the\n      // parallel-aqi example)\n\n\n      if (needCollect && !this._deduplication) {\n        index = this.categories.length;\n        this.categories[index] = category;\n        return index;\n      }\n\n      var map$$1 = this._getOrCreateMap(); // @ts-ignore\n\n\n      index = map$$1.get(category);\n\n      if (index == null) {\n        if (needCollect) {\n          index = this.categories.length;\n          this.categories[index] = category; // @ts-ignore\n\n          map$$1.set(category, index);\n        } else {\n          index = NaN;\n        }\n      }\n\n      return index;\n    }; // Consider big data, do not create map until needed.\n\n\n    OrdinalMeta.prototype._getOrCreateMap = function () {\n      return this._map || (this._map = createHashMap(this.categories));\n    };\n\n    return OrdinalMeta;\n  }();\n\n  function getName(obj) {\n    if (isObject(obj) && obj.value != null) {\n      return obj.value;\n    } else {\n      return obj + '';\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function isValueNice(val) {\n    var exp10 = Math.pow(10, quantityExponent(Math.abs(val)));\n    var f = Math.abs(val / exp10);\n    return f === 0 || f === 1 || f === 2 || f === 3 || f === 5;\n  }\n\n  function isIntervalOrLogScale(scale) {\n    return scale.type === 'interval' || scale.type === 'log';\n  }\n  /**\n   * @param extent Both extent[0] and extent[1] should be valid number.\n   *               Should be extent[0] < extent[1].\n   * @param splitNumber splitNumber should be >= 1.\n   */\n\n\n  function intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval) {\n    var result = {};\n    var span = extent[1] - extent[0];\n    var interval = result.interval = nice(span / splitNumber, true);\n\n    if (minInterval != null && interval < minInterval) {\n      interval = result.interval = minInterval;\n    }\n\n    if (maxInterval != null && interval > maxInterval) {\n      interval = result.interval = maxInterval;\n    } // Tow more digital for tick.\n\n\n    var precision = result.intervalPrecision = getIntervalPrecision(interval); // Niced extent inside original extent\n\n    var niceTickExtent = result.niceTickExtent = [round(Math.ceil(extent[0] / interval) * interval, precision), round(Math.floor(extent[1] / interval) * interval, precision)];\n    fixExtent(niceTickExtent, extent);\n    return result;\n  }\n\n  function increaseInterval(interval) {\n    var exp10 = Math.pow(10, quantityExponent(interval)); // Increase interval\n\n    var f = interval / exp10;\n\n    if (!f) {\n      f = 1;\n    } else if (f === 2) {\n      f = 3;\n    } else if (f === 3) {\n      f = 5;\n    } else {\n      // f is 1 or 5\n      f *= 2;\n    }\n\n    return round(f * exp10);\n  }\n  /**\n   * @return interval precision\n   */\n\n\n  function getIntervalPrecision(interval) {\n    // Tow more digital for tick.\n    return getPrecision(interval) + 2;\n  }\n\n  function clamp(niceTickExtent, idx, extent) {\n    niceTickExtent[idx] = Math.max(Math.min(niceTickExtent[idx], extent[1]), extent[0]);\n  } // In some cases (e.g., splitNumber is 1), niceTickExtent may be out of extent.\n\n\n  function fixExtent(niceTickExtent, extent) {\n    !isFinite(niceTickExtent[0]) && (niceTickExtent[0] = extent[0]);\n    !isFinite(niceTickExtent[1]) && (niceTickExtent[1] = extent[1]);\n    clamp(niceTickExtent, 0, extent);\n    clamp(niceTickExtent, 1, extent);\n\n    if (niceTickExtent[0] > niceTickExtent[1]) {\n      niceTickExtent[0] = niceTickExtent[1];\n    }\n  }\n\n  function contain$1(val, extent) {\n    return val >= extent[0] && val <= extent[1];\n  }\n\n  function normalize$1(val, extent) {\n    if (extent[1] === extent[0]) {\n      return 0.5;\n    }\n\n    return (val - extent[0]) / (extent[1] - extent[0]);\n  }\n\n  function scale$2(val, extent) {\n    return val * (extent[1] - extent[0]) + extent[0];\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Linear continuous scale\n   * http://en.wikipedia.org/wiki/Level_of_measurement\n   */\n  // FIXME only one data\n\n\n  var OrdinalScale =\n  /** @class */\n  function (_super) {\n    __extends(OrdinalScale, _super);\n\n    function OrdinalScale(setting) {\n      var _this = _super.call(this, setting) || this;\n\n      _this.type = 'ordinal';\n\n      var ordinalMeta = _this.getSetting('ordinalMeta'); // Caution: Should not use instanceof, consider ec-extensions using\n      // import approach to get OrdinalMeta class.\n\n\n      if (!ordinalMeta) {\n        ordinalMeta = new OrdinalMeta({});\n      }\n\n      if (isArray(ordinalMeta)) {\n        ordinalMeta = new OrdinalMeta({\n          categories: map(ordinalMeta, function (item) {\n            return isObject(item) ? item.value : item;\n          })\n        });\n      }\n\n      _this._ordinalMeta = ordinalMeta;\n      _this._extent = _this.getSetting('extent') || [0, ordinalMeta.categories.length - 1];\n      return _this;\n    }\n\n    OrdinalScale.prototype.parse = function (val) {\n      // Caution: Math.round(null) will return `0` rather than `NaN`\n      if (val == null) {\n        return NaN;\n      }\n\n      return isString(val) ? this._ordinalMeta.getOrdinal(val) // val might be float.\n      : Math.round(val);\n    };\n\n    OrdinalScale.prototype.contain = function (rank) {\n      rank = this.parse(rank);\n      return contain$1(rank, this._extent) && this._ordinalMeta.categories[rank] != null;\n    };\n    /**\n     * Normalize given rank or name to linear [0, 1]\n     * @param val raw ordinal number.\n     * @return normalized value in [0, 1].\n     */\n\n\n    OrdinalScale.prototype.normalize = function (val) {\n      val = this._getTickNumber(this.parse(val));\n      return normalize$1(val, this._extent);\n    };\n    /**\n     * @param val normalized value in [0, 1].\n     * @return raw ordinal number.\n     */\n\n\n    OrdinalScale.prototype.scale = function (val) {\n      val = Math.round(scale$2(val, this._extent));\n      return this.getRawOrdinalNumber(val);\n    };\n\n    OrdinalScale.prototype.getTicks = function () {\n      var ticks = [];\n      var extent = this._extent;\n      var rank = extent[0];\n\n      while (rank <= extent[1]) {\n        ticks.push({\n          value: rank\n        });\n        rank++;\n      }\n\n      return ticks;\n    };\n\n    OrdinalScale.prototype.getMinorTicks = function (splitNumber) {\n      // Not support.\n      return;\n    };\n    /**\n     * @see `Ordinal['_ordinalNumbersByTick']`\n     */\n\n\n    OrdinalScale.prototype.setSortInfo = function (info) {\n      if (info == null) {\n        this._ordinalNumbersByTick = this._ticksByOrdinalNumber = null;\n        return;\n      }\n\n      var infoOrdinalNumbers = info.ordinalNumbers;\n      var ordinalsByTick = this._ordinalNumbersByTick = [];\n      var ticksByOrdinal = this._ticksByOrdinalNumber = []; // Unnecessary support negative tick in `realtimeSort`.\n\n      var tickNum = 0;\n      var allCategoryLen = this._ordinalMeta.categories.length;\n\n      for (var len = Math.min(allCategoryLen, infoOrdinalNumbers.length); tickNum < len; ++tickNum) {\n        var ordinalNumber = infoOrdinalNumbers[tickNum];\n        ordinalsByTick[tickNum] = ordinalNumber;\n        ticksByOrdinal[ordinalNumber] = tickNum;\n      } // Handle that `series.data` only covers part of the `axis.category.data`.\n\n\n      var unusedOrdinal = 0;\n\n      for (; tickNum < allCategoryLen; ++tickNum) {\n        while (ticksByOrdinal[unusedOrdinal] != null) {\n          unusedOrdinal++;\n        }\n\n        ordinalsByTick.push(unusedOrdinal);\n        ticksByOrdinal[unusedOrdinal] = tickNum;\n      }\n    };\n\n    OrdinalScale.prototype._getTickNumber = function (ordinal) {\n      var ticksByOrdinalNumber = this._ticksByOrdinalNumber; // also support ordinal out of range of `ordinalMeta.categories.length`,\n      // where ordinal numbers are used as tick value directly.\n\n      return ticksByOrdinalNumber && ordinal >= 0 && ordinal < ticksByOrdinalNumber.length ? ticksByOrdinalNumber[ordinal] : ordinal;\n    };\n    /**\n     * @usage\n     * ```js\n     * const ordinalNumber = ordinalScale.getRawOrdinalNumber(tickVal);\n     *\n     * // case0\n     * const rawOrdinalValue = axisModel.getCategories()[ordinalNumber];\n     * // case1\n     * const rawOrdinalValue = this._ordinalMeta.categories[ordinalNumber];\n     * // case2\n     * const coord = axis.dataToCoord(ordinalNumber);\n     * ```\n     *\n     * @param {OrdinalNumber} tickNumber index of display\n     */\n\n\n    OrdinalScale.prototype.getRawOrdinalNumber = function (tickNumber) {\n      var ordinalNumbersByTick = this._ordinalNumbersByTick; // tickNumber may be out of range, e.g., when axis max is larger than `ordinalMeta.categories.length`.,\n      // where ordinal numbers are used as tick value directly.\n\n      return ordinalNumbersByTick && tickNumber >= 0 && tickNumber < ordinalNumbersByTick.length ? ordinalNumbersByTick[tickNumber] : tickNumber;\n    };\n    /**\n     * Get item on tick\n     */\n\n\n    OrdinalScale.prototype.getLabel = function (tick) {\n      if (!this.isBlank()) {\n        var ordinalNumber = this.getRawOrdinalNumber(tick.value);\n        var cateogry = this._ordinalMeta.categories[ordinalNumber]; // Note that if no data, ordinalMeta.categories is an empty array.\n        // Return empty if it's not exist.\n\n        return cateogry == null ? '' : cateogry + '';\n      }\n    };\n\n    OrdinalScale.prototype.count = function () {\n      return this._extent[1] - this._extent[0] + 1;\n    };\n\n    OrdinalScale.prototype.unionExtentFromData = function (data, dim) {\n      this.unionExtent(data.getApproximateExtent(dim));\n    };\n    /**\n     * @override\n     * If value is in extent range\n     */\n\n\n    OrdinalScale.prototype.isInExtentRange = function (value) {\n      value = this._getTickNumber(value);\n      return this._extent[0] <= value && this._extent[1] >= value;\n    };\n\n    OrdinalScale.prototype.getOrdinalMeta = function () {\n      return this._ordinalMeta;\n    };\n\n    OrdinalScale.prototype.calcNiceTicks = function () {};\n\n    OrdinalScale.prototype.calcNiceExtent = function () {};\n\n    OrdinalScale.type = 'ordinal';\n    return OrdinalScale;\n  }(Scale);\n\n  Scale.registerClass(OrdinalScale);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var roundNumber = round;\n\n  var IntervalScale =\n  /** @class */\n  function (_super) {\n    __extends(IntervalScale, _super);\n\n    function IntervalScale() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = 'interval'; // Step is calculated in adjustExtent.\n\n      _this._interval = 0;\n      _this._intervalPrecision = 2;\n      return _this;\n    }\n\n    IntervalScale.prototype.parse = function (val) {\n      return val;\n    };\n\n    IntervalScale.prototype.contain = function (val) {\n      return contain$1(val, this._extent);\n    };\n\n    IntervalScale.prototype.normalize = function (val) {\n      return normalize$1(val, this._extent);\n    };\n\n    IntervalScale.prototype.scale = function (val) {\n      return scale$2(val, this._extent);\n    };\n\n    IntervalScale.prototype.setExtent = function (start, end) {\n      var thisExtent = this._extent; // start,end may be a Number like '25',so...\n\n      if (!isNaN(start)) {\n        thisExtent[0] = parseFloat(start);\n      }\n\n      if (!isNaN(end)) {\n        thisExtent[1] = parseFloat(end);\n      }\n    };\n\n    IntervalScale.prototype.unionExtent = function (other) {\n      var extent = this._extent;\n      other[0] < extent[0] && (extent[0] = other[0]);\n      other[1] > extent[1] && (extent[1] = other[1]); // unionExtent may called by it's sub classes\n\n      this.setExtent(extent[0], extent[1]);\n    };\n\n    IntervalScale.prototype.getInterval = function () {\n      return this._interval;\n    };\n\n    IntervalScale.prototype.setInterval = function (interval) {\n      this._interval = interval; // Dropped auto calculated niceExtent and use user setted extent\n      // We assume user wan't to set both interval, min, max to get a better result\n\n      this._niceExtent = this._extent.slice();\n      this._intervalPrecision = getIntervalPrecision(interval);\n    };\n    /**\n     * @param expandToNicedExtent Whether expand the ticks to niced extent.\n     */\n\n\n    IntervalScale.prototype.getTicks = function (expandToNicedExtent) {\n      var interval = this._interval;\n      var extent = this._extent;\n      var niceTickExtent = this._niceExtent;\n      var intervalPrecision = this._intervalPrecision;\n      var ticks = []; // If interval is 0, return [];\n\n      if (!interval) {\n        return ticks;\n      } // Consider this case: using dataZoom toolbox, zoom and zoom.\n\n\n      var safeLimit = 10000;\n\n      if (extent[0] < niceTickExtent[0]) {\n        if (expandToNicedExtent) {\n          ticks.push({\n            value: roundNumber(niceTickExtent[0] - interval, intervalPrecision)\n          });\n        } else {\n          ticks.push({\n            value: extent[0]\n          });\n        }\n      }\n\n      var tick = niceTickExtent[0];\n\n      while (tick <= niceTickExtent[1]) {\n        ticks.push({\n          value: tick\n        }); // Avoid rounding error\n\n        tick = roundNumber(tick + interval, intervalPrecision);\n\n        if (tick === ticks[ticks.length - 1].value) {\n          // Consider out of safe float point, e.g.,\n          // -3711126.9907707 + 2e-10 === -3711126.9907707\n          break;\n        }\n\n        if (ticks.length > safeLimit) {\n          return [];\n        }\n      } // Consider this case: the last item of ticks is smaller\n      // than niceTickExtent[1] and niceTickExtent[1] === extent[1].\n\n\n      var lastNiceTick = ticks.length ? ticks[ticks.length - 1].value : niceTickExtent[1];\n\n      if (extent[1] > lastNiceTick) {\n        if (expandToNicedExtent) {\n          ticks.push({\n            value: roundNumber(lastNiceTick + interval, intervalPrecision)\n          });\n        } else {\n          ticks.push({\n            value: extent[1]\n          });\n        }\n      }\n\n      return ticks;\n    };\n\n    IntervalScale.prototype.getMinorTicks = function (splitNumber) {\n      var ticks = this.getTicks(true);\n      var minorTicks = [];\n      var extent = this.getExtent();\n\n      for (var i = 1; i < ticks.length; i++) {\n        var nextTick = ticks[i];\n        var prevTick = ticks[i - 1];\n        var count = 0;\n        var minorTicksGroup = [];\n        var interval = nextTick.value - prevTick.value;\n        var minorInterval = interval / splitNumber;\n\n        while (count < splitNumber - 1) {\n          var minorTick = roundNumber(prevTick.value + (count + 1) * minorInterval); // For the first and last interval. The count may be less than splitNumber.\n\n          if (minorTick > extent[0] && minorTick < extent[1]) {\n            minorTicksGroup.push(minorTick);\n          }\n\n          count++;\n        }\n\n        minorTicks.push(minorTicksGroup);\n      }\n\n      return minorTicks;\n    };\n    /**\n     * @param opt.precision If 'auto', use nice presision.\n     * @param opt.pad returns 1.50 but not 1.5 if precision is 2.\n     */\n\n\n    IntervalScale.prototype.getLabel = function (data, opt) {\n      if (data == null) {\n        return '';\n      }\n\n      var precision = opt && opt.precision;\n\n      if (precision == null) {\n        precision = getPrecision(data.value) || 0;\n      } else if (precision === 'auto') {\n        // Should be more precise then tick.\n        precision = this._intervalPrecision;\n      } // (1) If `precision` is set, 12.005 should be display as '12.00500'.\n      // (2) Use roundNumber (toFixed) to avoid scientific notation like '3.5e-7'.\n\n\n      var dataNum = roundNumber(data.value, precision, true);\n      return addCommas(dataNum);\n    };\n    /**\n     * @param splitNumber By default `5`.\n     */\n\n\n    IntervalScale.prototype.calcNiceTicks = function (splitNumber, minInterval, maxInterval) {\n      splitNumber = splitNumber || 5;\n      var extent = this._extent;\n      var span = extent[1] - extent[0];\n\n      if (!isFinite(span)) {\n        return;\n      } // User may set axis min 0 and data are all negative\n      // FIXME If it needs to reverse ?\n\n\n      if (span < 0) {\n        span = -span;\n        extent.reverse();\n      }\n\n      var result = intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval);\n      this._intervalPrecision = result.intervalPrecision;\n      this._interval = result.interval;\n      this._niceExtent = result.niceTickExtent;\n    };\n\n    IntervalScale.prototype.calcNiceExtent = function (opt) {\n      var extent = this._extent; // If extent start and end are same, expand them\n\n      if (extent[0] === extent[1]) {\n        if (extent[0] !== 0) {\n          // Expand extent\n          var expandSize = extent[0]; // In the fowllowing case\n          //      Axis has been fixed max 100\n          //      Plus data are all 100 and axis extent are [100, 100].\n          // Extend to the both side will cause expanded max is larger than fixed max.\n          // So only expand to the smaller side.\n\n          if (!opt.fixMax) {\n            extent[1] += expandSize / 2;\n            extent[0] -= expandSize / 2;\n          } else {\n            extent[0] -= expandSize / 2;\n          }\n        } else {\n          extent[1] = 1;\n        }\n      }\n\n      var span = extent[1] - extent[0]; // If there are no data and extent are [Infinity, -Infinity]\n\n      if (!isFinite(span)) {\n        extent[0] = 0;\n        extent[1] = 1;\n      }\n\n      this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval); // let extent = this._extent;\n\n      var interval = this._interval;\n\n      if (!opt.fixMin) {\n        extent[0] = roundNumber(Math.floor(extent[0] / interval) * interval);\n      }\n\n      if (!opt.fixMax) {\n        extent[1] = roundNumber(Math.ceil(extent[1] / interval) * interval);\n      }\n    };\n\n    IntervalScale.prototype.setNiceExtent = function (min, max) {\n      this._niceExtent = [min, max];\n    };\n\n    IntervalScale.type = 'interval';\n    return IntervalScale;\n  }(Scale);\n\n  Scale.registerClass(IntervalScale);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /* global Float32Array */\n\n  var supportFloat32Array = typeof Float32Array !== 'undefined';\n  var Float32ArrayCtor = !supportFloat32Array ? Array : Float32Array;\n\n  function createFloat32Array(arg) {\n    if (isArray(arg)) {\n      // Return self directly if don't support TypedArray.\n      return supportFloat32Array ? new Float32Array(arg) : arg;\n    } // Else is number\n\n\n    return new Float32ArrayCtor(arg);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var STACK_PREFIX = '__ec_stack_';\n\n  function getSeriesStackId(seriesModel) {\n    return seriesModel.get('stack') || STACK_PREFIX + seriesModel.seriesIndex;\n  }\n\n  function getAxisKey(axis) {\n    return axis.dim + axis.index;\n  }\n  /**\n   * @return {Object} {width, offset, offsetCenter} If axis.type is not 'category', return undefined.\n   */\n\n\n  function prepareLayoutBarSeries(seriesType, ecModel) {\n    var seriesModels = [];\n    ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n      // Check series coordinate, do layout for cartesian2d only\n      if (isOnCartesian(seriesModel)) {\n        seriesModels.push(seriesModel);\n      }\n    });\n    return seriesModels;\n  }\n  /**\n   * Map from (baseAxis.dim + '_' + baseAxis.index) to min gap of two adjacent\n   * values.\n   * This works for time axes, value axes, and log axes.\n   * For a single time axis, return value is in the form like\n   * {'x_0': [1000000]}.\n   * The value of 1000000 is in milliseconds.\n   */\n\n\n  function getValueAxesMinGaps(barSeries) {\n    /**\n     * Map from axis.index to values.\n     * For a single time axis, axisValues is in the form like\n     * {'x_0': [1495555200000, 1495641600000, 1495728000000]}.\n     * Items in axisValues[x], e.g. 1495555200000, are time values of all\n     * series.\n     */\n    var axisValues = {};\n    each(barSeries, function (seriesModel) {\n      var cartesian = seriesModel.coordinateSystem;\n      var baseAxis = cartesian.getBaseAxis();\n\n      if (baseAxis.type !== 'time' && baseAxis.type !== 'value') {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      var key = baseAxis.dim + '_' + baseAxis.index;\n      var dimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\n      var store = data.getStore();\n\n      for (var i = 0, cnt = store.count(); i < cnt; ++i) {\n        var value = store.get(dimIdx, i);\n\n        if (!axisValues[key]) {\n          // No previous data for the axis\n          axisValues[key] = [value];\n        } else {\n          // No value in previous series\n          axisValues[key].push(value);\n        } // Ignore duplicated time values in the same axis\n\n      }\n    });\n    var axisMinGaps = {};\n\n    for (var key in axisValues) {\n      if (axisValues.hasOwnProperty(key)) {\n        var valuesInAxis = axisValues[key];\n\n        if (valuesInAxis) {\n          // Sort axis values into ascending order to calculate gaps\n          valuesInAxis.sort(function (a, b) {\n            return a - b;\n          });\n          var min = null;\n\n          for (var j = 1; j < valuesInAxis.length; ++j) {\n            var delta = valuesInAxis[j] - valuesInAxis[j - 1];\n\n            if (delta > 0) {\n              // Ignore 0 delta because they are of the same axis value\n              min = min === null ? delta : Math.min(min, delta);\n            }\n          } // Set to null if only have one data\n\n\n          axisMinGaps[key] = min;\n        }\n      }\n    }\n\n    return axisMinGaps;\n  }\n\n  function makeColumnLayout(barSeries) {\n    var axisMinGaps = getValueAxesMinGaps(barSeries);\n    var seriesInfoList = [];\n    each(barSeries, function (seriesModel) {\n      var cartesian = seriesModel.coordinateSystem;\n      var baseAxis = cartesian.getBaseAxis();\n      var axisExtent = baseAxis.getExtent();\n      var bandWidth;\n\n      if (baseAxis.type === 'category') {\n        bandWidth = baseAxis.getBandWidth();\n      } else if (baseAxis.type === 'value' || baseAxis.type === 'time') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n        var minGap = axisMinGaps[key];\n        var extentSpan = Math.abs(axisExtent[1] - axisExtent[0]);\n        var scale = baseAxis.scale.getExtent();\n        var scaleSpan = Math.abs(scale[1] - scale[0]);\n        bandWidth = minGap ? extentSpan / scaleSpan * minGap : extentSpan; // When there is only one data value\n      } else {\n        var data = seriesModel.getData();\n        bandWidth = Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n      }\n\n      var barWidth = parsePercent$1(seriesModel.get('barWidth'), bandWidth);\n      var barMaxWidth = parsePercent$1(seriesModel.get('barMaxWidth'), bandWidth);\n      var barMinWidth = parsePercent$1( // barMinWidth by default is 0.5 / 1 in cartesian. Because in value axis,\n      // the auto-calculated bar width might be less than 0.5 / 1.\n      seriesModel.get('barMinWidth') || (isInLargeMode(seriesModel) ? 0.5 : 1), bandWidth);\n      var barGap = seriesModel.get('barGap');\n      var barCategoryGap = seriesModel.get('barCategoryGap');\n      seriesInfoList.push({\n        bandWidth: bandWidth,\n        barWidth: barWidth,\n        barMaxWidth: barMaxWidth,\n        barMinWidth: barMinWidth,\n        barGap: barGap,\n        barCategoryGap: barCategoryGap,\n        axisKey: getAxisKey(baseAxis),\n        stackId: getSeriesStackId(seriesModel)\n      });\n    });\n    return doCalBarWidthAndOffset(seriesInfoList);\n  }\n\n  function doCalBarWidthAndOffset(seriesInfoList) {\n    // Columns info on each category axis. Key is cartesian name\n    var columnsMap = {};\n    each(seriesInfoList, function (seriesInfo, idx) {\n      var axisKey = seriesInfo.axisKey;\n      var bandWidth = seriesInfo.bandWidth;\n      var columnsOnAxis = columnsMap[axisKey] || {\n        bandWidth: bandWidth,\n        remainedWidth: bandWidth,\n        autoWidthCount: 0,\n        categoryGap: null,\n        gap: '20%',\n        stacks: {}\n      };\n      var stacks = columnsOnAxis.stacks;\n      columnsMap[axisKey] = columnsOnAxis;\n      var stackId = seriesInfo.stackId;\n\n      if (!stacks[stackId]) {\n        columnsOnAxis.autoWidthCount++;\n      }\n\n      stacks[stackId] = stacks[stackId] || {\n        width: 0,\n        maxWidth: 0\n      }; // Caution: In a single coordinate system, these barGrid attributes\n      // will be shared by series. Consider that they have default values,\n      // only the attributes set on the last series will work.\n      // Do not change this fact unless there will be a break change.\n\n      var barWidth = seriesInfo.barWidth;\n\n      if (barWidth && !stacks[stackId].width) {\n        // See #6312, do not restrict width.\n        stacks[stackId].width = barWidth;\n        barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n        columnsOnAxis.remainedWidth -= barWidth;\n      }\n\n      var barMaxWidth = seriesInfo.barMaxWidth;\n      barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n      var barMinWidth = seriesInfo.barMinWidth;\n      barMinWidth && (stacks[stackId].minWidth = barMinWidth);\n      var barGap = seriesInfo.barGap;\n      barGap != null && (columnsOnAxis.gap = barGap);\n      var barCategoryGap = seriesInfo.barCategoryGap;\n      barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n    });\n    var result = {};\n    each(columnsMap, function (columnsOnAxis, coordSysName) {\n      result[coordSysName] = {};\n      var stacks = columnsOnAxis.stacks;\n      var bandWidth = columnsOnAxis.bandWidth;\n      var categoryGapPercent = columnsOnAxis.categoryGap;\n\n      if (categoryGapPercent == null) {\n        var columnCount = keys(stacks).length; // More columns in one group\n        // the spaces between group is smaller. Or the column will be too thin.\n\n        categoryGapPercent = Math.max(35 - columnCount * 4, 15) + '%';\n      }\n\n      var categoryGap = parsePercent$1(categoryGapPercent, bandWidth);\n      var barGapPercent = parsePercent$1(columnsOnAxis.gap, 1);\n      var remainedWidth = columnsOnAxis.remainedWidth;\n      var autoWidthCount = columnsOnAxis.autoWidthCount;\n      var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n      autoWidth = Math.max(autoWidth, 0); // Find if any auto calculated bar exceeded maxBarWidth\n\n      each(stacks, function (column) {\n        var maxWidth = column.maxWidth;\n        var minWidth = column.minWidth;\n\n        if (!column.width) {\n          var finalWidth = autoWidth;\n\n          if (maxWidth && maxWidth < finalWidth) {\n            finalWidth = Math.min(maxWidth, remainedWidth);\n          } // `minWidth` has higher priority. `minWidth` decide that wheter the\n          // bar is able to be visible. So `minWidth` should not be restricted\n          // by `maxWidth` or `remainedWidth` (which is from `bandWidth`). In\n          // the extreme cases for `value` axis, bars are allowed to overlap\n          // with each other if `minWidth` specified.\n\n\n          if (minWidth && minWidth > finalWidth) {\n            finalWidth = minWidth;\n          }\n\n          if (finalWidth !== autoWidth) {\n            column.width = finalWidth;\n            remainedWidth -= finalWidth + barGapPercent * finalWidth;\n            autoWidthCount--;\n          }\n        } else {\n          // `barMinWidth/barMaxWidth` has higher priority than `barWidth`, as\n          // CSS does. Becuase barWidth can be a percent value, where\n          // `barMaxWidth` can be used to restrict the final width.\n          var finalWidth = column.width;\n\n          if (maxWidth) {\n            finalWidth = Math.min(finalWidth, maxWidth);\n          } // `minWidth` has higher priority, as described above\n\n\n          if (minWidth) {\n            finalWidth = Math.max(finalWidth, minWidth);\n          }\n\n          column.width = finalWidth;\n          remainedWidth -= finalWidth + barGapPercent * finalWidth;\n          autoWidthCount--;\n        }\n      }); // Recalculate width again\n\n      autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n      autoWidth = Math.max(autoWidth, 0);\n      var widthSum = 0;\n      var lastColumn;\n      each(stacks, function (column, idx) {\n        if (!column.width) {\n          column.width = autoWidth;\n        }\n\n        lastColumn = column;\n        widthSum += column.width * (1 + barGapPercent);\n      });\n\n      if (lastColumn) {\n        widthSum -= lastColumn.width * barGapPercent;\n      }\n\n      var offset = -widthSum / 2;\n      each(stacks, function (column, stackId) {\n        result[coordSysName][stackId] = result[coordSysName][stackId] || {\n          bandWidth: bandWidth,\n          offset: offset,\n          width: column.width\n        };\n        offset += column.width * (1 + barGapPercent);\n      });\n    });\n    return result;\n  }\n\n  function retrieveColumnLayout(barWidthAndOffset, axis, seriesModel) {\n    if (barWidthAndOffset && axis) {\n      var result = barWidthAndOffset[getAxisKey(axis)];\n\n      if (result != null && seriesModel != null) {\n        return result[getSeriesStackId(seriesModel)];\n      }\n\n      return result;\n    }\n  }\n\n  function layout(seriesType, ecModel) {\n    var seriesModels = prepareLayoutBarSeries(seriesType, ecModel);\n    var barWidthAndOffset = makeColumnLayout(seriesModels);\n    each(seriesModels, function (seriesModel) {\n      var data = seriesModel.getData();\n      var cartesian = seriesModel.coordinateSystem;\n      var baseAxis = cartesian.getBaseAxis();\n      var stackId = getSeriesStackId(seriesModel);\n      var columnLayoutInfo = barWidthAndOffset[getAxisKey(baseAxis)][stackId];\n      var columnOffset = columnLayoutInfo.offset;\n      var columnWidth = columnLayoutInfo.width;\n      data.setLayout({\n        bandWidth: columnLayoutInfo.bandWidth,\n        offset: columnOffset,\n        size: columnWidth\n      });\n    });\n  } // TODO: Do not support stack in large mode yet.\n\n\n  function createProgressiveLayout(seriesType) {\n    return {\n      seriesType: seriesType,\n      plan: createRenderPlanner(),\n      reset: function (seriesModel) {\n        if (!isOnCartesian(seriesModel)) {\n          return;\n        }\n\n        var data = seriesModel.getData();\n        var cartesian = seriesModel.coordinateSystem;\n        var baseAxis = cartesian.getBaseAxis();\n        var valueAxis = cartesian.getOtherAxis(baseAxis);\n        var valueDimIdx = data.getDimensionIndex(data.mapDimension(valueAxis.dim));\n        var baseDimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\n        var drawBackground = seriesModel.get('showBackground', true);\n        var valueDim = data.mapDimension(valueAxis.dim);\n        var stackResultDim = data.getCalculationInfo('stackResultDimension');\n        var stacked = isDimensionStacked(data, valueDim) && !!data.getCalculationInfo('stackedOnSeries');\n        var isValueAxisH = valueAxis.isHorizontal();\n        var valueAxisStart = getValueAxisStart(baseAxis, valueAxis);\n        var isLarge = isInLargeMode(seriesModel);\n        var barMinHeight = seriesModel.get('barMinHeight') || 0;\n        var stackedDimIdx = stackResultDim && data.getDimensionIndex(stackResultDim); // Layout info.\n\n        var columnWidth = data.getLayout('size');\n        var columnOffset = data.getLayout('offset');\n        return {\n          progress: function (params, data) {\n            var count = params.count;\n            var largePoints = isLarge && createFloat32Array(count * 3);\n            var largeBackgroundPoints = isLarge && drawBackground && createFloat32Array(count * 3);\n            var largeDataIndices = isLarge && createFloat32Array(count);\n            var coordLayout = cartesian.master.getRect();\n            var bgSize = isValueAxisH ? coordLayout.width : coordLayout.height;\n            var dataIndex;\n            var store = data.getStore();\n            var idxOffset = 0;\n\n            while ((dataIndex = params.next()) != null) {\n              var value = store.get(stacked ? stackedDimIdx : valueDimIdx, dataIndex);\n              var baseValue = store.get(baseDimIdx, dataIndex);\n              var baseCoord = valueAxisStart;\n              var startValue = void 0; // Because of the barMinHeight, we can not use the value in\n              // stackResultDimension directly.\n\n              if (stacked) {\n                startValue = +value - store.get(valueDimIdx, dataIndex);\n              }\n\n              var x = void 0;\n              var y = void 0;\n              var width = void 0;\n              var height = void 0;\n\n              if (isValueAxisH) {\n                var coord = cartesian.dataToPoint([value, baseValue]);\n\n                if (stacked) {\n                  var startCoord = cartesian.dataToPoint([startValue, baseValue]);\n                  baseCoord = startCoord[0];\n                }\n\n                x = baseCoord;\n                y = coord[1] + columnOffset;\n                width = coord[0] - baseCoord;\n                height = columnWidth;\n\n                if (Math.abs(width) < barMinHeight) {\n                  width = (width < 0 ? -1 : 1) * barMinHeight;\n                }\n              } else {\n                var coord = cartesian.dataToPoint([baseValue, value]);\n\n                if (stacked) {\n                  var startCoord = cartesian.dataToPoint([baseValue, startValue]);\n                  baseCoord = startCoord[1];\n                }\n\n                x = coord[0] + columnOffset;\n                y = baseCoord;\n                width = columnWidth;\n                height = coord[1] - baseCoord;\n\n                if (Math.abs(height) < barMinHeight) {\n                  // Include zero to has a positive bar\n                  height = (height <= 0 ? -1 : 1) * barMinHeight;\n                }\n              }\n\n              if (!isLarge) {\n                data.setItemLayout(dataIndex, {\n                  x: x,\n                  y: y,\n                  width: width,\n                  height: height\n                });\n              } else {\n                largePoints[idxOffset] = x;\n                largePoints[idxOffset + 1] = y;\n                largePoints[idxOffset + 2] = isValueAxisH ? width : height;\n\n                if (largeBackgroundPoints) {\n                  largeBackgroundPoints[idxOffset] = isValueAxisH ? coordLayout.x : x;\n                  largeBackgroundPoints[idxOffset + 1] = isValueAxisH ? y : coordLayout.y;\n                  largeBackgroundPoints[idxOffset + 2] = bgSize;\n                }\n\n                largeDataIndices[dataIndex] = dataIndex;\n              }\n\n              idxOffset += 3;\n            }\n\n            if (isLarge) {\n              data.setLayout({\n                largePoints: largePoints,\n                largeDataIndices: largeDataIndices,\n                largeBackgroundPoints: largeBackgroundPoints,\n                valueAxisHorizontal: isValueAxisH\n              });\n            }\n          }\n        };\n      }\n    };\n  }\n\n  function isOnCartesian(seriesModel) {\n    return seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\n  }\n\n  function isInLargeMode(seriesModel) {\n    return seriesModel.pipelineContext && seriesModel.pipelineContext.large;\n  } // See cases in `test/bar-start.html` and `#7412`, `#8747`.\n\n\n  function getValueAxisStart(baseAxis, valueAxis) {\n    return valueAxis.toGlobalCoord(valueAxis.dataToCoord(valueAxis.type === 'log' ? 1 : 0));\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /*\n  * A third-party license is embeded for some of the code in this file:\n  * The \"scaleLevels\" was originally copied from \"d3.js\" with some\n  * modifications made for this project.\n  * (See more details in the comment on the definition of \"scaleLevels\" below.)\n  * The use of the source code of this file is also subject to the terms\n  * and consitions of the license of \"d3.js\" (BSD-3Clause, see\n  * </licenses/LICENSE-d3>).\n  */\n  // [About UTC and local time zone]:\n  // In most cases, `number.parseDate` will treat input data string as local time\n  // (except time zone is specified in time string). And `format.formateTime` returns\n  // local time by default. option.useUTC is false by default. This design have\n  // concidered these common case:\n  // (1) Time that is persistent in server is in UTC, but it is needed to be diplayed\n  // in local time by default.\n  // (2) By default, the input data string (e.g., '2011-01-02') should be displayed\n  // as its original time, without any time difference.\n\n\n  var bisect = function (a, x, lo, hi) {\n    while (lo < hi) {\n      var mid = lo + hi >>> 1;\n\n      if (a[mid][1] < x) {\n        lo = mid + 1;\n      } else {\n        hi = mid;\n      }\n    }\n\n    return lo;\n  };\n\n  var TimeScale =\n  /** @class */\n  function (_super) {\n    __extends(TimeScale, _super);\n\n    function TimeScale(settings) {\n      var _this = _super.call(this, settings) || this;\n\n      _this.type = 'time';\n      return _this;\n    }\n    /**\n     * Get label is mainly for other components like dataZoom, tooltip.\n     */\n\n\n    TimeScale.prototype.getLabel = function (tick) {\n      var useUTC = this.getSetting('useUTC');\n      return format(tick.value, fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))] || fullLeveledFormatter.second, useUTC, this.getSetting('locale'));\n    };\n\n    TimeScale.prototype.getFormattedLabel = function (tick, idx, labelFormatter) {\n      var isUTC = this.getSetting('useUTC');\n      var lang = this.getSetting('locale');\n      return leveledFormat(tick, idx, labelFormatter, lang, isUTC);\n    };\n    /**\n     * @override\n     */\n\n\n    TimeScale.prototype.getTicks = function () {\n      var interval = this._interval;\n      var extent = this._extent;\n      var ticks = []; // If interval is 0, return [];\n\n      if (!interval) {\n        return ticks;\n      }\n\n      ticks.push({\n        value: extent[0],\n        level: 0\n      });\n      var useUTC = this.getSetting('useUTC');\n      var innerTicks = getIntervalTicks(this._minLevelUnit, this._approxInterval, useUTC, extent);\n      ticks = ticks.concat(innerTicks);\n      ticks.push({\n        value: extent[1],\n        level: 0\n      });\n      return ticks;\n    };\n\n    TimeScale.prototype.calcNiceExtent = function (opt) {\n      var extent = this._extent; // If extent start and end are same, expand them\n\n      if (extent[0] === extent[1]) {\n        // Expand extent\n        extent[0] -= ONE_DAY;\n        extent[1] += ONE_DAY;\n      } // If there are no data and extent are [Infinity, -Infinity]\n\n\n      if (extent[1] === -Infinity && extent[0] === Infinity) {\n        var d = new Date();\n        extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n        extent[0] = extent[1] - ONE_DAY;\n      }\n\n      this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\n    };\n\n    TimeScale.prototype.calcNiceTicks = function (approxTickNum, minInterval, maxInterval) {\n      approxTickNum = approxTickNum || 10;\n      var extent = this._extent;\n      var span = extent[1] - extent[0];\n      this._approxInterval = span / approxTickNum;\n\n      if (minInterval != null && this._approxInterval < minInterval) {\n        this._approxInterval = minInterval;\n      }\n\n      if (maxInterval != null && this._approxInterval > maxInterval) {\n        this._approxInterval = maxInterval;\n      }\n\n      var scaleIntervalsLen = scaleIntervals.length;\n      var idx = Math.min(bisect(scaleIntervals, this._approxInterval, 0, scaleIntervalsLen), scaleIntervalsLen - 1); // Interval that can be used to calculate ticks\n\n      this._interval = scaleIntervals[idx][1]; // Min level used when picking ticks from top down.\n      // We check one more level to avoid the ticks are to sparse in some case.\n\n      this._minLevelUnit = scaleIntervals[Math.max(idx - 1, 0)][0];\n    };\n\n    TimeScale.prototype.parse = function (val) {\n      // val might be float.\n      return isNumber(val) ? val : +parseDate(val);\n    };\n\n    TimeScale.prototype.contain = function (val) {\n      return contain$1(this.parse(val), this._extent);\n    };\n\n    TimeScale.prototype.normalize = function (val) {\n      return normalize$1(this.parse(val), this._extent);\n    };\n\n    TimeScale.prototype.scale = function (val) {\n      return scale$2(val, this._extent);\n    };\n\n    TimeScale.type = 'time';\n    return TimeScale;\n  }(IntervalScale);\n  /**\n   * This implementation was originally copied from \"d3.js\"\n   * <https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/time/scale.js>\n   * with some modifications made for this program.\n   * See the license statement at the head of this file.\n   */\n\n\n  var scaleIntervals = [// Format                           interval\n  ['second', ONE_SECOND], ['minute', ONE_MINUTE], ['hour', ONE_HOUR], ['quarter-day', ONE_HOUR * 6], ['half-day', ONE_HOUR * 12], ['day', ONE_DAY * 1.2], ['half-week', ONE_DAY * 3.5], ['week', ONE_DAY * 7], ['month', ONE_DAY * 31], ['quarter', ONE_DAY * 95], ['half-year', ONE_YEAR / 2], ['year', ONE_YEAR] // 1Y\n  ];\n\n  function isUnitValueSame(unit, valueA, valueB, isUTC) {\n    var dateA = parseDate(valueA);\n    var dateB = parseDate(valueB);\n\n    var isSame = function (unit) {\n      return getUnitValue(dateA, unit, isUTC) === getUnitValue(dateB, unit, isUTC);\n    };\n\n    var isSameYear = function () {\n      return isSame('year');\n    }; // const isSameHalfYear = () => isSameYear() && isSame('half-year');\n    // const isSameQuater = () => isSameYear() && isSame('quarter');\n\n\n    var isSameMonth = function () {\n      return isSameYear() && isSame('month');\n    };\n\n    var isSameDay = function () {\n      return isSameMonth() && isSame('day');\n    }; // const isSameHalfDay = () => isSameDay() && isSame('half-day');\n\n\n    var isSameHour = function () {\n      return isSameDay() && isSame('hour');\n    };\n\n    var isSameMinute = function () {\n      return isSameHour() && isSame('minute');\n    };\n\n    var isSameSecond = function () {\n      return isSameMinute() && isSame('second');\n    };\n\n    var isSameMilliSecond = function () {\n      return isSameSecond() && isSame('millisecond');\n    };\n\n    switch (unit) {\n      case 'year':\n        return isSameYear();\n\n      case 'month':\n        return isSameMonth();\n\n      case 'day':\n        return isSameDay();\n\n      case 'hour':\n        return isSameHour();\n\n      case 'minute':\n        return isSameMinute();\n\n      case 'second':\n        return isSameSecond();\n\n      case 'millisecond':\n        return isSameMilliSecond();\n    }\n  } // const primaryUnitGetters = {\n  //     year: fullYearGetterName(),\n  //     month: monthGetterName(),\n  //     day: dateGetterName(),\n  //     hour: hoursGetterName(),\n  //     minute: minutesGetterName(),\n  //     second: secondsGetterName(),\n  //     millisecond: millisecondsGetterName()\n  // };\n  // const primaryUnitUTCGetters = {\n  //     year: fullYearGetterName(true),\n  //     month: monthGetterName(true),\n  //     day: dateGetterName(true),\n  //     hour: hoursGetterName(true),\n  //     minute: minutesGetterName(true),\n  //     second: secondsGetterName(true),\n  //     millisecond: millisecondsGetterName(true)\n  // };\n  // function moveTick(date: Date, unitName: TimeUnit, step: number, isUTC: boolean) {\n  //     step = step || 1;\n  //     switch (getPrimaryTimeUnit(unitName)) {\n  //         case 'year':\n  //             date[fullYearSetterName(isUTC)](date[fullYearGetterName(isUTC)]() + step);\n  //             break;\n  //         case 'month':\n  //             date[monthSetterName(isUTC)](date[monthGetterName(isUTC)]() + step);\n  //             break;\n  //         case 'day':\n  //             date[dateSetterName(isUTC)](date[dateGetterName(isUTC)]() + step);\n  //             break;\n  //         case 'hour':\n  //             date[hoursSetterName(isUTC)](date[hoursGetterName(isUTC)]() + step);\n  //             break;\n  //         case 'minute':\n  //             date[minutesSetterName(isUTC)](date[minutesGetterName(isUTC)]() + step);\n  //             break;\n  //         case 'second':\n  //             date[secondsSetterName(isUTC)](date[secondsGetterName(isUTC)]() + step);\n  //             break;\n  //         case 'millisecond':\n  //             date[millisecondsSetterName(isUTC)](date[millisecondsGetterName(isUTC)]() + step);\n  //             break;\n  //     }\n  //     return date.getTime();\n  // }\n  // const DATE_INTERVALS = [[8, 7.5], [4, 3.5], [2, 1.5]];\n  // const MONTH_INTERVALS = [[6, 5.5], [3, 2.5], [2, 1.5]];\n  // const MINUTES_SECONDS_INTERVALS = [[30, 30], [20, 20], [15, 15], [10, 10], [5, 5], [2, 2]];\n\n\n  function getDateInterval(approxInterval, daysInMonth) {\n    approxInterval /= ONE_DAY;\n    return approxInterval > 16 ? 16 // Math.floor(daysInMonth / 2) + 1  // In this case we only want one tick betwen two month.\n    : approxInterval > 7.5 ? 7 // TODO week 7 or day 8?\n    : approxInterval > 3.5 ? 4 : approxInterval > 1.5 ? 2 : 1;\n  }\n\n  function getMonthInterval(approxInterval) {\n    var APPROX_ONE_MONTH = 30 * ONE_DAY;\n    approxInterval /= APPROX_ONE_MONTH;\n    return approxInterval > 6 ? 6 : approxInterval > 3 ? 3 : approxInterval > 2 ? 2 : 1;\n  }\n\n  function getHourInterval(approxInterval) {\n    approxInterval /= ONE_HOUR;\n    return approxInterval > 12 ? 12 : approxInterval > 6 ? 6 : approxInterval > 3.5 ? 4 : approxInterval > 2 ? 2 : 1;\n  }\n\n  function getMinutesAndSecondsInterval(approxInterval, isMinutes) {\n    approxInterval /= isMinutes ? ONE_MINUTE : ONE_SECOND;\n    return approxInterval > 30 ? 30 : approxInterval > 20 ? 20 : approxInterval > 15 ? 15 : approxInterval > 10 ? 10 : approxInterval > 5 ? 5 : approxInterval > 2 ? 2 : 1;\n  }\n\n  function getMillisecondsInterval(approxInterval) {\n    return nice(approxInterval, true);\n  }\n\n  function getFirstTimestampOfUnit(date, unitName, isUTC) {\n    var outDate = new Date(date);\n\n    switch (getPrimaryTimeUnit(unitName)) {\n      case 'year':\n      case 'month':\n        outDate[monthSetterName(isUTC)](0);\n\n      case 'day':\n        outDate[dateSetterName(isUTC)](1);\n\n      case 'hour':\n        outDate[hoursSetterName(isUTC)](0);\n\n      case 'minute':\n        outDate[minutesSetterName(isUTC)](0);\n\n      case 'second':\n        outDate[secondsSetterName(isUTC)](0);\n        outDate[millisecondsSetterName(isUTC)](0);\n    }\n\n    return outDate.getTime();\n  }\n\n  function getIntervalTicks(bottomUnitName, approxInterval, isUTC, extent) {\n    var safeLimit = 10000;\n    var unitNames = timeUnits;\n    var iter = 0;\n\n    function addTicksInSpan(interval, minTimestamp, maxTimestamp, getMethodName, setMethodName, isDate, out) {\n      var date = new Date(minTimestamp);\n      var dateTime = minTimestamp;\n      var d = date[getMethodName](); // if (isDate) {\n      //     d -= 1; // Starts with 0;   PENDING\n      // }\n\n      while (dateTime < maxTimestamp && dateTime <= extent[1]) {\n        out.push({\n          value: dateTime\n        });\n        d += interval;\n        date[setMethodName](d);\n        dateTime = date.getTime();\n      } // This extra tick is for calcuating ticks of next level. Will not been added to the final result\n\n\n      out.push({\n        value: dateTime,\n        notAdd: true\n      });\n    }\n\n    function addLevelTicks(unitName, lastLevelTicks, levelTicks) {\n      var newAddedTicks = [];\n      var isFirstLevel = !lastLevelTicks.length;\n\n      if (isUnitValueSame(getPrimaryTimeUnit(unitName), extent[0], extent[1], isUTC)) {\n        return;\n      }\n\n      if (isFirstLevel) {\n        lastLevelTicks = [{\n          // TODO Optimize. Not include so may ticks.\n          value: getFirstTimestampOfUnit(new Date(extent[0]), unitName, isUTC)\n        }, {\n          value: extent[1]\n        }];\n      }\n\n      for (var i = 0; i < lastLevelTicks.length - 1; i++) {\n        var startTick = lastLevelTicks[i].value;\n        var endTick = lastLevelTicks[i + 1].value;\n\n        if (startTick === endTick) {\n          continue;\n        }\n\n        var interval = void 0;\n        var getterName = void 0;\n        var setterName = void 0;\n        var isDate = false;\n\n        switch (unitName) {\n          case 'year':\n            interval = Math.max(1, Math.round(approxInterval / ONE_DAY / 365));\n            getterName = fullYearGetterName(isUTC);\n            setterName = fullYearSetterName(isUTC);\n            break;\n\n          case 'half-year':\n          case 'quarter':\n          case 'month':\n            interval = getMonthInterval(approxInterval);\n            getterName = monthGetterName(isUTC);\n            setterName = monthSetterName(isUTC);\n            break;\n\n          case 'week': // PENDING If week is added. Ignore day.\n\n          case 'half-week':\n          case 'day':\n            interval = getDateInterval(approxInterval, 31); // Use 32 days and let interval been 16\n\n            getterName = dateGetterName(isUTC);\n            setterName = dateSetterName(isUTC);\n            isDate = true;\n            break;\n\n          case 'half-day':\n          case 'quarter-day':\n          case 'hour':\n            interval = getHourInterval(approxInterval);\n            getterName = hoursGetterName(isUTC);\n            setterName = hoursSetterName(isUTC);\n            break;\n\n          case 'minute':\n            interval = getMinutesAndSecondsInterval(approxInterval, true);\n            getterName = minutesGetterName(isUTC);\n            setterName = minutesSetterName(isUTC);\n            break;\n\n          case 'second':\n            interval = getMinutesAndSecondsInterval(approxInterval, false);\n            getterName = secondsGetterName(isUTC);\n            setterName = secondsSetterName(isUTC);\n            break;\n\n          case 'millisecond':\n            interval = getMillisecondsInterval(approxInterval);\n            getterName = millisecondsGetterName(isUTC);\n            setterName = millisecondsSetterName(isUTC);\n            break;\n        }\n\n        addTicksInSpan(interval, startTick, endTick, getterName, setterName, isDate, newAddedTicks);\n\n        if (unitName === 'year' && levelTicks.length > 1 && i === 0) {\n          // Add nearest years to the left extent.\n          levelTicks.unshift({\n            value: levelTicks[0].value - interval\n          });\n        }\n      }\n\n      for (var i = 0; i < newAddedTicks.length; i++) {\n        levelTicks.push(newAddedTicks[i]);\n      } // newAddedTicks.length && console.log(unitName, newAddedTicks);\n\n\n      return newAddedTicks;\n    }\n\n    var levelsTicks = [];\n    var currentLevelTicks = [];\n    var tickCount = 0;\n    var lastLevelTickCount = 0;\n\n    for (var i = 0; i < unitNames.length && iter++ < safeLimit; ++i) {\n      var primaryTimeUnit = getPrimaryTimeUnit(unitNames[i]);\n\n      if (!isPrimaryTimeUnit(unitNames[i])) {\n        // TODO\n        continue;\n      }\n\n      addLevelTicks(unitNames[i], levelsTicks[levelsTicks.length - 1] || [], currentLevelTicks);\n      var nextPrimaryTimeUnit = unitNames[i + 1] ? getPrimaryTimeUnit(unitNames[i + 1]) : null;\n\n      if (primaryTimeUnit !== nextPrimaryTimeUnit) {\n        if (currentLevelTicks.length) {\n          lastLevelTickCount = tickCount; // Remove the duplicate so the tick count can be precisely.\n\n          currentLevelTicks.sort(function (a, b) {\n            return a.value - b.value;\n          });\n          var levelTicksRemoveDuplicated = [];\n\n          for (var i_1 = 0; i_1 < currentLevelTicks.length; ++i_1) {\n            var tickValue = currentLevelTicks[i_1].value;\n\n            if (i_1 === 0 || currentLevelTicks[i_1 - 1].value !== tickValue) {\n              levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]);\n\n              if (tickValue >= extent[0] && tickValue <= extent[1]) {\n                tickCount++;\n              }\n            }\n          }\n\n          var targetTickNum = (extent[1] - extent[0]) / approxInterval; // Added too much in this level and not too less in last level\n\n          if (tickCount > targetTickNum * 1.5 && lastLevelTickCount > targetTickNum / 1.5) {\n            break;\n          } // Only treat primary time unit as one level.\n\n\n          levelsTicks.push(levelTicksRemoveDuplicated);\n\n          if (tickCount > targetTickNum || bottomUnitName === unitNames[i]) {\n            break;\n          }\n        } // Reset if next unitName is primary\n\n\n        currentLevelTicks = [];\n      }\n    }\n\n    {\n      if (iter >= safeLimit) {\n        warn('Exceed safe limit.');\n      }\n    }\n    var levelsTicksInExtent = filter(map(levelsTicks, function (levelTicks) {\n      return filter(levelTicks, function (tick) {\n        return tick.value >= extent[0] && tick.value <= extent[1] && !tick.notAdd;\n      });\n    }), function (levelTicks) {\n      return levelTicks.length > 0;\n    });\n    var ticks = [];\n    var maxLevel = levelsTicksInExtent.length - 1;\n\n    for (var i = 0; i < levelsTicksInExtent.length; ++i) {\n      var levelTicks = levelsTicksInExtent[i];\n\n      for (var k = 0; k < levelTicks.length; ++k) {\n        ticks.push({\n          value: levelTicks[k].value,\n          level: maxLevel - i\n        });\n      }\n    }\n\n    ticks.sort(function (a, b) {\n      return a.value - b.value;\n    }); // Remove duplicates\n\n    var result = [];\n\n    for (var i = 0; i < ticks.length; ++i) {\n      if (i === 0 || ticks[i].value !== ticks[i - 1].value) {\n        result.push(ticks[i]);\n      }\n    }\n\n    return result;\n  }\n\n  Scale.registerClass(TimeScale);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var scaleProto = Scale.prototype; // FIXME:TS refactor: not good to call it directly with `this`?\n\n  var intervalScaleProto = IntervalScale.prototype;\n  var roundingErrorFix = round;\n  var mathFloor = Math.floor;\n  var mathCeil = Math.ceil;\n  var mathPow$1 = Math.pow;\n  var mathLog = Math.log;\n\n  var LogScale =\n  /** @class */\n  function (_super) {\n    __extends(LogScale, _super);\n\n    function LogScale() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = 'log';\n      _this.base = 10;\n      _this._originalScale = new IntervalScale(); // FIXME:TS actually used by `IntervalScale`\n\n      _this._interval = 0;\n      return _this;\n    }\n    /**\n     * @param Whether expand the ticks to niced extent.\n     */\n\n\n    LogScale.prototype.getTicks = function (expandToNicedExtent) {\n      var originalScale = this._originalScale;\n      var extent = this._extent;\n      var originalExtent = originalScale.getExtent();\n      var ticks = intervalScaleProto.getTicks.call(this, expandToNicedExtent);\n      return map(ticks, function (tick) {\n        var val = tick.value;\n        var powVal = round(mathPow$1(this.base, val)); // Fix #4158\n\n        powVal = val === extent[0] && this._fixMin ? fixRoundingError(powVal, originalExtent[0]) : powVal;\n        powVal = val === extent[1] && this._fixMax ? fixRoundingError(powVal, originalExtent[1]) : powVal;\n        return {\n          value: powVal\n        };\n      }, this);\n    };\n\n    LogScale.prototype.setExtent = function (start, end) {\n      var base = this.base;\n      start = mathLog(start) / mathLog(base);\n      end = mathLog(end) / mathLog(base);\n      intervalScaleProto.setExtent.call(this, start, end);\n    };\n    /**\n     * @return {number} end\n     */\n\n\n    LogScale.prototype.getExtent = function () {\n      var base = this.base;\n      var extent = scaleProto.getExtent.call(this);\n      extent[0] = mathPow$1(base, extent[0]);\n      extent[1] = mathPow$1(base, extent[1]); // Fix #4158\n\n      var originalScale = this._originalScale;\n      var originalExtent = originalScale.getExtent();\n      this._fixMin && (extent[0] = fixRoundingError(extent[0], originalExtent[0]));\n      this._fixMax && (extent[1] = fixRoundingError(extent[1], originalExtent[1]));\n      return extent;\n    };\n\n    LogScale.prototype.unionExtent = function (extent) {\n      this._originalScale.unionExtent(extent);\n\n      var base = this.base;\n      extent[0] = mathLog(extent[0]) / mathLog(base);\n      extent[1] = mathLog(extent[1]) / mathLog(base);\n      scaleProto.unionExtent.call(this, extent);\n    };\n\n    LogScale.prototype.unionExtentFromData = function (data, dim) {\n      // TODO\n      // filter value that <= 0\n      this.unionExtent(data.getApproximateExtent(dim));\n    };\n    /**\n     * Update interval and extent of intervals for nice ticks\n     * @param approxTickNum default 10 Given approx tick number\n     */\n\n\n    LogScale.prototype.calcNiceTicks = function (approxTickNum) {\n      approxTickNum = approxTickNum || 10;\n      var extent = this._extent;\n      var span = extent[1] - extent[0];\n\n      if (span === Infinity || span <= 0) {\n        return;\n      }\n\n      var interval = quantity(span);\n      var err = approxTickNum / span * interval; // Filter ticks to get closer to the desired count.\n\n      if (err <= 0.5) {\n        interval *= 10;\n      } // Interval should be integer\n\n\n      while (!isNaN(interval) && Math.abs(interval) < 1 && Math.abs(interval) > 0) {\n        interval *= 10;\n      }\n\n      var niceExtent = [round(mathCeil(extent[0] / interval) * interval), round(mathFloor(extent[1] / interval) * interval)];\n      this._interval = interval;\n      this._niceExtent = niceExtent;\n    };\n\n    LogScale.prototype.calcNiceExtent = function (opt) {\n      intervalScaleProto.calcNiceExtent.call(this, opt);\n      this._fixMin = opt.fixMin;\n      this._fixMax = opt.fixMax;\n    };\n\n    LogScale.prototype.parse = function (val) {\n      return val;\n    };\n\n    LogScale.prototype.contain = function (val) {\n      val = mathLog(val) / mathLog(this.base);\n      return contain$1(val, this._extent);\n    };\n\n    LogScale.prototype.normalize = function (val) {\n      val = mathLog(val) / mathLog(this.base);\n      return normalize$1(val, this._extent);\n    };\n\n    LogScale.prototype.scale = function (val) {\n      val = scale$2(val, this._extent);\n      return mathPow$1(this.base, val);\n    };\n\n    LogScale.type = 'log';\n    return LogScale;\n  }(Scale);\n\n  var proto = LogScale.prototype;\n  proto.getMinorTicks = intervalScaleProto.getMinorTicks;\n  proto.getLabel = intervalScaleProto.getLabel;\n\n  function fixRoundingError(val, originalVal) {\n    return roundingErrorFix(val, getPrecision(originalVal));\n  }\n\n  Scale.registerClass(LogScale);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var ScaleRawExtentInfo =\n  /** @class */\n  function () {\n    function ScaleRawExtentInfo(scale, model, // Usually: data extent from all series on this axis.\n    originalExtent) {\n      this._prepareParams(scale, model, originalExtent);\n    }\n    /**\n     * Parameters depending on ouside (like model, user callback)\n     * are prepared and fixed here.\n     */\n\n\n    ScaleRawExtentInfo.prototype._prepareParams = function (scale, model, // Usually: data extent from all series on this axis.\n    dataExtent) {\n      if (dataExtent[1] < dataExtent[0]) {\n        dataExtent = [NaN, NaN];\n      }\n\n      this._dataMin = dataExtent[0];\n      this._dataMax = dataExtent[1];\n      var isOrdinal = this._isOrdinal = scale.type === 'ordinal';\n      this._needCrossZero = scale.type === 'interval' && model.getNeedCrossZero && model.getNeedCrossZero();\n      var modelMinRaw = this._modelMinRaw = model.get('min', true);\n\n      if (isFunction(modelMinRaw)) {\n        // This callback alway provide users the full data extent (before data filtered).\n        this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw({\n          min: dataExtent[0],\n          max: dataExtent[1]\n        }));\n      } else if (modelMinRaw !== 'dataMin') {\n        this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw);\n      }\n\n      var modelMaxRaw = this._modelMaxRaw = model.get('max', true);\n\n      if (isFunction(modelMaxRaw)) {\n        // This callback alway provide users the full data extent (before data filtered).\n        this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw({\n          min: dataExtent[0],\n          max: dataExtent[1]\n        }));\n      } else if (modelMaxRaw !== 'dataMax') {\n        this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw);\n      }\n\n      if (isOrdinal) {\n        // FIXME: there is a flaw here: if there is no \"block\" data processor like `dataZoom`,\n        // and progressive rendering is using, here the category result might just only contain\n        // the processed chunk rather than the entire result.\n        this._axisDataLen = model.getCategories().length;\n      } else {\n        var boundaryGap = model.get('boundaryGap');\n        var boundaryGapArr = isArray(boundaryGap) ? boundaryGap : [boundaryGap || 0, boundaryGap || 0];\n\n        if (typeof boundaryGapArr[0] === 'boolean' || typeof boundaryGapArr[1] === 'boolean') {\n          {\n            console.warn('Boolean type for boundaryGap is only ' + 'allowed for ordinal axis. Please use string in ' + 'percentage instead, e.g., \"20%\". Currently, ' + 'boundaryGap is set to be 0.');\n          }\n          this._boundaryGapInner = [0, 0];\n        } else {\n          this._boundaryGapInner = [parsePercent(boundaryGapArr[0], 1), parsePercent(boundaryGapArr[1], 1)];\n        }\n      }\n    };\n    /**\n     * Calculate extent by prepared parameters.\n     * This method has no external dependency and can be called duplicatedly,\n     * getting the same result.\n     * If parameters changed, should call this method to recalcuate.\n     */\n\n\n    ScaleRawExtentInfo.prototype.calculate = function () {\n      // Notice: When min/max is not set (that is, when there are null/undefined,\n      // which is the most common case), these cases should be ensured:\n      // (1) For 'ordinal', show all axis.data.\n      // (2) For others:\n      //      + `boundaryGap` is applied (if min/max set, boundaryGap is\n      //      disabled).\n      //      + If `needCrossZero`, min/max should be zero, otherwise, min/max should\n      //      be the result that originalExtent enlarged by boundaryGap.\n      // (3) If no data, it should be ensured that `scale.setBlank` is set.\n      var isOrdinal = this._isOrdinal;\n      var dataMin = this._dataMin;\n      var dataMax = this._dataMax;\n      var axisDataLen = this._axisDataLen;\n      var boundaryGapInner = this._boundaryGapInner;\n      var span = !isOrdinal ? dataMax - dataMin || Math.abs(dataMin) : null; // Currently if a `'value'` axis model min is specified as 'dataMin'/'dataMax',\n      // `boundaryGap` will not be used. It's the different from specifying as `null`/`undefined`.\n\n      var min = this._modelMinRaw === 'dataMin' ? dataMin : this._modelMinNum;\n      var max = this._modelMaxRaw === 'dataMax' ? dataMax : this._modelMaxNum; // If `_modelMinNum`/`_modelMaxNum` is `null`/`undefined`, should not be fixed.\n\n      var minFixed = min != null;\n      var maxFixed = max != null;\n\n      if (min == null) {\n        min = isOrdinal ? axisDataLen ? 0 : NaN : dataMin - boundaryGapInner[0] * span;\n      }\n\n      if (max == null) {\n        max = isOrdinal ? axisDataLen ? axisDataLen - 1 : NaN : dataMax + boundaryGapInner[1] * span;\n      }\n\n      (min == null || !isFinite(min)) && (min = NaN);\n      (max == null || !isFinite(max)) && (max = NaN);\n      var isBlank = eqNaN(min) || eqNaN(max) || isOrdinal && !axisDataLen; // If data extent modified, need to recalculated to ensure cross zero.\n\n      if (this._needCrossZero) {\n        // Axis is over zero and min is not set\n        if (min > 0 && max > 0 && !minFixed) {\n          min = 0; // minFixed = true;\n        } // Axis is under zero and max is not set\n\n\n        if (min < 0 && max < 0 && !maxFixed) {\n          max = 0; // maxFixed = true;\n        } // PENDING:\n        // When `needCrossZero` and all data is positive/negative, should it be ensured\n        // that the results processed by boundaryGap are positive/negative?\n        // If so, here `minFixed`/`maxFixed` need to be set.\n\n      }\n\n      var determinedMin = this._determinedMin;\n      var determinedMax = this._determinedMax;\n\n      if (determinedMin != null) {\n        min = determinedMin;\n        minFixed = true;\n      }\n\n      if (determinedMax != null) {\n        max = determinedMax;\n        maxFixed = true;\n      } // Ensure min/max be finite number or NaN here. (not to be null/undefined)\n      // `NaN` means min/max axis is blank.\n\n\n      return {\n        min: min,\n        max: max,\n        minFixed: minFixed,\n        maxFixed: maxFixed,\n        isBlank: isBlank\n      };\n    };\n\n    ScaleRawExtentInfo.prototype.modifyDataMinMax = function (minMaxName, val) {\n      {\n        assert(!this.frozen);\n      }\n      this[DATA_MIN_MAX_ATTR[minMaxName]] = val;\n    };\n\n    ScaleRawExtentInfo.prototype.setDeterminedMinMax = function (minMaxName, val) {\n      var attr = DETERMINED_MIN_MAX_ATTR[minMaxName];\n      {\n        assert(!this.frozen // Earse them usually means logic flaw.\n        && this[attr] == null);\n      }\n      this[attr] = val;\n    };\n\n    ScaleRawExtentInfo.prototype.freeze = function () {\n      // @ts-ignore\n      this.frozen = true;\n    };\n\n    return ScaleRawExtentInfo;\n  }();\n\n  var DETERMINED_MIN_MAX_ATTR = {\n    min: '_determinedMin',\n    max: '_determinedMax'\n  };\n  var DATA_MIN_MAX_ATTR = {\n    min: '_dataMin',\n    max: '_dataMax'\n  };\n  /**\n   * Get scale min max and related info only depends on model settings.\n   * This method can be called after coordinate system created.\n   * For example, in data processing stage.\n   *\n   * Scale extent info probably be required multiple times during a workflow.\n   * For example:\n   * (1) `dataZoom` depends it to get the axis extent in \"100%\" state.\n   * (2) `processor/extentCalculator` depends it to make sure whether axis extent is specified.\n   * (3) `coordSys.update` use it to finally decide the scale extent.\n   * But the callback of `min`/`max` should not be called multiple times.\n   * The code below should not be implemented repeatedly either.\n   * So we cache the result in the scale instance, which will be recreated at the begining\n   * of the workflow (because `scale` instance will be recreated each round of the workflow).\n   */\n\n  function ensureScaleRawExtentInfo(scale, model, // Usually: data extent from all series on this axis.\n  originalExtent) {\n    // Do not permit to recreate.\n    var rawExtentInfo = scale.rawExtentInfo;\n\n    if (rawExtentInfo) {\n      return rawExtentInfo;\n    }\n\n    rawExtentInfo = new ScaleRawExtentInfo(scale, model, originalExtent); // @ts-ignore\n\n    scale.rawExtentInfo = rawExtentInfo;\n    return rawExtentInfo;\n  }\n\n  function parseAxisModelMinMax(scale, minMax) {\n    return minMax == null ? null : eqNaN(minMax) ? NaN : scale.parse(minMax);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Get axis scale extent before niced.\n   * Item of returned array can only be number (including Infinity and NaN).\n   *\n   * Caution:\n   * Precondition of calling this method:\n   * The scale extent has been initialized using series data extent via\n   * `scale.setExtent` or `scale.unionExtentFromData`;\n   */\n\n\n  function getScaleExtent(scale, model) {\n    var scaleType = scale.type;\n    var rawExtentResult = ensureScaleRawExtentInfo(scale, model, scale.getExtent()).calculate();\n    scale.setBlank(rawExtentResult.isBlank);\n    var min = rawExtentResult.min;\n    var max = rawExtentResult.max; // If bars are placed on a base axis of type time or interval account for axis boundary overflow and current axis\n    // is base axis\n    // FIXME\n    // (1) Consider support value axis, where below zero and axis `onZero` should be handled properly.\n    // (2) Refactor the logic with `barGrid`. Is it not need to `makeBarWidthAndOffsetInfo` twice with different extent?\n    //     Should not depend on series type `bar`?\n    // (3) Fix that might overlap when using dataZoom.\n    // (4) Consider other chart types using `barGrid`?\n    // See #6728, #4862, `test/bar-overflow-time-plot.html`\n\n    var ecModel = model.ecModel;\n\n    if (ecModel && scaleType === 'time'\n    /*|| scaleType === 'interval' */\n    ) {\n        var barSeriesModels = prepareLayoutBarSeries('bar', ecModel);\n        var isBaseAxisAndHasBarSeries_1 = false;\n        each(barSeriesModels, function (seriesModel) {\n          isBaseAxisAndHasBarSeries_1 = isBaseAxisAndHasBarSeries_1 || seriesModel.getBaseAxis() === model.axis;\n        });\n\n        if (isBaseAxisAndHasBarSeries_1) {\n          // Calculate placement of bars on axis. TODO should be decoupled\n          // with barLayout\n          var barWidthAndOffset = makeColumnLayout(barSeriesModels); // Adjust axis min and max to account for overflow\n\n          var adjustedScale = adjustScaleForOverflow(min, max, model, barWidthAndOffset);\n          min = adjustedScale.min;\n          max = adjustedScale.max;\n        }\n      }\n\n    return {\n      extent: [min, max],\n      // \"fix\" means \"fixed\", the value should not be\n      // changed in the subsequent steps.\n      fixMin: rawExtentResult.minFixed,\n      fixMax: rawExtentResult.maxFixed\n    };\n  }\n\n  function adjustScaleForOverflow(min, max, model, // Only support cartesian coord yet.\n  barWidthAndOffset) {\n    // Get Axis Length\n    var axisExtent = model.axis.getExtent();\n    var axisLength = axisExtent[1] - axisExtent[0]; // Get bars on current base axis and calculate min and max overflow\n\n    var barsOnCurrentAxis = retrieveColumnLayout(barWidthAndOffset, model.axis);\n\n    if (barsOnCurrentAxis === undefined) {\n      return {\n        min: min,\n        max: max\n      };\n    }\n\n    var minOverflow = Infinity;\n    each(barsOnCurrentAxis, function (item) {\n      minOverflow = Math.min(item.offset, minOverflow);\n    });\n    var maxOverflow = -Infinity;\n    each(barsOnCurrentAxis, function (item) {\n      maxOverflow = Math.max(item.offset + item.width, maxOverflow);\n    });\n    minOverflow = Math.abs(minOverflow);\n    maxOverflow = Math.abs(maxOverflow);\n    var totalOverFlow = minOverflow + maxOverflow; // Calculate required buffer based on old range and overflow\n\n    var oldRange = max - min;\n    var oldRangePercentOfNew = 1 - (minOverflow + maxOverflow) / axisLength;\n    var overflowBuffer = oldRange / oldRangePercentOfNew - oldRange;\n    max += overflowBuffer * (maxOverflow / totalOverFlow);\n    min -= overflowBuffer * (minOverflow / totalOverFlow);\n    return {\n      min: min,\n      max: max\n    };\n  } // Precondition of calling this method:\n  // The scale extent has been initailized using series data extent via\n  // `scale.setExtent` or `scale.unionExtentFromData`;\n\n\n  function niceScaleExtent(scale, inModel) {\n    var model = inModel;\n    var extentInfo = getScaleExtent(scale, model);\n    var extent = extentInfo.extent;\n    var splitNumber = model.get('splitNumber');\n\n    if (scale instanceof LogScale) {\n      scale.base = model.get('logBase');\n    }\n\n    var scaleType = scale.type;\n    var interval = model.get('interval');\n    var isIntervalOrTime = scaleType === 'interval' || scaleType === 'time';\n    scale.setExtent(extent[0], extent[1]);\n    scale.calcNiceExtent({\n      splitNumber: splitNumber,\n      fixMin: extentInfo.fixMin,\n      fixMax: extentInfo.fixMax,\n      minInterval: isIntervalOrTime ? model.get('minInterval') : null,\n      maxInterval: isIntervalOrTime ? model.get('maxInterval') : null\n    }); // If some one specified the min, max. And the default calculated interval\n    // is not good enough. He can specify the interval. It is often appeared\n    // in angle axis with angle 0 - 360. Interval calculated in interval scale is hard\n    // to be 60.\n    // FIXME\n\n    if (interval != null) {\n      scale.setInterval && scale.setInterval(interval);\n    }\n  }\n  /**\n   * @param axisType Default retrieve from model.type\n   */\n\n\n  function createScaleByModel(model, axisType) {\n    axisType = axisType || model.get('type');\n\n    if (axisType) {\n      switch (axisType) {\n        // Buildin scale\n        case 'category':\n          return new OrdinalScale({\n            ordinalMeta: model.getOrdinalMeta ? model.getOrdinalMeta() : model.getCategories(),\n            extent: [Infinity, -Infinity]\n          });\n\n        case 'time':\n          return new TimeScale({\n            locale: model.ecModel.getLocaleModel(),\n            useUTC: model.ecModel.get('useUTC')\n          });\n\n        default:\n          // case 'value'/'interval', 'log', or others.\n          return new (Scale.getClass(axisType) || IntervalScale)();\n      }\n    }\n  }\n  /**\n   * Check if the axis cross 0\n   */\n\n\n  function ifAxisCrossZero(axis) {\n    var dataExtent = axis.scale.getExtent();\n    var min = dataExtent[0];\n    var max = dataExtent[1];\n    return !(min > 0 && max > 0 || min < 0 && max < 0);\n  }\n  /**\n   * @param axis\n   * @return Label formatter function.\n   *         param: {number} tickValue,\n   *         param: {number} idx, the index in all ticks.\n   *                         If category axis, this param is not required.\n   *         return: {string} label string.\n   */\n\n\n  function makeLabelFormatter(axis) {\n    var labelFormatter = axis.getLabelModel().get('formatter');\n    var categoryTickStart = axis.type === 'category' ? axis.scale.getExtent()[0] : null;\n\n    if (axis.scale.type === 'time') {\n      return function (tpl) {\n        return function (tick, idx) {\n          return axis.scale.getFormattedLabel(tick, idx, tpl);\n        };\n      }(labelFormatter);\n    } else if (isString(labelFormatter)) {\n      return function (tpl) {\n        return function (tick) {\n          // For category axis, get raw value; for numeric axis,\n          // get formatted label like '1,333,444'.\n          var label = axis.scale.getLabel(tick);\n          var text = tpl.replace('{value}', label != null ? label : '');\n          return text;\n        };\n      }(labelFormatter);\n    } else if (isFunction(labelFormatter)) {\n      return function (cb) {\n        return function (tick, idx) {\n          // The original intention of `idx` is \"the index of the tick in all ticks\".\n          // But the previous implementation of category axis do not consider the\n          // `axisLabel.interval`, which cause that, for example, the `interval` is\n          // `1`, then the ticks \"name5\", \"name7\", \"name9\" are displayed, where the\n          // corresponding `idx` are `0`, `2`, `4`, but not `0`, `1`, `2`. So we keep\n          // the definition here for back compatibility.\n          if (categoryTickStart != null) {\n            idx = tick.value - categoryTickStart;\n          }\n\n          return cb(getAxisRawValue(axis, tick), idx, tick.level != null ? {\n            level: tick.level\n          } : null);\n        };\n      }(labelFormatter);\n    } else {\n      return function (tick) {\n        return axis.scale.getLabel(tick);\n      };\n    }\n  }\n\n  function getAxisRawValue(axis, tick) {\n    // In category axis with data zoom, tick is not the original\n    // index of axis.data. So tick should not be exposed to user\n    // in category axis.\n    return axis.type === 'category' ? axis.scale.getLabel(tick) : tick.value;\n  }\n  /**\n   * @param axis\n   * @return Be null/undefined if no labels.\n   */\n\n\n  function estimateLabelUnionRect(axis) {\n    var axisModel = axis.model;\n    var scale = axis.scale;\n\n    if (!axisModel.get(['axisLabel', 'show']) || scale.isBlank()) {\n      return;\n    }\n\n    var realNumberScaleTicks;\n    var tickCount;\n    var categoryScaleExtent = scale.getExtent(); // Optimize for large category data, avoid call `getTicks()`.\n\n    if (scale instanceof OrdinalScale) {\n      tickCount = scale.count();\n    } else {\n      realNumberScaleTicks = scale.getTicks();\n      tickCount = realNumberScaleTicks.length;\n    }\n\n    var axisLabelModel = axis.getLabelModel();\n    var labelFormatter = makeLabelFormatter(axis);\n    var rect;\n    var step = 1; // Simple optimization for large amount of labels\n\n    if (tickCount > 40) {\n      step = Math.ceil(tickCount / 40);\n    }\n\n    for (var i = 0; i < tickCount; i += step) {\n      var tick = realNumberScaleTicks ? realNumberScaleTicks[i] : {\n        value: categoryScaleExtent[0] + i\n      };\n      var label = labelFormatter(tick, i);\n      var unrotatedSingleRect = axisLabelModel.getTextRect(label);\n      var singleRect = rotateTextRect(unrotatedSingleRect, axisLabelModel.get('rotate') || 0);\n      rect ? rect.union(singleRect) : rect = singleRect;\n    }\n\n    return rect;\n  }\n\n  function rotateTextRect(textRect, rotate) {\n    var rotateRadians = rotate * Math.PI / 180;\n    var beforeWidth = textRect.width;\n    var beforeHeight = textRect.height;\n    var afterWidth = beforeWidth * Math.abs(Math.cos(rotateRadians)) + Math.abs(beforeHeight * Math.sin(rotateRadians));\n    var afterHeight = beforeWidth * Math.abs(Math.sin(rotateRadians)) + Math.abs(beforeHeight * Math.cos(rotateRadians));\n    var rotatedRect = new BoundingRect(textRect.x, textRect.y, afterWidth, afterHeight);\n    return rotatedRect;\n  }\n  /**\n   * @param model axisLabelModel or axisTickModel\n   * @return {number|String} Can be null|'auto'|number|function\n   */\n\n\n  function getOptionCategoryInterval(model) {\n    var interval = model.get('interval');\n    return interval == null ? 'auto' : interval;\n  }\n  /**\n   * Set `categoryInterval` as 0 implicitly indicates that\n   * show all labels reguardless of overlap.\n   * @param {Object} axis axisModel.axis\n   */\n\n\n  function shouldShowAllLabels(axis) {\n    return axis.type === 'category' && getOptionCategoryInterval(axis.getLabelModel()) === 0;\n  }\n\n  function getDataDimensionsOnAxis(data, axisDim) {\n    // Remove duplicated dat dimensions caused by `getStackedDimension`.\n    var dataDimMap = {}; // Currently `mapDimensionsAll` will contain stack result dimension ('__\\0ecstackresult').\n    // PENDING: is it reasonable? Do we need to remove the original dim from \"coord dim\" since\n    // there has been stacked result dim?\n\n    each(data.mapDimensionsAll(axisDim), function (dataDim) {\n      // For example, the extent of the original dimension\n      // is [0.1, 0.5], the extent of the `stackResultDimension`\n      // is [7, 9], the final extent should NOT include [0.1, 0.5],\n      // because there is no graphic corresponding to [0.1, 0.5].\n      // See the case in `test/area-stack.html` `main1`, where area line\n      // stack needs `yAxis` not start from 0.\n      dataDimMap[getStackedDimension(data, dataDim)] = true;\n    });\n    return keys(dataDimMap);\n  }\n\n  function unionAxisExtentFromData(dataExtent, data, axisDim) {\n    if (data) {\n      each(getDataDimensionsOnAxis(data, axisDim), function (dim) {\n        var seriesExtent = data.getApproximateExtent(dim);\n        seriesExtent[0] < dataExtent[0] && (dataExtent[0] = seriesExtent[0]);\n        seriesExtent[1] > dataExtent[1] && (dataExtent[1] = seriesExtent[1]);\n      });\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  var AxisModelCommonMixin =\n  /** @class */\n  function () {\n    function AxisModelCommonMixin() {}\n\n    AxisModelCommonMixin.prototype.getNeedCrossZero = function () {\n      var option = this.option;\n      return !option.scale;\n    };\n    /**\n     * Should be implemented by each axis model if necessary.\n     * @return coordinate system model\n     */\n\n\n    AxisModelCommonMixin.prototype.getCoordSysModel = function () {\n      return;\n    };\n\n    return AxisModelCommonMixin;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * This module exposes helper functions for developing extensions.\n   */\n\n  /**\n   * Create a muti dimension List structure from seriesModel.\n   */\n\n\n  function createList(seriesModel) {\n    return createSeriesData(null, seriesModel);\n  } // export function createGraph(seriesModel) {\n\n\n  var dataStack$1 = {\n    isDimensionStacked: isDimensionStacked,\n    enableDataStack: enableDataStack,\n    getStackedDimension: getStackedDimension\n  };\n  /**\n   * Create scale\n   * @param {Array.<number>} dataExtent\n   * @param {Object|module:echarts/Model} option If `optoin.type`\n   *        is secified, it can only be `'value'` currently.\n   */\n\n  function createScale(dataExtent, option) {\n    var axisModel = option;\n\n    if (!(option instanceof Model)) {\n      axisModel = new Model(option); // FIXME\n      // Currently AxisModelCommonMixin has nothing to do with the\n      // the requirements of `axisHelper.createScaleByModel`. For\n      // example the method `getCategories` and `getOrdinalMeta`\n      // are required for `'category'` axis, and ecModel are required\n      // for `'time'` axis. But occationally echarts-gl happened\n      // to only use `'value'` axis.\n      // zrUtil.mixin(axisModel, AxisModelCommonMixin);\n    }\n\n    var scale = createScaleByModel(axisModel);\n    scale.setExtent(dataExtent[0], dataExtent[1]);\n    niceScaleExtent(scale, axisModel);\n    return scale;\n  }\n  /**\n   * Mixin common methods to axis model,\n   *\n   * Inlcude methods\n   * `getFormattedLabels() => Array.<string>`\n   * `getCategories() => Array.<string>`\n   * `getMin(origin: boolean) => number`\n   * `getMax(origin: boolean) => number`\n   * `getNeedCrossZero() => boolean`\n   */\n\n\n  function mixinAxisModelCommonMethods(Model$$1) {\n    mixin(Model$$1, AxisModelCommonMixin);\n  }\n\n  function createTextStyle$1(textStyleModel, opts) {\n    opts = opts || {};\n    return createTextStyle(textStyleModel, null, null, opts.state !== 'normal');\n  }\n\n  var helper = (Object.freeze || Object)({\n    createList: createList,\n    getLayoutRect: getLayoutRect,\n    dataStack: dataStack$1,\n    createScale: createScale,\n    mixinAxisModelCommonMethods: mixinAxisModelCommonMethods,\n    getECData: getECData,\n    createTextStyle: createTextStyle$1,\n    createDimensions: createDimensions,\n    createSymbol: createSymbol,\n    enableHoverEmphasis: enableHoverEmphasis\n  });\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var extensions = [];\n  var extensionRegisters = {\n    registerPreprocessor: registerPreprocessor,\n    registerProcessor: registerProcessor,\n    registerPostInit: registerPostInit,\n    registerPostUpdate: registerPostUpdate,\n    registerUpdateLifecycle: registerUpdateLifecycle,\n    registerAction: registerAction,\n    registerCoordinateSystem: registerCoordinateSystem,\n    registerLayout: registerLayout,\n    registerVisual: registerVisual,\n    registerTransform: registerTransform,\n    registerLoading: registerLoading,\n    registerMap: registerMap,\n    registerImpl: registerImpl,\n    PRIORITY: PRIORITY,\n    ComponentModel: ComponentModel,\n    ComponentView: ComponentView,\n    SeriesModel: SeriesModel,\n    ChartView: ChartView,\n    // TODO Use ComponentModel and SeriesModel instead of Constructor\n    registerComponentModel: function (ComponentModelClass) {\n      ComponentModel.registerClass(ComponentModelClass);\n    },\n    registerComponentView: function (ComponentViewClass) {\n      ComponentView.registerClass(ComponentViewClass);\n    },\n    registerSeriesModel: function (SeriesModelClass) {\n      SeriesModel.registerClass(SeriesModelClass);\n    },\n    registerChartView: function (ChartViewClass) {\n      ChartView.registerClass(ChartViewClass);\n    },\n    registerSubTypeDefaulter: function (componentType, defaulter) {\n      ComponentModel.registerSubTypeDefaulter(componentType, defaulter);\n    },\n    registerPainter: function (painterType, PainterCtor) {\n      registerPainter(painterType, PainterCtor);\n    }\n  };\n\n  function use(ext) {\n    if (isArray(ext)) {\n      // use([ChartLine, ChartBar]);\n      each(ext, function (singleExt) {\n        use(singleExt);\n      });\n      return;\n    }\n\n    if (indexOf(extensions, ext) >= 0) {\n      return;\n    }\n\n    extensions.push(ext);\n\n    if (isFunction(ext)) {\n      ext = {\n        install: ext\n      };\n    }\n\n    ext.install(extensionRegisters);\n  }\n\n  var EPSILON$4 = 1e-8;\n\n  function isAroundEqual$1(a, b) {\n    return Math.abs(a - b) < EPSILON$4;\n  }\n\n  function contain$2(points, x, y) {\n    var w = 0;\n    var p = points[0];\n\n    if (!p) {\n      return false;\n    }\n\n    for (var i = 1; i < points.length; i++) {\n      var p2 = points[i];\n      w += windingLine(p[0], p[1], p2[0], p2[1], x, y);\n      p = p2;\n    }\n\n    var p0 = points[0];\n\n    if (!isAroundEqual$1(p[0], p0[0]) || !isAroundEqual$1(p[1], p0[1])) {\n      w += windingLine(p[0], p[1], p0[0], p0[1], x, y);\n    }\n\n    return w !== 0;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var TMP_TRANSFORM = [];\n\n  function transformPoints(points, transform) {\n    for (var p = 0; p < points.length; p++) {\n      applyTransform(points[p], points[p], transform);\n    }\n  }\n\n  function updateBBoxFromPoints(points, min$$1, max$$1, projection) {\n    for (var i = 0; i < points.length; i++) {\n      var p = points[i];\n\n      if (projection) {\n        // projection may return null point.\n        p = projection.project(p);\n      }\n\n      if (p && isFinite(p[0]) && isFinite(p[1])) {\n        min(min$$1, min$$1, p);\n        max(max$$1, max$$1, p);\n      }\n    }\n  }\n\n  function centroid(points) {\n    var signedArea = 0;\n    var cx = 0;\n    var cy = 0;\n    var len$$1 = points.length;\n    var x0 = points[len$$1 - 1][0];\n    var y0 = points[len$$1 - 1][1]; // Polygon should been closed.\n\n    for (var i = 0; i < len$$1; i++) {\n      var x1 = points[i][0];\n      var y1 = points[i][1];\n      var a = x0 * y1 - x1 * y0;\n      signedArea += a;\n      cx += (x0 + x1) * a;\n      cy += (y0 + y1) * a;\n      x0 = x1;\n      y0 = y1;\n    }\n\n    return signedArea ? [cx / signedArea / 3, cy / signedArea / 3, signedArea] : [points[0][0] || 0, points[0][1] || 0];\n  }\n\n  var Region =\n  /** @class */\n  function () {\n    function Region(name) {\n      this.name = name;\n    }\n\n    Region.prototype.setCenter = function (center) {\n      this._center = center;\n    };\n    /**\n     * Get center point in data unit. That is,\n     * for GeoJSONRegion, the unit is lat/lng,\n     * for GeoSVGRegion, the unit is SVG local coord.\n     */\n\n\n    Region.prototype.getCenter = function () {\n      var center = this._center;\n\n      if (!center) {\n        // In most cases there are no need to calculate this center.\n        // So calculate only when called.\n        center = this._center = this.calcCenter();\n      }\n\n      return center;\n    };\n\n    return Region;\n  }();\n\n  var GeoJSONPolygonGeometry =\n  /** @class */\n  function () {\n    function GeoJSONPolygonGeometry(exterior, interiors) {\n      this.type = 'polygon';\n      this.exterior = exterior;\n      this.interiors = interiors;\n    }\n\n    return GeoJSONPolygonGeometry;\n  }();\n\n  var GeoJSONLineStringGeometry =\n  /** @class */\n  function () {\n    function GeoJSONLineStringGeometry(points) {\n      this.type = 'linestring';\n      this.points = points;\n    }\n\n    return GeoJSONLineStringGeometry;\n  }();\n\n  var GeoJSONRegion =\n  /** @class */\n  function (_super) {\n    __extends(GeoJSONRegion, _super);\n\n    function GeoJSONRegion(name, geometries, cp) {\n      var _this = _super.call(this, name) || this;\n\n      _this.type = 'geoJSON';\n      _this.geometries = geometries;\n      _this._center = cp && [cp[0], cp[1]];\n      return _this;\n    }\n\n    GeoJSONRegion.prototype.calcCenter = function () {\n      var geometries = this.geometries;\n      var largestGeo;\n      var largestGeoSize = 0;\n\n      for (var i = 0; i < geometries.length; i++) {\n        var geo = geometries[i];\n        var exterior = geo.exterior; // Simple trick to use points count instead of polygon area as region size.\n        // Ignore linestring\n\n        var size = exterior && exterior.length;\n\n        if (size > largestGeoSize) {\n          largestGeo = geo;\n          largestGeoSize = size;\n        }\n      }\n\n      if (largestGeo) {\n        return centroid(largestGeo.exterior);\n      } // from bounding rect by default.\n\n\n      var rect = this.getBoundingRect();\n      return [rect.x + rect.width / 2, rect.y + rect.height / 2];\n    };\n\n    GeoJSONRegion.prototype.getBoundingRect = function (projection) {\n      var rect = this._rect; // Always recalculate if using projection.\n\n      if (rect && !projection) {\n        return rect;\n      }\n\n      var min$$1 = [Infinity, Infinity];\n      var max$$1 = [-Infinity, -Infinity];\n      var geometries = this.geometries;\n      each(geometries, function (geo) {\n        if (geo.type === 'polygon') {\n          // Doesn't consider hole\n          updateBBoxFromPoints(geo.exterior, min$$1, max$$1, projection);\n        } else {\n          each(geo.points, function (points) {\n            updateBBoxFromPoints(points, min$$1, max$$1, projection);\n          });\n        }\n      }); // Normalie invalid bounding.\n\n      if (!(isFinite(min$$1[0]) && isFinite(min$$1[1]) && isFinite(max$$1[0]) && isFinite(max$$1[1]))) {\n        min$$1[0] = min$$1[1] = max$$1[0] = max$$1[1] = 0;\n      }\n\n      rect = new BoundingRect(min$$1[0], min$$1[1], max$$1[0] - min$$1[0], max$$1[1] - min$$1[1]);\n\n      if (!projection) {\n        this._rect = rect;\n      }\n\n      return rect;\n    };\n\n    GeoJSONRegion.prototype.contain = function (coord) {\n      var rect = this.getBoundingRect();\n      var geometries = this.geometries;\n\n      if (!rect.contain(coord[0], coord[1])) {\n        return false;\n      }\n\n      loopGeo: for (var i = 0, len$$1 = geometries.length; i < len$$1; i++) {\n        var geo = geometries[i]; // Only support polygon.\n\n        if (geo.type !== 'polygon') {\n          continue;\n        }\n\n        var exterior = geo.exterior;\n        var interiors = geo.interiors;\n\n        if (contain$2(exterior, coord[0], coord[1])) {\n          // Not in the region if point is in the hole.\n          for (var k = 0; k < (interiors ? interiors.length : 0); k++) {\n            if (contain$2(interiors[k], coord[0], coord[1])) {\n              continue loopGeo;\n            }\n          }\n\n          return true;\n        }\n      }\n\n      return false;\n    };\n    /**\n     * Transform the raw coords to target bounding.\n     * @param x\n     * @param y\n     * @param width\n     * @param height\n     */\n\n\n    GeoJSONRegion.prototype.transformTo = function (x, y, width, height) {\n      var rect = this.getBoundingRect();\n      var aspect = rect.width / rect.height;\n\n      if (!width) {\n        width = aspect * height;\n      } else if (!height) {\n        height = width / aspect;\n      }\n\n      var target = new BoundingRect(x, y, width, height);\n      var transform = rect.calculateTransform(target);\n      var geometries = this.geometries;\n\n      for (var i = 0; i < geometries.length; i++) {\n        var geo = geometries[i];\n\n        if (geo.type === 'polygon') {\n          transformPoints(geo.exterior, transform);\n          each(geo.interiors, function (interior) {\n            transformPoints(interior, transform);\n          });\n        } else {\n          each(geo.points, function (points) {\n            transformPoints(points, transform);\n          });\n        }\n      }\n\n      rect = this._rect;\n      rect.copy(target); // Update center\n\n      this._center = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n    };\n\n    GeoJSONRegion.prototype.cloneShallow = function (name) {\n      name == null && (name = this.name);\n      var newRegion = new GeoJSONRegion(name, this.geometries, this._center);\n      newRegion._rect = this._rect;\n      newRegion.transformTo = null; // Simply avoid to be called.\n\n      return newRegion;\n    };\n\n    return GeoJSONRegion;\n  }(Region);\n\n  var GeoSVGRegion =\n  /** @class */\n  function (_super) {\n    __extends(GeoSVGRegion, _super);\n\n    function GeoSVGRegion(name, elOnlyForCalculate) {\n      var _this = _super.call(this, name) || this;\n\n      _this.type = 'geoSVG';\n      _this._elOnlyForCalculate = elOnlyForCalculate;\n      return _this;\n    }\n\n    GeoSVGRegion.prototype.calcCenter = function () {\n      var el = this._elOnlyForCalculate;\n      var rect = el.getBoundingRect();\n      var center = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n      var mat = identity(TMP_TRANSFORM);\n      var target = el;\n\n      while (target && !target.isGeoSVGGraphicRoot) {\n        mul$1(mat, target.getLocalTransform(), mat);\n        target = target.parent;\n      }\n\n      invert(mat, mat);\n      applyTransform(center, center, mat);\n      return center;\n    };\n\n    return GeoSVGRegion;\n  }(Region);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Parse and decode geo json\n   */\n\n\n  function decode(json) {\n    if (!json.UTF8Encoding) {\n      return json;\n    }\n\n    var jsonCompressed = json;\n    var encodeScale = jsonCompressed.UTF8Scale;\n\n    if (encodeScale == null) {\n      encodeScale = 1024;\n    }\n\n    var features = jsonCompressed.features;\n    each(features, function (feature) {\n      var geometry = feature.geometry;\n      var encodeOffsets = geometry.encodeOffsets;\n      var coordinates = geometry.coordinates; // Geometry may be appeded manually in the script after json loaded.\n      // In this case this geometry is usually not encoded.\n\n      if (!encodeOffsets) {\n        return;\n      }\n\n      switch (geometry.type) {\n        case 'LineString':\n          geometry.coordinates = decodeRing(coordinates, encodeOffsets, encodeScale);\n          break;\n\n        case 'Polygon':\n          decodeRings(coordinates, encodeOffsets, encodeScale);\n          break;\n\n        case 'MultiLineString':\n          decodeRings(coordinates, encodeOffsets, encodeScale);\n          break;\n\n        case 'MultiPolygon':\n          each(coordinates, function (rings, idx) {\n            return decodeRings(rings, encodeOffsets[idx], encodeScale);\n          });\n      }\n    }); // Has been decoded\n\n    jsonCompressed.UTF8Encoding = false;\n    return jsonCompressed;\n  }\n\n  function decodeRings(rings, encodeOffsets, encodeScale) {\n    for (var c = 0; c < rings.length; c++) {\n      rings[c] = decodeRing(rings[c], encodeOffsets[c], encodeScale);\n    }\n  }\n\n  function decodeRing(coordinate, encodeOffsets, encodeScale) {\n    var result = [];\n    var prevX = encodeOffsets[0];\n    var prevY = encodeOffsets[1];\n\n    for (var i = 0; i < coordinate.length; i += 2) {\n      var x = coordinate.charCodeAt(i) - 64;\n      var y = coordinate.charCodeAt(i + 1) - 64; // ZigZag decoding\n\n      x = x >> 1 ^ -(x & 1);\n      y = y >> 1 ^ -(y & 1); // Delta deocding\n\n      x += prevX;\n      y += prevY;\n      prevX = x;\n      prevY = y; // Dequantize\n\n      result.push([x / encodeScale, y / encodeScale]);\n    }\n\n    return result;\n  }\n\n  function parseGeoJSON(geoJson, nameProperty) {\n    geoJson = decode(geoJson);\n    return map(filter(geoJson.features, function (featureObj) {\n      // Output of mapshaper may have geometry null\n      return featureObj.geometry && featureObj.properties && featureObj.geometry.coordinates.length > 0;\n    }), function (featureObj) {\n      var properties = featureObj.properties;\n      var geo = featureObj.geometry;\n      var geometries = [];\n\n      switch (geo.type) {\n        case 'Polygon':\n          var coordinates = geo.coordinates; // According to the GeoJSON specification.\n          // First must be exterior, and the rest are all interior(holes).\n\n          geometries.push(new GeoJSONPolygonGeometry(coordinates[0], coordinates.slice(1)));\n          break;\n\n        case 'MultiPolygon':\n          each(geo.coordinates, function (item) {\n            if (item[0]) {\n              geometries.push(new GeoJSONPolygonGeometry(item[0], item.slice(1)));\n            }\n          });\n          break;\n\n        case 'LineString':\n          geometries.push(new GeoJSONLineStringGeometry([geo.coordinates]));\n          break;\n\n        case 'MultiLineString':\n          geometries.push(new GeoJSONLineStringGeometry(geo.coordinates));\n      }\n\n      var region = new GeoJSONRegion(properties[nameProperty || 'name'], geometries, properties.cp);\n      region.properties = properties;\n      return region;\n    });\n  }\n\n  var number = (Object.freeze || Object)({\n    linearMap: linearMap,\n    round: round,\n    asc: asc,\n    getPrecision: getPrecision,\n    getPrecisionSafe: getPrecisionSafe,\n    getPixelPrecision: getPixelPrecision,\n    getPercentWithPrecision: getPercentWithPrecision,\n    MAX_SAFE_INTEGER: MAX_SAFE_INTEGER,\n    remRadian: remRadian,\n    isRadianAroundZero: isRadianAroundZero,\n    parseDate: parseDate,\n    quantity: quantity,\n    quantityExponent: quantityExponent,\n    nice: nice,\n    quantile: quantile,\n    reformIntervals: reformIntervals,\n    isNumeric: isNumeric,\n    numericToNumber: numericToNumber\n  });\n  var time = (Object.freeze || Object)({\n    parse: parseDate,\n    format: format\n  });\n  var graphic$1 = (Object.freeze || Object)({\n    extendShape: extendShape,\n    extendPath: extendPath,\n    makePath: makePath,\n    makeImage: makeImage,\n    mergePath: mergePath,\n    resizePath: resizePath,\n    createIcon: createIcon,\n    updateProps: updateProps,\n    initProps: initProps,\n    getTransform: getTransform,\n    clipPointsByRect: clipPointsByRect,\n    clipRectByRect: clipRectByRect,\n    registerShape: registerShape,\n    getShapeClass: getShapeClass,\n    Group: Group,\n    Image: ZRImage,\n    Text: ZRText,\n    Circle: Circle,\n    Ellipse: Ellipse,\n    Sector: Sector,\n    Ring: Ring,\n    Polygon: Polygon,\n    Polyline: Polyline,\n    Rect: Rect,\n    Line: Line,\n    BezierCurve: BezierCurve,\n    Arc: Arc,\n    IncrementalDisplayable: IncrementalDisplayable,\n    CompoundPath: CompoundPath,\n    LinearGradient: LinearGradient,\n    RadialGradient: RadialGradient,\n    BoundingRect: BoundingRect\n  });\n  var format$1 = (Object.freeze || Object)({\n    addCommas: addCommas,\n    toCamelCase: toCamelCase,\n    normalizeCssArray: normalizeCssArray$1,\n    encodeHTML: encodeHTML,\n    formatTpl: formatTpl,\n    getTooltipMarker: getTooltipMarker,\n    formatTime: formatTime,\n    capitalFirst: capitalFirst,\n    truncateText: truncateText,\n    getTextRect: getTextRect\n  });\n  var util$1 = (Object.freeze || Object)({\n    map: map,\n    each: each,\n    indexOf: indexOf,\n    inherits: inherits,\n    reduce: reduce,\n    filter: filter,\n    bind: bind,\n    curry: curry,\n    isArray: isArray,\n    isString: isString,\n    isObject: isObject,\n    isFunction: isFunction,\n    extend: extend,\n    defaults: defaults,\n    clone: clone,\n    merge: merge\n  });\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var inner$5 = makeInner();\n\n  function createAxisLabels(axis) {\n    // Only ordinal scale support tick interval\n    return axis.type === 'category' ? makeCategoryLabels(axis) : makeRealNumberLabels(axis);\n  }\n  /**\n   * @param {module:echats/coord/Axis} axis\n   * @param {module:echarts/model/Model} tickModel For example, can be axisTick, splitLine, splitArea.\n   * @return {Object} {\n   *     ticks: Array.<number>\n   *     tickCategoryInterval: number\n   * }\n   */\n\n\n  function createAxisTicks(axis, tickModel) {\n    // Only ordinal scale support tick interval\n    return axis.type === 'category' ? makeCategoryTicks(axis, tickModel) : {\n      ticks: map(axis.scale.getTicks(), function (tick) {\n        return tick.value;\n      })\n    };\n  }\n\n  function makeCategoryLabels(axis) {\n    var labelModel = axis.getLabelModel();\n    var result = makeCategoryLabelsActually(axis, labelModel);\n    return !labelModel.get('show') || axis.scale.isBlank() ? {\n      labels: [],\n      labelCategoryInterval: result.labelCategoryInterval\n    } : result;\n  }\n\n  function makeCategoryLabelsActually(axis, labelModel) {\n    var labelsCache = getListCache(axis, 'labels');\n    var optionLabelInterval = getOptionCategoryInterval(labelModel);\n    var result = listCacheGet(labelsCache, optionLabelInterval);\n\n    if (result) {\n      return result;\n    }\n\n    var labels;\n    var numericLabelInterval;\n\n    if (isFunction(optionLabelInterval)) {\n      labels = makeLabelsByCustomizedCategoryInterval(axis, optionLabelInterval);\n    } else {\n      numericLabelInterval = optionLabelInterval === 'auto' ? makeAutoCategoryInterval(axis) : optionLabelInterval;\n      labels = makeLabelsByNumericCategoryInterval(axis, numericLabelInterval);\n    } // Cache to avoid calling interval function repeatly.\n\n\n    return listCacheSet(labelsCache, optionLabelInterval, {\n      labels: labels,\n      labelCategoryInterval: numericLabelInterval\n    });\n  }\n\n  function makeCategoryTicks(axis, tickModel) {\n    var ticksCache = getListCache(axis, 'ticks');\n    var optionTickInterval = getOptionCategoryInterval(tickModel);\n    var result = listCacheGet(ticksCache, optionTickInterval);\n\n    if (result) {\n      return result;\n    }\n\n    var ticks;\n    var tickCategoryInterval; // Optimize for the case that large category data and no label displayed,\n    // we should not return all ticks.\n\n    if (!tickModel.get('show') || axis.scale.isBlank()) {\n      ticks = [];\n    }\n\n    if (isFunction(optionTickInterval)) {\n      ticks = makeLabelsByCustomizedCategoryInterval(axis, optionTickInterval, true);\n    } // Always use label interval by default despite label show. Consider this\n    // scenario, Use multiple grid with the xAxis sync, and only one xAxis shows\n    // labels. `splitLine` and `axisTick` should be consistent in this case.\n    else if (optionTickInterval === 'auto') {\n        var labelsResult = makeCategoryLabelsActually(axis, axis.getLabelModel());\n        tickCategoryInterval = labelsResult.labelCategoryInterval;\n        ticks = map(labelsResult.labels, function (labelItem) {\n          return labelItem.tickValue;\n        });\n      } else {\n        tickCategoryInterval = optionTickInterval;\n        ticks = makeLabelsByNumericCategoryInterval(axis, tickCategoryInterval, true);\n      } // Cache to avoid calling interval function repeatly.\n\n\n    return listCacheSet(ticksCache, optionTickInterval, {\n      ticks: ticks,\n      tickCategoryInterval: tickCategoryInterval\n    });\n  }\n\n  function makeRealNumberLabels(axis) {\n    var ticks = axis.scale.getTicks();\n    var labelFormatter = makeLabelFormatter(axis);\n    return {\n      labels: map(ticks, function (tick, idx) {\n        return {\n          level: tick.level,\n          formattedLabel: labelFormatter(tick, idx),\n          rawLabel: axis.scale.getLabel(tick),\n          tickValue: tick.value\n        };\n      })\n    };\n  }\n\n  function getListCache(axis, prop) {\n    // Because key can be funciton, and cache size always be small, we use array cache.\n    return inner$5(axis)[prop] || (inner$5(axis)[prop] = []);\n  }\n\n  function listCacheGet(cache, key) {\n    for (var i = 0; i < cache.length; i++) {\n      if (cache[i].key === key) {\n        return cache[i].value;\n      }\n    }\n  }\n\n  function listCacheSet(cache, key, value) {\n    cache.push({\n      key: key,\n      value: value\n    });\n    return value;\n  }\n\n  function makeAutoCategoryInterval(axis) {\n    var result = inner$5(axis).autoInterval;\n    return result != null ? result : inner$5(axis).autoInterval = axis.calculateCategoryInterval();\n  }\n  /**\n   * Calculate interval for category axis ticks and labels.\n   * To get precise result, at least one of `getRotate` and `isHorizontal`\n   * should be implemented in axis.\n   */\n\n\n  function calculateCategoryInterval(axis) {\n    var params = fetchAutoCategoryIntervalCalculationParams(axis);\n    var labelFormatter = makeLabelFormatter(axis);\n    var rotation = (params.axisRotate - params.labelRotate) / 180 * Math.PI;\n    var ordinalScale = axis.scale;\n    var ordinalExtent = ordinalScale.getExtent(); // Providing this method is for optimization:\n    // avoid generating a long array by `getTicks`\n    // in large category data case.\n\n    var tickCount = ordinalScale.count();\n\n    if (ordinalExtent[1] - ordinalExtent[0] < 1) {\n      return 0;\n    }\n\n    var step = 1; // Simple optimization. Empirical value: tick count should less than 40.\n\n    if (tickCount > 40) {\n      step = Math.max(1, Math.floor(tickCount / 40));\n    }\n\n    var tickValue = ordinalExtent[0];\n    var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\n    var unitW = Math.abs(unitSpan * Math.cos(rotation));\n    var unitH = Math.abs(unitSpan * Math.sin(rotation));\n    var maxW = 0;\n    var maxH = 0; // Caution: Performance sensitive for large category data.\n    // Consider dataZoom, we should make appropriate step to avoid O(n) loop.\n\n    for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n      var width = 0;\n      var height = 0; // Not precise, do not consider align and vertical align\n      // and each distance from axis line yet.\n\n      var rect = getBoundingRect(labelFormatter({\n        value: tickValue\n      }), params.font, 'center', 'top'); // Magic number\n\n      width = rect.width * 1.3;\n      height = rect.height * 1.3; // Min size, void long loop.\n\n      maxW = Math.max(maxW, width, 7);\n      maxH = Math.max(maxH, height, 7);\n    }\n\n    var dw = maxW / unitW;\n    var dh = maxH / unitH; // 0/0 is NaN, 1/0 is Infinity.\n\n    isNaN(dw) && (dw = Infinity);\n    isNaN(dh) && (dh = Infinity);\n    var interval = Math.max(0, Math.floor(Math.min(dw, dh)));\n    var cache = inner$5(axis.model);\n    var axisExtent = axis.getExtent();\n    var lastAutoInterval = cache.lastAutoInterval;\n    var lastTickCount = cache.lastTickCount; // Use cache to keep interval stable while moving zoom window,\n    // otherwise the calculated interval might jitter when the zoom\n    // window size is close to the interval-changing size.\n    // For example, if all of the axis labels are `a, b, c, d, e, f, g`.\n    // The jitter will cause that sometimes the displayed labels are\n    // `a, d, g` (interval: 2) sometimes `a, c, e`(interval: 1).\n\n    if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1 // Always choose the bigger one, otherwise the critical\n    // point is not the same when zooming in or zooming out.\n    && lastAutoInterval > interval // If the axis change is caused by chart resize, the cache should not\n    // be used. Otherwise some hiden labels might not be shown again.\n    && cache.axisExtent0 === axisExtent[0] && cache.axisExtent1 === axisExtent[1]) {\n      interval = lastAutoInterval;\n    } // Only update cache if cache not used, otherwise the\n    // changing of interval is too insensitive.\n    else {\n        cache.lastTickCount = tickCount;\n        cache.lastAutoInterval = interval;\n        cache.axisExtent0 = axisExtent[0];\n        cache.axisExtent1 = axisExtent[1];\n      }\n\n    return interval;\n  }\n\n  function fetchAutoCategoryIntervalCalculationParams(axis) {\n    var labelModel = axis.getLabelModel();\n    return {\n      axisRotate: axis.getRotate ? axis.getRotate() : axis.isHorizontal && !axis.isHorizontal() ? 90 : 0,\n      labelRotate: labelModel.get('rotate') || 0,\n      font: labelModel.getFont()\n    };\n  }\n\n  function makeLabelsByNumericCategoryInterval(axis, categoryInterval, onlyTick) {\n    var labelFormatter = makeLabelFormatter(axis);\n    var ordinalScale = axis.scale;\n    var ordinalExtent = ordinalScale.getExtent();\n    var labelModel = axis.getLabelModel();\n    var result = []; // TODO: axisType: ordinalTime, pick the tick from each month/day/year/...\n\n    var step = Math.max((categoryInterval || 0) + 1, 1);\n    var startTick = ordinalExtent[0];\n    var tickCount = ordinalScale.count(); // Calculate start tick based on zero if possible to keep label consistent\n    // while zooming and moving while interval > 0. Otherwise the selection\n    // of displayable ticks and symbols probably keep changing.\n    // 3 is empirical value.\n\n    if (startTick !== 0 && step > 1 && tickCount / step > 2) {\n      startTick = Math.round(Math.ceil(startTick / step) * step);\n    } // (1) Only add min max label here but leave overlap checking\n    // to render stage, which also ensure the returned list\n    // suitable for splitLine and splitArea rendering.\n    // (2) Scales except category always contain min max label so\n    // do not need to perform this process.\n\n\n    var showAllLabel = shouldShowAllLabels(axis);\n    var includeMinLabel = labelModel.get('showMinLabel') || showAllLabel;\n    var includeMaxLabel = labelModel.get('showMaxLabel') || showAllLabel;\n\n    if (includeMinLabel && startTick !== ordinalExtent[0]) {\n      addItem(ordinalExtent[0]);\n    } // Optimize: avoid generating large array by `ordinalScale.getTicks()`.\n\n\n    var tickValue = startTick;\n\n    for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n      addItem(tickValue);\n    }\n\n    if (includeMaxLabel && tickValue - step !== ordinalExtent[1]) {\n      addItem(ordinalExtent[1]);\n    }\n\n    function addItem(tickValue) {\n      var tickObj = {\n        value: tickValue\n      };\n      result.push(onlyTick ? tickValue : {\n        formattedLabel: labelFormatter(tickObj),\n        rawLabel: ordinalScale.getLabel(tickObj),\n        tickValue: tickValue\n      });\n    }\n\n    return result;\n  }\n\n  function makeLabelsByCustomizedCategoryInterval(axis, categoryInterval, onlyTick) {\n    var ordinalScale = axis.scale;\n    var labelFormatter = makeLabelFormatter(axis);\n    var result = [];\n    each(ordinalScale.getTicks(), function (tick) {\n      var rawLabel = ordinalScale.getLabel(tick);\n      var tickValue = tick.value;\n\n      if (categoryInterval(tick.value, rawLabel)) {\n        result.push(onlyTick ? tickValue : {\n          formattedLabel: labelFormatter(tick),\n          rawLabel: rawLabel,\n          tickValue: tickValue\n        });\n      }\n    });\n    return result;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var NORMALIZED_EXTENT = [0, 1];\n  /**\n   * Base class of Axis.\n   */\n\n  var Axis =\n  /** @class */\n  function () {\n    function Axis(dim, scale, extent) {\n      this.onBand = false;\n      this.inverse = false;\n      this.dim = dim;\n      this.scale = scale;\n      this._extent = extent || [0, 0];\n    }\n    /**\n     * If axis extent contain given coord\n     */\n\n\n    Axis.prototype.contain = function (coord) {\n      var extent = this._extent;\n      var min = Math.min(extent[0], extent[1]);\n      var max = Math.max(extent[0], extent[1]);\n      return coord >= min && coord <= max;\n    };\n    /**\n     * If axis extent contain given data\n     */\n\n\n    Axis.prototype.containData = function (data) {\n      return this.scale.contain(data);\n    };\n    /**\n     * Get coord extent.\n     */\n\n\n    Axis.prototype.getExtent = function () {\n      return this._extent.slice();\n    };\n    /**\n     * Get precision used for formatting\n     */\n\n\n    Axis.prototype.getPixelPrecision = function (dataExtent) {\n      return getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\n    };\n    /**\n     * Set coord extent\n     */\n\n\n    Axis.prototype.setExtent = function (start, end) {\n      var extent = this._extent;\n      extent[0] = start;\n      extent[1] = end;\n    };\n    /**\n     * Convert data to coord. Data is the rank if it has an ordinal scale\n     */\n\n\n    Axis.prototype.dataToCoord = function (data, clamp) {\n      var extent = this._extent;\n      var scale = this.scale;\n      data = scale.normalize(data);\n\n      if (this.onBand && scale.type === 'ordinal') {\n        extent = extent.slice();\n        fixExtentWithBands(extent, scale.count());\n      }\n\n      return linearMap(data, NORMALIZED_EXTENT, extent, clamp);\n    };\n    /**\n     * Convert coord to data. Data is the rank if it has an ordinal scale\n     */\n\n\n    Axis.prototype.coordToData = function (coord, clamp) {\n      var extent = this._extent;\n      var scale = this.scale;\n\n      if (this.onBand && scale.type === 'ordinal') {\n        extent = extent.slice();\n        fixExtentWithBands(extent, scale.count());\n      }\n\n      var t = linearMap(coord, extent, NORMALIZED_EXTENT, clamp);\n      return this.scale.scale(t);\n    };\n    /**\n     * Convert pixel point to data in axis\n     */\n\n\n    Axis.prototype.pointToData = function (point, clamp) {\n      // Should be implemented in derived class if necessary.\n      return;\n    };\n    /**\n     * Different from `zrUtil.map(axis.getTicks(), axis.dataToCoord, axis)`,\n     * `axis.getTicksCoords` considers `onBand`, which is used by\n     * `boundaryGap:true` of category axis and splitLine and splitArea.\n     * @param opt.tickModel default: axis.model.getModel('axisTick')\n     * @param opt.clamp If `true`, the first and the last\n     *        tick must be at the axis end points. Otherwise, clip ticks\n     *        that outside the axis extent.\n     */\n\n\n    Axis.prototype.getTicksCoords = function (opt) {\n      opt = opt || {};\n      var tickModel = opt.tickModel || this.getTickModel();\n      var result = createAxisTicks(this, tickModel);\n      var ticks = result.ticks;\n      var ticksCoords = map(ticks, function (tickVal) {\n        return {\n          coord: this.dataToCoord(this.scale.type === 'ordinal' ? this.scale.getRawOrdinalNumber(tickVal) : tickVal),\n          tickValue: tickVal\n        };\n      }, this);\n      var alignWithLabel = tickModel.get('alignWithLabel');\n      fixOnBandTicksCoords(this, ticksCoords, alignWithLabel, opt.clamp);\n      return ticksCoords;\n    };\n\n    Axis.prototype.getMinorTicksCoords = function () {\n      if (this.scale.type === 'ordinal') {\n        // Category axis doesn't support minor ticks\n        return [];\n      }\n\n      var minorTickModel = this.model.getModel('minorTick');\n      var splitNumber = minorTickModel.get('splitNumber'); // Protection.\n\n      if (!(splitNumber > 0 && splitNumber < 100)) {\n        splitNumber = 5;\n      }\n\n      var minorTicks = this.scale.getMinorTicks(splitNumber);\n      var minorTicksCoords = map(minorTicks, function (minorTicksGroup) {\n        return map(minorTicksGroup, function (minorTick) {\n          return {\n            coord: this.dataToCoord(minorTick),\n            tickValue: minorTick\n          };\n        }, this);\n      }, this);\n      return minorTicksCoords;\n    };\n\n    Axis.prototype.getViewLabels = function () {\n      return createAxisLabels(this).labels;\n    };\n\n    Axis.prototype.getLabelModel = function () {\n      return this.model.getModel('axisLabel');\n    };\n    /**\n     * Notice here we only get the default tick model. For splitLine\n     * or splitArea, we should pass the splitLineModel or splitAreaModel\n     * manually when calling `getTicksCoords`.\n     * In GL, this method may be overrided to:\n     * `axisModel.getModel('axisTick', grid3DModel.getModel('axisTick'));`\n     */\n\n\n    Axis.prototype.getTickModel = function () {\n      return this.model.getModel('axisTick');\n    };\n    /**\n     * Get width of band\n     */\n\n\n    Axis.prototype.getBandWidth = function () {\n      var axisExtent = this._extent;\n      var dataExtent = this.scale.getExtent();\n      var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0); // Fix #2728, avoid NaN when only one data.\n\n      len === 0 && (len = 1);\n      var size = Math.abs(axisExtent[1] - axisExtent[0]);\n      return Math.abs(size) / len;\n    };\n    /**\n     * Only be called in category axis.\n     * Can be overrided, consider other axes like in 3D.\n     * @return Auto interval for cateogry axis tick and label\n     */\n\n\n    Axis.prototype.calculateCategoryInterval = function () {\n      return calculateCategoryInterval(this);\n    };\n\n    return Axis;\n  }();\n\n  function fixExtentWithBands(extent, nTick) {\n    var size = extent[1] - extent[0];\n    var len = nTick;\n    var margin = size / len / 2;\n    extent[0] += margin;\n    extent[1] -= margin;\n  } // If axis has labels [1, 2, 3, 4]. Bands on the axis are\n  // |---1---|---2---|---3---|---4---|.\n  // So the displayed ticks and splitLine/splitArea should between\n  // each data item, otherwise cause misleading (e.g., split tow bars\n  // of a single data item when there are two bar series).\n  // Also consider if tickCategoryInterval > 0 and onBand, ticks and\n  // splitLine/spliteArea should layout appropriately corresponding\n  // to displayed labels. (So we should not use `getBandWidth` in this\n  // case).\n\n\n  function fixOnBandTicksCoords(axis, ticksCoords, alignWithLabel, clamp) {\n    var ticksLen = ticksCoords.length;\n\n    if (!axis.onBand || alignWithLabel || !ticksLen) {\n      return;\n    }\n\n    var axisExtent = axis.getExtent();\n    var last;\n    var diffSize;\n\n    if (ticksLen === 1) {\n      ticksCoords[0].coord = axisExtent[0];\n      last = ticksCoords[1] = {\n        coord: axisExtent[0]\n      };\n    } else {\n      var crossLen = ticksCoords[ticksLen - 1].tickValue - ticksCoords[0].tickValue;\n      var shift_1 = (ticksCoords[ticksLen - 1].coord - ticksCoords[0].coord) / crossLen;\n      each(ticksCoords, function (ticksItem) {\n        ticksItem.coord -= shift_1 / 2;\n      });\n      var dataExtent = axis.scale.getExtent();\n      diffSize = 1 + dataExtent[1] - ticksCoords[ticksLen - 1].tickValue;\n      last = {\n        coord: ticksCoords[ticksLen - 1].coord + shift_1 * diffSize\n      };\n      ticksCoords.push(last);\n    }\n\n    var inverse = axisExtent[0] > axisExtent[1]; // Handling clamp.\n\n    if (littleThan(ticksCoords[0].coord, axisExtent[0])) {\n      clamp ? ticksCoords[0].coord = axisExtent[0] : ticksCoords.shift();\n    }\n\n    if (clamp && littleThan(axisExtent[0], ticksCoords[0].coord)) {\n      ticksCoords.unshift({\n        coord: axisExtent[0]\n      });\n    }\n\n    if (littleThan(axisExtent[1], last.coord)) {\n      clamp ? last.coord = axisExtent[1] : ticksCoords.pop();\n    }\n\n    if (clamp && littleThan(last.coord, axisExtent[1])) {\n      ticksCoords.push({\n        coord: axisExtent[1]\n      });\n    }\n\n    function littleThan(a, b) {\n      // Avoid rounding error cause calculated tick coord different with extent.\n      // It may cause an extra unecessary tick added.\n      a = round(a);\n      b = round(b);\n      return inverse ? a > b : a < b;\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // These APIs are for more advanced usages\n  // For example extend charts and components, creating graphic elements, formatting.\n  // Should use `ComponentModel.extend` or `class XXXX extend ComponentModel` to create class.\n  // Then use `registerComponentModel` in `install` parameter when `use` this extension. For example:\n  // class Bar3DModel extends ComponentModel {}\n  // export function install(registers) { regsiters.registerComponentModel(Bar3DModel); }\n  // echarts.use(install);\n\n\n  function extendComponentModel(proto) {\n    var Model = ComponentModel.extend(proto);\n    ComponentModel.registerClass(Model);\n    return Model;\n  }\n\n  function extendComponentView(proto) {\n    var View = ComponentView.extend(proto);\n    ComponentView.registerClass(View);\n    return View;\n  }\n\n  function extendSeriesModel(proto) {\n    var Model = SeriesModel.extend(proto);\n    SeriesModel.registerClass(Model);\n    return Model;\n  }\n\n  function extendChartView(proto) {\n    var View = ChartView.extend(proto);\n    ChartView.registerClass(View);\n    return View;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var PI2$6 = Math.PI * 2;\n  var CMD$3 = PathProxy.CMD;\n  var DEFAULT_SEARCH_SPACE = ['top', 'right', 'bottom', 'left'];\n\n  function getCandidateAnchor(pos, distance$$1, rect, outPt, outDir) {\n    var width = rect.width;\n    var height = rect.height;\n\n    switch (pos) {\n      case 'top':\n        outPt.set(rect.x + width / 2, rect.y - distance$$1);\n        outDir.set(0, -1);\n        break;\n\n      case 'bottom':\n        outPt.set(rect.x + width / 2, rect.y + height + distance$$1);\n        outDir.set(0, 1);\n        break;\n\n      case 'left':\n        outPt.set(rect.x - distance$$1, rect.y + height / 2);\n        outDir.set(-1, 0);\n        break;\n\n      case 'right':\n        outPt.set(rect.x + width + distance$$1, rect.y + height / 2);\n        outDir.set(1, 0);\n        break;\n    }\n  }\n\n  function projectPointToArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y, out) {\n    x -= cx;\n    y -= cy;\n    var d = Math.sqrt(x * x + y * y);\n    x /= d;\n    y /= d; // Intersect point.\n\n    var ox = x * r + cx;\n    var oy = y * r + cy;\n\n    if (Math.abs(startAngle - endAngle) % PI2$6 < 1e-4) {\n      // Is a circle\n      out[0] = ox;\n      out[1] = oy;\n      return d - r;\n    }\n\n    if (anticlockwise) {\n      var tmp = startAngle;\n      startAngle = normalizeRadian(endAngle);\n      endAngle = normalizeRadian(tmp);\n    } else {\n      startAngle = normalizeRadian(startAngle);\n      endAngle = normalizeRadian(endAngle);\n    }\n\n    if (startAngle > endAngle) {\n      endAngle += PI2$6;\n    }\n\n    var angle = Math.atan2(y, x);\n\n    if (angle < 0) {\n      angle += PI2$6;\n    }\n\n    if (angle >= startAngle && angle <= endAngle || angle + PI2$6 >= startAngle && angle + PI2$6 <= endAngle) {\n      // Project point is on the arc.\n      out[0] = ox;\n      out[1] = oy;\n      return d - r;\n    }\n\n    var x1 = r * Math.cos(startAngle) + cx;\n    var y1 = r * Math.sin(startAngle) + cy;\n    var x2 = r * Math.cos(endAngle) + cx;\n    var y2 = r * Math.sin(endAngle) + cy;\n    var d1 = (x1 - x) * (x1 - x) + (y1 - y) * (y1 - y);\n    var d2 = (x2 - x) * (x2 - x) + (y2 - y) * (y2 - y);\n\n    if (d1 < d2) {\n      out[0] = x1;\n      out[1] = y1;\n      return Math.sqrt(d1);\n    } else {\n      out[0] = x2;\n      out[1] = y2;\n      return Math.sqrt(d2);\n    }\n  }\n\n  function projectPointToLine(x1, y1, x2, y2, x, y, out, limitToEnds) {\n    var dx = x - x1;\n    var dy = y - y1;\n    var dx1 = x2 - x1;\n    var dy1 = y2 - y1;\n    var lineLen = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n    dx1 /= lineLen;\n    dy1 /= lineLen; // dot product\n\n    var projectedLen = dx * dx1 + dy * dy1;\n    var t = projectedLen / lineLen;\n\n    if (limitToEnds) {\n      t = Math.min(Math.max(t, 0), 1);\n    }\n\n    t *= lineLen;\n    var ox = out[0] = x1 + t * dx1;\n    var oy = out[1] = y1 + t * dy1;\n    return Math.sqrt((ox - x) * (ox - x) + (oy - y) * (oy - y));\n  }\n\n  function projectPointToRect(x1, y1, width, height, x, y, out) {\n    if (width < 0) {\n      x1 = x1 + width;\n      width = -width;\n    }\n\n    if (height < 0) {\n      y1 = y1 + height;\n      height = -height;\n    }\n\n    var x2 = x1 + width;\n    var y2 = y1 + height;\n    var ox = out[0] = Math.min(Math.max(x, x1), x2);\n    var oy = out[1] = Math.min(Math.max(y, y1), y2);\n    return Math.sqrt((ox - x) * (ox - x) + (oy - y) * (oy - y));\n  }\n\n  var tmpPt = [];\n\n  function nearestPointOnRect(pt, rect, out) {\n    var dist$$1 = projectPointToRect(rect.x, rect.y, rect.width, rect.height, pt.x, pt.y, tmpPt);\n    out.set(tmpPt[0], tmpPt[1]);\n    return dist$$1;\n  }\n  /**\n   * Calculate min distance corresponding point.\n   * This method won't evaluate if point is in the path.\n   */\n\n\n  function nearestPointOnPath(pt, path, out) {\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    var x1;\n    var y1;\n    var minDist = Infinity;\n    var data = path.data;\n    var x = pt.x;\n    var y = pt.y;\n\n    for (var i = 0; i < data.length;) {\n      var cmd = data[i++];\n\n      if (i === 1) {\n        xi = data[i];\n        yi = data[i + 1];\n        x0 = xi;\n        y0 = yi;\n      }\n\n      var d = minDist;\n\n      switch (cmd) {\n        case CMD$3.M:\n          // moveTo 命令重新创建一个新的 subpath, 并且更新新的起点\n          // 在 closePath 的时候使用\n          x0 = data[i++];\n          y0 = data[i++];\n          xi = x0;\n          yi = y0;\n          break;\n\n        case CMD$3.L:\n          d = projectPointToLine(xi, yi, data[i], data[i + 1], x, y, tmpPt, true);\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD$3.C:\n          d = cubicProjectPoint(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y, tmpPt);\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD$3.Q:\n          d = quadraticProjectPoint(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y, tmpPt);\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD$3.A:\n          // TODO Arc 判断的开销比较大\n          var cx = data[i++];\n          var cy = data[i++];\n          var rx = data[i++];\n          var ry = data[i++];\n          var theta = data[i++];\n          var dTheta = data[i++]; // TODO Arc 旋转\n\n          i += 1;\n          var anticlockwise = !!(1 - data[i++]);\n          x1 = Math.cos(theta) * rx + cx;\n          y1 = Math.sin(theta) * ry + cy; // 不是直接使用 arc 命令\n\n          if (i <= 1) {\n            // 第一个命令起点还未定义\n            x0 = x1;\n            y0 = y1;\n          } // zr 使用scale来模拟椭圆, 这里也对x做一定的缩放\n\n\n          var _x = (x - cx) * ry / rx + cx;\n\n          d = projectPointToArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y, tmpPt);\n          xi = Math.cos(theta + dTheta) * rx + cx;\n          yi = Math.sin(theta + dTheta) * ry + cy;\n          break;\n\n        case CMD$3.R:\n          x0 = xi = data[i++];\n          y0 = yi = data[i++];\n          var width = data[i++];\n          var height = data[i++];\n          d = projectPointToRect(x0, y0, width, height, x, y, tmpPt);\n          break;\n\n        case CMD$3.Z:\n          d = projectPointToLine(xi, yi, x0, y0, x, y, tmpPt, true);\n          xi = x0;\n          yi = y0;\n          break;\n      }\n\n      if (d < minDist) {\n        minDist = d;\n        out.set(tmpPt[0], tmpPt[1]);\n      }\n    }\n\n    return minDist;\n  } // Temporal varible for intermediate usage.\n\n\n  var pt0 = new Point();\n  var pt1 = new Point();\n  var pt2 = new Point();\n  var dir = new Point();\n  var dir2 = new Point();\n  /**\n   * Calculate a proper guide line based on the label position and graphic element definition\n   * @param label\n   * @param labelRect\n   * @param target\n   * @param targetRect\n   */\n\n  function updateLabelLinePoints(target, labelLineModel) {\n    if (!target) {\n      return;\n    }\n\n    var labelLine = target.getTextGuideLine();\n    var label = target.getTextContent(); // Needs to create text guide in each charts.\n\n    if (!(label && labelLine)) {\n      return;\n    }\n\n    var labelGuideConfig = target.textGuideLineConfig || {};\n    var points = [[0, 0], [0, 0], [0, 0]];\n    var searchSpace = labelGuideConfig.candidates || DEFAULT_SEARCH_SPACE;\n    var labelRect = label.getBoundingRect().clone();\n    labelRect.applyTransform(label.getComputedTransform());\n    var minDist = Infinity;\n    var anchorPoint = labelGuideConfig.anchor;\n    var targetTransform = target.getComputedTransform();\n    var targetInversedTransform = targetTransform && invert([], targetTransform);\n    var len$$1 = labelLineModel.get('length2') || 0;\n\n    if (anchorPoint) {\n      pt2.copy(anchorPoint);\n    }\n\n    for (var i = 0; i < searchSpace.length; i++) {\n      var candidate = searchSpace[i];\n      getCandidateAnchor(candidate, 0, labelRect, pt0, dir);\n      Point.scaleAndAdd(pt1, pt0, dir, len$$1); // Transform to target coord space.\n\n      pt1.transform(targetInversedTransform); // Note: getBoundingRect will ensure the `path` being created.\n\n      var boundingRect = target.getBoundingRect();\n      var dist$$1 = anchorPoint ? anchorPoint.distance(pt1) : target instanceof Path ? nearestPointOnPath(pt1, target.path, pt2) : nearestPointOnRect(pt1, boundingRect, pt2); // TODO pt2 is in the path\n\n      if (dist$$1 < minDist) {\n        minDist = dist$$1; // Transform back to global space.\n\n        pt1.transform(targetTransform);\n        pt2.transform(targetTransform);\n        pt2.toArray(points[0]);\n        pt1.toArray(points[1]);\n        pt0.toArray(points[2]);\n      }\n    }\n\n    limitTurnAngle(points, labelLineModel.get('minTurnAngle'));\n    labelLine.setShape({\n      points: points\n    });\n  } // Temporal variable for the limitTurnAngle function\n\n\n  var tmpArr = [];\n  var tmpProjPoint = new Point();\n  /**\n   * Reduce the line segment attached to the label to limit the turn angle between two segments.\n   * @param linePoints\n   * @param minTurnAngle Radian of minimum turn angle. 0 - 180\n   */\n\n  function limitTurnAngle(linePoints, minTurnAngle) {\n    if (!(minTurnAngle <= 180 && minTurnAngle > 0)) {\n      return;\n    }\n\n    minTurnAngle = minTurnAngle / 180 * Math.PI; // The line points can be\n    //      /pt1----pt2 (label)\n    //     /\n    // pt0/\n\n    pt0.fromArray(linePoints[0]);\n    pt1.fromArray(linePoints[1]);\n    pt2.fromArray(linePoints[2]);\n    Point.sub(dir, pt0, pt1);\n    Point.sub(dir2, pt2, pt1);\n    var len1 = dir.len();\n    var len2 = dir2.len();\n\n    if (len1 < 1e-3 || len2 < 1e-3) {\n      return;\n    }\n\n    dir.scale(1 / len1);\n    dir2.scale(1 / len2);\n    var angleCos = dir.dot(dir2);\n    var minTurnAngleCos = Math.cos(minTurnAngle);\n\n    if (minTurnAngleCos < angleCos) {\n      // Smaller than minTurnAngle\n      // Calculate project point of pt0 on pt1-pt2\n      var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);\n      tmpProjPoint.fromArray(tmpArr); // Calculate new projected length with limited minTurnAngle and get the new connect point\n\n      tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI - minTurnAngle)); // Limit the new calculated connect point between pt1 and pt2.\n\n      var t = pt2.x !== pt1.x ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x) : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);\n\n      if (isNaN(t)) {\n        return;\n      }\n\n      if (t < 0) {\n        Point.copy(tmpProjPoint, pt1);\n      } else if (t > 1) {\n        Point.copy(tmpProjPoint, pt2);\n      }\n\n      tmpProjPoint.toArray(linePoints[1]);\n    }\n  }\n  /**\n   * Limit the angle of line and the surface\n   * @param maxSurfaceAngle Radian of minimum turn angle. 0 - 180. 0 is same direction to normal. 180 is opposite\n   */\n\n\n  function limitSurfaceAngle(linePoints, surfaceNormal, maxSurfaceAngle) {\n    if (!(maxSurfaceAngle <= 180 && maxSurfaceAngle > 0)) {\n      return;\n    }\n\n    maxSurfaceAngle = maxSurfaceAngle / 180 * Math.PI;\n    pt0.fromArray(linePoints[0]);\n    pt1.fromArray(linePoints[1]);\n    pt2.fromArray(linePoints[2]);\n    Point.sub(dir, pt1, pt0);\n    Point.sub(dir2, pt2, pt1);\n    var len1 = dir.len();\n    var len2 = dir2.len();\n\n    if (len1 < 1e-3 || len2 < 1e-3) {\n      return;\n    }\n\n    dir.scale(1 / len1);\n    dir2.scale(1 / len2);\n    var angleCos = dir.dot(surfaceNormal);\n    var maxSurfaceAngleCos = Math.cos(maxSurfaceAngle);\n\n    if (angleCos < maxSurfaceAngleCos) {\n      // Calculate project point of pt0 on pt1-pt2\n      var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);\n      tmpProjPoint.fromArray(tmpArr);\n      var HALF_PI = Math.PI / 2;\n      var angle2 = Math.acos(dir2.dot(surfaceNormal));\n      var newAngle = HALF_PI + angle2 - maxSurfaceAngle;\n\n      if (newAngle >= HALF_PI) {\n        // parallel\n        Point.copy(tmpProjPoint, pt2);\n      } else {\n        // Calculate new projected length with limited minTurnAngle and get the new connect point\n        tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI / 2 - newAngle)); // Limit the new calculated connect point between pt1 and pt2.\n\n        var t = pt2.x !== pt1.x ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x) : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);\n\n        if (isNaN(t)) {\n          return;\n        }\n\n        if (t < 0) {\n          Point.copy(tmpProjPoint, pt1);\n        } else if (t > 1) {\n          Point.copy(tmpProjPoint, pt2);\n        }\n      }\n\n      tmpProjPoint.toArray(linePoints[1]);\n    }\n  }\n\n  function setLabelLineState(labelLine, ignore, stateName, stateModel) {\n    var isNormal = stateName === 'normal';\n    var stateObj = isNormal ? labelLine : labelLine.ensureState(stateName); // Make sure display.\n\n    stateObj.ignore = ignore; // Set smooth\n\n    var smooth = stateModel.get('smooth');\n\n    if (smooth && smooth === true) {\n      smooth = 0.3;\n    }\n\n    stateObj.shape = stateObj.shape || {};\n\n    if (smooth > 0) {\n      stateObj.shape.smooth = smooth;\n    }\n\n    var styleObj = stateModel.getModel('lineStyle').getLineStyle();\n    isNormal ? labelLine.useStyle(styleObj) : stateObj.style = styleObj;\n  }\n\n  function buildLabelLinePath(path, shape) {\n    var smooth = shape.smooth;\n    var points = shape.points;\n\n    if (!points) {\n      return;\n    }\n\n    path.moveTo(points[0][0], points[0][1]);\n\n    if (smooth > 0 && points.length >= 3) {\n      var len1 = dist(points[0], points[1]);\n      var len2 = dist(points[1], points[2]);\n\n      if (!len1 || !len2) {\n        path.lineTo(points[1][0], points[1][1]);\n        path.lineTo(points[2][0], points[2][1]);\n        return;\n      }\n\n      var moveLen = Math.min(len1, len2) * smooth;\n      var midPoint0 = lerp([], points[1], points[0], moveLen / len1);\n      var midPoint2 = lerp([], points[1], points[2], moveLen / len2);\n      var midPoint1 = lerp([], midPoint0, midPoint2, 0.5);\n      path.bezierCurveTo(midPoint0[0], midPoint0[1], midPoint0[0], midPoint0[1], midPoint1[0], midPoint1[1]);\n      path.bezierCurveTo(midPoint2[0], midPoint2[1], midPoint2[0], midPoint2[1], points[2][0], points[2][1]);\n    } else {\n      for (var i = 1; i < points.length; i++) {\n        path.lineTo(points[i][0], points[i][1]);\n      }\n    }\n  }\n  /**\n   * Create a label line if necessary and set it's style.\n   */\n\n\n  function setLabelLineStyle(targetEl, statesModels, defaultStyle) {\n    var labelLine = targetEl.getTextGuideLine();\n    var label = targetEl.getTextContent();\n\n    if (!label) {\n      // Not show label line if there is no label.\n      if (labelLine) {\n        targetEl.removeTextGuideLine();\n      }\n\n      return;\n    }\n\n    var normalModel = statesModels.normal;\n    var showNormal = normalModel.get('show');\n    var labelIgnoreNormal = label.ignore;\n\n    for (var i = 0; i < DISPLAY_STATES.length; i++) {\n      var stateName = DISPLAY_STATES[i];\n      var stateModel = statesModels[stateName];\n      var isNormal = stateName === 'normal';\n\n      if (stateModel) {\n        var stateShow = stateModel.get('show');\n        var isLabelIgnored = isNormal ? labelIgnoreNormal : retrieve2(label.states[stateName] && label.states[stateName].ignore, labelIgnoreNormal);\n\n        if (isLabelIgnored // Not show when label is not shown in this state.\n        || !retrieve2(stateShow, showNormal) // Use normal state by default if not set.\n        ) {\n            var stateObj = isNormal ? labelLine : labelLine && labelLine.states[stateName];\n\n            if (stateObj) {\n              stateObj.ignore = true;\n            }\n\n            continue;\n          } // Create labelLine if not exists\n\n\n        if (!labelLine) {\n          labelLine = new Polyline();\n          targetEl.setTextGuideLine(labelLine); // Reset state of normal because it's new created.\n          // NOTE: NORMAL should always been the first!\n\n          if (!isNormal && (labelIgnoreNormal || !showNormal)) {\n            setLabelLineState(labelLine, true, 'normal', statesModels.normal);\n          } // Use same state proxy.\n\n\n          if (targetEl.stateProxy) {\n            labelLine.stateProxy = targetEl.stateProxy;\n          }\n        }\n\n        setLabelLineState(labelLine, false, stateName, stateModel);\n      }\n    }\n\n    if (labelLine) {\n      defaults(labelLine.style, defaultStyle); // Not fill.\n\n      labelLine.style.fill = null;\n      var showAbove = normalModel.get('showAbove');\n      var labelLineConfig = targetEl.textGuideLineConfig = targetEl.textGuideLineConfig || {};\n      labelLineConfig.showAbove = showAbove || false; // Custom the buildPath.\n\n      labelLine.buildPath = buildLabelLinePath;\n    }\n  }\n\n  function getLabelLineStatesModels(itemModel, labelLineName) {\n    labelLineName = labelLineName || 'labelLine';\n    var statesModels = {\n      normal: itemModel.getModel(labelLineName)\n    };\n\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      statesModels[stateName] = itemModel.getModel([stateName, labelLineName]);\n    }\n\n    return statesModels;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function prepareLayoutList(input) {\n    var list = [];\n\n    for (var i = 0; i < input.length; i++) {\n      var rawItem = input[i];\n\n      if (rawItem.defaultAttr.ignore) {\n        continue;\n      }\n\n      var label = rawItem.label;\n      var transform = label.getComputedTransform(); // NOTE: Get bounding rect after getComputedTransform, or label may not been updated by the host el.\n\n      var localRect = label.getBoundingRect();\n      var isAxisAligned = !transform || transform[1] < 1e-5 && transform[2] < 1e-5;\n      var minMargin = label.style.margin || 0;\n      var globalRect = localRect.clone();\n      globalRect.applyTransform(transform);\n      globalRect.x -= minMargin / 2;\n      globalRect.y -= minMargin / 2;\n      globalRect.width += minMargin;\n      globalRect.height += minMargin;\n      var obb = isAxisAligned ? new OrientedBoundingRect(localRect, transform) : null;\n      list.push({\n        label: label,\n        labelLine: rawItem.labelLine,\n        rect: globalRect,\n        localRect: localRect,\n        obb: obb,\n        priority: rawItem.priority,\n        defaultAttr: rawItem.defaultAttr,\n        layoutOption: rawItem.computedLayoutOption,\n        axisAligned: isAxisAligned,\n        transform: transform\n      });\n    }\n\n    return list;\n  }\n\n  function shiftLayout(list, xyDim, sizeDim, minBound, maxBound, balanceShift) {\n    var len = list.length;\n\n    if (len < 2) {\n      return;\n    }\n\n    list.sort(function (a, b) {\n      return a.rect[xyDim] - b.rect[xyDim];\n    });\n    var lastPos = 0;\n    var delta;\n    var adjusted = false;\n    var shifts = [];\n    var totalShifts = 0;\n\n    for (var i = 0; i < len; i++) {\n      var item = list[i];\n      var rect = item.rect;\n      delta = rect[xyDim] - lastPos;\n\n      if (delta < 0) {\n        // shiftForward(i, len, -delta);\n        rect[xyDim] -= delta;\n        item.label[xyDim] -= delta;\n        adjusted = true;\n      }\n\n      var shift = Math.max(-delta, 0);\n      shifts.push(shift);\n      totalShifts += shift;\n      lastPos = rect[xyDim] + rect[sizeDim];\n    }\n\n    if (totalShifts > 0 && balanceShift) {\n      // Shift back to make the distribution more equally.\n      shiftList(-totalShifts / len, 0, len);\n    } // TODO bleedMargin?\n\n\n    var first = list[0];\n    var last = list[len - 1];\n    var minGap;\n    var maxGap;\n    updateMinMaxGap(); // If ends exceed two bounds, squeeze at most 80%, then take the gap of two bounds.\n\n    minGap < 0 && squeezeGaps(-minGap, 0.8);\n    maxGap < 0 && squeezeGaps(maxGap, 0.8);\n    updateMinMaxGap();\n    takeBoundsGap(minGap, maxGap, 1);\n    takeBoundsGap(maxGap, minGap, -1); // Handle bailout when there is not enough space.\n\n    updateMinMaxGap();\n\n    if (minGap < 0) {\n      squeezeWhenBailout(-minGap);\n    }\n\n    if (maxGap < 0) {\n      squeezeWhenBailout(maxGap);\n    }\n\n    function updateMinMaxGap() {\n      minGap = first.rect[xyDim] - minBound;\n      maxGap = maxBound - last.rect[xyDim] - last.rect[sizeDim];\n    }\n\n    function takeBoundsGap(gapThisBound, gapOtherBound, moveDir) {\n      if (gapThisBound < 0) {\n        // Move from other gap if can.\n        var moveFromMaxGap = Math.min(gapOtherBound, -gapThisBound);\n\n        if (moveFromMaxGap > 0) {\n          shiftList(moveFromMaxGap * moveDir, 0, len);\n          var remained = moveFromMaxGap + gapThisBound;\n\n          if (remained < 0) {\n            squeezeGaps(-remained * moveDir, 1);\n          }\n        } else {\n          squeezeGaps(-gapThisBound * moveDir, 1);\n        }\n      }\n    }\n\n    function shiftList(delta, start, end) {\n      if (delta !== 0) {\n        adjusted = true;\n      }\n\n      for (var i = start; i < end; i++) {\n        var item = list[i];\n        var rect = item.rect;\n        rect[xyDim] += delta;\n        item.label[xyDim] += delta;\n      }\n    } // Squeeze gaps if the labels exceed margin.\n\n\n    function squeezeGaps(delta, maxSqeezePercent) {\n      var gaps = [];\n      var totalGaps = 0;\n\n      for (var i = 1; i < len; i++) {\n        var prevItemRect = list[i - 1].rect;\n        var gap = Math.max(list[i].rect[xyDim] - prevItemRect[xyDim] - prevItemRect[sizeDim], 0);\n        gaps.push(gap);\n        totalGaps += gap;\n      }\n\n      if (!totalGaps) {\n        return;\n      }\n\n      var squeezePercent = Math.min(Math.abs(delta) / totalGaps, maxSqeezePercent);\n\n      if (delta > 0) {\n        for (var i = 0; i < len - 1; i++) {\n          // Distribute the shift delta to all gaps.\n          var movement = gaps[i] * squeezePercent; // Forward\n\n          shiftList(movement, 0, i + 1);\n        }\n      } else {\n        // Backward\n        for (var i = len - 1; i > 0; i--) {\n          // Distribute the shift delta to all gaps.\n          var movement = gaps[i - 1] * squeezePercent;\n          shiftList(-movement, i, len);\n        }\n      }\n    }\n    /**\n     * Squeeze to allow overlap if there is no more space available.\n     * Let other overlapping strategy like hideOverlap do the job instead of keep exceeding the bounds.\n     */\n\n\n    function squeezeWhenBailout(delta) {\n      var dir = delta < 0 ? -1 : 1;\n      delta = Math.abs(delta);\n      var moveForEachLabel = Math.ceil(delta / (len - 1));\n\n      for (var i = 0; i < len - 1; i++) {\n        if (dir > 0) {\n          // Forward\n          shiftList(moveForEachLabel, 0, i + 1);\n        } else {\n          // Backward\n          shiftList(-moveForEachLabel, len - i - 1, len);\n        }\n\n        delta -= moveForEachLabel;\n\n        if (delta <= 0) {\n          return;\n        }\n      }\n    }\n\n    return adjusted;\n  }\n  /**\n   * Adjust labels on x direction to avoid overlap.\n   */\n\n\n  function shiftLayoutOnX(list, leftBound, rightBound, // If average the shifts on all labels and add them to 0\n  // TODO: Not sure if should enable it.\n  // Pros: The angle of lines will distribute more equally\n  // Cons: In some layout. It may not what user wanted. like in pie. the label of last sector is usually changed unexpectedly.\n  balanceShift) {\n    return shiftLayout(list, 'x', 'width', leftBound, rightBound, balanceShift);\n  }\n  /**\n   * Adjust labels on y direction to avoid overlap.\n   */\n\n\n  function shiftLayoutOnY(list, topBound, bottomBound, // If average the shifts on all labels and add them to 0\n  balanceShift) {\n    return shiftLayout(list, 'y', 'height', topBound, bottomBound, balanceShift);\n  }\n\n  function hideOverlap(labelList) {\n    var displayedLabels = []; // TODO, render overflow visible first, put in the displayedLabels.\n\n    labelList.sort(function (a, b) {\n      return b.priority - a.priority;\n    });\n    var globalRect = new BoundingRect(0, 0, 0, 0);\n\n    function hideEl(el) {\n      if (!el.ignore) {\n        // Show on emphasis.\n        var emphasisState = el.ensureState('emphasis');\n\n        if (emphasisState.ignore == null) {\n          emphasisState.ignore = false;\n        }\n      }\n\n      el.ignore = true;\n    }\n\n    for (var i = 0; i < labelList.length; i++) {\n      var labelItem = labelList[i];\n      var isAxisAligned = labelItem.axisAligned;\n      var localRect = labelItem.localRect;\n      var transform = labelItem.transform;\n      var label = labelItem.label;\n      var labelLine = labelItem.labelLine;\n      globalRect.copy(labelItem.rect); // Add a threshold because layout may be aligned precisely.\n\n      globalRect.width -= 0.1;\n      globalRect.height -= 0.1;\n      globalRect.x += 0.05;\n      globalRect.y += 0.05;\n      var obb = labelItem.obb;\n      var overlapped = false;\n\n      for (var j = 0; j < displayedLabels.length; j++) {\n        var existsTextCfg = displayedLabels[j]; // Fast rejection.\n\n        if (!globalRect.intersect(existsTextCfg.rect)) {\n          continue;\n        }\n\n        if (isAxisAligned && existsTextCfg.axisAligned) {\n          // Is overlapped\n          overlapped = true;\n          break;\n        }\n\n        if (!existsTextCfg.obb) {\n          // If self is not axis aligned. But other is.\n          existsTextCfg.obb = new OrientedBoundingRect(existsTextCfg.localRect, existsTextCfg.transform);\n        }\n\n        if (!obb) {\n          // If self is axis aligned. But other is not.\n          obb = new OrientedBoundingRect(localRect, transform);\n        }\n\n        if (obb.intersect(existsTextCfg.obb)) {\n          overlapped = true;\n          break;\n        }\n      } // TODO Callback to determine if this overlap should be handled?\n\n\n      if (overlapped) {\n        hideEl(label);\n        labelLine && hideEl(labelLine);\n      } else {\n        label.attr('ignore', labelItem.defaultAttr.ignore);\n        labelLine && labelLine.attr('ignore', labelItem.defaultAttr.labelGuideIgnore);\n        displayedLabels.push(labelItem);\n      }\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // TODO: move labels out of viewport.\n\n\n  function cloneArr(points) {\n    if (points) {\n      var newPoints = [];\n\n      for (var i = 0; i < points.length; i++) {\n        newPoints.push(points[i].slice());\n      }\n\n      return newPoints;\n    }\n  }\n\n  function prepareLayoutCallbackParams(labelItem, hostEl) {\n    var label = labelItem.label;\n    var labelLine = hostEl && hostEl.getTextGuideLine();\n    return {\n      dataIndex: labelItem.dataIndex,\n      dataType: labelItem.dataType,\n      seriesIndex: labelItem.seriesModel.seriesIndex,\n      text: labelItem.label.style.text,\n      rect: labelItem.hostRect,\n      labelRect: labelItem.rect,\n      // x: labelAttr.x,\n      // y: labelAttr.y,\n      align: label.style.align,\n      verticalAlign: label.style.verticalAlign,\n      labelLinePoints: cloneArr(labelLine && labelLine.shape.points)\n    };\n  }\n\n  var LABEL_OPTION_TO_STYLE_KEYS = ['align', 'verticalAlign', 'width', 'height', 'fontSize'];\n  var dummyTransformable = new Transformable();\n  var labelLayoutInnerStore = makeInner();\n  var labelLineAnimationStore = makeInner();\n\n  function extendWithKeys(target, source, keys$$1) {\n    for (var i = 0; i < keys$$1.length; i++) {\n      var key = keys$$1[i];\n\n      if (source[key] != null) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  var LABEL_LAYOUT_PROPS = ['x', 'y', 'rotation'];\n\n  var LabelManager =\n  /** @class */\n  function () {\n    function LabelManager() {\n      this._labelList = [];\n      this._chartViewList = [];\n    }\n\n    LabelManager.prototype.clearLabels = function () {\n      this._labelList = [];\n      this._chartViewList = [];\n    };\n    /**\n     * Add label to manager\n     */\n\n\n    LabelManager.prototype._addLabel = function (dataIndex, dataType, seriesModel, label, layoutOption) {\n      var labelStyle = label.style;\n      var hostEl = label.__hostTarget;\n      var textConfig = hostEl.textConfig || {}; // TODO: If label is in other state.\n\n      var labelTransform = label.getComputedTransform();\n      var labelRect = label.getBoundingRect().plain();\n      BoundingRect.applyTransform(labelRect, labelRect, labelTransform);\n\n      if (labelTransform) {\n        dummyTransformable.setLocalTransform(labelTransform);\n      } else {\n        // Identity transform.\n        dummyTransformable.x = dummyTransformable.y = dummyTransformable.rotation = dummyTransformable.originX = dummyTransformable.originY = 0;\n        dummyTransformable.scaleX = dummyTransformable.scaleY = 1;\n      }\n\n      var host = label.__hostTarget;\n      var hostRect;\n\n      if (host) {\n        hostRect = host.getBoundingRect().plain();\n        var transform = host.getComputedTransform();\n        BoundingRect.applyTransform(hostRect, hostRect, transform);\n      }\n\n      var labelGuide = hostRect && host.getTextGuideLine();\n\n      this._labelList.push({\n        label: label,\n        labelLine: labelGuide,\n        seriesModel: seriesModel,\n        dataIndex: dataIndex,\n        dataType: dataType,\n        layoutOption: layoutOption,\n        computedLayoutOption: null,\n        rect: labelRect,\n        hostRect: hostRect,\n        // Label with lower priority will be hidden when overlapped\n        // Use rect size as default priority\n        priority: hostRect ? hostRect.width * hostRect.height : 0,\n        // Save default label attributes.\n        // For restore if developers want get back to default value in callback.\n        defaultAttr: {\n          ignore: label.ignore,\n          labelGuideIgnore: labelGuide && labelGuide.ignore,\n          x: dummyTransformable.x,\n          y: dummyTransformable.y,\n          scaleX: dummyTransformable.scaleX,\n          scaleY: dummyTransformable.scaleY,\n          rotation: dummyTransformable.rotation,\n          style: {\n            x: labelStyle.x,\n            y: labelStyle.y,\n            align: labelStyle.align,\n            verticalAlign: labelStyle.verticalAlign,\n            width: labelStyle.width,\n            height: labelStyle.height,\n            fontSize: labelStyle.fontSize\n          },\n          cursor: label.cursor,\n          attachedPos: textConfig.position,\n          attachedRot: textConfig.rotation\n        }\n      });\n    };\n\n    LabelManager.prototype.addLabelsOfSeries = function (chartView) {\n      var _this = this;\n\n      this._chartViewList.push(chartView);\n\n      var seriesModel = chartView.__model;\n      var layoutOption = seriesModel.get('labelLayout');\n      /**\n       * Ignore layouting if it's not specified anything.\n       */\n\n      if (!(isFunction(layoutOption) || keys(layoutOption).length)) {\n        return;\n      }\n\n      chartView.group.traverse(function (child) {\n        if (child.ignore) {\n          return true; // Stop traverse descendants.\n        } // Only support label being hosted on graphic elements.\n\n\n        var textEl = child.getTextContent();\n        var ecData = getECData(child); // Can only attach the text on the element with dataIndex\n\n        if (textEl && !textEl.disableLabelLayout) {\n          _this._addLabel(ecData.dataIndex, ecData.dataType, seriesModel, textEl, layoutOption);\n        }\n      });\n    };\n\n    LabelManager.prototype.updateLayoutConfig = function (api) {\n      var width = api.getWidth();\n      var height = api.getHeight();\n\n      function createDragHandler(el, labelLineModel) {\n        return function () {\n          updateLabelLinePoints(el, labelLineModel);\n        };\n      }\n\n      for (var i = 0; i < this._labelList.length; i++) {\n        var labelItem = this._labelList[i];\n        var label = labelItem.label;\n        var hostEl = label.__hostTarget;\n        var defaultLabelAttr = labelItem.defaultAttr;\n        var layoutOption = void 0; // TODO A global layout option?\n\n        if (isFunction(labelItem.layoutOption)) {\n          layoutOption = labelItem.layoutOption(prepareLayoutCallbackParams(labelItem, hostEl));\n        } else {\n          layoutOption = labelItem.layoutOption;\n        }\n\n        layoutOption = layoutOption || {};\n        labelItem.computedLayoutOption = layoutOption;\n        var degreeToRadian = Math.PI / 180; // TODO hostEl should always exists.\n        // Or label should not have parent because the x, y is all in global space.\n\n        if (hostEl) {\n          hostEl.setTextConfig({\n            // Force to set local false.\n            local: false,\n            // Ignore position and rotation config on the host el if x or y is changed.\n            position: layoutOption.x != null || layoutOption.y != null ? null : defaultLabelAttr.attachedPos,\n            // Ignore rotation config on the host el if rotation is changed.\n            rotation: layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.attachedRot,\n            offset: [layoutOption.dx || 0, layoutOption.dy || 0]\n          });\n        }\n\n        var needsUpdateLabelLine = false;\n\n        if (layoutOption.x != null) {\n          // TODO width of chart view.\n          label.x = parsePercent$1(layoutOption.x, width);\n          label.setStyle('x', 0); // Ignore movement in style. TODO: origin.\n\n          needsUpdateLabelLine = true;\n        } else {\n          label.x = defaultLabelAttr.x;\n          label.setStyle('x', defaultLabelAttr.style.x);\n        }\n\n        if (layoutOption.y != null) {\n          // TODO height of chart view.\n          label.y = parsePercent$1(layoutOption.y, height);\n          label.setStyle('y', 0); // Ignore movement in style.\n\n          needsUpdateLabelLine = true;\n        } else {\n          label.y = defaultLabelAttr.y;\n          label.setStyle('y', defaultLabelAttr.style.y);\n        }\n\n        if (layoutOption.labelLinePoints) {\n          var guideLine = hostEl.getTextGuideLine();\n\n          if (guideLine) {\n            guideLine.setShape({\n              points: layoutOption.labelLinePoints\n            }); // Not update\n\n            needsUpdateLabelLine = false;\n          }\n        }\n\n        var labelLayoutStore = labelLayoutInnerStore(label);\n        labelLayoutStore.needsUpdateLabelLine = needsUpdateLabelLine;\n        label.rotation = layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.rotation;\n        label.scaleX = defaultLabelAttr.scaleX;\n        label.scaleY = defaultLabelAttr.scaleY;\n\n        for (var k = 0; k < LABEL_OPTION_TO_STYLE_KEYS.length; k++) {\n          var key = LABEL_OPTION_TO_STYLE_KEYS[k];\n          label.setStyle(key, layoutOption[key] != null ? layoutOption[key] : defaultLabelAttr.style[key]);\n        }\n\n        if (layoutOption.draggable) {\n          label.draggable = true;\n          label.cursor = 'move';\n\n          if (hostEl) {\n            var hostModel = labelItem.seriesModel;\n\n            if (labelItem.dataIndex != null) {\n              var data = labelItem.seriesModel.getData(labelItem.dataType);\n              hostModel = data.getItemModel(labelItem.dataIndex);\n            }\n\n            label.on('drag', createDragHandler(hostEl, hostModel.getModel('labelLine')));\n          }\n        } else {\n          // TODO Other drag functions?\n          label.off('drag');\n          label.cursor = defaultLabelAttr.cursor;\n        }\n      }\n    };\n\n    LabelManager.prototype.layout = function (api) {\n      var width = api.getWidth();\n      var height = api.getHeight();\n      var labelList = prepareLayoutList(this._labelList);\n      var labelsNeedsAdjustOnX = filter(labelList, function (item) {\n        return item.layoutOption.moveOverlap === 'shiftX';\n      });\n      var labelsNeedsAdjustOnY = filter(labelList, function (item) {\n        return item.layoutOption.moveOverlap === 'shiftY';\n      });\n      shiftLayoutOnX(labelsNeedsAdjustOnX, 0, width);\n      shiftLayoutOnY(labelsNeedsAdjustOnY, 0, height);\n      var labelsNeedsHideOverlap = filter(labelList, function (item) {\n        return item.layoutOption.hideOverlap;\n      });\n      hideOverlap(labelsNeedsHideOverlap);\n    };\n    /**\n     * Process all labels. Not only labels with layoutOption.\n     */\n\n\n    LabelManager.prototype.processLabelsOverall = function () {\n      var _this = this;\n\n      each(this._chartViewList, function (chartView) {\n        var seriesModel = chartView.__model;\n        var ignoreLabelLineUpdate = chartView.ignoreLabelLineUpdate;\n        var animationEnabled = seriesModel.isAnimationEnabled();\n        chartView.group.traverse(function (child) {\n          if (child.ignore && !child.forceLabelAnimation) {\n            return true; // Stop traverse descendants.\n          }\n\n          var needsUpdateLabelLine = !ignoreLabelLineUpdate;\n          var label = child.getTextContent();\n\n          if (!needsUpdateLabelLine && label) {\n            needsUpdateLabelLine = labelLayoutInnerStore(label).needsUpdateLabelLine;\n          }\n\n          if (needsUpdateLabelLine) {\n            _this._updateLabelLine(child, seriesModel);\n          }\n\n          if (animationEnabled) {\n            _this._animateLabels(child, seriesModel);\n          }\n        });\n      });\n    };\n\n    LabelManager.prototype._updateLabelLine = function (el, seriesModel) {\n      // Only support label being hosted on graphic elements.\n      var textEl = el.getTextContent(); // Update label line style.\n\n      var ecData = getECData(el);\n      var dataIndex = ecData.dataIndex; // Only support labelLine on the labels represent data.\n\n      if (textEl && dataIndex != null) {\n        var data = seriesModel.getData(ecData.dataType);\n        var itemModel = data.getItemModel(dataIndex);\n        var defaultStyle = {};\n        var visualStyle = data.getItemVisual(dataIndex, 'style');\n        var visualType = data.getVisual('drawType'); // Default to be same with main color\n\n        defaultStyle.stroke = visualStyle[visualType];\n        var labelLineModel = itemModel.getModel('labelLine');\n        setLabelLineStyle(el, getLabelLineStatesModels(itemModel), defaultStyle);\n        updateLabelLinePoints(el, labelLineModel);\n      }\n    };\n\n    LabelManager.prototype._animateLabels = function (el, seriesModel) {\n      var textEl = el.getTextContent();\n      var guideLine = el.getTextGuideLine(); // Animate\n\n      if (textEl // `forceLabelAnimation` has the highest priority\n      && (el.forceLabelAnimation || !textEl.ignore && !textEl.invisible && !el.disableLabelAnimation && !isElementRemoved(el))) {\n        var layoutStore = labelLayoutInnerStore(textEl);\n        var oldLayout = layoutStore.oldLayout;\n        var ecData = getECData(el);\n        var dataIndex = ecData.dataIndex;\n        var newProps = {\n          x: textEl.x,\n          y: textEl.y,\n          rotation: textEl.rotation\n        };\n        var data = seriesModel.getData(ecData.dataType);\n\n        if (!oldLayout) {\n          textEl.attr(newProps); // Disable fade in animation if value animation is enabled.\n\n          if (!labelInner(textEl).valueAnimation) {\n            var oldOpacity = retrieve2(textEl.style.opacity, 1); // Fade in animation\n\n            textEl.style.opacity = 0;\n            initProps(textEl, {\n              style: {\n                opacity: oldOpacity\n              }\n            }, seriesModel, dataIndex);\n          }\n        } else {\n          textEl.attr(oldLayout); // Make sure the animation from is in the right status.\n\n          var prevStates = el.prevStates;\n\n          if (prevStates) {\n            if (indexOf(prevStates, 'select') >= 0) {\n              textEl.attr(layoutStore.oldLayoutSelect);\n            }\n\n            if (indexOf(prevStates, 'emphasis') >= 0) {\n              textEl.attr(layoutStore.oldLayoutEmphasis);\n            }\n          }\n\n          updateProps(textEl, newProps, seriesModel, dataIndex);\n        }\n\n        layoutStore.oldLayout = newProps;\n\n        if (textEl.states.select) {\n          var layoutSelect = layoutStore.oldLayoutSelect = {};\n          extendWithKeys(layoutSelect, newProps, LABEL_LAYOUT_PROPS);\n          extendWithKeys(layoutSelect, textEl.states.select, LABEL_LAYOUT_PROPS);\n        }\n\n        if (textEl.states.emphasis) {\n          var layoutEmphasis = layoutStore.oldLayoutEmphasis = {};\n          extendWithKeys(layoutEmphasis, newProps, LABEL_LAYOUT_PROPS);\n          extendWithKeys(layoutEmphasis, textEl.states.emphasis, LABEL_LAYOUT_PROPS);\n        }\n\n        animateLabelValue(textEl, dataIndex, data, seriesModel, seriesModel);\n      }\n\n      if (guideLine && !guideLine.ignore && !guideLine.invisible) {\n        var layoutStore = labelLineAnimationStore(guideLine);\n        var oldLayout = layoutStore.oldLayout;\n        var newLayout = {\n          points: guideLine.shape.points\n        };\n\n        if (!oldLayout) {\n          guideLine.setShape(newLayout);\n          guideLine.style.strokePercent = 0;\n          initProps(guideLine, {\n            style: {\n              strokePercent: 1\n            }\n          }, seriesModel);\n        } else {\n          guideLine.attr({\n            shape: oldLayout\n          });\n          updateProps(guideLine, {\n            shape: newLayout\n          }, seriesModel);\n        }\n\n        layoutStore.oldLayout = newLayout;\n      }\n    };\n\n    return LabelManager;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var getLabelManager = makeInner();\n\n  function installLabelLayout(registers) {\n    registers.registerUpdateLifecycle('series:beforeupdate', function (ecModel, api, params) {\n      // TODO api provide an namespace that can save stuff per instance\n      var labelManager = getLabelManager(api).labelManager;\n\n      if (!labelManager) {\n        labelManager = getLabelManager(api).labelManager = new LabelManager();\n      }\n\n      labelManager.clearLabels();\n    });\n    registers.registerUpdateLifecycle('series:layoutlabels', function (ecModel, api, params) {\n      var labelManager = getLabelManager(api).labelManager;\n      params.updatedSeries.forEach(function (series) {\n        labelManager.addLabelsOfSeries(api.getViewOfSeriesModel(series));\n      });\n      labelManager.updateLayoutConfig(api);\n      labelManager.layout(api);\n      labelManager.processLabelsOverall();\n    });\n  } // TODO will be treeshaked.\n\n\n  use(installLabelLayout);\n\n  function createDom(id, painter, dpr) {\n    var newDom = platformApi.createCanvas();\n    var width = painter.getWidth();\n    var height = painter.getHeight();\n    var newDomStyle = newDom.style;\n\n    if (newDomStyle) {\n      newDomStyle.position = 'absolute';\n      newDomStyle.left = '0';\n      newDomStyle.top = '0';\n      newDomStyle.width = width + 'px';\n      newDomStyle.height = height + 'px';\n      newDom.setAttribute('data-zr-dom-id', id);\n    }\n\n    newDom.width = width * dpr;\n    newDom.height = height * dpr;\n    return newDom;\n  }\n\n  var Layer = function (_super) {\n    __extends(Layer, _super);\n\n    function Layer(id, painter, dpr) {\n      var _this = _super.call(this) || this;\n\n      _this.motionBlur = false;\n      _this.lastFrameAlpha = 0.7;\n      _this.dpr = 1;\n      _this.virtual = false;\n      _this.config = {};\n      _this.incremental = false;\n      _this.zlevel = 0;\n      _this.maxRepaintRectCount = 5;\n      _this.__dirty = true;\n      _this.__firstTimePaint = true;\n      _this.__used = false;\n      _this.__drawIndex = 0;\n      _this.__startIndex = 0;\n      _this.__endIndex = 0;\n      _this.__prevStartIndex = null;\n      _this.__prevEndIndex = null;\n      var dom;\n      dpr = dpr || devicePixelRatio;\n\n      if (typeof id === 'string') {\n        dom = createDom(id, painter, dpr);\n      } else if (isObject(id)) {\n        dom = id;\n        id = dom.id;\n      }\n\n      _this.id = id;\n      _this.dom = dom;\n      var domStyle = dom.style;\n\n      if (domStyle) {\n        disableUserSelect(dom);\n\n        dom.onselectstart = function () {\n          return false;\n        };\n\n        domStyle.padding = '0';\n        domStyle.margin = '0';\n        domStyle.borderWidth = '0';\n      }\n\n      _this.painter = painter;\n      _this.dpr = dpr;\n      return _this;\n    }\n\n    Layer.prototype.getElementCount = function () {\n      return this.__endIndex - this.__startIndex;\n    };\n\n    Layer.prototype.afterBrush = function () {\n      this.__prevStartIndex = this.__startIndex;\n      this.__prevEndIndex = this.__endIndex;\n    };\n\n    Layer.prototype.initContext = function () {\n      this.ctx = this.dom.getContext('2d');\n      this.ctx.dpr = this.dpr;\n    };\n\n    Layer.prototype.setUnpainted = function () {\n      this.__firstTimePaint = true;\n    };\n\n    Layer.prototype.createBackBuffer = function () {\n      var dpr = this.dpr;\n      this.domBack = createDom('back-' + this.id, this.painter, dpr);\n      this.ctxBack = this.domBack.getContext('2d');\n\n      if (dpr !== 1) {\n        this.ctxBack.scale(dpr, dpr);\n      }\n    };\n\n    Layer.prototype.createRepaintRects = function (displayList, prevList, viewWidth, viewHeight) {\n      if (this.__firstTimePaint) {\n        this.__firstTimePaint = false;\n        return null;\n      }\n\n      var mergedRepaintRects = [];\n      var maxRepaintRectCount = this.maxRepaintRectCount;\n      var full = false;\n      var pendingRect = new BoundingRect(0, 0, 0, 0);\n\n      function addRectToMergePool(rect) {\n        if (!rect.isFinite() || rect.isZero()) {\n          return;\n        }\n\n        if (mergedRepaintRects.length === 0) {\n          var boundingRect = new BoundingRect(0, 0, 0, 0);\n          boundingRect.copy(rect);\n          mergedRepaintRects.push(boundingRect);\n        } else {\n          var isMerged = false;\n          var minDeltaArea = Infinity;\n          var bestRectToMergeIdx = 0;\n\n          for (var i = 0; i < mergedRepaintRects.length; ++i) {\n            var mergedRect = mergedRepaintRects[i];\n\n            if (mergedRect.intersect(rect)) {\n              var pendingRect_1 = new BoundingRect(0, 0, 0, 0);\n              pendingRect_1.copy(mergedRect);\n              pendingRect_1.union(rect);\n              mergedRepaintRects[i] = pendingRect_1;\n              isMerged = true;\n              break;\n            } else if (full) {\n              pendingRect.copy(rect);\n              pendingRect.union(mergedRect);\n              var aArea = rect.width * rect.height;\n              var bArea = mergedRect.width * mergedRect.height;\n              var pendingArea = pendingRect.width * pendingRect.height;\n              var deltaArea = pendingArea - aArea - bArea;\n\n              if (deltaArea < minDeltaArea) {\n                minDeltaArea = deltaArea;\n                bestRectToMergeIdx = i;\n              }\n            }\n          }\n\n          if (full) {\n            mergedRepaintRects[bestRectToMergeIdx].union(rect);\n            isMerged = true;\n          }\n\n          if (!isMerged) {\n            var boundingRect = new BoundingRect(0, 0, 0, 0);\n            boundingRect.copy(rect);\n            mergedRepaintRects.push(boundingRect);\n          }\n\n          if (!full) {\n            full = mergedRepaintRects.length >= maxRepaintRectCount;\n          }\n        }\n      }\n\n      for (var i = this.__startIndex; i < this.__endIndex; ++i) {\n        var el = displayList[i];\n\n        if (el) {\n          var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n          var prevRect = el.__isRendered && (el.__dirty & REDRAW_BIT || !shouldPaint) ? el.getPrevPaintRect() : null;\n\n          if (prevRect) {\n            addRectToMergePool(prevRect);\n          }\n\n          var curRect = shouldPaint && (el.__dirty & REDRAW_BIT || !el.__isRendered) ? el.getPaintRect() : null;\n\n          if (curRect) {\n            addRectToMergePool(curRect);\n          }\n        }\n      }\n\n      for (var i = this.__prevStartIndex; i < this.__prevEndIndex; ++i) {\n        var el = prevList[i];\n        var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n\n        if (el && (!shouldPaint || !el.__zr) && el.__isRendered) {\n          var prevRect = el.getPrevPaintRect();\n\n          if (prevRect) {\n            addRectToMergePool(prevRect);\n          }\n        }\n      }\n\n      var hasIntersections;\n\n      do {\n        hasIntersections = false;\n\n        for (var i = 0; i < mergedRepaintRects.length;) {\n          if (mergedRepaintRects[i].isZero()) {\n            mergedRepaintRects.splice(i, 1);\n            continue;\n          }\n\n          for (var j = i + 1; j < mergedRepaintRects.length;) {\n            if (mergedRepaintRects[i].intersect(mergedRepaintRects[j])) {\n              hasIntersections = true;\n              mergedRepaintRects[i].union(mergedRepaintRects[j]);\n              mergedRepaintRects.splice(j, 1);\n            } else {\n              j++;\n            }\n          }\n\n          i++;\n        }\n      } while (hasIntersections);\n\n      this._paintRects = mergedRepaintRects;\n      return mergedRepaintRects;\n    };\n\n    Layer.prototype.debugGetPaintRects = function () {\n      return (this._paintRects || []).slice();\n    };\n\n    Layer.prototype.resize = function (width, height) {\n      var dpr = this.dpr;\n      var dom = this.dom;\n      var domStyle = dom.style;\n      var domBack = this.domBack;\n\n      if (domStyle) {\n        domStyle.width = width + 'px';\n        domStyle.height = height + 'px';\n      }\n\n      dom.width = width * dpr;\n      dom.height = height * dpr;\n\n      if (domBack) {\n        domBack.width = width * dpr;\n        domBack.height = height * dpr;\n\n        if (dpr !== 1) {\n          this.ctxBack.scale(dpr, dpr);\n        }\n      }\n    };\n\n    Layer.prototype.clear = function (clearAll, clearColor, repaintRects) {\n      var dom = this.dom;\n      var ctx = this.ctx;\n      var width = dom.width;\n      var height = dom.height;\n      clearColor = clearColor || this.clearColor;\n      var haveMotionBLur = this.motionBlur && !clearAll;\n      var lastFrameAlpha = this.lastFrameAlpha;\n      var dpr = this.dpr;\n      var self = this;\n\n      if (haveMotionBLur) {\n        if (!this.domBack) {\n          this.createBackBuffer();\n        }\n\n        this.ctxBack.globalCompositeOperation = 'copy';\n        this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n      }\n\n      var domBack = this.domBack;\n\n      function doClear(x, y, width, height) {\n        ctx.clearRect(x, y, width, height);\n\n        if (clearColor && clearColor !== 'transparent') {\n          var clearColorGradientOrPattern = void 0;\n\n          if (isGradientObject(clearColor)) {\n            clearColorGradientOrPattern = clearColor.__canvasGradient || getCanvasGradient(ctx, clearColor, {\n              x: 0,\n              y: 0,\n              width: width,\n              height: height\n            });\n            clearColor.__canvasGradient = clearColorGradientOrPattern;\n          } else if (isImagePatternObject(clearColor)) {\n            clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {\n              dirty: function () {\n                self.setUnpainted();\n\n                self.__painter.refresh();\n              }\n            });\n          }\n\n          ctx.save();\n          ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n          ctx.fillRect(x, y, width, height);\n          ctx.restore();\n        }\n\n        if (haveMotionBLur) {\n          ctx.save();\n          ctx.globalAlpha = lastFrameAlpha;\n          ctx.drawImage(domBack, x, y, width, height);\n          ctx.restore();\n        }\n      }\n\n      if (!repaintRects || haveMotionBLur) {\n        doClear(0, 0, width, height);\n      } else if (repaintRects.length) {\n        each(repaintRects, function (rect) {\n          doClear(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n        });\n      }\n    };\n\n    return Layer;\n  }(Eventful);\n\n  var HOVER_LAYER_ZLEVEL = 1e5;\n  var CANVAS_ZLEVEL = 314159;\n  var EL_AFTER_INCREMENTAL_INC = 0.01;\n  var INCREMENTAL_INC = 0.001;\n\n  function isLayerValid(layer) {\n    if (!layer) {\n      return false;\n    }\n\n    if (layer.__builtin__) {\n      return true;\n    }\n\n    if (typeof layer.resize !== 'function' || typeof layer.refresh !== 'function') {\n      return false;\n    }\n\n    return true;\n  }\n\n  function createRoot(width, height) {\n    var domRoot = document.createElement('div');\n    domRoot.style.cssText = ['position:relative', 'width:' + width + 'px', 'height:' + height + 'px', 'padding:0', 'margin:0', 'border-width:0'].join(';') + ';';\n    return domRoot;\n  }\n\n  var CanvasPainter = function () {\n    function CanvasPainter(root, storage, opts, id) {\n      this.type = 'canvas';\n      this._zlevelList = [];\n      this._prevDisplayList = [];\n      this._layers = {};\n      this._layerConfig = {};\n      this._needsManuallyCompositing = false;\n      this.type = 'canvas';\n      var singleCanvas = !root.nodeName || root.nodeName.toUpperCase() === 'CANVAS';\n      this._opts = opts = extend({}, opts || {});\n      this.dpr = opts.devicePixelRatio || devicePixelRatio;\n      this._singleCanvas = singleCanvas;\n      this.root = root;\n      var rootStyle = root.style;\n\n      if (rootStyle) {\n        disableUserSelect(root);\n        root.innerHTML = '';\n      }\n\n      this.storage = storage;\n      var zlevelList = this._zlevelList;\n      this._prevDisplayList = [];\n      var layers = this._layers;\n\n      if (!singleCanvas) {\n        this._width = getSize(root, 0, opts);\n        this._height = getSize(root, 1, opts);\n        var domRoot = this._domRoot = createRoot(this._width, this._height);\n        root.appendChild(domRoot);\n      } else {\n        var rootCanvas = root;\n        var width = rootCanvas.width;\n        var height = rootCanvas.height;\n\n        if (opts.width != null) {\n          width = opts.width;\n        }\n\n        if (opts.height != null) {\n          height = opts.height;\n        }\n\n        this.dpr = opts.devicePixelRatio || 1;\n        rootCanvas.width = width * this.dpr;\n        rootCanvas.height = height * this.dpr;\n        this._width = width;\n        this._height = height;\n        var mainLayer = new Layer(rootCanvas, this, this.dpr);\n        mainLayer.__builtin__ = true;\n        mainLayer.initContext();\n        layers[CANVAS_ZLEVEL] = mainLayer;\n        mainLayer.zlevel = CANVAS_ZLEVEL;\n        zlevelList.push(CANVAS_ZLEVEL);\n        this._domRoot = root;\n      }\n    }\n\n    CanvasPainter.prototype.getType = function () {\n      return 'canvas';\n    };\n\n    CanvasPainter.prototype.isSingleCanvas = function () {\n      return this._singleCanvas;\n    };\n\n    CanvasPainter.prototype.getViewportRoot = function () {\n      return this._domRoot;\n    };\n\n    CanvasPainter.prototype.getViewportRootOffset = function () {\n      var viewportRoot = this.getViewportRoot();\n\n      if (viewportRoot) {\n        return {\n          offsetLeft: viewportRoot.offsetLeft || 0,\n          offsetTop: viewportRoot.offsetTop || 0\n        };\n      }\n    };\n\n    CanvasPainter.prototype.refresh = function (paintAll) {\n      var list = this.storage.getDisplayList(true);\n      var prevList = this._prevDisplayList;\n      var zlevelList = this._zlevelList;\n      this._redrawId = Math.random();\n\n      this._paintList(list, prevList, paintAll, this._redrawId);\n\n      for (var i = 0; i < zlevelList.length; i++) {\n        var z = zlevelList[i];\n        var layer = this._layers[z];\n\n        if (!layer.__builtin__ && layer.refresh) {\n          var clearColor = i === 0 ? this._backgroundColor : null;\n          layer.refresh(clearColor);\n        }\n      }\n\n      if (this._opts.useDirtyRect) {\n        this._prevDisplayList = list.slice();\n      }\n\n      return this;\n    };\n\n    CanvasPainter.prototype.refreshHover = function () {\n      this._paintHoverList(this.storage.getDisplayList(false));\n    };\n\n    CanvasPainter.prototype._paintHoverList = function (list) {\n      var len = list.length;\n      var hoverLayer = this._hoverlayer;\n      hoverLayer && hoverLayer.clear();\n\n      if (!len) {\n        return;\n      }\n\n      var scope = {\n        inHover: true,\n        viewWidth: this._width,\n        viewHeight: this._height\n      };\n      var ctx;\n\n      for (var i = 0; i < len; i++) {\n        var el = list[i];\n\n        if (el.__inHover) {\n          if (!hoverLayer) {\n            hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\n          }\n\n          if (!ctx) {\n            ctx = hoverLayer.ctx;\n            ctx.save();\n          }\n\n          brush(ctx, el, scope, i === len - 1);\n        }\n      }\n\n      if (ctx) {\n        ctx.restore();\n      }\n    };\n\n    CanvasPainter.prototype.getHoverLayer = function () {\n      return this.getLayer(HOVER_LAYER_ZLEVEL);\n    };\n\n    CanvasPainter.prototype.paintOne = function (ctx, el) {\n      brushSingle(ctx, el);\n    };\n\n    CanvasPainter.prototype._paintList = function (list, prevList, paintAll, redrawId) {\n      if (this._redrawId !== redrawId) {\n        return;\n      }\n\n      paintAll = paintAll || false;\n\n      this._updateLayerStatus(list);\n\n      var _a = this._doPaintList(list, prevList, paintAll),\n          finished = _a.finished,\n          needsRefreshHover = _a.needsRefreshHover;\n\n      if (this._needsManuallyCompositing) {\n        this._compositeManually();\n      }\n\n      if (needsRefreshHover) {\n        this._paintHoverList(list);\n      }\n\n      if (!finished) {\n        var self_1 = this;\n        requestAnimationFrame$1(function () {\n          self_1._paintList(list, prevList, paintAll, redrawId);\n        });\n      } else {\n        this.eachLayer(function (layer) {\n          layer.afterBrush && layer.afterBrush();\n        });\n      }\n    };\n\n    CanvasPainter.prototype._compositeManually = function () {\n      var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\n      var width = this._domRoot.width;\n      var height = this._domRoot.height;\n      ctx.clearRect(0, 0, width, height);\n      this.eachBuiltinLayer(function (layer) {\n        if (layer.virtual) {\n          ctx.drawImage(layer.dom, 0, 0, width, height);\n        }\n      });\n    };\n\n    CanvasPainter.prototype._doPaintList = function (list, prevList, paintAll) {\n      var _this = this;\n\n      var layerList = [];\n      var useDirtyRect = this._opts.useDirtyRect;\n\n      for (var zi = 0; zi < this._zlevelList.length; zi++) {\n        var zlevel = this._zlevelList[zi];\n        var layer = this._layers[zlevel];\n\n        if (layer.__builtin__ && layer !== this._hoverlayer && (layer.__dirty || paintAll)) {\n          layerList.push(layer);\n        }\n      }\n\n      var finished = true;\n      var needsRefreshHover = false;\n\n      var _loop_1 = function (k) {\n        var layer = layerList[k];\n        var ctx = layer.ctx;\n        var repaintRects = useDirtyRect && layer.createRepaintRects(list, prevList, this_1._width, this_1._height);\n        var start = paintAll ? layer.__startIndex : layer.__drawIndex;\n        var useTimer = !paintAll && layer.incremental && Date.now;\n        var startTime = useTimer && Date.now();\n        var clearColor = layer.zlevel === this_1._zlevelList[0] ? this_1._backgroundColor : null;\n\n        if (layer.__startIndex === layer.__endIndex) {\n          layer.clear(false, clearColor, repaintRects);\n        } else if (start === layer.__startIndex) {\n          var firstEl = list[start];\n\n          if (!firstEl.incremental || !firstEl.notClear || paintAll) {\n            layer.clear(false, clearColor, repaintRects);\n          }\n        }\n\n        if (start === -1) {\n          console.error('For some unknown reason. drawIndex is -1');\n          start = layer.__startIndex;\n        }\n\n        var i;\n\n        var repaint = function (repaintRect) {\n          var scope = {\n            inHover: false,\n            allClipped: false,\n            prevEl: null,\n            viewWidth: _this._width,\n            viewHeight: _this._height\n          };\n\n          for (i = start; i < layer.__endIndex; i++) {\n            var el = list[i];\n\n            if (el.__inHover) {\n              needsRefreshHover = true;\n            }\n\n            _this._doPaintEl(el, layer, useDirtyRect, repaintRect, scope, i === layer.__endIndex - 1);\n\n            if (useTimer) {\n              var dTime = Date.now() - startTime;\n\n              if (dTime > 15) {\n                break;\n              }\n            }\n          }\n\n          if (scope.prevElClipPaths) {\n            ctx.restore();\n          }\n        };\n\n        if (repaintRects) {\n          if (repaintRects.length === 0) {\n            i = layer.__endIndex;\n          } else {\n            var dpr = this_1.dpr;\n\n            for (var r = 0; r < repaintRects.length; ++r) {\n              var rect = repaintRects[r];\n              ctx.save();\n              ctx.beginPath();\n              ctx.rect(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n              ctx.clip();\n              repaint(rect);\n              ctx.restore();\n            }\n          }\n        } else {\n          ctx.save();\n          repaint();\n          ctx.restore();\n        }\n\n        layer.__drawIndex = i;\n\n        if (layer.__drawIndex < layer.__endIndex) {\n          finished = false;\n        }\n      };\n\n      var this_1 = this;\n\n      for (var k = 0; k < layerList.length; k++) {\n        _loop_1(k);\n      }\n\n      if (env.wxa) {\n        each(this._layers, function (layer) {\n          if (layer && layer.ctx && layer.ctx.draw) {\n            layer.ctx.draw();\n          }\n        });\n      }\n\n      return {\n        finished: finished,\n        needsRefreshHover: needsRefreshHover\n      };\n    };\n\n    CanvasPainter.prototype._doPaintEl = function (el, currentLayer, useDirtyRect, repaintRect, scope, isLast) {\n      var ctx = currentLayer.ctx;\n\n      if (useDirtyRect) {\n        var paintRect = el.getPaintRect();\n\n        if (!repaintRect || paintRect && paintRect.intersect(repaintRect)) {\n          brush(ctx, el, scope, isLast);\n          el.setPrevPaintRect(paintRect);\n        }\n      } else {\n        brush(ctx, el, scope, isLast);\n      }\n    };\n\n    CanvasPainter.prototype.getLayer = function (zlevel, virtual) {\n      if (this._singleCanvas && !this._needsManuallyCompositing) {\n        zlevel = CANVAS_ZLEVEL;\n      }\n\n      var layer = this._layers[zlevel];\n\n      if (!layer) {\n        layer = new Layer('zr_' + zlevel, this, this.dpr);\n        layer.zlevel = zlevel;\n        layer.__builtin__ = true;\n\n        if (this._layerConfig[zlevel]) {\n          merge(layer, this._layerConfig[zlevel], true);\n        } else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\n          merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\n        }\n\n        if (virtual) {\n          layer.virtual = virtual;\n        }\n\n        this.insertLayer(zlevel, layer);\n        layer.initContext();\n      }\n\n      return layer;\n    };\n\n    CanvasPainter.prototype.insertLayer = function (zlevel, layer) {\n      var layersMap = this._layers;\n      var zlevelList = this._zlevelList;\n      var len = zlevelList.length;\n      var domRoot = this._domRoot;\n      var prevLayer = null;\n      var i = -1;\n\n      if (layersMap[zlevel]) {\n        {\n          logError('ZLevel ' + zlevel + ' has been used already');\n        }\n        return;\n      }\n\n      if (!isLayerValid(layer)) {\n        {\n          logError('Layer of zlevel ' + zlevel + ' is not valid');\n        }\n        return;\n      }\n\n      if (len > 0 && zlevel > zlevelList[0]) {\n        for (i = 0; i < len - 1; i++) {\n          if (zlevelList[i] < zlevel && zlevelList[i + 1] > zlevel) {\n            break;\n          }\n        }\n\n        prevLayer = layersMap[zlevelList[i]];\n      }\n\n      zlevelList.splice(i + 1, 0, zlevel);\n      layersMap[zlevel] = layer;\n\n      if (!layer.virtual) {\n        if (prevLayer) {\n          var prevDom = prevLayer.dom;\n\n          if (prevDom.nextSibling) {\n            domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n          } else {\n            domRoot.appendChild(layer.dom);\n          }\n        } else {\n          if (domRoot.firstChild) {\n            domRoot.insertBefore(layer.dom, domRoot.firstChild);\n          } else {\n            domRoot.appendChild(layer.dom);\n          }\n        }\n      }\n\n      layer.__painter = this;\n    };\n\n    CanvasPainter.prototype.eachLayer = function (cb, context) {\n      var zlevelList = this._zlevelList;\n\n      for (var i = 0; i < zlevelList.length; i++) {\n        var z = zlevelList[i];\n        cb.call(context, this._layers[z], z);\n      }\n    };\n\n    CanvasPainter.prototype.eachBuiltinLayer = function (cb, context) {\n      var zlevelList = this._zlevelList;\n\n      for (var i = 0; i < zlevelList.length; i++) {\n        var z = zlevelList[i];\n        var layer = this._layers[z];\n\n        if (layer.__builtin__) {\n          cb.call(context, layer, z);\n        }\n      }\n    };\n\n    CanvasPainter.prototype.eachOtherLayer = function (cb, context) {\n      var zlevelList = this._zlevelList;\n\n      for (var i = 0; i < zlevelList.length; i++) {\n        var z = zlevelList[i];\n        var layer = this._layers[z];\n\n        if (!layer.__builtin__) {\n          cb.call(context, layer, z);\n        }\n      }\n    };\n\n    CanvasPainter.prototype.getLayers = function () {\n      return this._layers;\n    };\n\n    CanvasPainter.prototype._updateLayerStatus = function (list) {\n      this.eachBuiltinLayer(function (layer, z) {\n        layer.__dirty = layer.__used = false;\n      });\n\n      function updatePrevLayer(idx) {\n        if (prevLayer) {\n          if (prevLayer.__endIndex !== idx) {\n            prevLayer.__dirty = true;\n          }\n\n          prevLayer.__endIndex = idx;\n        }\n      }\n\n      if (this._singleCanvas) {\n        for (var i_1 = 1; i_1 < list.length; i_1++) {\n          var el = list[i_1];\n\n          if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {\n            this._needsManuallyCompositing = true;\n            break;\n          }\n        }\n      }\n\n      var prevLayer = null;\n      var incrementalLayerCount = 0;\n      var prevZlevel;\n      var i;\n\n      for (i = 0; i < list.length; i++) {\n        var el = list[i];\n        var zlevel = el.zlevel;\n        var layer = void 0;\n\n        if (prevZlevel !== zlevel) {\n          prevZlevel = zlevel;\n          incrementalLayerCount = 0;\n        }\n\n        if (el.incremental) {\n          layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\n          layer.incremental = true;\n          incrementalLayerCount = 1;\n        } else {\n          layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\n        }\n\n        if (!layer.__builtin__) {\n          logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\n        }\n\n        if (layer !== prevLayer) {\n          layer.__used = true;\n\n          if (layer.__startIndex !== i) {\n            layer.__dirty = true;\n          }\n\n          layer.__startIndex = i;\n\n          if (!layer.incremental) {\n            layer.__drawIndex = i;\n          } else {\n            layer.__drawIndex = -1;\n          }\n\n          updatePrevLayer(i);\n          prevLayer = layer;\n        }\n\n        if (el.__dirty & REDRAW_BIT && !el.__inHover) {\n          layer.__dirty = true;\n\n          if (layer.incremental && layer.__drawIndex < 0) {\n            layer.__drawIndex = i;\n          }\n        }\n      }\n\n      updatePrevLayer(i);\n      this.eachBuiltinLayer(function (layer, z) {\n        if (!layer.__used && layer.getElementCount() > 0) {\n          layer.__dirty = true;\n          layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\n        }\n\n        if (layer.__dirty && layer.__drawIndex < 0) {\n          layer.__drawIndex = layer.__startIndex;\n        }\n      });\n    };\n\n    CanvasPainter.prototype.clear = function () {\n      this.eachBuiltinLayer(this._clearLayer);\n      return this;\n    };\n\n    CanvasPainter.prototype._clearLayer = function (layer) {\n      layer.clear();\n    };\n\n    CanvasPainter.prototype.setBackgroundColor = function (backgroundColor) {\n      this._backgroundColor = backgroundColor;\n      each(this._layers, function (layer) {\n        layer.setUnpainted();\n      });\n    };\n\n    CanvasPainter.prototype.configLayer = function (zlevel, config) {\n      if (config) {\n        var layerConfig = this._layerConfig;\n\n        if (!layerConfig[zlevel]) {\n          layerConfig[zlevel] = config;\n        } else {\n          merge(layerConfig[zlevel], config, true);\n        }\n\n        for (var i = 0; i < this._zlevelList.length; i++) {\n          var _zlevel = this._zlevelList[i];\n\n          if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\n            var layer = this._layers[_zlevel];\n            merge(layer, layerConfig[zlevel], true);\n          }\n        }\n      }\n    };\n\n    CanvasPainter.prototype.delLayer = function (zlevel) {\n      var layers = this._layers;\n      var zlevelList = this._zlevelList;\n      var layer = layers[zlevel];\n\n      if (!layer) {\n        return;\n      }\n\n      layer.dom.parentNode.removeChild(layer.dom);\n      delete layers[zlevel];\n      zlevelList.splice(indexOf(zlevelList, zlevel), 1);\n    };\n\n    CanvasPainter.prototype.resize = function (width, height) {\n      if (!this._domRoot.style) {\n        if (width == null || height == null) {\n          return;\n        }\n\n        this._width = width;\n        this._height = height;\n        this.getLayer(CANVAS_ZLEVEL).resize(width, height);\n      } else {\n        var domRoot = this._domRoot;\n        domRoot.style.display = 'none';\n        var opts = this._opts;\n        var root = this.root;\n        width != null && (opts.width = width);\n        height != null && (opts.height = height);\n        width = getSize(root, 0, opts);\n        height = getSize(root, 1, opts);\n        domRoot.style.display = '';\n\n        if (this._width !== width || height !== this._height) {\n          domRoot.style.width = width + 'px';\n          domRoot.style.height = height + 'px';\n\n          for (var id in this._layers) {\n            if (this._layers.hasOwnProperty(id)) {\n              this._layers[id].resize(width, height);\n            }\n          }\n\n          this.refresh(true);\n        }\n\n        this._width = width;\n        this._height = height;\n      }\n\n      return this;\n    };\n\n    CanvasPainter.prototype.clearLayer = function (zlevel) {\n      var layer = this._layers[zlevel];\n\n      if (layer) {\n        layer.clear();\n      }\n    };\n\n    CanvasPainter.prototype.dispose = function () {\n      this.root.innerHTML = '';\n      this.root = this.storage = this._domRoot = this._layers = null;\n    };\n\n    CanvasPainter.prototype.getRenderedCanvas = function (opts) {\n      opts = opts || {};\n\n      if (this._singleCanvas && !this._compositeManually) {\n        return this._layers[CANVAS_ZLEVEL].dom;\n      }\n\n      var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n      imageLayer.initContext();\n      imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\n      var ctx = imageLayer.ctx;\n\n      if (opts.pixelRatio <= this.dpr) {\n        this.refresh();\n        var width_1 = imageLayer.dom.width;\n        var height_1 = imageLayer.dom.height;\n        this.eachLayer(function (layer) {\n          if (layer.__builtin__) {\n            ctx.drawImage(layer.dom, 0, 0, width_1, height_1);\n          } else if (layer.renderToCanvas) {\n            ctx.save();\n            layer.renderToCanvas(ctx);\n            ctx.restore();\n          }\n        });\n      } else {\n        var scope = {\n          inHover: false,\n          viewWidth: this._width,\n          viewHeight: this._height\n        };\n        var displayList = this.storage.getDisplayList(true);\n\n        for (var i = 0, len = displayList.length; i < len; i++) {\n          var el = displayList[i];\n          brush(ctx, el, scope, i === len - 1);\n        }\n      }\n\n      return imageLayer.dom;\n    };\n\n    CanvasPainter.prototype.getWidth = function () {\n      return this._width;\n    };\n\n    CanvasPainter.prototype.getHeight = function () {\n      return this._height;\n    };\n\n    return CanvasPainter;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install(registers) {\n    registers.registerPainter('canvas', CanvasPainter);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * This module is imported by echarts directly.\n   *\n   * Notice:\n   * Always keep this file exists for backward compatibility.\n   * Because before 4.1.0, dataset is an optional component,\n   * some users may import this module manually.\n   */\n\n\n  var DatasetModel =\n  /** @class */\n  function (_super) {\n    __extends(DatasetModel, _super);\n\n    function DatasetModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = 'dataset';\n      return _this;\n    }\n\n    DatasetModel.prototype.init = function (option, parentModel, ecModel) {\n      _super.prototype.init.call(this, option, parentModel, ecModel);\n\n      this._sourceManager = new SourceManager(this);\n      disableTransformOptionMerge(this);\n    };\n\n    DatasetModel.prototype.mergeOption = function (newOption, ecModel) {\n      _super.prototype.mergeOption.call(this, newOption, ecModel);\n\n      disableTransformOptionMerge(this);\n    };\n\n    DatasetModel.prototype.optionUpdated = function () {\n      this._sourceManager.dirty();\n    };\n\n    DatasetModel.prototype.getSourceManager = function () {\n      return this._sourceManager;\n    };\n\n    DatasetModel.type = 'dataset';\n    DatasetModel.defaultOption = {\n      seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN\n    };\n    return DatasetModel;\n  }(ComponentModel);\n\n  var DatasetView =\n  /** @class */\n  function (_super) {\n    __extends(DatasetView, _super);\n\n    function DatasetView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = 'dataset';\n      return _this;\n    }\n\n    DatasetView.type = 'dataset';\n    return DatasetView;\n  }(ComponentView);\n\n  function install$1(registers) {\n    registers.registerComponentModel(DatasetModel);\n    registers.registerComponentView(DatasetView);\n  }\n\n  use([install, install$1]); // TODO: Compatitable with the following code\n  // import echarts from 'echarts/lib/echarts.js'\n  // TODO remove\n\n  use(installLabelLayout);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var samplers = {\n    average: function (frame) {\n      var sum = 0;\n      var count = 0;\n\n      for (var i = 0; i < frame.length; i++) {\n        if (!isNaN(frame[i])) {\n          sum += frame[i];\n          count++;\n        }\n      } // Return NaN if count is 0\n\n\n      return count === 0 ? NaN : sum / count;\n    },\n    sum: function (frame) {\n      var sum = 0;\n\n      for (var i = 0; i < frame.length; i++) {\n        // Ignore NaN\n        sum += frame[i] || 0;\n      }\n\n      return sum;\n    },\n    max: function (frame) {\n      var max = -Infinity;\n\n      for (var i = 0; i < frame.length; i++) {\n        frame[i] > max && (max = frame[i]);\n      } // NaN will cause illegal axis extent.\n\n\n      return isFinite(max) ? max : NaN;\n    },\n    min: function (frame) {\n      var min = Infinity;\n\n      for (var i = 0; i < frame.length; i++) {\n        frame[i] < min && (min = frame[i]);\n      } // NaN will cause illegal axis extent.\n\n\n      return isFinite(min) ? min : NaN;\n    },\n    // TODO\n    // Median\n    nearest: function (frame) {\n      return frame[0];\n    }\n  };\n\n  var indexSampler = function (frame) {\n    return Math.round(frame.length / 2);\n  };\n\n  function dataSample(seriesType) {\n    return {\n      seriesType: seriesType,\n      // FIXME:TS never used, so comment it\n      // modifyOutputEnd: true,\n      reset: function (seriesModel, ecModel, api) {\n        var data = seriesModel.getData();\n        var sampling = seriesModel.get('sampling');\n        var coordSys = seriesModel.coordinateSystem;\n        var count = data.count(); // Only cartesian2d support down sampling. Disable it when there is few data.\n\n        if (count > 10 && coordSys.type === 'cartesian2d' && sampling) {\n          var baseAxis = coordSys.getBaseAxis();\n          var valueAxis = coordSys.getOtherAxis(baseAxis);\n          var extent = baseAxis.getExtent();\n          var dpr = api.getDevicePixelRatio(); // Coordinste system has been resized\n\n          var size = Math.abs(extent[1] - extent[0]) * (dpr || 1);\n          var rate = Math.round(count / size);\n\n          if (isFinite(rate) && rate > 1) {\n            if (sampling === 'lttb') {\n              seriesModel.setData(data.lttbDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\n            }\n\n            var sampler = void 0;\n\n            if (isString(sampling)) {\n              sampler = samplers[sampling];\n            } else if (isFunction(sampling)) {\n              sampler = sampling;\n            }\n\n            if (sampler) {\n              // Only support sample the first dim mapped from value axis.\n              seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n            }\n          }\n        }\n      }\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var BaseBarSeriesModel =\n  /** @class */\n  function (_super) {\n    __extends(BaseBarSeriesModel, _super);\n\n    function BaseBarSeriesModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = BaseBarSeriesModel.type;\n      return _this;\n    }\n\n    BaseBarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n      return createSeriesData(null, this, {\n        useEncodeDefaulter: true\n      });\n    };\n\n    BaseBarSeriesModel.prototype.getMarkerPosition = function (value) {\n      var coordSys = this.coordinateSystem;\n\n      if (coordSys && coordSys.clampData) {\n        // PENDING if clamp ?\n        var pt = coordSys.dataToPoint(coordSys.clampData(value));\n        var data = this.getData();\n        var offset = data.getLayout('offset');\n        var size = data.getLayout('size');\n        var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\n        pt[offsetIndex] += offset + size / 2;\n        return pt;\n      }\n\n      return [NaN, NaN];\n    };\n\n    BaseBarSeriesModel.type = 'series.__base_bar__';\n    BaseBarSeriesModel.defaultOption = {\n      // zlevel: 0,\n      z: 2,\n      coordinateSystem: 'cartesian2d',\n      legendHoverLink: true,\n      // stack: null\n      // Cartesian coordinate system\n      // xAxisIndex: 0,\n      // yAxisIndex: 0,\n      barMinHeight: 0,\n      barMinAngle: 0,\n      // cursor: null,\n      large: false,\n      largeThreshold: 400,\n      progressive: 3e3,\n      progressiveChunkMode: 'mod'\n    };\n    return BaseBarSeriesModel;\n  }(SeriesModel);\n\n  SeriesModel.registerClass(BaseBarSeriesModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var BarSeriesModel =\n  /** @class */\n  function (_super) {\n    __extends(BarSeriesModel, _super);\n\n    function BarSeriesModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = BarSeriesModel.type;\n      return _this;\n    }\n\n    BarSeriesModel.prototype.getInitialData = function () {\n      return createSeriesData(null, this, {\n        useEncodeDefaulter: true,\n        createInvertedIndices: !!this.get('realtimeSort', true) || null\n      });\n    };\n    /**\n     * @override\n     */\n\n\n    BarSeriesModel.prototype.getProgressive = function () {\n      // Do not support progressive in normal mode.\n      return this.get('large') ? this.get('progressive') : false;\n    };\n    /**\n     * @override\n     */\n\n\n    BarSeriesModel.prototype.getProgressiveThreshold = function () {\n      // Do not support progressive in normal mode.\n      var progressiveThreshold = this.get('progressiveThreshold');\n      var largeThreshold = this.get('largeThreshold');\n\n      if (largeThreshold > progressiveThreshold) {\n        progressiveThreshold = largeThreshold;\n      }\n\n      return progressiveThreshold;\n    };\n\n    BarSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n      return selectors.rect(data.getItemLayout(dataIndex));\n    };\n\n    BarSeriesModel.type = 'series.bar';\n    BarSeriesModel.dependencies = ['grid', 'polar'];\n    BarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n      // If clipped\n      // Only available on cartesian2d\n      clip: true,\n      roundCap: false,\n      showBackground: false,\n      backgroundStyle: {\n        color: 'rgba(180, 180, 180, 0.2)',\n        borderColor: null,\n        borderWidth: 0,\n        borderType: 'solid',\n        borderRadius: 0,\n        shadowBlur: 0,\n        shadowColor: null,\n        shadowOffsetX: 0,\n        shadowOffsetY: 0,\n        opacity: 1\n      },\n      select: {\n        itemStyle: {\n          borderColor: '#212121'\n        }\n      },\n      realtimeSort: false\n    });\n    return BarSeriesModel;\n  }(BaseBarSeriesModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function createGridClipPath(cartesian, hasAnimation, seriesModel, done, during) {\n    var rect = cartesian.getArea();\n    var x = rect.x;\n    var y = rect.y;\n    var width = rect.width;\n    var height = rect.height;\n    var lineWidth = seriesModel.get(['lineStyle', 'width']) || 2; // Expand the clip path a bit to avoid the border is clipped and looks thinner\n\n    x -= lineWidth / 2;\n    y -= lineWidth / 2;\n    width += lineWidth;\n    height += lineWidth; // fix: https://github.com/apache/incubator-echarts/issues/11369\n\n    x = Math.floor(x);\n    width = Math.round(width);\n    var clipPath = new Rect({\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      }\n    });\n\n    if (hasAnimation) {\n      var baseAxis = cartesian.getBaseAxis();\n      var isHorizontal = baseAxis.isHorizontal();\n      var isAxisInversed = baseAxis.inverse;\n\n      if (isHorizontal) {\n        if (isAxisInversed) {\n          clipPath.shape.x += width;\n        }\n\n        clipPath.shape.width = 0;\n      } else {\n        if (!isAxisInversed) {\n          clipPath.shape.y += height;\n        }\n\n        clipPath.shape.height = 0;\n      }\n\n      var duringCb = isFunction(during) ? function (percent) {\n        during(percent, clipPath);\n      } : null;\n      initProps(clipPath, {\n        shape: {\n          width: width,\n          height: height,\n          x: x,\n          y: y\n        }\n      }, seriesModel, null, done, duringCb);\n    }\n\n    return clipPath;\n  }\n\n  function createPolarClipPath(polar, hasAnimation, seriesModel) {\n    var sectorArea = polar.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n\n    var r0 = round(sectorArea.r0, 1);\n    var r = round(sectorArea.r, 1);\n    var clipPath = new Sector({\n      shape: {\n        cx: round(polar.cx, 1),\n        cy: round(polar.cy, 1),\n        r0: r0,\n        r: r,\n        startAngle: sectorArea.startAngle,\n        endAngle: sectorArea.endAngle,\n        clockwise: sectorArea.clockwise\n      }\n    });\n\n    if (hasAnimation) {\n      var isRadial = polar.getBaseAxis().dim === 'angle';\n\n      if (isRadial) {\n        clipPath.shape.endAngle = sectorArea.startAngle;\n      } else {\n        clipPath.shape.r = r0;\n      }\n\n      initProps(clipPath, {\n        shape: {\n          endAngle: sectorArea.endAngle,\n          r: r\n        }\n      }, seriesModel);\n    }\n\n    return clipPath;\n  }\n\n  function createClipPath(coordSys, hasAnimation, seriesModel, done, during) {\n    if (!coordSys) {\n      return null;\n    } else if (coordSys.type === 'polar') {\n      return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n    } else if (coordSys.type === 'cartesian2d') {\n      return createGridClipPath(coordSys, hasAnimation, seriesModel, done, during);\n    }\n\n    return null;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Sausage: similar to sector, but have half circle on both sides\n   */\n\n\n  var SausageShape =\n  /** @class */\n  function () {\n    function SausageShape() {\n      this.cx = 0;\n      this.cy = 0;\n      this.r0 = 0;\n      this.r = 0;\n      this.startAngle = 0;\n      this.endAngle = Math.PI * 2;\n      this.clockwise = true;\n    }\n\n    return SausageShape;\n  }();\n\n  var SausagePath =\n  /** @class */\n  function (_super) {\n    __extends(SausagePath, _super);\n\n    function SausagePath(opts) {\n      var _this = _super.call(this, opts) || this;\n\n      _this.type = 'sausage';\n      return _this;\n    }\n\n    SausagePath.prototype.getDefaultShape = function () {\n      return new SausageShape();\n    };\n\n    SausagePath.prototype.buildPath = function (ctx, shape) {\n      var cx = shape.cx;\n      var cy = shape.cy;\n      var r0 = Math.max(shape.r0 || 0, 0);\n      var r = Math.max(shape.r, 0);\n      var dr = (r - r0) * 0.5;\n      var rCenter = r0 + dr;\n      var startAngle = shape.startAngle;\n      var endAngle = shape.endAngle;\n      var clockwise = shape.clockwise;\n      var PI2 = Math.PI * 2;\n      var lessThanCircle = clockwise ? endAngle - startAngle < PI2 : startAngle - endAngle < PI2;\n\n      if (!lessThanCircle) {\n        // Normalize angles\n        startAngle = endAngle - (clockwise ? PI2 : -PI2);\n      }\n\n      var unitStartX = Math.cos(startAngle);\n      var unitStartY = Math.sin(startAngle);\n      var unitEndX = Math.cos(endAngle);\n      var unitEndY = Math.sin(endAngle);\n\n      if (lessThanCircle) {\n        ctx.moveTo(unitStartX * r0 + cx, unitStartY * r0 + cy);\n        ctx.arc(unitStartX * rCenter + cx, unitStartY * rCenter + cy, dr, -Math.PI + startAngle, startAngle, !clockwise);\n      } else {\n        ctx.moveTo(unitStartX * r + cx, unitStartY * r + cy);\n      }\n\n      ctx.arc(cx, cy, r, startAngle, endAngle, !clockwise);\n      ctx.arc(unitEndX * rCenter + cx, unitEndY * rCenter + cy, dr, endAngle - Math.PI * 2, endAngle - Math.PI, !clockwise);\n\n      if (r0 !== 0) {\n        ctx.arc(cx, cy, r0, endAngle, startAngle, clockwise);\n      } // ctx.closePath();\n\n    };\n\n    return SausagePath;\n  }(Path);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function isCoordinateSystemType(coordSys, type) {\n    return coordSys.type === type;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * @return label string. Not null/undefined\n   */\n\n\n  function getDefaultLabel(data, dataIndex) {\n    var labelDims = data.mapDimensionsAll('defaultedLabel');\n    var len = labelDims.length; // Simple optimization (in lots of cases, label dims length is 1)\n\n    if (len === 1) {\n      var rawVal = retrieveRawValue(data, dataIndex, labelDims[0]);\n      return rawVal != null ? rawVal + '' : null;\n    } else if (len) {\n      var vals = [];\n\n      for (var i = 0; i < labelDims.length; i++) {\n        vals.push(retrieveRawValue(data, dataIndex, labelDims[i]));\n      }\n\n      return vals.join(' ');\n    }\n  }\n\n  function getDefaultInterpolatedLabel(data, interpolatedValue) {\n    var labelDims = data.mapDimensionsAll('defaultedLabel');\n\n    if (!isArray(interpolatedValue)) {\n      return interpolatedValue + '';\n    }\n\n    var vals = [];\n\n    for (var i = 0; i < labelDims.length; i++) {\n      var dimIndex = data.getDimensionIndex(labelDims[i]);\n\n      if (dimIndex >= 0) {\n        vals.push(interpolatedValue[dimIndex]);\n      }\n    }\n\n    return vals.join(' ');\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function createSectorCalculateTextPosition(positionMapping, opts) {\n    opts = opts || {};\n    var isRoundCap = opts.isRoundCap;\n    return function (out, opts, boundingRect) {\n      var textPosition = opts.position;\n\n      if (!textPosition || textPosition instanceof Array) {\n        return calculateTextPosition(out, opts, boundingRect);\n      }\n\n      var mappedSectorPosition = positionMapping(textPosition);\n      var distance = opts.distance != null ? opts.distance : 5;\n      var sector = this.shape;\n      var cx = sector.cx;\n      var cy = sector.cy;\n      var r = sector.r;\n      var r0 = sector.r0;\n      var middleR = (r + r0) / 2;\n      var startAngle = sector.startAngle;\n      var endAngle = sector.endAngle;\n      var middleAngle = (startAngle + endAngle) / 2;\n      var extraDist = isRoundCap ? Math.abs(r - r0) / 2 : 0;\n      var mathCos = Math.cos;\n      var mathSin = Math.sin; // base position: top-left\n\n      var x = cx + r * mathCos(startAngle);\n      var y = cy + r * mathSin(startAngle);\n      var textAlign = 'left';\n      var textVerticalAlign = 'top';\n\n      switch (mappedSectorPosition) {\n        case 'startArc':\n          x = cx + (r0 - distance) * mathCos(middleAngle);\n          y = cy + (r0 - distance) * mathSin(middleAngle);\n          textAlign = 'center';\n          textVerticalAlign = 'top';\n          break;\n\n        case 'insideStartArc':\n          x = cx + (r0 + distance) * mathCos(middleAngle);\n          y = cy + (r0 + distance) * mathSin(middleAngle);\n          textAlign = 'center';\n          textVerticalAlign = 'bottom';\n          break;\n\n        case 'startAngle':\n          x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, distance + extraDist, false);\n          y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, distance + extraDist, false);\n          textAlign = 'right';\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'insideStartAngle':\n          x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, -distance + extraDist, false);\n          y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, -distance + extraDist, false);\n          textAlign = 'left';\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'middle':\n          x = cx + middleR * mathCos(middleAngle);\n          y = cy + middleR * mathSin(middleAngle);\n          textAlign = 'center';\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'endArc':\n          x = cx + (r + distance) * mathCos(middleAngle);\n          y = cy + (r + distance) * mathSin(middleAngle);\n          textAlign = 'center';\n          textVerticalAlign = 'bottom';\n          break;\n\n        case 'insideEndArc':\n          x = cx + (r - distance) * mathCos(middleAngle);\n          y = cy + (r - distance) * mathSin(middleAngle);\n          textAlign = 'center';\n          textVerticalAlign = 'top';\n          break;\n\n        case 'endAngle':\n          x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, distance + extraDist, true);\n          y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, distance + extraDist, true);\n          textAlign = 'left';\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'insideEndAngle':\n          x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, -distance + extraDist, true);\n          y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, -distance + extraDist, true);\n          textAlign = 'right';\n          textVerticalAlign = 'middle';\n          break;\n\n        default:\n          return calculateTextPosition(out, opts, boundingRect);\n      }\n\n      out = out || {};\n      out.x = x;\n      out.y = y;\n      out.align = textAlign;\n      out.verticalAlign = textVerticalAlign;\n      return out;\n    };\n  }\n\n  function setSectorTextRotation(sector, textPosition, positionMapping, rotateType) {\n    if (isNumber(rotateType)) {\n      // user-set rotation\n      sector.setTextConfig({\n        rotation: rotateType\n      });\n      return;\n    } else if (isArray(textPosition)) {\n      // user-set position, use 0 as auto rotation\n      sector.setTextConfig({\n        rotation: 0\n      });\n      return;\n    }\n\n    var shape = sector.shape;\n    var startAngle = shape.clockwise ? shape.startAngle : shape.endAngle;\n    var endAngle = shape.clockwise ? shape.endAngle : shape.startAngle;\n    var middleAngle = (startAngle + endAngle) / 2;\n    var anchorAngle;\n    var mappedSectorPosition = positionMapping(textPosition);\n\n    switch (mappedSectorPosition) {\n      case 'startArc':\n      case 'insideStartArc':\n      case 'middle':\n      case 'insideEndArc':\n      case 'endArc':\n        anchorAngle = middleAngle;\n        break;\n\n      case 'startAngle':\n      case 'insideStartAngle':\n        anchorAngle = startAngle;\n        break;\n\n      case 'endAngle':\n      case 'insideEndAngle':\n        anchorAngle = endAngle;\n        break;\n\n      default:\n        sector.setTextConfig({\n          rotation: 0\n        });\n        return;\n    }\n\n    var rotate = Math.PI * 1.5 - anchorAngle;\n    /**\n     * TODO: labels with rotate > Math.PI / 2 should be rotate another\n     * half round flipped to increase readability. However, only middle\n     * position supports this for now, because in other positions, the\n     * anchor point is not at the center of the text, so the positions\n     * after rotating is not as expected.\n     */\n\n    if (mappedSectorPosition === 'middle' && rotate > Math.PI / 2 && rotate < Math.PI * 1.5) {\n      rotate -= Math.PI;\n    }\n\n    sector.setTextConfig({\n      rotation: rotate\n    });\n  }\n\n  function adjustAngleDistanceX(angle, distance, isEnd) {\n    return distance * Math.sin(angle) * (isEnd ? -1 : 1);\n  }\n\n  function adjustAngleDistanceY(angle, distance, isEnd) {\n    return distance * Math.cos(angle) * (isEnd ? 1 : -1);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var mathMax$5 = Math.max;\n  var mathMin$5 = Math.min;\n\n  function getClipArea(coord, data) {\n    var coordSysClipArea = coord.getArea && coord.getArea();\n\n    if (isCoordinateSystemType(coord, 'cartesian2d')) {\n      var baseAxis = coord.getBaseAxis(); // When boundaryGap is false or using time axis. bar may exceed the grid.\n      // We should not clip this part.\n      // See test/bar2.html\n\n      if (baseAxis.type !== 'category' || !baseAxis.onBand) {\n        var expandWidth = data.getLayout('bandWidth');\n\n        if (baseAxis.isHorizontal()) {\n          coordSysClipArea.x -= expandWidth;\n          coordSysClipArea.width += expandWidth * 2;\n        } else {\n          coordSysClipArea.y -= expandWidth;\n          coordSysClipArea.height += expandWidth * 2;\n        }\n      }\n    }\n\n    return coordSysClipArea;\n  }\n\n  var BarView =\n  /** @class */\n  function (_super) {\n    __extends(BarView, _super);\n\n    function BarView() {\n      var _this = _super.call(this) || this;\n\n      _this.type = BarView.type;\n      _this._isFirstFrame = true;\n      return _this;\n    }\n\n    BarView.prototype.render = function (seriesModel, ecModel, api, payload) {\n      this._model = seriesModel;\n\n      this._removeOnRenderedListener(api);\n\n      this._updateDrawMode(seriesModel);\n\n      var coordinateSystemType = seriesModel.get('coordinateSystem');\n\n      if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\n        // Clear previously rendered progressive elements.\n        this._progressiveEls = null;\n        this._isLargeDraw ? this._renderLarge(seriesModel, ecModel, api) : this._renderNormal(seriesModel, ecModel, api, payload);\n      } else {\n        warn('Only cartesian2d and polar supported for bar.');\n      }\n    };\n\n    BarView.prototype.incrementalPrepareRender = function (seriesModel) {\n      this._clear();\n\n      this._updateDrawMode(seriesModel); // incremental also need to clip, otherwise might be overlow.\n      // But must not set clip in each frame, otherwise all of the children will be marked redraw.\n\n\n      this._updateLargeClip(seriesModel);\n    };\n\n    BarView.prototype.incrementalRender = function (params, seriesModel) {\n      // Reset\n      this._progressiveEls = []; // Do not support progressive in normal mode.\n\n      this._incrementalRenderLarge(params, seriesModel);\n    };\n\n    BarView.prototype.eachRendered = function (cb) {\n      traverseElements(this._progressiveEls || this.group, cb);\n    };\n\n    BarView.prototype._updateDrawMode = function (seriesModel) {\n      var isLargeDraw = seriesModel.pipelineContext.large;\n\n      if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n        this._isLargeDraw = isLargeDraw;\n\n        this._clear();\n      }\n    };\n\n    BarView.prototype._renderNormal = function (seriesModel, ecModel, api, payload) {\n      var group = this.group;\n      var data = seriesModel.getData();\n      var oldData = this._data;\n      var coord = seriesModel.coordinateSystem;\n      var baseAxis = coord.getBaseAxis();\n      var isHorizontalOrRadial;\n\n      if (coord.type === 'cartesian2d') {\n        isHorizontalOrRadial = baseAxis.isHorizontal();\n      } else if (coord.type === 'polar') {\n        isHorizontalOrRadial = baseAxis.dim === 'angle';\n      }\n\n      var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\n      var realtimeSortCfg = shouldRealtimeSort(seriesModel, coord);\n\n      if (realtimeSortCfg) {\n        this._enableRealtimeSort(realtimeSortCfg, data, api);\n      }\n\n      var needsClip = seriesModel.get('clip', true) || realtimeSortCfg;\n      var coordSysClipArea = getClipArea(coord, data); // If there is clipPath created in large mode. Remove it.\n\n      group.removeClipPath(); // We don't use clipPath in normal mode because we needs a perfect animation\n      // And don't want the label are clipped.\n\n      var roundCap = seriesModel.get('roundCap', true);\n      var drawBackground = seriesModel.get('showBackground', true);\n      var backgroundModel = seriesModel.getModel('backgroundStyle');\n      var barBorderRadius = backgroundModel.get('borderRadius') || 0;\n      var bgEls = [];\n      var oldBgEls = this._backgroundEls;\n      var isInitSort = payload && payload.isInitSort;\n      var isChangeOrder = payload && payload.type === 'changeAxisOrder';\n\n      function createBackground(dataIndex) {\n        var bgLayout = getLayout[coord.type](data, dataIndex);\n        var bgEl = createBackgroundEl(coord, isHorizontalOrRadial, bgLayout);\n        bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\n\n        if (coord.type === 'cartesian2d') {\n          bgEl.setShape('r', barBorderRadius);\n        }\n\n        bgEls[dataIndex] = bgEl;\n        return bgEl;\n      }\n\n      data.diff(oldData).add(function (dataIndex) {\n        var itemModel = data.getItemModel(dataIndex);\n        var layout = getLayout[coord.type](data, dataIndex, itemModel);\n\n        if (drawBackground) {\n          createBackground(dataIndex);\n        } // If dataZoom in filteMode: 'empty', the baseValue can be set as NaN in \"axisProxy\".\n\n\n        if (!data.hasValue(dataIndex) || !isValidLayout[coord.type](layout)) {\n          return;\n        }\n\n        var isClipped = false;\n\n        if (needsClip) {\n          // Clip will modify the layout params.\n          // And return a boolean to determine if the shape are fully clipped.\n          isClipped = clip[coord.type](coordSysClipArea, layout);\n        }\n\n        var el = elementCreator[coord.type](seriesModel, data, dataIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, false, roundCap);\n\n        if (realtimeSortCfg) {\n          /**\n           * Force label animation because even if the element is\n           * ignored because it's clipped, it may not be clipped after\n           * changing order. Then, if not using forceLabelAnimation,\n           * the label animation was never started, in which case,\n           * the label will be the final value and doesn't have label\n           * animation.\n           */\n          el.forceLabelAnimation = true;\n        }\n\n        updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n\n        if (isInitSort) {\n          el.attr({\n            shape: layout\n          });\n        } else if (realtimeSortCfg) {\n          updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, dataIndex, isHorizontalOrRadial, false, false);\n        } else {\n          initProps(el, {\n            shape: layout\n          }, seriesModel, dataIndex);\n        }\n\n        data.setItemGraphicEl(dataIndex, el);\n        group.add(el);\n        el.ignore = isClipped;\n      }).update(function (newIndex, oldIndex) {\n        var itemModel = data.getItemModel(newIndex);\n        var layout = getLayout[coord.type](data, newIndex, itemModel);\n\n        if (drawBackground) {\n          var bgEl = void 0;\n\n          if (oldBgEls.length === 0) {\n            bgEl = createBackground(oldIndex);\n          } else {\n            bgEl = oldBgEls[oldIndex];\n            bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\n\n            if (coord.type === 'cartesian2d') {\n              bgEl.setShape('r', barBorderRadius);\n            }\n\n            bgEls[newIndex] = bgEl;\n          }\n\n          var bgLayout = getLayout[coord.type](data, newIndex);\n          var shape = createBackgroundShape(isHorizontalOrRadial, bgLayout, coord);\n          updateProps(bgEl, {\n            shape: shape\n          }, animationModel, newIndex);\n        }\n\n        var el = oldData.getItemGraphicEl(oldIndex);\n\n        if (!data.hasValue(newIndex) || !isValidLayout[coord.type](layout)) {\n          group.remove(el);\n          return;\n        }\n\n        var isClipped = false;\n\n        if (needsClip) {\n          isClipped = clip[coord.type](coordSysClipArea, layout);\n\n          if (isClipped) {\n            group.remove(el);\n          }\n        }\n\n        if (!el) {\n          el = elementCreator[coord.type](seriesModel, data, newIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, !!el, roundCap);\n        } else {\n          saveOldStyle(el);\n        }\n\n        if (realtimeSortCfg) {\n          el.forceLabelAnimation = true;\n        }\n\n        if (isChangeOrder) {\n          var textEl = el.getTextContent();\n\n          if (textEl) {\n            var labelInnerStore = labelInner(textEl);\n\n            if (labelInnerStore.prevValue != null) {\n              /**\n               * Set preValue to be value so that no new label\n               * should be started, otherwise, it will take a full\n               * `animationDurationUpdate` time to finish the\n               * animation, which is not expected.\n               */\n              labelInnerStore.prevValue = labelInnerStore.value;\n            }\n          }\n        } // Not change anything if only order changed.\n        // Especially not change label.\n        else {\n            updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n          }\n\n        if (isInitSort) {\n          el.attr({\n            shape: layout\n          });\n        } else if (realtimeSortCfg) {\n          updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, newIndex, isHorizontalOrRadial, true, isChangeOrder);\n        } else {\n          updateProps(el, {\n            shape: layout\n          }, seriesModel, newIndex, null);\n        }\n\n        data.setItemGraphicEl(newIndex, el);\n        el.ignore = isClipped;\n        group.add(el);\n      }).remove(function (dataIndex) {\n        var el = oldData.getItemGraphicEl(dataIndex);\n        el && removeElementWithFadeOut(el, seriesModel, dataIndex);\n      }).execute();\n      var bgGroup = this._backgroundGroup || (this._backgroundGroup = new Group());\n      bgGroup.removeAll();\n\n      for (var i = 0; i < bgEls.length; ++i) {\n        bgGroup.add(bgEls[i]);\n      }\n\n      group.add(bgGroup);\n      this._backgroundEls = bgEls;\n      this._data = data;\n    };\n\n    BarView.prototype._renderLarge = function (seriesModel, ecModel, api) {\n      this._clear();\n\n      createLarge(seriesModel, this.group);\n\n      this._updateLargeClip(seriesModel);\n    };\n\n    BarView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n      this._removeBackground();\n\n      createLarge(seriesModel, this.group, this._progressiveEls, true);\n    };\n\n    BarView.prototype._updateLargeClip = function (seriesModel) {\n      // Use clipPath in large mode.\n      var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\n      var group = this.group;\n\n      if (clipPath) {\n        group.setClipPath(clipPath);\n      } else {\n        group.removeClipPath();\n      }\n    };\n\n    BarView.prototype._enableRealtimeSort = function (realtimeSortCfg, data, api) {\n      var _this = this; // If no data in the first frame, wait for data to initSort\n\n\n      if (!data.count()) {\n        return;\n      }\n\n      var baseAxis = realtimeSortCfg.baseAxis;\n\n      if (this._isFirstFrame) {\n        this._dispatchInitSort(data, realtimeSortCfg, api);\n\n        this._isFirstFrame = false;\n      } else {\n        var orderMapping_1 = function (idx) {\n          var el = data.getItemGraphicEl(idx);\n          var shape = el && el.shape;\n          return shape && // The result should be consistent with the initial sort by data value.\n          // Do not support the case that both positive and negative exist.\n          Math.abs(baseAxis.isHorizontal() ? shape.height : shape.width) // If data is NaN, shape.xxx may be NaN, so use || 0 here in case\n          || 0;\n        };\n\n        this._onRendered = function () {\n          _this._updateSortWithinSameData(data, orderMapping_1, baseAxis, api);\n        };\n\n        api.getZr().on('rendered', this._onRendered);\n      }\n    };\n\n    BarView.prototype._dataSort = function (data, baseAxis, orderMapping) {\n      var info = [];\n      data.each(data.mapDimension(baseAxis.dim), function (ordinalNumber, dataIdx) {\n        var mappedValue = orderMapping(dataIdx);\n        mappedValue = mappedValue == null ? NaN : mappedValue;\n        info.push({\n          dataIndex: dataIdx,\n          mappedValue: mappedValue,\n          ordinalNumber: ordinalNumber\n        });\n      });\n      info.sort(function (a, b) {\n        // If NaN, it will be treated as min val.\n        return b.mappedValue - a.mappedValue;\n      });\n      return {\n        ordinalNumbers: map(info, function (item) {\n          return item.ordinalNumber;\n        })\n      };\n    };\n\n    BarView.prototype._isOrderChangedWithinSameData = function (data, orderMapping, baseAxis) {\n      var scale = baseAxis.scale;\n      var ordinalDataDim = data.mapDimension(baseAxis.dim);\n      var lastValue = Number.MAX_VALUE;\n\n      for (var tickNum = 0, len = scale.getOrdinalMeta().categories.length; tickNum < len; ++tickNum) {\n        var rawIdx = data.rawIndexOf(ordinalDataDim, scale.getRawOrdinalNumber(tickNum));\n        var value = rawIdx < 0 // If some tick have no bar, the tick will be treated as min.\n        ? Number.MIN_VALUE // PENDING: if dataZoom on baseAxis exits, is it a performance issue?\n        : orderMapping(data.indexOfRawIndex(rawIdx));\n\n        if (value > lastValue) {\n          return true;\n        }\n\n        lastValue = value;\n      }\n\n      return false;\n    };\n    /*\n     * Consider the case when A and B changed order, whose representing\n     * bars are both out of sight, we don't wish to trigger reorder action\n     * as long as the order in the view doesn't change.\n     */\n\n\n    BarView.prototype._isOrderDifferentInView = function (orderInfo, baseAxis) {\n      var scale = baseAxis.scale;\n      var extent = scale.getExtent();\n      var tickNum = Math.max(0, extent[0]);\n      var tickMax = Math.min(extent[1], scale.getOrdinalMeta().categories.length - 1);\n\n      for (; tickNum <= tickMax; ++tickNum) {\n        if (orderInfo.ordinalNumbers[tickNum] !== scale.getRawOrdinalNumber(tickNum)) {\n          return true;\n        }\n      }\n    };\n\n    BarView.prototype._updateSortWithinSameData = function (data, orderMapping, baseAxis, api) {\n      if (!this._isOrderChangedWithinSameData(data, orderMapping, baseAxis)) {\n        return;\n      }\n\n      var sortInfo = this._dataSort(data, baseAxis, orderMapping);\n\n      if (this._isOrderDifferentInView(sortInfo, baseAxis)) {\n        this._removeOnRenderedListener(api);\n\n        api.dispatchAction({\n          type: 'changeAxisOrder',\n          componentType: baseAxis.dim + 'Axis',\n          axisId: baseAxis.index,\n          sortInfo: sortInfo\n        });\n      }\n    };\n\n    BarView.prototype._dispatchInitSort = function (data, realtimeSortCfg, api) {\n      var baseAxis = realtimeSortCfg.baseAxis;\n\n      var sortResult = this._dataSort(data, baseAxis, function (dataIdx) {\n        return data.get(data.mapDimension(realtimeSortCfg.otherAxis.dim), dataIdx);\n      });\n\n      api.dispatchAction({\n        type: 'changeAxisOrder',\n        componentType: baseAxis.dim + 'Axis',\n        isInitSort: true,\n        axisId: baseAxis.index,\n        sortInfo: sortResult\n      });\n    };\n\n    BarView.prototype.remove = function (ecModel, api) {\n      this._clear(this._model);\n\n      this._removeOnRenderedListener(api);\n    };\n\n    BarView.prototype.dispose = function (ecModel, api) {\n      this._removeOnRenderedListener(api);\n    };\n\n    BarView.prototype._removeOnRenderedListener = function (api) {\n      if (this._onRendered) {\n        api.getZr().off('rendered', this._onRendered);\n        this._onRendered = null;\n      }\n    };\n\n    BarView.prototype._clear = function (model) {\n      var group = this.group;\n      var data = this._data;\n\n      if (model && model.isAnimationEnabled() && data && !this._isLargeDraw) {\n        this._removeBackground();\n\n        this._backgroundEls = [];\n        data.eachItemGraphicEl(function (el) {\n          removeElementWithFadeOut(el, model, getECData(el).dataIndex);\n        });\n      } else {\n        group.removeAll();\n      }\n\n      this._data = null;\n      this._isFirstFrame = true;\n    };\n\n    BarView.prototype._removeBackground = function () {\n      this.group.remove(this._backgroundGroup);\n      this._backgroundGroup = null;\n    };\n\n    BarView.type = 'bar';\n    return BarView;\n  }(ChartView);\n\n  var clip = {\n    cartesian2d: function (coordSysBoundingRect, layout) {\n      var signWidth = layout.width < 0 ? -1 : 1;\n      var signHeight = layout.height < 0 ? -1 : 1; // Needs positive width and height\n\n      if (signWidth < 0) {\n        layout.x += layout.width;\n        layout.width = -layout.width;\n      }\n\n      if (signHeight < 0) {\n        layout.y += layout.height;\n        layout.height = -layout.height;\n      }\n\n      var coordSysX2 = coordSysBoundingRect.x + coordSysBoundingRect.width;\n      var coordSysY2 = coordSysBoundingRect.y + coordSysBoundingRect.height;\n      var x = mathMax$5(layout.x, coordSysBoundingRect.x);\n      var x2 = mathMin$5(layout.x + layout.width, coordSysX2);\n      var y = mathMax$5(layout.y, coordSysBoundingRect.y);\n      var y2 = mathMin$5(layout.y + layout.height, coordSysY2);\n      var xClipped = x2 < x;\n      var yClipped = y2 < y; // When xClipped or yClipped, the element will be marked as `ignore`.\n      // But we should also place the element at the edge of the coord sys bounding rect.\n      // Beause if data changed and the bar show again, its transition animaiton\n      // will begin at this place.\n\n      layout.x = xClipped && x > coordSysX2 ? x2 : x;\n      layout.y = yClipped && y > coordSysY2 ? y2 : y;\n      layout.width = xClipped ? 0 : x2 - x;\n      layout.height = yClipped ? 0 : y2 - y; // Reverse back\n\n      if (signWidth < 0) {\n        layout.x += layout.width;\n        layout.width = -layout.width;\n      }\n\n      if (signHeight < 0) {\n        layout.y += layout.height;\n        layout.height = -layout.height;\n      }\n\n      return xClipped || yClipped;\n    },\n    polar: function (coordSysClipArea, layout) {\n      var signR = layout.r0 <= layout.r ? 1 : -1; // Make sure r is larger than r0\n\n      if (signR < 0) {\n        var tmp = layout.r;\n        layout.r = layout.r0;\n        layout.r0 = tmp;\n      }\n\n      var r = mathMin$5(layout.r, coordSysClipArea.r);\n      var r0 = mathMax$5(layout.r0, coordSysClipArea.r0);\n      layout.r = r;\n      layout.r0 = r0;\n      var clipped = r - r0 < 0; // Reverse back\n\n      if (signR < 0) {\n        var tmp = layout.r;\n        layout.r = layout.r0;\n        layout.r0 = tmp;\n      }\n\n      return clipped;\n    }\n  };\n  var elementCreator = {\n    cartesian2d: function (seriesModel, data, newIndex, layout, isHorizontal, animationModel, axisModel, isUpdate, roundCap) {\n      var rect = new Rect({\n        shape: extend({}, layout),\n        z2: 1\n      });\n      rect.__dataIndex = newIndex;\n      rect.name = 'item';\n\n      if (animationModel) {\n        var rectShape = rect.shape;\n        var animateProperty = isHorizontal ? 'height' : 'width';\n        rectShape[animateProperty] = 0;\n      }\n\n      return rect;\n    },\n    polar: function (seriesModel, data, newIndex, layout, isRadial, animationModel, axisModel, isUpdate, roundCap) {\n      var ShapeClass = !isRadial && roundCap ? SausagePath : Sector;\n      var sector = new ShapeClass({\n        shape: layout,\n        z2: 1\n      });\n      sector.name = 'item';\n      var positionMap = createPolarPositionMapping(isRadial);\n      sector.calculateTextPosition = createSectorCalculateTextPosition(positionMap, {\n        isRoundCap: ShapeClass === SausagePath\n      }); // Animation\n\n      if (animationModel) {\n        var sectorShape = sector.shape;\n        var animateProperty = isRadial ? 'r' : 'endAngle';\n        var animateTarget = {};\n        sectorShape[animateProperty] = isRadial ? 0 : layout.startAngle;\n        animateTarget[animateProperty] = layout[animateProperty];\n        (isUpdate ? updateProps : initProps)(sector, {\n          shape: animateTarget // __value: typeof dataValue === 'string' ? parseInt(dataValue, 10) : dataValue\n\n        }, animationModel);\n      }\n\n      return sector;\n    }\n  };\n\n  function shouldRealtimeSort(seriesModel, coordSys) {\n    var realtimeSortOption = seriesModel.get('realtimeSort', true);\n    var baseAxis = coordSys.getBaseAxis();\n    {\n      if (realtimeSortOption) {\n        if (baseAxis.type !== 'category') {\n          warn('`realtimeSort` will not work because this bar series is not based on a category axis.');\n        }\n\n        if (coordSys.type !== 'cartesian2d') {\n          warn('`realtimeSort` will not work because this bar series is not on cartesian2d.');\n        }\n      }\n    }\n\n    if (realtimeSortOption && baseAxis.type === 'category' && coordSys.type === 'cartesian2d') {\n      return {\n        baseAxis: baseAxis,\n        otherAxis: coordSys.getOtherAxis(baseAxis)\n      };\n    }\n  }\n\n  function updateRealtimeAnimation(realtimeSortCfg, seriesAnimationModel, el, layout, newIndex, isHorizontal, isUpdate, isChangeOrder) {\n    var seriesTarget;\n    var axisTarget;\n\n    if (isHorizontal) {\n      axisTarget = {\n        x: layout.x,\n        width: layout.width\n      };\n      seriesTarget = {\n        y: layout.y,\n        height: layout.height\n      };\n    } else {\n      axisTarget = {\n        y: layout.y,\n        height: layout.height\n      };\n      seriesTarget = {\n        x: layout.x,\n        width: layout.width\n      };\n    }\n\n    if (!isChangeOrder) {\n      // Keep the original growth animation if only axis order changed.\n      // Not start a new animation.\n      (isUpdate ? updateProps : initProps)(el, {\n        shape: seriesTarget\n      }, seriesAnimationModel, newIndex, null);\n    }\n\n    var axisAnimationModel = seriesAnimationModel ? realtimeSortCfg.baseAxis.model : null;\n    (isUpdate ? updateProps : initProps)(el, {\n      shape: axisTarget\n    }, axisAnimationModel, newIndex);\n  }\n\n  function checkPropertiesNotValid(obj, props) {\n    for (var i = 0; i < props.length; i++) {\n      if (!isFinite(obj[props[i]])) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  var rectPropties = ['x', 'y', 'width', 'height'];\n  var polarPropties = ['cx', 'cy', 'r', 'startAngle', 'endAngle'];\n  var isValidLayout = {\n    cartesian2d: function (layout) {\n      return !checkPropertiesNotValid(layout, rectPropties);\n    },\n    polar: function (layout) {\n      return !checkPropertiesNotValid(layout, polarPropties);\n    }\n  };\n  var getLayout = {\n    // itemModel is only used to get borderWidth, which is not needed\n    // when calculating bar background layout.\n    cartesian2d: function (data, dataIndex, itemModel) {\n      var layout = data.getItemLayout(dataIndex);\n      var fixedLineWidth = itemModel ? getLineWidth(itemModel, layout) : 0; // fix layout with lineWidth\n\n      var signX = layout.width > 0 ? 1 : -1;\n      var signY = layout.height > 0 ? 1 : -1;\n      return {\n        x: layout.x + signX * fixedLineWidth / 2,\n        y: layout.y + signY * fixedLineWidth / 2,\n        width: layout.width - signX * fixedLineWidth,\n        height: layout.height - signY * fixedLineWidth\n      };\n    },\n    polar: function (data, dataIndex, itemModel) {\n      var layout = data.getItemLayout(dataIndex);\n      return {\n        cx: layout.cx,\n        cy: layout.cy,\n        r0: layout.r0,\n        r: layout.r,\n        startAngle: layout.startAngle,\n        endAngle: layout.endAngle,\n        clockwise: layout.clockwise\n      };\n    }\n  };\n\n  function isZeroOnPolar(layout) {\n    return layout.startAngle != null && layout.endAngle != null && layout.startAngle === layout.endAngle;\n  }\n\n  function createPolarPositionMapping(isRadial) {\n    return function (isRadial) {\n      var arcOrAngle = isRadial ? 'Arc' : 'Angle';\n      return function (position) {\n        switch (position) {\n          case 'start':\n          case 'insideStart':\n          case 'end':\n          case 'insideEnd':\n            return position + arcOrAngle;\n\n          default:\n            return position;\n        }\n      };\n    }(isRadial);\n  }\n\n  function updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, isPolar) {\n    var style = data.getItemVisual(dataIndex, 'style');\n\n    if (!isPolar) {\n      el.setShape('r', itemModel.get(['itemStyle', 'borderRadius']) || 0);\n    }\n\n    el.useStyle(style);\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && el.attr('cursor', cursorStyle);\n    var labelPositionOutside = isPolar ? isHorizontalOrRadial ? layout.r >= layout.r0 ? 'endArc' : 'startArc' : layout.endAngle >= layout.startAngle ? 'endAngle' : 'startAngle' : isHorizontalOrRadial ? layout.height >= 0 ? 'bottom' : 'top' : layout.width >= 0 ? 'right' : 'left';\n    var labelStatesModels = getLabelStatesModels(itemModel);\n    setLabelStyle(el, labelStatesModels, {\n      labelFetcher: seriesModel,\n      labelDataIndex: dataIndex,\n      defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\n      inheritColor: style.fill,\n      defaultOpacity: style.opacity,\n      defaultOutsidePosition: labelPositionOutside\n    });\n    var label = el.getTextContent();\n\n    if (isPolar && label) {\n      var position = itemModel.get(['label', 'position']);\n      el.textConfig.inside = position === 'middle' ? true : null;\n      setSectorTextRotation(el, position === 'outside' ? labelPositionOutside : position, createPolarPositionMapping(isHorizontalOrRadial), itemModel.get(['label', 'rotate']));\n    }\n\n    setLabelValueAnimation(label, labelStatesModels, seriesModel.getRawValue(dataIndex), function (value) {\n      return getDefaultInterpolatedLabel(data, value);\n    });\n    var emphasisModel = itemModel.getModel(['emphasis']);\n    toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    setStatesStylesFromModel(el, itemModel);\n\n    if (isZeroOnPolar(layout)) {\n      el.style.fill = 'none';\n      el.style.stroke = 'none';\n      each(el.states, function (state) {\n        if (state.style) {\n          state.style.fill = state.style.stroke = 'none';\n        }\n      });\n    }\n  } // In case width or height are too small.\n\n\n  function getLineWidth(itemModel, rawLayout) {\n    // Has no border.\n    var borderColor = itemModel.get(['itemStyle', 'borderColor']);\n\n    if (!borderColor || borderColor === 'none') {\n      return 0;\n    }\n\n    var lineWidth = itemModel.get(['itemStyle', 'borderWidth']) || 0; // width or height may be NaN for empty data\n\n    var width = isNaN(rawLayout.width) ? Number.MAX_VALUE : Math.abs(rawLayout.width);\n    var height = isNaN(rawLayout.height) ? Number.MAX_VALUE : Math.abs(rawLayout.height);\n    return Math.min(lineWidth, width, height);\n  }\n\n  var LagePathShape =\n  /** @class */\n  function () {\n    function LagePathShape() {}\n\n    return LagePathShape;\n  }();\n\n  var LargePath =\n  /** @class */\n  function (_super) {\n    __extends(LargePath, _super);\n\n    function LargePath(opts) {\n      var _this = _super.call(this, opts) || this;\n\n      _this.type = 'largeBar';\n      return _this;\n    }\n\n    LargePath.prototype.getDefaultShape = function () {\n      return new LagePathShape();\n    };\n\n    LargePath.prototype.buildPath = function (ctx, shape) {\n      // Drawing lines is more efficient than drawing\n      // a whole line or drawing rects.\n      var points = shape.points;\n      var baseDimIdx = this.baseDimIdx;\n      var valueDimIdx = 1 - this.baseDimIdx;\n      var startPoint = [];\n      var size = [];\n      var barWidth = this.barWidth;\n\n      for (var i = 0; i < points.length; i += 3) {\n        size[baseDimIdx] = barWidth;\n        size[valueDimIdx] = points[i + 2];\n        startPoint[baseDimIdx] = points[i + baseDimIdx];\n        startPoint[valueDimIdx] = points[i + valueDimIdx];\n        ctx.rect(startPoint[0], startPoint[1], size[0], size[1]);\n      }\n    };\n\n    return LargePath;\n  }(Path);\n\n  function createLarge(seriesModel, group, progressiveEls, incremental) {\n    // TODO support polar\n    var data = seriesModel.getData();\n    var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\n    var largeDataIndices = data.getLayout('largeDataIndices');\n    var barWidth = data.getLayout('size');\n    var backgroundModel = seriesModel.getModel('backgroundStyle');\n    var bgPoints = data.getLayout('largeBackgroundPoints');\n\n    if (bgPoints) {\n      var bgEl = new LargePath({\n        shape: {\n          points: bgPoints\n        },\n        incremental: !!incremental,\n        silent: true,\n        z2: 0\n      });\n      bgEl.baseDimIdx = baseDimIdx;\n      bgEl.largeDataIndices = largeDataIndices;\n      bgEl.barWidth = barWidth;\n      bgEl.useStyle(backgroundModel.getItemStyle());\n      group.add(bgEl);\n      progressiveEls && progressiveEls.push(bgEl);\n    }\n\n    var el = new LargePath({\n      shape: {\n        points: data.getLayout('largePoints')\n      },\n      incremental: !!incremental,\n      z2: 1\n    });\n    el.baseDimIdx = baseDimIdx;\n    el.largeDataIndices = largeDataIndices;\n    el.barWidth = barWidth;\n    group.add(el);\n    el.useStyle(data.getVisual('style')); // Enable tooltip and user mouse/touch event handlers.\n\n    getECData(el).seriesIndex = seriesModel.seriesIndex;\n\n    if (!seriesModel.get('silent')) {\n      el.on('mousedown', largePathUpdateDataIndex);\n      el.on('mousemove', largePathUpdateDataIndex);\n    }\n\n    progressiveEls && progressiveEls.push(el);\n  } // Use throttle to avoid frequently traverse to find dataIndex.\n\n\n  var largePathUpdateDataIndex = throttle(function (event) {\n    var largePath = this;\n    var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\n    getECData(largePath).dataIndex = dataIndex >= 0 ? dataIndex : null;\n  }, 30, false);\n\n  function largePathFindDataIndex(largePath, x, y) {\n    var baseDimIdx = largePath.baseDimIdx;\n    var valueDimIdx = 1 - baseDimIdx;\n    var points = largePath.shape.points;\n    var largeDataIndices = largePath.largeDataIndices;\n    var startPoint = [];\n    var size = [];\n    var barWidth = largePath.barWidth;\n\n    for (var i = 0, len = points.length / 3; i < len; i++) {\n      var ii = i * 3;\n      size[baseDimIdx] = barWidth;\n      size[valueDimIdx] = points[ii + 2];\n      startPoint[baseDimIdx] = points[ii + baseDimIdx];\n      startPoint[valueDimIdx] = points[ii + valueDimIdx];\n\n      if (size[valueDimIdx] < 0) {\n        startPoint[valueDimIdx] += size[valueDimIdx];\n        size[valueDimIdx] = -size[valueDimIdx];\n      }\n\n      if (x >= startPoint[0] && x <= startPoint[0] + size[0] && y >= startPoint[1] && y <= startPoint[1] + size[1]) {\n        return largeDataIndices[i];\n      }\n    }\n\n    return -1;\n  }\n\n  function createBackgroundShape(isHorizontalOrRadial, layout, coord) {\n    if (isCoordinateSystemType(coord, 'cartesian2d')) {\n      var rectShape = layout;\n      var coordLayout = coord.getArea();\n      return {\n        x: isHorizontalOrRadial ? rectShape.x : coordLayout.x,\n        y: isHorizontalOrRadial ? coordLayout.y : rectShape.y,\n        width: isHorizontalOrRadial ? rectShape.width : coordLayout.width,\n        height: isHorizontalOrRadial ? coordLayout.height : rectShape.height\n      };\n    } else {\n      var coordLayout = coord.getArea();\n      var sectorShape = layout;\n      return {\n        cx: coordLayout.cx,\n        cy: coordLayout.cy,\n        r0: isHorizontalOrRadial ? coordLayout.r0 : sectorShape.r0,\n        r: isHorizontalOrRadial ? coordLayout.r : sectorShape.r,\n        startAngle: isHorizontalOrRadial ? sectorShape.startAngle : 0,\n        endAngle: isHorizontalOrRadial ? sectorShape.endAngle : Math.PI * 2\n      };\n    }\n  }\n\n  function createBackgroundEl(coord, isHorizontalOrRadial, layout) {\n    var ElementClz = coord.type === 'polar' ? Sector : Rect;\n    return new ElementClz({\n      shape: createBackgroundShape(isHorizontalOrRadial, layout, coord),\n      silent: true,\n      z2: 0\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$2(registers) {\n    registers.registerChartView(BarView);\n    registers.registerSeriesModel(BarSeriesModel);\n    registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, curry(layout, 'bar')); // Do layout after other overall layout, which can preapre some informations.\n\n    registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, createProgressiveLayout('bar')); // Down sample after filter\n\n    registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('bar'));\n    /**\n     * @payload\n     * @property {string} [componentType=series]\n     * @property {number} [dx]\n     * @property {number} [dy]\n     * @property {number} [zoom]\n     * @property {number} [originX]\n     * @property {number} [originY]\n     */\n\n    registers.registerAction({\n      type: 'changeAxisOrder',\n      event: 'changeAxisOrder',\n      update: 'update'\n    }, function (payload, ecModel) {\n      var componentType = payload.componentType || 'series';\n      ecModel.eachComponent({\n        mainType: componentType,\n        query: payload\n      }, function (componentModel) {\n        if (payload.sortInfo) {\n          componentModel.axis.setCategorySortInfo(payload.sortInfo);\n        }\n      });\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  use(install$2);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var LineSeriesModel =\n  /** @class */\n  function (_super) {\n    __extends(LineSeriesModel, _super);\n\n    function LineSeriesModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = LineSeriesModel.type;\n      _this.hasSymbolVisual = true;\n      return _this;\n    }\n\n    LineSeriesModel.prototype.getInitialData = function (option) {\n      {\n        var coordSys = option.coordinateSystem;\n\n        if (coordSys !== 'polar' && coordSys !== 'cartesian2d') {\n          throw new Error('Line not support coordinateSystem besides cartesian and polar');\n        }\n      }\n      return createSeriesData(null, this, {\n        useEncodeDefaulter: true\n      });\n    };\n\n    LineSeriesModel.prototype.getLegendIcon = function (opt) {\n      var group = new Group();\n      var line = createSymbol('line', 0, opt.itemHeight / 2, opt.itemWidth, 0, opt.lineStyle.stroke, false);\n      group.add(line);\n      line.setStyle(opt.lineStyle);\n      var visualType = this.getData().getVisual('symbol');\n      var visualRotate = this.getData().getVisual('symbolRotate');\n      var symbolType = visualType === 'none' ? 'circle' : visualType; // Symbol size is 80% when there is a line\n\n      var size = opt.itemHeight * 0.8;\n      var symbol = createSymbol(symbolType, (opt.itemWidth - size) / 2, (opt.itemHeight - size) / 2, size, size, opt.itemStyle.fill);\n      group.add(symbol);\n      symbol.setStyle(opt.itemStyle);\n      var symbolRotate = opt.iconRotate === 'inherit' ? visualRotate : opt.iconRotate || 0;\n      symbol.rotation = symbolRotate * Math.PI / 180;\n      symbol.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n\n      if (symbolType.indexOf('empty') > -1) {\n        symbol.style.stroke = symbol.style.fill;\n        symbol.style.fill = '#fff';\n        symbol.style.lineWidth = 2;\n      }\n\n      return group;\n    };\n\n    LineSeriesModel.type = 'series.line';\n    LineSeriesModel.dependencies = ['grid', 'polar'];\n    LineSeriesModel.defaultOption = {\n      // zlevel: 0,\n      z: 3,\n      coordinateSystem: 'cartesian2d',\n      legendHoverLink: true,\n      clip: true,\n      label: {\n        position: 'top'\n      },\n      // itemStyle: {\n      // },\n      endLabel: {\n        show: false,\n        valueAnimation: true,\n        distance: 8\n      },\n      lineStyle: {\n        width: 2,\n        type: 'solid'\n      },\n      emphasis: {\n        scale: true\n      },\n      // areaStyle: {\n      // origin of areaStyle. Valid values:\n      // `'auto'/null/undefined`: from axisLine to data\n      // `'start'`: from min to data\n      // `'end'`: from data to max\n      // origin: 'auto'\n      // },\n      // false, 'start', 'end', 'middle'\n      step: false,\n      // Disabled if step is true\n      smooth: false,\n      smoothMonotone: null,\n      symbol: 'emptyCircle',\n      symbolSize: 4,\n      symbolRotate: null,\n      showSymbol: true,\n      // `false`: follow the label interval strategy.\n      // `true`: show all symbols.\n      // `'auto'`: If possible, show all symbols, otherwise\n      //           follow the label interval strategy.\n      showAllSymbol: 'auto',\n      // Whether to connect break point.\n      connectNulls: false,\n      // Sampling for large data. Can be: 'average', 'max', 'min', 'sum', 'lttb'.\n      sampling: 'none',\n      animationEasing: 'linear',\n      // Disable progressive\n      progressive: 0,\n      hoverLayerThreshold: Infinity,\n      universalTransition: {\n        divideShape: 'clone'\n      },\n      triggerLineEvent: false\n    };\n    return LineSeriesModel;\n  }(SeriesModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var Symbol$1 =\n  /** @class */\n  function (_super) {\n    __extends(Symbol, _super);\n\n    function Symbol(data, idx, seriesScope, opts) {\n      var _this = _super.call(this) || this;\n\n      _this.updateData(data, idx, seriesScope, opts);\n\n      return _this;\n    }\n\n    Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n      // Remove paths created before\n      this.removeAll(); // let symbolPath = createSymbol(\n      //     symbolType, -0.5, -0.5, 1, 1, color\n      // );\n      // If width/height are set too small (e.g., set to 1) on ios10\n      // and macOS Sierra, a circle stroke become a rect, no matter what\n      // the scale is set. So we set width/height as 2. See #4150.\n\n      var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\n      symbolPath.attr({\n        z2: 100,\n        culling: true,\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2\n      }); // Rewrite drift method\n\n      symbolPath.drift = driftSymbol;\n      this._symbolType = symbolType;\n      this.add(symbolPath);\n    };\n    /**\n     * Stop animation\n     * @param {boolean} toLastFrame\n     */\n\n\n    Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\n      this.childAt(0).stopAnimation(null, toLastFrame);\n    };\n\n    Symbol.prototype.getSymbolType = function () {\n      return this._symbolType;\n    };\n    /**\n     * FIXME:\n     * Caution: This method breaks the encapsulation of this module,\n     * but it indeed brings convenience. So do not use the method\n     * unless you detailedly know all the implements of `Symbol`,\n     * especially animation.\n     *\n     * Get symbol path element.\n     */\n\n\n    Symbol.prototype.getSymbolPath = function () {\n      return this.childAt(0);\n    };\n    /**\n     * Highlight symbol\n     */\n\n\n    Symbol.prototype.highlight = function () {\n      enterEmphasis(this.childAt(0));\n    };\n    /**\n     * Downplay symbol\n     */\n\n\n    Symbol.prototype.downplay = function () {\n      leaveEmphasis(this.childAt(0));\n    };\n    /**\n     * @param {number} zlevel\n     * @param {number} z\n     */\n\n\n    Symbol.prototype.setZ = function (zlevel, z) {\n      var symbolPath = this.childAt(0);\n      symbolPath.zlevel = zlevel;\n      symbolPath.z = z;\n    };\n\n    Symbol.prototype.setDraggable = function (draggable, hasCursorOption) {\n      var symbolPath = this.childAt(0);\n      symbolPath.draggable = draggable;\n      symbolPath.cursor = !hasCursorOption && draggable ? 'move' : symbolPath.cursor;\n    };\n    /**\n     * Update symbol properties\n     */\n\n\n    Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\n      this.silent = false;\n      var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n      var seriesModel = data.hostModel;\n      var symbolSize = Symbol.getSymbolSize(data, idx);\n      var isInit = symbolType !== this._symbolType;\n      var disableAnimation = opts && opts.disableAnimation;\n\n      if (isInit) {\n        var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n        this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n      } else {\n        var symbolPath = this.childAt(0);\n        symbolPath.silent = false;\n        var target = {\n          scaleX: symbolSize[0] / 2,\n          scaleY: symbolSize[1] / 2\n        };\n        disableAnimation ? symbolPath.attr(target) : updateProps(symbolPath, target, seriesModel, idx);\n        saveOldStyle(symbolPath);\n      }\n\n      this._updateCommon(data, idx, symbolSize, seriesScope, opts);\n\n      if (isInit) {\n        var symbolPath = this.childAt(0);\n\n        if (!disableAnimation) {\n          var target = {\n            scaleX: this._sizeX,\n            scaleY: this._sizeY,\n            style: {\n              // Always fadeIn. Because it has fadeOut animation when symbol is removed..\n              opacity: symbolPath.style.opacity\n            }\n          };\n          symbolPath.scaleX = symbolPath.scaleY = 0;\n          symbolPath.style.opacity = 0;\n          initProps(symbolPath, target, seriesModel, idx);\n        }\n      }\n\n      if (disableAnimation) {\n        // Must stop leave transition manually if don't call initProps or updateProps.\n        this.childAt(0).stopAnimation('leave');\n      }\n    };\n\n    Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\n      var symbolPath = this.childAt(0);\n      var seriesModel = data.hostModel;\n      var emphasisItemStyle;\n      var blurItemStyle;\n      var selectItemStyle;\n      var focus;\n      var blurScope;\n      var emphasisDisabled;\n      var labelStatesModels;\n      var hoverScale;\n      var cursorStyle;\n\n      if (seriesScope) {\n        emphasisItemStyle = seriesScope.emphasisItemStyle;\n        blurItemStyle = seriesScope.blurItemStyle;\n        selectItemStyle = seriesScope.selectItemStyle;\n        focus = seriesScope.focus;\n        blurScope = seriesScope.blurScope;\n        labelStatesModels = seriesScope.labelStatesModels;\n        hoverScale = seriesScope.hoverScale;\n        cursorStyle = seriesScope.cursorStyle;\n        emphasisDisabled = seriesScope.emphasisDisabled;\n      }\n\n      if (!seriesScope || data.hasItemOption) {\n        var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx);\n        var emphasisModel = itemModel.getModel('emphasis');\n        emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n        selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n        blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n        focus = emphasisModel.get('focus');\n        blurScope = emphasisModel.get('blurScope');\n        emphasisDisabled = emphasisModel.get('disabled');\n        labelStatesModels = getLabelStatesModels(itemModel);\n        hoverScale = emphasisModel.getShallow('scale');\n        cursorStyle = itemModel.getShallow('cursor');\n      }\n\n      var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n      symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n      var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n\n      if (symbolOffset) {\n        symbolPath.x = symbolOffset[0];\n        symbolPath.y = symbolOffset[1];\n      }\n\n      cursorStyle && symbolPath.attr('cursor', cursorStyle);\n      var symbolStyle = data.getItemVisual(idx, 'style');\n      var visualColor = symbolStyle.fill;\n\n      if (symbolPath instanceof ZRImage) {\n        var pathStyle = symbolPath.style;\n        symbolPath.useStyle(extend({\n          // TODO other properties like x, y ?\n          image: pathStyle.image,\n          x: pathStyle.x,\n          y: pathStyle.y,\n          width: pathStyle.width,\n          height: pathStyle.height\n        }, symbolStyle));\n      } else {\n        if (symbolPath.__isEmptyBrush) {\n          // fill and stroke will be swapped if it's empty.\n          // So we cloned a new style to avoid it affecting the original style in visual storage.\n          // TODO Better implementation. No empty logic!\n          symbolPath.useStyle(extend({}, symbolStyle));\n        } else {\n          symbolPath.useStyle(symbolStyle);\n        } // Disable decal because symbol scale will been applied on the decal.\n\n\n        symbolPath.style.decal = null;\n        symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\n        symbolPath.style.strokeNoScale = true;\n      }\n\n      var liftZ = data.getItemVisual(idx, 'liftZ');\n      var z2Origin = this._z2;\n\n      if (liftZ != null) {\n        if (z2Origin == null) {\n          this._z2 = symbolPath.z2;\n          symbolPath.z2 += liftZ;\n        }\n      } else if (z2Origin != null) {\n        symbolPath.z2 = z2Origin;\n        this._z2 = null;\n      }\n\n      var useNameLabel = opts && opts.useNameLabel;\n      setLabelStyle(symbolPath, labelStatesModels, {\n        labelFetcher: seriesModel,\n        labelDataIndex: idx,\n        defaultText: getLabelDefaultText,\n        inheritColor: visualColor,\n        defaultOpacity: symbolStyle.opacity\n      }); // Do not execute util needed.\n\n      function getLabelDefaultText(idx) {\n        return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n      }\n\n      this._sizeX = symbolSize[0] / 2;\n      this._sizeY = symbolSize[1] / 2;\n      var emphasisState = symbolPath.ensureState('emphasis');\n      emphasisState.style = emphasisItemStyle;\n      symbolPath.ensureState('select').style = selectItemStyle;\n      symbolPath.ensureState('blur').style = blurItemStyle;\n\n      if (hoverScale) {\n        var scaleRatio = Math.max(isNumber(hoverScale) ? hoverScale : 1.1, 3 / this._sizeY);\n        emphasisState.scaleX = this._sizeX * scaleRatio;\n        emphasisState.scaleY = this._sizeY * scaleRatio;\n      }\n\n      this.setSymbolScale(1);\n      toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n    };\n\n    Symbol.prototype.setSymbolScale = function (scale) {\n      this.scaleX = this.scaleY = scale;\n    };\n\n    Symbol.prototype.fadeOut = function (cb, seriesModel, opt) {\n      var symbolPath = this.childAt(0);\n      var dataIndex = getECData(this).dataIndex;\n      var animationOpt = opt && opt.animation; // Avoid mistaken hover when fading out\n\n      this.silent = symbolPath.silent = true; // Not show text when animating\n\n      if (opt && opt.fadeLabel) {\n        var textContent = symbolPath.getTextContent();\n\n        if (textContent) {\n          removeElement(textContent, {\n            style: {\n              opacity: 0\n            }\n          }, seriesModel, {\n            dataIndex: dataIndex,\n            removeOpt: animationOpt,\n            cb: function () {\n              symbolPath.removeTextContent();\n            }\n          });\n        }\n      } else {\n        symbolPath.removeTextContent();\n      }\n\n      removeElement(symbolPath, {\n        style: {\n          opacity: 0\n        },\n        scaleX: 0,\n        scaleY: 0\n      }, seriesModel, {\n        dataIndex: dataIndex,\n        cb: cb,\n        removeOpt: animationOpt\n      });\n    };\n\n    Symbol.getSymbolSize = function (data, idx) {\n      return normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n    };\n\n    return Symbol;\n  }(Group);\n\n  function driftSymbol(dx, dy) {\n    this.parent.drift(dx, dy);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function symbolNeedsDraw(data, point, idx, opt) {\n    return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx)) // We do not set clipShape on group, because it will cut part of\n    // the symbol element shape. We use the same clip shape here as\n    // the line clip.\n    && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n  }\n\n  function normalizeUpdateOpt(opt) {\n    if (opt != null && !isObject(opt)) {\n      opt = {\n        isIgnore: opt\n      };\n    }\n\n    return opt || {};\n  }\n\n  function makeSeriesScope(data) {\n    var seriesModel = data.hostModel;\n    var emphasisModel = seriesModel.getModel('emphasis');\n    return {\n      emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\n      blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\n      selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\n      focus: emphasisModel.get('focus'),\n      blurScope: emphasisModel.get('blurScope'),\n      emphasisDisabled: emphasisModel.get('disabled'),\n      hoverScale: emphasisModel.get('scale'),\n      labelStatesModels: getLabelStatesModels(seriesModel),\n      cursorStyle: seriesModel.get('cursor')\n    };\n  }\n\n  var SymbolDraw =\n  /** @class */\n  function () {\n    function SymbolDraw(SymbolCtor) {\n      this.group = new Group();\n      this._SymbolCtor = SymbolCtor || Symbol$1;\n    }\n    /**\n     * Update symbols draw by new data\n     */\n\n\n    SymbolDraw.prototype.updateData = function (data, opt) {\n      // Remove progressive els.\n      this._progressiveEls = null;\n      opt = normalizeUpdateOpt(opt);\n      var group = this.group;\n      var seriesModel = data.hostModel;\n      var oldData = this._data;\n      var SymbolCtor = this._SymbolCtor;\n      var disableAnimation = opt.disableAnimation;\n      var seriesScope = makeSeriesScope(data);\n      var symbolUpdateOpt = {\n        disableAnimation: disableAnimation\n      };\n\n      var getSymbolPoint = opt.getSymbolPoint || function (idx) {\n        return data.getItemLayout(idx);\n      }; // There is no oldLineData only when first rendering or switching from\n      // stream mode to normal mode, where previous elements should be removed.\n\n\n      if (!oldData) {\n        group.removeAll();\n      }\n\n      data.diff(oldData).add(function (newIdx) {\n        var point = getSymbolPoint(newIdx);\n\n        if (symbolNeedsDraw(data, point, newIdx, opt)) {\n          var symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n          symbolEl.setPosition(point);\n          data.setItemGraphicEl(newIdx, symbolEl);\n          group.add(symbolEl);\n        }\n      }).update(function (newIdx, oldIdx) {\n        var symbolEl = oldData.getItemGraphicEl(oldIdx);\n        var point = getSymbolPoint(newIdx);\n\n        if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n          group.remove(symbolEl);\n          return;\n        }\n\n        var newSymbolType = data.getItemVisual(newIdx, 'symbol') || 'circle';\n        var oldSymbolType = symbolEl && symbolEl.getSymbolType && symbolEl.getSymbolType();\n\n        if (!symbolEl // Create a new if symbol type changed.\n        || oldSymbolType && oldSymbolType !== newSymbolType) {\n          group.remove(symbolEl);\n          symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n          symbolEl.setPosition(point);\n        } else {\n          symbolEl.updateData(data, newIdx, seriesScope, symbolUpdateOpt);\n          var target = {\n            x: point[0],\n            y: point[1]\n          };\n          disableAnimation ? symbolEl.attr(target) : updateProps(symbolEl, target, seriesModel);\n        } // Add back\n\n\n        group.add(symbolEl);\n        data.setItemGraphicEl(newIdx, symbolEl);\n      }).remove(function (oldIdx) {\n        var el = oldData.getItemGraphicEl(oldIdx);\n        el && el.fadeOut(function () {\n          group.remove(el);\n        }, seriesModel);\n      }).execute();\n      this._getSymbolPoint = getSymbolPoint;\n      this._data = data;\n    };\n\n    SymbolDraw.prototype.updateLayout = function () {\n      var _this = this;\n\n      var data = this._data;\n\n      if (data) {\n        // Not use animation\n        data.eachItemGraphicEl(function (el, idx) {\n          var point = _this._getSymbolPoint(idx);\n\n          el.setPosition(point);\n          el.markRedraw();\n        });\n      }\n    };\n\n    SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n      this._seriesScope = makeSeriesScope(data);\n      this._data = null;\n      this.group.removeAll();\n    };\n    /**\n     * Update symbols draw by new data\n     */\n\n\n    SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n      // Clear\n      this._progressiveEls = [];\n      opt = normalizeUpdateOpt(opt);\n\n      function updateIncrementalAndHover(el) {\n        if (!el.isGroup) {\n          el.incremental = true;\n          el.ensureState('emphasis').hoverLayer = true;\n        }\n      }\n\n      for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n        var point = data.getItemLayout(idx);\n\n        if (symbolNeedsDraw(data, point, idx, opt)) {\n          var el = new this._SymbolCtor(data, idx, this._seriesScope);\n          el.traverse(updateIncrementalAndHover);\n          el.setPosition(point);\n          this.group.add(el);\n          data.setItemGraphicEl(idx, el);\n\n          this._progressiveEls.push(el);\n        }\n      }\n    };\n\n    SymbolDraw.prototype.eachRendered = function (cb) {\n      traverseElements(this._progressiveEls || this.group, cb);\n    };\n\n    SymbolDraw.prototype.remove = function (enableAnimation) {\n      var group = this.group;\n      var data = this._data; // Incremental model do not have this._data.\n\n      if (data && enableAnimation) {\n        data.eachItemGraphicEl(function (el) {\n          el.fadeOut(function () {\n            group.remove(el);\n          }, data.hostModel);\n        });\n      } else {\n        group.removeAll();\n      }\n    };\n\n    return SymbolDraw;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function prepareDataCoordInfo(coordSys, data, valueOrigin) {\n    var baseAxis = coordSys.getBaseAxis();\n    var valueAxis = coordSys.getOtherAxis(baseAxis);\n    var valueStart = getValueStart(valueAxis, valueOrigin);\n    var baseAxisDim = baseAxis.dim;\n    var valueAxisDim = valueAxis.dim;\n    var valueDim = data.mapDimension(valueAxisDim);\n    var baseDim = data.mapDimension(baseAxisDim);\n    var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n    var dims = map(coordSys.dimensions, function (coordDim) {\n      return data.mapDimension(coordDim);\n    });\n    var stacked = false;\n    var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n    if (isDimensionStacked(data, dims[0]\n    /*, dims[1]*/\n    )) {\n      // jshint ignore:line\n      stacked = true;\n      dims[0] = stackResultDim;\n    }\n\n    if (isDimensionStacked(data, dims[1]\n    /*, dims[0]*/\n    )) {\n      // jshint ignore:line\n      stacked = true;\n      dims[1] = stackResultDim;\n    }\n\n    return {\n      dataDimsForPoint: dims,\n      valueStart: valueStart,\n      valueAxisDim: valueAxisDim,\n      baseAxisDim: baseAxisDim,\n      stacked: !!stacked,\n      valueDim: valueDim,\n      baseDim: baseDim,\n      baseDataOffset: baseDataOffset,\n      stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\n    };\n  }\n\n  function getValueStart(valueAxis, valueOrigin) {\n    var valueStart = 0;\n    var extent = valueAxis.scale.getExtent();\n\n    if (valueOrigin === 'start') {\n      valueStart = extent[0];\n    } else if (valueOrigin === 'end') {\n      valueStart = extent[1];\n    } // If origin is specified as a number, use it as\n    // valueStart directly\n    else if (isNumber(valueOrigin) && !isNaN(valueOrigin)) {\n        valueStart = valueOrigin;\n      } // auto\n      else {\n          // Both positive\n          if (extent[0] > 0) {\n            valueStart = extent[0];\n          } // Both negative\n          else if (extent[1] < 0) {\n              valueStart = extent[1];\n            } // If is one positive, and one negative, onZero shall be true\n\n        }\n\n    return valueStart;\n  }\n\n  function getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\n    var value = NaN;\n\n    if (dataCoordInfo.stacked) {\n      value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\n    }\n\n    if (isNaN(value)) {\n      value = dataCoordInfo.valueStart;\n    }\n\n    var baseDataOffset = dataCoordInfo.baseDataOffset;\n    var stackedData = [];\n    stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\n    stackedData[1 - baseDataOffset] = value;\n    return coordSys.dataToPoint(stackedData);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function diffData(oldData, newData) {\n    var diffResult = [];\n    newData.diff(oldData).add(function (idx) {\n      diffResult.push({\n        cmd: '+',\n        idx: idx\n      });\n    }).update(function (newIdx, oldIdx) {\n      diffResult.push({\n        cmd: '=',\n        idx: oldIdx,\n        idx1: newIdx\n      });\n    }).remove(function (idx) {\n      diffResult.push({\n        cmd: '-',\n        idx: idx\n      });\n    }).execute();\n    return diffResult;\n  }\n\n  function lineAnimationDiff(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\n    var diff = diffData(oldData, newData); // let newIdList = newData.mapArray(newData.getId);\n    // let oldIdList = oldData.mapArray(oldData.getId);\n    // convertToIntId(newIdList, oldIdList);\n    // // FIXME One data ?\n    // diff = arrayDiff(oldIdList, newIdList);\n\n    var currPoints = [];\n    var nextPoints = []; // Points for stacking base line\n\n    var currStackedPoints = [];\n    var nextStackedPoints = [];\n    var status = [];\n    var sortedIndices = [];\n    var rawIndices = [];\n    var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin); // const oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\n\n    var oldPoints = oldData.getLayout('points') || [];\n    var newPoints = newData.getLayout('points') || [];\n\n    for (var i = 0; i < diff.length; i++) {\n      var diffItem = diff[i];\n      var pointAdded = true;\n      var oldIdx2 = void 0;\n      var newIdx2 = void 0; // FIXME, animation is not so perfect when dataZoom window moves fast\n      // Which is in case remvoing or add more than one data in the tail or head\n\n      switch (diffItem.cmd) {\n        case '=':\n          oldIdx2 = diffItem.idx * 2;\n          newIdx2 = diffItem.idx1 * 2;\n          var currentX = oldPoints[oldIdx2];\n          var currentY = oldPoints[oldIdx2 + 1];\n          var nextX = newPoints[newIdx2];\n          var nextY = newPoints[newIdx2 + 1]; // If previous data is NaN, use next point directly\n\n          if (isNaN(currentX) || isNaN(currentY)) {\n            currentX = nextX;\n            currentY = nextY;\n          }\n\n          currPoints.push(currentX, currentY);\n          nextPoints.push(nextX, nextY);\n          currStackedPoints.push(oldStackedOnPoints[oldIdx2], oldStackedOnPoints[oldIdx2 + 1]);\n          nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n          rawIndices.push(newData.getRawIndex(diffItem.idx1));\n          break;\n\n        case '+':\n          var newIdx = diffItem.idx;\n          var newDataDimsForPoint = newDataOldCoordInfo.dataDimsForPoint;\n          var oldPt = oldCoordSys.dataToPoint([newData.get(newDataDimsForPoint[0], newIdx), newData.get(newDataDimsForPoint[1], newIdx)]);\n          newIdx2 = newIdx * 2;\n          currPoints.push(oldPt[0], oldPt[1]);\n          nextPoints.push(newPoints[newIdx2], newPoints[newIdx2 + 1]);\n          var stackedOnPoint = getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, newIdx);\n          currStackedPoints.push(stackedOnPoint[0], stackedOnPoint[1]);\n          nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n          rawIndices.push(newData.getRawIndex(newIdx));\n          break;\n\n        case '-':\n          pointAdded = false;\n      } // Original indices\n\n\n      if (pointAdded) {\n        status.push(diffItem);\n        sortedIndices.push(sortedIndices.length);\n      }\n    } // Diff result may be crossed if all items are changed\n    // Sort by data index\n\n\n    sortedIndices.sort(function (a, b) {\n      return rawIndices[a] - rawIndices[b];\n    });\n    var len = currPoints.length;\n    var sortedCurrPoints = createFloat32Array(len);\n    var sortedNextPoints = createFloat32Array(len);\n    var sortedCurrStackedPoints = createFloat32Array(len);\n    var sortedNextStackedPoints = createFloat32Array(len);\n    var sortedStatus = [];\n\n    for (var i = 0; i < sortedIndices.length; i++) {\n      var idx = sortedIndices[i];\n      var i2 = i * 2;\n      var idx2 = idx * 2;\n      sortedCurrPoints[i2] = currPoints[idx2];\n      sortedCurrPoints[i2 + 1] = currPoints[idx2 + 1];\n      sortedNextPoints[i2] = nextPoints[idx2];\n      sortedNextPoints[i2 + 1] = nextPoints[idx2 + 1];\n      sortedCurrStackedPoints[i2] = currStackedPoints[idx2];\n      sortedCurrStackedPoints[i2 + 1] = currStackedPoints[idx2 + 1];\n      sortedNextStackedPoints[i2] = nextStackedPoints[idx2];\n      sortedNextStackedPoints[i2 + 1] = nextStackedPoints[idx2 + 1];\n      sortedStatus[i] = status[idx];\n    }\n\n    return {\n      current: sortedCurrPoints,\n      next: sortedNextPoints,\n      stackedOnCurrent: sortedCurrStackedPoints,\n      stackedOnNext: sortedNextStackedPoints,\n      status: sortedStatus\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var mathMin$6 = Math.min;\n  var mathMax$6 = Math.max;\n\n  function isPointNull$1(x, y) {\n    return isNaN(x) || isNaN(y);\n  }\n  /**\n   * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\n   * situations. This should be used when points are non-monotone neither in x or\n   * y dimension.\n   */\n\n\n  function drawSegment(ctx, points, start, segLen, allLen, dir, smooth, smoothMonotone, connectNulls) {\n    var prevX;\n    var prevY;\n    var cpx0;\n    var cpy0;\n    var cpx1;\n    var cpy1;\n    var idx = start;\n    var k = 0;\n\n    for (; k < segLen; k++) {\n      var x = points[idx * 2];\n      var y = points[idx * 2 + 1];\n\n      if (idx >= allLen || idx < 0) {\n        break;\n      }\n\n      if (isPointNull$1(x, y)) {\n        if (connectNulls) {\n          idx += dir;\n          continue;\n        }\n\n        break;\n      }\n\n      if (idx === start) {\n        ctx[dir > 0 ? 'moveTo' : 'lineTo'](x, y);\n        cpx0 = x;\n        cpy0 = y;\n      } else {\n        var dx = x - prevX;\n        var dy = y - prevY; // Ignore tiny segment.\n\n        if (dx * dx + dy * dy < 0.5) {\n          idx += dir;\n          continue;\n        }\n\n        if (smooth > 0) {\n          var nextIdx = idx + dir;\n          var nextX = points[nextIdx * 2];\n          var nextY = points[nextIdx * 2 + 1]; // Ignore duplicate point\n\n          while (nextX === x && nextY === y && k < segLen) {\n            k++;\n            nextIdx += dir;\n            idx += dir;\n            nextX = points[nextIdx * 2];\n            nextY = points[nextIdx * 2 + 1];\n            x = points[idx * 2];\n            y = points[idx * 2 + 1];\n            dx = x - prevX;\n            dy = y - prevY;\n          }\n\n          var tmpK = k + 1;\n\n          if (connectNulls) {\n            // Find next point not null\n            while (isPointNull$1(nextX, nextY) && tmpK < segLen) {\n              tmpK++;\n              nextIdx += dir;\n              nextX = points[nextIdx * 2];\n              nextY = points[nextIdx * 2 + 1];\n            }\n          }\n\n          var ratioNextSeg = 0.5;\n          var vx = 0;\n          var vy = 0;\n          var nextCpx0 = void 0;\n          var nextCpy0 = void 0; // Is last point\n\n          if (tmpK >= segLen || isPointNull$1(nextX, nextY)) {\n            cpx1 = x;\n            cpy1 = y;\n          } else {\n            vx = nextX - prevX;\n            vy = nextY - prevY;\n            var dx0 = x - prevX;\n            var dx1 = nextX - x;\n            var dy0 = y - prevY;\n            var dy1 = nextY - y;\n            var lenPrevSeg = void 0;\n            var lenNextSeg = void 0;\n\n            if (smoothMonotone === 'x') {\n              lenPrevSeg = Math.abs(dx0);\n              lenNextSeg = Math.abs(dx1);\n              var dir_1 = vx > 0 ? 1 : -1;\n              cpx1 = x - dir_1 * lenPrevSeg * smooth;\n              cpy1 = y;\n              nextCpx0 = x + dir_1 * lenNextSeg * smooth;\n              nextCpy0 = y;\n            } else if (smoothMonotone === 'y') {\n              lenPrevSeg = Math.abs(dy0);\n              lenNextSeg = Math.abs(dy1);\n              var dir_2 = vy > 0 ? 1 : -1;\n              cpx1 = x;\n              cpy1 = y - dir_2 * lenPrevSeg * smooth;\n              nextCpx0 = x;\n              nextCpy0 = y + dir_2 * lenNextSeg * smooth;\n            } else {\n              lenPrevSeg = Math.sqrt(dx0 * dx0 + dy0 * dy0);\n              lenNextSeg = Math.sqrt(dx1 * dx1 + dy1 * dy1); // Use ratio of seg length\n\n              ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n              cpx1 = x - vx * smooth * (1 - ratioNextSeg);\n              cpy1 = y - vy * smooth * (1 - ratioNextSeg); // cp0 of next segment\n\n              nextCpx0 = x + vx * smooth * ratioNextSeg;\n              nextCpy0 = y + vy * smooth * ratioNextSeg; // Smooth constraint between point and next point.\n              // Avoid exceeding extreme after smoothing.\n\n              nextCpx0 = mathMin$6(nextCpx0, mathMax$6(nextX, x));\n              nextCpy0 = mathMin$6(nextCpy0, mathMax$6(nextY, y));\n              nextCpx0 = mathMax$6(nextCpx0, mathMin$6(nextX, x));\n              nextCpy0 = mathMax$6(nextCpy0, mathMin$6(nextY, y)); // Reclaculate cp1 based on the adjusted cp0 of next seg.\n\n              vx = nextCpx0 - x;\n              vy = nextCpy0 - y;\n              cpx1 = x - vx * lenPrevSeg / lenNextSeg;\n              cpy1 = y - vy * lenPrevSeg / lenNextSeg; // Smooth constraint between point and prev point.\n              // Avoid exceeding extreme after smoothing.\n\n              cpx1 = mathMin$6(cpx1, mathMax$6(prevX, x));\n              cpy1 = mathMin$6(cpy1, mathMax$6(prevY, y));\n              cpx1 = mathMax$6(cpx1, mathMin$6(prevX, x));\n              cpy1 = mathMax$6(cpy1, mathMin$6(prevY, y)); // Adjust next cp0 again.\n\n              vx = x - cpx1;\n              vy = y - cpy1;\n              nextCpx0 = x + vx * lenNextSeg / lenPrevSeg;\n              nextCpy0 = y + vy * lenNextSeg / lenPrevSeg;\n            }\n          }\n\n          ctx.bezierCurveTo(cpx0, cpy0, cpx1, cpy1, x, y);\n          cpx0 = nextCpx0;\n          cpy0 = nextCpy0;\n        } else {\n          ctx.lineTo(x, y);\n        }\n      }\n\n      prevX = x;\n      prevY = y;\n      idx += dir;\n    }\n\n    return k;\n  }\n\n  var ECPolylineShape =\n  /** @class */\n  function () {\n    function ECPolylineShape() {\n      this.smooth = 0;\n      this.smoothConstraint = true;\n    }\n\n    return ECPolylineShape;\n  }();\n\n  var ECPolyline =\n  /** @class */\n  function (_super) {\n    __extends(ECPolyline, _super);\n\n    function ECPolyline(opts) {\n      var _this = _super.call(this, opts) || this;\n\n      _this.type = 'ec-polyline';\n      return _this;\n    }\n\n    ECPolyline.prototype.getDefaultStyle = function () {\n      return {\n        stroke: '#000',\n        fill: null\n      };\n    };\n\n    ECPolyline.prototype.getDefaultShape = function () {\n      return new ECPolylineShape();\n    };\n\n    ECPolyline.prototype.buildPath = function (ctx, shape) {\n      var points = shape.points;\n      var i = 0;\n      var len = points.length / 2; // const result = getBoundingBox(points, shape.smoothConstraint);\n\n      if (shape.connectNulls) {\n        // Must remove first and last null values avoid draw error in polygon\n        for (; len > 0; len--) {\n          if (!isPointNull$1(points[len * 2 - 2], points[len * 2 - 1])) {\n            break;\n          }\n        }\n\n        for (; i < len; i++) {\n          if (!isPointNull$1(points[i * 2], points[i * 2 + 1])) {\n            break;\n          }\n        }\n      }\n\n      while (i < len) {\n        i += drawSegment(ctx, points, i, len, len, 1, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n      }\n    };\n\n    ECPolyline.prototype.getPointOn = function (xOrY, dim) {\n      if (!this.path) {\n        this.createPathProxy();\n        this.buildPath(this.path, this.shape);\n      }\n\n      var path = this.path;\n      var data = path.data;\n      var CMD = PathProxy.CMD;\n      var x0;\n      var y0;\n      var isDimX = dim === 'x';\n      var roots = [];\n\n      for (var i = 0; i < data.length;) {\n        var cmd = data[i++];\n        var x = void 0;\n        var y = void 0;\n        var x2 = void 0;\n        var y2 = void 0;\n        var x3 = void 0;\n        var y3 = void 0;\n        var t = void 0;\n\n        switch (cmd) {\n          case CMD.M:\n            x0 = data[i++];\n            y0 = data[i++];\n            break;\n\n          case CMD.L:\n            x = data[i++];\n            y = data[i++];\n            t = isDimX ? (xOrY - x0) / (x - x0) : (xOrY - y0) / (y - y0);\n\n            if (t <= 1 && t >= 0) {\n              var val = isDimX ? (y - y0) * t + y0 : (x - x0) * t + x0;\n              return isDimX ? [xOrY, val] : [val, xOrY];\n            }\n\n            x0 = x;\n            y0 = y;\n            break;\n\n          case CMD.C:\n            x = data[i++];\n            y = data[i++];\n            x2 = data[i++];\n            y2 = data[i++];\n            x3 = data[i++];\n            y3 = data[i++];\n            var nRoot = isDimX ? cubicRootAt(x0, x, x2, x3, xOrY, roots) : cubicRootAt(y0, y, y2, y3, xOrY, roots);\n\n            if (nRoot > 0) {\n              for (var i_1 = 0; i_1 < nRoot; i_1++) {\n                var t_1 = roots[i_1];\n\n                if (t_1 <= 1 && t_1 >= 0) {\n                  var val = isDimX ? cubicAt(y0, y, y2, y3, t_1) : cubicAt(x0, x, x2, x3, t_1);\n                  return isDimX ? [xOrY, val] : [val, xOrY];\n                }\n              }\n            }\n\n            x0 = x3;\n            y0 = y3;\n            break;\n        }\n      }\n    };\n\n    return ECPolyline;\n  }(Path);\n\n  var ECPolygonShape =\n  /** @class */\n  function (_super) {\n    __extends(ECPolygonShape, _super);\n\n    function ECPolygonShape() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    return ECPolygonShape;\n  }(ECPolylineShape);\n\n  var ECPolygon =\n  /** @class */\n  function (_super) {\n    __extends(ECPolygon, _super);\n\n    function ECPolygon(opts) {\n      var _this = _super.call(this, opts) || this;\n\n      _this.type = 'ec-polygon';\n      return _this;\n    }\n\n    ECPolygon.prototype.getDefaultShape = function () {\n      return new ECPolygonShape();\n    };\n\n    ECPolygon.prototype.buildPath = function (ctx, shape) {\n      var points = shape.points;\n      var stackedOnPoints = shape.stackedOnPoints;\n      var i = 0;\n      var len = points.length / 2;\n      var smoothMonotone = shape.smoothMonotone;\n\n      if (shape.connectNulls) {\n        // Must remove first and last null values avoid draw error in polygon\n        for (; len > 0; len--) {\n          if (!isPointNull$1(points[len * 2 - 2], points[len * 2 - 1])) {\n            break;\n          }\n        }\n\n        for (; i < len; i++) {\n          if (!isPointNull$1(points[i * 2], points[i * 2 + 1])) {\n            break;\n          }\n        }\n      }\n\n      while (i < len) {\n        var k = drawSegment(ctx, points, i, len, len, 1, shape.smooth, smoothMonotone, shape.connectNulls);\n        drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n        i += k + 1;\n        ctx.closePath();\n      }\n    };\n\n    return ECPolygon;\n  }(Path);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function isPointsSame(points1, points2) {\n    if (points1.length !== points2.length) {\n      return;\n    }\n\n    for (var i = 0; i < points1.length; i++) {\n      if (points1[i] !== points2[i]) {\n        return;\n      }\n    }\n\n    return true;\n  }\n\n  function bboxFromPoints(points) {\n    var minX = Infinity;\n    var minY = Infinity;\n    var maxX = -Infinity;\n    var maxY = -Infinity;\n\n    for (var i = 0; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (!isNaN(x)) {\n        minX = Math.min(x, minX);\n        maxX = Math.max(x, maxX);\n      }\n\n      if (!isNaN(y)) {\n        minY = Math.min(y, minY);\n        maxY = Math.max(y, maxY);\n      }\n    }\n\n    return [[minX, minY], [maxX, maxY]];\n  }\n\n  function getBoundingDiff(points1, points2) {\n    var _a = bboxFromPoints(points1),\n        min1 = _a[0],\n        max1 = _a[1];\n\n    var _b = bboxFromPoints(points2),\n        min2 = _b[0],\n        max2 = _b[1]; // Get a max value from each corner of two boundings.\n\n\n    return Math.max(Math.abs(min1[0] - min2[0]), Math.abs(min1[1] - min2[1]), Math.abs(max1[0] - max2[0]), Math.abs(max1[1] - max2[1]));\n  }\n\n  function getSmooth(smooth) {\n    return isNumber(smooth) ? smooth : smooth ? 0.5 : 0;\n  }\n\n  function getStackedOnPoints(coordSys, data, dataCoordInfo) {\n    if (!dataCoordInfo.valueDim) {\n      return [];\n    }\n\n    var len = data.count();\n    var points = createFloat32Array(len * 2);\n\n    for (var idx = 0; idx < len; idx++) {\n      var pt = getStackedOnPoint(dataCoordInfo, coordSys, data, idx);\n      points[idx * 2] = pt[0];\n      points[idx * 2 + 1] = pt[1];\n    }\n\n    return points;\n  }\n\n  function turnPointsIntoStep(points, coordSys, stepTurnAt, connectNulls) {\n    var baseAxis = coordSys.getBaseAxis();\n    var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n    var stepPoints = [];\n    var i = 0;\n    var stepPt = [];\n    var pt = [];\n    var nextPt = [];\n    var filteredPoints = [];\n\n    if (connectNulls) {\n      for (i = 0; i < points.length; i += 2) {\n        if (!isNaN(points[i]) && !isNaN(points[i + 1])) {\n          filteredPoints.push(points[i], points[i + 1]);\n        }\n      }\n\n      points = filteredPoints;\n    }\n\n    for (i = 0; i < points.length - 2; i += 2) {\n      nextPt[0] = points[i + 2];\n      nextPt[1] = points[i + 3];\n      pt[0] = points[i];\n      pt[1] = points[i + 1];\n      stepPoints.push(pt[0], pt[1]);\n\n      switch (stepTurnAt) {\n        case 'end':\n          stepPt[baseIndex] = nextPt[baseIndex];\n          stepPt[1 - baseIndex] = pt[1 - baseIndex];\n          stepPoints.push(stepPt[0], stepPt[1]);\n          break;\n\n        case 'middle':\n          var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n          var stepPt2 = [];\n          stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n          stepPt[1 - baseIndex] = pt[1 - baseIndex];\n          stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n          stepPoints.push(stepPt[0], stepPt[1]);\n          stepPoints.push(stepPt2[0], stepPt2[1]);\n          break;\n\n        default:\n          // default is start\n          stepPt[baseIndex] = pt[baseIndex];\n          stepPt[1 - baseIndex] = nextPt[1 - baseIndex];\n          stepPoints.push(stepPt[0], stepPt[1]);\n      }\n    } // Last points\n\n\n    stepPoints.push(points[i++], points[i++]);\n    return stepPoints;\n  }\n  /**\n   * Clip color stops to edge. Avoid creating too large gradients.\n   * Which may lead to blurry when GPU acceleration is enabled. See #15680\n   *\n   * The stops has been sorted from small to large.\n   */\n\n\n  function clipColorStops(colorStops, maxSize) {\n    var newColorStops = [];\n    var len = colorStops.length; // coord will always < 0 in prevOutOfRangeColorStop.\n\n    var prevOutOfRangeColorStop;\n    var prevInRangeColorStop;\n\n    function lerpStop(stop0, stop1, clippedCoord) {\n      var coord0 = stop0.coord;\n      var p = (clippedCoord - coord0) / (stop1.coord - coord0);\n      var color = lerp$1(p, [stop0.color, stop1.color]);\n      return {\n        coord: clippedCoord,\n        color: color\n      };\n    }\n\n    for (var i = 0; i < len; i++) {\n      var stop_1 = colorStops[i];\n      var coord = stop_1.coord;\n\n      if (coord < 0) {\n        prevOutOfRangeColorStop = stop_1;\n      } else if (coord > maxSize) {\n        if (prevInRangeColorStop) {\n          newColorStops.push(lerpStop(prevInRangeColorStop, stop_1, maxSize));\n        } else if (prevOutOfRangeColorStop) {\n          // If there are two stops and coord range is between these two stops\n          newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0), lerpStop(prevOutOfRangeColorStop, stop_1, maxSize));\n        } // All following stop will be out of range. So just ignore them.\n\n\n        break;\n      } else {\n        if (prevOutOfRangeColorStop) {\n          newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0)); // Reset\n\n          prevOutOfRangeColorStop = null;\n        }\n\n        newColorStops.push(stop_1);\n        prevInRangeColorStop = stop_1;\n      }\n    }\n\n    return newColorStops;\n  }\n\n  function getVisualGradient(data, coordSys, api) {\n    var visualMetaList = data.getVisual('visualMeta');\n\n    if (!visualMetaList || !visualMetaList.length || !data.count()) {\n      // When data.count() is 0, gradient range can not be calculated.\n      return;\n    }\n\n    if (coordSys.type !== 'cartesian2d') {\n      {\n        console.warn('Visual map on line style is only supported on cartesian2d.');\n      }\n      return;\n    }\n\n    var coordDim;\n    var visualMeta;\n\n    for (var i = visualMetaList.length - 1; i >= 0; i--) {\n      var dimInfo = data.getDimensionInfo(visualMetaList[i].dimension);\n      coordDim = dimInfo && dimInfo.coordDim; // Can only be x or y\n\n      if (coordDim === 'x' || coordDim === 'y') {\n        visualMeta = visualMetaList[i];\n        break;\n      }\n    }\n\n    if (!visualMeta) {\n      {\n        console.warn('Visual map on line style only support x or y dimension.');\n      }\n      return;\n    } // If the area to be rendered is bigger than area defined by LinearGradient,\n    // the canvas spec prescribes that the color of the first stop and the last\n    // stop should be used. But if two stops are added at offset 0, in effect\n    // browsers use the color of the second stop to render area outside\n    // LinearGradient. So we can only infinitesimally extend area defined in\n    // LinearGradient to render `outerColors`.\n\n\n    var axis = coordSys.getAxis(coordDim); // dataToCoord mapping may not be linear, but must be monotonic.\n\n    var colorStops = map(visualMeta.stops, function (stop) {\n      // offset will be calculated later.\n      return {\n        coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\n        color: stop.color\n      };\n    });\n    var stopLen = colorStops.length;\n    var outerColors = visualMeta.outerColors.slice();\n\n    if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n      colorStops.reverse();\n      outerColors.reverse();\n    }\n\n    var colorStopsInRange = clipColorStops(colorStops, coordDim === 'x' ? api.getWidth() : api.getHeight());\n    var inRangeStopLen = colorStopsInRange.length;\n\n    if (!inRangeStopLen && stopLen) {\n      // All stops are out of range. All will be the same color.\n      return colorStops[0].coord < 0 ? outerColors[1] ? outerColors[1] : colorStops[stopLen - 1].color : outerColors[0] ? outerColors[0] : colorStops[0].color;\n    }\n\n    var tinyExtent = 10; // Arbitrary value: 10px\n\n    var minCoord = colorStopsInRange[0].coord - tinyExtent;\n    var maxCoord = colorStopsInRange[inRangeStopLen - 1].coord + tinyExtent;\n    var coordSpan = maxCoord - minCoord;\n\n    if (coordSpan < 1e-3) {\n      return 'transparent';\n    }\n\n    each(colorStopsInRange, function (stop) {\n      stop.offset = (stop.coord - minCoord) / coordSpan;\n    });\n    colorStopsInRange.push({\n      // NOTE: inRangeStopLen may still be 0 if stoplen is zero.\n      offset: inRangeStopLen ? colorStopsInRange[inRangeStopLen - 1].offset : 0.5,\n      color: outerColors[1] || 'transparent'\n    });\n    colorStopsInRange.unshift({\n      offset: inRangeStopLen ? colorStopsInRange[0].offset : 0.5,\n      color: outerColors[0] || 'transparent'\n    });\n    var gradient = new LinearGradient(0, 0, 0, 0, colorStopsInRange, true);\n    gradient[coordDim] = minCoord;\n    gradient[coordDim + '2'] = maxCoord;\n    return gradient;\n  }\n\n  function getIsIgnoreFunc(seriesModel, data, coordSys) {\n    var showAllSymbol = seriesModel.get('showAllSymbol');\n    var isAuto = showAllSymbol === 'auto';\n\n    if (showAllSymbol && !isAuto) {\n      return;\n    }\n\n    var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n    if (!categoryAxis) {\n      return;\n    } // Note that category label interval strategy might bring some weird effect\n    // in some scenario: users may wonder why some of the symbols are not\n    // displayed. So we show all symbols as possible as we can.\n\n\n    if (isAuto // Simplify the logic, do not determine label overlap here.\n    && canShowAllSymbolForCategory(categoryAxis, data)) {\n      return;\n    } // Otherwise follow the label interval strategy on category axis.\n\n\n    var categoryDataDim = data.mapDimension(categoryAxis.dim);\n    var labelMap = {};\n    each(categoryAxis.getViewLabels(), function (labelItem) {\n      var ordinalNumber = categoryAxis.scale.getRawOrdinalNumber(labelItem.tickValue);\n      labelMap[ordinalNumber] = 1;\n    });\n    return function (dataIndex) {\n      return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\n    };\n  }\n\n  function canShowAllSymbolForCategory(categoryAxis, data) {\n    // In mose cases, line is monotonous on category axis, and the label size\n    // is close with each other. So we check the symbol size and some of the\n    // label size alone with the category axis to estimate whether all symbol\n    // can be shown without overlap.\n    var axisExtent = categoryAxis.getExtent();\n    var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\n    isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\n    // Sampling some points, max 5.\n\n    var dataLen = data.count();\n    var step = Math.max(1, Math.round(dataLen / 5));\n\n    for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\n      if (Symbol$1.getSymbolSize(data, dataIndex // Only for cartesian, where `isHorizontal` exists.\n      )[categoryAxis.isHorizontal() ? 1 : 0] // Empirical number\n      * 1.5 > availSize) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function isPointNull(x, y) {\n    return isNaN(x) || isNaN(y);\n  }\n\n  function getLastIndexNotNull(points) {\n    var len = points.length / 2;\n\n    for (; len > 0; len--) {\n      if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n        break;\n      }\n    }\n\n    return len - 1;\n  }\n\n  function getPointAtIndex(points, idx) {\n    return [points[idx * 2], points[idx * 2 + 1]];\n  }\n\n  function getIndexRange(points, xOrY, dim) {\n    var len = points.length / 2;\n    var dimIdx = dim === 'x' ? 0 : 1;\n    var a;\n    var b;\n    var prevIndex = 0;\n    var nextIndex = -1;\n\n    for (var i = 0; i < len; i++) {\n      b = points[i * 2 + dimIdx];\n\n      if (isNaN(b) || isNaN(points[i * 2 + 1 - dimIdx])) {\n        continue;\n      }\n\n      if (i === 0) {\n        a = b;\n        continue;\n      }\n\n      if (a <= xOrY && b >= xOrY || a >= xOrY && b <= xOrY) {\n        nextIndex = i;\n        break;\n      }\n\n      prevIndex = i;\n      a = b;\n    }\n\n    return {\n      range: [prevIndex, nextIndex],\n      t: (xOrY - a) / (b - a)\n    };\n  }\n\n  function anyStateShowEndLabel(seriesModel) {\n    if (seriesModel.get(['endLabel', 'show'])) {\n      return true;\n    }\n\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      if (seriesModel.get([SPECIAL_STATES[i], 'endLabel', 'show'])) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function createLineClipPath(lineView, coordSys, hasAnimation, seriesModel) {\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      var endLabelModel_1 = seriesModel.getModel('endLabel');\n      var valueAnimation_1 = endLabelModel_1.get('valueAnimation');\n      var data_1 = seriesModel.getData();\n      var labelAnimationRecord_1 = {\n        lastFrameIndex: 0\n      };\n      var during = anyStateShowEndLabel(seriesModel) ? function (percent, clipRect) {\n        lineView._endLabelOnDuring(percent, clipRect, data_1, labelAnimationRecord_1, valueAnimation_1, endLabelModel_1, coordSys);\n      } : null;\n      var isHorizontal = coordSys.getBaseAxis().isHorizontal();\n      var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel, function () {\n        var endLabel = lineView._endLabel;\n\n        if (endLabel && hasAnimation) {\n          if (labelAnimationRecord_1.originalX != null) {\n            endLabel.attr({\n              x: labelAnimationRecord_1.originalX,\n              y: labelAnimationRecord_1.originalY\n            });\n          }\n        }\n      }, during); // Expand clip shape to avoid clipping when line value exceeds axis\n\n      if (!seriesModel.get('clip', true)) {\n        var rectShape = clipPath.shape;\n        var expandSize = Math.max(rectShape.width, rectShape.height);\n\n        if (isHorizontal) {\n          rectShape.y -= expandSize;\n          rectShape.height += expandSize * 2;\n        } else {\n          rectShape.x -= expandSize;\n          rectShape.width += expandSize * 2;\n        }\n      } // Set to the final frame. To make sure label layout is right.\n\n\n      if (during) {\n        during(1, clipPath);\n      }\n\n      return clipPath;\n    } else {\n      {\n        if (seriesModel.get(['endLabel', 'show'])) {\n          console.warn('endLabel is not supported for lines in polar systems.');\n        }\n      }\n      return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n    }\n  }\n\n  function getEndLabelStateSpecified(endLabelModel, coordSys) {\n    var baseAxis = coordSys.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var isBaseInversed = baseAxis.inverse;\n    var align = isHorizontal ? isBaseInversed ? 'right' : 'left' : 'center';\n    var verticalAlign = isHorizontal ? 'middle' : isBaseInversed ? 'top' : 'bottom';\n    return {\n      normal: {\n        align: endLabelModel.get('align') || align,\n        verticalAlign: endLabelModel.get('verticalAlign') || verticalAlign\n      }\n    };\n  }\n\n  var LineView =\n  /** @class */\n  function (_super) {\n    __extends(LineView, _super);\n\n    function LineView() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    LineView.prototype.init = function () {\n      var lineGroup = new Group();\n      var symbolDraw = new SymbolDraw();\n      this.group.add(symbolDraw.group);\n      this._symbolDraw = symbolDraw;\n      this._lineGroup = lineGroup;\n    };\n\n    LineView.prototype.render = function (seriesModel, ecModel, api) {\n      var _this = this;\n\n      var coordSys = seriesModel.coordinateSystem;\n      var group = this.group;\n      var data = seriesModel.getData();\n      var lineStyleModel = seriesModel.getModel('lineStyle');\n      var areaStyleModel = seriesModel.getModel('areaStyle');\n      var points = data.getLayout('points') || [];\n      var isCoordSysPolar = coordSys.type === 'polar';\n      var prevCoordSys = this._coordSys;\n      var symbolDraw = this._symbolDraw;\n      var polyline = this._polyline;\n      var polygon = this._polygon;\n      var lineGroup = this._lineGroup;\n      var hasAnimation = seriesModel.get('animation');\n      var isAreaChart = !areaStyleModel.isEmpty();\n      var valueOrigin = areaStyleModel.get('origin');\n      var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\n      var stackedOnPoints = isAreaChart && getStackedOnPoints(coordSys, data, dataCoordInfo);\n      var showSymbol = seriesModel.get('showSymbol');\n      var connectNulls = seriesModel.get('connectNulls');\n      var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys); // Remove temporary symbols\n\n      var oldData = this._data;\n      oldData && oldData.eachItemGraphicEl(function (el, idx) {\n        if (el.__temp) {\n          group.remove(el);\n          oldData.setItemGraphicEl(idx, null);\n        }\n      }); // Remove previous created symbols if showSymbol changed to false\n\n      if (!showSymbol) {\n        symbolDraw.remove();\n      }\n\n      group.add(lineGroup); // FIXME step not support polar\n\n      var step = !isCoordSysPolar ? seriesModel.get('step') : false;\n      var clipShapeForSymbol;\n\n      if (coordSys && coordSys.getArea && seriesModel.get('clip', true)) {\n        clipShapeForSymbol = coordSys.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n        // See #7913 and `test/dataZoom-clip.html`.\n\n        if (clipShapeForSymbol.width != null) {\n          clipShapeForSymbol.x -= 0.1;\n          clipShapeForSymbol.y -= 0.1;\n          clipShapeForSymbol.width += 0.2;\n          clipShapeForSymbol.height += 0.2;\n        } else if (clipShapeForSymbol.r0) {\n          clipShapeForSymbol.r0 -= 0.5;\n          clipShapeForSymbol.r += 0.5;\n        }\n      }\n\n      this._clipShapeForSymbol = clipShapeForSymbol;\n      var visualColor = getVisualGradient(data, coordSys, api) || data.getVisual('style')[data.getVisual('drawType')]; // Initialization animation or coordinate system changed\n\n      if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n        showSymbol && symbolDraw.updateData(data, {\n          isIgnore: isIgnoreFunc,\n          clipShape: clipShapeForSymbol,\n          disableAnimation: true,\n          getSymbolPoint: function (idx) {\n            return [points[idx * 2], points[idx * 2 + 1]];\n          }\n        });\n        hasAnimation && this._initSymbolLabelAnimation(data, coordSys, clipShapeForSymbol);\n\n        if (step) {\n          // TODO If stacked series is not step\n          points = turnPointsIntoStep(points, coordSys, step, connectNulls);\n\n          if (stackedOnPoints) {\n            stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step, connectNulls);\n          }\n        }\n\n        polyline = this._newPolyline(points);\n\n        if (isAreaChart) {\n          polygon = this._newPolygon(points, stackedOnPoints);\n        } // If areaStyle is removed\n        else if (polygon) {\n            lineGroup.remove(polygon);\n            polygon = this._polygon = null;\n          } // NOTE: Must update _endLabel before setClipPath.\n\n\n        if (!isCoordSysPolar) {\n          this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n        }\n\n        lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n      } else {\n        if (isAreaChart && !polygon) {\n          // If areaStyle is added\n          polygon = this._newPolygon(points, stackedOnPoints);\n        } else if (polygon && !isAreaChart) {\n          // If areaStyle is removed\n          lineGroup.remove(polygon);\n          polygon = this._polygon = null;\n        } // NOTE: Must update _endLabel before setClipPath.\n\n\n        if (!isCoordSysPolar) {\n          this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n        } // Update clipPath\n\n\n        var oldClipPath = lineGroup.getClipPath();\n\n        if (oldClipPath) {\n          var newClipPath = createLineClipPath(this, coordSys, false, seriesModel);\n          initProps(oldClipPath, {\n            shape: newClipPath.shape\n          }, seriesModel);\n        } else {\n          lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n        } // Always update, or it is wrong in the case turning on legend\n        // because points are not changed\n\n\n        showSymbol && symbolDraw.updateData(data, {\n          isIgnore: isIgnoreFunc,\n          clipShape: clipShapeForSymbol,\n          disableAnimation: true,\n          getSymbolPoint: function (idx) {\n            return [points[idx * 2], points[idx * 2 + 1]];\n          }\n        }); // In the case data zoom triggerred refreshing frequently\n        // Data may not change if line has a category axis. So it should animate nothing\n\n        if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n          if (hasAnimation) {\n            this._doUpdateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin, connectNulls);\n          } else {\n            // Not do it in update with animation\n            if (step) {\n              // TODO If stacked series is not step\n              points = turnPointsIntoStep(points, coordSys, step, connectNulls);\n\n              if (stackedOnPoints) {\n                stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step, connectNulls);\n              }\n            }\n\n            polyline.setShape({\n              points: points\n            });\n            polygon && polygon.setShape({\n              points: points,\n              stackedOnPoints: stackedOnPoints\n            });\n          }\n        }\n      }\n\n      var emphasisModel = seriesModel.getModel('emphasis');\n      var focus = emphasisModel.get('focus');\n      var blurScope = emphasisModel.get('blurScope');\n      var emphasisDisabled = emphasisModel.get('disabled');\n      polyline.useStyle(defaults( // Use color in lineStyle first\n      lineStyleModel.getLineStyle(), {\n        fill: 'none',\n        stroke: visualColor,\n        lineJoin: 'bevel'\n      }));\n      setStatesStylesFromModel(polyline, seriesModel, 'lineStyle');\n\n      if (polyline.style.lineWidth > 0 && seriesModel.get(['emphasis', 'lineStyle', 'width']) === 'bolder') {\n        var emphasisLineStyle = polyline.getState('emphasis').style;\n        emphasisLineStyle.lineWidth = +polyline.style.lineWidth + 1;\n      } // Needs seriesIndex for focus\n\n\n      getECData(polyline).seriesIndex = seriesModel.seriesIndex;\n      toggleHoverEmphasis(polyline, focus, blurScope, emphasisDisabled);\n      var smooth = getSmooth(seriesModel.get('smooth'));\n      var smoothMonotone = seriesModel.get('smoothMonotone');\n      polyline.setShape({\n        smooth: smooth,\n        smoothMonotone: smoothMonotone,\n        connectNulls: connectNulls\n      });\n\n      if (polygon) {\n        var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n        var stackedOnSmooth = 0;\n        polygon.useStyle(defaults(areaStyleModel.getAreaStyle(), {\n          fill: visualColor,\n          opacity: 0.7,\n          lineJoin: 'bevel',\n          decal: data.getVisual('style').decal\n        }));\n\n        if (stackedOnSeries) {\n          stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n        }\n\n        polygon.setShape({\n          smooth: smooth,\n          stackedOnSmooth: stackedOnSmooth,\n          smoothMonotone: smoothMonotone,\n          connectNulls: connectNulls\n        });\n        setStatesStylesFromModel(polygon, seriesModel, 'areaStyle'); // Needs seriesIndex for focus\n\n        getECData(polygon).seriesIndex = seriesModel.seriesIndex;\n        toggleHoverEmphasis(polygon, focus, blurScope, emphasisDisabled);\n      }\n\n      var changePolyState = function (toState) {\n        _this._changePolyState(toState);\n      };\n\n      data.eachItemGraphicEl(function (el) {\n        // Switch polyline / polygon state if element changed its state.\n        el && (el.onHoverStateChange = changePolyState);\n      });\n      this._polyline.onHoverStateChange = changePolyState;\n      this._data = data; // Save the coordinate system for transition animation when data changed\n\n      this._coordSys = coordSys;\n      this._stackedOnPoints = stackedOnPoints;\n      this._points = points;\n      this._step = step;\n      this._valueOrigin = valueOrigin;\n\n      if (seriesModel.get('triggerLineEvent')) {\n        this.packEventData(seriesModel, polyline);\n        polygon && this.packEventData(seriesModel, polygon);\n      }\n    };\n\n    LineView.prototype.packEventData = function (seriesModel, el) {\n      getECData(el).eventData = {\n        componentType: 'series',\n        componentSubType: 'line',\n        componentIndex: seriesModel.componentIndex,\n        seriesIndex: seriesModel.seriesIndex,\n        seriesName: seriesModel.name,\n        seriesType: 'line'\n      };\n    };\n\n    LineView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n      var data = seriesModel.getData();\n      var dataIndex = queryDataIndex(data, payload);\n\n      this._changePolyState('emphasis');\n\n      if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n        var points = data.getLayout('points');\n        var symbol = data.getItemGraphicEl(dataIndex);\n\n        if (!symbol) {\n          // Create a temporary symbol if it is not exists\n          var x = points[dataIndex * 2];\n          var y = points[dataIndex * 2 + 1];\n\n          if (isNaN(x) || isNaN(y)) {\n            // Null data\n            return;\n          } // fix #11360: should't draw symbol outside clipShapeForSymbol\n\n\n          if (this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(x, y)) {\n            return;\n          }\n\n          var zlevel = seriesModel.get('zlevel');\n          var z = seriesModel.get('z');\n          symbol = new Symbol$1(data, dataIndex);\n          symbol.x = x;\n          symbol.y = y;\n          symbol.setZ(zlevel, z); // ensure label text of the temporary symbol is in front of line and area polygon\n\n          var symbolLabel = symbol.getSymbolPath().getTextContent();\n\n          if (symbolLabel) {\n            symbolLabel.zlevel = zlevel;\n            symbolLabel.z = z;\n            symbolLabel.z2 = this._polyline.z2 + 1;\n          }\n\n          symbol.__temp = true;\n          data.setItemGraphicEl(dataIndex, symbol); // Stop scale animation\n\n          symbol.stopSymbolAnimation(true);\n          this.group.add(symbol);\n        }\n\n        symbol.highlight();\n      } else {\n        // Highlight whole series\n        ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n      }\n    };\n\n    LineView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n      var data = seriesModel.getData();\n      var dataIndex = queryDataIndex(data, payload);\n\n      this._changePolyState('normal');\n\n      if (dataIndex != null && dataIndex >= 0) {\n        var symbol = data.getItemGraphicEl(dataIndex);\n\n        if (symbol) {\n          if (symbol.__temp) {\n            data.setItemGraphicEl(dataIndex, null);\n            this.group.remove(symbol);\n          } else {\n            symbol.downplay();\n          }\n        }\n      } else {\n        // FIXME\n        // can not downplay completely.\n        // Downplay whole series\n        ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n      }\n    };\n\n    LineView.prototype._changePolyState = function (toState) {\n      var polygon = this._polygon;\n      setStatesFlag(this._polyline, toState);\n      polygon && setStatesFlag(polygon, toState);\n    };\n\n    LineView.prototype._newPolyline = function (points) {\n      var polyline = this._polyline; // Remove previous created polyline\n\n      if (polyline) {\n        this._lineGroup.remove(polyline);\n      }\n\n      polyline = new ECPolyline({\n        shape: {\n          points: points\n        },\n        segmentIgnoreThreshold: 2,\n        z2: 10\n      });\n\n      this._lineGroup.add(polyline);\n\n      this._polyline = polyline;\n      return polyline;\n    };\n\n    LineView.prototype._newPolygon = function (points, stackedOnPoints) {\n      var polygon = this._polygon; // Remove previous created polygon\n\n      if (polygon) {\n        this._lineGroup.remove(polygon);\n      }\n\n      polygon = new ECPolygon({\n        shape: {\n          points: points,\n          stackedOnPoints: stackedOnPoints\n        },\n        segmentIgnoreThreshold: 2\n      });\n\n      this._lineGroup.add(polygon);\n\n      this._polygon = polygon;\n      return polygon;\n    };\n\n    LineView.prototype._initSymbolLabelAnimation = function (data, coordSys, clipShape) {\n      var isHorizontalOrRadial;\n      var isCoordSysPolar;\n      var baseAxis = coordSys.getBaseAxis();\n      var isAxisInverse = baseAxis.inverse;\n\n      if (coordSys.type === 'cartesian2d') {\n        isHorizontalOrRadial = baseAxis.isHorizontal();\n        isCoordSysPolar = false;\n      } else if (coordSys.type === 'polar') {\n        isHorizontalOrRadial = baseAxis.dim === 'angle';\n        isCoordSysPolar = true;\n      }\n\n      var seriesModel = data.hostModel;\n      var seriesDuration = seriesModel.get('animationDuration');\n\n      if (isFunction(seriesDuration)) {\n        seriesDuration = seriesDuration(null);\n      }\n\n      var seriesDalay = seriesModel.get('animationDelay') || 0;\n      var seriesDalayValue = isFunction(seriesDalay) ? seriesDalay(null) : seriesDalay;\n      data.eachItemGraphicEl(function (symbol, idx) {\n        var el = symbol;\n\n        if (el) {\n          var point = [symbol.x, symbol.y];\n          var start = void 0;\n          var end = void 0;\n          var current = void 0;\n\n          if (clipShape) {\n            if (isCoordSysPolar) {\n              var polarClip = clipShape;\n              var coord = coordSys.pointToCoord(point);\n\n              if (isHorizontalOrRadial) {\n                start = polarClip.startAngle;\n                end = polarClip.endAngle;\n                current = -coord[1] / 180 * Math.PI;\n              } else {\n                start = polarClip.r0;\n                end = polarClip.r;\n                current = coord[0];\n              }\n            } else {\n              var gridClip = clipShape;\n\n              if (isHorizontalOrRadial) {\n                start = gridClip.x;\n                end = gridClip.x + gridClip.width;\n                current = symbol.x;\n              } else {\n                start = gridClip.y + gridClip.height;\n                end = gridClip.y;\n                current = symbol.y;\n              }\n            }\n          }\n\n          var ratio = end === start ? 0 : (current - start) / (end - start);\n\n          if (isAxisInverse) {\n            ratio = 1 - ratio;\n          }\n\n          var delay = isFunction(seriesDalay) ? seriesDalay(idx) : seriesDuration * ratio + seriesDalayValue;\n          var symbolPath = el.getSymbolPath();\n          var text = symbolPath.getTextContent();\n          el.attr({\n            scaleX: 0,\n            scaleY: 0\n          });\n          el.animateTo({\n            scaleX: 1,\n            scaleY: 1\n          }, {\n            duration: 200,\n            setToFinal: true,\n            delay: delay\n          });\n\n          if (text) {\n            text.animateFrom({\n              style: {\n                opacity: 0\n              }\n            }, {\n              duration: 300,\n              delay: delay\n            });\n          }\n\n          symbolPath.disableLabelAnimation = true;\n        }\n      });\n    };\n\n    LineView.prototype._initOrUpdateEndLabel = function (seriesModel, coordSys, inheritColor) {\n      var endLabelModel = seriesModel.getModel('endLabel');\n\n      if (anyStateShowEndLabel(seriesModel)) {\n        var data_2 = seriesModel.getData();\n        var polyline = this._polyline; // series may be filtered.\n\n        var points = data_2.getLayout('points');\n\n        if (!points) {\n          polyline.removeTextContent();\n          this._endLabel = null;\n          return;\n        }\n\n        var endLabel = this._endLabel;\n\n        if (!endLabel) {\n          endLabel = this._endLabel = new ZRText({\n            z2: 200 // should be higher than item symbol\n\n          });\n          endLabel.ignoreClip = true;\n          polyline.setTextContent(this._endLabel);\n          polyline.disableLabelAnimation = true;\n        } // Find last non-NaN data to display data\n\n\n        var dataIndex = getLastIndexNotNull(points);\n\n        if (dataIndex >= 0) {\n          setLabelStyle(polyline, getLabelStatesModels(seriesModel, 'endLabel'), {\n            inheritColor: inheritColor,\n            labelFetcher: seriesModel,\n            labelDataIndex: dataIndex,\n            defaultText: function (dataIndex, opt, interpolatedValue) {\n              return interpolatedValue != null ? getDefaultInterpolatedLabel(data_2, interpolatedValue) : getDefaultLabel(data_2, dataIndex);\n            },\n            enableTextSetter: true\n          }, getEndLabelStateSpecified(endLabelModel, coordSys));\n          polyline.textConfig.position = null;\n        }\n      } else if (this._endLabel) {\n        this._polyline.removeTextContent();\n\n        this._endLabel = null;\n      }\n    };\n\n    LineView.prototype._endLabelOnDuring = function (percent, clipRect, data, animationRecord, valueAnimation, endLabelModel, coordSys) {\n      var endLabel = this._endLabel;\n      var polyline = this._polyline;\n\n      if (endLabel) {\n        // NOTE: Don't remove percent < 1. percent === 1 means the first frame during render.\n        // The label is not prepared at this time.\n        if (percent < 1 && animationRecord.originalX == null) {\n          animationRecord.originalX = endLabel.x;\n          animationRecord.originalY = endLabel.y;\n        }\n\n        var points = data.getLayout('points');\n        var seriesModel = data.hostModel;\n        var connectNulls = seriesModel.get('connectNulls');\n        var precision = endLabelModel.get('precision');\n        var distance = endLabelModel.get('distance') || 0;\n        var baseAxis = coordSys.getBaseAxis();\n        var isHorizontal = baseAxis.isHorizontal();\n        var isBaseInversed = baseAxis.inverse;\n        var clipShape = clipRect.shape;\n        var xOrY = isBaseInversed ? isHorizontal ? clipShape.x : clipShape.y + clipShape.height : isHorizontal ? clipShape.x + clipShape.width : clipShape.y;\n        var distanceX = (isHorizontal ? distance : 0) * (isBaseInversed ? -1 : 1);\n        var distanceY = (isHorizontal ? 0 : -distance) * (isBaseInversed ? -1 : 1);\n        var dim = isHorizontal ? 'x' : 'y';\n        var dataIndexRange = getIndexRange(points, xOrY, dim);\n        var indices = dataIndexRange.range;\n        var diff = indices[1] - indices[0];\n        var value = void 0;\n\n        if (diff >= 1) {\n          // diff > 1 && connectNulls, which is on the null data.\n          if (diff > 1 && !connectNulls) {\n            var pt = getPointAtIndex(points, indices[0]);\n            endLabel.attr({\n              x: pt[0] + distanceX,\n              y: pt[1] + distanceY\n            });\n            valueAnimation && (value = seriesModel.getRawValue(indices[0]));\n          } else {\n            var pt = polyline.getPointOn(xOrY, dim);\n            pt && endLabel.attr({\n              x: pt[0] + distanceX,\n              y: pt[1] + distanceY\n            });\n            var startValue = seriesModel.getRawValue(indices[0]);\n            var endValue = seriesModel.getRawValue(indices[1]);\n            valueAnimation && (value = interpolateRawValues(data, precision, startValue, endValue, dataIndexRange.t));\n          }\n\n          animationRecord.lastFrameIndex = indices[0];\n        } else {\n          // If diff <= 0, which is the range is not found(Include NaN)\n          // Choose the first point or last point.\n          var idx = percent === 1 || animationRecord.lastFrameIndex > 0 ? indices[0] : 0;\n          var pt = getPointAtIndex(points, idx);\n          valueAnimation && (value = seriesModel.getRawValue(idx));\n          endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n        }\n\n        if (valueAnimation) {\n          labelInner(endLabel).setLabelText(value);\n        }\n      }\n    };\n    /**\n     * @private\n     */\n    // FIXME Two value axis\n\n\n    LineView.prototype._doUpdateAnimation = function (data, stackedOnPoints, coordSys, api, step, valueOrigin, connectNulls) {\n      var polyline = this._polyline;\n      var polygon = this._polygon;\n      var seriesModel = data.hostModel;\n      var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\n      var current = diff.current;\n      var stackedOnCurrent = diff.stackedOnCurrent;\n      var next = diff.next;\n      var stackedOnNext = diff.stackedOnNext;\n\n      if (step) {\n        // TODO If stacked series is not step\n        current = turnPointsIntoStep(diff.current, coordSys, step, connectNulls);\n        stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step, connectNulls);\n        next = turnPointsIntoStep(diff.next, coordSys, step, connectNulls);\n        stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step, connectNulls);\n      } // Don't apply animation if diff is large.\n      // For better result and avoid memory explosion problems like\n      // https://github.com/apache/incubator-echarts/issues/12229\n\n\n      if (getBoundingDiff(current, next) > 3000 || polygon && getBoundingDiff(stackedOnCurrent, stackedOnNext) > 3000) {\n        polyline.stopAnimation();\n        polyline.setShape({\n          points: next\n        });\n\n        if (polygon) {\n          polygon.stopAnimation();\n          polygon.setShape({\n            points: next,\n            stackedOnPoints: stackedOnNext\n          });\n        }\n\n        return;\n      }\n\n      polyline.shape.__points = diff.current;\n      polyline.shape.points = current;\n      var target = {\n        shape: {\n          points: next\n        }\n      }; // Also animate the original points.\n      // If points reference is changed when turning into step line.\n\n      if (diff.current !== current) {\n        target.shape.__points = diff.next;\n      } // Stop previous animation.\n\n\n      polyline.stopAnimation();\n      updateProps(polyline, target, seriesModel);\n\n      if (polygon) {\n        polygon.setShape({\n          // Reuse the points with polyline.\n          points: current,\n          stackedOnPoints: stackedOnCurrent\n        });\n        polygon.stopAnimation();\n        updateProps(polygon, {\n          shape: {\n            stackedOnPoints: stackedOnNext\n          }\n        }, seriesModel); // If use attr directly in updateProps.\n\n        if (polyline.shape.points !== polygon.shape.points) {\n          polygon.shape.points = polyline.shape.points;\n        }\n      }\n\n      var updatedDataInfo = [];\n      var diffStatus = diff.status;\n\n      for (var i = 0; i < diffStatus.length; i++) {\n        var cmd = diffStatus[i].cmd;\n\n        if (cmd === '=') {\n          var el = data.getItemGraphicEl(diffStatus[i].idx1);\n\n          if (el) {\n            updatedDataInfo.push({\n              el: el,\n              ptIdx: i // Index of points\n\n            });\n          }\n        }\n      }\n\n      if (polyline.animators && polyline.animators.length) {\n        polyline.animators[0].during(function () {\n          polygon && polygon.dirtyShape();\n          var points = polyline.shape.__points;\n\n          for (var i = 0; i < updatedDataInfo.length; i++) {\n            var el = updatedDataInfo[i].el;\n            var offset = updatedDataInfo[i].ptIdx * 2;\n            el.x = points[offset];\n            el.y = points[offset + 1];\n            el.markRedraw();\n          }\n        });\n      }\n    };\n\n    LineView.prototype.remove = function (ecModel) {\n      var group = this.group;\n      var oldData = this._data;\n\n      this._lineGroup.removeAll();\n\n      this._symbolDraw.remove(true); // Remove temporary created elements when highlighting\n\n\n      oldData && oldData.eachItemGraphicEl(function (el, idx) {\n        if (el.__temp) {\n          group.remove(el);\n          oldData.setItemGraphicEl(idx, null);\n        }\n      });\n      this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._endLabel = this._data = null;\n    };\n\n    LineView.type = 'line';\n    return LineView;\n  }(ChartView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function pointsLayout(seriesType, forceStoreInTypedArray) {\n    return {\n      seriesType: seriesType,\n      plan: createRenderPlanner(),\n      reset: function (seriesModel) {\n        var data = seriesModel.getData();\n        var coordSys = seriesModel.coordinateSystem;\n        var pipelineContext = seriesModel.pipelineContext;\n        var useTypedArray = forceStoreInTypedArray || pipelineContext.large;\n\n        if (!coordSys) {\n          return;\n        }\n\n        var dims = map(coordSys.dimensions, function (dim) {\n          return data.mapDimension(dim);\n        }).slice(0, 2);\n        var dimLen = dims.length;\n        var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n        if (isDimensionStacked(data, dims[0])) {\n          dims[0] = stackResultDim;\n        }\n\n        if (isDimensionStacked(data, dims[1])) {\n          dims[1] = stackResultDim;\n        }\n\n        var store = data.getStore();\n        var dimIdx0 = data.getDimensionIndex(dims[0]);\n        var dimIdx1 = data.getDimensionIndex(dims[1]);\n        return dimLen && {\n          progress: function (params, data) {\n            var segCount = params.end - params.start;\n            var points = useTypedArray && createFloat32Array(segCount * dimLen);\n            var tmpIn = [];\n            var tmpOut = [];\n\n            for (var i = params.start, offset = 0; i < params.end; i++) {\n              var point = void 0;\n\n              if (dimLen === 1) {\n                var x = store.get(dimIdx0, i); // NOTE: Make sure the second parameter is null to use default strategy.\n\n                point = coordSys.dataToPoint(x, null, tmpOut);\n              } else {\n                tmpIn[0] = store.get(dimIdx0, i);\n                tmpIn[1] = store.get(dimIdx1, i); // Let coordinate system to handle the NaN data.\n\n                point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n              }\n\n              if (useTypedArray) {\n                points[offset++] = point[0];\n                points[offset++] = point[1];\n              } else {\n                data.setItemLayout(i, point.slice());\n              }\n            }\n\n            useTypedArray && data.setLayout('points', points);\n          }\n        };\n      }\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$3(registers) {\n    registers.registerChartView(LineView);\n    registers.registerSeriesModel(LineSeriesModel);\n    registers.registerLayout(pointsLayout('line', true));\n    registers.registerVisual({\n      seriesType: 'line',\n      reset: function (seriesModel) {\n        var data = seriesModel.getData(); // Visual coding for legend\n\n        var lineStyle = seriesModel.getModel('lineStyle').getLineStyle();\n\n        if (lineStyle && !lineStyle.stroke) {\n          // Fill in visual should be palette color if\n          // has color callback\n          lineStyle.stroke = data.getVisual('style').fill;\n        }\n\n        data.setVisual('legendLineStyle', lineStyle);\n      }\n    }); // Down sample after filter\n\n    registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  use(install$3);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var PI2$7 = Math.PI * 2;\n  var RADIAN = Math.PI / 180;\n\n  function getViewRect(seriesModel, api) {\n    return getLayoutRect(seriesModel.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  }\n\n  function getBasicPieLayout(seriesModel, api) {\n    var viewRect = getViewRect(seriesModel, api);\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = parsePercent$1(viewRect.width, api.getWidth());\n    var height = parsePercent$1(viewRect.height, api.getHeight());\n    var size = Math.min(width, height);\n    var cx = parsePercent$1(center[0], width) + viewRect.x;\n    var cy = parsePercent$1(center[1], height) + viewRect.y;\n    var r0 = parsePercent$1(radius[0], size / 2);\n    var r = parsePercent$1(radius[1], size / 2);\n    return {\n      cx: cx,\n      cy: cy,\n      r0: r0,\n      r: r\n    };\n  }\n\n  function pieLayout(seriesType, ecModel, api) {\n    ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n      var data = seriesModel.getData();\n      var valueDim = data.mapDimension('value');\n      var viewRect = getViewRect(seriesModel, api);\n\n      var _a = getBasicPieLayout(seriesModel, api),\n          cx = _a.cx,\n          cy = _a.cy,\n          r = _a.r,\n          r0 = _a.r0;\n\n      var startAngle = -seriesModel.get('startAngle') * RADIAN;\n      var minAngle = seriesModel.get('minAngle') * RADIAN;\n      var validDataCount = 0;\n      data.each(valueDim, function (value) {\n        !isNaN(value) && validDataCount++;\n      });\n      var sum = data.getSum(valueDim); // Sum may be 0\n\n      var unitRadian = Math.PI / (sum || validDataCount) * 2;\n      var clockwise = seriesModel.get('clockwise');\n      var roseType = seriesModel.get('roseType');\n      var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // [0...max]\n\n      var extent = data.getDataExtent(valueDim);\n      extent[0] = 0; // In the case some sector angle is smaller than minAngle\n\n      var restAngle = PI2$7;\n      var valueSumLargerThanMinAngle = 0;\n      var currentAngle = startAngle;\n      var dir = clockwise ? 1 : -1;\n      data.setLayout({\n        viewRect: viewRect,\n        r: r\n      });\n      data.each(valueDim, function (value, idx) {\n        var angle;\n\n        if (isNaN(value)) {\n          data.setItemLayout(idx, {\n            angle: NaN,\n            startAngle: NaN,\n            endAngle: NaN,\n            clockwise: clockwise,\n            cx: cx,\n            cy: cy,\n            r0: r0,\n            r: roseType ? NaN : r\n          });\n          return;\n        } // FIXME 兼容 2.0 但是 roseType 是 area 的时候才是这样？\n\n\n        if (roseType !== 'area') {\n          angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n        } else {\n          angle = PI2$7 / validDataCount;\n        }\n\n        if (angle < minAngle) {\n          angle = minAngle;\n          restAngle -= minAngle;\n        } else {\n          valueSumLargerThanMinAngle += value;\n        }\n\n        var endAngle = currentAngle + dir * angle;\n        data.setItemLayout(idx, {\n          angle: angle,\n          startAngle: currentAngle,\n          endAngle: endAngle,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? linearMap(value, extent, [r0, r]) : r\n        });\n        currentAngle = endAngle;\n      }); // Some sector is constrained by minAngle\n      // Rest sectors needs recalculate angle\n\n      if (restAngle < PI2$7 && validDataCount) {\n        // Average the angle if rest angle is not enough after all angles is\n        // Constrained by minAngle\n        if (restAngle <= 1e-3) {\n          var angle_1 = PI2$7 / validDataCount;\n          data.each(valueDim, function (value, idx) {\n            if (!isNaN(value)) {\n              var layout_1 = data.getItemLayout(idx);\n              layout_1.angle = angle_1;\n              layout_1.startAngle = startAngle + dir * idx * angle_1;\n              layout_1.endAngle = startAngle + dir * (idx + 1) * angle_1;\n            }\n          });\n        } else {\n          unitRadian = restAngle / valueSumLargerThanMinAngle;\n          currentAngle = startAngle;\n          data.each(valueDim, function (value, idx) {\n            if (!isNaN(value)) {\n              var layout_2 = data.getItemLayout(idx);\n              var angle = layout_2.angle === minAngle ? minAngle : value * unitRadian;\n              layout_2.startAngle = currentAngle;\n              layout_2.endAngle = currentAngle + dir * angle;\n              currentAngle += dir * angle;\n            }\n          });\n        }\n      }\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function dataFilter(seriesType) {\n    return {\n      seriesType: seriesType,\n      reset: function (seriesModel, ecModel) {\n        var legendModels = ecModel.findComponents({\n          mainType: 'legend'\n        });\n\n        if (!legendModels || !legendModels.length) {\n          return;\n        }\n\n        var data = seriesModel.getData();\n        data.filterSelf(function (idx) {\n          var name = data.getName(idx); // If in any legend component the status is not selected.\n\n          for (var i = 0; i < legendModels.length; i++) {\n            // @ts-ignore FIXME: LegendModel\n            if (!legendModels[i].isSelected(name)) {\n              return false;\n            }\n          }\n\n          return true;\n        });\n      }\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // FIXME emphasis label position is not same with normal label position\n\n\n  var RADIAN$1 = Math.PI / 180;\n\n  function adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {\n    if (list.length < 2) {\n      return;\n    }\n\n    function recalculateXOnSemiToAlignOnEllipseCurve(semi) {\n      var rB = semi.rB;\n      var rB2 = rB * rB;\n\n      for (var i = 0; i < semi.list.length; i++) {\n        var item = semi.list[i];\n        var dy = Math.abs(item.label.y - cy); // horizontal r is always same with original r because x is not changed.\n\n        var rA = r + item.len;\n        var rA2 = rA * rA; // Use ellipse implicit function to calculate x\n\n        var dx = Math.sqrt((1 - Math.abs(dy * dy / rB2)) * rA2);\n        var newX = cx + (dx + item.len2) * dir;\n        var deltaX = newX - item.label.x;\n        var newTargetWidth = item.targetTextWidth - deltaX * dir; // text x is changed, so need to recalculate width.\n\n        constrainTextWidth(item, newTargetWidth, true);\n        item.label.x = newX;\n      }\n    } // Adjust X based on the shifted y. Make tight labels aligned on an ellipse curve.\n\n\n    function recalculateX(items) {\n      // Extremes of\n      var topSemi = {\n        list: [],\n        maxY: 0\n      };\n      var bottomSemi = {\n        list: [],\n        maxY: 0\n      };\n\n      for (var i = 0; i < items.length; i++) {\n        if (items[i].labelAlignTo !== 'none') {\n          continue;\n        }\n\n        var item = items[i];\n        var semi = item.label.y > cy ? bottomSemi : topSemi;\n        var dy = Math.abs(item.label.y - cy);\n\n        if (dy >= semi.maxY) {\n          var dx = item.label.x - cx - item.len2 * dir; // horizontal r is always same with original r because x is not changed.\n\n          var rA = r + item.len; // Canculate rB based on the topest / bottemest label.\n\n          var rB = Math.abs(dx) < rA ? Math.sqrt(dy * dy / (1 - dx * dx / rA / rA)) : rA;\n          semi.rB = rB;\n          semi.maxY = dy;\n        }\n\n        semi.list.push(item);\n      }\n\n      recalculateXOnSemiToAlignOnEllipseCurve(topSemi);\n      recalculateXOnSemiToAlignOnEllipseCurve(bottomSemi);\n    }\n\n    var len = list.length;\n\n    for (var i = 0; i < len; i++) {\n      if (list[i].position === 'outer' && list[i].labelAlignTo === 'labelLine') {\n        var dx = list[i].label.x - farthestX;\n        list[i].linePoints[1][0] += dx;\n        list[i].label.x = farthestX;\n      }\n    }\n\n    if (shiftLayoutOnY(list, viewTop, viewTop + viewHeight)) {\n      recalculateX(list);\n    }\n  }\n\n  function avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {\n    var leftList = [];\n    var rightList = [];\n    var leftmostX = Number.MAX_VALUE;\n    var rightmostX = -Number.MAX_VALUE;\n\n    for (var i = 0; i < labelLayoutList.length; i++) {\n      var label = labelLayoutList[i].label;\n\n      if (isPositionCenter(labelLayoutList[i])) {\n        continue;\n      }\n\n      if (label.x < cx) {\n        leftmostX = Math.min(leftmostX, label.x);\n        leftList.push(labelLayoutList[i]);\n      } else {\n        rightmostX = Math.max(rightmostX, label.x);\n        rightList.push(labelLayoutList[i]);\n      }\n    }\n\n    for (var i = 0; i < labelLayoutList.length; i++) {\n      var layout = labelLayoutList[i];\n\n      if (!isPositionCenter(layout) && layout.linePoints) {\n        if (layout.labelStyleWidth != null) {\n          continue;\n        }\n\n        var label = layout.label;\n        var linePoints = layout.linePoints;\n        var targetTextWidth = void 0;\n\n        if (layout.labelAlignTo === 'edge') {\n          if (label.x < cx) {\n            targetTextWidth = linePoints[2][0] - layout.labelDistance - viewLeft - layout.edgeDistance;\n          } else {\n            targetTextWidth = viewLeft + viewWidth - layout.edgeDistance - linePoints[2][0] - layout.labelDistance;\n          }\n        } else if (layout.labelAlignTo === 'labelLine') {\n          if (label.x < cx) {\n            targetTextWidth = leftmostX - viewLeft - layout.bleedMargin;\n          } else {\n            targetTextWidth = viewLeft + viewWidth - rightmostX - layout.bleedMargin;\n          }\n        } else {\n          if (label.x < cx) {\n            targetTextWidth = label.x - viewLeft - layout.bleedMargin;\n          } else {\n            targetTextWidth = viewLeft + viewWidth - label.x - layout.bleedMargin;\n          }\n        }\n\n        layout.targetTextWidth = targetTextWidth;\n        constrainTextWidth(layout, targetTextWidth);\n      }\n    }\n\n    adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);\n    adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);\n\n    for (var i = 0; i < labelLayoutList.length; i++) {\n      var layout = labelLayoutList[i];\n\n      if (!isPositionCenter(layout) && layout.linePoints) {\n        var label = layout.label;\n        var linePoints = layout.linePoints;\n        var isAlignToEdge = layout.labelAlignTo === 'edge';\n        var padding = label.style.padding;\n        var paddingH = padding ? padding[1] + padding[3] : 0; // textRect.width already contains paddingH if bgColor is set\n\n        var extraPaddingH = label.style.backgroundColor ? 0 : paddingH;\n        var realTextWidth = layout.rect.width + extraPaddingH;\n        var dist = linePoints[1][0] - linePoints[2][0];\n\n        if (isAlignToEdge) {\n          if (label.x < cx) {\n            linePoints[2][0] = viewLeft + layout.edgeDistance + realTextWidth + layout.labelDistance;\n          } else {\n            linePoints[2][0] = viewLeft + viewWidth - layout.edgeDistance - realTextWidth - layout.labelDistance;\n          }\n        } else {\n          if (label.x < cx) {\n            linePoints[2][0] = label.x + layout.labelDistance;\n          } else {\n            linePoints[2][0] = label.x - layout.labelDistance;\n          }\n\n          linePoints[1][0] = linePoints[2][0] + dist;\n        }\n\n        linePoints[1][1] = linePoints[2][1] = label.y;\n      }\n    }\n  }\n  /**\n   * Set max width of each label, and then wrap each label to the max width.\n   *\n   * @param layout label layout\n   * @param availableWidth max width for the label to display\n   * @param forceRecalculate recaculate the text layout even if the current width\n   * is smaller than `availableWidth`. This is useful when the text was previously\n   * wrapped by calling `constrainTextWidth` but now `availableWidth` changed, in\n   * which case, previous wrapping should be redo.\n   */\n\n\n  function constrainTextWidth(layout, availableWidth, forceRecalculate) {\n    if (forceRecalculate === void 0) {\n      forceRecalculate = false;\n    }\n\n    if (layout.labelStyleWidth != null) {\n      // User-defined style.width has the highest priority.\n      return;\n    }\n\n    var label = layout.label;\n    var style = label.style;\n    var textRect = layout.rect;\n    var bgColor = style.backgroundColor;\n    var padding = style.padding;\n    var paddingH = padding ? padding[1] + padding[3] : 0;\n    var overflow = style.overflow; // textRect.width already contains paddingH if bgColor is set\n\n    var oldOuterWidth = textRect.width + (bgColor ? 0 : paddingH);\n\n    if (availableWidth < oldOuterWidth || forceRecalculate) {\n      var oldHeight = textRect.height;\n\n      if (overflow && overflow.match('break')) {\n        // Temporarily set background to be null to calculate\n        // the bounding box without backgroud.\n        label.setStyle('backgroundColor', null); // Set constraining width\n\n        label.setStyle('width', availableWidth - paddingH); // This is the real bounding box of the text without padding\n\n        var innerRect = label.getBoundingRect();\n        label.setStyle('width', Math.ceil(innerRect.width));\n        label.setStyle('backgroundColor', bgColor);\n      } else {\n        var availableInnerWidth = availableWidth - paddingH;\n        var newWidth = availableWidth < oldOuterWidth // Current text is too wide, use `availableWidth` as max width.\n        ? availableInnerWidth : // Current available width is enough, but the text may have\n        // already been wrapped with a smaller available width.\n        forceRecalculate ? availableInnerWidth > layout.unconstrainedWidth // Current available is larger than text width,\n        // so don't constrain width (otherwise it may have\n        // empty space in the background).\n        ? null // Current available is smaller than text width, so\n        // use the current available width as constraining\n        // width.\n        : availableInnerWidth : // Current available width is enough, so no need to\n        // constrain.\n        null;\n        label.setStyle('width', newWidth);\n      }\n\n      var newRect = label.getBoundingRect();\n      textRect.width = newRect.width;\n      var margin = (label.style.margin || 0) + 2.1;\n      textRect.height = newRect.height + margin;\n      textRect.y -= (textRect.height - oldHeight) / 2;\n    }\n  }\n\n  function isPositionCenter(sectorShape) {\n    // Not change x for center label\n    return sectorShape.position === 'center';\n  }\n\n  function pieLabelLayout(seriesModel) {\n    var data = seriesModel.getData();\n    var labelLayoutList = [];\n    var cx;\n    var cy;\n    var hasLabelRotate = false;\n    var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN$1;\n    var viewRect = data.getLayout('viewRect');\n    var r = data.getLayout('r');\n    var viewWidth = viewRect.width;\n    var viewLeft = viewRect.x;\n    var viewTop = viewRect.y;\n    var viewHeight = viewRect.height;\n\n    function setNotShow(el) {\n      el.ignore = true;\n    }\n\n    function isLabelShown(label) {\n      if (!label.ignore) {\n        return true;\n      }\n\n      for (var key in label.states) {\n        if (label.states[key].ignore === false) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    data.each(function (idx) {\n      var sector = data.getItemGraphicEl(idx);\n      var sectorShape = sector.shape;\n      var label = sector.getTextContent();\n      var labelLine = sector.getTextGuideLine();\n      var itemModel = data.getItemModel(idx);\n      var labelModel = itemModel.getModel('label'); // Use position in normal or emphasis\n\n      var labelPosition = labelModel.get('position') || itemModel.get(['emphasis', 'label', 'position']);\n      var labelDistance = labelModel.get('distanceToLabelLine');\n      var labelAlignTo = labelModel.get('alignTo');\n      var edgeDistance = parsePercent$1(labelModel.get('edgeDistance'), viewWidth);\n      var bleedMargin = labelModel.get('bleedMargin');\n      var labelLineModel = itemModel.getModel('labelLine');\n      var labelLineLen = labelLineModel.get('length');\n      labelLineLen = parsePercent$1(labelLineLen, viewWidth);\n      var labelLineLen2 = labelLineModel.get('length2');\n      labelLineLen2 = parsePercent$1(labelLineLen2, viewWidth);\n\n      if (Math.abs(sectorShape.endAngle - sectorShape.startAngle) < minShowLabelRadian) {\n        each(label.states, setNotShow);\n        label.ignore = true;\n        return;\n      }\n\n      if (!isLabelShown(label)) {\n        return;\n      }\n\n      var midAngle = (sectorShape.startAngle + sectorShape.endAngle) / 2;\n      var nx = Math.cos(midAngle);\n      var ny = Math.sin(midAngle);\n      var textX;\n      var textY;\n      var linePoints;\n      var textAlign;\n      cx = sectorShape.cx;\n      cy = sectorShape.cy;\n      var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n\n      if (labelPosition === 'center') {\n        textX = sectorShape.cx;\n        textY = sectorShape.cy;\n        textAlign = 'center';\n      } else {\n        var x1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * nx : sectorShape.r * nx) + cx;\n        var y1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * ny : sectorShape.r * ny) + cy;\n        textX = x1 + nx * 3;\n        textY = y1 + ny * 3;\n\n        if (!isLabelInside) {\n          // For roseType\n          var x2 = x1 + nx * (labelLineLen + r - sectorShape.r);\n          var y2 = y1 + ny * (labelLineLen + r - sectorShape.r);\n          var x3 = x2 + (nx < 0 ? -1 : 1) * labelLineLen2;\n          var y3 = y2;\n\n          if (labelAlignTo === 'edge') {\n            // Adjust textX because text align of edge is opposite\n            textX = nx < 0 ? viewLeft + edgeDistance : viewLeft + viewWidth - edgeDistance;\n          } else {\n            textX = x3 + (nx < 0 ? -labelDistance : labelDistance);\n          }\n\n          textY = y3;\n          linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n        }\n\n        textAlign = isLabelInside ? 'center' : labelAlignTo === 'edge' ? nx > 0 ? 'right' : 'left' : nx > 0 ? 'left' : 'right';\n      }\n\n      var PI = Math.PI;\n      var labelRotate = 0;\n      var rotate = labelModel.get('rotate');\n\n      if (isNumber(rotate)) {\n        labelRotate = rotate * (PI / 180);\n      } else if (labelPosition === 'center') {\n        labelRotate = 0;\n      } else if (rotate === 'radial' || rotate === true) {\n        var radialAngle = nx < 0 ? -midAngle + PI : -midAngle;\n        labelRotate = radialAngle;\n      } else if (rotate === 'tangential' && labelPosition !== 'outside' && labelPosition !== 'outer') {\n        var rad = Math.atan2(nx, ny);\n\n        if (rad < 0) {\n          rad = PI * 2 + rad;\n        }\n\n        var isDown = ny > 0;\n\n        if (isDown) {\n          rad = PI + rad;\n        }\n\n        labelRotate = rad - PI;\n      }\n\n      hasLabelRotate = !!labelRotate;\n      label.x = textX;\n      label.y = textY;\n      label.rotation = labelRotate;\n      label.setStyle({\n        verticalAlign: 'middle'\n      }); // Not sectorShape the inside label\n\n      if (!isLabelInside) {\n        var textRect = label.getBoundingRect().clone();\n        textRect.applyTransform(label.getComputedTransform()); // Text has a default 1px stroke. Exclude this.\n\n        var margin = (label.style.margin || 0) + 2.1;\n        textRect.y -= margin / 2;\n        textRect.height += margin;\n        labelLayoutList.push({\n          label: label,\n          labelLine: labelLine,\n          position: labelPosition,\n          len: labelLineLen,\n          len2: labelLineLen2,\n          minTurnAngle: labelLineModel.get('minTurnAngle'),\n          maxSurfaceAngle: labelLineModel.get('maxSurfaceAngle'),\n          surfaceNormal: new Point(nx, ny),\n          linePoints: linePoints,\n          textAlign: textAlign,\n          labelDistance: labelDistance,\n          labelAlignTo: labelAlignTo,\n          edgeDistance: edgeDistance,\n          bleedMargin: bleedMargin,\n          rect: textRect,\n          unconstrainedWidth: textRect.width,\n          labelStyleWidth: label.style.width\n        });\n      } else {\n        label.setStyle({\n          align: textAlign\n        });\n        var selectState = label.states.select;\n\n        if (selectState) {\n          selectState.x += label.x;\n          selectState.y += label.y;\n        }\n      }\n\n      sector.setTextConfig({\n        inside: isLabelInside\n      });\n    });\n\n    if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n      avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);\n    }\n\n    for (var i = 0; i < labelLayoutList.length; i++) {\n      var layout = labelLayoutList[i];\n      var label = layout.label;\n      var labelLine = layout.labelLine;\n      var notShowLabel = isNaN(label.x) || isNaN(label.y);\n\n      if (label) {\n        label.setStyle({\n          align: layout.textAlign\n        });\n\n        if (notShowLabel) {\n          each(label.states, setNotShow);\n          label.ignore = true;\n        }\n\n        var selectState = label.states.select;\n\n        if (selectState) {\n          selectState.x += label.x;\n          selectState.y += label.y;\n        }\n      }\n\n      if (labelLine) {\n        var linePoints = layout.linePoints;\n\n        if (notShowLabel || !linePoints) {\n          each(labelLine.states, setNotShow);\n          labelLine.ignore = true;\n        } else {\n          limitTurnAngle(linePoints, layout.minTurnAngle);\n          limitSurfaceAngle(linePoints, layout.surfaceNormal, layout.maxSurfaceAngle);\n          labelLine.setShape({\n            points: linePoints\n          }); // Set the anchor to the midpoint of sector\n\n          label.__hostTarget.textGuideLineConfig = {\n            anchor: new Point(linePoints[0][0], linePoints[0][1])\n          };\n        }\n      }\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function getSectorCornerRadius(model, shape, zeroIfNull) {\n    var cornerRadius = model.get('borderRadius');\n\n    if (cornerRadius == null) {\n      return zeroIfNull ? {\n        cornerRadius: 0\n      } : null;\n    }\n\n    if (!isArray(cornerRadius)) {\n      cornerRadius = [cornerRadius, cornerRadius, cornerRadius, cornerRadius];\n    }\n\n    var dr = Math.abs(shape.r || 0 - shape.r0 || 0);\n    return {\n      cornerRadius: map(cornerRadius, function (cr) {\n        return parsePercent(cr, dr);\n      })\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Piece of pie including Sector, Label, LabelLine\n   */\n\n\n  var PiePiece =\n  /** @class */\n  function (_super) {\n    __extends(PiePiece, _super);\n\n    function PiePiece(data, idx, startAngle) {\n      var _this = _super.call(this) || this;\n\n      _this.z2 = 2;\n      var text = new ZRText();\n\n      _this.setTextContent(text);\n\n      _this.updateData(data, idx, startAngle, true);\n\n      return _this;\n    }\n\n    PiePiece.prototype.updateData = function (data, idx, startAngle, firstCreate) {\n      var sector = this;\n      var seriesModel = data.hostModel;\n      var itemModel = data.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      var layout = data.getItemLayout(idx); // cornerRadius & innerCornerRadius doesn't exist in the item layout. Use `0` if null value is specified.\n      // see `setItemLayout` in `pieLayout.ts`.\n\n      var sectorShape = extend(getSectorCornerRadius(itemModel.getModel('itemStyle'), layout, true), layout); // Ignore NaN data.\n\n      if (isNaN(sectorShape.startAngle)) {\n        // Use NaN shape to avoid drawing shape.\n        sector.setShape(sectorShape);\n        return;\n      }\n\n      if (firstCreate) {\n        sector.setShape(sectorShape);\n        var animationType = seriesModel.getShallow('animationType');\n\n        if (seriesModel.ecModel.ssr) {\n          // Use scale animation in SSR mode(opacity?)\n          // Because CSS SVG animation doesn't support very customized shape animation.\n          initProps(sector, {\n            scaleX: 0,\n            scaleY: 0\n          }, seriesModel, {\n            dataIndex: idx,\n            isFrom: true\n          });\n          sector.originX = sectorShape.cx;\n          sector.originY = sectorShape.cy;\n        } else if (animationType === 'scale') {\n          sector.shape.r = layout.r0;\n          initProps(sector, {\n            shape: {\n              r: layout.r\n            }\n          }, seriesModel, idx);\n        } // Expansion\n        else {\n            if (startAngle != null) {\n              sector.setShape({\n                startAngle: startAngle,\n                endAngle: startAngle\n              });\n              initProps(sector, {\n                shape: {\n                  startAngle: layout.startAngle,\n                  endAngle: layout.endAngle\n                }\n              }, seriesModel, idx);\n            } else {\n              sector.shape.endAngle = layout.startAngle;\n              updateProps(sector, {\n                shape: {\n                  endAngle: layout.endAngle\n                }\n              }, seriesModel, idx);\n            }\n          }\n      } else {\n        saveOldStyle(sector); // Transition animation from the old shape\n\n        updateProps(sector, {\n          shape: sectorShape\n        }, seriesModel, idx);\n      }\n\n      sector.useStyle(data.getItemVisual(idx, 'style'));\n      setStatesStylesFromModel(sector, itemModel);\n      var midAngle = (layout.startAngle + layout.endAngle) / 2;\n      var offset = seriesModel.get('selectedOffset');\n      var dx = Math.cos(midAngle) * offset;\n      var dy = Math.sin(midAngle) * offset;\n      var cursorStyle = itemModel.getShallow('cursor');\n      cursorStyle && sector.attr('cursor', cursorStyle);\n\n      this._updateLabel(seriesModel, data, idx);\n\n      sector.ensureState('emphasis').shape = extend({\n        r: layout.r + (emphasisModel.get('scale') ? emphasisModel.get('scaleSize') || 0 : 0)\n      }, getSectorCornerRadius(emphasisModel.getModel('itemStyle'), layout));\n      extend(sector.ensureState('select'), {\n        x: dx,\n        y: dy,\n        shape: getSectorCornerRadius(itemModel.getModel(['select', 'itemStyle']), layout)\n      });\n      extend(sector.ensureState('blur'), {\n        shape: getSectorCornerRadius(itemModel.getModel(['blur', 'itemStyle']), layout)\n      });\n      var labelLine = sector.getTextGuideLine();\n      var labelText = sector.getTextContent();\n      labelLine && extend(labelLine.ensureState('select'), {\n        x: dx,\n        y: dy\n      }); // TODO: needs dx, dy in zrender?\n\n      extend(labelText.ensureState('select'), {\n        x: dx,\n        y: dy\n      });\n      toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    };\n\n    PiePiece.prototype._updateLabel = function (seriesModel, data, idx) {\n      var sector = this;\n      var itemModel = data.getItemModel(idx);\n      var labelLineModel = itemModel.getModel('labelLine');\n      var style = data.getItemVisual(idx, 'style');\n      var visualColor = style && style.fill;\n      var visualOpacity = style && style.opacity;\n      setLabelStyle(sector, getLabelStatesModels(itemModel), {\n        labelFetcher: data.hostModel,\n        labelDataIndex: idx,\n        inheritColor: visualColor,\n        defaultOpacity: visualOpacity,\n        defaultText: seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx)\n      });\n      var labelText = sector.getTextContent(); // Set textConfig on sector.\n\n      sector.setTextConfig({\n        // reset position, rotation\n        position: null,\n        rotation: null\n      }); // Make sure update style on labelText after setLabelStyle.\n      // Because setLabelStyle will replace a new style on it.\n\n      labelText.attr({\n        z2: 10\n      });\n      var labelPosition = seriesModel.get(['label', 'position']);\n\n      if (labelPosition !== 'outside' && labelPosition !== 'outer') {\n        sector.removeTextGuideLine();\n      } else {\n        var polyline = this.getTextGuideLine();\n\n        if (!polyline) {\n          polyline = new Polyline();\n          this.setTextGuideLine(polyline);\n        } // Default use item visual color\n\n\n        setLabelLineStyle(this, getLabelLineStatesModels(itemModel), {\n          stroke: visualColor,\n          opacity: retrieve3(labelLineModel.get(['lineStyle', 'opacity']), visualOpacity, 1)\n        });\n      }\n    };\n\n    return PiePiece;\n  }(Sector); // Pie view\n\n\n  var PieView =\n  /** @class */\n  function (_super) {\n    __extends(PieView, _super);\n\n    function PieView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.ignoreLabelLineUpdate = true;\n      return _this;\n    }\n\n    PieView.prototype.render = function (seriesModel, ecModel, api, payload) {\n      var data = seriesModel.getData();\n      var oldData = this._data;\n      var group = this.group;\n      var startAngle; // First render\n\n      if (!oldData && data.count() > 0) {\n        var shape = data.getItemLayout(0);\n\n        for (var s = 1; isNaN(shape && shape.startAngle) && s < data.count(); ++s) {\n          shape = data.getItemLayout(s);\n        }\n\n        if (shape) {\n          startAngle = shape.startAngle;\n        }\n      } // remove empty-circle if it exists\n\n\n      if (this._emptyCircleSector) {\n        group.remove(this._emptyCircleSector);\n      } // when all data are filtered, show lightgray empty circle\n\n\n      if (data.count() === 0 && seriesModel.get('showEmptyCircle')) {\n        var sector = new Sector({\n          shape: getBasicPieLayout(seriesModel, api)\n        });\n        sector.useStyle(seriesModel.getModel('emptyCircleStyle').getItemStyle());\n        this._emptyCircleSector = sector;\n        group.add(sector);\n      }\n\n      data.diff(oldData).add(function (idx) {\n        var piePiece = new PiePiece(data, idx, startAngle);\n        data.setItemGraphicEl(idx, piePiece);\n        group.add(piePiece);\n      }).update(function (newIdx, oldIdx) {\n        var piePiece = oldData.getItemGraphicEl(oldIdx);\n        piePiece.updateData(data, newIdx, startAngle);\n        piePiece.off('click');\n        group.add(piePiece);\n        data.setItemGraphicEl(newIdx, piePiece);\n      }).remove(function (idx) {\n        var piePiece = oldData.getItemGraphicEl(idx);\n        removeElementWithFadeOut(piePiece, seriesModel, idx);\n      }).execute();\n      pieLabelLayout(seriesModel); // Always use initial animation.\n\n      if (seriesModel.get('animationTypeUpdate') !== 'expansion') {\n        this._data = data;\n      }\n    };\n\n    PieView.prototype.dispose = function () {};\n\n    PieView.prototype.containPoint = function (point, seriesModel) {\n      var data = seriesModel.getData();\n      var itemLayout = data.getItemLayout(0);\n\n      if (itemLayout) {\n        var dx = point[0] - itemLayout.cx;\n        var dy = point[1] - itemLayout.cy;\n        var radius = Math.sqrt(dx * dx + dy * dy);\n        return radius <= itemLayout.r && radius >= itemLayout.r0;\n      }\n    };\n\n    PieView.type = 'pie';\n    return PieView;\n  }(ChartView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * [Usage]:\n   * (1)\n   * createListSimply(seriesModel, ['value']);\n   * (2)\n   * createListSimply(seriesModel, {\n   *     coordDimensions: ['value'],\n   *     dimensionsCount: 5\n   * });\n   */\n\n\n  function createSeriesDataSimply(seriesModel, opt, nameList) {\n    opt = isArray(opt) && {\n      coordDimensions: opt\n    } || extend({\n      encodeDefine: seriesModel.getEncode()\n    }, opt);\n    var source = seriesModel.getSource();\n    var dimensions = prepareSeriesDataSchema(source, opt).dimensions;\n    var list = new SeriesData(dimensions, seriesModel);\n    list.initData(source, nameList);\n    return list;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * LegendVisualProvider is an bridge that pick encoded color from data and\n   * provide to the legend component.\n   */\n\n\n  var LegendVisualProvider =\n  /** @class */\n  function () {\n    function LegendVisualProvider( // Function to get data after filtered. It stores all the encoding info\n    getDataWithEncodedVisual, // Function to get raw data before filtered.\n    getRawData) {\n      this._getDataWithEncodedVisual = getDataWithEncodedVisual;\n      this._getRawData = getRawData;\n    }\n\n    LegendVisualProvider.prototype.getAllNames = function () {\n      var rawData = this._getRawData(); // We find the name from the raw data. In case it's filtered by the legend component.\n      // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n\n\n      return rawData.mapArray(rawData.getName);\n    };\n\n    LegendVisualProvider.prototype.containName = function (name) {\n      var rawData = this._getRawData();\n\n      return rawData.indexOfName(name) >= 0;\n    };\n\n    LegendVisualProvider.prototype.indexOfName = function (name) {\n      // Only get data when necessary.\n      // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n      // Invoking Series#getData immediately will throw an error.\n      var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n      return dataWithEncodedVisual.indexOfName(name);\n    };\n\n    LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\n      // Get encoded visual properties from final filtered data.\n      var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n      return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n    };\n\n    return LegendVisualProvider;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var PieSeriesModel =\n  /** @class */\n  function (_super) {\n    __extends(PieSeriesModel, _super);\n\n    function PieSeriesModel() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @overwrite\n     */\n\n\n    PieSeriesModel.prototype.init = function (option) {\n      _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\n      // Use a function instead of direct access because data reference may changed\n\n\n      this.legendVisualProvider = new LegendVisualProvider(bind(this.getData, this), bind(this.getRawData, this));\n\n      this._defaultLabelLine(option);\n    };\n    /**\n     * @overwrite\n     */\n\n\n    PieSeriesModel.prototype.mergeOption = function () {\n      _super.prototype.mergeOption.apply(this, arguments);\n    };\n    /**\n     * @overwrite\n     */\n\n\n    PieSeriesModel.prototype.getInitialData = function () {\n      return createSeriesDataSimply(this, {\n        coordDimensions: ['value'],\n        encodeDefaulter: curry(makeSeriesEncodeForNameBased, this)\n      });\n    };\n    /**\n     * @overwrite\n     */\n\n\n    PieSeriesModel.prototype.getDataParams = function (dataIndex) {\n      var data = this.getData();\n\n      var params = _super.prototype.getDataParams.call(this, dataIndex); // FIXME toFixed?\n\n\n      var valueList = [];\n      data.each(data.mapDimension('value'), function (value) {\n        valueList.push(value);\n      });\n      params.percent = getPercentWithPrecision(valueList, dataIndex, data.hostModel.get('percentPrecision'));\n      params.$vars.push('percent');\n      return params;\n    };\n\n    PieSeriesModel.prototype._defaultLabelLine = function (option) {\n      // Extend labelLine emphasis\n      defaultEmphasis(option, 'labelLine', ['show']);\n      var labelLineNormalOpt = option.labelLine;\n      var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n      labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n      labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n    };\n\n    PieSeriesModel.type = 'series.pie';\n    PieSeriesModel.defaultOption = {\n      // zlevel: 0,\n      z: 2,\n      legendHoverLink: true,\n      colorBy: 'data',\n      // 默认全局居中\n      center: ['50%', '50%'],\n      radius: [0, '75%'],\n      // 默认顺时针\n      clockwise: true,\n      startAngle: 90,\n      // 最小角度改为0\n      minAngle: 0,\n      // If the angle of a sector less than `minShowLabelAngle`,\n      // the label will not be displayed.\n      minShowLabelAngle: 0,\n      // 选中时扇区偏移量\n      selectedOffset: 10,\n      // 选择模式，默认关闭，可选single，multiple\n      // selectedMode: false,\n      // 南丁格尔玫瑰图模式，'radius'（半径） | 'area'（面积）\n      // roseType: null,\n      percentPrecision: 2,\n      // If still show when all data zero.\n      stillShowZeroSum: true,\n      // cursor: null,\n      left: 0,\n      top: 0,\n      right: 0,\n      bottom: 0,\n      width: null,\n      height: null,\n      label: {\n        // color: 'inherit',\n        // If rotate around circle\n        rotate: 0,\n        show: true,\n        overflow: 'truncate',\n        // 'outer', 'inside', 'center'\n        position: 'outer',\n        // 'none', 'labelLine', 'edge'. Works only when position is 'outer'\n        alignTo: 'none',\n        // Closest distance between label and chart edge.\n        // Works only position is 'outer' and alignTo is 'edge'.\n        edgeDistance: '25%',\n        // Works only position is 'outer' and alignTo is not 'edge'.\n        bleedMargin: 10,\n        // Distance between text and label line.\n        distanceToLabelLine: 5 // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n        // 默认使用全局文本样式，详见TEXTSTYLE\n        // distance: 当position为inner时有效，为label位置到圆心的距离与圆半径(环状图为内外半径和)的比例系数\n\n      },\n      // Enabled when label.normal.position is 'outer'\n      labelLine: {\n        show: true,\n        // 引导线两段中的第一段长度\n        length: 15,\n        // 引导线两段中的第二段长度\n        length2: 15,\n        smooth: false,\n        minTurnAngle: 90,\n        maxSurfaceAngle: 90,\n        lineStyle: {\n          // color: 各异,\n          width: 1,\n          type: 'solid'\n        }\n      },\n      itemStyle: {\n        borderWidth: 1,\n        borderJoin: 'round'\n      },\n      showEmptyCircle: true,\n      emptyCircleStyle: {\n        color: 'lightgray',\n        opacity: 1\n      },\n      labelLayout: {\n        // Hide the overlapped label.\n        hideOverlap: true\n      },\n      emphasis: {\n        scale: true,\n        scaleSize: 5\n      },\n      // If use strategy to avoid label overlapping\n      avoidLabelOverlap: true,\n      // Animation type. Valid values: expansion, scale\n      animationType: 'expansion',\n      animationDuration: 1000,\n      // Animation type when update. Valid values: transition, expansion\n      animationTypeUpdate: 'transition',\n      animationEasingUpdate: 'cubicInOut',\n      animationDurationUpdate: 500,\n      animationEasing: 'cubicInOut'\n    };\n    return PieSeriesModel;\n  }(SeriesModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function negativeDataFilter(seriesType) {\n    return {\n      seriesType: seriesType,\n      reset: function (seriesModel, ecModel) {\n        var data = seriesModel.getData();\n        data.filterSelf(function (idx) {\n          // handle negative value condition\n          var valueDim = data.mapDimension('value');\n          var curValue = data.get(valueDim, idx);\n\n          if (isNumber(curValue) && !isNaN(curValue) && curValue < 0) {\n            return false;\n          }\n\n          return true;\n        });\n      }\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$4(registers) {\n    registers.registerChartView(PieView);\n    registers.registerSeriesModel(PieSeriesModel);\n    createLegacyDataSelectAction('pie', registers.registerAction);\n    registers.registerLayout(curry(pieLayout, 'pie'));\n    registers.registerProcessor(dataFilter('pie'));\n    registers.registerProcessor(negativeDataFilter('pie'));\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  use(install$4);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var ScatterSeriesModel =\n  /** @class */\n  function (_super) {\n    __extends(ScatterSeriesModel, _super);\n\n    function ScatterSeriesModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = ScatterSeriesModel.type;\n      _this.hasSymbolVisual = true;\n      return _this;\n    }\n\n    ScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n      return createSeriesData(null, this, {\n        useEncodeDefaulter: true\n      });\n    };\n\n    ScatterSeriesModel.prototype.getProgressive = function () {\n      var progressive = this.option.progressive;\n\n      if (progressive == null) {\n        // PENDING\n        return this.option.large ? 5e3 : this.get('progressive');\n      }\n\n      return progressive;\n    };\n\n    ScatterSeriesModel.prototype.getProgressiveThreshold = function () {\n      var progressiveThreshold = this.option.progressiveThreshold;\n\n      if (progressiveThreshold == null) {\n        // PENDING\n        return this.option.large ? 1e4 : this.get('progressiveThreshold');\n      }\n\n      return progressiveThreshold;\n    };\n\n    ScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n      return selectors.point(data.getItemLayout(dataIndex));\n    };\n\n    ScatterSeriesModel.prototype.getZLevelKey = function () {\n      // Each progressive series has individual key.\n      return this.getData().count() > this.getProgressiveThreshold() ? this.id : '';\n    };\n\n    ScatterSeriesModel.type = 'series.scatter';\n    ScatterSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n    ScatterSeriesModel.defaultOption = {\n      coordinateSystem: 'cartesian2d',\n      // zlevel: 0,\n      z: 2,\n      legendHoverLink: true,\n      symbolSize: 10,\n      // symbolRotate: null,  // 图形旋转控制\n      large: false,\n      // Available when large is true\n      largeThreshold: 2000,\n      // cursor: null,\n      itemStyle: {\n        opacity: 0.8 // color: 各异\n\n      },\n      emphasis: {\n        scale: true\n      },\n      // If clip the overflow graphics\n      // Works on cartesian / polar series\n      clip: true,\n      select: {\n        itemStyle: {\n          borderColor: '#212121'\n        }\n      },\n      universalTransition: {\n        divideShape: 'clone'\n      } // progressive: null\n\n    };\n    return ScatterSeriesModel;\n  }(SeriesModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /* global Float32Array */\n  // TODO Batch by color\n\n\n  var BOOST_SIZE_THRESHOLD = 4;\n\n  var LargeSymbolPathShape =\n  /** @class */\n  function () {\n    function LargeSymbolPathShape() {}\n\n    return LargeSymbolPathShape;\n  }();\n\n  var LargeSymbolPath =\n  /** @class */\n  function (_super) {\n    __extends(LargeSymbolPath, _super);\n\n    function LargeSymbolPath(opts) {\n      var _this = _super.call(this, opts) || this;\n\n      _this._off = 0;\n      _this.hoverDataIdx = -1;\n      return _this;\n    }\n\n    LargeSymbolPath.prototype.getDefaultShape = function () {\n      return new LargeSymbolPathShape();\n    };\n\n    LargeSymbolPath.prototype.reset = function () {\n      this.notClear = false;\n      this._off = 0;\n    };\n\n    LargeSymbolPath.prototype.buildPath = function (path, shape) {\n      var points = shape.points;\n      var size = shape.size;\n      var symbolProxy = this.symbolProxy;\n      var symbolProxyShape = symbolProxy.shape;\n      var ctx = path.getContext ? path.getContext() : path;\n      var canBoost = ctx && size[0] < BOOST_SIZE_THRESHOLD;\n      var softClipShape = this.softClipShape;\n      var i; // Do draw in afterBrush.\n\n      if (canBoost) {\n        this._ctx = ctx;\n        return;\n      }\n\n      this._ctx = null;\n\n      for (i = this._off; i < points.length;) {\n        var x = points[i++];\n        var y = points[i++];\n\n        if (isNaN(x) || isNaN(y)) {\n          continue;\n        }\n\n        if (softClipShape && !softClipShape.contain(x, y)) {\n          continue;\n        }\n\n        symbolProxyShape.x = x - size[0] / 2;\n        symbolProxyShape.y = y - size[1] / 2;\n        symbolProxyShape.width = size[0];\n        symbolProxyShape.height = size[1];\n        symbolProxy.buildPath(path, symbolProxyShape, true);\n      }\n\n      if (this.incremental) {\n        this._off = i;\n        this.notClear = true;\n      }\n    };\n\n    LargeSymbolPath.prototype.afterBrush = function () {\n      var shape = this.shape;\n      var points = shape.points;\n      var size = shape.size;\n      var ctx = this._ctx;\n      var softClipShape = this.softClipShape;\n      var i;\n\n      if (!ctx) {\n        return;\n      } // PENDING If style or other canvas status changed?\n\n\n      for (i = this._off; i < points.length;) {\n        var x = points[i++];\n        var y = points[i++];\n\n        if (isNaN(x) || isNaN(y)) {\n          continue;\n        }\n\n        if (softClipShape && !softClipShape.contain(x, y)) {\n          continue;\n        } // fillRect is faster than building a rect path and draw.\n        // And it support light globalCompositeOperation.\n\n\n        ctx.fillRect(x - size[0] / 2, y - size[1] / 2, size[0], size[1]);\n      }\n\n      if (this.incremental) {\n        this._off = i;\n        this.notClear = true;\n      }\n    };\n\n    LargeSymbolPath.prototype.findDataIndex = function (x, y) {\n      // TODO ???\n      // Consider transform\n      var shape = this.shape;\n      var points = shape.points;\n      var size = shape.size;\n      var w = Math.max(size[0], 4);\n      var h = Math.max(size[1], 4); // Not consider transform\n      // Treat each element as a rect\n      // top down traverse\n\n      for (var idx = points.length / 2 - 1; idx >= 0; idx--) {\n        var i = idx * 2;\n        var x0 = points[i] - w / 2;\n        var y0 = points[i + 1] - h / 2;\n\n        if (x >= x0 && y >= y0 && x <= x0 + w && y <= y0 + h) {\n          return idx;\n        }\n      }\n\n      return -1;\n    };\n\n    LargeSymbolPath.prototype.contain = function (x, y) {\n      var localPos = this.transformCoordToLocal(x, y);\n      var rect = this.getBoundingRect();\n      x = localPos[0];\n      y = localPos[1];\n\n      if (rect.contain(x, y)) {\n        // Cache found data index.\n        var dataIdx = this.hoverDataIdx = this.findDataIndex(x, y);\n        return dataIdx >= 0;\n      }\n\n      this.hoverDataIdx = -1;\n      return false;\n    };\n\n    LargeSymbolPath.prototype.getBoundingRect = function () {\n      // Ignore stroke for large symbol draw.\n      var rect = this._rect;\n\n      if (!rect) {\n        var shape = this.shape;\n        var points = shape.points;\n        var size = shape.size;\n        var w = size[0];\n        var h = size[1];\n        var minX = Infinity;\n        var minY = Infinity;\n        var maxX = -Infinity;\n        var maxY = -Infinity;\n\n        for (var i = 0; i < points.length;) {\n          var x = points[i++];\n          var y = points[i++];\n          minX = Math.min(x, minX);\n          maxX = Math.max(x, maxX);\n          minY = Math.min(y, minY);\n          maxY = Math.max(y, maxY);\n        }\n\n        rect = this._rect = new BoundingRect(minX - w / 2, minY - h / 2, maxX - minX + w, maxY - minY + h);\n      }\n\n      return rect;\n    };\n\n    return LargeSymbolPath;\n  }(Path);\n\n  var LargeSymbolDraw =\n  /** @class */\n  function () {\n    function LargeSymbolDraw() {\n      this.group = new Group();\n    }\n    /**\n     * Update symbols draw by new data\n     */\n\n\n    LargeSymbolDraw.prototype.updateData = function (data, opt) {\n      this._clear();\n\n      var symbolEl = this._create();\n\n      symbolEl.setShape({\n        points: data.getLayout('points')\n      });\n\n      this._setCommon(symbolEl, data, opt);\n    };\n\n    LargeSymbolDraw.prototype.updateLayout = function (data) {\n      var points = data.getLayout('points');\n      this.group.eachChild(function (child) {\n        if (child.startIndex != null) {\n          var len = (child.endIndex - child.startIndex) * 2;\n          var byteOffset = child.startIndex * 4 * 2;\n          points = new Float32Array(points.buffer, byteOffset, len);\n        }\n\n        child.setShape('points', points); // Reset draw cursor.\n\n        child.reset();\n      });\n    };\n\n    LargeSymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n      this._clear();\n    };\n\n    LargeSymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n      var lastAdded = this._newAdded[0];\n      var points = data.getLayout('points');\n      var oldPoints = lastAdded && lastAdded.shape.points; // Merging the exists. Each element has 1e4 points.\n      // Consider the performance balance between too much elements and too much points in one shape(may affect hover optimization)\n\n      if (oldPoints && oldPoints.length < 2e4) {\n        var oldLen = oldPoints.length;\n        var newPoints = new Float32Array(oldLen + points.length); // Concat two array\n\n        newPoints.set(oldPoints);\n        newPoints.set(points, oldLen); // Update endIndex\n\n        lastAdded.endIndex = taskParams.end;\n        lastAdded.setShape({\n          points: newPoints\n        });\n      } else {\n        // Clear\n        this._newAdded = [];\n\n        var symbolEl = this._create();\n\n        symbolEl.startIndex = taskParams.start;\n        symbolEl.endIndex = taskParams.end;\n        symbolEl.incremental = true;\n        symbolEl.setShape({\n          points: points\n        });\n\n        this._setCommon(symbolEl, data, opt);\n      }\n    };\n\n    LargeSymbolDraw.prototype.eachRendered = function (cb) {\n      this._newAdded[0] && cb(this._newAdded[0]);\n    };\n\n    LargeSymbolDraw.prototype._create = function () {\n      var symbolEl = new LargeSymbolPath({\n        cursor: 'default'\n      });\n      this.group.add(symbolEl);\n\n      this._newAdded.push(symbolEl);\n\n      return symbolEl;\n    };\n\n    LargeSymbolDraw.prototype._setCommon = function (symbolEl, data, opt) {\n      var hostModel = data.hostModel;\n      opt = opt || {};\n      var size = data.getVisual('symbolSize');\n      symbolEl.setShape('size', size instanceof Array ? size : [size, size]);\n      symbolEl.softClipShape = opt.clipShape || null; // Create symbolProxy to build path for each data\n\n      symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0); // Use symbolProxy setColor method\n\n      symbolEl.setColor = symbolEl.symbolProxy.setColor;\n      var extrudeShadow = symbolEl.shape.size[0] < BOOST_SIZE_THRESHOLD;\n      symbolEl.useStyle( // Draw shadow when doing fillRect is extremely slow.\n      hostModel.getModel('itemStyle').getItemStyle(extrudeShadow ? ['color', 'shadowBlur', 'shadowColor'] : ['color']));\n      var globalStyle = data.getVisual('style');\n      var visualColor = globalStyle && globalStyle.fill;\n\n      if (visualColor) {\n        symbolEl.setColor(visualColor);\n      }\n\n      var ecData = getECData(symbolEl); // Enable tooltip\n      // PENDING May have performance issue when path is extremely large\n\n      ecData.seriesIndex = hostModel.seriesIndex;\n      symbolEl.on('mousemove', function (e) {\n        ecData.dataIndex = null;\n        var dataIndex = symbolEl.hoverDataIdx;\n\n        if (dataIndex >= 0) {\n          // Provide dataIndex for tooltip\n          ecData.dataIndex = dataIndex + (symbolEl.startIndex || 0);\n        }\n      });\n    };\n\n    LargeSymbolDraw.prototype.remove = function () {\n      this._clear();\n    };\n\n    LargeSymbolDraw.prototype._clear = function () {\n      this._newAdded = [];\n      this.group.removeAll();\n    };\n\n    return LargeSymbolDraw;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var ScatterView =\n  /** @class */\n  function (_super) {\n    __extends(ScatterView, _super);\n\n    function ScatterView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = ScatterView.type;\n      return _this;\n    }\n\n    ScatterView.prototype.render = function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n\n      var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n      symbolDraw.updateData(data, {\n        // TODO\n        // If this parameter should be a shape or a bounding volume\n        // shape will be more general.\n        // But bounding volume like bounding rect will be much faster in the contain calculation\n        clipShape: this._getClipShape(seriesModel)\n      });\n      this._finished = true;\n    };\n\n    ScatterView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n\n      var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n      symbolDraw.incrementalPrepareUpdate(data);\n      this._finished = false;\n    };\n\n    ScatterView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n      this._symbolDraw.incrementalUpdate(taskParams, seriesModel.getData(), {\n        clipShape: this._getClipShape(seriesModel)\n      });\n\n      this._finished = taskParams.end === seriesModel.getData().count();\n    };\n\n    ScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData(); // Must mark group dirty and make sure the incremental layer will be cleared\n      // PENDING\n\n      this.group.dirty();\n\n      if (!this._finished || data.count() > 1e4) {\n        return {\n          update: true\n        };\n      } else {\n        var res = pointsLayout('').reset(seriesModel, ecModel, api);\n\n        if (res.progress) {\n          res.progress({\n            start: 0,\n            end: data.count(),\n            count: data.count()\n          }, data);\n        }\n\n        this._symbolDraw.updateLayout(data);\n      }\n    };\n\n    ScatterView.prototype.eachRendered = function (cb) {\n      this._symbolDraw && this._symbolDraw.eachRendered(cb);\n    };\n\n    ScatterView.prototype._getClipShape = function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n      return seriesModel.get('clip', true) ? clipArea : null;\n    };\n\n    ScatterView.prototype._updateSymbolDraw = function (data, seriesModel) {\n      var symbolDraw = this._symbolDraw;\n      var pipelineContext = seriesModel.pipelineContext;\n      var isLargeDraw = pipelineContext.large;\n\n      if (!symbolDraw || isLargeDraw !== this._isLargeDraw) {\n        symbolDraw && symbolDraw.remove();\n        symbolDraw = this._symbolDraw = isLargeDraw ? new LargeSymbolDraw() : new SymbolDraw();\n        this._isLargeDraw = isLargeDraw;\n        this.group.removeAll();\n      }\n\n      this.group.add(symbolDraw.group);\n      return symbolDraw;\n    };\n\n    ScatterView.prototype.remove = function (ecModel, api) {\n      this._symbolDraw && this._symbolDraw.remove(true);\n      this._symbolDraw = null;\n    };\n\n    ScatterView.prototype.dispose = function () {};\n\n    ScatterView.type = 'scatter';\n    return ScatterView;\n  }(ChartView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var GridModel =\n  /** @class */\n  function (_super) {\n    __extends(GridModel, _super);\n\n    function GridModel() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    GridModel.type = 'grid';\n    GridModel.dependencies = ['xAxis', 'yAxis'];\n    GridModel.layoutMode = 'box';\n    GridModel.defaultOption = {\n      show: false,\n      // zlevel: 0,\n      z: 0,\n      left: '10%',\n      top: 60,\n      right: '10%',\n      bottom: 70,\n      // If grid size contain label\n      containLabel: false,\n      // width: {totalWidth} - left - right,\n      // height: {totalHeight} - top - bottom,\n      backgroundColor: 'rgba(0,0,0,0)',\n      borderWidth: 1,\n      borderColor: '#ccc'\n    };\n    return GridModel;\n  }(ComponentModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var CartesianAxisModel =\n  /** @class */\n  function (_super) {\n    __extends(CartesianAxisModel, _super);\n\n    function CartesianAxisModel() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    CartesianAxisModel.prototype.getCoordSysModel = function () {\n      return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n    };\n\n    CartesianAxisModel.type = 'cartesian2dAxis';\n    return CartesianAxisModel;\n  }(ComponentModel);\n\n  mixin(CartesianAxisModel, AxisModelCommonMixin);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var defaultOption = {\n    show: true,\n    // zlevel: 0,\n    z: 0,\n    // Inverse the axis.\n    inverse: false,\n    // Axis name displayed.\n    name: '',\n    // 'start' | 'middle' | 'end'\n    nameLocation: 'end',\n    // By degree. By default auto rotate by nameLocation.\n    nameRotate: null,\n    nameTruncate: {\n      maxWidth: null,\n      ellipsis: '...',\n      placeholder: '.'\n    },\n    // Use global text style by default.\n    nameTextStyle: {},\n    // The gap between axisName and axisLine.\n    nameGap: 15,\n    // Default `false` to support tooltip.\n    silent: false,\n    // Default `false` to avoid legacy user event listener fail.\n    triggerEvent: false,\n    tooltip: {\n      show: false\n    },\n    axisPointer: {},\n    axisLine: {\n      show: true,\n      onZero: true,\n      onZeroAxisIndex: null,\n      lineStyle: {\n        color: '#6E7079',\n        width: 1,\n        type: 'solid'\n      },\n      // The arrow at both ends the the axis.\n      symbol: ['none', 'none'],\n      symbolSize: [10, 15]\n    },\n    axisTick: {\n      show: true,\n      // Whether axisTick is inside the grid or outside the grid.\n      inside: false,\n      // The length of axisTick.\n      length: 5,\n      lineStyle: {\n        width: 1\n      }\n    },\n    axisLabel: {\n      show: true,\n      // Whether axisLabel is inside the grid or outside the grid.\n      inside: false,\n      rotate: 0,\n      // true | false | null/undefined (auto)\n      showMinLabel: null,\n      // true | false | null/undefined (auto)\n      showMaxLabel: null,\n      margin: 8,\n      // formatter: null,\n      fontSize: 12\n    },\n    splitLine: {\n      show: true,\n      lineStyle: {\n        color: ['#E0E6F1'],\n        width: 1,\n        type: 'solid'\n      }\n    },\n    splitArea: {\n      show: false,\n      areaStyle: {\n        color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\n      }\n    }\n  };\n  var categoryAxis = merge({\n    // The gap at both ends of the axis. For categoryAxis, boolean.\n    boundaryGap: true,\n    // Set false to faster category collection.\n    deduplication: null,\n    // splitArea: {\n    // show: false\n    // },\n    splitLine: {\n      show: false\n    },\n    axisTick: {\n      // If tick is align with label when boundaryGap is true\n      alignWithLabel: false,\n      interval: 'auto'\n    },\n    axisLabel: {\n      interval: 'auto'\n    }\n  }, defaultOption);\n  var valueAxis = merge({\n    boundaryGap: [0, 0],\n    axisLine: {\n      // Not shown when other axis is categoryAxis in cartesian\n      show: 'auto'\n    },\n    axisTick: {\n      // Not shown when other axis is categoryAxis in cartesian\n      show: 'auto'\n    },\n    // TODO\n    // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n    splitNumber: 5,\n    minorTick: {\n      // Minor tick, not available for cateogry axis.\n      show: false,\n      // Split number of minor ticks. The value should be in range of (0, 100)\n      splitNumber: 5,\n      // Lenght of minor tick\n      length: 3,\n      // Line style\n      lineStyle: {// Default to be same with axisTick\n      }\n    },\n    minorSplitLine: {\n      show: false,\n      lineStyle: {\n        color: '#F4F7FD',\n        width: 1\n      }\n    }\n  }, defaultOption);\n  var timeAxis = merge({\n    splitNumber: 6,\n    axisLabel: {\n      // To eliminate labels that are not nice\n      showMinLabel: false,\n      showMaxLabel: false,\n      rich: {\n        primary: {\n          fontWeight: 'bold'\n        }\n      }\n    },\n    splitLine: {\n      show: false\n    }\n  }, valueAxis);\n  var logAxis = defaults({\n    logBase: 10\n  }, valueAxis);\n  var axisDefault = {\n    category: categoryAxis,\n    value: valueAxis,\n    time: timeAxis,\n    log: logAxis\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var AXIS_TYPES = {\n    value: 1,\n    category: 1,\n    time: 1,\n    log: 1\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Generate sub axis model class\n   * @param axisName 'x' 'y' 'radius' 'angle' 'parallel' ...\n   */\n\n  function axisModelCreator(registers, axisName, BaseAxisModelClass, extraDefaultOption) {\n    each(AXIS_TYPES, function (v, axisType) {\n      var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\n\n      var AxisModel =\n      /** @class */\n      function (_super) {\n        __extends(AxisModel, _super);\n\n        function AxisModel() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.type = axisName + 'Axis.' + axisType;\n          return _this;\n        }\n\n        AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n          var layoutMode = fetchLayoutMode(this);\n          var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n          var themeModel = ecModel.getTheme();\n          merge(option, themeModel.get(axisType + 'Axis'));\n          merge(option, this.getDefaultOption());\n          option.type = getAxisType(option);\n\n          if (layoutMode) {\n            mergeLayoutParam(option, inputPositionParams, layoutMode);\n          }\n        };\n\n        AxisModel.prototype.optionUpdated = function () {\n          var thisOption = this.option;\n\n          if (thisOption.type === 'category') {\n            this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n          }\n        };\n        /**\n         * Should not be called before all of 'getInitailData' finished.\n         * Because categories are collected during initializing data.\n         */\n\n\n        AxisModel.prototype.getCategories = function (rawData) {\n          var option = this.option; // FIXME\n          // warning if called before all of 'getInitailData' finished.\n\n          if (option.type === 'category') {\n            if (rawData) {\n              return option.data;\n            }\n\n            return this.__ordinalMeta.categories;\n          }\n        };\n\n        AxisModel.prototype.getOrdinalMeta = function () {\n          return this.__ordinalMeta;\n        };\n\n        AxisModel.type = axisName + 'Axis.' + axisType;\n        AxisModel.defaultOption = defaultOption;\n        return AxisModel;\n      }(BaseAxisModelClass);\n\n      registers.registerComponentModel(AxisModel);\n    });\n    registers.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\n  }\n\n  function getAxisType(option) {\n    // Default axis with data is category axis\n    return option.type || (option.data ? 'category' : 'value');\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var Cartesian =\n  /** @class */\n  function () {\n    function Cartesian(name) {\n      this.type = 'cartesian';\n      this._dimList = [];\n      this._axes = {};\n      this.name = name || '';\n    }\n\n    Cartesian.prototype.getAxis = function (dim) {\n      return this._axes[dim];\n    };\n\n    Cartesian.prototype.getAxes = function () {\n      return map(this._dimList, function (dim) {\n        return this._axes[dim];\n      }, this);\n    };\n\n    Cartesian.prototype.getAxesByScale = function (scaleType) {\n      scaleType = scaleType.toLowerCase();\n      return filter(this.getAxes(), function (axis) {\n        return axis.scale.type === scaleType;\n      });\n    };\n\n    Cartesian.prototype.addAxis = function (axis) {\n      var dim = axis.dim;\n      this._axes[dim] = axis;\n\n      this._dimList.push(dim);\n    };\n\n    return Cartesian;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var cartesian2DDimensions = ['x', 'y'];\n\n  function canCalculateAffineTransform(scale$$1) {\n    return scale$$1.type === 'interval' || scale$$1.type === 'time';\n  }\n\n  var Cartesian2D =\n  /** @class */\n  function (_super) {\n    __extends(Cartesian2D, _super);\n\n    function Cartesian2D() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = 'cartesian2d';\n      _this.dimensions = cartesian2DDimensions;\n      return _this;\n    }\n    /**\n     * Calculate an affine transform matrix if two axes are time or value.\n     * It's mainly for accelartion on the large time series data.\n     */\n\n\n    Cartesian2D.prototype.calcAffineTransform = function () {\n      this._transform = this._invTransform = null;\n      var xAxisScale = this.getAxis('x').scale;\n      var yAxisScale = this.getAxis('y').scale;\n\n      if (!canCalculateAffineTransform(xAxisScale) || !canCalculateAffineTransform(yAxisScale)) {\n        return;\n      }\n\n      var xScaleExtent = xAxisScale.getExtent();\n      var yScaleExtent = yAxisScale.getExtent();\n      var start = this.dataToPoint([xScaleExtent[0], yScaleExtent[0]]);\n      var end = this.dataToPoint([xScaleExtent[1], yScaleExtent[1]]);\n      var xScaleSpan = xScaleExtent[1] - xScaleExtent[0];\n      var yScaleSpan = yScaleExtent[1] - yScaleExtent[0];\n\n      if (!xScaleSpan || !yScaleSpan) {\n        return;\n      } // Accelerate data to point calculation on the special large time series data.\n\n\n      var scaleX = (end[0] - start[0]) / xScaleSpan;\n      var scaleY = (end[1] - start[1]) / yScaleSpan;\n      var translateX = start[0] - xScaleExtent[0] * scaleX;\n      var translateY = start[1] - yScaleExtent[0] * scaleY;\n      var m = this._transform = [scaleX, 0, 0, scaleY, translateX, translateY];\n      this._invTransform = invert([], m);\n    };\n    /**\n     * Base axis will be used on stacking.\n     */\n\n\n    Cartesian2D.prototype.getBaseAxis = function () {\n      return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n    };\n\n    Cartesian2D.prototype.containPoint = function (point) {\n      var axisX = this.getAxis('x');\n      var axisY = this.getAxis('y');\n      return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n    };\n\n    Cartesian2D.prototype.containData = function (data) {\n      return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n    };\n\n    Cartesian2D.prototype.containZone = function (data1, data2) {\n      var zoneDiag1 = this.dataToPoint(data1);\n      var zoneDiag2 = this.dataToPoint(data2);\n      var area = this.getArea();\n      var zone = new BoundingRect(zoneDiag1[0], zoneDiag1[1], zoneDiag2[0] - zoneDiag1[0], zoneDiag2[1] - zoneDiag1[1]);\n      return area.intersect(zone);\n    };\n\n    Cartesian2D.prototype.dataToPoint = function (data, clamp, out) {\n      out = out || [];\n      var xVal = data[0];\n      var yVal = data[1]; // Fast path\n\n      if (this._transform // It's supported that if data is like `[Inifity, 123]`, where only Y pixel calculated.\n      && xVal != null && isFinite(xVal) && yVal != null && isFinite(yVal)) {\n        return applyTransform(out, data, this._transform);\n      }\n\n      var xAxis = this.getAxis('x');\n      var yAxis = this.getAxis('y');\n      out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(xVal, clamp));\n      out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(yVal, clamp));\n      return out;\n    };\n\n    Cartesian2D.prototype.clampData = function (data, out) {\n      var xScale = this.getAxis('x').scale;\n      var yScale = this.getAxis('y').scale;\n      var xAxisExtent = xScale.getExtent();\n      var yAxisExtent = yScale.getExtent();\n      var x = xScale.parse(data[0]);\n      var y = yScale.parse(data[1]);\n      out = out || [];\n      out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n      out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n      return out;\n    };\n\n    Cartesian2D.prototype.pointToData = function (point, clamp) {\n      var out = [];\n\n      if (this._invTransform) {\n        return applyTransform(out, point, this._invTransform);\n      }\n\n      var xAxis = this.getAxis('x');\n      var yAxis = this.getAxis('y');\n      out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]), clamp);\n      out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]), clamp);\n      return out;\n    };\n\n    Cartesian2D.prototype.getOtherAxis = function (axis) {\n      return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n    };\n    /**\n     * Get rect area of cartesian.\n     * Area will have a contain function to determine if a point is in the coordinate system.\n     */\n\n\n    Cartesian2D.prototype.getArea = function () {\n      var xExtent = this.getAxis('x').getGlobalExtent();\n      var yExtent = this.getAxis('y').getGlobalExtent();\n      var x = Math.min(xExtent[0], xExtent[1]);\n      var y = Math.min(yExtent[0], yExtent[1]);\n      var width = Math.max(xExtent[0], xExtent[1]) - x;\n      var height = Math.max(yExtent[0], yExtent[1]) - y;\n      return new BoundingRect(x, y, width, height);\n    };\n\n    return Cartesian2D;\n  }(Cartesian);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var Axis2D =\n  /** @class */\n  function (_super) {\n    __extends(Axis2D, _super);\n\n    function Axis2D(dim, scale, coordExtent, axisType, position) {\n      var _this = _super.call(this, dim, scale, coordExtent) || this;\n      /**\n       * Index of axis, can be used as key\n       * Injected outside.\n       */\n\n\n      _this.index = 0;\n      _this.type = axisType || 'value';\n      _this.position = position || 'bottom';\n      return _this;\n    }\n\n    Axis2D.prototype.isHorizontal = function () {\n      var position = this.position;\n      return position === 'top' || position === 'bottom';\n    };\n    /**\n     * Each item cooresponds to this.getExtent(), which\n     * means globalExtent[0] may greater than globalExtent[1],\n     * unless `asc` is input.\n     *\n     * @param {boolean} [asc]\n     * @return {Array.<number>}\n     */\n\n\n    Axis2D.prototype.getGlobalExtent = function (asc) {\n      var ret = this.getExtent();\n      ret[0] = this.toGlobalCoord(ret[0]);\n      ret[1] = this.toGlobalCoord(ret[1]);\n      asc && ret[0] > ret[1] && ret.reverse();\n      return ret;\n    };\n\n    Axis2D.prototype.pointToData = function (point, clamp) {\n      return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n    };\n    /**\n     * Set ordinalSortInfo\n     * @param info new OrdinalSortInfo\n     */\n\n\n    Axis2D.prototype.setCategorySortInfo = function (info) {\n      if (this.type !== 'category') {\n        return false;\n      }\n\n      this.model.option.categorySortInfo = info;\n      this.scale.setSortInfo(info);\n    };\n\n    return Axis2D;\n  }(Axis);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Can only be called after coordinate system creation stage.\n   * (Can be called before coordinate system update stage).\n   */\n\n\n  function layout$1(gridModel, axisModel, opt) {\n    opt = opt || {};\n    var grid = gridModel.coordinateSystem;\n    var axis = axisModel.axis;\n    var layout = {};\n    var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n    var rawAxisPosition = axis.position;\n    var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n    var axisDim = axis.dim;\n    var rect = grid.getRect();\n    var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n    var idx = {\n      left: 0,\n      right: 1,\n      top: 0,\n      bottom: 1,\n      onZero: 2\n    };\n    var axisOffset = axisModel.get('offset') || 0;\n    var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n\n    if (otherAxisOnZeroOf) {\n      var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n      posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n    } // Axis position\n\n\n    layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]]; // Axis rotation\n\n    layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1); // Tick and label direction, x y is axisDim\n\n    var dirMap = {\n      top: -1,\n      bottom: 1,\n      left: -1,\n      right: 1\n    };\n    layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n    layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n\n    if (axisModel.get(['axisTick', 'inside'])) {\n      layout.tickDirection = -layout.tickDirection;\n    }\n\n    if (retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\n      layout.labelDirection = -layout.labelDirection;\n    } // Special label rotation\n\n\n    var labelRotate = axisModel.get(['axisLabel', 'rotate']);\n    layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate; // Over splitLine and splitArea\n\n    layout.z2 = 1;\n    return layout;\n  }\n\n  function isCartesian2DSeries(seriesModel) {\n    return seriesModel.get('coordinateSystem') === 'cartesian2d';\n  }\n\n  function findAxisModels(seriesModel) {\n    var axisModelMap = {\n      xAxisModel: null,\n      yAxisModel: null\n    };\n    each(axisModelMap, function (v, key) {\n      var axisType = key.replace(/Model$/, '');\n      var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n      {\n        if (!axisModel) {\n          throw new Error(axisType + ' \"' + retrieve3(seriesModel.get(axisType + 'Index'), seriesModel.get(axisType + 'Id'), 0) + '\" not found');\n        }\n      }\n      axisModelMap[key] = axisModel;\n    });\n    return axisModelMap;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var mathLog$1 = Math.log;\n\n  function alignScaleTicks(scale, axisModel, alignToScale) {\n    var intervalScaleProto = IntervalScale.prototype; // NOTE: There is a precondition for log scale  here:\n    // In log scale we store _interval and _extent of exponent value.\n    // So if we use the method of InternalScale to set/get these data.\n    // It process the exponent value, which is linear and what we want here.\n\n    var alignToTicks = intervalScaleProto.getTicks.call(alignToScale);\n    var alignToNicedTicks = intervalScaleProto.getTicks.call(alignToScale, true);\n    var alignToSplitNumber = alignToTicks.length - 1;\n    var alignToInterval = intervalScaleProto.getInterval.call(alignToScale);\n    var scaleExtent = getScaleExtent(scale, axisModel);\n    var rawExtent = scaleExtent.extent;\n    var isMinFixed = scaleExtent.fixMin;\n    var isMaxFixed = scaleExtent.fixMax;\n\n    if (scale.type === 'log') {\n      var logBase = mathLog$1(scale.base);\n      rawExtent = [mathLog$1(rawExtent[0]) / logBase, mathLog$1(rawExtent[1]) / logBase];\n    }\n\n    scale.setExtent(rawExtent[0], rawExtent[1]);\n    scale.calcNiceExtent({\n      splitNumber: alignToSplitNumber,\n      fixMin: isMinFixed,\n      fixMax: isMaxFixed\n    });\n    var extent = intervalScaleProto.getExtent.call(scale); // Need to update the rawExtent.\n    // Because value in rawExtent may be not parsed. e.g. 'dataMin', 'dataMax'\n\n    if (isMinFixed) {\n      rawExtent[0] = extent[0];\n    }\n\n    if (isMaxFixed) {\n      rawExtent[1] = extent[1];\n    }\n\n    var interval = intervalScaleProto.getInterval.call(scale);\n    var min = rawExtent[0];\n    var max = rawExtent[1];\n\n    if (isMinFixed && isMaxFixed) {\n      // User set min, max, divide to get new interval\n      interval = (max - min) / alignToSplitNumber;\n    } else if (isMinFixed) {\n      max = rawExtent[0] + interval * alignToSplitNumber; // User set min, expand extent on the other side\n\n      while (max < rawExtent[1] && isFinite(max) && isFinite(rawExtent[1])) {\n        interval = increaseInterval(interval);\n        max = rawExtent[0] + interval * alignToSplitNumber;\n      }\n    } else if (isMaxFixed) {\n      // User set max, expand extent on the other side\n      min = rawExtent[1] - interval * alignToSplitNumber;\n\n      while (min > rawExtent[0] && isFinite(min) && isFinite(rawExtent[0])) {\n        interval = increaseInterval(interval);\n        min = rawExtent[1] - interval * alignToSplitNumber;\n      }\n    } else {\n      var nicedSplitNumber = scale.getTicks().length - 1;\n\n      if (nicedSplitNumber > alignToSplitNumber) {\n        interval = increaseInterval(interval);\n      }\n\n      var range = interval * alignToSplitNumber;\n      max = Math.ceil(rawExtent[1] / interval) * interval;\n      min = round(max - range); // Not change the result that crossing zero.\n\n      if (min < 0 && rawExtent[0] >= 0) {\n        min = 0;\n        max = round(range);\n      } else if (max > 0 && rawExtent[1] <= 0) {\n        max = 0;\n        min = -round(range);\n      }\n    } // Adjust min, max based on the extent of alignTo. When min or max is set in alignTo scale\n\n\n    var t0 = (alignToTicks[0].value - alignToNicedTicks[0].value) / alignToInterval;\n    var t1 = (alignToTicks[alignToSplitNumber].value - alignToNicedTicks[alignToSplitNumber].value) / alignToInterval; // NOTE: Must in setExtent -> setInterval -> setNiceExtent order.\n\n    intervalScaleProto.setExtent.call(scale, min + interval * t0, max + interval * t1);\n    intervalScaleProto.setInterval.call(scale, interval);\n\n    if (t0 || t1) {\n      intervalScaleProto.setNiceExtent.call(scale, min + interval, max - interval);\n    }\n\n    {\n      var ticks = intervalScaleProto.getTicks.call(scale);\n\n      if (ticks[1] && (!isValueNice(interval) || getPrecisionSafe(ticks[1].value) > getPrecisionSafe(interval))) {\n        warn( // eslint-disable-next-line\n        \"The ticks may be not readable when set min: \" + axisModel.get('min') + \", max: \" + axisModel.get('max') + \" and alignTicks: true\");\n      }\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Grid is a region which contains at most 4 cartesian systems\n   *\n   * TODO Default cartesian\n   */\n\n\n  var Grid =\n  /** @class */\n  function () {\n    function Grid(gridModel, ecModel, api) {\n      // FIXME:TS where used (different from registered type 'cartesian2d')?\n      this.type = 'grid';\n      this._coordsMap = {};\n      this._coordsList = [];\n      this._axesMap = {};\n      this._axesList = [];\n      this.axisPointerEnabled = true;\n      this.dimensions = cartesian2DDimensions;\n\n      this._initCartesian(gridModel, ecModel, api);\n\n      this.model = gridModel;\n    }\n\n    Grid.prototype.getRect = function () {\n      return this._rect;\n    };\n\n    Grid.prototype.update = function (ecModel, api) {\n      var axesMap = this._axesMap;\n\n      this._updateScale(ecModel, this.model);\n\n      function updateAxisTicks(axes) {\n        var alignTo; // Axis is added in order of axisIndex.\n\n        var axesIndices = keys(axes);\n        var len = axesIndices.length;\n\n        if (!len) {\n          return;\n        }\n\n        var axisNeedsAlign = []; // Process once and calculate the ticks for those don't use alignTicks.\n\n        for (var i = len - 1; i >= 0; i--) {\n          var idx = +axesIndices[i]; // Convert to number.\n\n          var axis = axes[idx];\n          var model = axis.model;\n          var scale = axis.scale;\n\n          if ( // Only value and log axis without interval support alignTicks.\n          isIntervalOrLogScale(scale) && model.get('alignTicks') && model.get('interval') == null) {\n            axisNeedsAlign.push(axis);\n          } else {\n            niceScaleExtent(scale, model);\n\n            if (isIntervalOrLogScale(scale)) {\n              // Can only align to interval or log axis.\n              alignTo = axis;\n            }\n          }\n        } // All axes has set alignTicks. Pick the first one.\n        // PENDING. Should we find the axis that both set interval, min, max and align to this one?\n\n\n        if (axisNeedsAlign.length) {\n          if (!alignTo) {\n            alignTo = axisNeedsAlign.pop();\n            niceScaleExtent(alignTo.scale, alignTo.model);\n          }\n\n          each(axisNeedsAlign, function (axis) {\n            alignScaleTicks(axis.scale, axis.model, alignTo.scale);\n          });\n        }\n      }\n\n      updateAxisTicks(axesMap.x);\n      updateAxisTicks(axesMap.y); // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n\n      var onZeroRecords = {};\n      each(axesMap.x, function (xAxis) {\n        fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n      });\n      each(axesMap.y, function (yAxis) {\n        fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n      }); // Resize again if containLabel is enabled\n      // FIXME It may cause getting wrong grid size in data processing stage\n\n      this.resize(this.model, api);\n    };\n    /**\n     * Resize the grid\n     */\n\n\n    Grid.prototype.resize = function (gridModel, api, ignoreContainLabel) {\n      var boxLayoutParams = gridModel.getBoxLayoutParams();\n      var isContainLabel = !ignoreContainLabel && gridModel.get('containLabel');\n      var gridRect = getLayoutRect(boxLayoutParams, {\n        width: api.getWidth(),\n        height: api.getHeight()\n      });\n      this._rect = gridRect;\n      var axesList = this._axesList;\n      adjustAxes(); // Minus label size\n\n      if (isContainLabel) {\n        each(axesList, function (axis) {\n          if (!axis.model.get(['axisLabel', 'inside'])) {\n            var labelUnionRect = estimateLabelUnionRect(axis);\n\n            if (labelUnionRect) {\n              var dim = axis.isHorizontal() ? 'height' : 'width';\n              var margin = axis.model.get(['axisLabel', 'margin']);\n              gridRect[dim] -= labelUnionRect[dim] + margin;\n\n              if (axis.position === 'top') {\n                gridRect.y += labelUnionRect.height + margin;\n              } else if (axis.position === 'left') {\n                gridRect.x += labelUnionRect.width + margin;\n              }\n            }\n          }\n        });\n        adjustAxes();\n      }\n\n      each(this._coordsList, function (coord) {\n        // Calculate affine matrix to accelerate the data to point transform.\n        // If all the axes scales are time or value.\n        coord.calcAffineTransform();\n      });\n\n      function adjustAxes() {\n        each(axesList, function (axis) {\n          var isHorizontal = axis.isHorizontal();\n          var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n          var idx = axis.inverse ? 1 : 0;\n          axis.setExtent(extent[idx], extent[1 - idx]);\n          updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n        });\n      }\n    };\n\n    Grid.prototype.getAxis = function (dim, axisIndex) {\n      var axesMapOnDim = this._axesMap[dim];\n\n      if (axesMapOnDim != null) {\n        return axesMapOnDim[axisIndex || 0];\n      }\n    };\n\n    Grid.prototype.getAxes = function () {\n      return this._axesList.slice();\n    };\n\n    Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\n      if (xAxisIndex != null && yAxisIndex != null) {\n        var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n        return this._coordsMap[key];\n      }\n\n      if (isObject(xAxisIndex)) {\n        yAxisIndex = xAxisIndex.yAxisIndex;\n        xAxisIndex = xAxisIndex.xAxisIndex;\n      }\n\n      for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n        if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n          return coordList[i];\n        }\n      }\n    };\n\n    Grid.prototype.getCartesians = function () {\n      return this._coordsList.slice();\n    };\n    /**\n     * @implements\n     */\n\n\n    Grid.prototype.convertToPixel = function (ecModel, finder, value) {\n      var target = this._findConvertTarget(finder);\n\n      return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n    };\n    /**\n     * @implements\n     */\n\n\n    Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\n      var target = this._findConvertTarget(finder);\n\n      return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n    };\n\n    Grid.prototype._findConvertTarget = function (finder) {\n      var seriesModel = finder.seriesModel;\n      var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n      var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n      var gridModel = finder.gridModel;\n      var coordsList = this._coordsList;\n      var cartesian;\n      var axis;\n\n      if (seriesModel) {\n        cartesian = seriesModel.coordinateSystem;\n        indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n      } else if (xAxisModel && yAxisModel) {\n        cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n      } else if (xAxisModel) {\n        axis = this.getAxis('x', xAxisModel.componentIndex);\n      } else if (yAxisModel) {\n        axis = this.getAxis('y', yAxisModel.componentIndex);\n      } // Lowest priority.\n      else if (gridModel) {\n          var grid = gridModel.coordinateSystem;\n\n          if (grid === this) {\n            cartesian = this._coordsList[0];\n          }\n        }\n\n      return {\n        cartesian: cartesian,\n        axis: axis\n      };\n    };\n    /**\n     * @implements\n     */\n\n\n    Grid.prototype.containPoint = function (point) {\n      var coord = this._coordsList[0];\n\n      if (coord) {\n        return coord.containPoint(point);\n      }\n    };\n    /**\n     * Initialize cartesian coordinate systems\n     */\n\n\n    Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\n      var _this = this;\n\n      var grid = this;\n      var axisPositionUsed = {\n        left: false,\n        right: false,\n        top: false,\n        bottom: false\n      };\n      var axesMap = {\n        x: {},\n        y: {}\n      };\n      var axesCount = {\n        x: 0,\n        y: 0\n      }; /// Create axis\n\n      ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n      ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n      if (!axesCount.x || !axesCount.y) {\n        // Roll back when there no either x or y axis\n        this._axesMap = {};\n        this._axesList = [];\n        return;\n      }\n\n      this._axesMap = axesMap; /// Create cartesian2d\n\n      each(axesMap.x, function (xAxis, xAxisIndex) {\n        each(axesMap.y, function (yAxis, yAxisIndex) {\n          var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n          var cartesian = new Cartesian2D(key);\n          cartesian.master = _this;\n          cartesian.model = gridModel;\n          _this._coordsMap[key] = cartesian;\n\n          _this._coordsList.push(cartesian);\n\n          cartesian.addAxis(xAxis);\n          cartesian.addAxis(yAxis);\n        });\n      });\n\n      function createAxisCreator(dimName) {\n        return function (axisModel, idx) {\n          if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\n            return;\n          }\n\n          var axisPosition = axisModel.get('position');\n\n          if (dimName === 'x') {\n            // Fix position\n            if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n              // Default bottom of X\n              axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n            }\n          } else {\n            // Fix position\n            if (axisPosition !== 'left' && axisPosition !== 'right') {\n              // Default left of Y\n              axisPosition = axisPositionUsed.left ? 'right' : 'left';\n            }\n          }\n\n          axisPositionUsed[axisPosition] = true;\n          var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n          var isCategory = axis.type === 'category';\n          axis.onBand = isCategory && axisModel.get('boundaryGap');\n          axis.inverse = axisModel.get('inverse'); // Inject axis into axisModel\n\n          axisModel.axis = axis; // Inject axisModel into axis\n\n          axis.model = axisModel; // Inject grid info axis\n\n          axis.grid = grid; // Index of axis, can be used as key\n\n          axis.index = idx;\n\n          grid._axesList.push(axis);\n\n          axesMap[dimName][idx] = axis;\n          axesCount[dimName]++;\n        };\n      }\n    };\n    /**\n     * Update cartesian properties from series.\n     */\n\n\n    Grid.prototype._updateScale = function (ecModel, gridModel) {\n      // Reset scale\n      each(this._axesList, function (axis) {\n        axis.scale.setExtent(Infinity, -Infinity);\n\n        if (axis.type === 'category') {\n          var categorySortInfo = axis.model.get('categorySortInfo');\n          axis.scale.setSortInfo(categorySortInfo);\n        }\n      });\n      ecModel.eachSeries(function (seriesModel) {\n        if (isCartesian2DSeries(seriesModel)) {\n          var axesModelMap = findAxisModels(seriesModel);\n          var xAxisModel = axesModelMap.xAxisModel;\n          var yAxisModel = axesModelMap.yAxisModel;\n\n          if (!isAxisUsedInTheGrid(xAxisModel, gridModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\n            return;\n          }\n\n          var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n          var data = seriesModel.getData();\n          var xAxis = cartesian.getAxis('x');\n          var yAxis = cartesian.getAxis('y');\n          unionExtent(data, xAxis);\n          unionExtent(data, yAxis);\n        }\n      }, this);\n\n      function unionExtent(data, axis) {\n        each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\n          axis.scale.unionExtentFromData(data, dim);\n        });\n      }\n    };\n    /**\n     * @param dim 'x' or 'y' or 'auto' or null/undefined\n     */\n\n\n    Grid.prototype.getTooltipAxes = function (dim) {\n      var baseAxes = [];\n      var otherAxes = [];\n      each(this.getCartesians(), function (cartesian) {\n        var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n        var otherAxis = cartesian.getOtherAxis(baseAxis);\n        indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n        indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n      });\n      return {\n        baseAxes: baseAxes,\n        otherAxes: otherAxes\n      };\n    };\n\n    Grid.create = function (ecModel, api) {\n      var grids = [];\n      ecModel.eachComponent('grid', function (gridModel, idx) {\n        var grid = new Grid(gridModel, ecModel, api);\n        grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n        // should be performed in create stage.\n\n        grid.resize(gridModel, api, true);\n        gridModel.coordinateSystem = grid;\n        grids.push(grid);\n      }); // Inject the coordinateSystems into seriesModel\n\n      ecModel.eachSeries(function (seriesModel) {\n        if (!isCartesian2DSeries(seriesModel)) {\n          return;\n        }\n\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n        var gridModel = xAxisModel.getCoordSysModel();\n        {\n          if (!gridModel) {\n            throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\n          }\n\n          if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\n            throw new Error('xAxis and yAxis must use the same grid');\n          }\n        }\n        var grid = gridModel.coordinateSystem;\n        seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n      });\n      return grids;\n    }; // For deciding which dimensions to use when creating list data\n\n\n    Grid.dimensions = cartesian2DDimensions;\n    return Grid;\n  }();\n  /**\n   * Check if the axis is used in the specified grid.\n   */\n\n\n  function isAxisUsedInTheGrid(axisModel, gridModel) {\n    return axisModel.getCoordSysModel() === gridModel;\n  }\n\n  function fixAxisOnZero(axesMap, otherAxisDim, axis, // Key: see `getOnZeroRecordKey`\n  onZeroRecords) {\n    axis.getAxesOnZeroOf = function () {\n      // TODO: onZero of multiple axes.\n      return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n    }; // onZero can not be enabled in these two situations:\n    // 1. When any other axis is a category axis.\n    // 2. When no axis is cross 0 point.\n\n\n    var otherAxes = axesMap[otherAxisDim];\n    var otherAxisOnZeroOf;\n    var axisModel = axis.model;\n    var onZero = axisModel.get(['axisLine', 'onZero']);\n    var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\n\n    if (!onZero) {\n      return;\n    } // If target axis is specified.\n\n\n    if (onZeroAxisIndex != null) {\n      if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n        otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n      }\n    } else {\n      // Find the first available other axis.\n      for (var idx in otherAxes) {\n        if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx]) // Consider that two Y axes on one value axis,\n        // if both onZero, the two Y axes overlap.\n        && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n          otherAxisOnZeroOf = otherAxes[idx];\n          break;\n        }\n      }\n    }\n\n    if (otherAxisOnZeroOf) {\n      onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n    }\n\n    function getOnZeroRecordKey(axis) {\n      return axis.dim + '_' + axis.index;\n    }\n  }\n\n  function canOnZeroToAxis(axis) {\n    return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n  }\n\n  function updateAxisTransform(axis, coordBase) {\n    var axisExtent = axis.getExtent();\n    var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n    axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n      return coord + coordBase;\n    } : function (coord) {\n      return axisExtentSum - coord + coordBase;\n    };\n    axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n      return coord - coordBase;\n    } : function (coord) {\n      return axisExtentSum - coord + coordBase;\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var PI$4 = Math.PI;\n  /**\n   * A final axis is translated and rotated from a \"standard axis\".\n   * So opt.position and opt.rotation is required.\n   *\n   * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\n   * for example: (0, 0) ------------> (0, 50)\n   *\n   * nameDirection or tickDirection or labelDirection is 1 means tick\n   * or label is below the standard axis, whereas is -1 means above\n   * the standard axis. labelOffset means offset between label and axis,\n   * which is useful when 'onZero', where axisLabel is in the grid and\n   * label in outside grid.\n   *\n   * Tips: like always,\n   * positive rotation represents anticlockwise, and negative rotation\n   * represents clockwise.\n   * The direction of position coordinate is the same as the direction\n   * of screen coordinate.\n   *\n   * Do not need to consider axis 'inverse', which is auto processed by\n   * axis extent.\n   */\n\n  var AxisBuilder =\n  /** @class */\n  function () {\n    function AxisBuilder(axisModel, opt) {\n      this.group = new Group();\n      this.opt = opt;\n      this.axisModel = axisModel; // Default value\n\n      defaults(opt, {\n        labelOffset: 0,\n        nameDirection: 1,\n        tickDirection: 1,\n        labelDirection: 1,\n        silent: true,\n        handleAutoShown: function () {\n          return true;\n        }\n      }); // FIXME Not use a seperate text group?\n\n      var transformGroup = new Group({\n        x: opt.position[0],\n        y: opt.position[1],\n        rotation: opt.rotation\n      }); // this.group.add(transformGroup);\n      // this._transformGroup = transformGroup;\n\n      transformGroup.updateTransform();\n      this._transformGroup = transformGroup;\n    }\n\n    AxisBuilder.prototype.hasBuilder = function (name) {\n      return !!builders[name];\n    };\n\n    AxisBuilder.prototype.add = function (name) {\n      builders[name](this.opt, this.axisModel, this.group, this._transformGroup);\n    };\n\n    AxisBuilder.prototype.getGroup = function () {\n      return this.group;\n    };\n\n    AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n      var rotationDiff = remRadian(textRotation - axisRotation);\n      var textAlign;\n      var textVerticalAlign;\n\n      if (isRadianAroundZero(rotationDiff)) {\n        // Label is parallel with axis line.\n        textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n        textAlign = 'center';\n      } else if (isRadianAroundZero(rotationDiff - PI$4)) {\n        // Label is inverse parallel with axis line.\n        textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n        textAlign = 'center';\n      } else {\n        textVerticalAlign = 'middle';\n\n        if (rotationDiff > 0 && rotationDiff < PI$4) {\n          textAlign = direction > 0 ? 'right' : 'left';\n        } else {\n          textAlign = direction > 0 ? 'left' : 'right';\n        }\n      }\n\n      return {\n        rotation: rotationDiff,\n        textAlign: textAlign,\n        textVerticalAlign: textVerticalAlign\n      };\n    };\n\n    AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n      var eventData = {\n        componentType: axisModel.mainType,\n        componentIndex: axisModel.componentIndex\n      };\n      eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n      return eventData;\n    };\n\n    AxisBuilder.isLabelSilent = function (axisModel) {\n      var tooltipOpt = axisModel.get('tooltip');\n      return axisModel.get('silent') // Consider mouse cursor, add these restrictions.\n      || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n    };\n\n    return AxisBuilder;\n  }();\n\n  var builders = {\n    axisLine: function (opt, axisModel, group, transformGroup) {\n      var shown = axisModel.get(['axisLine', 'show']);\n\n      if (shown === 'auto' && opt.handleAutoShown) {\n        shown = opt.handleAutoShown('axisLine');\n      }\n\n      if (!shown) {\n        return;\n      }\n\n      var extent = axisModel.axis.getExtent();\n      var matrix = transformGroup.transform;\n      var pt1 = [extent[0], 0];\n      var pt2 = [extent[1], 0];\n\n      if (matrix) {\n        applyTransform(pt1, pt1, matrix);\n        applyTransform(pt2, pt2, matrix);\n      }\n\n      var lineStyle = extend({\n        lineCap: 'round'\n      }, axisModel.getModel(['axisLine', 'lineStyle']).getLineStyle());\n      var line = new Line({\n        // Id for animation\n        subPixelOptimize: true,\n        shape: {\n          x1: pt1[0],\n          y1: pt1[1],\n          x2: pt2[0],\n          y2: pt2[1]\n        },\n        style: lineStyle,\n        strokeContainThreshold: opt.strokeContainThreshold || 5,\n        silent: true,\n        z2: 1\n      });\n      line.anid = 'line';\n      group.add(line);\n      var arrows = axisModel.get(['axisLine', 'symbol']);\n\n      if (arrows != null) {\n        var arrowSize = axisModel.get(['axisLine', 'symbolSize']);\n\n        if (isString(arrows)) {\n          // Use the same arrow for start and end point\n          arrows = [arrows, arrows];\n        }\n\n        if (isString(arrowSize) || isNumber(arrowSize)) {\n          // Use the same size for width and height\n          arrowSize = [arrowSize, arrowSize];\n        }\n\n        var arrowOffset = normalizeSymbolOffset(axisModel.get(['axisLine', 'symbolOffset']) || 0, arrowSize);\n        var symbolWidth_1 = arrowSize[0];\n        var symbolHeight_1 = arrowSize[1];\n        each([{\n          rotate: opt.rotation + Math.PI / 2,\n          offset: arrowOffset[0],\n          r: 0\n        }, {\n          rotate: opt.rotation - Math.PI / 2,\n          offset: arrowOffset[1],\n          r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n        }], function (point, index) {\n          if (arrows[index] !== 'none' && arrows[index] != null) {\n            var symbol = createSymbol(arrows[index], -symbolWidth_1 / 2, -symbolHeight_1 / 2, symbolWidth_1, symbolHeight_1, lineStyle.stroke, true); // Calculate arrow position with offset\n\n            var r = point.r + point.offset;\n            symbol.attr({\n              rotation: point.rotate,\n              x: pt1[0] + r * Math.cos(opt.rotation),\n              y: pt1[1] - r * Math.sin(opt.rotation),\n              silent: true,\n              z2: 11\n            });\n            group.add(symbol);\n          }\n        });\n      }\n    },\n    axisTickLabel: function (opt, axisModel, group, transformGroup) {\n      var ticksEls = buildAxisMajorTicks(group, transformGroup, axisModel, opt);\n      var labelEls = buildAxisLabel(group, transformGroup, axisModel, opt);\n      fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\n      buildAxisMinorTicks(group, transformGroup, axisModel, opt.tickDirection); // This bit fixes the label overlap issue for the time chart.\n      // See https://github.com/apache/echarts/issues/14266 for more.\n\n      if (axisModel.get(['axisLabel', 'hideOverlap'])) {\n        var labelList = prepareLayoutList(map(labelEls, function (label) {\n          return {\n            label: label,\n            priority: label.z2,\n            defaultAttr: {\n              ignore: label.ignore\n            }\n          };\n        }));\n        hideOverlap(labelList);\n      }\n    },\n    axisName: function (opt, axisModel, group, transformGroup) {\n      var name = retrieve(opt.axisName, axisModel.get('name'));\n\n      if (!name) {\n        return;\n      }\n\n      var nameLocation = axisModel.get('nameLocation');\n      var nameDirection = opt.nameDirection;\n      var textStyleModel = axisModel.getModel('nameTextStyle');\n      var gap = axisModel.get('nameGap') || 0;\n      var extent = axisModel.axis.getExtent();\n      var gapSignal = extent[0] > extent[1] ? -1 : 1;\n      var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2, // Reuse labelOffset.\n      isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n      var labelLayout;\n      var nameRotation = axisModel.get('nameRotate');\n\n      if (nameRotation != null) {\n        nameRotation = nameRotation * PI$4 / 180; // To radian.\n      }\n\n      var axisNameAvailableWidth;\n\n      if (isNameLocationCenter(nameLocation)) {\n        labelLayout = AxisBuilder.innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, // Adapt to axis.\n        nameDirection);\n      } else {\n        labelLayout = endTextLayout(opt.rotation, nameLocation, nameRotation || 0, extent);\n        axisNameAvailableWidth = opt.axisNameAvailableWidth;\n\n        if (axisNameAvailableWidth != null) {\n          axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n          !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n        }\n      }\n\n      var textFont = textStyleModel.getFont();\n      var truncateOpt = axisModel.get('nameTruncate', true) || {};\n      var ellipsis = truncateOpt.ellipsis;\n      var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth);\n      var textEl = new ZRText({\n        x: pos[0],\n        y: pos[1],\n        rotation: labelLayout.rotation,\n        silent: AxisBuilder.isLabelSilent(axisModel),\n        style: createTextStyle(textStyleModel, {\n          text: name,\n          font: textFont,\n          overflow: 'truncate',\n          width: maxWidth,\n          ellipsis: ellipsis,\n          fill: textStyleModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']),\n          align: textStyleModel.get('align') || labelLayout.textAlign,\n          verticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n        }),\n        z2: 1\n      });\n      setTooltipConfig({\n        el: textEl,\n        componentModel: axisModel,\n        itemName: name\n      });\n      textEl.__fullText = name; // Id for animation\n\n      textEl.anid = 'name';\n\n      if (axisModel.get('triggerEvent')) {\n        var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n        eventData.targetType = 'axisName';\n        eventData.name = name;\n        getECData(textEl).eventData = eventData;\n      } // FIXME\n\n\n      transformGroup.add(textEl);\n      textEl.updateTransform();\n      group.add(textEl);\n      textEl.decomposeTransform();\n    }\n  };\n\n  function endTextLayout(rotation, textPosition, textRotate, extent) {\n    var rotationDiff = remRadian(textRotate - rotation);\n    var textAlign;\n    var textVerticalAlign;\n    var inverse = extent[0] > extent[1];\n    var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n\n    if (isRadianAroundZero(rotationDiff - PI$4 / 2)) {\n      textVerticalAlign = onLeft ? 'bottom' : 'top';\n      textAlign = 'center';\n    } else if (isRadianAroundZero(rotationDiff - PI$4 * 1.5)) {\n      textVerticalAlign = onLeft ? 'top' : 'bottom';\n      textAlign = 'center';\n    } else {\n      textVerticalAlign = 'middle';\n\n      if (rotationDiff < PI$4 * 1.5 && rotationDiff > PI$4 / 2) {\n        textAlign = onLeft ? 'left' : 'right';\n      } else {\n        textAlign = onLeft ? 'right' : 'left';\n      }\n    }\n\n    return {\n      rotation: rotationDiff,\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n  }\n\n  function fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n    if (shouldShowAllLabels(axisModel.axis)) {\n      return;\n    } // If min or max are user set, we need to check\n    // If the tick on min(max) are overlap on their neighbour tick\n    // If they are overlapped, we need to hide the min(max) tick label\n\n\n    var showMinLabel = axisModel.get(['axisLabel', 'showMinLabel']);\n    var showMaxLabel = axisModel.get(['axisLabel', 'showMaxLabel']); // FIXME\n    // Have not consider onBand yet, where tick els is more than label els.\n\n    labelEls = labelEls || [];\n    tickEls = tickEls || [];\n    var firstLabel = labelEls[0];\n    var nextLabel = labelEls[1];\n    var lastLabel = labelEls[labelEls.length - 1];\n    var prevLabel = labelEls[labelEls.length - 2];\n    var firstTick = tickEls[0];\n    var nextTick = tickEls[1];\n    var lastTick = tickEls[tickEls.length - 1];\n    var prevTick = tickEls[tickEls.length - 2];\n\n    if (showMinLabel === false) {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n      if (showMinLabel) {\n        ignoreEl(nextLabel);\n        ignoreEl(nextTick);\n      } else {\n        ignoreEl(firstLabel);\n        ignoreEl(firstTick);\n      }\n    }\n\n    if (showMaxLabel === false) {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n      if (showMaxLabel) {\n        ignoreEl(prevLabel);\n        ignoreEl(prevTick);\n      } else {\n        ignoreEl(lastLabel);\n        ignoreEl(lastTick);\n      }\n    }\n  }\n\n  function ignoreEl(el) {\n    el && (el.ignore = true);\n  }\n\n  function isTwoLabelOverlapped(current, next) {\n    // current and next has the same rotation.\n    var firstRect = current && current.getBoundingRect().clone();\n    var nextRect = next && next.getBoundingRect().clone();\n\n    if (!firstRect || !nextRect) {\n      return;\n    } // When checking intersect of two rotated labels, we use mRotationBack\n    // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n\n\n    var mRotationBack = identity([]);\n    rotate(mRotationBack, mRotationBack, -current.rotation);\n    firstRect.applyTransform(mul$1([], mRotationBack, current.getLocalTransform()));\n    nextRect.applyTransform(mul$1([], mRotationBack, next.getLocalTransform()));\n    return firstRect.intersect(nextRect);\n  }\n\n  function isNameLocationCenter(nameLocation) {\n    return nameLocation === 'middle' || nameLocation === 'center';\n  }\n\n  function createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, anidPrefix) {\n    var tickEls = [];\n    var pt1 = [];\n    var pt2 = [];\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = ticksCoords[i].coord;\n      pt1[0] = tickCoord;\n      pt1[1] = 0;\n      pt2[0] = tickCoord;\n      pt2[1] = tickEndCoord;\n\n      if (tickTransform) {\n        applyTransform(pt1, pt1, tickTransform);\n        applyTransform(pt2, pt2, tickTransform);\n      } // Tick line, Not use group transform to have better line draw\n\n\n      var tickEl = new Line({\n        subPixelOptimize: true,\n        shape: {\n          x1: pt1[0],\n          y1: pt1[1],\n          x2: pt2[0],\n          y2: pt2[1]\n        },\n        style: tickLineStyle,\n        z2: 2,\n        autoBatch: true,\n        silent: true\n      });\n      tickEl.anid = anidPrefix + '_' + ticksCoords[i].tickValue;\n      tickEls.push(tickEl);\n    }\n\n    return tickEls;\n  }\n\n  function buildAxisMajorTicks(group, transformGroup, axisModel, opt) {\n    var axis = axisModel.axis;\n    var tickModel = axisModel.getModel('axisTick');\n    var shown = tickModel.get('show');\n\n    if (shown === 'auto' && opt.handleAutoShown) {\n      shown = opt.handleAutoShown('axisTick');\n    }\n\n    if (!shown || axis.scale.isBlank()) {\n      return;\n    }\n\n    var lineStyleModel = tickModel.getModel('lineStyle');\n    var tickEndCoord = opt.tickDirection * tickModel.get('length');\n    var ticksCoords = axis.getTicksCoords();\n    var ticksEls = createTicks(ticksCoords, transformGroup.transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n      stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n    }), 'ticks');\n\n    for (var i = 0; i < ticksEls.length; i++) {\n      group.add(ticksEls[i]);\n    }\n\n    return ticksEls;\n  }\n\n  function buildAxisMinorTicks(group, transformGroup, axisModel, tickDirection) {\n    var axis = axisModel.axis;\n    var minorTickModel = axisModel.getModel('minorTick');\n\n    if (!minorTickModel.get('show') || axis.scale.isBlank()) {\n      return;\n    }\n\n    var minorTicksCoords = axis.getMinorTicksCoords();\n\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var lineStyleModel = minorTickModel.getModel('lineStyle');\n    var tickEndCoord = tickDirection * minorTickModel.get('length');\n    var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n      stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n    }));\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      var minorTicksEls = createTicks(minorTicksCoords[i], transformGroup.transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n\n      for (var k = 0; k < minorTicksEls.length; k++) {\n        group.add(minorTicksEls[k]);\n      }\n    }\n  }\n\n  function buildAxisLabel(group, transformGroup, axisModel, opt) {\n    var axis = axisModel.axis;\n    var show = retrieve(opt.axisLabelShow, axisModel.get(['axisLabel', 'show']));\n\n    if (!show || axis.scale.isBlank()) {\n      return;\n    }\n\n    var labelModel = axisModel.getModel('axisLabel');\n    var labelMargin = labelModel.get('margin');\n    var labels = axis.getViewLabels(); // Special label rotate.\n\n    var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI$4 / 180;\n    var labelLayout = AxisBuilder.innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n    var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n    var labelEls = [];\n    var silent = AxisBuilder.isLabelSilent(axisModel);\n    var triggerEvent = axisModel.get('triggerEvent');\n    each(labels, function (labelItem, index) {\n      var tickValue = axis.scale.type === 'ordinal' ? axis.scale.getRawOrdinalNumber(labelItem.tickValue) : labelItem.tickValue;\n      var formattedLabel = labelItem.formattedLabel;\n      var rawLabel = labelItem.rawLabel;\n      var itemLabelModel = labelModel;\n\n      if (rawCategoryData && rawCategoryData[tickValue]) {\n        var rawCategoryItem = rawCategoryData[tickValue];\n\n        if (isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\n          itemLabelModel = new Model(rawCategoryItem.textStyle, labelModel, axisModel.ecModel);\n        }\n      }\n\n      var textColor = itemLabelModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']);\n      var tickCoord = axis.dataToCoord(tickValue);\n      var textEl = new ZRText({\n        x: tickCoord,\n        y: opt.labelOffset + opt.labelDirection * labelMargin,\n        rotation: labelLayout.rotation,\n        silent: silent,\n        z2: 10 + (labelItem.level || 0),\n        style: createTextStyle(itemLabelModel, {\n          text: formattedLabel,\n          align: itemLabelModel.getShallow('align', true) || labelLayout.textAlign,\n          verticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign,\n          fill: isFunction(textColor) ? textColor( // (1) In category axis with data zoom, tick is not the original\n          // index of axis.data. So tick should not be exposed to user\n          // in category axis.\n          // (2) Compatible with previous version, which always use formatted label as\n          // input. But in interval scale the formatted label is like '223,445', which\n          // maked user repalce ','. So we modify it to return original val but remain\n          // it as 'string' to avoid error in replacing.\n          axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n        })\n      });\n      textEl.anid = 'label_' + tickValue; // Pack data for mouse event\n\n      if (triggerEvent) {\n        var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n        eventData.targetType = 'axisLabel';\n        eventData.value = rawLabel;\n        eventData.tickIndex = index;\n\n        if (axis.type === 'category') {\n          eventData.dataIndex = tickValue;\n        }\n\n        getECData(textEl).eventData = eventData;\n      } // FIXME\n\n\n      transformGroup.add(textEl);\n      textEl.updateTransform();\n      labelEls.push(textEl);\n      group.add(textEl);\n      textEl.decomposeTransform();\n    });\n    return labelEls;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // allAxesInfo should be updated when setOption performed.\n\n\n  function collect(ecModel, api) {\n    var result = {\n      /**\n       * key: makeKey(axis.model)\n       * value: {\n       *      axis,\n       *      coordSys,\n       *      axisPointerModel,\n       *      triggerTooltip,\n       *      involveSeries,\n       *      snap,\n       *      seriesModels,\n       *      seriesDataCount\n       * }\n       */\n      axesInfo: {},\n      seriesInvolved: false,\n\n      /**\n       * key: makeKey(coordSys.model)\n       * value: Object: key makeKey(axis.model), value: axisInfo\n       */\n      coordSysAxesInfo: {},\n      coordSysMap: {}\n    };\n    collectAxesInfo(result, ecModel, api); // Check seriesInvolved for performance, in case too many series in some chart.\n\n    result.seriesInvolved && collectSeriesInfo(result, ecModel);\n    return result;\n  }\n\n  function collectAxesInfo(result, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var globalAxisPointerModel = ecModel.getComponent('axisPointer'); // links can only be set on global.\n\n    var linksOption = globalAxisPointerModel.get('link', true) || [];\n    var linkGroups = []; // Collect axes info.\n\n    each(api.getCoordinateSystems(), function (coordSys) {\n      // Some coordinate system do not support axes, like geo.\n      if (!coordSys.axisPointerEnabled) {\n        return;\n      }\n\n      var coordSysKey = makeKey(coordSys.model);\n      var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n      result.coordSysMap[coordSysKey] = coordSys; // Set tooltip (like 'cross') is a convienent way to show axisPointer\n      // for user. So we enable seting tooltip on coordSys model.\n\n      var coordSysModel = coordSys.model;\n      var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n      each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null)); // If axis tooltip used, choose tooltip axis for each coordSys.\n      // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n\n      if (coordSys.getTooltipAxes && globalTooltipModel // If tooltip.showContent is set as false, tooltip will not\n      // show but axisPointer will show as normal.\n      && baseTooltipModel.get('show')) {\n        // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n        // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n        var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n        var cross = baseTooltipModel.get(['axisPointer', 'type']) === 'cross';\n        var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get(['axisPointer', 'axis']));\n\n        if (triggerAxis || cross) {\n          each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n        }\n\n        if (cross) {\n          each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n        }\n      } // fromTooltip: true | false | 'cross'\n      // triggerTooltip: true | false | null\n\n\n      function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n        var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n        var axisPointerShow = axisPointerModel.get('show');\n\n        if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n          return;\n        }\n\n        if (triggerTooltip == null) {\n          triggerTooltip = axisPointerModel.get('triggerTooltip');\n        }\n\n        axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n        var snap = axisPointerModel.get('snap');\n        var axisKey = makeKey(axis.model);\n        var involveSeries = triggerTooltip || snap || axis.type === 'category'; // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n\n        var axisInfo = result.axesInfo[axisKey] = {\n          key: axisKey,\n          axis: axis,\n          coordSys: coordSys,\n          axisPointerModel: axisPointerModel,\n          triggerTooltip: triggerTooltip,\n          involveSeries: involveSeries,\n          snap: snap,\n          useHandle: isHandleTrigger(axisPointerModel),\n          seriesModels: [],\n          linkGroup: null\n        };\n        axesInfoInCoordSys[axisKey] = axisInfo;\n        result.seriesInvolved = result.seriesInvolved || involveSeries;\n        var groupIndex = getLinkGroupIndex(linksOption, axis);\n\n        if (groupIndex != null) {\n          var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n            axesInfo: {}\n          });\n          linkGroup.axesInfo[axisKey] = axisInfo;\n          linkGroup.mapper = linksOption[groupIndex].mapper;\n          axisInfo.linkGroup = linkGroup;\n        }\n      }\n    });\n  }\n\n  function makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n    var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n    var fields = ['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'];\n    var volatileOption = {};\n    each(fields, function (field) {\n      volatileOption[field] = clone(tooltipAxisPointerModel.get(field));\n    }); // category axis do not auto snap, otherwise some tick that do not\n    // has value can not be hovered. value/time/log axis default snap if\n    // triggered from tooltip and trigger tooltip.\n\n    volatileOption.snap = axis.type !== 'category' && !!triggerTooltip; // Compatibel with previous behavior, tooltip axis do not show label by default.\n    // Only these properties can be overrided from tooltip to axisPointer.\n\n    if (tooltipAxisPointerModel.get('type') === 'cross') {\n      volatileOption.type = 'line';\n    }\n\n    var labelOption = volatileOption.label || (volatileOption.label = {}); // Follow the convention, do not show label when triggered by tooltip by default.\n\n    labelOption.show == null && (labelOption.show = false);\n\n    if (fromTooltip === 'cross') {\n      // When 'cross', both axes show labels.\n      var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get(['label', 'show']);\n      labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true; // If triggerTooltip, this is a base axis, which should better not use cross style\n      // (cross style is dashed by default)\n\n      if (!triggerTooltip) {\n        var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n        crossStyle && defaults(labelOption, crossStyle.textStyle);\n      }\n    }\n\n    return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n  }\n\n  function collectSeriesInfo(result, ecModel) {\n    // Prepare data for axis trigger\n    ecModel.eachSeries(function (seriesModel) {\n      // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n      var coordSys = seriesModel.coordinateSystem;\n      var seriesTooltipTrigger = seriesModel.get(['tooltip', 'trigger'], true);\n      var seriesTooltipShow = seriesModel.get(['tooltip', 'show'], true);\n\n      if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get(['axisPointer', 'show'], true) === false) {\n        return;\n      }\n\n      each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n        var axis = axisInfo.axis;\n\n        if (coordSys.getAxis(axis.dim) === axis) {\n          axisInfo.seriesModels.push(seriesModel);\n          axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n          axisInfo.seriesDataCount += seriesModel.getData().count();\n        }\n      });\n    });\n  }\n  /**\n   * For example:\n   * {\n   *     axisPointer: {\n   *         links: [{\n   *             xAxisIndex: [2, 4],\n   *             yAxisIndex: 'all'\n   *         }, {\n   *             xAxisId: ['a5', 'a7'],\n   *             xAxisName: 'xxx'\n   *         }]\n   *     }\n   * }\n   */\n\n\n  function getLinkGroupIndex(linksOption, axis) {\n    var axisModel = axis.model;\n    var dim = axis.dim;\n\n    for (var i = 0; i < linksOption.length; i++) {\n      var linkOption = linksOption[i] || {};\n\n      if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n        return i;\n      }\n    }\n  }\n\n  function checkPropInLink(linkPropValue, axisPropValue) {\n    return linkPropValue === 'all' || isArray(linkPropValue) && indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n  }\n\n  function fixValue(axisModel) {\n    var axisInfo = getAxisInfo(axisModel);\n\n    if (!axisInfo) {\n      return;\n    }\n\n    var axisPointerModel = axisInfo.axisPointerModel;\n    var scale = axisInfo.axis.scale;\n    var option = axisPointerModel.option;\n    var status = axisPointerModel.get('status');\n    var value = axisPointerModel.get('value'); // Parse init value for category and time axis.\n\n    if (value != null) {\n      value = scale.parse(value);\n    }\n\n    var useHandle = isHandleTrigger(axisPointerModel); // If `handle` used, `axisPointer` will always be displayed, so value\n    // and status should be initialized.\n\n    if (status == null) {\n      option.status = useHandle ? 'show' : 'hide';\n    }\n\n    var extent = scale.getExtent().slice();\n    extent[0] > extent[1] && extent.reverse();\n\n    if ( // Pick a value on axis when initializing.\n    value == null // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n    // where we should re-pick a value to keep `handle` displaying normally.\n    || value > extent[1]) {\n      // Make handle displayed on the end of the axis when init, which looks better.\n      value = extent[1];\n    }\n\n    if (value < extent[0]) {\n      value = extent[0];\n    }\n\n    option.value = value;\n\n    if (useHandle) {\n      option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n    }\n  }\n\n  function getAxisInfo(axisModel) {\n    var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n    return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n  }\n\n  function getAxisPointerModel(axisModel) {\n    var axisInfo = getAxisInfo(axisModel);\n    return axisInfo && axisInfo.axisPointerModel;\n  }\n\n  function isHandleTrigger(axisPointerModel) {\n    return !!axisPointerModel.get(['handle', 'show']);\n  }\n  /**\n   * @param {module:echarts/model/Model} model\n   * @return {string} unique key\n   */\n\n\n  function makeKey(model) {\n    return model.type + '||' + model.id;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var axisPointerClazz = {};\n  /**\n   * Base class of AxisView.\n   */\n\n  var AxisView =\n  /** @class */\n  function (_super) {\n    __extends(AxisView, _super);\n\n    function AxisView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = AxisView.type;\n      return _this;\n    }\n    /**\n     * @override\n     */\n\n\n    AxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n      // FIXME\n      // This process should proformed after coordinate systems updated\n      // (axis scale updated), and should be performed each time update.\n      // So put it here temporarily, although it is not appropriate to\n      // put a model-writing procedure in `view`.\n      this.axisPointerClass && fixValue(axisModel);\n\n      _super.prototype.render.apply(this, arguments);\n\n      this._doUpdateAxisPointerClass(axisModel, api, true);\n    };\n    /**\n     * Action handler.\n     */\n\n\n    AxisView.prototype.updateAxisPointer = function (axisModel, ecModel, api, payload) {\n      this._doUpdateAxisPointerClass(axisModel, api, false);\n    };\n    /**\n     * @override\n     */\n\n\n    AxisView.prototype.remove = function (ecModel, api) {\n      var axisPointer = this._axisPointer;\n      axisPointer && axisPointer.remove(api);\n    };\n    /**\n     * @override\n     */\n\n\n    AxisView.prototype.dispose = function (ecModel, api) {\n      this._disposeAxisPointer(api);\n\n      _super.prototype.dispose.apply(this, arguments);\n    };\n\n    AxisView.prototype._doUpdateAxisPointerClass = function (axisModel, api, forceRender) {\n      var Clazz = AxisView.getAxisPointerClass(this.axisPointerClass);\n\n      if (!Clazz) {\n        return;\n      }\n\n      var axisPointerModel = getAxisPointerModel(axisModel);\n      axisPointerModel ? (this._axisPointer || (this._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : this._disposeAxisPointer(api);\n    };\n\n    AxisView.prototype._disposeAxisPointer = function (api) {\n      this._axisPointer && this._axisPointer.dispose(api);\n      this._axisPointer = null;\n    };\n\n    AxisView.registerAxisPointerClass = function (type, clazz) {\n      {\n        if (axisPointerClazz[type]) {\n          throw new Error('axisPointer ' + type + ' exists');\n        }\n      }\n      axisPointerClazz[type] = clazz;\n    };\n\n    AxisView.getAxisPointerClass = function (type) {\n      return type && axisPointerClazz[type];\n    };\n\n    AxisView.type = 'axis';\n    return AxisView;\n  }(ComponentView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var inner$6 = makeInner();\n\n  function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    } // TODO: TYPE\n\n\n    var splitAreaModel = axisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitAreaModel,\n      clamp: true\n    });\n\n    if (!ticksCoords.length) {\n      return;\n    } // For Making appropriate splitArea animation, the color and anid\n    // should be corresponding to previous one if possible.\n\n\n    var areaColorsLen = areaColors.length;\n    var lastSplitAreaColors = inner$6(axisView).splitAreaColors;\n    var newSplitAreaColors = createHashMap();\n    var colorIndex = 0;\n\n    if (lastSplitAreaColors) {\n      for (var i = 0; i < ticksCoords.length; i++) {\n        var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n        if (cIndex != null) {\n          colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n          break;\n        }\n      }\n    }\n\n    var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n    var areaStyle = areaStyleModel.getAreaStyle();\n    areaColors = isArray(areaColors) ? areaColors : [areaColors];\n\n    for (var i = 1; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n      var x = void 0;\n      var y = void 0;\n      var width = void 0;\n      var height = void 0;\n\n      if (axis.isHorizontal()) {\n        x = prev;\n        y = gridRect.y;\n        width = tickCoord - x;\n        height = gridRect.height;\n        prev = x + width;\n      } else {\n        x = gridRect.x;\n        y = prev;\n        width = gridRect.width;\n        height = tickCoord - y;\n        prev = y + height;\n      }\n\n      var tickValue = ticksCoords[i - 1].tickValue;\n      tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n      axisGroup.add(new Rect({\n        anid: tickValue != null ? 'area_' + tickValue : null,\n        shape: {\n          x: x,\n          y: y,\n          width: width,\n          height: height\n        },\n        style: defaults({\n          fill: areaColors[colorIndex]\n        }, areaStyle),\n        autoBatch: true,\n        silent: true\n      }));\n      colorIndex = (colorIndex + 1) % areaColorsLen;\n    }\n\n    inner$6(axisView).splitAreaColors = newSplitAreaColors;\n  }\n\n  function rectCoordAxisHandleRemove(axisView) {\n    inner$6(axisView).splitAreaColors = null;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\n  var selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\n\n  var CartesianAxisView =\n  /** @class */\n  function (_super) {\n    __extends(CartesianAxisView, _super);\n\n    function CartesianAxisView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = CartesianAxisView.type;\n      _this.axisPointerClass = 'CartesianAxisPointer';\n      return _this;\n    }\n    /**\n     * @override\n     */\n\n\n    CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n      this.group.removeAll();\n      var oldAxisGroup = this._axisGroup;\n      this._axisGroup = new Group();\n      this.group.add(this._axisGroup);\n\n      if (!axisModel.get('show')) {\n        return;\n      }\n\n      var gridModel = axisModel.getCoordSysModel();\n      var layout = layout$1(gridModel, axisModel);\n      var axisBuilder = new AxisBuilder(axisModel, extend({\n        handleAutoShown: function (elementType) {\n          var cartesians = gridModel.coordinateSystem.getCartesians();\n\n          for (var i = 0; i < cartesians.length; i++) {\n            if (isIntervalOrLogScale(cartesians[i].getOtherAxis(axisModel.axis).scale)) {\n              // Still show axis tick or axisLine if other axis is value / log\n              return true;\n            }\n          } // Not show axisTick or axisLine if other axis is category / time\n\n\n          return false;\n        }\n      }, layout));\n      each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n      this._axisGroup.add(axisBuilder.getGroup());\n\n      each(selfBuilderAttrs, function (name) {\n        if (axisModel.get([name, 'show'])) {\n          axisElementBuilders[name](this, this._axisGroup, axisModel, gridModel);\n        }\n      }, this); // THIS is a special case for bar racing chart.\n      // Update the axis label from the natural initial layout to\n      // sorted layout should has no animation.\n\n      var isInitialSortFromBarRacing = payload && payload.type === 'changeAxisOrder' && payload.isInitSort;\n\n      if (!isInitialSortFromBarRacing) {\n        groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n      }\n\n      _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n    };\n\n    CartesianAxisView.prototype.remove = function () {\n      rectCoordAxisHandleRemove(this);\n    };\n\n    CartesianAxisView.type = 'cartesianAxis';\n    return CartesianAxisView;\n  }(AxisView);\n\n  var axisElementBuilders = {\n    splitLine: function (axisView, axisGroup, axisModel, gridModel) {\n      var axis = axisModel.axis;\n\n      if (axis.scale.isBlank()) {\n        return;\n      }\n\n      var splitLineModel = axisModel.getModel('splitLine');\n      var lineStyleModel = splitLineModel.getModel('lineStyle');\n      var lineColors = lineStyleModel.get('color');\n      lineColors = isArray(lineColors) ? lineColors : [lineColors];\n      var gridRect = gridModel.coordinateSystem.getRect();\n      var isHorizontal = axis.isHorizontal();\n      var lineCount = 0;\n      var ticksCoords = axis.getTicksCoords({\n        tickModel: splitLineModel\n      });\n      var p1 = [];\n      var p2 = [];\n      var lineStyle = lineStyleModel.getLineStyle();\n\n      for (var i = 0; i < ticksCoords.length; i++) {\n        var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n\n        var colorIndex = lineCount++ % lineColors.length;\n        var tickValue = ticksCoords[i].tickValue;\n        axisGroup.add(new Line({\n          anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n          subPixelOptimize: true,\n          autoBatch: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: defaults({\n            stroke: lineColors[colorIndex]\n          }, lineStyle),\n          silent: true\n        }));\n      }\n    },\n    minorSplitLine: function (axisView, axisGroup, axisModel, gridModel) {\n      var axis = axisModel.axis;\n      var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n      var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n      var gridRect = gridModel.coordinateSystem.getRect();\n      var isHorizontal = axis.isHorizontal();\n      var minorTicksCoords = axis.getMinorTicksCoords();\n\n      if (!minorTicksCoords.length) {\n        return;\n      }\n\n      var p1 = [];\n      var p2 = [];\n      var lineStyle = lineStyleModel.getLineStyle();\n\n      for (var i = 0; i < minorTicksCoords.length; i++) {\n        for (var k = 0; k < minorTicksCoords[i].length; k++) {\n          var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n\n          if (isHorizontal) {\n            p1[0] = tickCoord;\n            p1[1] = gridRect.y;\n            p2[0] = tickCoord;\n            p2[1] = gridRect.y + gridRect.height;\n          } else {\n            p1[0] = gridRect.x;\n            p1[1] = tickCoord;\n            p2[0] = gridRect.x + gridRect.width;\n            p2[1] = tickCoord;\n          }\n\n          axisGroup.add(new Line({\n            anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n            subPixelOptimize: true,\n            autoBatch: true,\n            shape: {\n              x1: p1[0],\n              y1: p1[1],\n              x2: p2[0],\n              y2: p2[1]\n            },\n            style: lineStyle,\n            silent: true\n          }));\n        }\n      }\n    },\n    splitArea: function (axisView, axisGroup, axisModel, gridModel) {\n      rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\n    }\n  };\n\n  var CartesianXAxisView =\n  /** @class */\n  function (_super) {\n    __extends(CartesianXAxisView, _super);\n\n    function CartesianXAxisView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = CartesianXAxisView.type;\n      return _this;\n    }\n\n    CartesianXAxisView.type = 'xAxis';\n    return CartesianXAxisView;\n  }(CartesianAxisView);\n\n  var CartesianYAxisView =\n  /** @class */\n  function (_super) {\n    __extends(CartesianYAxisView, _super);\n\n    function CartesianYAxisView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = CartesianXAxisView.type;\n      return _this;\n    }\n\n    CartesianYAxisView.type = 'yAxis';\n    return CartesianYAxisView;\n  }(CartesianAxisView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var GridView =\n  /** @class */\n  function (_super) {\n    __extends(GridView, _super);\n\n    function GridView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = 'grid';\n      return _this;\n    }\n\n    GridView.prototype.render = function (gridModel, ecModel) {\n      this.group.removeAll();\n\n      if (gridModel.get('show')) {\n        this.group.add(new Rect({\n          shape: gridModel.coordinateSystem.getRect(),\n          style: defaults({\n            fill: gridModel.get('backgroundColor')\n          }, gridModel.getItemStyle()),\n          silent: true,\n          z2: -1\n        }));\n      }\n    };\n\n    GridView.type = 'grid';\n    return GridView;\n  }(ComponentView);\n\n  var extraOption = {\n    // gridIndex: 0,\n    // gridId: '',\n    offset: 0\n  };\n\n  function install$6(registers) {\n    registers.registerComponentView(GridView);\n    registers.registerComponentModel(GridModel);\n    registers.registerCoordinateSystem('cartesian2d', Grid);\n    axisModelCreator(registers, 'x', CartesianAxisModel, extraOption);\n    axisModelCreator(registers, 'y', CartesianAxisModel, extraOption);\n    registers.registerComponentView(CartesianXAxisView);\n    registers.registerComponentView(CartesianYAxisView);\n    registers.registerPreprocessor(function (option) {\n      // Only create grid when need\n      if (option.xAxis && option.yAxis && !option.grid) {\n        option.grid = {};\n      }\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$5(registers) {\n    // In case developer forget to include grid component\n    use(install$6);\n    registers.registerSeriesModel(ScatterSeriesModel);\n    registers.registerChartView(ScatterView);\n    registers.registerLayout(pointsLayout('scatter'));\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  use(install$5);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  use(install$6);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var TitleModel =\n  /** @class */\n  function (_super) {\n    __extends(TitleModel, _super);\n\n    function TitleModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = TitleModel.type;\n      _this.layoutMode = {\n        type: 'box',\n        ignoreSize: true\n      };\n      return _this;\n    }\n\n    TitleModel.type = 'title';\n    TitleModel.defaultOption = {\n      // zlevel: 0,\n      z: 6,\n      show: true,\n      text: '',\n      target: 'blank',\n      subtext: '',\n      subtarget: 'blank',\n      left: 0,\n      top: 0,\n      backgroundColor: 'rgba(0,0,0,0)',\n      borderColor: '#ccc',\n      borderWidth: 0,\n      padding: 5,\n      itemGap: 10,\n      textStyle: {\n        fontSize: 18,\n        fontWeight: 'bold',\n        color: '#464646'\n      },\n      subtextStyle: {\n        fontSize: 12,\n        color: '#6E7079'\n      }\n    };\n    return TitleModel;\n  }(ComponentModel); // View\n\n\n  var TitleView =\n  /** @class */\n  function (_super) {\n    __extends(TitleView, _super);\n\n    function TitleView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = TitleView.type;\n      return _this;\n    }\n\n    TitleView.prototype.render = function (titleModel, ecModel, api) {\n      this.group.removeAll();\n\n      if (!titleModel.get('show')) {\n        return;\n      }\n\n      var group = this.group;\n      var textStyleModel = titleModel.getModel('textStyle');\n      var subtextStyleModel = titleModel.getModel('subtextStyle');\n      var textAlign = titleModel.get('textAlign');\n      var textVerticalAlign = retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n      var textEl = new ZRText({\n        style: createTextStyle(textStyleModel, {\n          text: titleModel.get('text'),\n          fill: textStyleModel.getTextColor()\n        }, {\n          disableBox: true\n        }),\n        z2: 10\n      });\n      var textRect = textEl.getBoundingRect();\n      var subText = titleModel.get('subtext');\n      var subTextEl = new ZRText({\n        style: createTextStyle(subtextStyleModel, {\n          text: subText,\n          fill: subtextStyleModel.getTextColor(),\n          y: textRect.height + titleModel.get('itemGap'),\n          verticalAlign: 'top'\n        }, {\n          disableBox: true\n        }),\n        z2: 10\n      });\n      var link = titleModel.get('link');\n      var sublink = titleModel.get('sublink');\n      var triggerEvent = titleModel.get('triggerEvent', true);\n      textEl.silent = !link && !triggerEvent;\n      subTextEl.silent = !sublink && !triggerEvent;\n\n      if (link) {\n        textEl.on('click', function () {\n          windowOpen(link, '_' + titleModel.get('target'));\n        });\n      }\n\n      if (sublink) {\n        subTextEl.on('click', function () {\n          windowOpen(sublink, '_' + titleModel.get('subtarget'));\n        });\n      }\n\n      getECData(textEl).eventData = getECData(subTextEl).eventData = triggerEvent ? {\n        componentType: 'title',\n        componentIndex: titleModel.componentIndex\n      } : null;\n      group.add(textEl);\n      subText && group.add(subTextEl); // If no subText, but add subTextEl, there will be an empty line.\n\n      var groupRect = group.getBoundingRect();\n      var layoutOption = titleModel.getBoxLayoutParams();\n      layoutOption.width = groupRect.width;\n      layoutOption.height = groupRect.height;\n      var layoutRect = getLayoutRect(layoutOption, {\n        width: api.getWidth(),\n        height: api.getHeight()\n      }, titleModel.get('padding')); // Adjust text align based on position\n\n      if (!textAlign) {\n        // Align left if title is on the left. center and right is same\n        textAlign = titleModel.get('left') || titleModel.get('right'); // @ts-ignore\n\n        if (textAlign === 'middle') {\n          textAlign = 'center';\n        } // Adjust layout by text align\n\n\n        if (textAlign === 'right') {\n          layoutRect.x += layoutRect.width;\n        } else if (textAlign === 'center') {\n          layoutRect.x += layoutRect.width / 2;\n        }\n      }\n\n      if (!textVerticalAlign) {\n        textVerticalAlign = titleModel.get('top') || titleModel.get('bottom'); // @ts-ignore\n\n        if (textVerticalAlign === 'center') {\n          textVerticalAlign = 'middle';\n        }\n\n        if (textVerticalAlign === 'bottom') {\n          layoutRect.y += layoutRect.height;\n        } else if (textVerticalAlign === 'middle') {\n          layoutRect.y += layoutRect.height / 2;\n        }\n\n        textVerticalAlign = textVerticalAlign || 'top';\n      }\n\n      group.x = layoutRect.x;\n      group.y = layoutRect.y;\n      group.markRedraw();\n      var alignStyle = {\n        align: textAlign,\n        verticalAlign: textVerticalAlign\n      };\n      textEl.setStyle(alignStyle);\n      subTextEl.setStyle(alignStyle); // Render background\n      // Get groupRect again because textAlign has been changed\n\n      groupRect = group.getBoundingRect();\n      var padding = layoutRect.margin;\n      var style = titleModel.getItemStyle(['color', 'opacity']);\n      style.fill = titleModel.get('backgroundColor');\n      var rect = new Rect({\n        shape: {\n          x: groupRect.x - padding[3],\n          y: groupRect.y - padding[0],\n          width: groupRect.width + padding[1] + padding[3],\n          height: groupRect.height + padding[0] + padding[2],\n          r: titleModel.get('borderRadius')\n        },\n        style: style,\n        subPixelOptimize: true,\n        silent: true\n      });\n      group.add(rect);\n    };\n\n    TitleView.type = 'title';\n    return TitleView;\n  }(ComponentView);\n\n  function install$7(registers) {\n    registers.registerComponentModel(TitleModel);\n    registers.registerComponentView(TitleView);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  use(install$7);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var getDefaultSelectorOptions = function (ecModel, type) {\n    if (type === 'all') {\n      return {\n        type: 'all',\n        title: ecModel.getLocaleModel().get(['legend', 'selector', 'all'])\n      };\n    } else if (type === 'inverse') {\n      return {\n        type: 'inverse',\n        title: ecModel.getLocaleModel().get(['legend', 'selector', 'inverse'])\n      };\n    }\n  };\n\n  var LegendModel =\n  /** @class */\n  function (_super) {\n    __extends(LegendModel, _super);\n\n    function LegendModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = LegendModel.type;\n      _this.layoutMode = {\n        type: 'box',\n        // legend.width/height are maxWidth/maxHeight actually,\n        // whereas realy width/height is calculated by its content.\n        // (Setting {left: 10, right: 10} does not make sense).\n        // So consider the case:\n        // `setOption({legend: {left: 10});`\n        // then `setOption({legend: {right: 10});`\n        // The previous `left` should be cleared by setting `ignoreSize`.\n        ignoreSize: true\n      };\n      return _this;\n    }\n\n    LegendModel.prototype.init = function (option, parentModel, ecModel) {\n      this.mergeDefaultAndTheme(option, ecModel);\n      option.selected = option.selected || {};\n\n      this._updateSelector(option);\n    };\n\n    LegendModel.prototype.mergeOption = function (option, ecModel) {\n      _super.prototype.mergeOption.call(this, option, ecModel);\n\n      this._updateSelector(option);\n    };\n\n    LegendModel.prototype._updateSelector = function (option) {\n      var selector = option.selector;\n      var ecModel = this.ecModel;\n\n      if (selector === true) {\n        selector = option.selector = ['all', 'inverse'];\n      }\n\n      if (isArray(selector)) {\n        each(selector, function (item, index) {\n          isString(item) && (item = {\n            type: item\n          });\n          selector[index] = merge(item, getDefaultSelectorOptions(ecModel, item.type));\n        });\n      }\n    };\n\n    LegendModel.prototype.optionUpdated = function () {\n      this._updateData(this.ecModel);\n\n      var legendData = this._data; // If selectedMode is single, try to select one\n\n      if (legendData[0] && this.get('selectedMode') === 'single') {\n        var hasSelected = false; // If has any selected in option.selected\n\n        for (var i = 0; i < legendData.length; i++) {\n          var name_1 = legendData[i].get('name');\n\n          if (this.isSelected(name_1)) {\n            // Force to unselect others\n            this.select(name_1);\n            hasSelected = true;\n            break;\n          }\n        } // Try select the first if selectedMode is single\n\n\n        !hasSelected && this.select(legendData[0].get('name'));\n      }\n    };\n\n    LegendModel.prototype._updateData = function (ecModel) {\n      var potentialData = [];\n      var availableNames = [];\n      ecModel.eachRawSeries(function (seriesModel) {\n        var seriesName = seriesModel.name;\n        availableNames.push(seriesName);\n        var isPotential;\n\n        if (seriesModel.legendVisualProvider) {\n          var provider = seriesModel.legendVisualProvider;\n          var names = provider.getAllNames();\n\n          if (!ecModel.isSeriesFiltered(seriesModel)) {\n            availableNames = availableNames.concat(names);\n          }\n\n          if (names.length) {\n            potentialData = potentialData.concat(names);\n          } else {\n            isPotential = true;\n          }\n        } else {\n          isPotential = true;\n        }\n\n        if (isPotential && isNameSpecified(seriesModel)) {\n          potentialData.push(seriesModel.name);\n        }\n      });\n      /**\n       * @type {Array.<string>}\n       * @private\n       */\n\n      this._availableNames = availableNames; // If legend.data not specified in option, use availableNames as data,\n      // which is convinient for user preparing option.\n\n      var rawData = this.get('data') || potentialData;\n      var legendData = map(rawData, function (dataItem) {\n        // Can be string or number\n        if (isString(dataItem) || isNumber(dataItem)) {\n          dataItem = {\n            name: dataItem\n          };\n        }\n\n        return new Model(dataItem, this, this.ecModel);\n      }, this);\n      /**\n       * @type {Array.<module:echarts/model/Model>}\n       * @private\n       */\n\n      this._data = legendData;\n    };\n\n    LegendModel.prototype.getData = function () {\n      return this._data;\n    };\n\n    LegendModel.prototype.select = function (name) {\n      var selected = this.option.selected;\n      var selectedMode = this.get('selectedMode');\n\n      if (selectedMode === 'single') {\n        var data = this._data;\n        each(data, function (dataItem) {\n          selected[dataItem.get('name')] = false;\n        });\n      }\n\n      selected[name] = true;\n    };\n\n    LegendModel.prototype.unSelect = function (name) {\n      if (this.get('selectedMode') !== 'single') {\n        this.option.selected[name] = false;\n      }\n    };\n\n    LegendModel.prototype.toggleSelected = function (name) {\n      var selected = this.option.selected; // Default is true\n\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n\n      this[selected[name] ? 'unSelect' : 'select'](name);\n    };\n\n    LegendModel.prototype.allSelect = function () {\n      var data = this._data;\n      var selected = this.option.selected;\n      each(data, function (dataItem) {\n        selected[dataItem.get('name', true)] = true;\n      });\n    };\n\n    LegendModel.prototype.inverseSelect = function () {\n      var data = this._data;\n      var selected = this.option.selected;\n      each(data, function (dataItem) {\n        var name = dataItem.get('name', true); // Initially, default value is true\n\n        if (!selected.hasOwnProperty(name)) {\n          selected[name] = true;\n        }\n\n        selected[name] = !selected[name];\n      });\n    };\n\n    LegendModel.prototype.isSelected = function (name) {\n      var selected = this.option.selected;\n      return !(selected.hasOwnProperty(name) && !selected[name]) && indexOf(this._availableNames, name) >= 0;\n    };\n\n    LegendModel.prototype.getOrient = function () {\n      return this.get('orient') === 'vertical' ? {\n        index: 1,\n        name: 'vertical'\n      } : {\n        index: 0,\n        name: 'horizontal'\n      };\n    };\n\n    LegendModel.type = 'legend.plain';\n    LegendModel.dependencies = ['series'];\n    LegendModel.defaultOption = {\n      // zlevel: 0,\n      z: 4,\n      show: true,\n      orient: 'horizontal',\n      left: 'center',\n      // right: 'center',\n      top: 0,\n      // bottom: null,\n      align: 'auto',\n      backgroundColor: 'rgba(0,0,0,0)',\n      borderColor: '#ccc',\n      borderRadius: 0,\n      borderWidth: 0,\n      padding: 5,\n      itemGap: 10,\n      itemWidth: 25,\n      itemHeight: 14,\n      symbolRotate: 'inherit',\n      symbolKeepAspect: true,\n      inactiveColor: '#ccc',\n      inactiveBorderColor: '#ccc',\n      inactiveBorderWidth: 'auto',\n      itemStyle: {\n        color: 'inherit',\n        opacity: 'inherit',\n        borderColor: 'inherit',\n        borderWidth: 'auto',\n        borderCap: 'inherit',\n        borderJoin: 'inherit',\n        borderDashOffset: 'inherit',\n        borderMiterLimit: 'inherit'\n      },\n      lineStyle: {\n        width: 'auto',\n        color: 'inherit',\n        inactiveColor: '#ccc',\n        inactiveWidth: 2,\n        opacity: 'inherit',\n        type: 'inherit',\n        cap: 'inherit',\n        join: 'inherit',\n        dashOffset: 'inherit',\n        miterLimit: 'inherit'\n      },\n      textStyle: {\n        color: '#333'\n      },\n      selectedMode: true,\n      selector: false,\n      selectorLabel: {\n        show: true,\n        borderRadius: 10,\n        padding: [3, 5, 3, 5],\n        fontSize: 12,\n        fontFamily: 'sans-serif',\n        color: '#666',\n        borderWidth: 1,\n        borderColor: '#666'\n      },\n      emphasis: {\n        selectorLabel: {\n          show: true,\n          color: '#eee',\n          backgroundColor: '#666'\n        }\n      },\n      selectorPosition: 'auto',\n      selectorItemGap: 7,\n      selectorButtonGap: 10,\n      tooltip: {\n        show: false\n      }\n    };\n    return LegendModel;\n  }(ComponentModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // @ts-nocheck\n\n  /**\n   * Layout list like component.\n   * It will box layout each items in group of component and then position the whole group in the viewport\n   * @param {module:zrender/group/Group} group\n   * @param {module:echarts/model/Component} componentModel\n   * @param {module:echarts/ExtensionAPI}\n   */\n\n\n  function layout$2(group, componentModel, api) {\n    var boxLayoutParams = componentModel.getBoxLayoutParams();\n    var padding = componentModel.get('padding');\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n    box(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n    positionElement(group, boxLayoutParams, viewportSize, padding);\n  }\n\n  function makeBackground(rect, componentModel) {\n    var padding = normalizeCssArray$1(componentModel.get('padding'));\n    var style = componentModel.getItemStyle(['color', 'opacity']);\n    style.fill = componentModel.get('backgroundColor');\n    rect = new Rect({\n      shape: {\n        x: rect.x - padding[3],\n        y: rect.y - padding[0],\n        width: rect.width + padding[1] + padding[3],\n        height: rect.height + padding[0] + padding[2],\n        r: componentModel.get('borderRadius')\n      },\n      style: style,\n      silent: true,\n      z2: -1\n    }); // FIXME\n    // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n    // and background rect when setting like `left: 0`, `top: 0`.\n    // graphic.subPixelOptimizeRect(rect);\n\n    return rect;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var curry$1 = curry;\n  var each$3 = each;\n  var Group$2 = Group;\n\n  var LegendView =\n  /** @class */\n  function (_super) {\n    __extends(LegendView, _super);\n\n    function LegendView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = LegendView.type;\n      _this.newlineDisabled = false;\n      return _this;\n    }\n\n    LegendView.prototype.init = function () {\n      this.group.add(this._contentGroup = new Group$2());\n      this.group.add(this._selectorGroup = new Group$2());\n      this._isFirstRender = true;\n    };\n    /**\n     * @protected\n     */\n\n\n    LegendView.prototype.getContentGroup = function () {\n      return this._contentGroup;\n    };\n    /**\n     * @protected\n     */\n\n\n    LegendView.prototype.getSelectorGroup = function () {\n      return this._selectorGroup;\n    };\n    /**\n     * @override\n     */\n\n\n    LegendView.prototype.render = function (legendModel, ecModel, api) {\n      var isFirstRender = this._isFirstRender;\n      this._isFirstRender = false;\n      this.resetInner();\n\n      if (!legendModel.get('show', true)) {\n        return;\n      }\n\n      var itemAlign = legendModel.get('align');\n      var orient = legendModel.get('orient');\n\n      if (!itemAlign || itemAlign === 'auto') {\n        itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n      } // selector has been normalized to an array in model\n\n\n      var selector = legendModel.get('selector', true);\n      var selectorPosition = legendModel.get('selectorPosition', true);\n\n      if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n        selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n      }\n\n      this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition); // Perform layout.\n\n      var positionInfo = legendModel.getBoxLayoutParams();\n      var viewportSize = {\n        width: api.getWidth(),\n        height: api.getHeight()\n      };\n      var padding = legendModel.get('padding');\n      var maxSize = getLayoutRect(positionInfo, viewportSize, padding);\n      var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition); // Place mainGroup, based on the calculated `mainRect`.\n\n      var layoutRect = getLayoutRect(defaults({\n        width: mainRect.width,\n        height: mainRect.height\n      }, positionInfo), viewportSize, padding);\n      this.group.x = layoutRect.x - mainRect.x;\n      this.group.y = layoutRect.y - mainRect.y;\n      this.group.markRedraw(); // Render background after group is layout.\n\n      this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n    };\n\n    LegendView.prototype.resetInner = function () {\n      this.getContentGroup().removeAll();\n      this._backgroundEl && this.group.remove(this._backgroundEl);\n      this.getSelectorGroup().removeAll();\n    };\n\n    LegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n      var contentGroup = this.getContentGroup();\n      var legendDrawnMap = createHashMap();\n      var selectMode = legendModel.get('selectedMode');\n      var excludeSeriesId = [];\n      ecModel.eachRawSeries(function (seriesModel) {\n        !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n      });\n      each$3(legendModel.getData(), function (legendItemModel, dataIndex) {\n        var name = legendItemModel.get('name'); // Use empty string or \\n as a newline string\n\n        if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n          var g = new Group$2(); // @ts-ignore\n\n          g.newline = true;\n          contentGroup.add(g);\n          return;\n        } // Representitive series.\n\n\n        var seriesModel = ecModel.getSeriesByName(name)[0];\n\n        if (legendDrawnMap.get(name)) {\n          // Have been drawed\n          return;\n        } // Legend to control series.\n\n\n        if (seriesModel) {\n          var data = seriesModel.getData();\n          var lineVisualStyle = data.getVisual('legendLineStyle') || {};\n          var legendIcon = data.getVisual('legendIcon');\n          /**\n           * `data.getVisual('style')` may be the color from the register\n           * in series. For example, for line series,\n           */\n\n          var style = data.getVisual('style');\n\n          var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, style, legendIcon, selectMode, api);\n\n          itemGroup.on('click', curry$1(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry$1(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry$1(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n          legendDrawnMap.set(name, true);\n        } else {\n          // Legend to control data. In pie and funnel.\n          ecModel.eachRawSeries(function (seriesModel) {\n            // In case multiple series has same data name\n            if (legendDrawnMap.get(name)) {\n              return;\n            }\n\n            if (seriesModel.legendVisualProvider) {\n              var provider = seriesModel.legendVisualProvider;\n\n              if (!provider.containName(name)) {\n                return;\n              }\n\n              var idx = provider.indexOfName(name);\n              var style = provider.getItemVisual(idx, 'style');\n              var legendIcon = provider.getItemVisual(idx, 'legendIcon');\n              var colorArr = parse(style.fill); // Color may be set to transparent in visualMap when data is out of range.\n              // Do not show nothing.\n\n              if (colorArr && colorArr[3] === 0) {\n                colorArr[3] = 0.2; // TODO color is set to 0, 0, 0, 0. Should show correct RGBA\n\n                style = extend(extend({}, style), {\n                  fill: stringify(colorArr, 'rgba')\n                });\n              }\n\n              var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, {}, style, legendIcon, selectMode, api); // FIXME: consider different series has items with the same name.\n\n\n              itemGroup.on('click', curry$1(dispatchSelectAction, null, name, api, excludeSeriesId)) // Should not specify the series name, consider legend controls\n              // more than one pie series.\n              .on('mouseover', curry$1(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry$1(dispatchDownplayAction, null, name, api, excludeSeriesId));\n              legendDrawnMap.set(name, true);\n            }\n          }, this);\n        }\n\n        {\n          if (!legendDrawnMap.get(name)) {\n            console.warn(name + ' series not exists. Legend data should be same with series name or data name.');\n          }\n        }\n      }, this);\n\n      if (selector) {\n        this._createSelector(selector, legendModel, api, orient, selectorPosition);\n      }\n    };\n\n    LegendView.prototype._createSelector = function (selector, legendModel, api, orient, selectorPosition) {\n      var selectorGroup = this.getSelectorGroup();\n      each$3(selector, function createSelectorButton(selectorItem) {\n        var type = selectorItem.type;\n        var labelText = new ZRText({\n          style: {\n            x: 0,\n            y: 0,\n            align: 'center',\n            verticalAlign: 'middle'\n          },\n          onclick: function () {\n            api.dispatchAction({\n              type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\n            });\n          }\n        });\n        selectorGroup.add(labelText);\n        var labelModel = legendModel.getModel('selectorLabel');\n        var emphasisLabelModel = legendModel.getModel(['emphasis', 'selectorLabel']);\n        setLabelStyle(labelText, {\n          normal: labelModel,\n          emphasis: emphasisLabelModel\n        }, {\n          defaultText: selectorItem.title\n        });\n        enableHoverEmphasis(labelText);\n      });\n    };\n\n    LegendView.prototype._createItem = function (seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, itemVisualStyle, legendIcon, selectMode, api) {\n      var drawType = seriesModel.visualDrawType;\n      var itemWidth = legendModel.get('itemWidth');\n      var itemHeight = legendModel.get('itemHeight');\n      var isSelected = legendModel.isSelected(name);\n      var iconRotate = legendItemModel.get('symbolRotate');\n      var symbolKeepAspect = legendItemModel.get('symbolKeepAspect');\n      var legendIconType = legendItemModel.get('icon');\n      legendIcon = legendIconType || legendIcon || 'roundRect';\n      var style = getLegendStyle(legendIcon, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api);\n      var itemGroup = new Group$2();\n      var textStyleModel = legendItemModel.getModel('textStyle');\n\n      if (isFunction(seriesModel.getLegendIcon) && (!legendIconType || legendIconType === 'inherit')) {\n        // Series has specific way to define legend icon\n        itemGroup.add(seriesModel.getLegendIcon({\n          itemWidth: itemWidth,\n          itemHeight: itemHeight,\n          icon: legendIcon,\n          iconRotate: iconRotate,\n          itemStyle: style.itemStyle,\n          lineStyle: style.lineStyle,\n          symbolKeepAspect: symbolKeepAspect\n        }));\n      } else {\n        // Use default legend icon policy for most series\n        var rotate = legendIconType === 'inherit' && seriesModel.getData().getVisual('symbol') ? iconRotate === 'inherit' ? seriesModel.getData().getVisual('symbolRotate') : iconRotate : 0; // No rotation for no icon\n\n        itemGroup.add(getDefaultLegendIcon({\n          itemWidth: itemWidth,\n          itemHeight: itemHeight,\n          icon: legendIcon,\n          iconRotate: rotate,\n          itemStyle: style.itemStyle,\n          lineStyle: style.lineStyle,\n          symbolKeepAspect: symbolKeepAspect\n        }));\n      }\n\n      var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n      var textAlign = itemAlign;\n      var formatter = legendModel.get('formatter');\n      var content = name;\n\n      if (isString(formatter) && formatter) {\n        content = formatter.replace('{name}', name != null ? name : '');\n      } else if (isFunction(formatter)) {\n        content = formatter(name);\n      }\n\n      var inactiveColor = legendItemModel.get('inactiveColor');\n      itemGroup.add(new ZRText({\n        style: createTextStyle(textStyleModel, {\n          text: content,\n          x: textX,\n          y: itemHeight / 2,\n          fill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n          align: textAlign,\n          verticalAlign: 'middle'\n        })\n      })); // Add a invisible rect to increase the area of mouse hover\n\n      var hitRect = new Rect({\n        shape: itemGroup.getBoundingRect(),\n        invisible: true\n      });\n      var tooltipModel = legendItemModel.getModel('tooltip');\n\n      if (tooltipModel.get('show')) {\n        setTooltipConfig({\n          el: hitRect,\n          componentModel: legendModel,\n          itemName: name,\n          itemTooltipOption: tooltipModel.option\n        });\n      }\n\n      itemGroup.add(hitRect);\n      itemGroup.eachChild(function (child) {\n        child.silent = true;\n      });\n      hitRect.silent = !selectMode;\n      this.getContentGroup().add(itemGroup);\n      enableHoverEmphasis(itemGroup); // @ts-ignore\n\n      itemGroup.__legendDataIndex = dataIndex;\n      return itemGroup;\n    };\n\n    LegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n      var contentGroup = this.getContentGroup();\n      var selectorGroup = this.getSelectorGroup(); // Place items in contentGroup.\n\n      box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n      var contentRect = contentGroup.getBoundingRect();\n      var contentPos = [-contentRect.x, -contentRect.y];\n      selectorGroup.markRedraw();\n      contentGroup.markRedraw();\n\n      if (selector) {\n        // Place buttons in selectorGroup\n        box( // Buttons in selectorGroup always layout horizontally\n        'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n        var selectorRect = selectorGroup.getBoundingRect();\n        var selectorPos = [-selectorRect.x, -selectorRect.y];\n        var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n        var orientIdx = legendModel.getOrient().index;\n        var wh = orientIdx === 0 ? 'width' : 'height';\n        var hw = orientIdx === 0 ? 'height' : 'width';\n        var yx = orientIdx === 0 ? 'y' : 'x';\n\n        if (selectorPosition === 'end') {\n          selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n        } else {\n          contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n        } //Always align selector to content as 'middle'\n\n\n        selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n        selectorGroup.x = selectorPos[0];\n        selectorGroup.y = selectorPos[1];\n        contentGroup.x = contentPos[0];\n        contentGroup.y = contentPos[1];\n        var mainRect = {\n          x: 0,\n          y: 0\n        };\n        mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n        mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n        mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n        return mainRect;\n      } else {\n        contentGroup.x = contentPos[0];\n        contentGroup.y = contentPos[1];\n        return this.group.getBoundingRect();\n      }\n    };\n    /**\n     * @protected\n     */\n\n\n    LegendView.prototype.remove = function () {\n      this.getContentGroup().removeAll();\n      this._isFirstRender = true;\n    };\n\n    LegendView.type = 'legend.plain';\n    return LegendView;\n  }(ComponentView);\n\n  function getLegendStyle(iconType, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api) {\n    /**\n     * Use series style if is inherit;\n     * elsewise, use legend style\n     */\n    function handleCommonProps(style, visualStyle) {\n      // If lineStyle.width is 'auto', it is set to be 2 if series has border\n      if (style.lineWidth === 'auto') {\n        style.lineWidth = visualStyle.lineWidth > 0 ? 2 : 0;\n      }\n\n      each$3(style, function (propVal, propName) {\n        style[propName] === 'inherit' && (style[propName] = visualStyle[propName]);\n      });\n    } // itemStyle\n\n\n    var itemStyleModel = legendItemModel.getModel('itemStyle');\n    var itemStyle = itemStyleModel.getItemStyle();\n    var iconBrushType = iconType.lastIndexOf('empty', 0) === 0 ? 'fill' : 'stroke';\n    var decalStyle = itemStyleModel.getShallow('decal');\n    itemStyle.decal = !decalStyle || decalStyle === 'inherit' ? itemVisualStyle.decal : createOrUpdatePatternFromDecal(decalStyle, api);\n\n    if (itemStyle.fill === 'inherit') {\n      /**\n       * Series with visualDrawType as 'stroke' should have\n       * series stroke as legend fill\n       */\n      itemStyle.fill = itemVisualStyle[drawType];\n    }\n\n    if (itemStyle.stroke === 'inherit') {\n      /**\n       * icon type with \"emptyXXX\" should use fill color\n       * in visual style\n       */\n      itemStyle.stroke = itemVisualStyle[iconBrushType];\n    }\n\n    if (itemStyle.opacity === 'inherit') {\n      /**\n       * Use lineStyle.opacity if drawType is stroke\n       */\n      itemStyle.opacity = (drawType === 'fill' ? itemVisualStyle : lineVisualStyle).opacity;\n    }\n\n    handleCommonProps(itemStyle, itemVisualStyle); // lineStyle\n\n    var legendLineModel = legendItemModel.getModel('lineStyle');\n    var lineStyle = legendLineModel.getLineStyle();\n    handleCommonProps(lineStyle, lineVisualStyle); // Fix auto color to real color\n\n    itemStyle.fill === 'auto' && (itemStyle.fill = itemVisualStyle.fill);\n    itemStyle.stroke === 'auto' && (itemStyle.stroke = itemVisualStyle.fill);\n    lineStyle.stroke === 'auto' && (lineStyle.stroke = itemVisualStyle.fill);\n\n    if (!isSelected) {\n      var borderWidth = legendItemModel.get('inactiveBorderWidth');\n      /**\n       * Since stroke is set to be inactiveBorderColor, it may occur that\n       * there is no border in series but border in legend, so we need to\n       * use border only when series has border if is set to be auto\n       */\n\n      var visualHasBorder = itemStyle[iconBrushType];\n      itemStyle.lineWidth = borderWidth === 'auto' ? itemVisualStyle.lineWidth > 0 && visualHasBorder ? 2 : 0 : itemStyle.lineWidth;\n      itemStyle.fill = legendItemModel.get('inactiveColor');\n      itemStyle.stroke = legendItemModel.get('inactiveBorderColor');\n      lineStyle.stroke = legendLineModel.get('inactiveColor');\n      lineStyle.lineWidth = legendLineModel.get('inactiveWidth');\n    }\n\n    return {\n      itemStyle: itemStyle,\n      lineStyle: lineStyle\n    };\n  }\n\n  function getDefaultLegendIcon(opt) {\n    var symboType = opt.icon || 'roundRect';\n    var icon = createSymbol(symboType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill, opt.symbolKeepAspect);\n    icon.setStyle(opt.itemStyle);\n    icon.rotation = (opt.iconRotate || 0) * Math.PI / 180;\n    icon.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n\n    if (symboType.indexOf('empty') > -1) {\n      icon.style.stroke = icon.style.fill;\n      icon.style.fill = '#fff';\n      icon.style.lineWidth = 2;\n    }\n\n    return icon;\n  }\n\n  function dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n    // downplay before unselect\n    dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n    api.dispatchAction({\n      type: 'legendToggleSelect',\n      name: seriesName != null ? seriesName : dataName\n    }); // highlight after select\n    // TODO higlight immediately may cause animation loss.\n\n    dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n  }\n\n  function isUseHoverLayer(api) {\n    var list = api.getZr().storage.getDisplayList();\n    var emphasisState;\n    var i = 0;\n    var len = list.length;\n\n    while (i < len && !(emphasisState = list[i].states.emphasis)) {\n      i++;\n    }\n\n    return emphasisState && emphasisState.hoverLayer;\n  }\n\n  function dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n    // If element hover will move to a hoverLayer.\n    if (!isUseHoverLayer(api)) {\n      api.dispatchAction({\n        type: 'highlight',\n        seriesName: seriesName,\n        name: dataName,\n        excludeSeriesId: excludeSeriesId\n      });\n    }\n  }\n\n  function dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n    // If element hover will move to a hoverLayer.\n    if (!isUseHoverLayer(api)) {\n      api.dispatchAction({\n        type: 'downplay',\n        seriesName: seriesName,\n        name: dataName,\n        excludeSeriesId: excludeSeriesId\n      });\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function legendFilter(ecModel) {\n    var legendModels = ecModel.findComponents({\n      mainType: 'legend'\n    });\n\n    if (legendModels && legendModels.length) {\n      ecModel.filterSeries(function (series) {\n        // If in any legend component the status is not selected.\n        // Because in legend series is assumed selected when it is not in the legend data.\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(series.name)) {\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // @ts-nocheck\n\n\n  function legendSelectActionHandler(methodName, payload, ecModel) {\n    var selectedMap = {};\n    var isToggleSelect = methodName === 'toggleSelected';\n    var isSelected; // Update all legend components\n\n    ecModel.eachComponent('legend', function (legendModel) {\n      if (isToggleSelect && isSelected != null) {\n        // Force other legend has same selected status\n        // Or the first is toggled to true and other are toggled to false\n        // In the case one legend has some item unSelected in option. And if other legend\n        // doesn't has the item, they will assume it is selected.\n        legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\n      } else if (methodName === 'allSelect' || methodName === 'inverseSelect') {\n        legendModel[methodName]();\n      } else {\n        legendModel[methodName](payload.name);\n        isSelected = legendModel.isSelected(payload.name);\n      }\n\n      var legendData = legendModel.getData();\n      each(legendData, function (model) {\n        var name = model.get('name'); // Wrap element\n\n        if (name === '\\n' || name === '') {\n          return;\n        }\n\n        var isItemSelected = legendModel.isSelected(name);\n\n        if (selectedMap.hasOwnProperty(name)) {\n          // Unselected if any legend is unselected\n          selectedMap[name] = selectedMap[name] && isItemSelected;\n        } else {\n          selectedMap[name] = isItemSelected;\n        }\n      });\n    }); // Return the event explicitly\n\n    return methodName === 'allSelect' || methodName === 'inverseSelect' ? {\n      selected: selectedMap\n    } : {\n      name: payload.name,\n      selected: selectedMap\n    };\n  }\n\n  function installLegendAction(registers) {\n    /**\n     * @event legendToggleSelect\n     * @type {Object}\n     * @property {string} type 'legendToggleSelect'\n     * @property {string} [from]\n     * @property {string} name Series name or data item name\n     */\n    registers.registerAction('legendToggleSelect', 'legendselectchanged', curry(legendSelectActionHandler, 'toggleSelected'));\n    registers.registerAction('legendAllSelect', 'legendselectall', curry(legendSelectActionHandler, 'allSelect'));\n    registers.registerAction('legendInverseSelect', 'legendinverseselect', curry(legendSelectActionHandler, 'inverseSelect'));\n    /**\n     * @event legendSelect\n     * @type {Object}\n     * @property {string} type 'legendSelect'\n     * @property {string} name Series name or data item name\n     */\n\n    registers.registerAction('legendSelect', 'legendselected', curry(legendSelectActionHandler, 'select'));\n    /**\n     * @event legendUnSelect\n     * @type {Object}\n     * @property {string} type 'legendUnSelect'\n     * @property {string} name Series name or data item name\n     */\n\n    registers.registerAction('legendUnSelect', 'legendunselected', curry(legendSelectActionHandler, 'unSelect'));\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$9(registers) {\n    registers.registerComponentModel(LegendModel);\n    registers.registerComponentView(LegendView);\n    registers.registerProcessor(registers.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\n    registers.registerSubTypeDefaulter('legend', function () {\n      return 'plain';\n    });\n    installLegendAction(registers);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var ScrollableLegendModel =\n  /** @class */\n  function (_super) {\n    __extends(ScrollableLegendModel, _super);\n\n    function ScrollableLegendModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = ScrollableLegendModel.type;\n      return _this;\n    }\n    /**\n     * @param {number} scrollDataIndex\n     */\n\n\n    ScrollableLegendModel.prototype.setScrollDataIndex = function (scrollDataIndex) {\n      this.option.scrollDataIndex = scrollDataIndex;\n    };\n\n    ScrollableLegendModel.prototype.init = function (option, parentModel, ecModel) {\n      var inputPositionParams = getLayoutParams(option);\n\n      _super.prototype.init.call(this, option, parentModel, ecModel);\n\n      mergeAndNormalizeLayoutParams(this, option, inputPositionParams);\n    };\n    /**\n     * @override\n     */\n\n\n    ScrollableLegendModel.prototype.mergeOption = function (option, ecModel) {\n      _super.prototype.mergeOption.call(this, option, ecModel);\n\n      mergeAndNormalizeLayoutParams(this, this.option, option);\n    };\n\n    ScrollableLegendModel.type = 'legend.scroll';\n    ScrollableLegendModel.defaultOption = inheritDefaultOption(LegendModel.defaultOption, {\n      scrollDataIndex: 0,\n      pageButtonItemGap: 5,\n      pageButtonGap: null,\n      pageButtonPosition: 'end',\n      pageFormatter: '{current}/{total}',\n      pageIcons: {\n        horizontal: ['M0,0L12,-10L12,10z', 'M0,0L-12,-10L-12,10z'],\n        vertical: ['M0,0L20,0L10,-20z', 'M0,0L20,0L10,20z']\n      },\n      pageIconColor: '#2f4554',\n      pageIconInactiveColor: '#aaa',\n      pageIconSize: 15,\n      pageTextStyle: {\n        color: '#333'\n      },\n      animationDurationUpdate: 800\n    });\n    return ScrollableLegendModel;\n  }(LegendModel); // Do not `ignoreSize` to enable setting {left: 10, right: 10}.\n\n\n  function mergeAndNormalizeLayoutParams(legendModel, target, raw) {\n    var orient = legendModel.getOrient();\n    var ignoreSize = [1, 1];\n    ignoreSize[orient.index] = 0;\n    mergeLayoutParam(target, raw, {\n      type: 'box',\n      ignoreSize: !!ignoreSize\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Separate legend and scrollable legend to reduce package size.\n   */\n\n\n  var Group$3 = Group;\n  var WH = ['width', 'height'];\n  var XY = ['x', 'y'];\n\n  var ScrollableLegendView =\n  /** @class */\n  function (_super) {\n    __extends(ScrollableLegendView, _super);\n\n    function ScrollableLegendView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = ScrollableLegendView.type;\n      _this.newlineDisabled = true;\n      _this._currentIndex = 0;\n      return _this;\n    }\n\n    ScrollableLegendView.prototype.init = function () {\n      _super.prototype.init.call(this);\n\n      this.group.add(this._containerGroup = new Group$3());\n\n      this._containerGroup.add(this.getContentGroup());\n\n      this.group.add(this._controllerGroup = new Group$3());\n    };\n    /**\n     * @override\n     */\n\n\n    ScrollableLegendView.prototype.resetInner = function () {\n      _super.prototype.resetInner.call(this);\n\n      this._controllerGroup.removeAll();\n\n      this._containerGroup.removeClipPath();\n\n      this._containerGroup.__rectSize = null;\n    };\n    /**\n     * @override\n     */\n\n\n    ScrollableLegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n      var self = this; // Render content items.\n\n      _super.prototype.renderInner.call(this, itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n\n      var controllerGroup = this._controllerGroup; // FIXME: support be 'auto' adapt to size number text length,\n      // e.g., '3/12345' should not overlap with the control arrow button.\n\n      var pageIconSize = legendModel.get('pageIconSize', true);\n      var pageIconSizeArr = isArray(pageIconSize) ? pageIconSize : [pageIconSize, pageIconSize];\n      createPageButton('pagePrev', 0);\n      var pageTextStyleModel = legendModel.getModel('pageTextStyle');\n      controllerGroup.add(new ZRText({\n        name: 'pageText',\n        style: {\n          // Placeholder to calculate a proper layout.\n          text: 'xx/xx',\n          fill: pageTextStyleModel.getTextColor(),\n          font: pageTextStyleModel.getFont(),\n          verticalAlign: 'middle',\n          align: 'center'\n        },\n        silent: true\n      }));\n      createPageButton('pageNext', 1);\n\n      function createPageButton(name, iconIdx) {\n        var pageDataIndexName = name + 'DataIndex';\n        var icon = createIcon(legendModel.get('pageIcons', true)[legendModel.getOrient().name][iconIdx], {\n          // Buttons will be created in each render, so we do not need\n          // to worry about avoiding using legendModel kept in scope.\n          onclick: bind(self._pageGo, self, pageDataIndexName, legendModel, api)\n        }, {\n          x: -pageIconSizeArr[0] / 2,\n          y: -pageIconSizeArr[1] / 2,\n          width: pageIconSizeArr[0],\n          height: pageIconSizeArr[1]\n        });\n        icon.name = name;\n        controllerGroup.add(icon);\n      }\n    };\n    /**\n     * @override\n     */\n\n\n    ScrollableLegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n      var selectorGroup = this.getSelectorGroup();\n      var orientIdx = legendModel.getOrient().index;\n      var wh = WH[orientIdx];\n      var xy = XY[orientIdx];\n      var hw = WH[1 - orientIdx];\n      var yx = XY[1 - orientIdx];\n      selector && box( // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var processMaxSize = clone(maxSize);\n      selector && (processMaxSize[wh] = maxSize[wh] - selectorRect[wh] - selectorButtonGap);\n\n      var mainRect = this._layoutContentAndController(legendModel, isFirstRender, processMaxSize, orientIdx, wh, hw, yx, xy);\n\n      if (selector) {\n        if (selectorPosition === 'end') {\n          selectorPos[orientIdx] += mainRect[wh] + selectorButtonGap;\n        } else {\n          var offset = selectorRect[wh] + selectorButtonGap;\n          selectorPos[orientIdx] -= offset;\n          mainRect[xy] -= offset;\n        }\n\n        mainRect[wh] += selectorRect[wh] + selectorButtonGap;\n        selectorPos[1 - orientIdx] += mainRect[yx] + mainRect[hw] / 2 - selectorRect[hw] / 2;\n        mainRect[hw] = Math.max(mainRect[hw], selectorRect[hw]);\n        mainRect[yx] = Math.min(mainRect[yx], selectorRect[yx] + selectorPos[1 - orientIdx]);\n        selectorGroup.x = selectorPos[0];\n        selectorGroup.y = selectorPos[1];\n        selectorGroup.markRedraw();\n      }\n\n      return mainRect;\n    };\n\n    ScrollableLegendView.prototype._layoutContentAndController = function (legendModel, isFirstRender, maxSize, orientIdx, wh, hw, yx, xy) {\n      var contentGroup = this.getContentGroup();\n      var containerGroup = this._containerGroup;\n      var controllerGroup = this._controllerGroup; // Place items in contentGroup.\n\n      box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), !orientIdx ? null : maxSize.width, orientIdx ? null : maxSize.height);\n      box( // Buttons in controller are layout always horizontally.\n      'horizontal', controllerGroup, legendModel.get('pageButtonItemGap', true));\n      var contentRect = contentGroup.getBoundingRect();\n      var controllerRect = controllerGroup.getBoundingRect();\n      var showController = this._showController = contentRect[wh] > maxSize[wh]; // In case that the inner elements of contentGroup layout do not based on [0, 0]\n\n      var contentPos = [-contentRect.x, -contentRect.y]; // Remain contentPos when scroll animation perfroming.\n      // If first rendering, `contentGroup.position` is [0, 0], which\n      // does not make sense and may cause unexepcted animation if adopted.\n\n      if (!isFirstRender) {\n        contentPos[orientIdx] = contentGroup[xy];\n      } // Layout container group based on 0.\n\n\n      var containerPos = [0, 0];\n      var controllerPos = [-controllerRect.x, -controllerRect.y];\n      var pageButtonGap = retrieve2(legendModel.get('pageButtonGap', true), legendModel.get('itemGap', true)); // Place containerGroup and controllerGroup and contentGroup.\n\n      if (showController) {\n        var pageButtonPosition = legendModel.get('pageButtonPosition', true); // controller is on the right / bottom.\n\n        if (pageButtonPosition === 'end') {\n          controllerPos[orientIdx] += maxSize[wh] - controllerRect[wh];\n        } // controller is on the left / top.\n        else {\n            containerPos[orientIdx] += controllerRect[wh] + pageButtonGap;\n          }\n      } // Always align controller to content as 'middle'.\n\n\n      controllerPos[1 - orientIdx] += contentRect[hw] / 2 - controllerRect[hw] / 2;\n      contentGroup.setPosition(contentPos);\n      containerGroup.setPosition(containerPos);\n      controllerGroup.setPosition(controllerPos); // Calculate `mainRect` and set `clipPath`.\n      // mainRect should not be calculated by `this.group.getBoundingRect()`\n      // for sake of the overflow.\n\n      var mainRect = {\n        x: 0,\n        y: 0\n      }; // Consider content may be overflow (should be clipped).\n\n      mainRect[wh] = showController ? maxSize[wh] : contentRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], controllerRect[hw]); // `containerRect[yx] + containerPos[1 - orientIdx]` is 0.\n\n      mainRect[yx] = Math.min(0, controllerRect[yx] + controllerPos[1 - orientIdx]);\n      containerGroup.__rectSize = maxSize[wh];\n\n      if (showController) {\n        var clipShape = {\n          x: 0,\n          y: 0\n        };\n        clipShape[wh] = Math.max(maxSize[wh] - controllerRect[wh] - pageButtonGap, 0);\n        clipShape[hw] = mainRect[hw];\n        containerGroup.setClipPath(new Rect({\n          shape: clipShape\n        })); // Consider content may be larger than container, container rect\n        // can not be obtained from `containerGroup.getBoundingRect()`.\n\n        containerGroup.__rectSize = clipShape[wh];\n      } else {\n        // Do not remove or ignore controller. Keep them set as placeholders.\n        controllerGroup.eachChild(function (child) {\n          child.attr({\n            invisible: true,\n            silent: true\n          });\n        });\n      } // Content translate animation.\n\n\n      var pageInfo = this._getPageInfo(legendModel);\n\n      pageInfo.pageIndex != null && updateProps(contentGroup, {\n        x: pageInfo.contentPosition[0],\n        y: pageInfo.contentPosition[1]\n      }, // When switch from \"show controller\" to \"not show controller\", view should be\n      // updated immediately without animation, otherwise causes weird effect.\n      showController ? legendModel : null);\n\n      this._updatePageInfoView(legendModel, pageInfo);\n\n      return mainRect;\n    };\n\n    ScrollableLegendView.prototype._pageGo = function (to, legendModel, api) {\n      var scrollDataIndex = this._getPageInfo(legendModel)[to];\n\n      scrollDataIndex != null && api.dispatchAction({\n        type: 'legendScroll',\n        scrollDataIndex: scrollDataIndex,\n        legendId: legendModel.id\n      });\n    };\n\n    ScrollableLegendView.prototype._updatePageInfoView = function (legendModel, pageInfo) {\n      var controllerGroup = this._controllerGroup;\n      each(['pagePrev', 'pageNext'], function (name) {\n        var key = name + 'DataIndex';\n        var canJump = pageInfo[key] != null;\n        var icon = controllerGroup.childOfName(name);\n\n        if (icon) {\n          icon.setStyle('fill', canJump ? legendModel.get('pageIconColor', true) : legendModel.get('pageIconInactiveColor', true));\n          icon.cursor = canJump ? 'pointer' : 'default';\n        }\n      });\n      var pageText = controllerGroup.childOfName('pageText');\n      var pageFormatter = legendModel.get('pageFormatter');\n      var pageIndex = pageInfo.pageIndex;\n      var current = pageIndex != null ? pageIndex + 1 : 0;\n      var total = pageInfo.pageCount;\n      pageText && pageFormatter && pageText.setStyle('text', isString(pageFormatter) ? pageFormatter.replace('{current}', current == null ? '' : current + '').replace('{total}', total == null ? '' : total + '') : pageFormatter({\n        current: current,\n        total: total\n      }));\n    };\n    /**\n     *  contentPosition: Array.<number>, null when data item not found.\n     *  pageIndex: number, null when data item not found.\n     *  pageCount: number, always be a number, can be 0.\n     *  pagePrevDataIndex: number, null when no previous page.\n     *  pageNextDataIndex: number, null when no next page.\n     * }\n     */\n\n\n    ScrollableLegendView.prototype._getPageInfo = function (legendModel) {\n      var scrollDataIndex = legendModel.get('scrollDataIndex', true);\n      var contentGroup = this.getContentGroup();\n      var containerRectSize = this._containerGroup.__rectSize;\n      var orientIdx = legendModel.getOrient().index;\n      var wh = WH[orientIdx];\n      var xy = XY[orientIdx];\n\n      var targetItemIndex = this._findTargetItemIndex(scrollDataIndex);\n\n      var children = contentGroup.children();\n      var targetItem = children[targetItemIndex];\n      var itemCount = children.length;\n      var pCount = !itemCount ? 0 : 1;\n      var result = {\n        contentPosition: [contentGroup.x, contentGroup.y],\n        pageCount: pCount,\n        pageIndex: pCount - 1,\n        pagePrevDataIndex: null,\n        pageNextDataIndex: null\n      };\n\n      if (!targetItem) {\n        return result;\n      }\n\n      var targetItemInfo = getItemInfo(targetItem);\n      result.contentPosition[orientIdx] = -targetItemInfo.s; // Strategy:\n      // (1) Always align based on the left/top most item.\n      // (2) It is user-friendly that the last item shown in the\n      // current window is shown at the begining of next window.\n      // Otherwise if half of the last item is cut by the window,\n      // it will have no chance to display entirely.\n      // (3) Consider that item size probably be different, we\n      // have calculate pageIndex by size rather than item index,\n      // and we can not get page index directly by division.\n      // (4) The window is to narrow to contain more than\n      // one item, we should make sure that the page can be fliped.\n\n      for (var i = targetItemIndex + 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i <= itemCount; ++i) {\n        currItemInfo = getItemInfo(children[i]);\n\n        if ( // Half of the last item is out of the window.\n        !currItemInfo && winEndItemInfo.e > winStartItemInfo.s + containerRectSize || // If the current item does not intersect with the window, the new page\n        // can be started at the current item or the last item.\n        currItemInfo && !intersect(currItemInfo, winStartItemInfo.s)) {\n          if (winEndItemInfo.i > winStartItemInfo.i) {\n            winStartItemInfo = winEndItemInfo;\n          } else {\n            // e.g., when page size is smaller than item size.\n            winStartItemInfo = currItemInfo;\n          }\n\n          if (winStartItemInfo) {\n            if (result.pageNextDataIndex == null) {\n              result.pageNextDataIndex = winStartItemInfo.i;\n            }\n\n            ++result.pageCount;\n          }\n        }\n\n        winEndItemInfo = currItemInfo;\n      }\n\n      for (var i = targetItemIndex - 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i >= -1; --i) {\n        currItemInfo = getItemInfo(children[i]);\n\n        if ( // If the the end item does not intersect with the window started\n        // from the current item, a page can be settled.\n        (!currItemInfo || !intersect(winEndItemInfo, currItemInfo.s)) && // e.g., when page size is smaller than item size.\n        winStartItemInfo.i < winEndItemInfo.i) {\n          winEndItemInfo = winStartItemInfo;\n\n          if (result.pagePrevDataIndex == null) {\n            result.pagePrevDataIndex = winStartItemInfo.i;\n          }\n\n          ++result.pageCount;\n          ++result.pageIndex;\n        }\n\n        winStartItemInfo = currItemInfo;\n      }\n\n      return result;\n\n      function getItemInfo(el) {\n        if (el) {\n          var itemRect = el.getBoundingRect();\n          var start = itemRect[xy] + el[xy];\n          return {\n            s: start,\n            e: start + itemRect[wh],\n            i: el.__legendDataIndex\n          };\n        }\n      }\n\n      function intersect(itemInfo, winStart) {\n        return itemInfo.e >= winStart && itemInfo.s <= winStart + containerRectSize;\n      }\n    };\n\n    ScrollableLegendView.prototype._findTargetItemIndex = function (targetDataIndex) {\n      if (!this._showController) {\n        return 0;\n      }\n\n      var index;\n      var contentGroup = this.getContentGroup();\n      var defaultIndex;\n      contentGroup.eachChild(function (child, idx) {\n        var legendDataIdx = child.__legendDataIndex; // FIXME\n        // If the given targetDataIndex (from model) is illegal,\n        // we use defaultIndex. But the index on the legend model and\n        // action payload is still illegal. That case will not be\n        // changed until some scenario requires.\n\n        if (defaultIndex == null && legendDataIdx != null) {\n          defaultIndex = idx;\n        }\n\n        if (legendDataIdx === targetDataIndex) {\n          index = idx;\n        }\n      });\n      return index != null ? index : defaultIndex;\n    };\n\n    ScrollableLegendView.type = 'legend.scroll';\n    return ScrollableLegendView;\n  }(LegendView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function installScrollableLegendAction(registers) {\n    /**\n     * @event legendScroll\n     * @type {Object}\n     * @property {string} type 'legendScroll'\n     * @property {string} scrollDataIndex\n     */\n    registers.registerAction('legendScroll', 'legendscroll', function (payload, ecModel) {\n      var scrollDataIndex = payload.scrollDataIndex;\n      scrollDataIndex != null && ecModel.eachComponent({\n        mainType: 'legend',\n        subType: 'scroll',\n        query: payload\n      }, function (legendModel) {\n        legendModel.setScrollDataIndex(scrollDataIndex);\n      });\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$8(registers) {\n    use(install$9);\n    registers.registerComponentModel(ScrollableLegendModel);\n    registers.registerComponentView(ScrollableLegendView);\n    installScrollableLegendAction(registers);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Legend component entry file8\n   */\n\n\n  use(install$8);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var inner$7 = makeInner();\n  var clone$3 = clone;\n  var bind$1 = bind;\n  /**\n   * Base axis pointer class in 2D.\n   */\n\n  var BaseAxisPointer =\n  /** @class */\n  function () {\n    function BaseAxisPointer() {\n      this._dragging = false;\n      /**\n       * In px, arbitrary value. Do not set too small,\n       * no animation is ok for most cases.\n       */\n\n      this.animationThreshold = 15;\n    }\n    /**\n     * @implement\n     */\n\n\n    BaseAxisPointer.prototype.render = function (axisModel, axisPointerModel, api, forceRender) {\n      var value = axisPointerModel.get('value');\n      var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n      // be replaced when user calling setOption in not merge mode.\n\n      this._axisModel = axisModel;\n      this._axisPointerModel = axisPointerModel;\n      this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n      // So it is power consuming if performing `render` each time,\n      // especially on mobile device.\n\n      if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n        return;\n      }\n\n      this._lastValue = value;\n      this._lastStatus = status;\n      var group = this._group;\n      var handle = this._handle;\n\n      if (!status || status === 'hide') {\n        // Do not clear here, for animation better.\n        group && group.hide();\n        handle && handle.hide();\n        return;\n      }\n\n      group && group.show();\n      handle && handle.show(); // Otherwise status is 'show'\n\n      var elOption = {};\n      this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n      var graphicKey = elOption.graphicKey;\n\n      if (graphicKey !== this._lastGraphicKey) {\n        this.clear(api);\n      }\n\n      this._lastGraphicKey = graphicKey;\n      var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n      if (!group) {\n        group = this._group = new Group();\n        this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n        this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n        api.getZr().add(group);\n      } else {\n        var doUpdateProps = curry(updateProps$1, axisPointerModel, moveAnimation);\n        this.updatePointerEl(group, elOption, doUpdateProps);\n        this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n      }\n\n      updateMandatoryProps(group, axisPointerModel, true);\n\n      this._renderHandle(value);\n    };\n    /**\n     * @implement\n     */\n\n\n    BaseAxisPointer.prototype.remove = function (api) {\n      this.clear(api);\n    };\n    /**\n     * @implement\n     */\n\n\n    BaseAxisPointer.prototype.dispose = function (api) {\n      this.clear(api);\n    };\n    /**\n     * @protected\n     */\n\n\n    BaseAxisPointer.prototype.determineAnimation = function (axisModel, axisPointerModel) {\n      var animation = axisPointerModel.get('animation');\n      var axis = axisModel.axis;\n      var isCategoryAxis = axis.type === 'category';\n      var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n      if (!useSnap && !isCategoryAxis) {\n        return false;\n      }\n\n      if (animation === 'auto' || animation == null) {\n        var animationThreshold = this.animationThreshold;\n\n        if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n          return true;\n        } // It is important to auto animation when snap used. Consider if there is\n        // a dataZoom, animation will be disabled when too many points exist, while\n        // it will be enabled for better visual effect when little points exist.\n\n\n        if (useSnap) {\n          var seriesDataCount = getAxisInfo(axisModel).seriesDataCount;\n          var axisExtent = axis.getExtent(); // Approximate band width\n\n          return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n        }\n\n        return false;\n      }\n\n      return animation === true;\n    };\n    /**\n     * add {pointer, label, graphicKey} to elOption\n     * @protected\n     */\n\n\n    BaseAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n    };\n    /**\n     * @protected\n     */\n\n\n    BaseAxisPointer.prototype.createPointerEl = function (group, elOption, axisModel, axisPointerModel) {\n      var pointerOption = elOption.pointer;\n\n      if (pointerOption) {\n        var pointerEl = inner$7(group).pointerEl = new graphic[pointerOption.type](clone$3(elOption.pointer));\n        group.add(pointerEl);\n      }\n    };\n    /**\n     * @protected\n     */\n\n\n    BaseAxisPointer.prototype.createLabelEl = function (group, elOption, axisModel, axisPointerModel) {\n      if (elOption.label) {\n        var labelEl = inner$7(group).labelEl = new ZRText(clone$3(elOption.label));\n        group.add(labelEl);\n        updateLabelShowHide(labelEl, axisPointerModel);\n      }\n    };\n    /**\n     * @protected\n     */\n\n\n    BaseAxisPointer.prototype.updatePointerEl = function (group, elOption, updateProps$$1) {\n      var pointerEl = inner$7(group).pointerEl;\n\n      if (pointerEl && elOption.pointer) {\n        pointerEl.setStyle(elOption.pointer.style);\n        updateProps$$1(pointerEl, {\n          shape: elOption.pointer.shape\n        });\n      }\n    };\n    /**\n     * @protected\n     */\n\n\n    BaseAxisPointer.prototype.updateLabelEl = function (group, elOption, updateProps$$1, axisPointerModel) {\n      var labelEl = inner$7(group).labelEl;\n\n      if (labelEl) {\n        labelEl.setStyle(elOption.label.style);\n        updateProps$$1(labelEl, {\n          // Consider text length change in vertical axis, animation should\n          // be used on shape, otherwise the effect will be weird.\n          // TODOTODO\n          // shape: elOption.label.shape,\n          x: elOption.label.x,\n          y: elOption.label.y\n        });\n        updateLabelShowHide(labelEl, axisPointerModel);\n      }\n    };\n    /**\n     * @private\n     */\n\n\n    BaseAxisPointer.prototype._renderHandle = function (value) {\n      if (this._dragging || !this.updateHandleTransform) {\n        return;\n      }\n\n      var axisPointerModel = this._axisPointerModel;\n\n      var zr = this._api.getZr();\n\n      var handle = this._handle;\n      var handleModel = axisPointerModel.getModel('handle');\n      var status = axisPointerModel.get('status');\n\n      if (!handleModel.get('show') || !status || status === 'hide') {\n        handle && zr.remove(handle);\n        this._handle = null;\n        return;\n      }\n\n      var isInit;\n\n      if (!this._handle) {\n        isInit = true;\n        handle = this._handle = createIcon(handleModel.get('icon'), {\n          cursor: 'move',\n          draggable: true,\n          onmousemove: function (e) {\n            // Fot mobile devicem, prevent screen slider on the button.\n            stop(e.event);\n          },\n          onmousedown: bind$1(this._onHandleDragMove, this, 0, 0),\n          drift: bind$1(this._onHandleDragMove, this),\n          ondragend: bind$1(this._onHandleDragEnd, this)\n        });\n        zr.add(handle);\n      }\n\n      updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n      handle.setStyle(handleModel.getItemStyle(null, ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'])); // update position\n\n      var handleSize = handleModel.get('size');\n\n      if (!isArray(handleSize)) {\n        handleSize = [handleSize, handleSize];\n      }\n\n      handle.scaleX = handleSize[0] / 2;\n      handle.scaleY = handleSize[1] / 2;\n      createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n      this._moveHandleToValue(value, isInit);\n    };\n\n    BaseAxisPointer.prototype._moveHandleToValue = function (value, isInit) {\n      updateProps$1(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n    };\n\n    BaseAxisPointer.prototype._onHandleDragMove = function (dx, dy) {\n      var handle = this._handle;\n\n      if (!handle) {\n        return;\n      }\n\n      this._dragging = true; // Persistent for throttle.\n\n      var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n      this._payloadInfo = trans;\n      handle.stopAnimation();\n      handle.attr(getHandleTransProps(trans));\n      inner$7(handle).lastProp = null;\n\n      this._doDispatchAxisPointer();\n    };\n    /**\n     * Throttled method.\n     */\n\n\n    BaseAxisPointer.prototype._doDispatchAxisPointer = function () {\n      var handle = this._handle;\n\n      if (!handle) {\n        return;\n      }\n\n      var payloadInfo = this._payloadInfo;\n      var axisModel = this._axisModel;\n\n      this._api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payloadInfo.cursorPoint[0],\n        y: payloadInfo.cursorPoint[1],\n        tooltipOption: payloadInfo.tooltipOption,\n        axesInfo: [{\n          axisDim: axisModel.axis.dim,\n          axisIndex: axisModel.componentIndex\n        }]\n      });\n    };\n\n    BaseAxisPointer.prototype._onHandleDragEnd = function () {\n      this._dragging = false;\n      var handle = this._handle;\n\n      if (!handle) {\n        return;\n      }\n\n      var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n      // axisPointer. So move handle to align the exact value position when\n      // drag ended.\n\n\n      this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n      // button, and will be hidden after finger left handle button.\n\n\n      this._api.dispatchAction({\n        type: 'hideTip'\n      });\n    };\n    /**\n     * @private\n     */\n\n\n    BaseAxisPointer.prototype.clear = function (api) {\n      this._lastValue = null;\n      this._lastStatus = null;\n      var zr = api.getZr();\n      var group = this._group;\n      var handle = this._handle;\n\n      if (zr && group) {\n        this._lastGraphicKey = null;\n        group && zr.remove(group);\n        handle && zr.remove(handle);\n        this._group = null;\n        this._handle = null;\n        this._payloadInfo = null;\n      }\n\n      clear(this, '_doDispatchAxisPointer');\n    };\n    /**\n     * @protected\n     */\n\n\n    BaseAxisPointer.prototype.doClear = function () {// Implemented by sub-class if necessary.\n    };\n\n    BaseAxisPointer.prototype.buildLabel = function (xy, wh, xDimIndex) {\n      xDimIndex = xDimIndex || 0;\n      return {\n        x: xy[xDimIndex],\n        y: xy[1 - xDimIndex],\n        width: wh[xDimIndex],\n        height: wh[1 - xDimIndex]\n      };\n    };\n\n    return BaseAxisPointer;\n  }();\n\n  function updateProps$1(animationModel, moveAnimation, el, props) {\n    // Animation optimize.\n    if (!propsEqual(inner$7(el).lastProp, props)) {\n      inner$7(el).lastProp = props;\n      moveAnimation ? updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n    }\n  }\n\n  function propsEqual(lastProps, newProps) {\n    if (isObject(lastProps) && isObject(newProps)) {\n      var equals_1 = true;\n      each(newProps, function (item, key) {\n        equals_1 = equals_1 && propsEqual(lastProps[key], item);\n      });\n      return !!equals_1;\n    } else {\n      return lastProps === newProps;\n    }\n  }\n\n  function updateLabelShowHide(labelEl, axisPointerModel) {\n    labelEl[axisPointerModel.get(['label', 'show']) ? 'show' : 'hide']();\n  }\n\n  function getHandleTransProps(trans) {\n    return {\n      x: trans.x || 0,\n      y: trans.y || 0,\n      rotation: trans.rotation || 0\n    };\n  }\n\n  function updateMandatoryProps(group, axisPointerModel, silent) {\n    var z = axisPointerModel.get('z');\n    var zlevel = axisPointerModel.get('zlevel');\n    group && group.traverse(function (el) {\n      if (el.type !== 'group') {\n        z != null && (el.z = z);\n        zlevel != null && (el.zlevel = zlevel);\n        el.silent = silent;\n      }\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function buildElStyle(axisPointerModel) {\n    var axisPointerType = axisPointerModel.get('type');\n    var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n    var style;\n\n    if (axisPointerType === 'line') {\n      style = styleModel.getLineStyle();\n      style.fill = null;\n    } else if (axisPointerType === 'shadow') {\n      style = styleModel.getAreaStyle();\n      style.stroke = null;\n    }\n\n    return style;\n  }\n  /**\n   * @param {Function} labelPos {align, verticalAlign, position}\n   */\n\n\n  function buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n    var value = axisPointerModel.get('value');\n    var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n      precision: axisPointerModel.get(['label', 'precision']),\n      formatter: axisPointerModel.get(['label', 'formatter'])\n    });\n    var labelModel = axisPointerModel.getModel('label');\n    var paddings = normalizeCssArray$1(labelModel.get('padding') || 0);\n    var font = labelModel.getFont();\n    var textRect = getBoundingRect(text, font);\n    var position = labelPos.position;\n    var width = textRect.width + paddings[1] + paddings[3];\n    var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n    var align = labelPos.align;\n    align === 'right' && (position[0] -= width);\n    align === 'center' && (position[0] -= width / 2);\n    var verticalAlign = labelPos.verticalAlign;\n    verticalAlign === 'bottom' && (position[1] -= height);\n    verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n    confineInContainer(position, width, height, api);\n    var bgColor = labelModel.get('backgroundColor');\n\n    if (!bgColor || bgColor === 'auto') {\n      bgColor = axisModel.get(['axisLine', 'lineStyle', 'color']);\n    }\n\n    elOption.label = {\n      // shape: {x: 0, y: 0, width: width, height: height, r: labelModel.get('borderRadius')},\n      x: position[0],\n      y: position[1],\n      style: createTextStyle(labelModel, {\n        text: text,\n        font: font,\n        fill: labelModel.getTextColor(),\n        padding: paddings,\n        backgroundColor: bgColor\n      }),\n      // Lable should be over axisPointer.\n      z2: 10\n    };\n  } // Do not overflow ec container\n\n\n  function confineInContainer(position, width, height, api) {\n    var viewWidth = api.getWidth();\n    var viewHeight = api.getHeight();\n    position[0] = Math.min(position[0] + width, viewWidth) - width;\n    position[1] = Math.min(position[1] + height, viewHeight) - height;\n    position[0] = Math.max(position[0], 0);\n    position[1] = Math.max(position[1], 0);\n  }\n\n  function getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n    value = axis.scale.parse(value);\n    var text = axis.scale.getLabel({\n      value: value\n    }, {\n      // If `precision` is set, width can be fixed (like '12.00500'), which\n      // helps to debounce when when moving label.\n      precision: opt.precision\n    });\n    var formatter = opt.formatter;\n\n    if (formatter) {\n      var params_1 = {\n        value: getAxisRawValue(axis, {\n          value: value\n        }),\n        axisDimension: axis.dim,\n        axisIndex: axis.index,\n        seriesData: []\n      };\n      each(seriesDataIndices, function (idxItem) {\n        var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n        var dataIndex = idxItem.dataIndexInside;\n        var dataParams = series && series.getDataParams(dataIndex);\n        dataParams && params_1.seriesData.push(dataParams);\n      });\n\n      if (isString(formatter)) {\n        text = formatter.replace('{value}', text);\n      } else if (isFunction(formatter)) {\n        text = formatter(params_1);\n      }\n    }\n\n    return text;\n  }\n\n  function getTransformedPosition(axis, value, layoutInfo) {\n    var transform = create$1();\n    rotate(transform, transform, layoutInfo.rotation);\n    translate(transform, transform, layoutInfo.position);\n    return applyTransform$1([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n  }\n\n  function buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n    // @ts-ignore\n    var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n    layoutInfo.labelMargin = axisPointerModel.get(['label', 'margin']);\n    buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n      position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n      align: textLayout.textAlign,\n      verticalAlign: textLayout.textVerticalAlign\n    });\n  }\n\n  function makeLineShape(p1, p2, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x1: p1[xDimIndex],\n      y1: p1[1 - xDimIndex],\n      x2: p2[xDimIndex],\n      y2: p2[1 - xDimIndex]\n    };\n  }\n\n  function makeRectShape(xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var CartesianAxisPointer =\n  /** @class */\n  function (_super) {\n    __extends(CartesianAxisPointer, _super);\n\n    function CartesianAxisPointer() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @override\n     */\n\n\n    CartesianAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n      var axis = axisModel.axis;\n      var grid = axis.grid;\n      var axisPointerType = axisPointerModel.get('type');\n      var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n      var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n      if (axisPointerType && axisPointerType !== 'none') {\n        var elStyle = buildElStyle(axisPointerModel);\n        var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n        pointerOption.style = elStyle;\n        elOption.graphicKey = pointerOption.type;\n        elOption.pointer = pointerOption;\n      }\n\n      var layoutInfo = layout$1(grid.model, axisModel);\n      buildCartesianSingleLabelElOption( // @ts-ignore\n      value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n    };\n    /**\n     * @override\n     */\n\n\n    CartesianAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\n      var layoutInfo = layout$1(axisModel.axis.grid.model, axisModel, {\n        labelInside: false\n      }); // @ts-ignore\n\n      layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\n      var pos = getTransformedPosition(axisModel.axis, value, layoutInfo);\n      return {\n        x: pos[0],\n        y: pos[1],\n        rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n      };\n    };\n    /**\n     * @override\n     */\n\n\n    CartesianAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\n      var axis = axisModel.axis;\n      var grid = axis.grid;\n      var axisExtent = axis.getGlobalExtent(true);\n      var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n      var dimIndex = axis.dim === 'x' ? 0 : 1;\n      var currPosition = [transform.x, transform.y];\n      currPosition[dimIndex] += delta[dimIndex];\n      currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n      currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n      var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n      var cursorPoint = [cursorOtherValue, cursorOtherValue];\n      cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n      var tooltipOptions = [{\n        verticalAlign: 'middle'\n      }, {\n        align: 'center'\n      }];\n      return {\n        x: currPosition[0],\n        y: currPosition[1],\n        rotation: transform.rotation,\n        cursorPoint: cursorPoint,\n        tooltipOption: tooltipOptions[dimIndex]\n      };\n    };\n\n    return CartesianAxisPointer;\n  }(BaseAxisPointer);\n\n  function getCartesian(grid, axis) {\n    var opt = {};\n    opt[axis.dim + 'AxisIndex'] = axis.index;\n    return grid.getCartesian(opt);\n  }\n\n  var pointerShapeBuilder = {\n    line: function (axis, pixelValue, otherExtent) {\n      var targetShape = makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n      return {\n        type: 'Line',\n        subPixelOptimize: true,\n        shape: targetShape\n      };\n    },\n    shadow: function (axis, pixelValue, otherExtent) {\n      var bandWidth = Math.max(1, axis.getBandWidth());\n      var span = otherExtent[1] - otherExtent[0];\n      return {\n        type: 'Rect',\n        shape: makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n      };\n    }\n  };\n\n  function getAxisDimIndex(axis) {\n    return axis.dim === 'x' ? 0 : 1;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var AxisPointerModel =\n  /** @class */\n  function (_super) {\n    __extends(AxisPointerModel, _super);\n\n    function AxisPointerModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = AxisPointerModel.type;\n      return _this;\n    }\n\n    AxisPointerModel.type = 'axisPointer';\n    AxisPointerModel.defaultOption = {\n      // 'auto' means that show when triggered by tooltip or handle.\n      show: 'auto',\n      // zlevel: 0,\n      z: 50,\n      type: 'line',\n      // axispointer triggered by tootip determine snap automatically,\n      // see `modelHelper`.\n      snap: false,\n      triggerTooltip: true,\n      value: null,\n      status: null,\n      link: [],\n      // Do not set 'auto' here, otherwise global animation: false\n      // will not effect at this axispointer.\n      animation: null,\n      animationDurationUpdate: 200,\n      lineStyle: {\n        color: '#B9BEC9',\n        width: 1,\n        type: 'dashed'\n      },\n      shadowStyle: {\n        color: 'rgba(210,219,238,0.2)'\n      },\n      label: {\n        show: true,\n        formatter: null,\n        precision: 'auto',\n        margin: 3,\n        color: '#fff',\n        padding: [5, 7, 5, 7],\n        backgroundColor: 'auto',\n        borderColor: null,\n        borderWidth: 0,\n        borderRadius: 3\n      },\n      handle: {\n        show: false,\n        // eslint-disable-next-line\n        icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n        size: 45,\n        // handle margin is from symbol center to axis, which is stable when circular move.\n        margin: 50,\n        // color: '#1b8bbd'\n        // color: '#2f4554'\n        color: '#333',\n        shadowBlur: 3,\n        shadowColor: '#aaa',\n        shadowOffsetX: 0,\n        shadowOffsetY: 2,\n        // For mobile performance\n        throttle: 40\n      }\n    };\n    return AxisPointerModel;\n  }(ComponentModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var inner$8 = makeInner();\n  var each$4 = each;\n  /**\n   * @param {string} key\n   * @param {module:echarts/ExtensionAPI} api\n   * @param {Function} handler\n   *      param: {string} currTrigger\n   *      param: {Array.<number>} point\n   */\n\n  function register(key, api, handler) {\n    if (env.node) {\n      return;\n    }\n\n    var zr = api.getZr();\n    inner$8(zr).records || (inner$8(zr).records = {});\n    initGlobalListeners(zr, api);\n    var record = inner$8(zr).records[key] || (inner$8(zr).records[key] = {});\n    record.handler = handler;\n  }\n\n  function initGlobalListeners(zr, api) {\n    if (inner$8(zr).initialized) {\n      return;\n    }\n\n    inner$8(zr).initialized = true;\n    useHandler('click', curry(doEnter, 'click'));\n    useHandler('mousemove', curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n    useHandler('globalout', onLeave);\n\n    function useHandler(eventType, cb) {\n      zr.on(eventType, function (e) {\n        var dis = makeDispatchAction(api);\n        each$4(inner$8(zr).records, function (record) {\n          record && cb(record, e, dis.dispatchAction);\n        });\n        dispatchTooltipFinally(dis.pendings, api);\n      });\n    }\n  }\n\n  function dispatchTooltipFinally(pendings, api) {\n    var showLen = pendings.showTip.length;\n    var hideLen = pendings.hideTip.length;\n    var actuallyPayload;\n\n    if (showLen) {\n      actuallyPayload = pendings.showTip[showLen - 1];\n    } else if (hideLen) {\n      actuallyPayload = pendings.hideTip[hideLen - 1];\n    }\n\n    if (actuallyPayload) {\n      actuallyPayload.dispatchAction = null;\n      api.dispatchAction(actuallyPayload);\n    }\n  }\n\n  function onLeave(record, e, dispatchAction) {\n    record.handler('leave', null, dispatchAction);\n  }\n\n  function doEnter(currTrigger, record, e, dispatchAction) {\n    record.handler(currTrigger, e, dispatchAction);\n  }\n\n  function makeDispatchAction(api) {\n    var pendings = {\n      showTip: [],\n      hideTip: []\n    }; // FIXME\n    // better approach?\n    // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n    // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n    // So we have to add \"final stage\" to merge those dispatched actions.\n\n    var dispatchAction = function (payload) {\n      var pendingList = pendings[payload.type];\n\n      if (pendingList) {\n        pendingList.push(payload);\n      } else {\n        payload.dispatchAction = dispatchAction;\n        api.dispatchAction(payload);\n      }\n    };\n\n    return {\n      dispatchAction: dispatchAction,\n      pendings: pendings\n    };\n  }\n\n  function unregister(key, api) {\n    if (env.node) {\n      return;\n    }\n\n    var zr = api.getZr();\n    var record = (inner$8(zr).records || {})[key];\n\n    if (record) {\n      inner$8(zr).records[key] = null;\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var AxisPointerView =\n  /** @class */\n  function (_super) {\n    __extends(AxisPointerView, _super);\n\n    function AxisPointerView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = AxisPointerView.type;\n      return _this;\n    }\n\n    AxisPointerView.prototype.render = function (globalAxisPointerModel, ecModel, api) {\n      var globalTooltipModel = ecModel.getComponent('tooltip');\n      var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n      // AxisPointerView to be independent to Tooltip.\n\n      register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n        // If 'none', it is not controlled by mouse totally.\n        if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n          dispatchAction({\n            type: 'updateAxisPointer',\n            currTrigger: currTrigger,\n            x: e && e.offsetX,\n            y: e && e.offsetY\n          });\n        }\n      });\n    };\n\n    AxisPointerView.prototype.remove = function (ecModel, api) {\n      unregister('axisPointer', api);\n    };\n\n    AxisPointerView.prototype.dispose = function (ecModel, api) {\n      unregister('axisPointer', api);\n    };\n\n    AxisPointerView.type = 'axisPointer';\n    return AxisPointerView;\n  }(ComponentView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * @param finder contains {seriesIndex, dataIndex, dataIndexInside}\n   * @param ecModel\n   * @return  {point: [x, y], el: ...} point Will not be null.\n   */\n\n\n  function findPointFromSeries(finder, ecModel) {\n    var point = [];\n    var seriesIndex = finder.seriesIndex;\n    var seriesModel;\n\n    if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n      return {\n        point: []\n      };\n    }\n\n    var data = seriesModel.getData();\n    var dataIndex = queryDataIndex(data, finder);\n\n    if (dataIndex == null || dataIndex < 0 || isArray(dataIndex)) {\n      return {\n        point: []\n      };\n    }\n\n    var el = data.getItemGraphicEl(dataIndex);\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (seriesModel.getTooltipPosition) {\n      point = seriesModel.getTooltipPosition(dataIndex) || [];\n    } else if (coordSys && coordSys.dataToPoint) {\n      if (finder.isStacked) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var valueAxisDim = valueAxis.dim;\n        var baseAxisDim = baseAxis.dim;\n        var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n        var baseDim = data.mapDimension(baseAxisDim);\n        var stackedData = [];\n        stackedData[baseDataOffset] = data.get(baseDim, dataIndex);\n        stackedData[1 - baseDataOffset] = data.get(data.getCalculationInfo('stackResultDimension'), dataIndex);\n        point = coordSys.dataToPoint(stackedData) || [];\n      } else {\n        point = coordSys.dataToPoint(data.getValues(map(coordSys.dimensions, function (dim) {\n          return data.mapDimension(dim);\n        }), dataIndex)) || [];\n      }\n    } else if (el) {\n      // Use graphic bounding rect\n      var rect = el.getBoundingRect().clone();\n      rect.applyTransform(el.transform);\n      point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n    }\n\n    return {\n      point: point,\n      el: el\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var inner$9 = makeInner();\n  /**\n   * Basic logic: check all axis, if they do not demand show/highlight,\n   * then hide/downplay them.\n   *\n   * @return content of event obj for echarts.connect.\n   */\n\n  function axisTrigger(payload, ecModel, api) {\n    var currTrigger = payload.currTrigger;\n    var point = [payload.x, payload.y];\n    var finder = payload;\n    var dispatchAction = payload.dispatchAction || bind(api.dispatchAction, api);\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n    // See #6121. But we are not able to reproduce it yet.\n\n    if (!coordSysAxesInfo) {\n      return;\n    }\n\n    if (illegalPoint(point)) {\n      // Used in the default behavior of `connection`: use the sample seriesIndex\n      // and dataIndex. And also used in the tooltipView trigger.\n      point = findPointFromSeries({\n        seriesIndex: finder.seriesIndex,\n        // Do not use dataIndexInside from other ec instance.\n        // FIXME: auto detect it?\n        dataIndex: finder.dataIndex\n      }, ecModel).point;\n    }\n\n    var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n    // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n    // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n    // and dataIndex.\n\n    var inputAxesInfo = finder.axesInfo;\n    var axesInfo = coordSysAxesInfo.axesInfo;\n    var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n    var outputPayload = {};\n    var showValueMap = {};\n    var dataByCoordSys = {\n      list: [],\n      map: {}\n    };\n    var updaters = {\n      showPointer: curry(showPointer, showValueMap),\n      showTooltip: curry(showTooltip, dataByCoordSys)\n    }; // Process for triggered axes.\n\n    each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n      // If a point given, it must be contained by the coordinate system.\n      var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n      each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n        var axis = axisInfo.axis;\n        var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n        if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n          var val = inputAxisInfo && inputAxisInfo.value;\n\n          if (val == null && !isIllegalPoint) {\n            val = axis.pointToData(point);\n          }\n\n          val != null && processOnAxis(axisInfo, val, updaters, false, outputPayload);\n        }\n      });\n    }); // Process for linked axes.\n\n    var linkTriggers = {};\n    each(axesInfo, function (tarAxisInfo, tarKey) {\n      var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n      if (linkGroup && !showValueMap[tarKey]) {\n        each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n          var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n          if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n            var val = srcValItem.value;\n            linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n            linkTriggers[tarAxisInfo.key] = val;\n          }\n        });\n      }\n    });\n    each(linkTriggers, function (val, tarKey) {\n      processOnAxis(axesInfo[tarKey], val, updaters, true, outputPayload);\n    });\n    updateModelActually(showValueMap, axesInfo, outputPayload);\n    dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n    dispatchHighDownActually(axesInfo, dispatchAction, api);\n    return outputPayload;\n  }\n\n  function processOnAxis(axisInfo, newValue, updaters, noSnap, outputFinder) {\n    var axis = axisInfo.axis;\n\n    if (axis.scale.isBlank() || !axis.containData(newValue)) {\n      return;\n    }\n\n    if (!axisInfo.involveSeries) {\n      updaters.showPointer(axisInfo, newValue);\n      return;\n    } // Heavy calculation. So put it after axis.containData checking.\n\n\n    var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n    var payloadBatch = payloadInfo.payloadBatch;\n    var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n    // By default use the first involved series data as a sample to connect.\n\n    if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n      extend(outputFinder, payloadBatch[0]);\n    } // If no linkSource input, this process is for collecting link\n    // target, where snap should not be accepted.\n\n\n    if (!noSnap && axisInfo.snap) {\n      if (axis.containData(snapToValue) && snapToValue != null) {\n        newValue = snapToValue;\n      }\n    }\n\n    updaters.showPointer(axisInfo, newValue, payloadBatch); // Tooltip should always be snapToValue, otherwise there will be\n    // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n    updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n  }\n\n  function buildPayloadsBySeries(value, axisInfo) {\n    var axis = axisInfo.axis;\n    var dim = axis.dim;\n    var snapToValue = value;\n    var payloadBatch = [];\n    var minDist = Number.MAX_VALUE;\n    var minDiff = -1;\n    each(axisInfo.seriesModels, function (series, idx) {\n      var dataDim = series.getData().mapDimensionsAll(dim);\n      var seriesNestestValue;\n      var dataIndices;\n\n      if (series.getAxisTooltipData) {\n        var result = series.getAxisTooltipData(dataDim, value, axis);\n        dataIndices = result.dataIndices;\n        seriesNestestValue = result.nestestValue;\n      } else {\n        dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n        // when data length is not same.\n        // false,\n        axis.type === 'category' ? 0.5 : null);\n\n        if (!dataIndices.length) {\n          return;\n        }\n\n        seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n      }\n\n      if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n        return;\n      }\n\n      var diff = value - seriesNestestValue;\n      var dist = Math.abs(diff); // Consider category case\n\n      if (dist <= minDist) {\n        if (dist < minDist || diff >= 0 && minDiff < 0) {\n          minDist = dist;\n          minDiff = diff;\n          snapToValue = seriesNestestValue;\n          payloadBatch.length = 0;\n        }\n\n        each(dataIndices, function (dataIndex) {\n          payloadBatch.push({\n            seriesIndex: series.seriesIndex,\n            dataIndexInside: dataIndex,\n            dataIndex: series.getData().getRawIndex(dataIndex)\n          });\n        });\n      }\n    });\n    return {\n      payloadBatch: payloadBatch,\n      snapToValue: snapToValue\n    };\n  }\n\n  function showPointer(showValueMap, axisInfo, value, payloadBatch) {\n    showValueMap[axisInfo.key] = {\n      value: value,\n      payloadBatch: payloadBatch\n    };\n  }\n\n  function showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n    var payloadBatch = payloadInfo.payloadBatch;\n    var axis = axisInfo.axis;\n    var axisModel = axis.model;\n    var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n    // whose length will be used to judge whether dispatch action.\n\n    if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n      return;\n    }\n\n    var coordSysModel = axisInfo.coordSys.model;\n    var coordSysKey = makeKey(coordSysModel);\n    var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n    if (!coordSysItem) {\n      coordSysItem = dataByCoordSys.map[coordSysKey] = {\n        coordSysId: coordSysModel.id,\n        coordSysIndex: coordSysModel.componentIndex,\n        coordSysType: coordSysModel.type,\n        coordSysMainType: coordSysModel.mainType,\n        dataByAxis: []\n      };\n      dataByCoordSys.list.push(coordSysItem);\n    }\n\n    coordSysItem.dataByAxis.push({\n      axisDim: axis.dim,\n      axisIndex: axisModel.componentIndex,\n      axisType: axisModel.type,\n      axisId: axisModel.id,\n      value: value,\n      // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n      // depends that all models have been updated. So it should not be performed\n      // here. Considering axisPointerModel used here is volatile, which is hard\n      // to be retrieve in TooltipView, we prepare parameters here.\n      valueLabelOpt: {\n        precision: axisPointerModel.get(['label', 'precision']),\n        formatter: axisPointerModel.get(['label', 'formatter'])\n      },\n      seriesDataIndices: payloadBatch.slice()\n    });\n  }\n\n  function updateModelActually(showValueMap, axesInfo, outputPayload) {\n    var outputAxesInfo = outputPayload.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n    each(axesInfo, function (axisInfo, key) {\n      var option = axisInfo.axisPointerModel.option;\n      var valItem = showValueMap[key];\n\n      if (valItem) {\n        !axisInfo.useHandle && (option.status = 'show');\n        option.value = valItem.value; // For label formatter param and highlight.\n\n        option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n      } // When always show (e.g., handle used), remain\n      // original value and status.\n      else {\n          // If hide, value still need to be set, consider\n          // click legend to toggle axis blank.\n          !axisInfo.useHandle && (option.status = 'hide');\n        } // If status is 'hide', should be no info in payload.\n\n\n      option.status === 'show' && outputAxesInfo.push({\n        axisDim: axisInfo.axis.dim,\n        axisIndex: axisInfo.axis.model.componentIndex,\n        value: option.value\n      });\n    });\n  }\n\n  function dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n    // Basic logic: If no showTip required, hideTip will be dispatched.\n    if (illegalPoint(point) || !dataByCoordSys.list.length) {\n      dispatchAction({\n        type: 'hideTip'\n      });\n      return;\n    } // In most case only one axis (or event one series is used). It is\n    // convinient to fetch payload.seriesIndex and payload.dataIndex\n    // dirtectly. So put the first seriesIndex and dataIndex of the first\n    // axis on the payload.\n\n\n    var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n    dispatchAction({\n      type: 'showTip',\n      escapeConnect: true,\n      x: point[0],\n      y: point[1],\n      tooltipOption: payload.tooltipOption,\n      position: payload.position,\n      dataIndexInside: sampleItem.dataIndexInside,\n      dataIndex: sampleItem.dataIndex,\n      seriesIndex: sampleItem.seriesIndex,\n      dataByCoordSys: dataByCoordSys.list\n    });\n  }\n\n  function dispatchHighDownActually(axesInfo, dispatchAction, api) {\n    // FIXME\n    // highlight status modification shoule be a stage of main process?\n    // (Consider confilct (e.g., legend and axisPointer) and setOption)\n    var zr = api.getZr();\n    var highDownKey = 'axisPointerLastHighlights';\n    var lastHighlights = inner$9(zr)[highDownKey] || {};\n    var newHighlights = inner$9(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n    // Build hash map and remove duplicate incidentally.\n\n    each(axesInfo, function (axisInfo, key) {\n      var option = axisInfo.axisPointerModel.option;\n      option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n        var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n        newHighlights[key] = batchItem;\n      });\n    }); // Diff.\n\n    var toHighlight = [];\n    var toDownplay = [];\n    each(lastHighlights, function (batchItem, key) {\n      !newHighlights[key] && toDownplay.push(batchItem);\n    });\n    each(newHighlights, function (batchItem, key) {\n      !lastHighlights[key] && toHighlight.push(batchItem);\n    });\n    toDownplay.length && api.dispatchAction({\n      type: 'downplay',\n      escapeConnect: true,\n      // Not blur others when highlight in axisPointer.\n      notBlur: true,\n      batch: toDownplay\n    });\n    toHighlight.length && api.dispatchAction({\n      type: 'highlight',\n      escapeConnect: true,\n      // Not blur others when highlight in axisPointer.\n      notBlur: true,\n      batch: toHighlight\n    });\n  }\n\n  function findInputAxisInfo(inputAxesInfo, axisInfo) {\n    for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n      var inputAxisInfo = inputAxesInfo[i];\n\n      if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n        return inputAxisInfo;\n      }\n    }\n  }\n\n  function makeMapperParam(axisInfo) {\n    var axisModel = axisInfo.axis.model;\n    var item = {};\n    var dim = item.axisDim = axisInfo.axis.dim;\n    item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n    item.axisName = item[dim + 'AxisName'] = axisModel.name;\n    item.axisId = item[dim + 'AxisId'] = axisModel.id;\n    return item;\n  }\n\n  function illegalPoint(point) {\n    return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$11(registers) {\n    // CartesianAxisPointer is not supposed to be required here. But consider\n    // echarts.simple.js and online build tooltip, which only require gridSimple,\n    // CartesianAxisPointer should be able to required somewhere.\n    AxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\n    registers.registerComponentModel(AxisPointerModel);\n    registers.registerComponentView(AxisPointerView);\n    registers.registerPreprocessor(function (option) {\n      // Always has a global axisPointerModel for default setting.\n      if (option) {\n        (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n        var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n        // is not set, remain null/undefined, otherwise it will\n        // override existent link setting.\n\n        if (link && !isArray(link)) {\n          option.axisPointer.link = [link];\n        }\n      }\n    }); // This process should proformed after coordinate systems created\n    // and series data processed. So put it on statistic processing stage.\n\n    registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n      // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n      // allAxesInfo should be updated when setOption performed.\n      ecModel.getComponent('axisPointer').coordSysAxesInfo = collect(ecModel, api);\n    }); // Broadcast to all views.\n\n    registers.registerAction({\n      type: 'updateAxisPointer',\n      event: 'updateAxisPointer',\n      update: ':updateAxisPointer'\n    }, axisTrigger);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var TooltipModel =\n  /** @class */\n  function (_super) {\n    __extends(TooltipModel, _super);\n\n    function TooltipModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = TooltipModel.type;\n      return _this;\n    }\n\n    TooltipModel.type = 'tooltip';\n    TooltipModel.dependencies = ['axisPointer'];\n    TooltipModel.defaultOption = {\n      // zlevel: 0,\n      z: 60,\n      show: true,\n      // tooltip main content\n      showContent: true,\n      // 'trigger' only works on coordinate system.\n      // 'item' | 'axis' | 'none'\n      trigger: 'item',\n      // 'click' | 'mousemove' | 'none'\n      triggerOn: 'mousemove|click',\n      alwaysShowContent: false,\n      displayMode: 'single',\n      renderMode: 'auto',\n      // whether restraint content inside viewRect.\n      // If renderMode: 'richText', default true.\n      // If renderMode: 'html', defaut false (for backward compat).\n      confine: null,\n      showDelay: 0,\n      hideDelay: 100,\n      // Animation transition time, unit is second\n      transitionDuration: 0.4,\n      enterable: false,\n      backgroundColor: '#fff',\n      // box shadow\n      shadowBlur: 10,\n      shadowColor: 'rgba(0, 0, 0, .2)',\n      shadowOffsetX: 1,\n      shadowOffsetY: 2,\n      // tooltip border radius, unit is px, default is 4\n      borderRadius: 4,\n      // tooltip border width, unit is px, default is 0 (no border)\n      borderWidth: 1,\n      // Tooltip inside padding, default is 5 for all direction\n      // Array is allowed to set up, right, bottom, left, same with css\n      // The default value: See `tooltip/tooltipMarkup.ts#getPaddingFromTooltipModel`.\n      padding: null,\n      // Extra css text\n      extraCssText: '',\n      // axis indicator, trigger by axis\n      axisPointer: {\n        // default is line\n        // legal values: 'line' | 'shadow' | 'cross'\n        type: 'line',\n        // Valid when type is line, appoint tooltip line locate on which line. Optional\n        // legal values: 'x' | 'y' | 'angle' | 'radius' | 'auto'\n        // default is 'auto', chose the axis which type is category.\n        // for multiply y axis, cartesian coord chose x axis, polar chose angle axis\n        axis: 'auto',\n        animation: 'auto',\n        animationDurationUpdate: 200,\n        animationEasingUpdate: 'exponentialOut',\n        crossStyle: {\n          color: '#999',\n          width: 1,\n          type: 'dashed',\n          // TODO formatter\n          textStyle: {}\n        } // lineStyle and shadowStyle should not be specified here,\n        // otherwise it will always override those styles on option.axisPointer.\n\n      },\n      textStyle: {\n        color: '#666',\n        fontSize: 14\n      }\n    };\n    return TooltipModel;\n  }(ComponentModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /* global document */\n\n\n  function shouldTooltipConfine(tooltipModel) {\n    var confineOption = tooltipModel.get('confine');\n    return confineOption != null ? !!confineOption // In richText mode, the outside part can not be visible.\n    : tooltipModel.get('renderMode') === 'richText';\n  }\n\n  function testStyle(styleProps) {\n    if (!env.domSupported) {\n      return;\n    }\n\n    var style = document.documentElement.style;\n\n    for (var i = 0, len = styleProps.length; i < len; i++) {\n      if (styleProps[i] in style) {\n        return styleProps[i];\n      }\n    }\n  }\n\n  var TRANSFORM_VENDOR = testStyle(['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\n  var TRANSITION_VENDOR = testStyle(['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\n\n  function toCSSVendorPrefix(styleVendor, styleProp) {\n    if (!styleVendor) {\n      return styleProp;\n    }\n\n    styleProp = toCamelCase(styleProp, true);\n    var idx = styleVendor.indexOf(styleProp);\n    styleVendor = idx === -1 ? styleProp : \"-\" + styleVendor.slice(0, idx) + \"-\" + styleProp;\n    return styleVendor.toLowerCase();\n  }\n\n  function getComputedStyle(el, style) {\n    var stl = el.currentStyle || document.defaultView && document.defaultView.getComputedStyle(el);\n    return stl ? style ? stl[style] : stl : null;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /* global document, window */\n\n\n  var CSS_TRANSITION_VENDOR = toCSSVendorPrefix(TRANSITION_VENDOR, 'transition');\n  var CSS_TRANSFORM_VENDOR = toCSSVendorPrefix(TRANSFORM_VENDOR, 'transform'); // eslint-disable-next-line\n\n  var gCssText = \"position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;\" + (env.transform3dSupported ? 'will-change:transform;' : '');\n\n  function mirrorPos(pos) {\n    pos = pos === 'left' ? 'right' : pos === 'right' ? 'left' : pos === 'top' ? 'bottom' : 'top';\n    return pos;\n  }\n\n  function assembleArrow(tooltipModel, borderColor, arrowPosition) {\n    if (!isString(arrowPosition) || arrowPosition === 'inside') {\n      return '';\n    }\n\n    var backgroundColor = tooltipModel.get('backgroundColor');\n    var borderWidth = tooltipModel.get('borderWidth');\n    borderColor = convertToColorString(borderColor);\n    var arrowPos = mirrorPos(arrowPosition);\n    var arrowSize = Math.max(Math.round(borderWidth) * 1.5, 6);\n    var positionStyle = '';\n    var transformStyle = CSS_TRANSFORM_VENDOR + ':';\n    var rotateDeg;\n\n    if (indexOf(['left', 'right'], arrowPos) > -1) {\n      positionStyle += 'top:50%';\n      transformStyle += \"translateY(-50%) rotate(\" + (rotateDeg = arrowPos === 'left' ? -225 : -45) + \"deg)\";\n    } else {\n      positionStyle += 'left:50%';\n      transformStyle += \"translateX(-50%) rotate(\" + (rotateDeg = arrowPos === 'top' ? 225 : 45) + \"deg)\";\n    }\n\n    var rotateRadian = rotateDeg * Math.PI / 180;\n    var arrowWH = arrowSize + borderWidth;\n    var rotatedWH = arrowWH * Math.abs(Math.cos(rotateRadian)) + arrowWH * Math.abs(Math.sin(rotateRadian));\n    var arrowOffset = Math.round(((rotatedWH - Math.SQRT2 * borderWidth) / 2 + Math.SQRT2 * borderWidth - (rotatedWH - arrowWH) / 2) * 100) / 100;\n    positionStyle += \";\" + arrowPos + \":-\" + arrowOffset + \"px\";\n    var borderStyle = borderColor + \" solid \" + borderWidth + \"px;\";\n    var styleCss = [\"position:absolute;width:\" + arrowSize + \"px;height:\" + arrowSize + \"px;\", positionStyle + \";\" + transformStyle + \";\", \"border-bottom:\" + borderStyle, \"border-right:\" + borderStyle, \"background-color:\" + backgroundColor + \";\"];\n    return \"<div style=\\\"\" + styleCss.join('') + \"\\\"></div>\";\n  }\n\n  function assembleTransition(duration, onlyFade) {\n    var transitionCurve = 'cubic-bezier(0.23,1,0.32,1)';\n    var transitionOption = \" \" + duration / 2 + \"s \" + transitionCurve;\n    var transitionText = \"opacity\" + transitionOption + \",visibility\" + transitionOption;\n\n    if (!onlyFade) {\n      transitionOption = \" \" + duration + \"s \" + transitionCurve;\n      transitionText += env.transformSupported ? \",\" + CSS_TRANSFORM_VENDOR + transitionOption : \",left\" + transitionOption + \",top\" + transitionOption;\n    }\n\n    return CSS_TRANSITION_VENDOR + ':' + transitionText;\n  }\n\n  function assembleTransform(x, y, toString) {\n    // If using float on style, the final width of the dom might\n    // keep changing slightly while mouse move. So `toFixed(0)` them.\n    var x0 = x.toFixed(0) + 'px';\n    var y0 = y.toFixed(0) + 'px'; // not support transform, use `left` and `top` instead.\n\n    if (!env.transformSupported) {\n      return toString ? \"top:\" + y0 + \";left:\" + x0 + \";\" : [['top', y0], ['left', x0]];\n    } // support transform\n\n\n    var is3d = env.transform3dSupported;\n    var translate = \"translate\" + (is3d ? '3d' : '') + \"(\" + x0 + \",\" + y0 + (is3d ? ',0' : '') + \")\";\n    return toString ? 'top:0;left:0;' + CSS_TRANSFORM_VENDOR + ':' + translate + ';' : [['top', 0], ['left', 0], [TRANSFORM_VENDOR, translate]];\n  }\n  /**\n   * @param {Object} textStyle\n   * @return {string}\n   * @inner\n   */\n\n\n  function assembleFont(textStyleModel) {\n    var cssText = [];\n    var fontSize = textStyleModel.get('fontSize');\n    var color = textStyleModel.getTextColor();\n    color && cssText.push('color:' + color);\n    cssText.push('font:' + textStyleModel.getFont());\n    fontSize // @ts-ignore, leave it to the tooltip refactor.\n    && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n    var shadowColor = textStyleModel.get('textShadowColor');\n    var shadowBlur = textStyleModel.get('textShadowBlur') || 0;\n    var shadowOffsetX = textStyleModel.get('textShadowOffsetX') || 0;\n    var shadowOffsetY = textStyleModel.get('textShadowOffsetY') || 0;\n    shadowColor && shadowBlur && cssText.push('text-shadow:' + shadowOffsetX + 'px ' + shadowOffsetY + 'px ' + shadowBlur + 'px ' + shadowColor);\n    each(['decoration', 'align'], function (name) {\n      var val = textStyleModel.get(name);\n      val && cssText.push('text-' + name + ':' + val);\n    });\n    return cssText.join(';');\n  }\n\n  function assembleCssText(tooltipModel, enableTransition, onlyFade) {\n    var cssText = [];\n    var transitionDuration = tooltipModel.get('transitionDuration');\n    var backgroundColor = tooltipModel.get('backgroundColor');\n    var shadowBlur = tooltipModel.get('shadowBlur');\n    var shadowColor = tooltipModel.get('shadowColor');\n    var shadowOffsetX = tooltipModel.get('shadowOffsetX');\n    var shadowOffsetY = tooltipModel.get('shadowOffsetY');\n    var textStyleModel = tooltipModel.getModel('textStyle');\n    var padding = getPaddingFromTooltipModel(tooltipModel, 'html');\n    var boxShadow = shadowOffsetX + \"px \" + shadowOffsetY + \"px \" + shadowBlur + \"px \" + shadowColor;\n    cssText.push('box-shadow:' + boxShadow); // Animation transition. Do not animate when transitionDuration is 0.\n\n    enableTransition && transitionDuration && cssText.push(assembleTransition(transitionDuration, onlyFade));\n\n    if (backgroundColor) {\n      cssText.push('background-color:' + backgroundColor);\n    } // Border style\n\n\n    each(['width', 'color', 'radius'], function (name) {\n      var borderName = 'border-' + name;\n      var camelCase = toCamelCase(borderName);\n      var val = tooltipModel.get(camelCase);\n      val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n    }); // Text style\n\n    cssText.push(assembleFont(textStyleModel)); // Padding\n\n    if (padding != null) {\n      cssText.push('padding:' + normalizeCssArray$1(padding).join('px ') + 'px');\n    }\n\n    return cssText.join(';') + ';';\n  } // If not able to make, do not modify the input `out`.\n\n\n  function makeStyleCoord(out, zr, appendToBody, zrX, zrY) {\n    var zrPainter = zr && zr.painter;\n\n    if (appendToBody) {\n      var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n\n      if (zrViewportRoot) {\n        // Some APPs might use scale on body, so we support CSS transform here.\n        transformLocalCoord(out, zrViewportRoot, document.body, zrX, zrY);\n      }\n    } else {\n      out[0] = zrX;\n      out[1] = zrY; // xy should be based on canvas root. But tooltipContent is\n      // the sibling of canvas root. So padding of ec container\n      // should be considered here.\n\n      var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n\n      if (viewportRootOffset) {\n        out[0] += viewportRootOffset.offsetLeft;\n        out[1] += viewportRootOffset.offsetTop;\n      }\n    }\n\n    out[2] = out[0] / zr.getWidth();\n    out[3] = out[1] / zr.getHeight();\n  }\n\n  var TooltipHTMLContent =\n  /** @class */\n  function () {\n    function TooltipHTMLContent(container, api, opt) {\n      this._show = false;\n      this._styleCoord = [0, 0, 0, 0];\n      this._enterable = true;\n      this._firstShow = true;\n      this._longHide = true;\n\n      if (env.wxa) {\n        return null;\n      }\n\n      var el = document.createElement('div'); // TODO: TYPE\n\n      el.domBelongToZr = true;\n      this.el = el;\n      var zr = this._zr = api.getZr();\n      var appendToBody = this._appendToBody = opt && opt.appendToBody;\n      makeStyleCoord(this._styleCoord, zr, appendToBody, api.getWidth() / 2, api.getHeight() / 2);\n\n      if (appendToBody) {\n        document.body.appendChild(el);\n      } else {\n        container.appendChild(el);\n      }\n\n      this._container = container; // FIXME\n      // Is it needed to trigger zr event manually if\n      // the browser do not support `pointer-events: none`.\n\n      var self = this;\n\n      el.onmouseenter = function () {\n        // clear the timeout in hideLater and keep showing tooltip\n        if (self._enterable) {\n          clearTimeout(self._hideTimeout);\n          self._show = true;\n        }\n\n        self._inContent = true;\n      };\n\n      el.onmousemove = function (e) {\n        e = e || window.event;\n\n        if (!self._enterable) {\n          // `pointer-events: none` is set to tooltip content div\n          // if `enterable` is set as `false`, and `el.onmousemove`\n          // can not be triggered. But in browser that do not\n          // support `pointer-events`, we need to do this:\n          // Try trigger zrender event to avoid mouse\n          // in and out shape too frequently\n          var handler = zr.handler;\n          var zrViewportRoot = zr.painter.getViewportRoot();\n          normalizeEvent(zrViewportRoot, e, true);\n          handler.dispatch('mousemove', e);\n        }\n      };\n\n      el.onmouseleave = function () {\n        // set `_inContent` to `false` before `hideLater`\n        self._inContent = false;\n\n        if (self._enterable) {\n          if (self._show) {\n            self.hideLater(self._hideDelay);\n          }\n        }\n      };\n    }\n    /**\n     * Update when tooltip is rendered\n     */\n\n\n    TooltipHTMLContent.prototype.update = function (tooltipModel) {\n      // FIXME\n      // Move this logic to ec main?\n      var container = this._container;\n      var position = getComputedStyle(container, 'position');\n      var domStyle = container.style;\n\n      if (domStyle.position !== 'absolute' && position !== 'absolute') {\n        domStyle.position = 'relative';\n      } // move tooltip if chart resized\n\n\n      var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n      alwaysShowContent && this._moveIfResized(); // update className\n\n      this.el.className = tooltipModel.get('className') || ''; // Hide the tooltip\n      // PENDING\n      // this.hide();\n    };\n\n    TooltipHTMLContent.prototype.show = function (tooltipModel, nearPointColor) {\n      clearTimeout(this._hideTimeout);\n      clearTimeout(this._longHideTimeout);\n      var el = this.el;\n      var style = el.style;\n      var styleCoord = this._styleCoord;\n\n      if (!el.innerHTML) {\n        style.display = 'none';\n      } else {\n        style.cssText = gCssText + assembleCssText(tooltipModel, !this._firstShow, this._longHide) // initial transform\n        + assembleTransform(styleCoord[0], styleCoord[1], true) + (\"border-color:\" + convertToColorString(nearPointColor) + \";\") + (tooltipModel.get('extraCssText') || '') // If mouse occasionally move over the tooltip, a mouseout event will be\n        // triggered by canvas, and cause some unexpectable result like dragging\n        // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n        // it. Although it is not supported by IE8~IE10, fortunately it is a rare\n        // scenario.\n        + (\";pointer-events:\" + (this._enterable ? 'auto' : 'none'));\n      }\n\n      this._show = true;\n      this._firstShow = false;\n      this._longHide = false;\n    };\n\n    TooltipHTMLContent.prototype.setContent = function (content, markers, tooltipModel, borderColor, arrowPosition) {\n      var el = this.el;\n\n      if (content == null) {\n        el.innerHTML = '';\n        return;\n      }\n\n      var arrow = '';\n\n      if (isString(arrowPosition) && tooltipModel.get('trigger') === 'item' && !shouldTooltipConfine(tooltipModel)) {\n        arrow = assembleArrow(tooltipModel, borderColor, arrowPosition);\n      }\n\n      if (isString(content)) {\n        el.innerHTML = content + arrow;\n      } else if (content) {\n        // Clear previous\n        el.innerHTML = '';\n\n        if (!isArray(content)) {\n          content = [content];\n        }\n\n        for (var i = 0; i < content.length; i++) {\n          if (isDom(content[i]) && content[i].parentNode !== el) {\n            el.appendChild(content[i]);\n          }\n        } // no arrow if empty\n\n\n        if (arrow && el.childNodes.length) {\n          // no need to create a new parent element, but it's not supported by IE 10 and older.\n          // const arrowEl = document.createRange().createContextualFragment(arrow);\n          var arrowEl = document.createElement('div');\n          arrowEl.innerHTML = arrow;\n          el.appendChild(arrowEl);\n        }\n      }\n    };\n\n    TooltipHTMLContent.prototype.setEnterable = function (enterable) {\n      this._enterable = enterable;\n    };\n\n    TooltipHTMLContent.prototype.getSize = function () {\n      var el = this.el;\n      return [el.offsetWidth, el.offsetHeight];\n    };\n\n    TooltipHTMLContent.prototype.moveTo = function (zrX, zrY) {\n      var styleCoord = this._styleCoord;\n      makeStyleCoord(styleCoord, this._zr, this._appendToBody, zrX, zrY);\n\n      if (styleCoord[0] != null && styleCoord[1] != null) {\n        var style_1 = this.el.style;\n        var transforms = assembleTransform(styleCoord[0], styleCoord[1]);\n        each(transforms, function (transform) {\n          style_1[transform[0]] = transform[1];\n        });\n      }\n    };\n    /**\n     * when `alwaysShowContent` is true,\n     * move the tooltip after chart resized\n     */\n\n\n    TooltipHTMLContent.prototype._moveIfResized = function () {\n      // The ratio of left to width\n      var ratioX = this._styleCoord[2]; // The ratio of top to height\n\n      var ratioY = this._styleCoord[3];\n      this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n    };\n\n    TooltipHTMLContent.prototype.hide = function () {\n      var _this = this;\n\n      var style = this.el.style;\n      style.visibility = 'hidden';\n      style.opacity = '0';\n      env.transform3dSupported && (style.willChange = '');\n      this._show = false;\n      this._longHideTimeout = setTimeout(function () {\n        return _this._longHide = true;\n      }, 500);\n    };\n\n    TooltipHTMLContent.prototype.hideLater = function (time) {\n      if (this._show && !(this._inContent && this._enterable)) {\n        if (time) {\n          this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n          this._show = false;\n          this._hideTimeout = setTimeout(bind(this.hide, this), time);\n        } else {\n          this.hide();\n        }\n      }\n    };\n\n    TooltipHTMLContent.prototype.isShow = function () {\n      return this._show;\n    };\n\n    TooltipHTMLContent.prototype.dispose = function () {\n      this.el.parentNode.removeChild(this.el);\n    };\n\n    return TooltipHTMLContent;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var TooltipRichContent =\n  /** @class */\n  function () {\n    function TooltipRichContent(api) {\n      this._show = false;\n      this._styleCoord = [0, 0, 0, 0];\n      this._enterable = true;\n      this._zr = api.getZr();\n      makeStyleCoord$1(this._styleCoord, this._zr, api.getWidth() / 2, api.getHeight() / 2);\n    }\n    /**\n     * Update when tooltip is rendered\n     */\n\n\n    TooltipRichContent.prototype.update = function (tooltipModel) {\n      var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n      alwaysShowContent && this._moveIfResized();\n    };\n\n    TooltipRichContent.prototype.show = function () {\n      if (this._hideTimeout) {\n        clearTimeout(this._hideTimeout);\n      }\n\n      this.el.show();\n      this._show = true;\n    };\n    /**\n     * Set tooltip content\n     */\n\n\n    TooltipRichContent.prototype.setContent = function (content, markupStyleCreator, tooltipModel, borderColor, arrowPosition) {\n      var _this = this;\n\n      if (isObject(content)) {\n        throwError('Passing DOM nodes as content is not supported in richText tooltip!');\n      }\n\n      if (this.el) {\n        this._zr.remove(this.el);\n      }\n\n      var textStyleModel = tooltipModel.getModel('textStyle');\n      this.el = new ZRText({\n        style: {\n          rich: markupStyleCreator.richTextStyles,\n          text: content,\n          lineHeight: 22,\n          borderWidth: 1,\n          borderColor: borderColor,\n          textShadowColor: textStyleModel.get('textShadowColor'),\n          fill: tooltipModel.get(['textStyle', 'color']),\n          padding: getPaddingFromTooltipModel(tooltipModel, 'richText'),\n          verticalAlign: 'top',\n          align: 'left'\n        },\n        z: tooltipModel.get('z')\n      });\n      each(['backgroundColor', 'borderRadius', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'], function (propName) {\n        _this.el.style[propName] = tooltipModel.get(propName);\n      });\n      each(['textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'], function (propName) {\n        _this.el.style[propName] = textStyleModel.get(propName) || 0;\n      });\n\n      this._zr.add(this.el);\n\n      var self = this;\n      this.el.on('mouseover', function () {\n        // clear the timeout in hideLater and keep showing tooltip\n        if (self._enterable) {\n          clearTimeout(self._hideTimeout);\n          self._show = true;\n        }\n\n        self._inContent = true;\n      });\n      this.el.on('mouseout', function () {\n        if (self._enterable) {\n          if (self._show) {\n            self.hideLater(self._hideDelay);\n          }\n        }\n\n        self._inContent = false;\n      });\n    };\n\n    TooltipRichContent.prototype.setEnterable = function (enterable) {\n      this._enterable = enterable;\n    };\n\n    TooltipRichContent.prototype.getSize = function () {\n      var el = this.el;\n      var bounding = this.el.getBoundingRect(); // bounding rect does not include shadow. For renderMode richText,\n      // if overflow, it will be cut. So calculate them accurately.\n\n      var shadowOuterSize = calcShadowOuterSize(el.style);\n      return [bounding.width + shadowOuterSize.left + shadowOuterSize.right, bounding.height + shadowOuterSize.top + shadowOuterSize.bottom];\n    };\n\n    TooltipRichContent.prototype.moveTo = function (x, y) {\n      var el = this.el;\n\n      if (el) {\n        var styleCoord = this._styleCoord;\n        makeStyleCoord$1(styleCoord, this._zr, x, y);\n        x = styleCoord[0];\n        y = styleCoord[1];\n        var style = el.style;\n        var borderWidth = mathMaxWith0(style.borderWidth || 0);\n        var shadowOuterSize = calcShadowOuterSize(style); // rich text x, y do not include border.\n\n        el.x = x + borderWidth + shadowOuterSize.left;\n        el.y = y + borderWidth + shadowOuterSize.top;\n        el.markRedraw();\n      }\n    };\n    /**\n     * when `alwaysShowContent` is true,\n     * move the tooltip after chart resized\n     */\n\n\n    TooltipRichContent.prototype._moveIfResized = function () {\n      // The ratio of left to width\n      var ratioX = this._styleCoord[2]; // The ratio of top to height\n\n      var ratioY = this._styleCoord[3];\n      this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n    };\n\n    TooltipRichContent.prototype.hide = function () {\n      if (this.el) {\n        this.el.hide();\n      }\n\n      this._show = false;\n    };\n\n    TooltipRichContent.prototype.hideLater = function (time) {\n      if (this._show && !(this._inContent && this._enterable)) {\n        if (time) {\n          this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n          this._show = false;\n          this._hideTimeout = setTimeout(bind(this.hide, this), time);\n        } else {\n          this.hide();\n        }\n      }\n    };\n\n    TooltipRichContent.prototype.isShow = function () {\n      return this._show;\n    };\n\n    TooltipRichContent.prototype.dispose = function () {\n      this._zr.remove(this.el);\n    };\n\n    return TooltipRichContent;\n  }();\n\n  function mathMaxWith0(val) {\n    return Math.max(0, val);\n  }\n\n  function calcShadowOuterSize(style) {\n    var shadowBlur = mathMaxWith0(style.shadowBlur || 0);\n    var shadowOffsetX = mathMaxWith0(style.shadowOffsetX || 0);\n    var shadowOffsetY = mathMaxWith0(style.shadowOffsetY || 0);\n    return {\n      left: mathMaxWith0(shadowBlur - shadowOffsetX),\n      right: mathMaxWith0(shadowBlur + shadowOffsetX),\n      top: mathMaxWith0(shadowBlur - shadowOffsetY),\n      bottom: mathMaxWith0(shadowBlur + shadowOffsetY)\n    };\n  }\n\n  function makeStyleCoord$1(out, zr, zrX, zrY) {\n    out[0] = zrX;\n    out[1] = zrY;\n    out[2] = out[0] / zr.getWidth();\n    out[3] = out[1] / zr.getHeight();\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var proxyRect = new Rect({\n    shape: {\n      x: -1,\n      y: -1,\n      width: 2,\n      height: 2\n    }\n  });\n\n  var TooltipView =\n  /** @class */\n  function (_super) {\n    __extends(TooltipView, _super);\n\n    function TooltipView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = TooltipView.type;\n      return _this;\n    }\n\n    TooltipView.prototype.init = function (ecModel, api) {\n      if (env.node || !api.getDom()) {\n        return;\n      }\n\n      var tooltipModel = ecModel.getComponent('tooltip');\n      var renderMode = this._renderMode = getTooltipRenderMode(tooltipModel.get('renderMode'));\n      this._tooltipContent = renderMode === 'richText' ? new TooltipRichContent(api) : new TooltipHTMLContent(api.getDom(), api, {\n        appendToBody: tooltipModel.get('appendToBody', true)\n      });\n    };\n\n    TooltipView.prototype.render = function (tooltipModel, ecModel, api) {\n      if (env.node || !api.getDom()) {\n        return;\n      } // Reset\n\n\n      this.group.removeAll();\n      this._tooltipModel = tooltipModel;\n      this._ecModel = ecModel;\n      this._api = api;\n      /**\n       * @private\n       * @type {boolean}\n       */\n\n      this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n      var tooltipContent = this._tooltipContent;\n      tooltipContent.update(tooltipModel);\n      tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n      this._initGlobalListener();\n\n      this._keepShow(); // PENDING\n      // `mousemove` event will be triggered very frequently when the mouse moves fast,\n      // which causes that the `updatePosition` function was also called frequently.\n      // In Chrome with devtools open and Firefox, tooltip looks laggy and shakes. See #14695 #16101\n      // To avoid frequent triggering,\n      // consider throttling it in 50ms when transition is enabled\n\n\n      if (this._renderMode !== 'richText' && tooltipModel.get('transitionDuration')) {\n        createOrUpdate(this, '_updatePosition', 50, 'fixRate');\n      } else {\n        clear(this, '_updatePosition');\n      }\n    };\n\n    TooltipView.prototype._initGlobalListener = function () {\n      var tooltipModel = this._tooltipModel;\n      var triggerOn = tooltipModel.get('triggerOn');\n      register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n        // If 'none', it is not controlled by mouse totally.\n        if (triggerOn !== 'none') {\n          if (triggerOn.indexOf(currTrigger) >= 0) {\n            this._tryShow(e, dispatchAction);\n          } else if (currTrigger === 'leave') {\n            this._hide(dispatchAction);\n          }\n        }\n      }, this));\n    };\n\n    TooltipView.prototype._keepShow = function () {\n      var tooltipModel = this._tooltipModel;\n      var ecModel = this._ecModel;\n      var api = this._api;\n      var triggerOn = tooltipModel.get('triggerOn'); // Try to keep the tooltip show when refreshing\n\n      if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n      // self.manuallyShowTip({x, y}) might cause tooltip hide,\n      // which is not expected.\n      && triggerOn !== 'none' && triggerOn !== 'click') {\n        var self_1 = this;\n        clearTimeout(this._refreshUpdateTimeout);\n        this._refreshUpdateTimeout = setTimeout(function () {\n          // Show tip next tick after other charts are rendered\n          // In case highlight action has wrong result\n          // FIXME\n          !api.isDisposed() && self_1.manuallyShowTip(tooltipModel, ecModel, api, {\n            x: self_1._lastX,\n            y: self_1._lastY,\n            dataByCoordSys: self_1._lastDataByCoordSys\n          });\n        });\n      }\n    };\n    /**\n     * Show tip manually by\n     * dispatchAction({\n     *     type: 'showTip',\n     *     x: 10,\n     *     y: 10\n     * });\n     * Or\n     * dispatchAction({\n     *      type: 'showTip',\n     *      seriesIndex: 0,\n     *      dataIndex or dataIndexInside or name\n     * });\n     *\n     *  TODO Batch\n     */\n\n\n    TooltipView.prototype.manuallyShowTip = function (tooltipModel, ecModel, api, payload) {\n      if (payload.from === this.uid || env.node || !api.getDom()) {\n        return;\n      }\n\n      var dispatchAction = makeDispatchAction$1(payload, api); // Reset ticket\n\n      this._ticket = ''; // When triggered from axisPointer.\n\n      var dataByCoordSys = payload.dataByCoordSys;\n      var cmptRef = findComponentReference(payload, ecModel, api);\n\n      if (cmptRef) {\n        var rect = cmptRef.el.getBoundingRect().clone();\n        rect.applyTransform(cmptRef.el.transform);\n\n        this._tryShow({\n          offsetX: rect.x + rect.width / 2,\n          offsetY: rect.y + rect.height / 2,\n          target: cmptRef.el,\n          position: payload.position,\n          // When manully trigger, the mouse is not on the el, so we'd better to\n          // position tooltip on the bottom of the el and display arrow is possible.\n          positionDefault: 'bottom'\n        }, dispatchAction);\n      } else if (payload.tooltip && payload.x != null && payload.y != null) {\n        var el = proxyRect;\n        el.x = payload.x;\n        el.y = payload.y;\n        el.update();\n        getECData(el).tooltipConfig = {\n          name: null,\n          option: payload.tooltip\n        }; // Manually show tooltip while view is not using zrender elements.\n\n        this._tryShow({\n          offsetX: payload.x,\n          offsetY: payload.y,\n          target: el\n        }, dispatchAction);\n      } else if (dataByCoordSys) {\n        this._tryShow({\n          offsetX: payload.x,\n          offsetY: payload.y,\n          position: payload.position,\n          dataByCoordSys: dataByCoordSys,\n          tooltipOption: payload.tooltipOption\n        }, dispatchAction);\n      } else if (payload.seriesIndex != null) {\n        if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n          return;\n        }\n\n        var pointInfo = findPointFromSeries(payload, ecModel);\n        var cx = pointInfo.point[0];\n        var cy = pointInfo.point[1];\n\n        if (cx != null && cy != null) {\n          this._tryShow({\n            offsetX: cx,\n            offsetY: cy,\n            target: pointInfo.el,\n            position: payload.position,\n            // When manully trigger, the mouse is not on the el, so we'd better to\n            // position tooltip on the bottom of the el and display arrow is possible.\n            positionDefault: 'bottom'\n          }, dispatchAction);\n        }\n      } else if (payload.x != null && payload.y != null) {\n        // FIXME\n        // should wrap dispatchAction like `axisPointer/globalListener` ?\n        api.dispatchAction({\n          type: 'updateAxisPointer',\n          x: payload.x,\n          y: payload.y\n        });\n\n        this._tryShow({\n          offsetX: payload.x,\n          offsetY: payload.y,\n          position: payload.position,\n          target: api.getZr().findHover(payload.x, payload.y).target\n        }, dispatchAction);\n      }\n    };\n\n    TooltipView.prototype.manuallyHideTip = function (tooltipModel, ecModel, api, payload) {\n      var tooltipContent = this._tooltipContent;\n\n      if (!this._alwaysShowContent && this._tooltipModel) {\n        tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n      }\n\n      this._lastX = this._lastY = this._lastDataByCoordSys = null;\n\n      if (payload.from !== this.uid) {\n        this._hide(makeDispatchAction$1(payload, api));\n      }\n    }; // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n    // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n    // and tooltip.\n\n\n    TooltipView.prototype._manuallyAxisShowTip = function (tooltipModel, ecModel, api, payload) {\n      var seriesIndex = payload.seriesIndex;\n      var dataIndex = payload.dataIndex; // @ts-ignore\n\n      var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n      if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n        return;\n      }\n\n      var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n      if (!seriesModel) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      var tooltipCascadedModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model], this._tooltipModel);\n\n      if (tooltipCascadedModel.get('trigger') !== 'axis') {\n        return;\n      }\n\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        seriesIndex: seriesIndex,\n        dataIndex: dataIndex,\n        position: payload.position\n      });\n      return true;\n    };\n\n    TooltipView.prototype._tryShow = function (e, dispatchAction) {\n      var el = e.target;\n      var tooltipModel = this._tooltipModel;\n\n      if (!tooltipModel) {\n        return;\n      } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n      this._lastX = e.offsetX;\n      this._lastY = e.offsetY;\n      var dataByCoordSys = e.dataByCoordSys;\n\n      if (dataByCoordSys && dataByCoordSys.length) {\n        this._showAxisTooltip(dataByCoordSys, e);\n      } else if (el) {\n        this._lastDataByCoordSys = null;\n        var seriesDispatcher_1;\n        var cmptDispatcher_1;\n        findEventDispatcher(el, function (target) {\n          // Always show item tooltip if mouse is on the element with dataIndex\n          if (getECData(target).dataIndex != null) {\n            seriesDispatcher_1 = target;\n            return true;\n          } // Tooltip provided directly. Like legend.\n\n\n          if (getECData(target).tooltipConfig != null) {\n            cmptDispatcher_1 = target;\n            return true;\n          }\n        }, true);\n\n        if (seriesDispatcher_1) {\n          this._showSeriesItemTooltip(e, seriesDispatcher_1, dispatchAction);\n        } else if (cmptDispatcher_1) {\n          this._showComponentItemTooltip(e, cmptDispatcher_1, dispatchAction);\n        } else {\n          this._hide(dispatchAction);\n        }\n      } else {\n        this._lastDataByCoordSys = null;\n\n        this._hide(dispatchAction);\n      }\n    };\n\n    TooltipView.prototype._showOrMove = function (tooltipModel, cb) {\n      // showDelay is used in this case: tooltip.enterable is set\n      // as true. User intent to move mouse into tooltip and click\n      // something. `showDelay` makes it easier to enter the content\n      // but tooltip do not move immediately.\n      var delay = tooltipModel.get('showDelay');\n      cb = bind(cb, this);\n      clearTimeout(this._showTimout);\n      delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n    };\n\n    TooltipView.prototype._showAxisTooltip = function (dataByCoordSys, e) {\n      var ecModel = this._ecModel;\n      var globalTooltipModel = this._tooltipModel;\n      var point = [e.offsetX, e.offsetY];\n      var singleTooltipModel = buildTooltipModel([e.tooltipOption], globalTooltipModel);\n      var renderMode = this._renderMode;\n      var cbParamsList = [];\n      var articleMarkup = createTooltipMarkup('section', {\n        blocks: [],\n        noHeader: true\n      }); // Only for legacy: `Serise['formatTooltip']` returns a string.\n\n      var markupTextArrLegacy = [];\n      var markupStyleCreator = new TooltipMarkupStyleCreator();\n      each(dataByCoordSys, function (itemCoordSys) {\n        each(itemCoordSys.dataByAxis, function (axisItem) {\n          var axisModel = ecModel.getComponent(axisItem.axisDim + 'Axis', axisItem.axisIndex);\n          var axisValue = axisItem.value;\n\n          if (!axisModel || axisValue == null) {\n            return;\n          }\n\n          var axisValueLabel = getValueLabel(axisValue, axisModel.axis, ecModel, axisItem.seriesDataIndices, axisItem.valueLabelOpt);\n          var axisSectionMarkup = createTooltipMarkup('section', {\n            header: axisValueLabel,\n            noHeader: !trim(axisValueLabel),\n            sortBlocks: true,\n            blocks: []\n          });\n          articleMarkup.blocks.push(axisSectionMarkup);\n          each(axisItem.seriesDataIndices, function (idxItem) {\n            var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n            var dataIndex = idxItem.dataIndexInside;\n            var cbParams = series.getDataParams(dataIndex); // Can't find data.\n\n            if (cbParams.dataIndex < 0) {\n              return;\n            }\n\n            cbParams.axisDim = axisItem.axisDim;\n            cbParams.axisIndex = axisItem.axisIndex;\n            cbParams.axisType = axisItem.axisType;\n            cbParams.axisId = axisItem.axisId;\n            cbParams.axisValue = getAxisRawValue(axisModel.axis, {\n              value: axisValue\n            });\n            cbParams.axisValueLabel = axisValueLabel; // Pre-create marker style for makers. Users can assemble richText\n            // text in `formatter` callback and use those markers style.\n\n            cbParams.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(cbParams.color), renderMode);\n            var seriesTooltipResult = normalizeTooltipFormatResult(series.formatTooltip(dataIndex, true, null));\n            var frag = seriesTooltipResult.frag;\n\n            if (frag) {\n              var valueFormatter = buildTooltipModel([series], globalTooltipModel).get('valueFormatter');\n              axisSectionMarkup.blocks.push(valueFormatter ? extend({\n                valueFormatter: valueFormatter\n              }, frag) : frag);\n            }\n\n            if (seriesTooltipResult.text) {\n              markupTextArrLegacy.push(seriesTooltipResult.text);\n            }\n\n            cbParamsList.push(cbParams);\n          });\n        });\n      }); // In most cases, the second axis is displays upper on the first one.\n      // So we reverse it to look better.\n\n      articleMarkup.blocks.reverse();\n      markupTextArrLegacy.reverse();\n      var positionExpr = e.position;\n      var orderMode = singleTooltipModel.get('order');\n      var builtMarkupText = buildTooltipMarkup(articleMarkup, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), singleTooltipModel.get('textStyle'));\n      builtMarkupText && markupTextArrLegacy.unshift(builtMarkupText);\n      var blockBreak = renderMode === 'richText' ? '\\n\\n' : '<br/>';\n      var allMarkupText = markupTextArrLegacy.join(blockBreak);\n\n      this._showOrMove(singleTooltipModel, function () {\n        if (this._updateContentNotChangedOnAxis(dataByCoordSys, cbParamsList)) {\n          this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, cbParamsList);\n        } else {\n          this._showTooltipContent(singleTooltipModel, allMarkupText, cbParamsList, Math.random() + '', point[0], point[1], positionExpr, null, markupStyleCreator);\n        }\n      }); // Do not trigger events here, because this branch only be entered\n      // from dispatchAction.\n\n    };\n\n    TooltipView.prototype._showSeriesItemTooltip = function (e, dispatcher, dispatchAction) {\n      var ecModel = this._ecModel;\n      var ecData = getECData(dispatcher); // Use dataModel in element if possible\n      // Used when mouseover on a element like markPoint or edge\n      // In which case, the data is not main data in series.\n\n      var seriesIndex = ecData.seriesIndex;\n      var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n      var dataModel = ecData.dataModel || seriesModel;\n      var dataIndex = ecData.dataIndex;\n      var dataType = ecData.dataType;\n      var data = dataModel.getData(dataType);\n      var renderMode = this._renderMode;\n      var positionDefault = e.positionDefault;\n      var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model], this._tooltipModel, positionDefault ? {\n        position: positionDefault\n      } : null);\n      var tooltipTrigger = tooltipModel.get('trigger');\n\n      if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n        return;\n      }\n\n      var params = dataModel.getDataParams(dataIndex, dataType);\n      var markupStyleCreator = new TooltipMarkupStyleCreator(); // Pre-create marker style for makers. Users can assemble richText\n      // text in `formatter` callback and use those markers style.\n\n      params.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(params.color), renderMode);\n      var seriesTooltipResult = normalizeTooltipFormatResult(dataModel.formatTooltip(dataIndex, false, dataType));\n      var orderMode = tooltipModel.get('order');\n      var valueFormatter = tooltipModel.get('valueFormatter');\n      var frag = seriesTooltipResult.frag;\n      var markupText = frag ? buildTooltipMarkup(valueFormatter ? extend({\n        valueFormatter: valueFormatter\n      }, frag) : frag, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), tooltipModel.get('textStyle')) : seriesTooltipResult.text;\n      var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n      this._showOrMove(tooltipModel, function () {\n        this._showTooltipContent(tooltipModel, markupText, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markupStyleCreator);\n      }); // FIXME\n      // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n      dispatchAction({\n        type: 'showTip',\n        dataIndexInside: dataIndex,\n        dataIndex: data.getRawIndex(dataIndex),\n        seriesIndex: seriesIndex,\n        from: this.uid\n      });\n    };\n\n    TooltipView.prototype._showComponentItemTooltip = function (e, el, dispatchAction) {\n      var ecData = getECData(el);\n      var tooltipConfig = ecData.tooltipConfig;\n      var tooltipOpt = tooltipConfig.option || {};\n\n      if (isString(tooltipOpt)) {\n        var content = tooltipOpt;\n        tooltipOpt = {\n          content: content,\n          // Fixed formatter\n          formatter: content\n        };\n      }\n\n      var tooltipModelCascade = [tooltipOpt];\n\n      var cmpt = this._ecModel.getComponent(ecData.componentMainType, ecData.componentIndex);\n\n      if (cmpt) {\n        tooltipModelCascade.push(cmpt);\n      } // In most cases, component tooltip formatter has different params with series tooltip formatter,\n      // so that they can not share the same formatter. Since the global tooltip formatter is used for series\n      // by convension, we do not use it as the default formatter for component.\n\n\n      tooltipModelCascade.push({\n        formatter: tooltipOpt.content\n      });\n      var positionDefault = e.positionDefault;\n      var subTooltipModel = buildTooltipModel(tooltipModelCascade, this._tooltipModel, positionDefault ? {\n        position: positionDefault\n      } : null);\n      var defaultHtml = subTooltipModel.get('content');\n      var asyncTicket = Math.random() + ''; // PENDING: this case do not support richText style yet.\n\n      var markupStyleCreator = new TooltipMarkupStyleCreator(); // Do not check whether `trigger` is 'none' here, because `trigger`\n      // only works on coordinate system. In fact, we have not found case\n      // that requires setting `trigger` nothing on component yet.\n\n      this._showOrMove(subTooltipModel, function () {\n        // Use formatterParams from element defined in component\n        // Avoid users modify it.\n        var formatterParams = clone(subTooltipModel.get('formatterParams') || {});\n\n        this._showTooltipContent(subTooltipModel, defaultHtml, formatterParams, asyncTicket, e.offsetX, e.offsetY, e.position, el, markupStyleCreator);\n      }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n      dispatchAction({\n        type: 'showTip',\n        from: this.uid\n      });\n    };\n\n    TooltipView.prototype._showTooltipContent = function ( // Use Model<TooltipOption> insteadof TooltipModel because this model may be from series or other options.\n    // Instead of top level tooltip.\n    tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markupStyleCreator) {\n      // Reset ticket\n      this._ticket = '';\n\n      if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n        return;\n      }\n\n      var tooltipContent = this._tooltipContent;\n      tooltipContent.setEnterable(tooltipModel.get('enterable'));\n      var formatter = tooltipModel.get('formatter');\n      positionExpr = positionExpr || tooltipModel.get('position');\n      var html = defaultHtml;\n\n      var nearPoint = this._getNearestPoint([x, y], params, tooltipModel.get('trigger'), tooltipModel.get('borderColor'));\n\n      var nearPointColor = nearPoint.color;\n\n      if (formatter) {\n        if (isString(formatter)) {\n          var useUTC = tooltipModel.ecModel.get('useUTC');\n          var params0 = isArray(params) ? params[0] : params;\n          var isTimeAxis = params0 && params0.axisType && params0.axisType.indexOf('time') >= 0;\n          html = formatter;\n\n          if (isTimeAxis) {\n            html = format(params0.axisValue, html, useUTC);\n          }\n\n          html = formatTpl(html, params, true);\n        } else if (isFunction(formatter)) {\n          var callback = bind(function (cbTicket, html) {\n            if (cbTicket === this._ticket) {\n              tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n\n              this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n            }\n          }, this);\n          this._ticket = asyncTicket;\n          html = formatter(params, asyncTicket, callback);\n        } else {\n          html = formatter;\n        }\n      }\n\n      tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n      tooltipContent.show(tooltipModel, nearPointColor);\n\n      this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n    };\n\n    TooltipView.prototype._getNearestPoint = function (point, tooltipDataParams, trigger, borderColor) {\n      if (trigger === 'axis' || isArray(tooltipDataParams)) {\n        return {\n          color: borderColor || (this._renderMode === 'html' ? '#fff' : 'none')\n        };\n      }\n\n      if (!isArray(tooltipDataParams)) {\n        return {\n          color: borderColor || tooltipDataParams.color || tooltipDataParams.borderColor\n        };\n      }\n    };\n\n    TooltipView.prototype._updatePosition = function (tooltipModel, positionExpr, x, // Mouse x\n    y, // Mouse y\n    content, params, el) {\n      var viewWidth = this._api.getWidth();\n\n      var viewHeight = this._api.getHeight();\n\n      positionExpr = positionExpr || tooltipModel.get('position');\n      var contentSize = content.getSize();\n      var align = tooltipModel.get('align');\n      var vAlign = tooltipModel.get('verticalAlign');\n      var rect = el && el.getBoundingRect().clone();\n      el && rect.applyTransform(el.transform);\n\n      if (isFunction(positionExpr)) {\n        // Callback of position can be an array or a string specify the position\n        positionExpr = positionExpr([x, y], params, content.el, rect, {\n          viewSize: [viewWidth, viewHeight],\n          contentSize: contentSize.slice()\n        });\n      }\n\n      if (isArray(positionExpr)) {\n        x = parsePercent$1(positionExpr[0], viewWidth);\n        y = parsePercent$1(positionExpr[1], viewHeight);\n      } else if (isObject(positionExpr)) {\n        var boxLayoutPosition = positionExpr;\n        boxLayoutPosition.width = contentSize[0];\n        boxLayoutPosition.height = contentSize[1];\n        var layoutRect = getLayoutRect(boxLayoutPosition, {\n          width: viewWidth,\n          height: viewHeight\n        });\n        x = layoutRect.x;\n        y = layoutRect.y;\n        align = null; // When positionExpr is left/top/right/bottom,\n        // align and verticalAlign will not work.\n\n        vAlign = null;\n      } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n      else if (isString(positionExpr) && el) {\n          var pos = calcTooltipPosition(positionExpr, rect, contentSize, tooltipModel.get('borderWidth'));\n          x = pos[0];\n          y = pos[1];\n        } else {\n          var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n          x = pos[0];\n          y = pos[1];\n        }\n\n      align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n      vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n      if (shouldTooltipConfine(tooltipModel)) {\n        var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n        x = pos[0];\n        y = pos[1];\n      }\n\n      content.moveTo(x, y);\n    }; // FIXME\n    // Should we remove this but leave this to user?\n\n\n    TooltipView.prototype._updateContentNotChangedOnAxis = function (dataByCoordSys, cbParamsList) {\n      var lastCoordSys = this._lastDataByCoordSys;\n      var lastCbParamsList = this._cbParamsList;\n      var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n      contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n        var lastDataByAxis = lastItemCoordSys.dataByAxis || [];\n        var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n        var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n        contentNotChanged = contentNotChanged && lastDataByAxis.length === thisDataByAxis.length;\n        contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n          var thisItem = thisDataByAxis[indexAxis] || {};\n          var lastIndices = lastItem.seriesDataIndices || [];\n          var newIndices = thisItem.seriesDataIndices || [];\n          contentNotChanged = contentNotChanged && lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n          contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n            var newIdxItem = newIndices[j];\n            contentNotChanged = contentNotChanged && lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n          }); // check is cbParams data value changed\n\n          lastCbParamsList && each(lastItem.seriesDataIndices, function (idxItem) {\n            var seriesIdx = idxItem.seriesIndex;\n            var cbParams = cbParamsList[seriesIdx];\n            var lastCbParams = lastCbParamsList[seriesIdx];\n\n            if (cbParams && lastCbParams && lastCbParams.data !== cbParams.data) {\n              contentNotChanged = false;\n            }\n          });\n        });\n      });\n      this._lastDataByCoordSys = dataByCoordSys;\n      this._cbParamsList = cbParamsList;\n      return !!contentNotChanged;\n    };\n\n    TooltipView.prototype._hide = function (dispatchAction) {\n      // Do not directly hideLater here, because this behavior may be prevented\n      // in dispatchAction when showTip is dispatched.\n      // FIXME\n      // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n      this._lastDataByCoordSys = null;\n      dispatchAction({\n        type: 'hideTip',\n        from: this.uid\n      });\n    };\n\n    TooltipView.prototype.dispose = function (ecModel, api) {\n      if (env.node || !api.getDom()) {\n        return;\n      }\n\n      clear(this, '_updatePosition');\n\n      this._tooltipContent.dispose();\n\n      unregister('itemTooltip', api);\n    };\n\n    TooltipView.type = 'tooltip';\n    return TooltipView;\n  }(ComponentView);\n  /**\n   * From top to bottom. (the last one should be globalTooltipModel);\n   */\n\n\n  function buildTooltipModel(modelCascade, globalTooltipModel, defaultTooltipOption) {\n    // Last is always tooltip model.\n    var ecModel = globalTooltipModel.ecModel;\n    var resultModel;\n\n    if (defaultTooltipOption) {\n      resultModel = new Model(defaultTooltipOption, ecModel, ecModel);\n      resultModel = new Model(globalTooltipModel.option, resultModel, ecModel);\n    } else {\n      resultModel = globalTooltipModel;\n    }\n\n    for (var i = modelCascade.length - 1; i >= 0; i--) {\n      var tooltipOpt = modelCascade[i];\n\n      if (tooltipOpt) {\n        if (tooltipOpt instanceof Model) {\n          tooltipOpt = tooltipOpt.get('tooltip', true);\n        } // In each data item tooltip can be simply write:\n        // {\n        //  value: 10,\n        //  tooltip: 'Something you need to know'\n        // }\n\n\n        if (isString(tooltipOpt)) {\n          tooltipOpt = {\n            formatter: tooltipOpt\n          };\n        }\n\n        if (tooltipOpt) {\n          resultModel = new Model(tooltipOpt, resultModel, ecModel);\n        }\n      }\n    }\n\n    return resultModel;\n  }\n\n  function makeDispatchAction$1(payload, api) {\n    return payload.dispatchAction || bind(api.dispatchAction, api);\n  }\n\n  function refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n    var size = content.getSize();\n    var width = size[0];\n    var height = size[1];\n\n    if (gapH != null) {\n      // Add extra 2 pixels for this case:\n      // At present the \"values\" in defaut tooltip are using CSS `float: right`.\n      // When the right edge of the tooltip box is on the right side of the\n      // viewport, the `float` layout might push the \"values\" to the second line.\n      if (x + width + gapH + 2 > viewWidth) {\n        x -= width + gapH;\n      } else {\n        x += gapH;\n      }\n    }\n\n    if (gapV != null) {\n      if (y + height + gapV > viewHeight) {\n        y -= height + gapV;\n      } else {\n        y += gapV;\n      }\n    }\n\n    return [x, y];\n  }\n\n  function confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n    var size = content.getSize();\n    var width = size[0];\n    var height = size[1];\n    x = Math.min(x + width, viewWidth) - width;\n    y = Math.min(y + height, viewHeight) - height;\n    x = Math.max(x, 0);\n    y = Math.max(y, 0);\n    return [x, y];\n  }\n\n  function calcTooltipPosition(position, rect, contentSize, borderWidth) {\n    var domWidth = contentSize[0];\n    var domHeight = contentSize[1];\n    var offset = Math.ceil(Math.SQRT2 * borderWidth) + 8;\n    var x = 0;\n    var y = 0;\n    var rectWidth = rect.width;\n    var rectHeight = rect.height;\n\n    switch (position) {\n      case 'inside':\n        x = rect.x + rectWidth / 2 - domWidth / 2;\n        y = rect.y + rectHeight / 2 - domHeight / 2;\n        break;\n\n      case 'top':\n        x = rect.x + rectWidth / 2 - domWidth / 2;\n        y = rect.y - domHeight - offset;\n        break;\n\n      case 'bottom':\n        x = rect.x + rectWidth / 2 - domWidth / 2;\n        y = rect.y + rectHeight + offset;\n        break;\n\n      case 'left':\n        x = rect.x - domWidth - offset;\n        y = rect.y + rectHeight / 2 - domHeight / 2;\n        break;\n\n      case 'right':\n        x = rect.x + rectWidth + offset;\n        y = rect.y + rectHeight / 2 - domHeight / 2;\n    }\n\n    return [x, y];\n  }\n\n  function isCenterAlign(align) {\n    return align === 'center' || align === 'middle';\n  }\n  /**\n   * Find target component by payload like:\n   * ```js\n   * { legendId: 'some_id', name: 'xxx' }\n   * { toolboxIndex: 1, name: 'xxx' }\n   * { geoName: 'some_name', name: 'xxx' }\n   * ```\n   * PENDING: at present only\n   *\n   * If not found, return null/undefined.\n   */\n\n\n  function findComponentReference(payload, ecModel, api) {\n    var queryOptionMap = preParseFinder(payload).queryOptionMap;\n    var componentMainType = queryOptionMap.keys()[0];\n\n    if (!componentMainType || componentMainType === 'series') {\n      return;\n    }\n\n    var queryResult = queryReferringComponents(ecModel, componentMainType, queryOptionMap.get(componentMainType), {\n      useDefault: false,\n      enableAll: false,\n      enableNone: false\n    });\n    var model = queryResult.models[0];\n\n    if (!model) {\n      return;\n    }\n\n    var view = api.getViewOfComponentModel(model);\n    var el;\n    view.group.traverse(function (subEl) {\n      var tooltipConfig = getECData(subEl).tooltipConfig;\n\n      if (tooltipConfig && tooltipConfig.name === payload.name) {\n        el = subEl;\n        return true; // stop\n      }\n    });\n\n    if (el) {\n      return {\n        componentMainType: componentMainType,\n        componentIndex: model.componentIndex,\n        el: el\n      };\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$10(registers) {\n    use(install$11);\n    registers.registerComponentModel(TooltipModel);\n    registers.registerComponentView(TooltipView);\n    /**\n     * @action\n     * @property {string} type\n     * @property {number} seriesIndex\n     * @property {number} dataIndex\n     * @property {number} [x]\n     * @property {number} [y]\n     */\n\n    registers.registerAction({\n      type: 'showTip',\n      event: 'showTip',\n      update: 'tooltip:manuallyShowTip'\n    }, noop);\n    registers.registerAction({\n      type: 'hideTip',\n      event: 'hideTip',\n      update: 'tooltip:manuallyHideTip'\n    }, noop);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  use(install$10);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var DATA_ZOOM_AXIS_DIMENSIONS = ['x', 'y', 'radius', 'angle', 'single']; // Supported coords.\n  // FIXME: polar has been broken (but rarely used).\n\n  var SERIES_COORDS = ['cartesian2d', 'polar', 'singleAxis'];\n\n  function isCoordSupported(seriesModel) {\n    var coordType = seriesModel.get('coordinateSystem');\n    return indexOf(SERIES_COORDS, coordType) >= 0;\n  }\n\n  function getAxisMainType(axisDim) {\n    {\n      assert(axisDim);\n    }\n    return axisDim + 'Axis';\n  }\n  /**\n   * If two dataZoomModels has the same axis controlled, we say that they are 'linked'.\n   * This function finds all linked dataZoomModels start from the given payload.\n   */\n\n\n  function findEffectedDataZooms(ecModel, payload) {\n    // Key: `DataZoomAxisDimension`\n    var axisRecords = createHashMap();\n    var effectedModels = []; // Key: uid of dataZoomModel\n\n    var effectedModelMap = createHashMap(); // Find the dataZooms specified by payload.\n\n    ecModel.eachComponent({\n      mainType: 'dataZoom',\n      query: payload\n    }, function (dataZoomModel) {\n      if (!effectedModelMap.get(dataZoomModel.uid)) {\n        addToEffected(dataZoomModel);\n      }\n    }); // Start from the given dataZoomModels, travel the graph to find\n    // all of the linked dataZoom models.\n\n    var foundNewLink;\n\n    do {\n      foundNewLink = false;\n      ecModel.eachComponent('dataZoom', processSingle);\n    } while (foundNewLink);\n\n    function processSingle(dataZoomModel) {\n      if (!effectedModelMap.get(dataZoomModel.uid) && isLinked(dataZoomModel)) {\n        addToEffected(dataZoomModel);\n        foundNewLink = true;\n      }\n    }\n\n    function addToEffected(dataZoom) {\n      effectedModelMap.set(dataZoom.uid, true);\n      effectedModels.push(dataZoom);\n      markAxisControlled(dataZoom);\n    }\n\n    function isLinked(dataZoomModel) {\n      var isLink = false;\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        var axisIdxArr = axisRecords.get(axisDim);\n\n        if (axisIdxArr && axisIdxArr[axisIndex]) {\n          isLink = true;\n        }\n      });\n      return isLink;\n    }\n\n    function markAxisControlled(dataZoomModel) {\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        (axisRecords.get(axisDim) || axisRecords.set(axisDim, []))[axisIndex] = true;\n      });\n    }\n\n    return effectedModels;\n  }\n  /**\n   * Find the first target coordinate system.\n   * Available after model built.\n   *\n   * @return Like {\n   *                  grid: [\n   *                      {model: coord0, axisModels: [axis1, axis3], coordIndex: 1},\n   *                      {model: coord1, axisModels: [axis0, axis2], coordIndex: 0},\n   *                      ...\n   *                  ],  // cartesians must not be null/undefined.\n   *                  polar: [\n   *                      {model: coord0, axisModels: [axis4], coordIndex: 0},\n   *                      ...\n   *                  ],  // polars must not be null/undefined.\n   *                  singleAxis: [\n   *                      {model: coord0, axisModels: [], coordIndex: 0}\n   *                  ]\n   *              }\n   */\n\n\n  function collectReferCoordSysModelInfo(dataZoomModel) {\n    var ecModel = dataZoomModel.ecModel;\n    var coordSysInfoWrap = {\n      infoList: [],\n      infoMap: createHashMap()\n    };\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n\n      if (!axisModel) {\n        return;\n      }\n\n      var coordSysModel = axisModel.getCoordSysModel();\n\n      if (!coordSysModel) {\n        return;\n      }\n\n      var coordSysUid = coordSysModel.uid;\n      var coordSysInfo = coordSysInfoWrap.infoMap.get(coordSysUid);\n\n      if (!coordSysInfo) {\n        coordSysInfo = {\n          model: coordSysModel,\n          axisModels: []\n        };\n        coordSysInfoWrap.infoList.push(coordSysInfo);\n        coordSysInfoWrap.infoMap.set(coordSysUid, coordSysInfo);\n      }\n\n      coordSysInfo.axisModels.push(axisModel);\n    });\n    return coordSysInfoWrap;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var DataZoomAxisInfo =\n  /** @class */\n  function () {\n    function DataZoomAxisInfo() {\n      this.indexList = [];\n      this.indexMap = [];\n    }\n\n    DataZoomAxisInfo.prototype.add = function (axisCmptIdx) {\n      // Remove duplication.\n      if (!this.indexMap[axisCmptIdx]) {\n        this.indexList.push(axisCmptIdx);\n        this.indexMap[axisCmptIdx] = true;\n      }\n    };\n\n    return DataZoomAxisInfo;\n  }();\n\n  var DataZoomModel =\n  /** @class */\n  function (_super) {\n    __extends(DataZoomModel, _super);\n\n    function DataZoomModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = DataZoomModel.type;\n      _this._autoThrottle = true;\n      _this._noTarget = true;\n      /**\n       * It is `[rangeModeForMin, rangeModeForMax]`.\n       * The optional values for `rangeMode`:\n       * + `'value'` mode: the axis extent will always be determined by\n       *     `dataZoom.startValue` and `dataZoom.endValue`, despite\n       *     how data like and how `axis.min` and `axis.max` are.\n       * + `'percent'` mode: `100` represents 100% of the `[dMin, dMax]`,\n       *     where `dMin` is `axis.min` if `axis.min` specified, otherwise `data.extent[0]`,\n       *     and `dMax` is `axis.max` if `axis.max` specified, otherwise `data.extent[1]`.\n       *     Axis extent will be determined by the result of the percent of `[dMin, dMax]`.\n       *\n       * For example, when users are using dynamic data (update data periodically via `setOption`),\n       * if in `'value`' mode, the window will be kept in a fixed value range despite how\n       * data are appended, while if in `'percent'` mode, whe window range will be changed alone with\n       * the appended data (suppose `axis.min` and `axis.max` are not specified).\n       */\n\n      _this._rangePropMode = ['percent', 'percent'];\n      return _this;\n    }\n\n    DataZoomModel.prototype.init = function (option, parentModel, ecModel) {\n      var inputRawOption = retrieveRawOption(option);\n      /**\n       * Suppose a \"main process\" start at the point that model prepared (that is,\n       * model initialized or merged or method called in `action`).\n       * We should keep the `main process` idempotent, that is, given a set of values\n       * on `option`, we get the same result.\n       *\n       * But sometimes, values on `option` will be updated for providing users\n       * a \"final calculated value\" (`dataZoomProcessor` will do that). Those value\n       * should not be the base/input of the `main process`.\n       *\n       * So in that case we should save and keep the input of the `main process`\n       * separately, called `settledOption`.\n       *\n       * For example, consider the case:\n       * (Step_1) brush zoom the grid by `toolbox.dataZoom`,\n       *     where the original input `option.startValue`, `option.endValue` are earsed by\n       *     calculated value.\n       * (Step)2) click the legend to hide and show a series,\n       *     where the new range is calculated by the earsed `startValue` and `endValue`,\n       *     which brings incorrect result.\n       */\n\n      this.settledOption = inputRawOption;\n      this.mergeDefaultAndTheme(option, ecModel);\n\n      this._doInit(inputRawOption);\n    };\n\n    DataZoomModel.prototype.mergeOption = function (newOption) {\n      var inputRawOption = retrieveRawOption(newOption); //FIX #2591\n\n      merge(this.option, newOption, true);\n      merge(this.settledOption, inputRawOption, true);\n\n      this._doInit(inputRawOption);\n    };\n\n    DataZoomModel.prototype._doInit = function (inputRawOption) {\n      var thisOption = this.option;\n\n      this._setDefaultThrottle(inputRawOption);\n\n      this._updateRangeUse(inputRawOption);\n\n      var settledOption = this.settledOption;\n      each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n        // start/end has higher priority over startValue/endValue if they\n        // both set, but we should make chart.setOption({endValue: 1000})\n        // effective, rather than chart.setOption({endValue: 1000, end: null}).\n        if (this._rangePropMode[index] === 'value') {\n          thisOption[names[0]] = settledOption[names[0]] = null;\n        } // Otherwise do nothing and use the merge result.\n\n      }, this);\n\n      this._resetTarget();\n    };\n\n    DataZoomModel.prototype._resetTarget = function () {\n      var optionOrient = this.get('orient', true);\n      var targetAxisIndexMap = this._targetAxisInfoMap = createHashMap();\n\n      var hasAxisSpecified = this._fillSpecifiedTargetAxis(targetAxisIndexMap);\n\n      if (hasAxisSpecified) {\n        this._orient = optionOrient || this._makeAutoOrientByTargetAxis();\n      } else {\n        this._orient = optionOrient || 'horizontal';\n\n        this._fillAutoTargetAxisByOrient(targetAxisIndexMap, this._orient);\n      }\n\n      this._noTarget = true;\n      targetAxisIndexMap.each(function (axisInfo) {\n        if (axisInfo.indexList.length) {\n          this._noTarget = false;\n        }\n      }, this);\n    };\n\n    DataZoomModel.prototype._fillSpecifiedTargetAxis = function (targetAxisIndexMap) {\n      var hasAxisSpecified = false;\n      each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n        var refering = this.getReferringComponents(getAxisMainType(axisDim), MULTIPLE_REFERRING); // When user set axisIndex as a empty array, we think that user specify axisIndex\n        // but do not want use auto mode. Because empty array may be encountered when\n        // some error occured.\n\n        if (!refering.specified) {\n          return;\n        }\n\n        hasAxisSpecified = true;\n        var axisInfo = new DataZoomAxisInfo();\n        each(refering.models, function (axisModel) {\n          axisInfo.add(axisModel.componentIndex);\n        });\n        targetAxisIndexMap.set(axisDim, axisInfo);\n      }, this);\n      return hasAxisSpecified;\n    };\n\n    DataZoomModel.prototype._fillAutoTargetAxisByOrient = function (targetAxisIndexMap, orient) {\n      var ecModel = this.ecModel;\n      var needAuto = true; // Find axis that parallel to dataZoom as default.\n\n      if (needAuto) {\n        var axisDim = orient === 'vertical' ? 'y' : 'x';\n        var axisModels = ecModel.findComponents({\n          mainType: axisDim + 'Axis'\n        });\n        setParallelAxis(axisModels, axisDim);\n      } // Find axis that parallel to dataZoom as default.\n\n\n      if (needAuto) {\n        var axisModels = ecModel.findComponents({\n          mainType: 'singleAxis',\n          filter: function (axisModel) {\n            return axisModel.get('orient', true) === orient;\n          }\n        });\n        setParallelAxis(axisModels, 'single');\n      }\n\n      function setParallelAxis(axisModels, axisDim) {\n        // At least use the first parallel axis as the target axis.\n        var axisModel = axisModels[0];\n\n        if (!axisModel) {\n          return;\n        }\n\n        var axisInfo = new DataZoomAxisInfo();\n        axisInfo.add(axisModel.componentIndex);\n        targetAxisIndexMap.set(axisDim, axisInfo);\n        needAuto = false; // Find parallel axes in the same grid.\n\n        if (axisDim === 'x' || axisDim === 'y') {\n          var gridModel_1 = axisModel.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n          gridModel_1 && each(axisModels, function (axModel) {\n            if (axisModel.componentIndex !== axModel.componentIndex && gridModel_1 === axModel.getReferringComponents('grid', SINGLE_REFERRING).models[0]) {\n              axisInfo.add(axModel.componentIndex);\n            }\n          });\n        }\n      }\n\n      if (needAuto) {\n        // If no parallel axis, find the first category axis as default. (Also consider polar).\n        each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n          if (!needAuto) {\n            return;\n          }\n\n          var axisModels = ecModel.findComponents({\n            mainType: getAxisMainType(axisDim),\n            filter: function (axisModel) {\n              return axisModel.get('type', true) === 'category';\n            }\n          });\n\n          if (axisModels[0]) {\n            var axisInfo = new DataZoomAxisInfo();\n            axisInfo.add(axisModels[0].componentIndex);\n            targetAxisIndexMap.set(axisDim, axisInfo);\n            needAuto = false;\n          }\n        }, this);\n      }\n    };\n\n    DataZoomModel.prototype._makeAutoOrientByTargetAxis = function () {\n      var dim; // Find the first axis\n\n      this.eachTargetAxis(function (axisDim) {\n        !dim && (dim = axisDim);\n      }, this);\n      return dim === 'y' ? 'vertical' : 'horizontal';\n    };\n\n    DataZoomModel.prototype._setDefaultThrottle = function (inputRawOption) {\n      // When first time user set throttle, auto throttle ends.\n      if (inputRawOption.hasOwnProperty('throttle')) {\n        this._autoThrottle = false;\n      }\n\n      if (this._autoThrottle) {\n        var globalOption = this.ecModel.option;\n        this.option.throttle = globalOption.animation && globalOption.animationDurationUpdate > 0 ? 100 : 20;\n      }\n    };\n\n    DataZoomModel.prototype._updateRangeUse = function (inputRawOption) {\n      var rangePropMode = this._rangePropMode;\n      var rangeModeInOption = this.get('rangeMode');\n      each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n        var percentSpecified = inputRawOption[names[0]] != null;\n        var valueSpecified = inputRawOption[names[1]] != null;\n\n        if (percentSpecified && !valueSpecified) {\n          rangePropMode[index] = 'percent';\n        } else if (!percentSpecified && valueSpecified) {\n          rangePropMode[index] = 'value';\n        } else if (rangeModeInOption) {\n          rangePropMode[index] = rangeModeInOption[index];\n        } else if (percentSpecified) {\n          // percentSpecified && valueSpecified\n          rangePropMode[index] = 'percent';\n        } // else remain its original setting.\n\n      });\n    };\n\n    DataZoomModel.prototype.noTarget = function () {\n      return this._noTarget;\n    };\n\n    DataZoomModel.prototype.getFirstTargetAxisModel = function () {\n      var firstAxisModel;\n      this.eachTargetAxis(function (axisDim, axisIndex) {\n        if (firstAxisModel == null) {\n          firstAxisModel = this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n        }\n      }, this);\n      return firstAxisModel;\n    };\n    /**\n     * @param {Function} callback param: axisModel, dimNames, axisIndex, dataZoomModel, ecModel\n     */\n\n\n    DataZoomModel.prototype.eachTargetAxis = function (callback, context) {\n      this._targetAxisInfoMap.each(function (axisInfo, axisDim) {\n        each(axisInfo.indexList, function (axisIndex) {\n          callback.call(context, axisDim, axisIndex);\n        });\n      });\n    };\n    /**\n     * @return If not found, return null/undefined.\n     */\n\n\n    DataZoomModel.prototype.getAxisProxy = function (axisDim, axisIndex) {\n      var axisModel = this.getAxisModel(axisDim, axisIndex);\n\n      if (axisModel) {\n        return axisModel.__dzAxisProxy;\n      }\n    };\n    /**\n     * @return If not found, return null/undefined.\n     */\n\n\n    DataZoomModel.prototype.getAxisModel = function (axisDim, axisIndex) {\n      {\n        assert(axisDim && axisIndex != null);\n      }\n\n      var axisInfo = this._targetAxisInfoMap.get(axisDim);\n\n      if (axisInfo && axisInfo.indexMap[axisIndex]) {\n        return this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n      }\n    };\n    /**\n     * If not specified, set to undefined.\n     */\n\n\n    DataZoomModel.prototype.setRawRange = function (opt) {\n      var thisOption = this.option;\n      var settledOption = this.settledOption;\n      each([['start', 'startValue'], ['end', 'endValue']], function (names) {\n        // Consider the pair <start, startValue>:\n        // If one has value and the other one is `null/undefined`, we both set them\n        // to `settledOption`. This strategy enables the feature to clear the original\n        // value in `settledOption` to `null/undefined`.\n        // But if both of them are `null/undefined`, we do not set them to `settledOption`\n        // and keep `settledOption` with the original value. This strategy enables users to\n        // only set <end or endValue> but not set <start or startValue> when calling\n        // `dispatchAction`.\n        // The pair <end, endValue> is treated in the same way.\n        if (opt[names[0]] != null || opt[names[1]] != null) {\n          thisOption[names[0]] = settledOption[names[0]] = opt[names[0]];\n          thisOption[names[1]] = settledOption[names[1]] = opt[names[1]];\n        }\n      }, this);\n\n      this._updateRangeUse(opt);\n    };\n\n    DataZoomModel.prototype.setCalculatedRange = function (opt) {\n      var option = this.option;\n      each(['start', 'startValue', 'end', 'endValue'], function (name) {\n        option[name] = opt[name];\n      });\n    };\n\n    DataZoomModel.prototype.getPercentRange = function () {\n      var axisProxy = this.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        return axisProxy.getDataPercentWindow();\n      }\n    };\n    /**\n     * For example, chart.getModel().getComponent('dataZoom').getValueRange('y', 0);\n     *\n     * @return [startValue, endValue] value can only be '-' or finite number.\n     */\n\n\n    DataZoomModel.prototype.getValueRange = function (axisDim, axisIndex) {\n      if (axisDim == null && axisIndex == null) {\n        var axisProxy = this.findRepresentativeAxisProxy();\n\n        if (axisProxy) {\n          return axisProxy.getDataValueWindow();\n        }\n      } else {\n        return this.getAxisProxy(axisDim, axisIndex).getDataValueWindow();\n      }\n    };\n    /**\n     * @param axisModel If axisModel given, find axisProxy\n     *      corresponding to the axisModel\n     */\n\n\n    DataZoomModel.prototype.findRepresentativeAxisProxy = function (axisModel) {\n      if (axisModel) {\n        return axisModel.__dzAxisProxy;\n      } // Find the first hosted axisProxy\n\n\n      var firstProxy;\n\n      var axisDimList = this._targetAxisInfoMap.keys();\n\n      for (var i = 0; i < axisDimList.length; i++) {\n        var axisDim = axisDimList[i];\n\n        var axisInfo = this._targetAxisInfoMap.get(axisDim);\n\n        for (var j = 0; j < axisInfo.indexList.length; j++) {\n          var proxy = this.getAxisProxy(axisDim, axisInfo.indexList[j]);\n\n          if (proxy.hostedBy(this)) {\n            return proxy;\n          }\n\n          if (!firstProxy) {\n            firstProxy = proxy;\n          }\n        }\n      } // If no hosted proxy found, still need to return a proxy.\n      // This case always happens in toolbox dataZoom, where axes are all hosted by\n      // other dataZooms.\n\n\n      return firstProxy;\n    };\n\n    DataZoomModel.prototype.getRangePropMode = function () {\n      return this._rangePropMode.slice();\n    };\n\n    DataZoomModel.prototype.getOrient = function () {\n      {\n        // Should not be called before initialized.\n        assert(this._orient);\n      }\n      return this._orient;\n    };\n\n    DataZoomModel.type = 'dataZoom';\n    DataZoomModel.dependencies = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'series', 'toolbox'];\n    DataZoomModel.defaultOption = {\n      // zlevel: 0,\n      z: 4,\n      filterMode: 'filter',\n      start: 0,\n      end: 100\n    };\n    return DataZoomModel;\n  }(ComponentModel);\n  /**\n   * Retrieve the those raw params from option, which will be cached separately.\n   * becasue they will be overwritten by normalized/calculated values in the main\n   * process.\n   */\n\n\n  function retrieveRawOption(option) {\n    var ret = {};\n    each(['start', 'end', 'startValue', 'endValue', 'throttle'], function (name) {\n      option.hasOwnProperty(name) && (ret[name] = option[name]);\n    });\n    return ret;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var InsideZoomModel =\n  /** @class */\n  function (_super) {\n    __extends(InsideZoomModel, _super);\n\n    function InsideZoomModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = InsideZoomModel.type;\n      return _this;\n    }\n\n    InsideZoomModel.type = 'dataZoom.inside';\n    InsideZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n      disabled: false,\n      zoomLock: false,\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      moveOnMouseWheel: false,\n      preventDefaultMouseMove: true\n    });\n    return InsideZoomModel;\n  }(DataZoomModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var DataZoomView =\n  /** @class */\n  function (_super) {\n    __extends(DataZoomView, _super);\n\n    function DataZoomView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = DataZoomView.type;\n      return _this;\n    }\n\n    DataZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n      this.dataZoomModel = dataZoomModel;\n      this.ecModel = ecModel;\n      this.api = api;\n    };\n\n    DataZoomView.type = 'dataZoom';\n    return DataZoomView;\n  }(ComponentView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Calculate slider move result.\n   * Usage:\n   * (1) If both handle0 and handle1 are needed to be moved, set minSpan the same as\n   * maxSpan and the same as `Math.abs(handleEnd[1] - handleEnds[0])`.\n   * (2) If handle0 is forbidden to cross handle1, set minSpan as `0`.\n   *\n   * @param delta Move length.\n   * @param handleEnds handleEnds[0] can be bigger then handleEnds[1].\n   *              handleEnds will be modified in this method.\n   * @param extent handleEnds is restricted by extent.\n   *              extent[0] should less or equals than extent[1].\n   * @param handleIndex Can be 'all', means that both move the two handleEnds.\n   * @param minSpan The range of dataZoom can not be smaller than that.\n   *              If not set, handle0 and cross handle1. If set as a non-negative\n   *              number (including `0`), handles will push each other when reaching\n   *              the minSpan.\n   * @param maxSpan The range of dataZoom can not be larger than that.\n   * @return The input handleEnds.\n   */\n\n\n  function sliderMove(delta, handleEnds, extent, handleIndex, minSpan, maxSpan) {\n    delta = delta || 0;\n    var extentSpan = extent[1] - extent[0]; // Notice maxSpan and minSpan can be null/undefined.\n\n    if (minSpan != null) {\n      minSpan = restrict(minSpan, [0, extentSpan]);\n    }\n\n    if (maxSpan != null) {\n      maxSpan = Math.max(maxSpan, minSpan != null ? minSpan : 0);\n    }\n\n    if (handleIndex === 'all') {\n      var handleSpan = Math.abs(handleEnds[1] - handleEnds[0]);\n      handleSpan = restrict(handleSpan, [0, extentSpan]);\n      minSpan = maxSpan = restrict(handleSpan, [minSpan, maxSpan]);\n      handleIndex = 0;\n    }\n\n    handleEnds[0] = restrict(handleEnds[0], extent);\n    handleEnds[1] = restrict(handleEnds[1], extent);\n    var originalDistSign = getSpanSign(handleEnds, handleIndex);\n    handleEnds[handleIndex] += delta; // Restrict in extent.\n\n    var extentMinSpan = minSpan || 0;\n    var realExtent = extent.slice();\n    originalDistSign.sign < 0 ? realExtent[0] += extentMinSpan : realExtent[1] -= extentMinSpan;\n    handleEnds[handleIndex] = restrict(handleEnds[handleIndex], realExtent); // Expand span.\n\n    var currDistSign;\n    currDistSign = getSpanSign(handleEnds, handleIndex);\n\n    if (minSpan != null && (currDistSign.sign !== originalDistSign.sign || currDistSign.span < minSpan)) {\n      // If minSpan exists, 'cross' is forbidden.\n      handleEnds[1 - handleIndex] = handleEnds[handleIndex] + originalDistSign.sign * minSpan;\n    } // Shrink span.\n\n\n    currDistSign = getSpanSign(handleEnds, handleIndex);\n\n    if (maxSpan != null && currDistSign.span > maxSpan) {\n      handleEnds[1 - handleIndex] = handleEnds[handleIndex] + currDistSign.sign * maxSpan;\n    }\n\n    return handleEnds;\n  }\n\n  function getSpanSign(handleEnds, handleIndex) {\n    var dist = handleEnds[handleIndex] - handleEnds[1 - handleIndex]; // If `handleEnds[0] === handleEnds[1]`, always believe that handleEnd[0]\n    // is at left of handleEnds[1] for non-cross case.\n\n    return {\n      span: Math.abs(dist),\n      sign: dist > 0 ? -1 : dist < 0 ? 1 : handleIndex ? -1 : 1\n    };\n  }\n\n  function restrict(value, extend) {\n    return Math.min(extend[1] != null ? extend[1] : Infinity, Math.max(extend[0] != null ? extend[0] : -Infinity, value));\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // @ts-nocheck\n\n\n  var ATTR = '\\0_ec_interaction_mutex';\n\n  function take(zr, resourceKey, userKey) {\n    var store = getStore(zr);\n    store[resourceKey] = userKey;\n  }\n\n  function release(zr, resourceKey, userKey) {\n    var store = getStore(zr);\n    var uKey = store[resourceKey];\n\n    if (uKey === userKey) {\n      store[resourceKey] = null;\n    }\n  }\n\n  function isTaken(zr, resourceKey) {\n    return !!getStore(zr)[resourceKey];\n  }\n\n  function getStore(zr) {\n    return zr[ATTR] || (zr[ATTR] = {});\n  }\n  /**\n   * payload: {\n   *     type: 'takeGlobalCursor',\n   *     key: 'dataZoomSelect', or 'brush', or ...,\n   *         If no userKey, release global cursor.\n   * }\n   */\n  // TODO: SELF REGISTERED.\n\n\n  registerAction({\n    type: 'takeGlobalCursor',\n    event: 'globalCursorTaken',\n    update: 'update'\n  }, noop);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var RoamController =\n  /** @class */\n  function (_super) {\n    __extends(RoamController, _super);\n\n    function RoamController(zr) {\n      var _this = _super.call(this) || this;\n\n      _this._zr = zr; // Avoid two roamController bind the same handler\n\n      var mousedownHandler = bind(_this._mousedownHandler, _this);\n      var mousemoveHandler = bind(_this._mousemoveHandler, _this);\n      var mouseupHandler = bind(_this._mouseupHandler, _this);\n      var mousewheelHandler = bind(_this._mousewheelHandler, _this);\n      var pinchHandler = bind(_this._pinchHandler, _this);\n      /**\n       * Notice: only enable needed types. For example, if 'zoom'\n       * is not needed, 'zoom' should not be enabled, otherwise\n       * default mousewheel behaviour (scroll page) will be disabled.\n       */\n\n      _this.enable = function (controlType, opt) {\n        // Disable previous first\n        this.disable();\n        this._opt = defaults(clone(opt) || {}, {\n          zoomOnMouseWheel: true,\n          moveOnMouseMove: true,\n          // By default, wheel do not trigger move.\n          moveOnMouseWheel: false,\n          preventDefaultMouseMove: true\n        });\n\n        if (controlType == null) {\n          controlType = true;\n        }\n\n        if (controlType === true || controlType === 'move' || controlType === 'pan') {\n          zr.on('mousedown', mousedownHandler);\n          zr.on('mousemove', mousemoveHandler);\n          zr.on('mouseup', mouseupHandler);\n        }\n\n        if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n          zr.on('mousewheel', mousewheelHandler);\n          zr.on('pinch', pinchHandler);\n        }\n      };\n\n      _this.disable = function () {\n        zr.off('mousedown', mousedownHandler);\n        zr.off('mousemove', mousemoveHandler);\n        zr.off('mouseup', mouseupHandler);\n        zr.off('mousewheel', mousewheelHandler);\n        zr.off('pinch', pinchHandler);\n      };\n\n      return _this;\n    }\n\n    RoamController.prototype.isDragging = function () {\n      return this._dragging;\n    };\n\n    RoamController.prototype.isPinching = function () {\n      return this._pinching;\n    };\n\n    RoamController.prototype.setPointerChecker = function (pointerChecker) {\n      this.pointerChecker = pointerChecker;\n    };\n\n    RoamController.prototype.dispose = function () {\n      this.disable();\n    };\n\n    RoamController.prototype._mousedownHandler = function (e) {\n      if (isMiddleOrRightButtonOnMouseUpDown(e) || e.target && e.target.draggable) {\n        return;\n      }\n\n      var x = e.offsetX;\n      var y = e.offsetY; // Only check on mosedown, but not mousemove.\n      // Mouse can be out of target when mouse moving.\n\n      if (this.pointerChecker && this.pointerChecker(e, x, y)) {\n        this._x = x;\n        this._y = y;\n        this._dragging = true;\n      }\n    };\n\n    RoamController.prototype._mousemoveHandler = function (e) {\n      if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt) || e.gestureEvent === 'pinch' || isTaken(this._zr, 'globalPan')) {\n        return;\n      }\n\n      var x = e.offsetX;\n      var y = e.offsetY;\n      var oldX = this._x;\n      var oldY = this._y;\n      var dx = x - oldX;\n      var dy = y - oldY;\n      this._x = x;\n      this._y = y;\n      this._opt.preventDefaultMouseMove && stop(e.event);\n      trigger(this, 'pan', 'moveOnMouseMove', e, {\n        dx: dx,\n        dy: dy,\n        oldX: oldX,\n        oldY: oldY,\n        newX: x,\n        newY: y,\n        isAvailableBehavior: null\n      });\n    };\n\n    RoamController.prototype._mouseupHandler = function (e) {\n      if (!isMiddleOrRightButtonOnMouseUpDown(e)) {\n        this._dragging = false;\n      }\n    };\n\n    RoamController.prototype._mousewheelHandler = function (e) {\n      var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n      var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n      var wheelDelta = e.wheelDelta;\n      var absWheelDeltaDelta = Math.abs(wheelDelta);\n      var originX = e.offsetX;\n      var originY = e.offsetY; // wheelDelta maybe -0 in chrome mac.\n\n      if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n        return;\n      } // If both `shouldZoom` and `shouldMove` is true, trigger\n      // their event both, and the final behavior is determined\n      // by event listener themselves.\n\n\n      if (shouldZoom) {\n        // Convenience:\n        // Mac and VM Windows on Mac: scroll up: zoom out.\n        // Windows: scroll up: zoom in.\n        // FIXME: Should do more test in different environment.\n        // wheelDelta is too complicated in difference nvironment\n        // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n        // although it has been normallized by zrender.\n        // wheelDelta of mouse wheel is bigger than touch pad.\n        var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n        var scale = wheelDelta > 0 ? factor : 1 / factor;\n        checkPointerAndTrigger(this, 'zoom', 'zoomOnMouseWheel', e, {\n          scale: scale,\n          originX: originX,\n          originY: originY,\n          isAvailableBehavior: null\n        });\n      }\n\n      if (shouldMove) {\n        // FIXME: Should do more test in different environment.\n        var absDelta = Math.abs(wheelDelta); // wheelDelta of mouse wheel is bigger than touch pad.\n\n        var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n        checkPointerAndTrigger(this, 'scrollMove', 'moveOnMouseWheel', e, {\n          scrollDelta: scrollDelta,\n          originX: originX,\n          originY: originY,\n          isAvailableBehavior: null\n        });\n      }\n    };\n\n    RoamController.prototype._pinchHandler = function (e) {\n      if (isTaken(this._zr, 'globalPan')) {\n        return;\n      }\n\n      var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n      checkPointerAndTrigger(this, 'zoom', null, e, {\n        scale: scale,\n        originX: e.pinchX,\n        originY: e.pinchY,\n        isAvailableBehavior: null\n      });\n    };\n\n    return RoamController;\n  }(Eventful);\n\n  function checkPointerAndTrigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n    if (controller.pointerChecker && controller.pointerChecker(e, contollerEvent.originX, contollerEvent.originY)) {\n      // When mouse is out of roamController rect,\n      // default befavoius should not be be disabled, otherwise\n      // page sliding is disabled, contrary to expectation.\n      stop(e.event);\n      trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n    }\n  }\n\n  function trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n    // Also provide behavior checker for event listener, for some case that\n    // multiple components share one listener.\n    contollerEvent.isAvailableBehavior = bind(isAvailableBehavior, null, behaviorToCheck, e); // TODO should not have type issue.\n\n    controller.trigger(eventName, contollerEvent);\n  } // settings: {\n  //     zoomOnMouseWheel\n  //     moveOnMouseMove\n  //     moveOnMouseWheel\n  // }\n  // The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n\n\n  function isAvailableBehavior(behaviorToCheck, e, settings) {\n    var setting = settings[behaviorToCheck];\n    return !behaviorToCheck || setting && (!isString(setting) || e.event[setting + 'Key']);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // Only create one roam controller for each coordinate system.\n  // one roam controller might be refered by two inside data zoom\n  // components (for example, one for x and one for y). When user\n  // pan or zoom, only dispatch one action for those data zoom\n  // components.\n\n\n  var inner$10 = makeInner();\n\n  function setViewInfoToCoordSysRecord(api, dataZoomModel, getRange) {\n    inner$10(api).coordSysRecordMap.each(function (coordSysRecord) {\n      var dzInfo = coordSysRecord.dataZoomInfoMap.get(dataZoomModel.uid);\n\n      if (dzInfo) {\n        dzInfo.getRange = getRange;\n      }\n    });\n  }\n\n  function disposeCoordSysRecordIfNeeded(api, dataZoomModel) {\n    var coordSysRecordMap = inner$10(api).coordSysRecordMap;\n    var coordSysKeyArr = coordSysRecordMap.keys();\n\n    for (var i = 0; i < coordSysKeyArr.length; i++) {\n      var coordSysKey = coordSysKeyArr[i];\n      var coordSysRecord = coordSysRecordMap.get(coordSysKey);\n      var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n\n      if (dataZoomInfoMap) {\n        var dzUid = dataZoomModel.uid;\n        var dzInfo = dataZoomInfoMap.get(dzUid);\n\n        if (dzInfo) {\n          dataZoomInfoMap.removeKey(dzUid);\n\n          if (!dataZoomInfoMap.keys().length) {\n            disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n          }\n        }\n      }\n    }\n  }\n\n  function disposeCoordSysRecord(coordSysRecordMap, coordSysRecord) {\n    if (coordSysRecord) {\n      coordSysRecordMap.removeKey(coordSysRecord.model.uid);\n      var controller = coordSysRecord.controller;\n      controller && controller.dispose();\n    }\n  }\n\n  function createCoordSysRecord(api, coordSysModel) {\n    // These init props will never change after record created.\n    var coordSysRecord = {\n      model: coordSysModel,\n      containsPoint: curry(containsPoint, coordSysModel),\n      dispatchAction: curry(dispatchAction, api),\n      dataZoomInfoMap: null,\n      controller: null\n    }; // Must not do anything depends on coordSysRecord outside the event handler here,\n    // because coordSysRecord not completed yet.\n\n    var controller = coordSysRecord.controller = new RoamController(api.getZr());\n    each(['pan', 'zoom', 'scrollMove'], function (eventName) {\n      controller.on(eventName, function (event) {\n        var batch = [];\n        coordSysRecord.dataZoomInfoMap.each(function (dzInfo) {\n          // Check whether the behaviors (zoomOnMouseWheel, moveOnMouseMove,\n          // moveOnMouseWheel, ...) enabled.\n          if (!event.isAvailableBehavior(dzInfo.model.option)) {\n            return;\n          }\n\n          var method = (dzInfo.getRange || {})[eventName];\n          var range = method && method(dzInfo.dzReferCoordSysInfo, coordSysRecord.model.mainType, coordSysRecord.controller, event);\n          !dzInfo.model.get('disabled', true) && range && batch.push({\n            dataZoomId: dzInfo.model.id,\n            start: range[0],\n            end: range[1]\n          });\n        });\n        batch.length && coordSysRecord.dispatchAction(batch);\n      });\n    });\n    return coordSysRecord;\n  }\n  /**\n   * This action will be throttled.\n   */\n\n\n  function dispatchAction(api, batch) {\n    if (!api.isDisposed()) {\n      api.dispatchAction({\n        type: 'dataZoom',\n        animation: {\n          easing: 'cubicOut',\n          duration: 100\n        },\n        batch: batch\n      });\n    }\n  }\n\n  function containsPoint(coordSysModel, e, x, y) {\n    return coordSysModel.coordinateSystem.containPoint([x, y]);\n  }\n  /**\n   * Merge roamController settings when multiple dataZooms share one roamController.\n   */\n\n\n  function mergeControllerParams(dataZoomInfoMap) {\n    var controlType; // DO NOT use reserved word (true, false, undefined) as key literally. Even if encapsulated\n    // as string, it is probably revert to reserved word by compress tool. See #7411.\n\n    var prefix = 'type_';\n    var typePriority = {\n      'type_true': 2,\n      'type_move': 1,\n      'type_false': 0,\n      'type_undefined': -1\n    };\n    var preventDefaultMouseMove = true;\n    dataZoomInfoMap.each(function (dataZoomInfo) {\n      var dataZoomModel = dataZoomInfo.model;\n      var oneType = dataZoomModel.get('disabled', true) ? false : dataZoomModel.get('zoomLock', true) ? 'move' : true;\n\n      if (typePriority[prefix + oneType] > typePriority[prefix + controlType]) {\n        controlType = oneType;\n      } // Prevent default move event by default. If one false, do not prevent. Otherwise\n      // users may be confused why it does not work when multiple insideZooms exist.\n\n\n      preventDefaultMouseMove = preventDefaultMouseMove && dataZoomModel.get('preventDefaultMouseMove', true);\n    });\n    return {\n      controlType: controlType,\n      opt: {\n        // RoamController will enable all of these functionalities,\n        // and the final behavior is determined by its event listener\n        // provided by each inside zoom.\n        zoomOnMouseWheel: true,\n        moveOnMouseMove: true,\n        moveOnMouseWheel: true,\n        preventDefaultMouseMove: !!preventDefaultMouseMove\n      }\n    };\n  }\n\n  function installDataZoomRoamProcessor(registers) {\n    registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, function (ecModel, api) {\n      var apiInner = inner$10(api);\n      var coordSysRecordMap = apiInner.coordSysRecordMap || (apiInner.coordSysRecordMap = createHashMap());\n      coordSysRecordMap.each(function (coordSysRecord) {\n        // `coordSysRecordMap` always exists (becuase it hold the `roam controller`, which should\n        // better not re-create each time), but clear `dataZoomInfoMap` each round of the workflow.\n        coordSysRecord.dataZoomInfoMap = null;\n      });\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'inside'\n      }, function (dataZoomModel) {\n        var dzReferCoordSysWrap = collectReferCoordSysModelInfo(dataZoomModel);\n        each(dzReferCoordSysWrap.infoList, function (dzCoordSysInfo) {\n          var coordSysUid = dzCoordSysInfo.model.uid;\n          var coordSysRecord = coordSysRecordMap.get(coordSysUid) || coordSysRecordMap.set(coordSysUid, createCoordSysRecord(api, dzCoordSysInfo.model));\n          var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap || (coordSysRecord.dataZoomInfoMap = createHashMap()); // Notice these props might be changed each time for a single dataZoomModel.\n\n          dataZoomInfoMap.set(dataZoomModel.uid, {\n            dzReferCoordSysInfo: dzCoordSysInfo,\n            model: dataZoomModel,\n            getRange: null\n          });\n        });\n      }); // (1) Merge dataZoom settings for each coord sys and set to the roam controller.\n      // (2) Clear coord sys if not refered by any dataZoom.\n\n      coordSysRecordMap.each(function (coordSysRecord) {\n        var controller = coordSysRecord.controller;\n        var firstDzInfo;\n        var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n\n        if (dataZoomInfoMap) {\n          var firstDzKey = dataZoomInfoMap.keys()[0];\n\n          if (firstDzKey != null) {\n            firstDzInfo = dataZoomInfoMap.get(firstDzKey);\n          }\n        }\n\n        if (!firstDzInfo) {\n          disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n          return;\n        }\n\n        var controllerParams = mergeControllerParams(dataZoomInfoMap);\n        controller.enable(controllerParams.controlType, controllerParams.opt);\n        controller.setPointerChecker(coordSysRecord.containsPoint);\n        createOrUpdate(coordSysRecord, 'dispatchAction', firstDzInfo.model.get('throttle', true), 'fixRate');\n      });\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var InsideZoomView =\n  /** @class */\n  function (_super) {\n    __extends(InsideZoomView, _super);\n\n    function InsideZoomView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = 'dataZoom.inside';\n      return _this;\n    }\n\n    InsideZoomView.prototype.render = function (dataZoomModel, ecModel, api) {\n      _super.prototype.render.apply(this, arguments);\n\n      if (dataZoomModel.noTarget()) {\n        this._clear();\n\n        return;\n      } // Hence the `throttle` util ensures to preserve command order,\n      // here simply updating range all the time will not cause missing\n      // any of the the roam change.\n\n\n      this.range = dataZoomModel.getPercentRange(); // Reset controllers.\n\n      setViewInfoToCoordSysRecord(api, dataZoomModel, {\n        pan: bind(getRangeHandlers.pan, this),\n        zoom: bind(getRangeHandlers.zoom, this),\n        scrollMove: bind(getRangeHandlers.scrollMove, this)\n      });\n    };\n\n    InsideZoomView.prototype.dispose = function () {\n      this._clear();\n\n      _super.prototype.dispose.apply(this, arguments);\n    };\n\n    InsideZoomView.prototype._clear = function () {\n      disposeCoordSysRecordIfNeeded(this.api, this.dataZoomModel);\n      this.range = null;\n    };\n\n    InsideZoomView.type = 'dataZoom.inside';\n    return InsideZoomView;\n  }(DataZoomView);\n\n  var getRangeHandlers = {\n    zoom: function (coordSysInfo, coordSysMainType, controller, e) {\n      var lastRange = this.range;\n      var range = lastRange.slice(); // Calculate transform by the first axis.\n\n      var axisModel = coordSysInfo.axisModels[0];\n\n      if (!axisModel) {\n        return;\n      }\n\n      var directionInfo = getDirectionInfo[coordSysMainType](null, [e.originX, e.originY], axisModel, controller, coordSysInfo);\n      var percentPoint = (directionInfo.signal > 0 ? directionInfo.pixelStart + directionInfo.pixelLength - directionInfo.pixel : directionInfo.pixel - directionInfo.pixelStart) / directionInfo.pixelLength * (range[1] - range[0]) + range[0];\n      var scale = Math.max(1 / e.scale, 0);\n      range[0] = (range[0] - percentPoint) * scale + percentPoint;\n      range[1] = (range[1] - percentPoint) * scale + percentPoint; // Restrict range.\n\n      var minMaxSpan = this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n      sliderMove(0, range, [0, 100], 0, minMaxSpan.minSpan, minMaxSpan.maxSpan);\n      this.range = range;\n\n      if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n        return range;\n      }\n    },\n    pan: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n      var directionInfo = getDirectionInfo[coordSysMainType]([e.oldX, e.oldY], [e.newX, e.newY], axisModel, controller, coordSysInfo);\n      return directionInfo.signal * (range[1] - range[0]) * directionInfo.pixel / directionInfo.pixelLength;\n    }),\n    scrollMove: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n      var directionInfo = getDirectionInfo[coordSysMainType]([0, 0], [e.scrollDelta, e.scrollDelta], axisModel, controller, coordSysInfo);\n      return directionInfo.signal * (range[1] - range[0]) * e.scrollDelta;\n    })\n  };\n\n  function makeMover(getPercentDelta) {\n    return function (coordSysInfo, coordSysMainType, controller, e) {\n      var lastRange = this.range;\n      var range = lastRange.slice(); // Calculate transform by the first axis.\n\n      var axisModel = coordSysInfo.axisModels[0];\n\n      if (!axisModel) {\n        return;\n      }\n\n      var percentDelta = getPercentDelta(range, axisModel, coordSysInfo, coordSysMainType, controller, e);\n      sliderMove(percentDelta, range, [0, 100], 'all');\n      this.range = range;\n\n      if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n        return range;\n      }\n    };\n  }\n\n  var getDirectionInfo = {\n    grid: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n      var axis = axisModel.axis;\n      var ret = {};\n      var rect = coordSysInfo.model.coordinateSystem.getRect();\n      oldPoint = oldPoint || [0, 0];\n\n      if (axis.dim === 'x') {\n        ret.pixel = newPoint[0] - oldPoint[0];\n        ret.pixelLength = rect.width;\n        ret.pixelStart = rect.x;\n        ret.signal = axis.inverse ? 1 : -1;\n      } else {\n        // axis.dim === 'y'\n        ret.pixel = newPoint[1] - oldPoint[1];\n        ret.pixelLength = rect.height;\n        ret.pixelStart = rect.y;\n        ret.signal = axis.inverse ? -1 : 1;\n      }\n\n      return ret;\n    },\n    polar: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n      var axis = axisModel.axis;\n      var ret = {};\n      var polar = coordSysInfo.model.coordinateSystem;\n      var radiusExtent = polar.getRadiusAxis().getExtent();\n      var angleExtent = polar.getAngleAxis().getExtent();\n      oldPoint = oldPoint ? polar.pointToCoord(oldPoint) : [0, 0];\n      newPoint = polar.pointToCoord(newPoint);\n\n      if (axisModel.mainType === 'radiusAxis') {\n        ret.pixel = newPoint[0] - oldPoint[0]; // ret.pixelLength = Math.abs(radiusExtent[1] - radiusExtent[0]);\n        // ret.pixelStart = Math.min(radiusExtent[0], radiusExtent[1]);\n\n        ret.pixelLength = radiusExtent[1] - radiusExtent[0];\n        ret.pixelStart = radiusExtent[0];\n        ret.signal = axis.inverse ? 1 : -1;\n      } else {\n        // 'angleAxis'\n        ret.pixel = newPoint[1] - oldPoint[1]; // ret.pixelLength = Math.abs(angleExtent[1] - angleExtent[0]);\n        // ret.pixelStart = Math.min(angleExtent[0], angleExtent[1]);\n\n        ret.pixelLength = angleExtent[1] - angleExtent[0];\n        ret.pixelStart = angleExtent[0];\n        ret.signal = axis.inverse ? -1 : 1;\n      }\n\n      return ret;\n    },\n    singleAxis: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n      var axis = axisModel.axis;\n      var rect = coordSysInfo.model.coordinateSystem.getRect();\n      var ret = {};\n      oldPoint = oldPoint || [0, 0];\n\n      if (axis.orient === 'horizontal') {\n        ret.pixel = newPoint[0] - oldPoint[0];\n        ret.pixelLength = rect.width;\n        ret.pixelStart = rect.x;\n        ret.signal = axis.inverse ? 1 : -1;\n      } else {\n        // 'vertical'\n        ret.pixel = newPoint[1] - oldPoint[1];\n        ret.pixelLength = rect.height;\n        ret.pixelStart = rect.y;\n        ret.signal = axis.inverse ? -1 : 1;\n      }\n\n      return ret;\n    }\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var each$5 = each;\n  var asc$1 = asc;\n  /**\n   * Operate single axis.\n   * One axis can only operated by one axis operator.\n   * Different dataZoomModels may be defined to operate the same axis.\n   * (i.e. 'inside' data zoom and 'slider' data zoom components)\n   * So dataZoomModels share one axisProxy in that case.\n   */\n\n  var AxisProxy =\n  /** @class */\n  function () {\n    function AxisProxy(dimName, axisIndex, dataZoomModel, ecModel) {\n      this._dimName = dimName;\n      this._axisIndex = axisIndex;\n      this.ecModel = ecModel;\n      this._dataZoomModel = dataZoomModel; // /**\n      //  * @readOnly\n      //  * @private\n      //  */\n      // this.hasSeriesStacked;\n    }\n    /**\n     * Whether the axisProxy is hosted by dataZoomModel.\n     */\n\n\n    AxisProxy.prototype.hostedBy = function (dataZoomModel) {\n      return this._dataZoomModel === dataZoomModel;\n    };\n    /**\n     * @return Value can only be NaN or finite value.\n     */\n\n\n    AxisProxy.prototype.getDataValueWindow = function () {\n      return this._valueWindow.slice();\n    };\n    /**\n     * @return {Array.<number>}\n     */\n\n\n    AxisProxy.prototype.getDataPercentWindow = function () {\n      return this._percentWindow.slice();\n    };\n\n    AxisProxy.prototype.getTargetSeriesModels = function () {\n      var seriesModels = [];\n      this.ecModel.eachSeries(function (seriesModel) {\n        if (isCoordSupported(seriesModel)) {\n          var axisMainType = getAxisMainType(this._dimName);\n          var axisModel = seriesModel.getReferringComponents(axisMainType, SINGLE_REFERRING).models[0];\n\n          if (axisModel && this._axisIndex === axisModel.componentIndex) {\n            seriesModels.push(seriesModel);\n          }\n        }\n      }, this);\n      return seriesModels;\n    };\n\n    AxisProxy.prototype.getAxisModel = function () {\n      return this.ecModel.getComponent(this._dimName + 'Axis', this._axisIndex);\n    };\n\n    AxisProxy.prototype.getMinMaxSpan = function () {\n      return clone(this._minMaxSpan);\n    };\n    /**\n     * Only calculate by given range and this._dataExtent, do not change anything.\n     */\n\n\n    AxisProxy.prototype.calculateDataWindow = function (opt) {\n      var dataExtent = this._dataExtent;\n      var axisModel = this.getAxisModel();\n      var scale = axisModel.axis.scale;\n\n      var rangePropMode = this._dataZoomModel.getRangePropMode();\n\n      var percentExtent = [0, 100];\n      var percentWindow = [];\n      var valueWindow = [];\n      var hasPropModeValue;\n      each$5(['start', 'end'], function (prop, idx) {\n        var boundPercent = opt[prop];\n        var boundValue = opt[prop + 'Value']; // Notice: dataZoom is based either on `percentProp` ('start', 'end') or\n        // on `valueProp` ('startValue', 'endValue'). (They are based on the data extent\n        // but not min/max of axis, which will be calculated by data window then).\n        // The former one is suitable for cases that a dataZoom component controls multiple\n        // axes with different unit or extent, and the latter one is suitable for accurate\n        // zoom by pixel (e.g., in dataZoomSelect).\n        // we use `getRangePropMode()` to mark which prop is used. `rangePropMode` is updated\n        // only when setOption or dispatchAction, otherwise it remains its original value.\n        // (Why not only record `percentProp` and always map to `valueProp`? Because\n        // the map `valueProp` -> `percentProp` -> `valueProp` probably not the original\n        // `valueProp`. consider two axes constrolled by one dataZoom. They have different\n        // data extent. All of values that are overflow the `dataExtent` will be calculated\n        // to percent '100%').\n\n        if (rangePropMode[idx] === 'percent') {\n          boundPercent == null && (boundPercent = percentExtent[idx]); // Use scale.parse to math round for category or time axis.\n\n          boundValue = scale.parse(linearMap(boundPercent, percentExtent, dataExtent));\n        } else {\n          hasPropModeValue = true;\n          boundValue = boundValue == null ? dataExtent[idx] : scale.parse(boundValue); // Calculating `percent` from `value` may be not accurate, because\n          // This calculation can not be inversed, because all of values that\n          // are overflow the `dataExtent` will be calculated to percent '100%'\n\n          boundPercent = linearMap(boundValue, dataExtent, percentExtent);\n        } // valueWindow[idx] = round(boundValue);\n        // percentWindow[idx] = round(boundPercent);\n\n\n        valueWindow[idx] = boundValue;\n        percentWindow[idx] = boundPercent;\n      });\n      asc$1(valueWindow);\n      asc$1(percentWindow); // The windows from user calling of `dispatchAction` might be out of the extent,\n      // or do not obey the `min/maxSpan`, `min/maxValueSpan`. But we dont restrict window\n      // by `zoomLock` here, because we see `zoomLock` just as a interaction constraint,\n      // where API is able to initialize/modify the window size even though `zoomLock`\n      // specified.\n\n      var spans = this._minMaxSpan;\n      hasPropModeValue ? restrictSet(valueWindow, percentWindow, dataExtent, percentExtent, false) : restrictSet(percentWindow, valueWindow, percentExtent, dataExtent, true);\n\n      function restrictSet(fromWindow, toWindow, fromExtent, toExtent, toValue) {\n        var suffix = toValue ? 'Span' : 'ValueSpan';\n        sliderMove(0, fromWindow, fromExtent, 'all', spans['min' + suffix], spans['max' + suffix]);\n\n        for (var i = 0; i < 2; i++) {\n          toWindow[i] = linearMap(fromWindow[i], fromExtent, toExtent, true);\n          toValue && (toWindow[i] = scale.parse(toWindow[i]));\n        }\n      }\n\n      return {\n        valueWindow: valueWindow,\n        percentWindow: percentWindow\n      };\n    };\n    /**\n     * Notice: reset should not be called before series.restoreData() called,\n     * so it is recommanded to be called in \"process stage\" but not \"model init\n     * stage\".\n     */\n\n\n    AxisProxy.prototype.reset = function (dataZoomModel) {\n      if (dataZoomModel !== this._dataZoomModel) {\n        return;\n      }\n\n      var targetSeries = this.getTargetSeriesModels(); // Culculate data window and data extent, and record them.\n\n      this._dataExtent = calculateDataExtent(this, this._dimName, targetSeries); // `calculateDataWindow` uses min/maxSpan.\n\n      this._updateMinMaxSpan();\n\n      var dataWindow = this.calculateDataWindow(dataZoomModel.settledOption);\n      this._valueWindow = dataWindow.valueWindow;\n      this._percentWindow = dataWindow.percentWindow; // Update axis setting then.\n\n      this._setAxisModel();\n    };\n\n    AxisProxy.prototype.filterData = function (dataZoomModel, api) {\n      if (dataZoomModel !== this._dataZoomModel) {\n        return;\n      }\n\n      var axisDim = this._dimName;\n      var seriesModels = this.getTargetSeriesModels();\n      var filterMode = dataZoomModel.get('filterMode');\n      var valueWindow = this._valueWindow;\n\n      if (filterMode === 'none') {\n        return;\n      } // FIXME\n      // Toolbox may has dataZoom injected. And if there are stacked bar chart\n      // with NaN data, NaN will be filtered and stack will be wrong.\n      // So we need to force the mode to be set empty.\n      // In fect, it is not a big deal that do not support filterMode-'filter'\n      // when using toolbox#dataZoom, utill tooltip#dataZoom support \"single axis\n      // selection\" some day, which might need \"adapt to data extent on the\n      // otherAxis\", which is disabled by filterMode-'empty'.\n      // But currently, stack has been fixed to based on value but not index,\n      // so this is not an issue any more.\n      // let otherAxisModel = this.getOtherAxisModel();\n      // if (dataZoomModel.get('$fromToolbox')\n      //     && otherAxisModel\n      //     && otherAxisModel.hasSeriesStacked\n      // ) {\n      //     filterMode = 'empty';\n      // }\n      // TODO\n      // filterMode 'weakFilter' and 'empty' is not optimized for huge data yet.\n\n\n      each$5(seriesModels, function (seriesModel) {\n        var seriesData = seriesModel.getData();\n        var dataDims = seriesData.mapDimensionsAll(axisDim);\n\n        if (!dataDims.length) {\n          return;\n        }\n\n        if (filterMode === 'weakFilter') {\n          var store_1 = seriesData.getStore();\n          var dataDimIndices_1 = map(dataDims, function (dim) {\n            return seriesData.getDimensionIndex(dim);\n          }, seriesData);\n          seriesData.filterSelf(function (dataIndex) {\n            var leftOut;\n            var rightOut;\n            var hasValue;\n\n            for (var i = 0; i < dataDims.length; i++) {\n              var value = store_1.get(dataDimIndices_1[i], dataIndex);\n              var thisHasValue = !isNaN(value);\n              var thisLeftOut = value < valueWindow[0];\n              var thisRightOut = value > valueWindow[1];\n\n              if (thisHasValue && !thisLeftOut && !thisRightOut) {\n                return true;\n              }\n\n              thisHasValue && (hasValue = true);\n              thisLeftOut && (leftOut = true);\n              thisRightOut && (rightOut = true);\n            } // If both left out and right out, do not filter.\n\n\n            return hasValue && leftOut && rightOut;\n          });\n        } else {\n          each$5(dataDims, function (dim) {\n            if (filterMode === 'empty') {\n              seriesModel.setData(seriesData = seriesData.map(dim, function (value) {\n                return !isInWindow(value) ? NaN : value;\n              }));\n            } else {\n              var range = {};\n              range[dim] = valueWindow; // console.time('select');\n\n              seriesData.selectRange(range); // console.timeEnd('select');\n            }\n          });\n        }\n\n        each$5(dataDims, function (dim) {\n          seriesData.setApproximateExtent(valueWindow, dim);\n        });\n      });\n\n      function isInWindow(value) {\n        return value >= valueWindow[0] && value <= valueWindow[1];\n      }\n    };\n\n    AxisProxy.prototype._updateMinMaxSpan = function () {\n      var minMaxSpan = this._minMaxSpan = {};\n      var dataZoomModel = this._dataZoomModel;\n      var dataExtent = this._dataExtent;\n      each$5(['min', 'max'], function (minMax) {\n        var percentSpan = dataZoomModel.get(minMax + 'Span');\n        var valueSpan = dataZoomModel.get(minMax + 'ValueSpan');\n        valueSpan != null && (valueSpan = this.getAxisModel().axis.scale.parse(valueSpan)); // minValueSpan and maxValueSpan has higher priority than minSpan and maxSpan\n\n        if (valueSpan != null) {\n          percentSpan = linearMap(dataExtent[0] + valueSpan, dataExtent, [0, 100], true);\n        } else if (percentSpan != null) {\n          valueSpan = linearMap(percentSpan, [0, 100], dataExtent, true) - dataExtent[0];\n        }\n\n        minMaxSpan[minMax + 'Span'] = percentSpan;\n        minMaxSpan[minMax + 'ValueSpan'] = valueSpan;\n      }, this);\n    };\n\n    AxisProxy.prototype._setAxisModel = function () {\n      var axisModel = this.getAxisModel();\n      var percentWindow = this._percentWindow;\n      var valueWindow = this._valueWindow;\n\n      if (!percentWindow) {\n        return;\n      } // [0, 500]: arbitrary value, guess axis extent.\n\n\n      var precision = getPixelPrecision(valueWindow, [0, 500]);\n      precision = Math.min(precision, 20); // For value axis, if min/max/scale are not set, we just use the extent obtained\n      // by series data, which may be a little different from the extent calculated by\n      // `axisHelper.getScaleExtent`. But the different just affects the experience a\n      // little when zooming. So it will not be fixed until some users require it strongly.\n\n      var rawExtentInfo = axisModel.axis.scale.rawExtentInfo;\n\n      if (percentWindow[0] !== 0) {\n        rawExtentInfo.setDeterminedMinMax('min', +valueWindow[0].toFixed(precision));\n      }\n\n      if (percentWindow[1] !== 100) {\n        rawExtentInfo.setDeterminedMinMax('max', +valueWindow[1].toFixed(precision));\n      }\n\n      rawExtentInfo.freeze();\n    };\n\n    return AxisProxy;\n  }();\n\n  function calculateDataExtent(axisProxy, axisDim, seriesModels) {\n    var dataExtent = [Infinity, -Infinity];\n    each$5(seriesModels, function (seriesModel) {\n      unionAxisExtentFromData(dataExtent, seriesModel.getData(), axisDim);\n    }); // It is important to get \"consistent\" extent when more then one axes is\n    // controlled by a `dataZoom`, otherwise those axes will not be synchronized\n    // when zooming. But it is difficult to know what is \"consistent\", considering\n    // axes have different type or even different meanings (For example, two\n    // time axes are used to compare data of the same date in different years).\n    // So basically dataZoom just obtains extent by series.data (in category axis\n    // extent can be obtained from axis.data).\n    // Nevertheless, user can set min/max/scale on axes to make extent of axes\n    // consistent.\n\n    var axisModel = axisProxy.getAxisModel();\n    var rawExtentResult = ensureScaleRawExtentInfo(axisModel.axis.scale, axisModel, dataExtent).calculate();\n    return [rawExtentResult.min, rawExtentResult.max];\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var dataZoomProcessor = {\n    // `dataZoomProcessor` will only be performed in needed series. Consider if\n    // there is a line series and a pie series, it is better not to update the\n    // line series if only pie series is needed to be updated.\n    getTargetSeries: function (ecModel) {\n      function eachAxisModel(cb) {\n        ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n          dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n            var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n            cb(axisDim, axisIndex, axisModel, dataZoomModel);\n          });\n        });\n      } // FIXME: it brings side-effect to `getTargetSeries`.\n      // Prepare axis proxies.\n\n\n      eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n        // dispose all last axis proxy, in case that some axis are deleted.\n        axisModel.__dzAxisProxy = null;\n      });\n      var proxyList = [];\n      eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n        // Different dataZooms may constrol the same axis. In that case,\n        // an axisProxy serves both of them.\n        if (!axisModel.__dzAxisProxy) {\n          // Use the first dataZoomModel as the main model of axisProxy.\n          axisModel.__dzAxisProxy = new AxisProxy(axisDim, axisIndex, dataZoomModel, ecModel);\n          proxyList.push(axisModel.__dzAxisProxy);\n        }\n      });\n      var seriesModelMap = createHashMap();\n      each(proxyList, function (axisProxy) {\n        each(axisProxy.getTargetSeriesModels(), function (seriesModel) {\n          seriesModelMap.set(seriesModel.uid, seriesModel);\n        });\n      });\n      return seriesModelMap;\n    },\n    // Consider appendData, where filter should be performed. Because data process is\n    // in block mode currently, it is not need to worry about that the overallProgress\n    // execute every frame.\n    overallReset: function (ecModel, api) {\n      ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n        // We calculate window and reset axis here but not in model\n        // init stage and not after action dispatch handler, because\n        // reset should be called after seriesData.restoreData.\n        dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n          dataZoomModel.getAxisProxy(axisDim, axisIndex).reset(dataZoomModel);\n        }); // Caution: data zoom filtering is order sensitive when using\n        // percent range and no min/max/scale set on axis.\n        // For example, we have dataZoom definition:\n        // [\n        //      {xAxisIndex: 0, start: 30, end: 70},\n        //      {yAxisIndex: 0, start: 20, end: 80}\n        // ]\n        // In this case, [20, 80] of y-dataZoom should be based on data\n        // that have filtered by x-dataZoom using range of [30, 70],\n        // but should not be based on full raw data. Thus sliding\n        // x-dataZoom will change both ranges of xAxis and yAxis,\n        // while sliding y-dataZoom will only change the range of yAxis.\n        // So we should filter x-axis after reset x-axis immediately,\n        // and then reset y-axis and filter y-axis.\n\n        dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n          dataZoomModel.getAxisProxy(axisDim, axisIndex).filterData(dataZoomModel, api);\n        });\n      });\n      ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n        // Fullfill all of the range props so that user\n        // is able to get them from chart.getOption().\n        var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n\n        if (axisProxy) {\n          var percentRange = axisProxy.getDataPercentWindow();\n          var valueRange = axisProxy.getDataValueWindow();\n          dataZoomModel.setCalculatedRange({\n            start: percentRange[0],\n            end: percentRange[1],\n            startValue: valueRange[0],\n            endValue: valueRange[1]\n          });\n        }\n      });\n    }\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  function installDataZoomAction(registers) {\n    registers.registerAction('dataZoom', function (payload, ecModel) {\n      var effectedModels = findEffectedDataZooms(ecModel, payload);\n      each(effectedModels, function (dataZoomModel) {\n        dataZoomModel.setRawRange({\n          start: payload.start,\n          end: payload.end,\n          startValue: payload.startValue,\n          endValue: payload.endValue\n        });\n      });\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var installed = false;\n\n  function installCommon(registers) {\n    if (installed) {\n      return;\n    }\n\n    installed = true;\n    registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, dataZoomProcessor);\n    installDataZoomAction(registers);\n    registers.registerSubTypeDefaulter('dataZoom', function () {\n      // Default 'slider' when no type specified.\n      return 'slider';\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$13(registers) {\n    installCommon(registers);\n    registers.registerComponentModel(InsideZoomModel);\n    registers.registerComponentView(InsideZoomView);\n    installDataZoomRoamProcessor(registers);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var SliderZoomModel =\n  /** @class */\n  function (_super) {\n    __extends(SliderZoomModel, _super);\n\n    function SliderZoomModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = SliderZoomModel.type;\n      return _this;\n    }\n\n    SliderZoomModel.type = 'dataZoom.slider';\n    SliderZoomModel.layoutMode = 'box';\n    SliderZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n      show: true,\n      // deault value can only be drived in view stage.\n      right: 'ph',\n      top: 'ph',\n      width: 'ph',\n      height: 'ph',\n      left: null,\n      bottom: null,\n      borderColor: '#d2dbee',\n      borderRadius: 3,\n      backgroundColor: 'rgba(47,69,84,0)',\n      // dataBackgroundColor: '#ddd',\n      dataBackground: {\n        lineStyle: {\n          color: '#d2dbee',\n          width: 0.5\n        },\n        areaStyle: {\n          color: '#d2dbee',\n          opacity: 0.2\n        }\n      },\n      selectedDataBackground: {\n        lineStyle: {\n          color: '#8fb0f7',\n          width: 0.5\n        },\n        areaStyle: {\n          color: '#8fb0f7',\n          opacity: 0.2\n        }\n      },\n      // Color of selected window.\n      fillerColor: 'rgba(135,175,274,0.2)',\n      handleIcon: 'path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z',\n      // Percent of the slider height\n      handleSize: '100%',\n      handleStyle: {\n        color: '#fff',\n        borderColor: '#ACB8D1'\n      },\n      moveHandleSize: 7,\n      moveHandleIcon: 'path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z',\n      moveHandleStyle: {\n        color: '#D2DBEE',\n        opacity: 0.7\n      },\n      showDetail: true,\n      showDataShadow: 'auto',\n      realtime: true,\n      zoomLock: false,\n      textStyle: {\n        color: '#6E7079'\n      },\n      brushSelect: true,\n      brushStyle: {\n        color: 'rgba(135,175,274,0.15)'\n      },\n      emphasis: {\n        handleStyle: {\n          borderColor: '#8FB0F7'\n        },\n        moveHandleStyle: {\n          color: '#8FB0F7'\n        }\n      }\n    });\n    return SliderZoomModel;\n  }(DataZoomModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var Rect$2 = Rect; // Constants\n\n  var DEFAULT_LOCATION_EDGE_GAP = 7;\n  var DEFAULT_FRAME_BORDER_WIDTH = 1;\n  var DEFAULT_FILLER_SIZE = 30;\n  var DEFAULT_MOVE_HANDLE_SIZE = 7;\n  var HORIZONTAL = 'horizontal';\n  var VERTICAL = 'vertical';\n  var LABEL_GAP = 5;\n  var SHOW_DATA_SHADOW_SERIES_TYPE = ['line', 'bar', 'candlestick', 'scatter'];\n  var REALTIME_ANIMATION_CONFIG = {\n    easing: 'cubicOut',\n    duration: 100,\n    delay: 0\n  };\n\n  var SliderZoomView =\n  /** @class */\n  function (_super) {\n    __extends(SliderZoomView, _super);\n\n    function SliderZoomView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = SliderZoomView.type;\n      _this._displayables = {};\n      return _this;\n    }\n\n    SliderZoomView.prototype.init = function (ecModel, api) {\n      this.api = api; // A unique handler for each dataZoom component\n\n      this._onBrush = bind(this._onBrush, this);\n      this._onBrushEnd = bind(this._onBrushEnd, this);\n    };\n\n    SliderZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n      _super.prototype.render.apply(this, arguments);\n\n      createOrUpdate(this, '_dispatchZoomAction', dataZoomModel.get('throttle'), 'fixRate');\n      this._orient = dataZoomModel.getOrient();\n\n      if (dataZoomModel.get('show') === false) {\n        this.group.removeAll();\n        return;\n      }\n\n      if (dataZoomModel.noTarget()) {\n        this._clear();\n\n        this.group.removeAll();\n        return;\n      } // Notice: this._resetInterval() should not be executed when payload.type\n      // is 'dataZoom', origin this._range should be maintained, otherwise 'pan'\n      // or 'zoom' info will be missed because of 'throttle' of this.dispatchAction,\n\n\n      if (!payload || payload.type !== 'dataZoom' || payload.from !== this.uid) {\n        this._buildView();\n      }\n\n      this._updateView();\n    };\n\n    SliderZoomView.prototype.dispose = function () {\n      this._clear();\n\n      _super.prototype.dispose.apply(this, arguments);\n    };\n\n    SliderZoomView.prototype._clear = function () {\n      clear(this, '_dispatchZoomAction');\n      var zr = this.api.getZr();\n      zr.off('mousemove', this._onBrush);\n      zr.off('mouseup', this._onBrushEnd);\n    };\n\n    SliderZoomView.prototype._buildView = function () {\n      var thisGroup = this.group;\n      thisGroup.removeAll();\n      this._brushing = false;\n      this._displayables.brushRect = null;\n\n      this._resetLocation();\n\n      this._resetInterval();\n\n      var barGroup = this._displayables.sliderGroup = new Group();\n\n      this._renderBackground();\n\n      this._renderHandle();\n\n      this._renderDataShadow();\n\n      thisGroup.add(barGroup);\n\n      this._positionGroup();\n    };\n\n    SliderZoomView.prototype._resetLocation = function () {\n      var dataZoomModel = this.dataZoomModel;\n      var api = this.api;\n      var showMoveHandle = dataZoomModel.get('brushSelect');\n      var moveHandleSize = showMoveHandle ? DEFAULT_MOVE_HANDLE_SIZE : 0; // If some of x/y/width/height are not specified,\n      // auto-adapt according to target grid.\n\n      var coordRect = this._findCoordRect();\n\n      var ecSize = {\n        width: api.getWidth(),\n        height: api.getHeight()\n      }; // Default align by coordinate system rect.\n\n      var positionInfo = this._orient === HORIZONTAL ? {\n        // Why using 'right', because right should be used in vertical,\n        // and it is better to be consistent for dealing with position param merge.\n        right: ecSize.width - coordRect.x - coordRect.width,\n        top: ecSize.height - DEFAULT_FILLER_SIZE - DEFAULT_LOCATION_EDGE_GAP - moveHandleSize,\n        width: coordRect.width,\n        height: DEFAULT_FILLER_SIZE\n      } : {\n        right: DEFAULT_LOCATION_EDGE_GAP,\n        top: coordRect.y,\n        width: DEFAULT_FILLER_SIZE,\n        height: coordRect.height\n      }; // Do not write back to option and replace value 'ph', because\n      // the 'ph' value should be recalculated when resize.\n\n      var layoutParams = getLayoutParams(dataZoomModel.option); // Replace the placeholder value.\n\n      each(['right', 'top', 'width', 'height'], function (name) {\n        if (layoutParams[name] === 'ph') {\n          layoutParams[name] = positionInfo[name];\n        }\n      });\n      var layoutRect = getLayoutRect(layoutParams, ecSize);\n      this._location = {\n        x: layoutRect.x,\n        y: layoutRect.y\n      };\n      this._size = [layoutRect.width, layoutRect.height];\n      this._orient === VERTICAL && this._size.reverse();\n    };\n\n    SliderZoomView.prototype._positionGroup = function () {\n      var thisGroup = this.group;\n      var location = this._location;\n      var orient = this._orient; // Just use the first axis to determine mapping.\n\n      var targetAxisModel = this.dataZoomModel.getFirstTargetAxisModel();\n      var inverse = targetAxisModel && targetAxisModel.get('inverse');\n      var sliderGroup = this._displayables.sliderGroup;\n      var otherAxisInverse = (this._dataShadowInfo || {}).otherAxisInverse; // Transform barGroup.\n\n      sliderGroup.attr(orient === HORIZONTAL && !inverse ? {\n        scaleY: otherAxisInverse ? 1 : -1,\n        scaleX: 1\n      } : orient === HORIZONTAL && inverse ? {\n        scaleY: otherAxisInverse ? 1 : -1,\n        scaleX: -1\n      } : orient === VERTICAL && !inverse ? {\n        scaleY: otherAxisInverse ? -1 : 1,\n        scaleX: 1,\n        rotation: Math.PI / 2\n      } // Dont use Math.PI, considering shadow direction.\n      : {\n        scaleY: otherAxisInverse ? -1 : 1,\n        scaleX: -1,\n        rotation: Math.PI / 2\n      }); // Position barGroup\n\n      var rect = thisGroup.getBoundingRect([sliderGroup]);\n      thisGroup.x = location.x - rect.x;\n      thisGroup.y = location.y - rect.y;\n      thisGroup.markRedraw();\n    };\n\n    SliderZoomView.prototype._getViewExtent = function () {\n      return [0, this._size[0]];\n    };\n\n    SliderZoomView.prototype._renderBackground = function () {\n      var dataZoomModel = this.dataZoomModel;\n      var size = this._size;\n      var barGroup = this._displayables.sliderGroup;\n      var brushSelect = dataZoomModel.get('brushSelect');\n      barGroup.add(new Rect$2({\n        silent: true,\n        shape: {\n          x: 0,\n          y: 0,\n          width: size[0],\n          height: size[1]\n        },\n        style: {\n          fill: dataZoomModel.get('backgroundColor')\n        },\n        z2: -40\n      })); // Click panel, over shadow, below handles.\n\n      var clickPanel = new Rect$2({\n        shape: {\n          x: 0,\n          y: 0,\n          width: size[0],\n          height: size[1]\n        },\n        style: {\n          fill: 'transparent'\n        },\n        z2: 0,\n        onclick: bind(this._onClickPanel, this)\n      });\n      var zr = this.api.getZr();\n\n      if (brushSelect) {\n        clickPanel.on('mousedown', this._onBrushStart, this);\n        clickPanel.cursor = 'crosshair';\n        zr.on('mousemove', this._onBrush);\n        zr.on('mouseup', this._onBrushEnd);\n      } else {\n        zr.off('mousemove', this._onBrush);\n        zr.off('mouseup', this._onBrushEnd);\n      }\n\n      barGroup.add(clickPanel);\n    };\n\n    SliderZoomView.prototype._renderDataShadow = function () {\n      var info = this._dataShadowInfo = this._prepareDataShadowInfo();\n\n      this._displayables.dataShadowSegs = [];\n\n      if (!info) {\n        return;\n      }\n\n      var size = this._size;\n      var oldSize = this._shadowSize || [];\n      var seriesModel = info.series;\n      var data = seriesModel.getRawData();\n      var otherDim = seriesModel.getShadowDim ? seriesModel.getShadowDim() // @see candlestick\n      : info.otherDim;\n\n      if (otherDim == null) {\n        return;\n      }\n\n      var polygonPts = this._shadowPolygonPts;\n      var polylinePts = this._shadowPolylinePts; // Not re-render if data doesn't change.\n\n      if (data !== this._shadowData || otherDim !== this._shadowDim || size[0] !== oldSize[0] || size[1] !== oldSize[1]) {\n        var otherDataExtent_1 = data.getDataExtent(otherDim); // Nice extent.\n\n        var otherOffset = (otherDataExtent_1[1] - otherDataExtent_1[0]) * 0.3;\n        otherDataExtent_1 = [otherDataExtent_1[0] - otherOffset, otherDataExtent_1[1] + otherOffset];\n        var otherShadowExtent_1 = [0, size[1]];\n        var thisShadowExtent = [0, size[0]];\n        var areaPoints_1 = [[size[0], 0], [0, 0]];\n        var linePoints_1 = [];\n        var step_1 = thisShadowExtent[1] / (data.count() - 1);\n        var thisCoord_1 = 0; // Optimize for large data shadow\n\n        var stride_1 = Math.round(data.count() / size[0]);\n        var lastIsEmpty_1;\n        data.each([otherDim], function (value, index) {\n          if (stride_1 > 0 && index % stride_1) {\n            thisCoord_1 += step_1;\n            return;\n          } // FIXME\n          // Should consider axis.min/axis.max when drawing dataShadow.\n          // FIXME\n          // 应该使用统一的空判断？还是在list里进行空判断？\n\n\n          var isEmpty = value == null || isNaN(value) || value === ''; // See #4235.\n\n          var otherCoord = isEmpty ? 0 : linearMap(value, otherDataExtent_1, otherShadowExtent_1, true); // Attempt to draw data shadow precisely when there are empty value.\n\n          if (isEmpty && !lastIsEmpty_1 && index) {\n            areaPoints_1.push([areaPoints_1[areaPoints_1.length - 1][0], 0]);\n            linePoints_1.push([linePoints_1[linePoints_1.length - 1][0], 0]);\n          } else if (!isEmpty && lastIsEmpty_1) {\n            areaPoints_1.push([thisCoord_1, 0]);\n            linePoints_1.push([thisCoord_1, 0]);\n          }\n\n          areaPoints_1.push([thisCoord_1, otherCoord]);\n          linePoints_1.push([thisCoord_1, otherCoord]);\n          thisCoord_1 += step_1;\n          lastIsEmpty_1 = isEmpty;\n        });\n        polygonPts = this._shadowPolygonPts = areaPoints_1;\n        polylinePts = this._shadowPolylinePts = linePoints_1;\n      }\n\n      this._shadowData = data;\n      this._shadowDim = otherDim;\n      this._shadowSize = [size[0], size[1]];\n      var dataZoomModel = this.dataZoomModel;\n\n      function createDataShadowGroup(isSelectedArea) {\n        var model = dataZoomModel.getModel(isSelectedArea ? 'selectedDataBackground' : 'dataBackground');\n        var group = new Group();\n        var polygon = new Polygon({\n          shape: {\n            points: polygonPts\n          },\n          segmentIgnoreThreshold: 1,\n          style: model.getModel('areaStyle').getAreaStyle(),\n          silent: true,\n          z2: -20\n        });\n        var polyline = new Polyline({\n          shape: {\n            points: polylinePts\n          },\n          segmentIgnoreThreshold: 1,\n          style: model.getModel('lineStyle').getLineStyle(),\n          silent: true,\n          z2: -19\n        });\n        group.add(polygon);\n        group.add(polyline);\n        return group;\n      } // let dataBackgroundModel = dataZoomModel.getModel('dataBackground');\n\n\n      for (var i = 0; i < 3; i++) {\n        var group = createDataShadowGroup(i === 1);\n\n        this._displayables.sliderGroup.add(group);\n\n        this._displayables.dataShadowSegs.push(group);\n      }\n    };\n\n    SliderZoomView.prototype._prepareDataShadowInfo = function () {\n      var dataZoomModel = this.dataZoomModel;\n      var showDataShadow = dataZoomModel.get('showDataShadow');\n\n      if (showDataShadow === false) {\n        return;\n      } // Find a representative series.\n\n\n      var result;\n      var ecModel = this.ecModel;\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        var seriesModels = dataZoomModel.getAxisProxy(axisDim, axisIndex).getTargetSeriesModels();\n        each(seriesModels, function (seriesModel) {\n          if (result) {\n            return;\n          }\n\n          if (showDataShadow !== true && indexOf(SHOW_DATA_SHADOW_SERIES_TYPE, seriesModel.get('type')) < 0) {\n            return;\n          }\n\n          var thisAxis = ecModel.getComponent(getAxisMainType(axisDim), axisIndex).axis;\n          var otherDim = getOtherDim(axisDim);\n          var otherAxisInverse;\n          var coordSys = seriesModel.coordinateSystem;\n\n          if (otherDim != null && coordSys.getOtherAxis) {\n            otherAxisInverse = coordSys.getOtherAxis(thisAxis).inverse;\n          }\n\n          otherDim = seriesModel.getData().mapDimension(otherDim);\n          result = {\n            thisAxis: thisAxis,\n            series: seriesModel,\n            thisDim: axisDim,\n            otherDim: otherDim,\n            otherAxisInverse: otherAxisInverse\n          };\n        }, this);\n      }, this);\n      return result;\n    };\n\n    SliderZoomView.prototype._renderHandle = function () {\n      var thisGroup = this.group;\n      var displayables = this._displayables;\n      var handles = displayables.handles = [null, null];\n      var handleLabels = displayables.handleLabels = [null, null];\n      var sliderGroup = this._displayables.sliderGroup;\n      var size = this._size;\n      var dataZoomModel = this.dataZoomModel;\n      var api = this.api;\n      var borderRadius = dataZoomModel.get('borderRadius') || 0;\n      var brushSelect = dataZoomModel.get('brushSelect');\n      var filler = displayables.filler = new Rect$2({\n        silent: brushSelect,\n        style: {\n          fill: dataZoomModel.get('fillerColor')\n        },\n        textConfig: {\n          position: 'inside'\n        }\n      });\n      sliderGroup.add(filler); // Frame border.\n\n      sliderGroup.add(new Rect$2({\n        silent: true,\n        subPixelOptimize: true,\n        shape: {\n          x: 0,\n          y: 0,\n          width: size[0],\n          height: size[1],\n          r: borderRadius\n        },\n        style: {\n          // deprecated option\n          stroke: dataZoomModel.get('dataBackgroundColor') || dataZoomModel.get('borderColor'),\n          lineWidth: DEFAULT_FRAME_BORDER_WIDTH,\n          fill: 'rgba(0,0,0,0)'\n        }\n      })); // Left and right handle to resize\n\n      each([0, 1], function (handleIndex) {\n        var iconStr = dataZoomModel.get('handleIcon');\n\n        if (!symbolBuildProxies[iconStr] && iconStr.indexOf('path://') < 0 && iconStr.indexOf('image://') < 0) {\n          // Compatitable with the old icon parsers. Which can use a path string without path://\n          iconStr = 'path://' + iconStr;\n          {\n            deprecateLog('handleIcon now needs \\'path://\\' prefix when using a path string');\n          }\n        }\n\n        var path = createSymbol(iconStr, -1, 0, 2, 2, null, true);\n        path.attr({\n          cursor: getCursor(this._orient),\n          draggable: true,\n          drift: bind(this._onDragMove, this, handleIndex),\n          ondragend: bind(this._onDragEnd, this),\n          onmouseover: bind(this._showDataInfo, this, true),\n          onmouseout: bind(this._showDataInfo, this, false),\n          z2: 5\n        });\n        var bRect = path.getBoundingRect();\n        var handleSize = dataZoomModel.get('handleSize');\n        this._handleHeight = parsePercent$1(handleSize, this._size[1]);\n        this._handleWidth = bRect.width / bRect.height * this._handleHeight;\n        path.setStyle(dataZoomModel.getModel('handleStyle').getItemStyle());\n        path.style.strokeNoScale = true;\n        path.rectHover = true;\n        path.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n        enableHoverEmphasis(path);\n        var handleColor = dataZoomModel.get('handleColor'); // deprecated option\n        // Compatitable with previous version\n\n        if (handleColor != null) {\n          path.style.fill = handleColor;\n        }\n\n        sliderGroup.add(handles[handleIndex] = path);\n        var textStyleModel = dataZoomModel.getModel('textStyle');\n        thisGroup.add(handleLabels[handleIndex] = new ZRText({\n          silent: true,\n          invisible: true,\n          style: createTextStyle(textStyleModel, {\n            x: 0,\n            y: 0,\n            text: '',\n            verticalAlign: 'middle',\n            align: 'center',\n            fill: textStyleModel.getTextColor(),\n            font: textStyleModel.getFont()\n          }),\n          z2: 10\n        }));\n      }, this); // Handle to move. Only visible when brushSelect is set true.\n\n      var actualMoveZone = filler;\n\n      if (brushSelect) {\n        var moveHandleHeight = parsePercent$1(dataZoomModel.get('moveHandleSize'), size[1]);\n        var moveHandle_1 = displayables.moveHandle = new Rect({\n          style: dataZoomModel.getModel('moveHandleStyle').getItemStyle(),\n          silent: true,\n          shape: {\n            r: [0, 0, 2, 2],\n            y: size[1] - 0.5,\n            height: moveHandleHeight\n          }\n        });\n        var iconSize = moveHandleHeight * 0.8;\n        var moveHandleIcon = displayables.moveHandleIcon = createSymbol(dataZoomModel.get('moveHandleIcon'), -iconSize / 2, -iconSize / 2, iconSize, iconSize, '#fff', true);\n        moveHandleIcon.silent = true;\n        moveHandleIcon.y = size[1] + moveHandleHeight / 2 - 0.5;\n        moveHandle_1.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'moveHandleStyle']).getItemStyle();\n        var moveZoneExpandSize = Math.min(size[1] / 2, Math.max(moveHandleHeight, 10));\n        actualMoveZone = displayables.moveZone = new Rect({\n          invisible: true,\n          shape: {\n            y: size[1] - moveZoneExpandSize,\n            height: moveHandleHeight + moveZoneExpandSize\n          }\n        });\n        actualMoveZone.on('mouseover', function () {\n          api.enterEmphasis(moveHandle_1);\n        }).on('mouseout', function () {\n          api.leaveEmphasis(moveHandle_1);\n        });\n        sliderGroup.add(moveHandle_1);\n        sliderGroup.add(moveHandleIcon);\n        sliderGroup.add(actualMoveZone);\n      }\n\n      actualMoveZone.attr({\n        draggable: true,\n        cursor: getCursor(this._orient),\n        drift: bind(this._onDragMove, this, 'all'),\n        ondragstart: bind(this._showDataInfo, this, true),\n        ondragend: bind(this._onDragEnd, this),\n        onmouseover: bind(this._showDataInfo, this, true),\n        onmouseout: bind(this._showDataInfo, this, false)\n      });\n    };\n\n    SliderZoomView.prototype._resetInterval = function () {\n      var range = this._range = this.dataZoomModel.getPercentRange();\n\n      var viewExtent = this._getViewExtent();\n\n      this._handleEnds = [linearMap(range[0], [0, 100], viewExtent, true), linearMap(range[1], [0, 100], viewExtent, true)];\n    };\n\n    SliderZoomView.prototype._updateInterval = function (handleIndex, delta) {\n      var dataZoomModel = this.dataZoomModel;\n      var handleEnds = this._handleEnds;\n\n      var viewExtend = this._getViewExtent();\n\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n      var percentExtent = [0, 100];\n      sliderMove(delta, handleEnds, viewExtend, dataZoomModel.get('zoomLock') ? 'all' : handleIndex, minMaxSpan.minSpan != null ? linearMap(minMaxSpan.minSpan, percentExtent, viewExtend, true) : null, minMaxSpan.maxSpan != null ? linearMap(minMaxSpan.maxSpan, percentExtent, viewExtend, true) : null);\n      var lastRange = this._range;\n      var range = this._range = asc([linearMap(handleEnds[0], viewExtend, percentExtent, true), linearMap(handleEnds[1], viewExtend, percentExtent, true)]);\n      return !lastRange || lastRange[0] !== range[0] || lastRange[1] !== range[1];\n    };\n\n    SliderZoomView.prototype._updateView = function (nonRealtime) {\n      var displaybles = this._displayables;\n      var handleEnds = this._handleEnds;\n      var handleInterval = asc(handleEnds.slice());\n      var size = this._size;\n      each([0, 1], function (handleIndex) {\n        // Handles\n        var handle = displaybles.handles[handleIndex];\n        var handleHeight = this._handleHeight;\n        handle.attr({\n          scaleX: handleHeight / 2,\n          scaleY: handleHeight / 2,\n          // This is a trick, by adding an extra tiny offset to let the default handle's end point align to the drag window.\n          // NOTE: It may affect some custom shapes a bit. But we prefer to have better result by default.\n          x: handleEnds[handleIndex] + (handleIndex ? -1 : 1),\n          y: size[1] / 2 - handleHeight / 2\n        });\n      }, this); // Filler\n\n      displaybles.filler.setShape({\n        x: handleInterval[0],\n        y: 0,\n        width: handleInterval[1] - handleInterval[0],\n        height: size[1]\n      });\n      var viewExtent = {\n        x: handleInterval[0],\n        width: handleInterval[1] - handleInterval[0]\n      }; // Move handle\n\n      if (displaybles.moveHandle) {\n        displaybles.moveHandle.setShape(viewExtent);\n        displaybles.moveZone.setShape(viewExtent); // Force update path on the invisible object\n\n        displaybles.moveZone.getBoundingRect();\n        displaybles.moveHandleIcon && displaybles.moveHandleIcon.attr('x', viewExtent.x + viewExtent.width / 2);\n      } // update clip path of shadow.\n\n\n      var dataShadowSegs = displaybles.dataShadowSegs;\n      var segIntervals = [0, handleInterval[0], handleInterval[1], size[0]];\n\n      for (var i = 0; i < dataShadowSegs.length; i++) {\n        var segGroup = dataShadowSegs[i];\n        var clipPath = segGroup.getClipPath();\n\n        if (!clipPath) {\n          clipPath = new Rect();\n          segGroup.setClipPath(clipPath);\n        }\n\n        clipPath.setShape({\n          x: segIntervals[i],\n          y: 0,\n          width: segIntervals[i + 1] - segIntervals[i],\n          height: size[1]\n        });\n      }\n\n      this._updateDataInfo(nonRealtime);\n    };\n\n    SliderZoomView.prototype._updateDataInfo = function (nonRealtime) {\n      var dataZoomModel = this.dataZoomModel;\n      var displaybles = this._displayables;\n      var handleLabels = displaybles.handleLabels;\n      var orient = this._orient;\n      var labelTexts = ['', '']; // FIXME\n      // date型，支持formatter，autoformatter（ec2 date.getAutoFormatter）\n\n      if (dataZoomModel.get('showDetail')) {\n        var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n\n        if (axisProxy) {\n          var axis = axisProxy.getAxisModel().axis;\n          var range = this._range;\n          var dataInterval = nonRealtime // See #4434, data and axis are not processed and reset yet in non-realtime mode.\n          ? axisProxy.calculateDataWindow({\n            start: range[0],\n            end: range[1]\n          }).valueWindow : axisProxy.getDataValueWindow();\n          labelTexts = [this._formatLabel(dataInterval[0], axis), this._formatLabel(dataInterval[1], axis)];\n        }\n      }\n\n      var orderedHandleEnds = asc(this._handleEnds.slice());\n      setLabel.call(this, 0);\n      setLabel.call(this, 1);\n\n      function setLabel(handleIndex) {\n        // Label\n        // Text should not transform by barGroup.\n        // Ignore handlers transform\n        var barTransform = getTransform(displaybles.handles[handleIndex].parent, this.group);\n        var direction = transformDirection(handleIndex === 0 ? 'right' : 'left', barTransform);\n        var offset = this._handleWidth / 2 + LABEL_GAP;\n        var textPoint = applyTransform$1([orderedHandleEnds[handleIndex] + (handleIndex === 0 ? -offset : offset), this._size[1] / 2], barTransform);\n        handleLabels[handleIndex].setStyle({\n          x: textPoint[0],\n          y: textPoint[1],\n          verticalAlign: orient === HORIZONTAL ? 'middle' : direction,\n          align: orient === HORIZONTAL ? direction : 'center',\n          text: labelTexts[handleIndex]\n        });\n      }\n    };\n\n    SliderZoomView.prototype._formatLabel = function (value, axis) {\n      var dataZoomModel = this.dataZoomModel;\n      var labelFormatter = dataZoomModel.get('labelFormatter');\n      var labelPrecision = dataZoomModel.get('labelPrecision');\n\n      if (labelPrecision == null || labelPrecision === 'auto') {\n        labelPrecision = axis.getPixelPrecision();\n      }\n\n      var valueStr = value == null || isNaN(value) ? '' // FIXME Glue code\n      : axis.type === 'category' || axis.type === 'time' ? axis.scale.getLabel({\n        value: Math.round(value)\n      }) // param of toFixed should less then 20.\n      : value.toFixed(Math.min(labelPrecision, 20));\n      return isFunction(labelFormatter) ? labelFormatter(value, valueStr) : isString(labelFormatter) ? labelFormatter.replace('{value}', valueStr) : valueStr;\n    };\n    /**\n     * @param showOrHide true: show, false: hide\n     */\n\n\n    SliderZoomView.prototype._showDataInfo = function (showOrHide) {\n      // Always show when drgging.\n      showOrHide = this._dragging || showOrHide;\n      var displayables = this._displayables;\n      var handleLabels = displayables.handleLabels;\n      handleLabels[0].attr('invisible', !showOrHide);\n      handleLabels[1].attr('invisible', !showOrHide); // Highlight move handle\n\n      displayables.moveHandle && this.api[showOrHide ? 'enterEmphasis' : 'leaveEmphasis'](displayables.moveHandle, 1);\n    };\n\n    SliderZoomView.prototype._onDragMove = function (handleIndex, dx, dy, event) {\n      this._dragging = true; // For mobile device, prevent screen slider on the button.\n\n      stop(event.event); // Transform dx, dy to bar coordination.\n\n      var barTransform = this._displayables.sliderGroup.getLocalTransform();\n\n      var vertex = applyTransform$1([dx, dy], barTransform, true);\n\n      var changed = this._updateInterval(handleIndex, vertex[0]);\n\n      var realtime = this.dataZoomModel.get('realtime');\n\n      this._updateView(!realtime); // Avoid dispatch dataZoom repeatly but range not changed,\n      // which cause bad visual effect when progressive enabled.\n\n\n      changed && realtime && this._dispatchZoomAction(true);\n    };\n\n    SliderZoomView.prototype._onDragEnd = function () {\n      this._dragging = false;\n\n      this._showDataInfo(false); // While in realtime mode and stream mode, dispatch action when\n      // drag end will cause the whole view rerender, which is unnecessary.\n\n\n      var realtime = this.dataZoomModel.get('realtime');\n      !realtime && this._dispatchZoomAction(false);\n    };\n\n    SliderZoomView.prototype._onClickPanel = function (e) {\n      var size = this._size;\n\n      var localPoint = this._displayables.sliderGroup.transformCoordToLocal(e.offsetX, e.offsetY);\n\n      if (localPoint[0] < 0 || localPoint[0] > size[0] || localPoint[1] < 0 || localPoint[1] > size[1]) {\n        return;\n      }\n\n      var handleEnds = this._handleEnds;\n      var center = (handleEnds[0] + handleEnds[1]) / 2;\n\n      var changed = this._updateInterval('all', localPoint[0] - center);\n\n      this._updateView();\n\n      changed && this._dispatchZoomAction(false);\n    };\n\n    SliderZoomView.prototype._onBrushStart = function (e) {\n      var x = e.offsetX;\n      var y = e.offsetY;\n      this._brushStart = new Point(x, y);\n      this._brushing = true;\n      this._brushStartTime = +new Date(); // this._updateBrushRect(x, y);\n    };\n\n    SliderZoomView.prototype._onBrushEnd = function (e) {\n      if (!this._brushing) {\n        return;\n      }\n\n      var brushRect = this._displayables.brushRect;\n      this._brushing = false;\n\n      if (!brushRect) {\n        return;\n      }\n\n      brushRect.attr('ignore', true);\n      var brushShape = brushRect.shape;\n      var brushEndTime = +new Date(); // console.log(brushEndTime - this._brushStartTime);\n\n      if (brushEndTime - this._brushStartTime < 200 && Math.abs(brushShape.width) < 5) {\n        // Will treat it as a click\n        return;\n      }\n\n      var viewExtend = this._getViewExtent();\n\n      var percentExtent = [0, 100];\n      this._range = asc([linearMap(brushShape.x, viewExtend, percentExtent, true), linearMap(brushShape.x + brushShape.width, viewExtend, percentExtent, true)]);\n      this._handleEnds = [brushShape.x, brushShape.x + brushShape.width];\n\n      this._updateView();\n\n      this._dispatchZoomAction(false);\n    };\n\n    SliderZoomView.prototype._onBrush = function (e) {\n      if (this._brushing) {\n        // For mobile device, prevent screen slider on the button.\n        stop(e.event);\n\n        this._updateBrushRect(e.offsetX, e.offsetY);\n      }\n    };\n\n    SliderZoomView.prototype._updateBrushRect = function (mouseX, mouseY) {\n      var displayables = this._displayables;\n      var dataZoomModel = this.dataZoomModel;\n      var brushRect = displayables.brushRect;\n\n      if (!brushRect) {\n        brushRect = displayables.brushRect = new Rect$2({\n          silent: true,\n          style: dataZoomModel.getModel('brushStyle').getItemStyle()\n        });\n        displayables.sliderGroup.add(brushRect);\n      }\n\n      brushRect.attr('ignore', false);\n      var brushStart = this._brushStart;\n      var sliderGroup = this._displayables.sliderGroup;\n      var endPoint = sliderGroup.transformCoordToLocal(mouseX, mouseY);\n      var startPoint = sliderGroup.transformCoordToLocal(brushStart.x, brushStart.y);\n      var size = this._size;\n      endPoint[0] = Math.max(Math.min(size[0], endPoint[0]), 0);\n      brushRect.setShape({\n        x: startPoint[0],\n        y: 0,\n        width: endPoint[0] - startPoint[0],\n        height: size[1]\n      });\n    };\n    /**\n     * This action will be throttled.\n     */\n\n\n    SliderZoomView.prototype._dispatchZoomAction = function (realtime) {\n      var range = this._range;\n      this.api.dispatchAction({\n        type: 'dataZoom',\n        from: this.uid,\n        dataZoomId: this.dataZoomModel.id,\n        animation: realtime ? REALTIME_ANIMATION_CONFIG : null,\n        start: range[0],\n        end: range[1]\n      });\n    };\n\n    SliderZoomView.prototype._findCoordRect = function () {\n      // Find the grid coresponding to the first axis referred by dataZoom.\n      var rect;\n      var coordSysInfoList = collectReferCoordSysModelInfo(this.dataZoomModel).infoList;\n\n      if (!rect && coordSysInfoList.length) {\n        var coordSys = coordSysInfoList[0].model.coordinateSystem;\n        rect = coordSys.getRect && coordSys.getRect();\n      }\n\n      if (!rect) {\n        var width = this.api.getWidth();\n        var height = this.api.getHeight();\n        rect = {\n          x: width * 0.2,\n          y: height * 0.2,\n          width: width * 0.6,\n          height: height * 0.6\n        };\n      }\n\n      return rect;\n    };\n\n    SliderZoomView.type = 'dataZoom.slider';\n    return SliderZoomView;\n  }(DataZoomView);\n\n  function getOtherDim(thisDim) {\n    // FIXME\n    // 这个逻辑和getOtherAxis里一致，但是写在这里是否不好\n    var map$$1 = {\n      x: 'y',\n      y: 'x',\n      radius: 'angle',\n      angle: 'radius'\n    };\n    return map$$1[thisDim];\n  }\n\n  function getCursor(orient) {\n    return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$14(registers) {\n    registers.registerComponentModel(SliderZoomModel);\n    registers.registerComponentView(SliderZoomView);\n    installCommon(registers);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$12(registers) {\n    use(install$13);\n    use(install$14); // Do not install './dataZoomSelect',\n    // since it only work for toolbox dataZoom.\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  use(install$12);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var SelectDataZoomModel =\n  /** @class */\n  function (_super) {\n    __extends(SelectDataZoomModel, _super);\n\n    function SelectDataZoomModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = SelectDataZoomModel.type;\n      return _this;\n    }\n\n    SelectDataZoomModel.type = 'dataZoom.select';\n    return SelectDataZoomModel;\n  }(DataZoomModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var SelectDataZoomView =\n  /** @class */\n  function (_super) {\n    __extends(SelectDataZoomView, _super);\n\n    function SelectDataZoomView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = SelectDataZoomView.type;\n      return _this;\n    }\n\n    SelectDataZoomView.type = 'dataZoom.select';\n    return SelectDataZoomView;\n  }(DataZoomView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$16(registers) {\n    registers.registerComponentModel(SelectDataZoomModel);\n    registers.registerComponentView(SelectDataZoomView);\n    installCommon(registers);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n\n  var ToolboxFeature =\n  /** @class */\n  function () {\n    function ToolboxFeature() {}\n\n    return ToolboxFeature;\n  }();\n\n  var features = {};\n\n  function registerFeature(name, ctor) {\n    features[name] = ctor;\n  }\n\n  function getFeature(name) {\n    return features[name];\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var ToolboxModel =\n  /** @class */\n  function (_super) {\n    __extends(ToolboxModel, _super);\n\n    function ToolboxModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = ToolboxModel.type;\n      return _this;\n    }\n\n    ToolboxModel.prototype.optionUpdated = function () {\n      _super.prototype.optionUpdated.apply(this, arguments);\n\n      var ecModel = this.ecModel;\n      each(this.option.feature, function (featureOpt, featureName) {\n        var Feature = getFeature(featureName);\n\n        if (Feature) {\n          if (Feature.getDefaultOption) {\n            Feature.defaultOption = Feature.getDefaultOption(ecModel);\n          }\n\n          merge(featureOpt, Feature.defaultOption);\n        }\n      });\n    };\n\n    ToolboxModel.type = 'toolbox';\n    ToolboxModel.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    ToolboxModel.defaultOption = {\n      show: true,\n      z: 6,\n      // zlevel: 0,\n      orient: 'horizontal',\n      left: 'right',\n      top: 'top',\n      // right\n      // bottom\n      backgroundColor: 'transparent',\n      borderColor: '#ccc',\n      borderRadius: 0,\n      borderWidth: 0,\n      padding: 5,\n      itemSize: 15,\n      itemGap: 8,\n      showTitle: true,\n      iconStyle: {\n        borderColor: '#666',\n        color: 'none'\n      },\n      emphasis: {\n        iconStyle: {\n          borderColor: '#3E98C5'\n        }\n      },\n      // textStyle: {},\n      // feature\n      tooltip: {\n        show: false,\n        position: 'bottom'\n      }\n    };\n    return ToolboxModel;\n  }(ComponentModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var ToolboxView =\n  /** @class */\n  function (_super) {\n    __extends(ToolboxView, _super);\n\n    function ToolboxView() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n      var group = this.group;\n      group.removeAll();\n\n      if (!toolboxModel.get('show')) {\n        return;\n      }\n\n      var itemSize = +toolboxModel.get('itemSize');\n      var isVertical = toolboxModel.get('orient') === 'vertical';\n      var featureOpts = toolboxModel.get('feature') || {};\n      var features = this._features || (this._features = {});\n      var featureNames = [];\n      each(featureOpts, function (opt, name) {\n        featureNames.push(name);\n      });\n      new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(curry(processFeature, null)).execute(); // Keep for diff.\n\n      this._featureNames = featureNames;\n\n      function processFeature(newIndex, oldIndex) {\n        var featureName = featureNames[newIndex];\n        var oldName = featureNames[oldIndex];\n        var featureOpt = featureOpts[featureName];\n        var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n        var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n        if (payload && payload.newTitle != null && payload.featureName === featureName) {\n          featureOpt.title = payload.newTitle;\n        }\n\n        if (featureName && !oldName) {\n          // Create\n          if (isUserFeatureName(featureName)) {\n            feature = {\n              onclick: featureModel.option.onclick,\n              featureName: featureName\n            };\n          } else {\n            var Feature = getFeature(featureName);\n\n            if (!Feature) {\n              return;\n            }\n\n            feature = new Feature();\n          }\n\n          features[featureName] = feature;\n        } else {\n          feature = features[oldName]; // If feature does not exsit.\n\n          if (!feature) {\n            return;\n          }\n        }\n\n        feature.uid = getUID('toolbox-feature');\n        feature.model = featureModel;\n        feature.ecModel = ecModel;\n        feature.api = api;\n        var isToolboxFeature = feature instanceof ToolboxFeature;\n\n        if (!featureName && oldName) {\n          isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n          return;\n        }\n\n        if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n          isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n          return;\n        }\n\n        createIconPaths(featureModel, feature, featureName);\n\n        featureModel.setIconStatus = function (iconName, status) {\n          var option = this.option;\n          var iconPaths = this.iconPaths;\n          option.iconStatus = option.iconStatus || {};\n          option.iconStatus[iconName] = status;\n\n          if (iconPaths[iconName]) {\n            (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n          }\n        };\n\n        if (feature instanceof ToolboxFeature) {\n          if (feature.render) {\n            feature.render(featureModel, ecModel, api, payload);\n          }\n        }\n      }\n\n      function createIconPaths(featureModel, feature, featureName) {\n        var iconStyleModel = featureModel.getModel('iconStyle');\n        var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']); // If one feature has mutiple icon. they are orginaized as\n        // {\n        //     icon: {\n        //         foo: '',\n        //         bar: ''\n        //     },\n        //     title: {\n        //         foo: '',\n        //         bar: ''\n        //     }\n        // }\n\n        var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n        var titles = featureModel.get('title') || {};\n        var iconsMap;\n        var titlesMap;\n\n        if (isString(icons)) {\n          iconsMap = {};\n          iconsMap[featureName] = icons;\n        } else {\n          iconsMap = icons;\n        }\n\n        if (isString(titles)) {\n          titlesMap = {};\n          titlesMap[featureName] = titles;\n        } else {\n          titlesMap = titles;\n        }\n\n        var iconPaths = featureModel.iconPaths = {};\n        each(iconsMap, function (iconStr, iconName) {\n          var path = createIcon(iconStr, {}, {\n            x: -itemSize / 2,\n            y: -itemSize / 2,\n            width: itemSize,\n            height: itemSize\n          }); // TODO handling image\n\n          path.setStyle(iconStyleModel.getItemStyle());\n          var pathEmphasisState = path.ensureState('emphasis');\n          pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n          var textContent = new ZRText({\n            style: {\n              text: titlesMap[iconName],\n              align: iconStyleEmphasisModel.get('textAlign'),\n              borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n              padding: iconStyleEmphasisModel.get('textPadding'),\n              fill: null\n            },\n            ignore: true\n          });\n          path.setTextContent(textContent);\n          setTooltipConfig({\n            el: path,\n            componentModel: toolboxModel,\n            itemName: iconName,\n            formatterParamsExtra: {\n              title: titlesMap[iconName]\n            }\n          });\n          path.__title = titlesMap[iconName];\n          path.on('mouseover', function () {\n            // Should not reuse above hoverStyle, which might be modified.\n            var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n            var defaultTextPosition = isVertical ? toolboxModel.get('right') == null && toolboxModel.get('left') !== 'right' ? 'right' : 'left' : toolboxModel.get('bottom') == null && toolboxModel.get('top') !== 'bottom' ? 'bottom' : 'top';\n            textContent.setStyle({\n              fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n              backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n            });\n            path.setTextConfig({\n              position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n            });\n            textContent.ignore = !toolboxModel.get('showTitle'); // Use enterEmphasis and leaveEmphasis provide by ec.\n            // There are flags managed by the echarts.\n\n            api.enterEmphasis(this);\n          }).on('mouseout', function () {\n            if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n              api.leaveEmphasis(this);\n            }\n\n            textContent.hide();\n          });\n          (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n          group.add(path);\n          path.on('click', bind(feature.onclick, feature, ecModel, api, iconName));\n          iconPaths[iconName] = path;\n        });\n      }\n\n      layout$2(group, toolboxModel, api); // Render background after group is layout\n      // FIXME\n\n      group.add(makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n      isVertical || group.eachChild(function (icon) {\n        var titleText = icon.__title; // const hoverStyle = icon.hoverStyle;\n        // TODO simplify code?\n\n        var emphasisState = icon.ensureState('emphasis');\n        var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n        var textContent = icon.getTextContent();\n        var emphasisTextState = textContent && textContent.ensureState('emphasis'); // May be background element\n\n        if (emphasisTextState && !isFunction(emphasisTextState) && titleText) {\n          var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n          var rect = getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n          var offsetX = icon.x + group.x;\n          var offsetY = icon.y + group.y + itemSize;\n          var needPutOnTop = false;\n\n          if (offsetY + rect.height > api.getHeight()) {\n            emphasisTextConfig.position = 'top';\n            needPutOnTop = true;\n          }\n\n          var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 10;\n\n          if (offsetX + rect.width / 2 > api.getWidth()) {\n            emphasisTextConfig.position = ['100%', topOffset];\n            emphasisTextStyle.align = 'right';\n          } else if (offsetX - rect.width / 2 < 0) {\n            emphasisTextConfig.position = [0, topOffset];\n            emphasisTextStyle.align = 'left';\n          }\n        }\n      });\n    };\n\n    ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n      each(this._features, function (feature) {\n        feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n      });\n    }; // updateLayout(toolboxModel, ecModel, api, payload) {\n    //     zrUtil.each(this._features, function (feature) {\n    //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n    //     });\n    // },\n\n\n    ToolboxView.prototype.remove = function (ecModel, api) {\n      each(this._features, function (feature) {\n        feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n      });\n      this.group.removeAll();\n    };\n\n    ToolboxView.prototype.dispose = function (ecModel, api) {\n      each(this._features, function (feature) {\n        feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n      });\n    };\n\n    ToolboxView.type = 'toolbox';\n    return ToolboxView;\n  }(ComponentView);\n\n  function isUserFeatureName(featureName) {\n    return featureName.indexOf('my') === 0;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /* global Uint8Array, document */\n\n  /* global window, document */\n\n\n  var SaveAsImage =\n  /** @class */\n  function (_super) {\n    __extends(SaveAsImage, _super);\n\n    function SaveAsImage() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    SaveAsImage.prototype.onclick = function (ecModel, api) {\n      var model = this.model;\n      var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n      var isSvg = api.getZr().painter.getType() === 'svg';\n      var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n      var url = api.getConnectedDataURL({\n        type: type,\n        backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n        connectedBackgroundColor: model.get('connectedBackgroundColor'),\n        excludeComponents: model.get('excludeComponents'),\n        pixelRatio: model.get('pixelRatio')\n      });\n      var browser = env.browser; // Chrome, Firefox, New Edge\n\n      if (isFunction(MouseEvent) && (browser.newEdge || !browser.ie && !browser.edge)) {\n        var $a = document.createElement('a');\n        $a.download = title + '.' + type;\n        $a.target = '_blank';\n        $a.href = url;\n        var evt = new MouseEvent('click', {\n          // some micro front-end framework， window maybe is a Proxy\n          view: document.defaultView,\n          bubbles: true,\n          cancelable: false\n        });\n        $a.dispatchEvent(evt);\n      } // IE or old Edge\n      else {\n          // @ts-ignore\n          if (window.navigator.msSaveOrOpenBlob || isSvg) {\n            var parts = url.split(','); // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\n            var base64Encoded = parts[0].indexOf('base64') > -1;\n            var bstr = isSvg // should decode the svg data uri first\n            ? decodeURIComponent(parts[1]) : parts[1]; // only `atob` when the data uri is encoded with base64\n            // otherwise, like `svg` data uri exported by zrender,\n            // there will be an error, for it's not encoded with base64.\n            // (just a url-encoded string through `encodeURIComponent`)\n\n            base64Encoded && (bstr = window.atob(bstr));\n            var filename = title + '.' + type; // @ts-ignore\n\n            if (window.navigator.msSaveOrOpenBlob) {\n              var n = bstr.length;\n              var u8arr = new Uint8Array(n);\n\n              while (n--) {\n                u8arr[n] = bstr.charCodeAt(n);\n              }\n\n              var blob = new Blob([u8arr]); // @ts-ignore\n\n              window.navigator.msSaveOrOpenBlob(blob, filename);\n            } else {\n              var frame = document.createElement('iframe');\n              document.body.appendChild(frame);\n              var cw = frame.contentWindow;\n              var doc = cw.document;\n              doc.open('image/svg+xml', 'replace');\n              doc.write(bstr);\n              doc.close();\n              cw.focus();\n              doc.execCommand('SaveAs', true, filename);\n              document.body.removeChild(frame);\n            }\n          } else {\n            var lang = model.get('lang');\n            var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n            var tab = window.open();\n            tab.document.write(html);\n            tab.document.title = title;\n          }\n        }\n    };\n\n    SaveAsImage.getDefaultOption = function (ecModel) {\n      var defaultOption = {\n        show: true,\n        icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n        title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n        type: 'png',\n        // Default use option.backgroundColor\n        // backgroundColor: '#fff',\n        connectedBackgroundColor: '#fff',\n        name: '',\n        excludeComponents: ['toolbox'],\n        // use current pixel ratio of device by default\n        // pixelRatio: 1,\n        lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n      };\n      return defaultOption;\n    };\n\n    return SaveAsImage;\n  }(ToolboxFeature);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var INNER_STACK_KEYWORD = '__ec_magicType_stack__';\n  var radioTypes = [['line', 'bar'], ['stack']];\n\n  var MagicType =\n  /** @class */\n  function (_super) {\n    __extends(MagicType, _super);\n\n    function MagicType() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    MagicType.prototype.getIcons = function () {\n      var model = this.model;\n      var availableIcons = model.get('icon');\n      var icons = {};\n      each(model.get('type'), function (type) {\n        if (availableIcons[type]) {\n          icons[type] = availableIcons[type];\n        }\n      });\n      return icons;\n    };\n\n    MagicType.getDefaultOption = function (ecModel) {\n      var defaultOption = {\n        show: true,\n        type: [],\n        // Icon group\n        icon: {\n          line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n          bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n          // eslint-disable-next-line\n          stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n\n        },\n        // `line`, `bar`, `stack`, `tiled`\n        title: ecModel.getLocaleModel().get(['toolbox', 'magicType', 'title']),\n        option: {},\n        seriesIndex: {}\n      };\n      return defaultOption;\n    };\n\n    MagicType.prototype.onclick = function (ecModel, api, type) {\n      var model = this.model;\n      var seriesIndex = model.get(['seriesIndex', type]); // Not supported magicType\n\n      if (!seriesOptGenreator[type]) {\n        return;\n      }\n\n      var newOption = {\n        series: []\n      };\n\n      var generateNewSeriesTypes = function (seriesModel) {\n        var seriesType = seriesModel.subType;\n        var seriesId = seriesModel.id;\n        var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n\n        if (newSeriesOpt) {\n          // PENDING If merge original option?\n          defaults(newSeriesOpt, seriesModel.option);\n          newOption.series.push(newSeriesOpt);\n        } // Modify boundaryGap\n\n\n        var coordSys = seriesModel.coordinateSystem;\n\n        if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n          var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n          if (categoryAxis) {\n            var axisDim = categoryAxis.dim;\n            var axisType = axisDim + 'Axis';\n            var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n            var axisIndex = axisModel.componentIndex;\n            newOption[axisType] = newOption[axisType] || [];\n\n            for (var i = 0; i <= axisIndex; i++) {\n              newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n            }\n\n            newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n          }\n        }\n      };\n\n      each(radioTypes, function (radio) {\n        if (indexOf(radio, type) >= 0) {\n          each(radio, function (item) {\n            model.setIconStatus(item, 'normal');\n          });\n        }\n      });\n      model.setIconStatus(type, 'emphasis');\n      ecModel.eachComponent({\n        mainType: 'series',\n        query: seriesIndex == null ? null : {\n          seriesIndex: seriesIndex\n        }\n      }, generateNewSeriesTypes);\n      var newTitle;\n      var currentType = type; // Change title of stack\n\n      if (type === 'stack') {\n        // use titles in model instead of ecModel\n        // as stack and tiled appears in pair, just flip them\n        // no need of checking stack state\n        newTitle = merge({\n          stack: model.option.title.tiled,\n          tiled: model.option.title.stack\n        }, model.option.title);\n\n        if (model.get(['iconStatus', type]) !== 'emphasis') {\n          currentType = 'tiled';\n        }\n      }\n\n      api.dispatchAction({\n        type: 'changeMagicType',\n        currentType: currentType,\n        newOption: newOption,\n        newTitle: newTitle,\n        featureName: 'magicType'\n      });\n    };\n\n    return MagicType;\n  }(ToolboxFeature);\n\n  var seriesOptGenreator = {\n    'line': function (seriesType, seriesId, seriesModel, model) {\n      if (seriesType === 'bar') {\n        return merge({\n          id: seriesId,\n          type: 'line',\n          // Preserve data related option\n          data: seriesModel.get('data'),\n          stack: seriesModel.get('stack'),\n          markPoint: seriesModel.get('markPoint'),\n          markLine: seriesModel.get('markLine')\n        }, model.get(['option', 'line']) || {}, true);\n      }\n    },\n    'bar': function (seriesType, seriesId, seriesModel, model) {\n      if (seriesType === 'line') {\n        return merge({\n          id: seriesId,\n          type: 'bar',\n          // Preserve data related option\n          data: seriesModel.get('data'),\n          stack: seriesModel.get('stack'),\n          markPoint: seriesModel.get('markPoint'),\n          markLine: seriesModel.get('markLine')\n        }, model.get(['option', 'bar']) || {}, true);\n      }\n    },\n    'stack': function (seriesType, seriesId, seriesModel, model) {\n      var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n\n      if (seriesType === 'line' || seriesType === 'bar') {\n        model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n        return merge({\n          id: seriesId,\n          stack: isStack ? '' : INNER_STACK_KEYWORD\n        }, model.get(['option', 'stack']) || {}, true);\n      }\n    }\n  }; // TODO: SELF REGISTERED.\n\n  registerAction({\n    type: 'changeMagicType',\n    event: 'magicTypeChanged',\n    update: 'prepareAndUpdate'\n  }, function (payload, ecModel) {\n    ecModel.mergeOption(payload.newOption);\n  });\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /* global document */\n\n  /* global document */\n\n  var BLOCK_SPLITER = new Array(60).join('-');\n  var ITEM_SPLITER = '\\t';\n  /**\n   * Group series into two types\n   *  1. on category axis, like line, bar\n   *  2. others, like scatter, pie\n   */\n\n  function groupSeries(ecModel) {\n    var seriesGroupByCategoryAxis = {};\n    var otherSeries = [];\n    var meta = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n\n      if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n        // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n        var baseAxis = coordSys.getBaseAxis();\n\n        if (baseAxis.type === 'category') {\n          var key = baseAxis.dim + '_' + baseAxis.index;\n\n          if (!seriesGroupByCategoryAxis[key]) {\n            seriesGroupByCategoryAxis[key] = {\n              categoryAxis: baseAxis,\n              valueAxis: coordSys.getOtherAxis(baseAxis),\n              series: []\n            };\n            meta.push({\n              axisDim: baseAxis.dim,\n              axisIndex: baseAxis.index\n            });\n          }\n\n          seriesGroupByCategoryAxis[key].series.push(seriesModel);\n        } else {\n          otherSeries.push(seriesModel);\n        }\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    });\n    return {\n      seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n      other: otherSeries,\n      meta: meta\n    };\n  }\n  /**\n   * Assemble content of series on cateogory axis\n   * @inner\n   */\n\n\n  function assembleSeriesWithCategoryAxis(groups) {\n    var tables = [];\n    each(groups, function (group, key) {\n      var categoryAxis = group.categoryAxis;\n      var valueAxis = group.valueAxis;\n      var valueAxisDim = valueAxis.dim;\n      var headers = [' '].concat(map(group.series, function (series) {\n        return series.name;\n      })); // @ts-ignore TODO Polar\n\n      var columns = [categoryAxis.model.getCategories()];\n      each(group.series, function (series) {\n        var rawData = series.getRawData();\n        columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n          return val;\n        }));\n      }); // Assemble table content\n\n      var lines = [headers.join(ITEM_SPLITER)];\n\n      for (var i = 0; i < columns[0].length; i++) {\n        var items = [];\n\n        for (var j = 0; j < columns.length; j++) {\n          items.push(columns[j][i]);\n        }\n\n        lines.push(items.join(ITEM_SPLITER));\n      }\n\n      tables.push(lines.join('\\n'));\n    });\n    return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n  }\n  /**\n   * Assemble content of other series\n   */\n\n\n  function assembleOtherSeries(series) {\n    return map(series, function (series) {\n      var data = series.getRawData();\n      var lines = [series.name];\n      var vals = [];\n      data.each(data.dimensions, function () {\n        var argLen = arguments.length;\n        var dataIndex = arguments[argLen - 1];\n        var name = data.getName(dataIndex);\n\n        for (var i = 0; i < argLen - 1; i++) {\n          vals[i] = arguments[i];\n        }\n\n        lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n      });\n      return lines.join('\\n');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n  }\n\n  function getContentFromModel(ecModel) {\n    var result = groupSeries(ecModel);\n    return {\n      value: filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n        return !!str.replace(/[\\n\\t\\s]/g, '');\n      }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n      meta: result.meta\n    };\n  }\n\n  function trim$1(str) {\n    return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n  }\n  /**\n   * If a block is tsv format\n   */\n\n\n  function isTSVFormat(block) {\n    // Simple method to find out if a block is tsv format\n    var firstLine = block.slice(0, block.indexOf('\\n'));\n\n    if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n      return true;\n    }\n  }\n\n  var itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n  /**\n   * @param {string} tsv\n   * @return {Object}\n   */\n\n  function parseTSVContents(tsv) {\n    var tsvLines = tsv.split(/\\n+/g);\n    var headers = trim$1(tsvLines.shift()).split(itemSplitRegex);\n    var categories = [];\n    var series = map(headers, function (header) {\n      return {\n        name: header,\n        data: []\n      };\n    });\n\n    for (var i = 0; i < tsvLines.length; i++) {\n      var items = trim$1(tsvLines[i]).split(itemSplitRegex);\n      categories.push(items.shift());\n\n      for (var j = 0; j < items.length; j++) {\n        series[j] && (series[j].data[i] = items[j]);\n      }\n    }\n\n    return {\n      series: series,\n      categories: categories\n    };\n  }\n\n  function parseListContents(str) {\n    var lines = str.split(/\\n+/g);\n    var seriesName = trim$1(lines.shift());\n    var data = [];\n\n    for (var i = 0; i < lines.length; i++) {\n      // if line is empty, ignore it.\n      // there is a case that a user forgot to delete `\\n`.\n      var line = trim$1(lines[i]);\n\n      if (!line) {\n        continue;\n      }\n\n      var items = line.split(itemSplitRegex);\n      var name_1 = '';\n      var value = void 0;\n      var hasName = false;\n\n      if (isNaN(items[0])) {\n        // First item is name\n        hasName = true;\n        name_1 = items[0];\n        items = items.slice(1);\n        data[i] = {\n          name: name_1,\n          value: []\n        };\n        value = data[i].value;\n      } else {\n        value = data[i] = [];\n      }\n\n      for (var j = 0; j < items.length; j++) {\n        value.push(+items[j]);\n      }\n\n      if (value.length === 1) {\n        hasName ? data[i].value = value[0] : data[i] = value[0];\n      }\n    }\n\n    return {\n      name: seriesName,\n      data: data\n    };\n  }\n\n  function parseContents(str, blockMetaList) {\n    var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n    var newOption = {\n      series: []\n    };\n    each(blocks, function (block, idx) {\n      if (isTSVFormat(block)) {\n        var result = parseTSVContents(block);\n        var blockMeta = blockMetaList[idx];\n        var axisKey = blockMeta.axisDim + 'Axis';\n\n        if (blockMeta) {\n          newOption[axisKey] = newOption[axisKey] || [];\n          newOption[axisKey][blockMeta.axisIndex] = {\n            data: result.categories\n          };\n          newOption.series = newOption.series.concat(result.series);\n        }\n      } else {\n        var result = parseListContents(block);\n        newOption.series.push(result);\n      }\n    });\n    return newOption;\n  }\n\n  var DataView =\n  /** @class */\n  function (_super) {\n    __extends(DataView, _super);\n\n    function DataView() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    DataView.prototype.onclick = function (ecModel, api) {\n      // FIXME: better way?\n      setTimeout(function () {\n        api.dispatchAction({\n          type: 'hideTip'\n        });\n      });\n      var container = api.getDom();\n      var model = this.model;\n\n      if (this._dom) {\n        container.removeChild(this._dom);\n      }\n\n      var root = document.createElement('div'); // use padding to avoid 5px whitespace\n\n      root.style.cssText = 'position:absolute;top:0;bottom:0;left:0;right:0;padding:5px';\n      root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // Create elements\n\n      var header = document.createElement('h4');\n      var lang = model.get('lang') || [];\n      header.innerHTML = lang[0] || model.get('title');\n      header.style.cssText = 'margin:10px 20px';\n      header.style.color = model.get('textColor');\n      var viewMain = document.createElement('div');\n      var textarea = document.createElement('textarea');\n      viewMain.style.cssText = 'overflow:auto';\n      var optionToContent = model.get('optionToContent');\n      var contentToOption = model.get('contentToOption');\n      var result = getContentFromModel(ecModel);\n\n      if (isFunction(optionToContent)) {\n        var htmlOrDom = optionToContent(api.getOption());\n\n        if (isString(htmlOrDom)) {\n          viewMain.innerHTML = htmlOrDom;\n        } else if (isDom(htmlOrDom)) {\n          viewMain.appendChild(htmlOrDom);\n        }\n      } else {\n        // Use default textarea\n        textarea.readOnly = model.get('readOnly');\n        var style = textarea.style; // eslint-disable-next-line max-len\n\n        style.cssText = 'display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none';\n        style.color = model.get('textColor');\n        style.borderColor = model.get('textareaBorderColor');\n        style.backgroundColor = model.get('textareaColor');\n        textarea.value = result.value;\n        viewMain.appendChild(textarea);\n      }\n\n      var blockMetaList = result.meta;\n      var buttonContainer = document.createElement('div');\n      buttonContainer.style.cssText = 'position:absolute;bottom:5px;left:0;right:0'; // eslint-disable-next-line max-len\n\n      var buttonStyle = 'float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n      var closeButton = document.createElement('div');\n      var refreshButton = document.createElement('div');\n      buttonStyle += ';background-color:' + model.get('buttonColor');\n      buttonStyle += ';color:' + model.get('buttonTextColor');\n      var self = this;\n\n      function close() {\n        container.removeChild(root);\n        self._dom = null;\n      }\n\n      addEventListener(closeButton, 'click', close);\n      addEventListener(refreshButton, 'click', function () {\n        if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n          {\n            // eslint-disable-next-line\n            warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n          }\n          close();\n          return;\n        }\n\n        var newOption;\n\n        try {\n          if (isFunction(contentToOption)) {\n            newOption = contentToOption(viewMain, api.getOption());\n          } else {\n            newOption = parseContents(textarea.value, blockMetaList);\n          }\n        } catch (e) {\n          close();\n          throw new Error('Data view format error ' + e);\n        }\n\n        if (newOption) {\n          api.dispatchAction({\n            type: 'changeDataView',\n            newOption: newOption\n          });\n        }\n\n        close();\n      });\n      closeButton.innerHTML = lang[1];\n      refreshButton.innerHTML = lang[2];\n      refreshButton.style.cssText = closeButton.style.cssText = buttonStyle;\n      !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n      buttonContainer.appendChild(closeButton);\n      root.appendChild(header);\n      root.appendChild(viewMain);\n      root.appendChild(buttonContainer);\n      viewMain.style.height = container.clientHeight - 80 + 'px';\n      container.appendChild(root);\n      this._dom = root;\n    };\n\n    DataView.prototype.remove = function (ecModel, api) {\n      this._dom && api.getDom().removeChild(this._dom);\n    };\n\n    DataView.prototype.dispose = function (ecModel, api) {\n      this.remove(ecModel, api);\n    };\n\n    DataView.getDefaultOption = function (ecModel) {\n      var defaultOption = {\n        show: true,\n        readOnly: false,\n        optionToContent: null,\n        contentToOption: null,\n        // eslint-disable-next-line\n        icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n        title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n        lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n        backgroundColor: '#fff',\n        textColor: '#000',\n        textareaColor: '#fff',\n        textareaBorderColor: '#333',\n        buttonColor: '#c23531',\n        buttonTextColor: '#fff'\n      };\n      return defaultOption;\n    };\n\n    return DataView;\n  }(ToolboxFeature);\n  /**\n   * @inner\n   */\n\n\n  function tryMergeDataOption(newData, originalData) {\n    return map(newData, function (newVal, idx) {\n      var original = originalData && originalData[idx];\n\n      if (isObject(original) && !isArray(original)) {\n        var newValIsObject = isObject(newVal) && !isArray(newVal);\n\n        if (!newValIsObject) {\n          newVal = {\n            value: newVal\n          };\n        } // original data has name but new data has no name\n\n\n        var shouldDeleteName = original.name != null && newVal.name == null; // Original data has option\n\n        newVal = defaults(newVal, original);\n        shouldDeleteName && delete newVal.name;\n        return newVal;\n      } else {\n        return newVal;\n      }\n    });\n  } // TODO: SELF REGISTERED.\n\n\n  registerAction({\n    type: 'changeDataView',\n    event: 'dataViewChanged',\n    update: 'prepareAndUpdate'\n  }, function (payload, ecModel) {\n    var newSeriesOptList = [];\n    each(payload.newOption.series, function (seriesOpt) {\n      var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n\n      if (!seriesModel) {\n        // New created series\n        // Geuss the series type\n        newSeriesOptList.push(extend({\n          // Default is scatter\n          type: 'scatter'\n        }, seriesOpt));\n      } else {\n        var originalData = seriesModel.get('data');\n        newSeriesOptList.push({\n          name: seriesOpt.name,\n          data: tryMergeDataOption(seriesOpt.data, originalData)\n        });\n      }\n    });\n    ecModel.mergeOption(defaults({\n      series: newSeriesOptList\n    }, payload.newOption));\n  });\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var each$6 = each;\n  var inner$11 = makeInner();\n  /**\n   * @param ecModel\n   * @param newSnapshot key is dataZoomId\n   */\n\n  function push(ecModel, newSnapshot) {\n    var storedSnapshots = getStoreSnapshots(ecModel); // If previous dataZoom can not be found,\n    // complete an range with current range.\n\n    each$6(newSnapshot, function (batchItem, dataZoomId) {\n      var i = storedSnapshots.length - 1;\n\n      for (; i >= 0; i--) {\n        var snapshot = storedSnapshots[i];\n\n        if (snapshot[dataZoomId]) {\n          break;\n        }\n      }\n\n      if (i < 0) {\n        // No origin range set, create one by current range.\n        var dataZoomModel = ecModel.queryComponents({\n          mainType: 'dataZoom',\n          subType: 'select',\n          id: dataZoomId\n        })[0];\n\n        if (dataZoomModel) {\n          var percentRange = dataZoomModel.getPercentRange();\n          storedSnapshots[0][dataZoomId] = {\n            dataZoomId: dataZoomId,\n            start: percentRange[0],\n            end: percentRange[1]\n          };\n        }\n      }\n    });\n    storedSnapshots.push(newSnapshot);\n  }\n\n  function pop(ecModel) {\n    var storedSnapshots = getStoreSnapshots(ecModel);\n    var head = storedSnapshots[storedSnapshots.length - 1];\n    storedSnapshots.length > 1 && storedSnapshots.pop(); // Find top for all dataZoom.\n\n    var snapshot = {};\n    each$6(head, function (batchItem, dataZoomId) {\n      for (var i = storedSnapshots.length - 1; i >= 0; i--) {\n        batchItem = storedSnapshots[i][dataZoomId];\n\n        if (batchItem) {\n          snapshot[dataZoomId] = batchItem;\n          break;\n        }\n      }\n    });\n    return snapshot;\n  }\n\n  function clear$1(ecModel) {\n    inner$11(ecModel).snapshots = null;\n  }\n\n  function count(ecModel) {\n    return getStoreSnapshots(ecModel).length;\n  }\n  /**\n   * History length of each dataZoom may be different.\n   * this._history[0] is used to store origin range.\n   */\n\n\n  function getStoreSnapshots(ecModel) {\n    var store = inner$11(ecModel);\n\n    if (!store.snapshots) {\n      store.snapshots = [{}];\n    }\n\n    return store.snapshots;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var RestoreOption =\n  /** @class */\n  function (_super) {\n    __extends(RestoreOption, _super);\n\n    function RestoreOption() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    RestoreOption.prototype.onclick = function (ecModel, api) {\n      clear$1(ecModel);\n      api.dispatchAction({\n        type: 'restore',\n        from: this.uid\n      });\n    };\n\n    RestoreOption.getDefaultOption = function (ecModel) {\n      var defaultOption = {\n        show: true,\n        // eslint-disable-next-line\n        icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n        title: ecModel.getLocaleModel().get(['toolbox', 'restore', 'title'])\n      };\n      return defaultOption;\n    };\n\n    return RestoreOption;\n  }(ToolboxFeature); // TODO: SELF REGISTERED.\n\n\n  registerAction({\n    type: 'restore',\n    event: 'restore',\n    update: 'prepareAndUpdate'\n  }, function (payload, ecModel) {\n    ecModel.resetOption('recreate');\n  });\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var BRUSH_PANEL_GLOBAL = true;\n  var mathMin$7 = Math.min;\n  var mathMax$7 = Math.max;\n  var mathPow$2 = Math.pow;\n  var COVER_Z = 10000;\n  var UNSELECT_THRESHOLD = 6;\n  var MIN_RESIZE_LINE_WIDTH = 6;\n  var MUTEX_RESOURCE_KEY = 'globalPan';\n  var DIRECTION_MAP = {\n    w: [0, 0],\n    e: [0, 1],\n    n: [1, 0],\n    s: [1, 1]\n  };\n  var CURSOR_MAP = {\n    w: 'ew',\n    e: 'ew',\n    n: 'ns',\n    s: 'ns',\n    ne: 'nesw',\n    sw: 'nesw',\n    nw: 'nwse',\n    se: 'nwse'\n  };\n  var DEFAULT_BRUSH_OPT = {\n    brushStyle: {\n      lineWidth: 2,\n      stroke: 'rgba(210,219,238,0.3)',\n      fill: '#D2DBEE'\n    },\n    transformable: true,\n    brushMode: 'single',\n    removeOnClick: false\n  };\n  var baseUID = 0;\n  /**\n   * params:\n   *     areas: Array.<Array>, coord relates to container group,\n   *                             If no container specified, to global.\n   *     opt {\n   *         isEnd: boolean,\n   *         removeOnClick: boolean\n   *     }\n   */\n\n  var BrushController =\n  /** @class */\n  function (_super) {\n    __extends(BrushController, _super);\n\n    function BrushController(zr) {\n      var _this = _super.call(this) || this;\n      /**\n       * @internal\n       */\n\n\n      _this._track = [];\n      /**\n       * @internal\n       */\n\n      _this._covers = [];\n      _this._handlers = {};\n      {\n        assert(zr);\n      }\n      _this._zr = zr;\n      _this.group = new Group();\n      _this._uid = 'brushController_' + baseUID++;\n      each(pointerHandlers, function (handler, eventName) {\n        this._handlers[eventName] = bind(handler, this);\n      }, _this);\n      return _this;\n    }\n    /**\n     * If set to `false`, select disabled.\n     */\n\n\n    BrushController.prototype.enableBrush = function (brushOption) {\n      {\n        assert(this._mounted);\n      }\n      this._brushType && this._doDisableBrush();\n      brushOption.brushType && this._doEnableBrush(brushOption);\n      return this;\n    };\n\n    BrushController.prototype._doEnableBrush = function (brushOption) {\n      var zr = this._zr; // Consider roam, which takes globalPan too.\n\n      if (!this._enableGlobalPan) {\n        take(zr, MUTEX_RESOURCE_KEY, this._uid);\n      }\n\n      each(this._handlers, function (handler, eventName) {\n        zr.on(eventName, handler);\n      });\n      this._brushType = brushOption.brushType;\n      this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\n    };\n\n    BrushController.prototype._doDisableBrush = function () {\n      var zr = this._zr;\n      release(zr, MUTEX_RESOURCE_KEY, this._uid);\n      each(this._handlers, function (handler, eventName) {\n        zr.off(eventName, handler);\n      });\n      this._brushType = this._brushOption = null;\n    };\n    /**\n     * @param panelOpts If not pass, it is global brush.\n     */\n\n\n    BrushController.prototype.setPanels = function (panelOpts) {\n      if (panelOpts && panelOpts.length) {\n        var panels_1 = this._panels = {};\n        each(panelOpts, function (panelOpts) {\n          panels_1[panelOpts.panelId] = clone(panelOpts);\n        });\n      } else {\n        this._panels = null;\n      }\n\n      return this;\n    };\n\n    BrushController.prototype.mount = function (opt) {\n      opt = opt || {};\n      {\n        this._mounted = true; // should be at first.\n      }\n      this._enableGlobalPan = opt.enableGlobalPan;\n      var thisGroup = this.group;\n\n      this._zr.add(thisGroup);\n\n      thisGroup.attr({\n        x: opt.x || 0,\n        y: opt.y || 0,\n        rotation: opt.rotation || 0,\n        scaleX: opt.scaleX || 1,\n        scaleY: opt.scaleY || 1\n      });\n      this._transform = thisGroup.getLocalTransform();\n      return this;\n    }; // eachCover(cb, context): void {\n    //     each(this._covers, cb, context);\n    // }\n\n    /**\n     * Update covers.\n     * @param coverConfigList\n     *        If coverConfigList is null/undefined, all covers removed.\n     */\n\n\n    BrushController.prototype.updateCovers = function (coverConfigList) {\n      {\n        assert(this._mounted);\n      }\n      coverConfigList = map(coverConfigList, function (coverConfig) {\n        return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\n      });\n      var tmpIdPrefix = '\\0-brush-index-';\n      var oldCovers = this._covers;\n      var newCovers = this._covers = [];\n      var controller = this;\n      var creatingCover = this._creatingCover;\n      new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n      return this;\n\n      function getKey(brushOption, index) {\n        return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n      }\n\n      function oldGetKey(cover, index) {\n        return getKey(cover.__brushOption, index);\n      }\n\n      function addOrUpdate(newIndex, oldIndex) {\n        var newBrushInternal = coverConfigList[newIndex]; // Consider setOption in event listener of brushSelect,\n        // where updating cover when creating should be forbiden.\n\n        if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n          newCovers[newIndex] = oldCovers[oldIndex];\n        } else {\n          var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushInternal, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushInternal));\n          updateCoverAfterCreation(controller, cover);\n        }\n      }\n\n      function remove(oldIndex) {\n        if (oldCovers[oldIndex] !== creatingCover) {\n          controller.group.remove(oldCovers[oldIndex]);\n        }\n      }\n    };\n\n    BrushController.prototype.unmount = function () {\n      {\n        if (!this._mounted) {\n          return;\n        }\n      }\n      this.enableBrush(false); // container may 'removeAll' outside.\n\n      clearCovers(this);\n\n      this._zr.remove(this.group);\n\n      {\n        this._mounted = false; // should be at last.\n      }\n      return this;\n    };\n\n    BrushController.prototype.dispose = function () {\n      this.unmount();\n      this.off();\n    };\n\n    return BrushController;\n  }(Eventful);\n\n  function createCover(controller, brushOption) {\n    var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n    cover.__brushOption = brushOption;\n    updateZ(cover, brushOption);\n    controller.group.add(cover);\n    return cover;\n  }\n\n  function endCreating(controller, creatingCover) {\n    var coverRenderer = getCoverRenderer(creatingCover);\n\n    if (coverRenderer.endCreating) {\n      coverRenderer.endCreating(controller, creatingCover);\n      updateZ(creatingCover, creatingCover.__brushOption);\n    }\n\n    return creatingCover;\n  }\n\n  function updateCoverShape(controller, cover) {\n    var brushOption = cover.__brushOption;\n    getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n  }\n\n  function updateZ(cover, brushOption) {\n    var z = brushOption.z;\n    z == null && (z = COVER_Z);\n    cover.traverse(function (el) {\n      el.z = z;\n      el.z2 = z; // Consider in given container.\n    });\n  }\n\n  function updateCoverAfterCreation(controller, cover) {\n    getCoverRenderer(cover).updateCommon(controller, cover);\n    updateCoverShape(controller, cover);\n  }\n\n  function getCoverRenderer(cover) {\n    return coverRenderers[cover.__brushOption.brushType];\n  } // return target panel or `true` (means global panel)\n\n\n  function getPanelByPoint(controller, e, localCursorPoint) {\n    var panels = controller._panels;\n\n    if (!panels) {\n      return BRUSH_PANEL_GLOBAL; // Global panel\n    }\n\n    var panel;\n    var transform = controller._transform;\n    each(panels, function (pn) {\n      pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n    });\n    return panel;\n  } // Return a panel or true\n\n\n  function getPanelByCover(controller, cover) {\n    var panels = controller._panels;\n\n    if (!panels) {\n      return BRUSH_PANEL_GLOBAL; // Global panel\n    }\n\n    var panelId = cover.__brushOption.panelId; // User may give cover without coord sys info,\n    // which is then treated as global panel.\n\n    return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\n  }\n\n  function clearCovers(controller) {\n    var covers = controller._covers;\n    var originalLength = covers.length;\n    each(covers, function (cover) {\n      controller.group.remove(cover);\n    }, controller);\n    covers.length = 0;\n    return !!originalLength;\n  }\n\n  function trigger$1(controller, opt) {\n    var areas = map(controller._covers, function (cover) {\n      var brushOption = cover.__brushOption;\n      var range = clone(brushOption.range);\n      return {\n        brushType: brushOption.brushType,\n        panelId: brushOption.panelId,\n        range: range\n      };\n    });\n    controller.trigger('brush', {\n      areas: areas,\n      isEnd: !!opt.isEnd,\n      removeOnClick: !!opt.removeOnClick\n    });\n  }\n\n  function shouldShowCover(controller) {\n    var track = controller._track;\n\n    if (!track.length) {\n      return false;\n    }\n\n    var p2 = track[track.length - 1];\n    var p1 = track[0];\n    var dx = p2[0] - p1[0];\n    var dy = p2[1] - p1[1];\n    var dist = mathPow$2(dx * dx + dy * dy, 0.5);\n    return dist > UNSELECT_THRESHOLD;\n  }\n\n  function getTrackEnds(track) {\n    var tail = track.length - 1;\n    tail < 0 && (tail = 0);\n    return [track[0], track[tail]];\n  }\n\n  function createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\n    var cover = new Group();\n    cover.add(new Rect({\n      name: 'main',\n      style: makeStyle(brushOption),\n      silent: true,\n      draggable: true,\n      cursor: 'move',\n      drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\n      ondragend: curry(trigger$1, controller, {\n        isEnd: true\n      })\n    }));\n    each(edgeNameSequences, function (nameSequence) {\n      cover.add(new Rect({\n        name: nameSequence.join(''),\n        style: {\n          opacity: 0\n        },\n        draggable: true,\n        silent: true,\n        invisible: true,\n        drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\n        ondragend: curry(trigger$1, controller, {\n          isEnd: true\n        })\n      }));\n    });\n    return cover;\n  }\n\n  function updateBaseRect(controller, cover, localRange, brushOption) {\n    var lineWidth = brushOption.brushStyle.lineWidth || 0;\n    var handleSize = mathMax$7(lineWidth, MIN_RESIZE_LINE_WIDTH);\n    var x = localRange[0][0];\n    var y = localRange[1][0];\n    var xa = x - lineWidth / 2;\n    var ya = y - lineWidth / 2;\n    var x2 = localRange[0][1];\n    var y2 = localRange[1][1];\n    var x2a = x2 - handleSize + lineWidth / 2;\n    var y2a = y2 - handleSize + lineWidth / 2;\n    var width = x2 - x;\n    var height = y2 - y;\n    var widtha = width + lineWidth;\n    var heighta = height + lineWidth;\n    updateRectShape(controller, cover, 'main', x, y, width, height);\n\n    if (brushOption.transformable) {\n      updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n      updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n      updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n      updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n      updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n      updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n      updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n      updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n    }\n  }\n\n  function updateCommon(controller, cover) {\n    var brushOption = cover.__brushOption;\n    var transformable = brushOption.transformable;\n    var mainEl = cover.childAt(0);\n    mainEl.useStyle(makeStyle(brushOption));\n    mainEl.attr({\n      silent: !transformable,\n      cursor: transformable ? 'move' : 'default'\n    });\n    each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\n      var el = cover.childOfName(nameSequence.join(''));\n      var globalDir = nameSequence.length === 1 ? getGlobalDirection1(controller, nameSequence[0]) : getGlobalDirection2(controller, nameSequence);\n      el && el.attr({\n        silent: !transformable,\n        invisible: !transformable,\n        cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n      });\n    });\n  }\n\n  function updateRectShape(controller, cover, name, x, y, w, h) {\n    var el = cover.childOfName(name);\n    el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n  }\n\n  function makeStyle(brushOption) {\n    return defaults({\n      strokeNoScale: true\n    }, brushOption.brushStyle);\n  }\n\n  function formatRectRange(x, y, x2, y2) {\n    var min = [mathMin$7(x, x2), mathMin$7(y, y2)];\n    var max = [mathMax$7(x, x2), mathMax$7(y, y2)];\n    return [[min[0], max[0]], [min[1], max[1]] // y range\n    ];\n  }\n\n  function getTransform$1(controller) {\n    return getTransform(controller.group);\n  }\n\n  function getGlobalDirection1(controller, localDirName) {\n    var map$$1 = {\n      w: 'left',\n      e: 'right',\n      n: 'top',\n      s: 'bottom'\n    };\n    var inverseMap = {\n      left: 'w',\n      right: 'e',\n      top: 'n',\n      bottom: 's'\n    };\n    var dir = transformDirection(map$$1[localDirName], getTransform$1(controller));\n    return inverseMap[dir];\n  }\n\n  function getGlobalDirection2(controller, localDirNameSeq) {\n    var globalDir = [getGlobalDirection1(controller, localDirNameSeq[0]), getGlobalDirection1(controller, localDirNameSeq[1])];\n    (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n    return globalDir.join('');\n  }\n\n  function driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\n    var brushOption = cover.__brushOption;\n    var rectRange = rectRangeConverter.toRectRange(brushOption.range);\n    var localDelta = toLocalDelta(controller, dx, dy);\n    each(dirNameSequence, function (dirName) {\n      var ind = DIRECTION_MAP[dirName];\n      rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n    });\n    brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n    updateCoverAfterCreation(controller, cover);\n    trigger$1(controller, {\n      isEnd: false\n    });\n  }\n\n  function driftPolygon(controller, cover, dx, dy) {\n    var range = cover.__brushOption.range;\n    var localDelta = toLocalDelta(controller, dx, dy);\n    each(range, function (point) {\n      point[0] += localDelta[0];\n      point[1] += localDelta[1];\n    });\n    updateCoverAfterCreation(controller, cover);\n    trigger$1(controller, {\n      isEnd: false\n    });\n  }\n\n  function toLocalDelta(controller, dx, dy) {\n    var thisGroup = controller.group;\n    var localD = thisGroup.transformCoordToLocal(dx, dy);\n    var localZero = thisGroup.transformCoordToLocal(0, 0);\n    return [localD[0] - localZero[0], localD[1] - localZero[1]];\n  }\n\n  function clipByPanel(controller, cover, data) {\n    var panel = getPanelByCover(controller, cover);\n    return panel && panel !== BRUSH_PANEL_GLOBAL ? panel.clipPath(data, controller._transform) : clone(data);\n  }\n\n  function pointsToRect(points) {\n    var xmin = mathMin$7(points[0][0], points[1][0]);\n    var ymin = mathMin$7(points[0][1], points[1][1]);\n    var xmax = mathMax$7(points[0][0], points[1][0]);\n    var ymax = mathMax$7(points[0][1], points[1][1]);\n    return {\n      x: xmin,\n      y: ymin,\n      width: xmax - xmin,\n      height: ymax - ymin\n    };\n  }\n\n  function resetCursor(controller, e, localCursorPoint) {\n    if ( // Check active\n    !controller._brushType // resetCursor should be always called when mouse is in zr area,\n    // but not called when mouse is out of zr area to avoid bad influence\n    // if `mousemove`, `mouseup` are triggered from `document` event.\n    || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\n      return;\n    }\n\n    var zr = controller._zr;\n    var covers = controller._covers;\n    var currPanel = getPanelByPoint(controller, e, localCursorPoint); // Check whether in covers.\n\n    if (!controller._dragging) {\n      for (var i = 0; i < covers.length; i++) {\n        var brushOption = covers[i].__brushOption;\n\n        if (currPanel && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n          // Use cursor style set on cover.\n          return;\n        }\n      }\n    }\n\n    currPanel && zr.setCursorStyle('crosshair');\n  }\n\n  function preventDefault(e) {\n    var rawE = e.event;\n    rawE.preventDefault && rawE.preventDefault();\n  }\n\n  function mainShapeContain(cover, x, y) {\n    return cover.childOfName('main').contain(x, y);\n  }\n\n  function updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n    var creatingCover = controller._creatingCover;\n    var panel = controller._creatingPanel;\n    var thisBrushOption = controller._brushOption;\n    var eventParams;\n\n    controller._track.push(localCursorPoint.slice());\n\n    if (shouldShowCover(controller) || creatingCover) {\n      if (panel && !creatingCover) {\n        thisBrushOption.brushMode === 'single' && clearCovers(controller);\n        var brushOption = clone(thisBrushOption);\n        brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n        brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\n        creatingCover = controller._creatingCover = createCover(controller, brushOption);\n\n        controller._covers.push(creatingCover);\n      }\n\n      if (creatingCover) {\n        var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n        var coverBrushOption = creatingCover.__brushOption;\n        coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n\n        if (isEnd) {\n          endCreating(controller, creatingCover);\n          coverRenderer.updateCommon(controller, creatingCover);\n        }\n\n        updateCoverShape(controller, creatingCover);\n        eventParams = {\n          isEnd: isEnd\n        };\n      }\n    } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n      // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n      // But a single click do not clear covers, because user may have casual\n      // clicks (for example, click on other component and do not expect covers\n      // disappear).\n      // Only some cover removed, trigger action, but not every click trigger action.\n      if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n        eventParams = {\n          isEnd: isEnd,\n          removeOnClick: true\n        };\n      }\n    }\n\n    return eventParams;\n  }\n\n  function determineBrushType(brushType, panel) {\n    if (brushType === 'auto') {\n      {\n        assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\n      }\n      return panel.defaultBrushType;\n    }\n\n    return brushType;\n  }\n\n  var pointerHandlers = {\n    mousedown: function (e) {\n      if (this._dragging) {\n        // In case some browser do not support globalOut,\n        // and release mouse out side the browser.\n        handleDragEnd(this, e);\n      } else if (!e.target || !e.target.draggable) {\n        preventDefault(e);\n        var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n        this._creatingCover = null;\n        var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n\n        if (panel) {\n          this._dragging = true;\n          this._track = [localCursorPoint.slice()];\n        }\n      }\n    },\n    mousemove: function (e) {\n      var x = e.offsetX;\n      var y = e.offsetY;\n      var localCursorPoint = this.group.transformCoordToLocal(x, y);\n      resetCursor(this, e, localCursorPoint);\n\n      if (this._dragging) {\n        preventDefault(e);\n        var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n        eventParams && trigger$1(this, eventParams);\n      }\n    },\n    mouseup: function (e) {\n      handleDragEnd(this, e);\n    }\n  };\n\n  function handleDragEnd(controller, e) {\n    if (controller._dragging) {\n      preventDefault(e);\n      var x = e.offsetX;\n      var y = e.offsetY;\n      var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n      var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n      controller._dragging = false;\n      controller._track = [];\n      controller._creatingCover = null; // trigger event shoule be at final, after procedure will be nested.\n\n      eventParams && trigger$1(controller, eventParams);\n    }\n  }\n\n  function isOutsideZrArea(controller, x, y) {\n    var zr = controller._zr;\n    return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n  }\n  /**\n   * key: brushType\n   */\n\n\n  var coverRenderers = {\n    lineX: getLineRenderer(0),\n    lineY: getLineRenderer(1),\n    rect: {\n      createCover: function (controller, brushOption) {\n        function returnInput(range) {\n          return range;\n        }\n\n        return createBaseRectCover({\n          toRectRange: returnInput,\n          fromRectRange: returnInput\n        }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\n      },\n      getCreatingRange: function (localTrack) {\n        var ends = getTrackEnds(localTrack);\n        return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n      },\n      updateCoverShape: function (controller, cover, localRange, brushOption) {\n        updateBaseRect(controller, cover, localRange, brushOption);\n      },\n      updateCommon: updateCommon,\n      contain: mainShapeContain\n    },\n    polygon: {\n      createCover: function (controller, brushOption) {\n        var cover = new Group(); // Do not use graphic.Polygon because graphic.Polyline do not close the\n        // border of the shape when drawing, which is a better experience for user.\n\n        cover.add(new Polyline({\n          name: 'main',\n          style: makeStyle(brushOption),\n          silent: true\n        }));\n        return cover;\n      },\n      getCreatingRange: function (localTrack) {\n        return localTrack;\n      },\n      endCreating: function (controller, cover) {\n        cover.remove(cover.childAt(0)); // Use graphic.Polygon close the shape.\n\n        cover.add(new Polygon({\n          name: 'main',\n          draggable: true,\n          drift: curry(driftPolygon, controller, cover),\n          ondragend: curry(trigger$1, controller, {\n            isEnd: true\n          })\n        }));\n      },\n      updateCoverShape: function (controller, cover, localRange, brushOption) {\n        cover.childAt(0).setShape({\n          points: clipByPanel(controller, cover, localRange)\n        });\n      },\n      updateCommon: updateCommon,\n      contain: mainShapeContain\n    }\n  };\n\n  function getLineRenderer(xyIndex) {\n    return {\n      createCover: function (controller, brushOption) {\n        return createBaseRectCover({\n          toRectRange: function (range) {\n            var rectRange = [range, [0, 100]];\n            xyIndex && rectRange.reverse();\n            return rectRange;\n          },\n          fromRectRange: function (rectRange) {\n            return rectRange[xyIndex];\n          }\n        }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\n      },\n      getCreatingRange: function (localTrack) {\n        var ends = getTrackEnds(localTrack);\n        var min = mathMin$7(ends[0][xyIndex], ends[1][xyIndex]);\n        var max = mathMax$7(ends[0][xyIndex], ends[1][xyIndex]);\n        return [min, max];\n      },\n      updateCoverShape: function (controller, cover, localRange, brushOption) {\n        var otherExtent; // If brushWidth not specified, fit the panel.\n\n        var panel = getPanelByCover(controller, cover);\n\n        if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\n          otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\n        } else {\n          var zr = controller._zr;\n          otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n        }\n\n        var rectRange = [localRange, otherExtent];\n        xyIndex && rectRange.reverse();\n        updateBaseRect(controller, cover, rectRange, brushOption);\n      },\n      updateCommon: updateCommon,\n      contain: mainShapeContain\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var IRRELEVANT_EXCLUDES = {\n    'axisPointer': 1,\n    'tooltip': 1,\n    'brush': 1\n  };\n  /**\n   * Avoid that: mouse click on a elements that is over geo or graph,\n   * but roam is triggered.\n   */\n\n  function onIrrelevantElement(e, api, targetCoordSysModel) {\n    var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n    var coordSys = model && model.coordinateSystem;\n    return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES.hasOwnProperty(model.mainType) && coordSys && coordSys.model !== targetCoordSysModel;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function makeRectPanelClipPath(rect) {\n    rect = normalizeRect(rect);\n    return function (localPoints) {\n      return clipPointsByRect(localPoints, rect);\n    };\n  }\n\n  function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n    rect = normalizeRect(rect);\n    return function (xyIndex) {\n      var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n      var brushWidth = idx ? rect.width : rect.height;\n      var base = idx ? rect.x : rect.y;\n      return [base, base + (brushWidth || 0)];\n    };\n  }\n\n  function makeRectIsTargetByCursor(rect, api, targetModel) {\n    var boundingRect = normalizeRect(rect);\n    return function (e, localCursorPoint) {\n      return boundingRect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n    };\n  } // Consider width/height is negative.\n\n\n  function normalizeRect(rect) {\n    return BoundingRect.create(rect);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // how to genarialize to more coordinate systems.\n\n\n  var INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\n\n  var BrushTargetManager =\n  /** @class */\n  function () {\n    /**\n     * @param finder contains Index/Id/Name of xAxis/yAxis/geo/grid\n     *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\n     * @param opt.include include coordinate system types.\n     */\n    function BrushTargetManager(finder, ecModel, opt) {\n      var _this = this;\n\n      this._targetInfoList = [];\n      var foundCpts = parseFinder$1(ecModel, finder);\n      each(targetInfoBuilders, function (builder, type) {\n        if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n          builder(foundCpts, _this._targetInfoList);\n        }\n      });\n    }\n\n    BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\n      this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n        (area.coordRanges || (area.coordRanges = [])).push(coordRange); // area.coordRange is the first of area.coordRanges\n\n        if (!area.coordRange) {\n          area.coordRange = coordRange; // In 'category' axis, coord to pixel is not reversible, so we can not\n          // rebuild range by coordRange accrately, which may bring trouble when\n          // brushing only one item. So we use __rangeOffset to rebuilding range\n          // by coordRange. And this it only used in brush component so it is no\n          // need to be adapted to coordRanges.\n\n          var result = coordConvert[area.brushType](0, coordSys, coordRange);\n          area.__rangeOffset = {\n            offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n            xyMinMax: result.xyMinMax\n          };\n        }\n      });\n      return areas;\n    };\n\n    BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\n      each(areas, function (area) {\n        var targetInfo = this.findTargetInfo(area, ecModel);\n\n        if (targetInfo && targetInfo !== true) {\n          each(targetInfo.coordSyses, function (coordSys) {\n            var result = coordConvert[area.brushType](1, coordSys, area.range, true);\n            cb(area, result.values, coordSys, ecModel);\n          });\n        }\n      }, this);\n    };\n    /**\n     * the `areas` is `BrushModel.areas`.\n     * Called in layout stage.\n     * convert `area.coordRange` to global range and set panelId to `area.range`.\n     */\n\n\n    BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\n      each(areas, function (area) {\n        var targetInfo = this.findTargetInfo(area, ecModel);\n        {\n          assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\n          assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\n        }\n        area.range = area.range || []; // convert coordRange to global range and set panelId.\n\n        if (targetInfo && targetInfo !== true) {\n          area.panelId = targetInfo.panelId; // (1) area.range shoule always be calculate from coordRange but does\n          // not keep its original value, for the sake of the dataZoom scenario,\n          // where area.coordRange remains unchanged but area.range may be changed.\n          // (2) Only support converting one coordRange to pixel range in brush\n          // component. So do not consider `coordRanges`.\n          // (3) About __rangeOffset, see comment above.\n\n          var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n          var rangeOffset = area.__rangeOffset;\n          area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n        }\n      }, this);\n    };\n\n    BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\n      return map(this._targetInfoList, function (targetInfo) {\n        var rect = targetInfo.getPanelRect();\n        return {\n          panelId: targetInfo.panelId,\n          defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\n          clipPath: makeRectPanelClipPath(rect),\n          isTargetByCursor: makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n          getLinearBrushOtherExtent: makeLinearBrushOtherExtent(rect)\n        };\n      });\n    };\n\n    BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\n      // Check whether area is bound in coord, and series do not belong to that coord.\n      // If do not do this check, some brush (like lineX) will controll all axes.\n      var targetInfo = this.findTargetInfo(area, ecModel);\n      return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n    };\n    /**\n     * If return Object, a coord found.\n     * If reutrn true, global found.\n     * Otherwise nothing found.\n     */\n\n\n    BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\n      var targetInfoList = this._targetInfoList;\n      var foundCpts = parseFinder$1(ecModel, area);\n\n      for (var i = 0; i < targetInfoList.length; i++) {\n        var targetInfo = targetInfoList[i];\n        var areaPanelId = area.panelId;\n\n        if (areaPanelId) {\n          if (targetInfo.panelId === areaPanelId) {\n            return targetInfo;\n          }\n        } else {\n          for (var j = 0; j < targetInfoMatchers.length; j++) {\n            if (targetInfoMatchers[j](foundCpts, targetInfo)) {\n              return targetInfo;\n            }\n          }\n        }\n      }\n\n      return true;\n    };\n\n    return BrushTargetManager;\n  }();\n\n  function formatMinMax(minMax) {\n    minMax[0] > minMax[1] && minMax.reverse();\n    return minMax;\n  }\n\n  function parseFinder$1(ecModel, finder) {\n    return parseFinder(ecModel, finder, {\n      includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n    });\n  }\n\n  var targetInfoBuilders = {\n    grid: function (foundCpts, targetInfoList) {\n      var xAxisModels = foundCpts.xAxisModels;\n      var yAxisModels = foundCpts.yAxisModels;\n      var gridModels = foundCpts.gridModels; // Remove duplicated.\n\n      var gridModelMap = createHashMap();\n      var xAxesHas = {};\n      var yAxesHas = {};\n\n      if (!xAxisModels && !yAxisModels && !gridModels) {\n        return;\n      }\n\n      each(xAxisModels, function (axisModel) {\n        var gridModel = axisModel.axis.grid.model;\n        gridModelMap.set(gridModel.id, gridModel);\n        xAxesHas[gridModel.id] = true;\n      });\n      each(yAxisModels, function (axisModel) {\n        var gridModel = axisModel.axis.grid.model;\n        gridModelMap.set(gridModel.id, gridModel);\n        yAxesHas[gridModel.id] = true;\n      });\n      each(gridModels, function (gridModel) {\n        gridModelMap.set(gridModel.id, gridModel);\n        xAxesHas[gridModel.id] = true;\n        yAxesHas[gridModel.id] = true;\n      });\n      gridModelMap.each(function (gridModel) {\n        var grid = gridModel.coordinateSystem;\n        var cartesians = [];\n        each(grid.getCartesians(), function (cartesian, index) {\n          if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n            cartesians.push(cartesian);\n          }\n        });\n        targetInfoList.push({\n          panelId: 'grid--' + gridModel.id,\n          gridModel: gridModel,\n          coordSysModel: gridModel,\n          // Use the first one as the representitive coordSys.\n          coordSys: cartesians[0],\n          coordSyses: cartesians,\n          getPanelRect: panelRectBuilders.grid,\n          xAxisDeclared: xAxesHas[gridModel.id],\n          yAxisDeclared: yAxesHas[gridModel.id]\n        });\n      });\n    },\n    geo: function (foundCpts, targetInfoList) {\n      each(foundCpts.geoModels, function (geoModel) {\n        var coordSys = geoModel.coordinateSystem;\n        targetInfoList.push({\n          panelId: 'geo--' + geoModel.id,\n          geoModel: geoModel,\n          coordSysModel: geoModel,\n          coordSys: coordSys,\n          coordSyses: [coordSys],\n          getPanelRect: panelRectBuilders.geo\n        });\n      });\n    }\n  };\n  var targetInfoMatchers = [// grid\n  function (foundCpts, targetInfo) {\n    var xAxisModel = foundCpts.xAxisModel;\n    var yAxisModel = foundCpts.yAxisModel;\n    var gridModel = foundCpts.gridModel;\n    !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n    !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n    return gridModel && gridModel === targetInfo.gridModel;\n  }, // geo\n  function (foundCpts, targetInfo) {\n    var geoModel = foundCpts.geoModel;\n    return geoModel && geoModel === targetInfo.geoModel;\n  }];\n  var panelRectBuilders = {\n    grid: function () {\n      // grid is not Transformable.\n      return this.coordSys.master.getRect().clone();\n    },\n    geo: function () {\n      var coordSys = this.coordSys;\n      var rect = coordSys.getBoundingRect().clone(); // geo roam and zoom transform\n\n      rect.applyTransform(getTransform(coordSys));\n      return rect;\n    }\n  };\n  var coordConvert = {\n    lineX: curry(axisConvert, 0),\n    lineY: curry(axisConvert, 1),\n    rect: function (to, coordSys, rangeOrCoordRange, clamp) {\n      var xminymin = to ? coordSys.pointToData([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp);\n      var xmaxymax = to ? coordSys.pointToData([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp);\n      var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n      return {\n        values: values,\n        xyMinMax: values\n      };\n    },\n    polygon: function (to, coordSys, rangeOrCoordRange, clamp) {\n      var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n      var values = map(rangeOrCoordRange, function (item) {\n        var p = to ? coordSys.pointToData(item, clamp) : coordSys.dataToPoint(item, clamp);\n        xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n        xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n        xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n        xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n        return p;\n      });\n      return {\n        values: values,\n        xyMinMax: xyMinMax\n      };\n    }\n  };\n\n  function axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n    {\n      assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\n    }\n    var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n    var values = formatMinMax(map([0, 1], function (i) {\n      return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]), true) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n    }));\n    var xyMinMax = [];\n    xyMinMax[axisNameIndex] = values;\n    xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n\n  var diffProcessor = {\n    lineX: curry(axisDiffProcessor, 0),\n    lineY: curry(axisDiffProcessor, 1),\n    rect: function (values, refer, scales) {\n      return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n    },\n    polygon: function (values, refer, scales) {\n      return map(values, function (item, idx) {\n        return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n      });\n    }\n  };\n\n  function axisDiffProcessor(axisNameIndex, values, refer, scales) {\n    return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n  } // We have to process scale caused by dataZoom manually,\n  // although it might be not accurate.\n  // Return [0~1, 0~1]\n\n\n  function getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n    var sizeCurr = getSize$1(xyMinMaxCurr);\n    var sizeOrigin = getSize$1(xyMinMaxOrigin);\n    var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n    isNaN(scales[0]) && (scales[0] = 1);\n    isNaN(scales[1]) && (scales[1] = 1);\n    return scales;\n  }\n\n  function getSize$1(xyMinMax) {\n    return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var each$7 = each;\n  var DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\n\n  var DataZoomFeature =\n  /** @class */\n  function (_super) {\n    __extends(DataZoomFeature, _super);\n\n    function DataZoomFeature() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n      if (!this._brushController) {\n        this._brushController = new BrushController(api.getZr());\n\n        this._brushController.on('brush', bind(this._onBrush, this)).mount();\n      }\n\n      updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n      updateBackBtnStatus(featureModel, ecModel);\n    };\n\n    DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n      handlers[type].call(this);\n    };\n\n    DataZoomFeature.prototype.remove = function (ecModel, api) {\n      this._brushController && this._brushController.unmount();\n    };\n\n    DataZoomFeature.prototype.dispose = function (ecModel, api) {\n      this._brushController && this._brushController.dispose();\n    };\n\n    DataZoomFeature.prototype._onBrush = function (eventParam) {\n      var areas = eventParam.areas;\n\n      if (!eventParam.isEnd || !areas.length) {\n        return;\n      }\n\n      var snapshot = {};\n      var ecModel = this.ecModel;\n\n      this._brushController.updateCovers([]); // remove cover\n\n\n      var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n        include: ['grid']\n      });\n      brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n        if (coordSys.type !== 'cartesian2d') {\n          return;\n        }\n\n        var brushType = area.brushType;\n\n        if (brushType === 'rect') {\n          setBatch('x', coordSys, coordRange[0]);\n          setBatch('y', coordSys, coordRange[1]);\n        } else {\n          setBatch({\n            lineX: 'x',\n            lineY: 'y'\n          }[brushType], coordSys, coordRange);\n        }\n      });\n      push(ecModel, snapshot);\n\n      this._dispatchZoomAction(snapshot);\n\n      function setBatch(dimName, coordSys, minMax) {\n        var axis = coordSys.getAxis(dimName);\n        var axisModel = axis.model;\n        var dataZoomModel = findDataZoom(dimName, axisModel, ecModel); // Restrict range.\n\n        var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n\n        if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n          minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n        }\n\n        dataZoomModel && (snapshot[dataZoomModel.id] = {\n          dataZoomId: dataZoomModel.id,\n          startValue: minMax[0],\n          endValue: minMax[1]\n        });\n      }\n\n      function findDataZoom(dimName, axisModel, ecModel) {\n        var found;\n        ecModel.eachComponent({\n          mainType: 'dataZoom',\n          subType: 'select'\n        }, function (dzModel) {\n          var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n          has && (found = dzModel);\n        });\n        return found;\n      }\n    };\n\n    DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n      var batch = []; // Convert from hash map to array.\n\n      each$7(snapshot, function (batchItem, dataZoomId) {\n        batch.push(clone(batchItem));\n      });\n      batch.length && this.api.dispatchAction({\n        type: 'dataZoom',\n        from: this.uid,\n        batch: batch\n      });\n    };\n\n    DataZoomFeature.getDefaultOption = function (ecModel) {\n      var defaultOption = {\n        show: true,\n        filterMode: 'filter',\n        // Icon group\n        icon: {\n          zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n          back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n        },\n        // `zoom`, `back`\n        title: ecModel.getLocaleModel().get(['toolbox', 'dataZoom', 'title']),\n        brushStyle: {\n          borderWidth: 0,\n          color: 'rgba(210,219,238,0.2)'\n        }\n      };\n      return defaultOption;\n    };\n\n    return DataZoomFeature;\n  }(ToolboxFeature);\n\n  var handlers = {\n    zoom: function () {\n      var nextActive = !this._isZoomActive;\n      this.api.dispatchAction({\n        type: 'takeGlobalCursor',\n        key: 'dataZoomSelect',\n        dataZoomSelectActive: nextActive\n      });\n    },\n    back: function () {\n      this._dispatchZoomAction(pop(this.ecModel));\n    }\n  };\n\n  function makeAxisFinder(dzFeatureModel) {\n    var setting = {\n      xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n      yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n      xAxisId: dzFeatureModel.get('xAxisId', true),\n      yAxisId: dzFeatureModel.get('yAxisId', true)\n    }; // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n    // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n    // Some old cases set like this below to close yAxis control but leave xAxis control:\n    // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n\n    if (setting.xAxisIndex == null && setting.xAxisId == null) {\n      setting.xAxisIndex = 'all';\n    }\n\n    if (setting.yAxisIndex == null && setting.yAxisId == null) {\n      setting.yAxisIndex = 'all';\n    }\n\n    return setting;\n  }\n\n  function updateBackBtnStatus(featureModel, ecModel) {\n    featureModel.setIconStatus('back', count(ecModel) > 1 ? 'emphasis' : 'normal');\n  }\n\n  function updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n    var zoomActive = view._isZoomActive;\n\n    if (payload && payload.type === 'takeGlobalCursor') {\n      zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n    }\n\n    view._isZoomActive = zoomActive;\n    featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n      include: ['grid']\n    });\n    var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n      return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n    });\n\n    view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n      brushType: 'auto',\n      brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n    } : false);\n  }\n\n  registerInternalOptionCreator('dataZoom', function (ecModel) {\n    var toolboxModel = ecModel.getComponent('toolbox', 0);\n    var featureDataZoomPath = ['feature', 'dataZoom'];\n\n    if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n      return;\n    }\n\n    var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n    var dzOptions = [];\n    var finder = makeAxisFinder(dzFeatureModel);\n    var finderResult = parseFinder(ecModel, finder);\n    each$7(finderResult.xAxisModels, function (axisModel) {\n      return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n    });\n    each$7(finderResult.yAxisModels, function (axisModel) {\n      return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n    });\n\n    function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n      var axisIndex = axisModel.componentIndex;\n      var newOpt = {\n        type: 'select',\n        $fromToolbox: true,\n        // Default to be filter\n        filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n        // Id for merge mapping.\n        id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n      };\n      newOpt[axisIndexPropName] = axisIndex;\n      dzOptions.push(newOpt);\n    }\n\n    return dzOptions;\n  });\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  function install$15(registers) {\n    registers.registerComponentModel(ToolboxModel);\n    registers.registerComponentView(ToolboxView);\n    registerFeature('saveAsImage', SaveAsImage);\n    registerFeature('magicType', MagicType);\n    registerFeature('dataView', DataView);\n    registerFeature('dataZoom', DataZoomFeature);\n    registerFeature('restore', RestoreOption);\n    use(install$16);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  use(install$15);\n  var mathSin$4 = Math.sin;\n  var mathCos$4 = Math.cos;\n  var PI$5 = Math.PI;\n  var PI2$8 = Math.PI * 2;\n  var degree = 180 / PI$5;\n\n  var SVGPathRebuilder = function () {\n    function SVGPathRebuilder() {}\n\n    SVGPathRebuilder.prototype.reset = function (precision) {\n      this._start = true;\n      this._d = [];\n      this._str = '';\n      this._p = Math.pow(10, precision || 4);\n    };\n\n    SVGPathRebuilder.prototype.moveTo = function (x, y) {\n      this._add('M', x, y);\n    };\n\n    SVGPathRebuilder.prototype.lineTo = function (x, y) {\n      this._add('L', x, y);\n    };\n\n    SVGPathRebuilder.prototype.bezierCurveTo = function (x, y, x2, y2, x3, y3) {\n      this._add('C', x, y, x2, y2, x3, y3);\n    };\n\n    SVGPathRebuilder.prototype.quadraticCurveTo = function (x, y, x2, y2) {\n      this._add('Q', x, y, x2, y2);\n    };\n\n    SVGPathRebuilder.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n      this.ellipse(cx, cy, r, r, 0, startAngle, endAngle, anticlockwise);\n    };\n\n    SVGPathRebuilder.prototype.ellipse = function (cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise) {\n      var dTheta = endAngle - startAngle;\n      var clockwise = !anticlockwise;\n      var dThetaPositive = Math.abs(dTheta);\n      var isCircle = isAroundZero$1(dThetaPositive - PI2$8) || (clockwise ? dTheta >= PI2$8 : -dTheta >= PI2$8);\n      var unifiedTheta = dTheta > 0 ? dTheta % PI2$8 : dTheta % PI2$8 + PI2$8;\n      var large = false;\n\n      if (isCircle) {\n        large = true;\n      } else if (isAroundZero$1(dThetaPositive)) {\n        large = false;\n      } else {\n        large = unifiedTheta >= PI$5 === !!clockwise;\n      }\n\n      var x0 = cx + rx * mathCos$4(startAngle);\n      var y0 = cy + ry * mathSin$4(startAngle);\n\n      if (this._start) {\n        this._add('M', x0, y0);\n      }\n\n      var xRot = Math.round(psi * degree);\n\n      if (isCircle) {\n        var p = 1 / this._p;\n        var dTheta_1 = (clockwise ? 1 : -1) * (PI2$8 - p);\n\n        this._add('A', rx, ry, xRot, 1, +clockwise, cx + rx * mathCos$4(startAngle + dTheta_1), cy + ry * mathSin$4(startAngle + dTheta_1));\n\n        if (p > 1e-2) {\n          this._add('A', rx, ry, xRot, 0, +clockwise, x0, y0);\n        }\n      } else {\n        var x = cx + rx * mathCos$4(endAngle);\n        var y = cy + ry * mathSin$4(endAngle);\n\n        this._add('A', rx, ry, xRot, +large, +clockwise, x, y);\n      }\n    };\n\n    SVGPathRebuilder.prototype.rect = function (x, y, w, h) {\n      this._add('M', x, y);\n\n      this._add('l', w, 0);\n\n      this._add('l', 0, h);\n\n      this._add('l', -w, 0);\n\n      this._add('Z');\n    };\n\n    SVGPathRebuilder.prototype.closePath = function () {\n      if (this._d.length > 0) {\n        this._add('Z');\n      }\n    };\n\n    SVGPathRebuilder.prototype._add = function (cmd, a, b, c, d, e, f, g, h) {\n      var vals = [];\n      var p = this._p;\n\n      for (var i = 1; i < arguments.length; i++) {\n        var val = arguments[i];\n\n        if (isNaN(val)) {\n          this._invalid = true;\n          return;\n        }\n\n        vals.push(Math.round(val * p) / p);\n      }\n\n      this._d.push(cmd + vals.join(' '));\n\n      this._start = cmd === 'Z';\n    };\n\n    SVGPathRebuilder.prototype.generateStr = function () {\n      this._str = this._invalid ? '' : this._d.join('');\n      this._d = [];\n    };\n\n    SVGPathRebuilder.prototype.getStr = function () {\n      return this._str;\n    };\n\n    return SVGPathRebuilder;\n  }();\n\n  var NONE = 'none';\n  var mathRound$1 = Math.round;\n\n  function pathHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== NONE;\n  }\n\n  function pathHasStroke(style) {\n    var stroke = style.stroke;\n    return stroke != null && stroke !== NONE;\n  }\n\n  var strokeProps = ['lineCap', 'miterLimit', 'lineJoin'];\n  var svgStrokeProps = map(strokeProps, function (prop) {\n    return \"stroke-\" + prop.toLowerCase();\n  });\n\n  function mapStyleToAttrs(updateAttr, style, el, forceUpdate) {\n    var opacity = style.opacity == null ? 1 : style.opacity;\n\n    if (el instanceof ZRImage) {\n      updateAttr('opacity', opacity);\n      return;\n    }\n\n    if (pathHasFill(style)) {\n      var fill = normalizeColor(style.fill);\n      updateAttr('fill', fill.color);\n      var fillOpacity = style.fillOpacity != null ? style.fillOpacity * fill.opacity * opacity : fill.opacity * opacity;\n\n      if (forceUpdate || fillOpacity < 1) {\n        updateAttr('fill-opacity', fillOpacity);\n      }\n    } else {\n      updateAttr('fill', NONE);\n    }\n\n    if (pathHasStroke(style)) {\n      var stroke = normalizeColor(style.stroke);\n      updateAttr('stroke', stroke.color);\n      var strokeScale = style.strokeNoScale ? el.getLineScale() : 1;\n      var strokeWidth = strokeScale ? (style.lineWidth || 0) / strokeScale : 0;\n      var strokeOpacity = style.strokeOpacity != null ? style.strokeOpacity * stroke.opacity * opacity : stroke.opacity * opacity;\n      var strokeFirst = style.strokeFirst;\n\n      if (forceUpdate || strokeWidth !== 1) {\n        updateAttr('stroke-width', strokeWidth);\n      }\n\n      if (forceUpdate || strokeFirst) {\n        updateAttr('paint-order', strokeFirst ? 'stroke' : 'fill');\n      }\n\n      if (forceUpdate || strokeOpacity < 1) {\n        updateAttr('stroke-opacity', strokeOpacity);\n      }\n\n      if (style.lineDash) {\n        var _a = getLineDash(el),\n            lineDash = _a[0],\n            lineDashOffset = _a[1];\n\n        if (lineDash) {\n          lineDashOffset = mathRound$1(lineDashOffset || 0);\n          updateAttr('stroke-dasharray', lineDash.join(','));\n\n          if (lineDashOffset || forceUpdate) {\n            updateAttr('stroke-dashoffset', lineDashOffset);\n          }\n        }\n      } else if (forceUpdate) {\n        updateAttr('stroke-dasharray', NONE);\n      }\n\n      for (var i = 0; i < strokeProps.length; i++) {\n        var propName = strokeProps[i];\n\n        if (forceUpdate || style[propName] !== DEFAULT_PATH_STYLE[propName]) {\n          var val = style[propName] || DEFAULT_PATH_STYLE[propName];\n          val && updateAttr(svgStrokeProps[i], val);\n        }\n      }\n    } else if (forceUpdate) {\n      updateAttr('stroke', NONE);\n    }\n  }\n\n  var SVGNS = 'http://www.w3.org/2000/svg';\n  var XLINKNS = 'http://www.w3.org/1999/xlink';\n  var XMLNS = 'http://www.w3.org/2000/xmlns/';\n  var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace';\n\n  function createElement(name) {\n    return document.createElementNS(SVGNS, name);\n  }\n\n  function createVNode(tag, key, attrs, children, text) {\n    return {\n      tag: tag,\n      attrs: attrs || {},\n      children: children,\n      text: text,\n      key: key\n    };\n  }\n\n  function createElementOpen(name, attrs) {\n    var attrsStr = [];\n\n    if (attrs) {\n      for (var key in attrs) {\n        var val = attrs[key];\n        var part = key;\n\n        if (val === false) {\n          continue;\n        } else if (val !== true && val != null) {\n          part += \"=\\\"\" + val + \"\\\"\";\n        }\n\n        attrsStr.push(part);\n      }\n    }\n\n    return \"<\" + name + \" \" + attrsStr.join(' ') + \">\";\n  }\n\n  function createElementClose(name) {\n    return \"</\" + name + \">\";\n  }\n\n  function vNodeToString(el, opts) {\n    opts = opts || {};\n    var S = opts.newline ? '\\n' : '';\n\n    function convertElToString(el) {\n      var children = el.children,\n          tag = el.tag,\n          attrs = el.attrs;\n      return createElementOpen(tag, attrs) + (el.text || '') + (children ? \"\" + S + map(children, function (child) {\n        return convertElToString(child);\n      }).join(S) + S : '') + createElementClose(tag);\n    }\n\n    return convertElToString(el);\n  }\n\n  function getCssString(selectorNodes, animationNodes, opts) {\n    opts = opts || {};\n    var S = opts.newline ? '\\n' : '';\n    var bracketBegin = \" {\" + S;\n    var bracketEnd = S + \"}\";\n    var selectors = map(keys(selectorNodes), function (className) {\n      return className + bracketBegin + map(keys(selectorNodes[className]), function (attrName) {\n        return attrName + \":\" + selectorNodes[className][attrName] + \";\";\n      }).join(S) + bracketEnd;\n    }).join(S);\n    var animations = map(keys(animationNodes), function (animationName) {\n      return \"@keyframes \" + animationName + bracketBegin + map(keys(animationNodes[animationName]), function (percent) {\n        return percent + bracketBegin + map(keys(animationNodes[animationName][percent]), function (attrName) {\n          var val = animationNodes[animationName][percent][attrName];\n\n          if (attrName === 'd') {\n            val = \"path(\\\"\" + val + \"\\\")\";\n          }\n\n          return attrName + \":\" + val + \";\";\n        }).join(S) + bracketEnd;\n      }).join(S) + bracketEnd;\n    }).join(S);\n\n    if (!selectors && !animations) {\n      return '';\n    }\n\n    return ['<![CDATA[', selectors, animations, ']]>'].join(S);\n  }\n\n  function createBrushScope(zrId) {\n    return {\n      zrId: zrId,\n      shadowCache: {},\n      patternCache: {},\n      gradientCache: {},\n      clipPathCache: {},\n      defs: {},\n      cssNodes: {},\n      cssAnims: {},\n      cssClassIdx: 0,\n      cssAnimIdx: 0,\n      shadowIdx: 0,\n      gradientIdx: 0,\n      patternIdx: 0,\n      clipPathIdx: 0\n    };\n  }\n\n  function createSVGVNode(width, height, children, useViewBox) {\n    return createVNode('svg', 'root', {\n      'width': width,\n      'height': height,\n      'xmlns': SVGNS,\n      'xmlns:xlink': XLINKNS,\n      'version': '1.1',\n      'baseProfile': 'full',\n      'viewBox': useViewBox ? \"0 0 \" + width + \" \" + height : false\n    }, children);\n  }\n\n  var EASING_MAP = {\n    cubicIn: '0.32,0,0.67,0',\n    cubicOut: '0.33,1,0.68,1',\n    cubicInOut: '0.65,0,0.35,1',\n    quadraticIn: '0.11,0,0.5,0',\n    quadraticOut: '0.5,1,0.89,1',\n    quadraticInOut: '0.45,0,0.55,1',\n    quarticIn: '0.5,0,0.75,0',\n    quarticOut: '0.25,1,0.5,1',\n    quarticInOut: '0.76,0,0.24,1',\n    quinticIn: '0.64,0,0.78,0',\n    quinticOut: '0.22,1,0.36,1',\n    quinticInOut: '0.83,0,0.17,1',\n    sinusoidalIn: '0.12,0,0.39,0',\n    sinusoidalOut: '0.61,1,0.88,1',\n    sinusoidalInOut: '0.37,0,0.63,1',\n    exponentialIn: '0.7,0,0.84,0',\n    exponentialOut: '0.16,1,0.3,1',\n    exponentialInOut: '0.87,0,0.13,1',\n    circularIn: '0.55,0,1,0.45',\n    circularOut: '0,0.55,0.45,1',\n    circularInOut: '0.85,0,0.15,1'\n  };\n  var transformOriginKey = 'transform-origin';\n\n  function buildPathString(el, kfShape, path) {\n    var shape = extend({}, el.shape);\n    extend(shape, kfShape);\n    el.buildPath(path, shape);\n    var svgPathBuilder = new SVGPathRebuilder();\n    svgPathBuilder.reset(getPathPrecision(el));\n    path.rebuildPath(svgPathBuilder, 1);\n    svgPathBuilder.generateStr();\n    return svgPathBuilder.getStr();\n  }\n\n  function setTransformOrigin(target, transform) {\n    var originX = transform.originX,\n        originY = transform.originY;\n\n    if (originX || originY) {\n      target[transformOriginKey] = originX + \"px \" + originY + \"px\";\n    }\n  }\n\n  var ANIMATE_STYLE_MAP = {\n    fill: 'fill',\n    opacity: 'opacity',\n    lineWidth: 'stroke-width',\n    lineDashOffset: 'stroke-dashoffset'\n  };\n\n  function addAnimation(cssAnim, scope) {\n    var animationName = scope.zrId + '-ani-' + scope.cssAnimIdx++;\n    scope.cssAnims[animationName] = cssAnim;\n    return animationName;\n  }\n\n  function createCompoundPathCSSAnimation(el, attrs, scope) {\n    var paths = el.shape.paths;\n    var composedAnim = {};\n    var cssAnimationCfg;\n    var cssAnimationName;\n    each(paths, function (path) {\n      var subScope = createBrushScope(scope.zrId);\n      subScope.animation = true;\n      createCSSAnimation(path, {}, subScope, true);\n      var cssAnims = subScope.cssAnims;\n      var cssNodes = subScope.cssNodes;\n      var animNames = keys(cssAnims);\n      var len = animNames.length;\n\n      if (!len) {\n        return;\n      }\n\n      cssAnimationName = animNames[len - 1];\n      var lastAnim = cssAnims[cssAnimationName];\n\n      for (var percent in lastAnim) {\n        var kf = lastAnim[percent];\n        composedAnim[percent] = composedAnim[percent] || {\n          d: ''\n        };\n        composedAnim[percent].d += kf.d || '';\n      }\n\n      for (var className in cssNodes) {\n        var val = cssNodes[className].animation;\n\n        if (val.indexOf(cssAnimationName) >= 0) {\n          cssAnimationCfg = val;\n        }\n      }\n    });\n\n    if (!cssAnimationCfg) {\n      return;\n    }\n\n    attrs.d = false;\n    var animationName = addAnimation(composedAnim, scope);\n    return cssAnimationCfg.replace(cssAnimationName, animationName);\n  }\n\n  function getEasingFunc(easing) {\n    return isString(easing) ? EASING_MAP[easing] ? \"cubic-bezier(\" + EASING_MAP[easing] + \")\" : createCubicEasingFunc(easing) ? easing : '' : '';\n  }\n\n  function createCSSAnimation(el, attrs, scope, onlyShape) {\n    var animators = el.animators;\n    var len = animators.length;\n    var cssAnimations = [];\n\n    if (el instanceof CompoundPath) {\n      var animationCfg = createCompoundPathCSSAnimation(el, attrs, scope);\n\n      if (animationCfg) {\n        cssAnimations.push(animationCfg);\n      } else if (!len) {\n        return;\n      }\n    } else if (!len) {\n      return;\n    }\n\n    var groupAnimators = {};\n\n    for (var i = 0; i < len; i++) {\n      var animator = animators[i];\n      var cfgArr = [animator.getMaxTime() / 1000 + 's'];\n      var easing = getEasingFunc(animator.getClip().easing);\n      var delay = animator.getDelay();\n\n      if (easing) {\n        cfgArr.push(easing);\n      } else {\n        cfgArr.push('linear');\n      }\n\n      if (delay) {\n        cfgArr.push(delay / 1000 + 's');\n      }\n\n      if (animator.getLoop()) {\n        cfgArr.push('infinite');\n      }\n\n      var cfg = cfgArr.join(' ');\n      groupAnimators[cfg] = groupAnimators[cfg] || [cfg, []];\n      groupAnimators[cfg][1].push(animator);\n    }\n\n    function createSingleCSSAnimation(groupAnimator) {\n      var animators = groupAnimator[1];\n      var len = animators.length;\n      var transformKfs = {};\n      var shapeKfs = {};\n      var finalKfs = {};\n      var animationTimingFunctionAttrName = 'animation-timing-function';\n\n      function saveAnimatorTrackToCssKfs(animator, cssKfs, toCssAttrName) {\n        var tracks = animator.getTracks();\n        var maxTime = animator.getMaxTime();\n\n        for (var k = 0; k < tracks.length; k++) {\n          var track = tracks[k];\n\n          if (track.needsAnimate()) {\n            var kfs = track.keyframes;\n            var attrName = track.propName;\n            toCssAttrName && (attrName = toCssAttrName(attrName));\n\n            if (attrName) {\n              for (var i = 0; i < kfs.length; i++) {\n                var kf = kfs[i];\n                var percent = Math.round(kf.time / maxTime * 100) + '%';\n                var kfEasing = getEasingFunc(kf.easing);\n                var rawValue = kf.rawValue;\n\n                if (isString(rawValue) || isNumber(rawValue)) {\n                  cssKfs[percent] = cssKfs[percent] || {};\n                  cssKfs[percent][attrName] = kf.rawValue;\n\n                  if (kfEasing) {\n                    cssKfs[percent][animationTimingFunctionAttrName] = kfEasing;\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n\n      for (var i = 0; i < len; i++) {\n        var animator = animators[i];\n        var targetProp = animator.targetName;\n\n        if (!targetProp) {\n          !onlyShape && saveAnimatorTrackToCssKfs(animator, transformKfs);\n        } else if (targetProp === 'shape') {\n          saveAnimatorTrackToCssKfs(animator, shapeKfs);\n        }\n      }\n\n      for (var percent in transformKfs) {\n        var transform = {};\n        copyTransform(transform, el);\n        extend(transform, transformKfs[percent]);\n        var str = getSRTTransformString(transform);\n        var timingFunction = transformKfs[percent][animationTimingFunctionAttrName];\n        finalKfs[percent] = str ? {\n          transform: str\n        } : {};\n        setTransformOrigin(finalKfs[percent], transform);\n\n        if (timingFunction) {\n          finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n        }\n      }\n\n      var path;\n      var canAnimateShape = true;\n\n      for (var percent in shapeKfs) {\n        finalKfs[percent] = finalKfs[percent] || {};\n        var isFirst = !path;\n        var timingFunction = shapeKfs[percent][animationTimingFunctionAttrName];\n\n        if (isFirst) {\n          path = new PathProxy();\n        }\n\n        var len_1 = path.len();\n        path.reset();\n        finalKfs[percent].d = buildPathString(el, shapeKfs[percent], path);\n        var newLen = path.len();\n\n        if (!isFirst && len_1 !== newLen) {\n          canAnimateShape = false;\n          break;\n        }\n\n        if (timingFunction) {\n          finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n        }\n      }\n\n      if (!canAnimateShape) {\n        for (var percent in finalKfs) {\n          delete finalKfs[percent].d;\n        }\n      }\n\n      if (!onlyShape) {\n        for (var i = 0; i < len; i++) {\n          var animator = animators[i];\n          var targetProp = animator.targetName;\n\n          if (targetProp === 'style') {\n            saveAnimatorTrackToCssKfs(animator, finalKfs, function (propName) {\n              return ANIMATE_STYLE_MAP[propName];\n            });\n          }\n        }\n      }\n\n      var percents = keys(finalKfs);\n      var allTransformOriginSame = true;\n      var transformOrigin;\n\n      for (var i = 1; i < percents.length; i++) {\n        var p0 = percents[i - 1];\n        var p1 = percents[i];\n\n        if (finalKfs[p0][transformOriginKey] !== finalKfs[p1][transformOriginKey]) {\n          allTransformOriginSame = false;\n          break;\n        }\n\n        transformOrigin = finalKfs[p0][transformOriginKey];\n      }\n\n      if (allTransformOriginSame && transformOrigin) {\n        for (var percent in finalKfs) {\n          if (finalKfs[percent][transformOriginKey]) {\n            delete finalKfs[percent][transformOriginKey];\n          }\n        }\n\n        attrs[transformOriginKey] = transformOrigin;\n      }\n\n      if (filter(percents, function (percent) {\n        return keys(finalKfs[percent]).length > 0;\n      }).length) {\n        var animationName = addAnimation(finalKfs, scope);\n        return animationName + \" \" + groupAnimator[0] + \" both\";\n      }\n    }\n\n    for (var key in groupAnimators) {\n      var animationCfg = createSingleCSSAnimation(groupAnimators[key]);\n\n      if (animationCfg) {\n        cssAnimations.push(animationCfg);\n      }\n    }\n\n    if (cssAnimations.length) {\n      var className = scope.zrId + '-cls-' + scope.cssClassIdx++;\n      scope.cssNodes['.' + className] = {\n        animation: cssAnimations.join(',')\n      };\n      attrs[\"class\"] = className;\n    }\n  }\n\n  var round$2 = Math.round;\n\n  function isImageLike$1(val) {\n    return val && isString(val.src);\n  }\n\n  function isCanvasLike(val) {\n    return val && isFunction(val.toDataURL);\n  }\n\n  function setStyleAttrs(attrs, style, el, scope) {\n    mapStyleToAttrs(function (key, val) {\n      var isFillStroke = key === 'fill' || key === 'stroke';\n\n      if (isFillStroke && isGradient(val)) {\n        setGradient(style, attrs, key, scope);\n      } else if (isFillStroke && isPattern(val)) {\n        setPattern(el, attrs, key, scope);\n      } else {\n        attrs[key] = val;\n      }\n    }, style, el, false);\n    setShadow(el, attrs, scope);\n  }\n\n  function noRotateScale(m) {\n    return isAroundZero$1(m[0] - 1) && isAroundZero$1(m[1]) && isAroundZero$1(m[2]) && isAroundZero$1(m[3] - 1);\n  }\n\n  function noTranslate(m) {\n    return isAroundZero$1(m[4]) && isAroundZero$1(m[5]);\n  }\n\n  function setTransform(attrs, m, compress) {\n    if (m && !(noTranslate(m) && noRotateScale(m))) {\n      var mul = compress ? 10 : 1e4;\n      attrs.transform = noRotateScale(m) ? \"translate(\" + round$2(m[4] * mul) / mul + \" \" + round$2(m[5] * mul) / mul + \")\" : getMatrixStr(m);\n    }\n  }\n\n  function convertPolyShape(shape, attrs, mul) {\n    var points = shape.points;\n    var strArr = [];\n\n    for (var i = 0; i < points.length; i++) {\n      strArr.push(round$2(points[i][0] * mul) / mul);\n      strArr.push(round$2(points[i][1] * mul) / mul);\n    }\n\n    attrs.points = strArr.join(' ');\n  }\n\n  function validatePolyShape(shape) {\n    return !shape.smooth;\n  }\n\n  function createAttrsConvert(desc) {\n    var normalizedDesc = map(desc, function (item) {\n      return typeof item === 'string' ? [item, item] : item;\n    });\n    return function (shape, attrs, mul) {\n      for (var i = 0; i < normalizedDesc.length; i++) {\n        var item = normalizedDesc[i];\n        var val = shape[item[0]];\n\n        if (val != null) {\n          attrs[item[1]] = round$2(val * mul) / mul;\n        }\n      }\n    };\n  }\n\n  var buitinShapesDef = {\n    circle: [createAttrsConvert(['cx', 'cy', 'r'])],\n    polyline: [convertPolyShape, validatePolyShape],\n    polygon: [convertPolyShape, validatePolyShape]\n  };\n\n  function hasShapeAnimation(el) {\n    var animators = el.animators;\n\n    for (var i = 0; i < animators.length; i++) {\n      if (animators[i].targetName === 'shape') {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function brushSVGPath(el, scope) {\n    var style = el.style;\n    var shape = el.shape;\n    var builtinShpDef = buitinShapesDef[el.type];\n    var attrs = {};\n    var needsAnimate = scope.animation;\n    var svgElType = 'path';\n    var strokePercent = el.style.strokePercent;\n    var precision = scope.compress && getPathPrecision(el) || 4;\n\n    if (builtinShpDef && !scope.willUpdate && !(builtinShpDef[1] && !builtinShpDef[1](shape)) && !(needsAnimate && hasShapeAnimation(el)) && !(strokePercent < 1)) {\n      svgElType = el.type;\n      var mul = Math.pow(10, precision);\n      builtinShpDef[0](shape, attrs, mul);\n    } else {\n      if (!el.path) {\n        el.createPathProxy();\n      }\n\n      var path = el.path;\n\n      if (el.shapeChanged()) {\n        path.beginPath();\n        el.buildPath(path, el.shape);\n        el.pathUpdated();\n      }\n\n      var pathVersion = path.getVersion();\n      var elExt = el;\n      var svgPathBuilder = elExt.__svgPathBuilder;\n\n      if (elExt.__svgPathVersion !== pathVersion || !svgPathBuilder || strokePercent !== elExt.__svgPathStrokePercent) {\n        if (!svgPathBuilder) {\n          svgPathBuilder = elExt.__svgPathBuilder = new SVGPathRebuilder();\n        }\n\n        svgPathBuilder.reset(precision);\n        path.rebuildPath(svgPathBuilder, strokePercent);\n        svgPathBuilder.generateStr();\n        elExt.__svgPathVersion = pathVersion;\n        elExt.__svgPathStrokePercent = strokePercent;\n      }\n\n      attrs.d = svgPathBuilder.getStr();\n    }\n\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode(svgElType, el.id + '', attrs);\n  }\n\n  function brushSVGImage(el, scope) {\n    var style = el.style;\n    var image = style.image;\n\n    if (image && !isString(image)) {\n      if (isImageLike$1(image)) {\n        image = image.src;\n      } else if (isCanvasLike(image)) {\n        image = image.toDataURL();\n      }\n    }\n\n    if (!image) {\n      return;\n    }\n\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var dw = style.width;\n    var dh = style.height;\n    var attrs = {\n      href: image,\n      width: dw,\n      height: dh\n    };\n\n    if (x) {\n      attrs.x = x;\n    }\n\n    if (y) {\n      attrs.y = y;\n    }\n\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode('image', el.id + '', attrs);\n  }\n\n  function brushSVGTSpan(el, scope) {\n    var style = el.style;\n    var text = style.text;\n    text != null && (text += '');\n\n    if (!text || isNaN(style.x) || isNaN(style.y)) {\n      return;\n    }\n\n    var font = style.font || DEFAULT_FONT;\n    var x = style.x || 0;\n    var y = adjustTextY(style.y || 0, getLineHeight(font), style.textBaseline);\n    var textAlign = TEXT_ALIGN_TO_ANCHOR[style.textAlign] || style.textAlign;\n    var attrs = {\n      'dominant-baseline': 'central',\n      'text-anchor': textAlign\n    };\n\n    if (hasSeparateFont(style)) {\n      var separatedFontStr = '';\n      var fontStyle = style.fontStyle;\n      var fontSize = parseFontSize(style.fontSize);\n\n      if (!parseFloat(fontSize)) {\n        return;\n      }\n\n      var fontFamily = style.fontFamily || DEFAULT_FONT_FAMILY;\n      var fontWeight = style.fontWeight;\n      separatedFontStr += \"font-size:\" + fontSize + \";font-family:\" + fontFamily + \";\";\n\n      if (fontStyle && fontStyle !== 'normal') {\n        separatedFontStr += \"font-style:\" + fontStyle + \";\";\n      }\n\n      if (fontWeight && fontWeight !== 'normal') {\n        separatedFontStr += \"font-weight:\" + fontWeight + \";\";\n      }\n\n      attrs.style = separatedFontStr;\n    } else {\n      attrs.style = \"font: \" + font;\n    }\n\n    if (text.match(/\\s/)) {\n      attrs['xml:space'] = 'preserve';\n    }\n\n    if (x) {\n      attrs.x = x;\n    }\n\n    if (y) {\n      attrs.y = y;\n    }\n\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode('text', el.id + '', attrs, undefined, text);\n  }\n\n  function brush$1(el, scope) {\n    if (el instanceof Path) {\n      return brushSVGPath(el, scope);\n    } else if (el instanceof ZRImage) {\n      return brushSVGImage(el, scope);\n    } else if (el instanceof TSpan) {\n      return brushSVGTSpan(el, scope);\n    }\n  }\n\n  function setShadow(el, attrs, scope) {\n    var style = el.style;\n\n    if (hasShadow(style)) {\n      var shadowKey = getShadowKey(el);\n      var shadowCache = scope.shadowCache;\n      var shadowId = shadowCache[shadowKey];\n\n      if (!shadowId) {\n        var globalScale = el.getGlobalScale();\n        var scaleX = globalScale[0];\n        var scaleY = globalScale[1];\n\n        if (!scaleX || !scaleY) {\n          return;\n        }\n\n        var offsetX = style.shadowOffsetX || 0;\n        var offsetY = style.shadowOffsetY || 0;\n        var blur_1 = style.shadowBlur;\n\n        var _a = normalizeColor(style.shadowColor),\n            opacity = _a.opacity,\n            color = _a.color;\n\n        var stdDx = blur_1 / 2 / scaleX;\n        var stdDy = blur_1 / 2 / scaleY;\n        var stdDeviation = stdDx + ' ' + stdDy;\n        shadowId = scope.zrId + '-s' + scope.shadowIdx++;\n        scope.defs[shadowId] = createVNode('filter', shadowId, {\n          'id': shadowId,\n          'x': '-100%',\n          'y': '-100%',\n          'width': '300%',\n          'height': '300%'\n        }, [createVNode('feDropShadow', '', {\n          'dx': offsetX / scaleX,\n          'dy': offsetY / scaleY,\n          'stdDeviation': stdDeviation,\n          'flood-color': color,\n          'flood-opacity': opacity\n        })]);\n        shadowCache[shadowKey] = shadowId;\n      }\n\n      attrs.filter = getIdURL(shadowId);\n    }\n  }\n\n  function setGradient(style, attrs, target, scope) {\n    var val = style[target];\n    var gradientTag;\n    var gradientAttrs = {\n      'gradientUnits': val.global ? 'userSpaceOnUse' : 'objectBoundingBox'\n    };\n\n    if (isLinearGradient(val)) {\n      gradientTag = 'linearGradient';\n      gradientAttrs.x1 = val.x;\n      gradientAttrs.y1 = val.y;\n      gradientAttrs.x2 = val.x2;\n      gradientAttrs.y2 = val.y2;\n    } else if (isRadialGradient(val)) {\n      gradientTag = 'radialGradient';\n      gradientAttrs.cx = retrieve2(val.x, 0.5);\n      gradientAttrs.cy = retrieve2(val.y, 0.5);\n      gradientAttrs.r = retrieve2(val.r, 0.5);\n    } else {\n      {\n        logError('Illegal gradient type.');\n      }\n      return;\n    }\n\n    var colors = val.colorStops;\n    var colorStops = [];\n\n    for (var i = 0, len = colors.length; i < len; ++i) {\n      var offset = round4(colors[i].offset) * 100 + '%';\n      var stopColor = colors[i].color;\n\n      var _a = normalizeColor(stopColor),\n          color = _a.color,\n          opacity = _a.opacity;\n\n      var stopsAttrs = {\n        'offset': offset\n      };\n      stopsAttrs['stop-color'] = color;\n\n      if (opacity < 1) {\n        stopsAttrs['stop-opacity'] = opacity;\n      }\n\n      colorStops.push(createVNode('stop', i + '', stopsAttrs));\n    }\n\n    var gradientVNode = createVNode(gradientTag, '', gradientAttrs, colorStops);\n    var gradientKey = vNodeToString(gradientVNode);\n    var gradientCache = scope.gradientCache;\n    var gradientId = gradientCache[gradientKey];\n\n    if (!gradientId) {\n      gradientId = scope.zrId + '-g' + scope.gradientIdx++;\n      gradientCache[gradientKey] = gradientId;\n      gradientAttrs.id = gradientId;\n      scope.defs[gradientId] = createVNode(gradientTag, gradientId, gradientAttrs, colorStops);\n    }\n\n    attrs[target] = getIdURL(gradientId);\n  }\n\n  function setPattern(el, attrs, target, scope) {\n    var val = el.style[target];\n    var patternAttrs = {\n      'patternUnits': 'userSpaceOnUse'\n    };\n    var child;\n\n    if (isImagePattern(val)) {\n      var imageWidth_1 = val.imageWidth;\n      var imageHeight_1 = val.imageHeight;\n      var imageSrc = void 0;\n      var patternImage = val.image;\n\n      if (isString(patternImage)) {\n        imageSrc = patternImage;\n      } else if (isImageLike$1(patternImage)) {\n        imageSrc = patternImage.src;\n      } else if (isCanvasLike(patternImage)) {\n        imageSrc = patternImage.toDataURL();\n      }\n\n      if (typeof Image === 'undefined') {\n        var errMsg = 'Image width/height must been given explictly in svg-ssr renderer.';\n        assert(imageWidth_1, errMsg);\n        assert(imageHeight_1, errMsg);\n      } else if (imageWidth_1 == null || imageHeight_1 == null) {\n        var setSizeToVNode_1 = function (vNode, img) {\n          if (vNode) {\n            var svgEl = vNode.elm;\n            var width = vNode.attrs.width = imageWidth_1 || img.width;\n            var height = vNode.attrs.height = imageHeight_1 || img.height;\n\n            if (svgEl) {\n              svgEl.setAttribute('width', width);\n              svgEl.setAttribute('height', height);\n            }\n          }\n        };\n\n        var createdImage = createOrUpdateImage(imageSrc, null, el, function (img) {\n          setSizeToVNode_1(patternVNode, img);\n          setSizeToVNode_1(child, img);\n        });\n\n        if (createdImage && createdImage.width && createdImage.height) {\n          imageWidth_1 = imageWidth_1 || createdImage.width;\n          imageHeight_1 = imageHeight_1 || createdImage.height;\n        }\n      }\n\n      child = createVNode('image', 'img', {\n        href: imageSrc,\n        width: imageWidth_1,\n        height: imageHeight_1\n      });\n      patternAttrs.width = imageWidth_1;\n      patternAttrs.height = imageHeight_1;\n    } else if (val.svgElement) {\n      child = clone(val.svgElement);\n      patternAttrs.width = val.svgWidth;\n      patternAttrs.height = val.svgHeight;\n    }\n\n    if (!child) {\n      return;\n    }\n\n    patternAttrs.patternTransform = getSRTTransformString(val);\n    var patternVNode = createVNode('pattern', '', patternAttrs, [child]);\n    var patternKey = vNodeToString(patternVNode);\n    var patternCache = scope.patternCache;\n    var patternId = patternCache[patternKey];\n\n    if (!patternId) {\n      patternId = scope.zrId + '-p' + scope.patternIdx++;\n      patternCache[patternKey] = patternId;\n      patternAttrs.id = patternId;\n      patternVNode = scope.defs[patternId] = createVNode('pattern', patternId, patternAttrs, [child]);\n    }\n\n    attrs[target] = getIdURL(patternId);\n  }\n\n  function setClipPath(clipPath, attrs, scope) {\n    var clipPathCache = scope.clipPathCache,\n        defs = scope.defs;\n    var clipPathId = clipPathCache[clipPath.id];\n\n    if (!clipPathId) {\n      clipPathId = scope.zrId + '-c' + scope.clipPathIdx++;\n      var clipPathAttrs = {\n        id: clipPathId\n      };\n      clipPathCache[clipPath.id] = clipPathId;\n      defs[clipPathId] = createVNode('clipPath', clipPathId, clipPathAttrs, [brushSVGPath(clipPath, scope)]);\n    }\n\n    attrs['clip-path'] = getIdURL(clipPathId);\n  }\n\n  function createTextNode(text) {\n    return document.createTextNode(text);\n  }\n\n  function insertBefore(parentNode, newNode, referenceNode) {\n    parentNode.insertBefore(newNode, referenceNode);\n  }\n\n  function removeChild(node, child) {\n    node.removeChild(child);\n  }\n\n  function appendChild(node, child) {\n    node.appendChild(child);\n  }\n\n  function parentNode(node) {\n    return node.parentNode;\n  }\n\n  function nextSibling(node) {\n    return node.nextSibling;\n  }\n\n  function setTextContent(node, text) {\n    node.textContent = text;\n  }\n\n  var colonChar = 58;\n  var xChar = 120;\n  var emptyNode = createVNode('', '');\n\n  function isUndef(s) {\n    return s === undefined;\n  }\n\n  function isDef(s) {\n    return s !== undefined;\n  }\n\n  function createKeyToOldIdx(children, beginIdx, endIdx) {\n    var map$$1 = {};\n\n    for (var i = beginIdx; i <= endIdx; ++i) {\n      var key = children[i].key;\n\n      if (key !== undefined) {\n        {\n          if (map$$1[key] != null) {\n            console.error(\"Duplicate key \" + key);\n          }\n        }\n        map$$1[key] = i;\n      }\n    }\n\n    return map$$1;\n  }\n\n  function sameVnode(vnode1, vnode2) {\n    var isSameKey = vnode1.key === vnode2.key;\n    var isSameTag = vnode1.tag === vnode2.tag;\n    return isSameTag && isSameKey;\n  }\n\n  function createElm(vnode) {\n    var i;\n    var children = vnode.children;\n    var tag = vnode.tag;\n\n    if (isDef(tag)) {\n      var elm = vnode.elm = createElement(tag);\n      updateAttrs(emptyNode, vnode);\n\n      if (isArray(children)) {\n        for (i = 0; i < children.length; ++i) {\n          var ch = children[i];\n\n          if (ch != null) {\n            appendChild(elm, createElm(ch));\n          }\n        }\n      } else if (isDef(vnode.text) && !isObject(vnode.text)) {\n        appendChild(elm, createTextNode(vnode.text));\n      }\n    } else {\n      vnode.elm = createTextNode(vnode.text);\n    }\n\n    return vnode.elm;\n  }\n\n  function addVnodes(parentElm, before, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      var ch = vnodes[startIdx];\n\n      if (ch != null) {\n        insertBefore(parentElm, createElm(ch), before);\n      }\n    }\n  }\n\n  function removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      var ch = vnodes[startIdx];\n\n      if (ch != null) {\n        if (isDef(ch.tag)) {\n          var parent_1 = parentNode(ch.elm);\n          removeChild(parent_1, ch.elm);\n        } else {\n          removeChild(parentElm, ch.elm);\n        }\n      }\n    }\n  }\n\n  function updateAttrs(oldVnode, vnode) {\n    var key;\n    var elm = vnode.elm;\n    var oldAttrs = oldVnode && oldVnode.attrs || {};\n    var attrs = vnode.attrs || {};\n\n    if (oldAttrs === attrs) {\n      return;\n    }\n\n    for (key in attrs) {\n      var cur = attrs[key];\n      var old = oldAttrs[key];\n\n      if (old !== cur) {\n        if (cur === true) {\n          elm.setAttribute(key, '');\n        } else if (cur === false) {\n          elm.removeAttribute(key);\n        } else {\n          if (key.charCodeAt(0) !== xChar) {\n            elm.setAttribute(key, cur);\n          } else if (key === 'xmlns:xlink' || key === 'xmlns') {\n            elm.setAttributeNS(XMLNS, key, cur);\n          } else if (key.charCodeAt(3) === colonChar) {\n            elm.setAttributeNS(XML_NAMESPACE, key, cur);\n          } else if (key.charCodeAt(5) === colonChar) {\n            elm.setAttributeNS(XLINKNS, key, cur);\n          } else {\n            elm.setAttribute(key, cur);\n          }\n        }\n      }\n    }\n\n    for (key in oldAttrs) {\n      if (!(key in attrs)) {\n        elm.removeAttribute(key);\n      }\n    }\n  }\n\n  function updateChildren(parentElm, oldCh, newCh) {\n    var oldStartIdx = 0;\n    var newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx;\n    var idxInOld;\n    var elmToMove;\n    var before;\n\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n      if (oldStartVnode == null) {\n        oldStartVnode = oldCh[++oldStartIdx];\n      } else if (oldEndVnode == null) {\n        oldEndVnode = oldCh[--oldEndIdx];\n      } else if (newStartVnode == null) {\n        newStartVnode = newCh[++newStartIdx];\n      } else if (newEndVnode == null) {\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\n        patchVnode(oldStartVnode, newStartVnode);\n        oldStartVnode = oldCh[++oldStartIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\n        patchVnode(oldEndVnode, newEndVnode);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldStartVnode, newEndVnode)) {\n        patchVnode(oldStartVnode, newEndVnode);\n        insertBefore(parentElm, oldStartVnode.elm, nextSibling(oldEndVnode.elm));\n        oldStartVnode = oldCh[++oldStartIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldEndVnode, newStartVnode)) {\n        patchVnode(oldEndVnode, newStartVnode);\n        insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else {\n        if (isUndef(oldKeyToIdx)) {\n          oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n        }\n\n        idxInOld = oldKeyToIdx[newStartVnode.key];\n\n        if (isUndef(idxInOld)) {\n          insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm);\n        } else {\n          elmToMove = oldCh[idxInOld];\n\n          if (elmToMove.tag !== newStartVnode.tag) {\n            insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm);\n          } else {\n            patchVnode(elmToMove, newStartVnode);\n            oldCh[idxInOld] = undefined;\n            insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);\n          }\n        }\n\n        newStartVnode = newCh[++newStartIdx];\n      }\n    }\n\n    if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\n      if (oldStartIdx > oldEndIdx) {\n        before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;\n        addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx);\n      } else {\n        removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n      }\n    }\n  }\n\n  function patchVnode(oldVnode, vnode) {\n    var elm = vnode.elm = oldVnode.elm;\n    var oldCh = oldVnode.children;\n    var ch = vnode.children;\n\n    if (oldVnode === vnode) {\n      return;\n    }\n\n    updateAttrs(oldVnode, vnode);\n\n    if (isUndef(vnode.text)) {\n      if (isDef(oldCh) && isDef(ch)) {\n        if (oldCh !== ch) {\n          updateChildren(elm, oldCh, ch);\n        }\n      } else if (isDef(ch)) {\n        if (isDef(oldVnode.text)) {\n          setTextContent(elm, '');\n        }\n\n        addVnodes(elm, null, ch, 0, ch.length - 1);\n      } else if (isDef(oldCh)) {\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n      } else if (isDef(oldVnode.text)) {\n        setTextContent(elm, '');\n      }\n    } else if (oldVnode.text !== vnode.text) {\n      if (isDef(oldCh)) {\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n      }\n\n      setTextContent(elm, vnode.text);\n    }\n  }\n\n  function patch(oldVnode, vnode) {\n    if (sameVnode(oldVnode, vnode)) {\n      patchVnode(oldVnode, vnode);\n    } else {\n      var elm = oldVnode.elm;\n      var parent_2 = parentNode(elm);\n      createElm(vnode);\n\n      if (parent_2 !== null) {\n        insertBefore(parent_2, vnode.elm, nextSibling(elm));\n        removeVnodes(parent_2, [oldVnode], 0, 0);\n      }\n    }\n\n    return vnode;\n  }\n\n  var svgId = 0;\n\n  var SVGPainter = function () {\n    function SVGPainter(root, storage, opts) {\n      this.type = 'svg';\n      this.refreshHover = createMethodNotSupport('refreshHover');\n      this.configLayer = createMethodNotSupport('configLayer');\n      this.storage = storage;\n      this._opts = opts = extend({}, opts);\n      this.root = root;\n      this._id = 'zr' + svgId++;\n      this._oldVNode = createSVGVNode(opts.width, opts.height);\n\n      if (root && !opts.ssr) {\n        var viewport = this._viewport = document.createElement('div');\n        viewport.style.cssText = 'position:relative;overflow:hidden';\n        var svgDom = this._svgDom = this._oldVNode.elm = createElement('svg');\n        updateAttrs(null, this._oldVNode);\n        viewport.appendChild(svgDom);\n        root.appendChild(viewport);\n      }\n\n      this.resize(opts.width, opts.height);\n    }\n\n    SVGPainter.prototype.getType = function () {\n      return this.type;\n    };\n\n    SVGPainter.prototype.getViewportRoot = function () {\n      return this._viewport;\n    };\n\n    SVGPainter.prototype.getViewportRootOffset = function () {\n      var viewportRoot = this.getViewportRoot();\n\n      if (viewportRoot) {\n        return {\n          offsetLeft: viewportRoot.offsetLeft || 0,\n          offsetTop: viewportRoot.offsetTop || 0\n        };\n      }\n    };\n\n    SVGPainter.prototype.getSvgDom = function () {\n      return this._svgDom;\n    };\n\n    SVGPainter.prototype.refresh = function () {\n      if (this.root) {\n        var vnode = this.renderToVNode({\n          willUpdate: true\n        });\n        vnode.attrs.style = 'position:absolute;left:0;top:0;user-select:none';\n        patch(this._oldVNode, vnode);\n        this._oldVNode = vnode;\n      }\n    };\n\n    SVGPainter.prototype.renderOneToVNode = function (el) {\n      return brush$1(el, createBrushScope(this._id));\n    };\n\n    SVGPainter.prototype.renderToVNode = function (opts) {\n      opts = opts || {};\n      var list = this.storage.getDisplayList(true);\n      var bgColor = this._backgroundColor;\n      var width = this._width;\n      var height = this._height;\n      var scope = createBrushScope(this._id);\n      scope.animation = opts.animation;\n      scope.willUpdate = opts.willUpdate;\n      scope.compress = opts.compress;\n      var children = [];\n\n      if (bgColor && bgColor !== 'none') {\n        var _a = normalizeColor(bgColor),\n            color = _a.color,\n            opacity = _a.opacity;\n\n        this._bgVNode = createVNode('rect', 'bg', {\n          width: width,\n          height: height,\n          x: '0',\n          y: '0',\n          id: '0',\n          fill: color,\n          'fill-opacity': opacity\n        });\n        children.push(this._bgVNode);\n      } else {\n        this._bgVNode = null;\n      }\n\n      var mainVNode = !opts.compress ? this._mainVNode = createVNode('g', 'main', {}, []) : null;\n\n      this._paintList(list, scope, mainVNode ? mainVNode.children : children);\n\n      mainVNode && children.push(mainVNode);\n      var defs = map(keys(scope.defs), function (id) {\n        return scope.defs[id];\n      });\n\n      if (defs.length) {\n        children.push(createVNode('defs', 'defs', {}, defs));\n      }\n\n      if (opts.animation) {\n        var animationCssStr = getCssString(scope.cssNodes, scope.cssAnims, {\n          newline: true\n        });\n\n        if (animationCssStr) {\n          var styleNode = createVNode('style', 'stl', {}, [], animationCssStr);\n          children.push(styleNode);\n        }\n      }\n\n      return createSVGVNode(width, height, children, opts.useViewBox);\n    };\n\n    SVGPainter.prototype.renderToString = function (opts) {\n      opts = opts || {};\n      return vNodeToString(this.renderToVNode({\n        animation: retrieve2(opts.cssAnimation, true),\n        willUpdate: false,\n        compress: true,\n        useViewBox: retrieve2(opts.useViewBox, true)\n      }), {\n        newline: true\n      });\n    };\n\n    SVGPainter.prototype.setBackgroundColor = function (backgroundColor) {\n      this._backgroundColor = backgroundColor;\n      var bgVNode = this._bgVNode;\n\n      if (bgVNode && bgVNode.elm) {\n        var _a = normalizeColor(backgroundColor),\n            color = _a.color,\n            opacity = _a.opacity;\n\n        bgVNode.elm.setAttribute('fill', color);\n\n        if (opacity < 1) {\n          bgVNode.elm.setAttribute('fill-opacity', opacity);\n        }\n      }\n    };\n\n    SVGPainter.prototype.getSvgRoot = function () {\n      return this._mainVNode && this._mainVNode.elm;\n    };\n\n    SVGPainter.prototype._paintList = function (list, scope, out) {\n      var listLen = list.length;\n      var clipPathsGroupsStack = [];\n      var clipPathsGroupsStackDepth = 0;\n      var currentClipPathGroup;\n      var prevClipPaths;\n      var clipGroupNodeIdx = 0;\n\n      for (var i = 0; i < listLen; i++) {\n        var displayable = list[i];\n\n        if (!displayable.invisible) {\n          var clipPaths = displayable.__clipPaths;\n          var len = clipPaths && clipPaths.length || 0;\n          var prevLen = prevClipPaths && prevClipPaths.length || 0;\n          var lca = void 0;\n\n          for (lca = Math.max(len - 1, prevLen - 1); lca >= 0; lca--) {\n            if (clipPaths && prevClipPaths && clipPaths[lca] === prevClipPaths[lca]) {\n              break;\n            }\n          }\n\n          for (var i_1 = prevLen - 1; i_1 > lca; i_1--) {\n            clipPathsGroupsStackDepth--;\n            currentClipPathGroup = clipPathsGroupsStack[clipPathsGroupsStackDepth - 1];\n          }\n\n          for (var i_2 = lca + 1; i_2 < len; i_2++) {\n            var groupAttrs = {};\n            setClipPath(clipPaths[i_2], groupAttrs, scope);\n            var g = createVNode('g', 'clip-g-' + clipGroupNodeIdx++, groupAttrs, []);\n            (currentClipPathGroup ? currentClipPathGroup.children : out).push(g);\n            clipPathsGroupsStack[clipPathsGroupsStackDepth++] = g;\n            currentClipPathGroup = g;\n          }\n\n          prevClipPaths = clipPaths;\n          var ret = brush$1(displayable, scope);\n\n          if (ret) {\n            (currentClipPathGroup ? currentClipPathGroup.children : out).push(ret);\n          }\n        }\n      }\n    };\n\n    SVGPainter.prototype.resize = function (width, height) {\n      var opts = this._opts;\n      var root = this.root;\n      var viewport = this._viewport;\n      width != null && (opts.width = width);\n      height != null && (opts.height = height);\n\n      if (root && viewport) {\n        viewport.style.display = 'none';\n        width = getSize(root, 0, opts);\n        height = getSize(root, 1, opts);\n        viewport.style.display = '';\n      }\n\n      if (this._width !== width || this._height !== height) {\n        this._width = width;\n        this._height = height;\n\n        if (viewport) {\n          var viewportStyle = viewport.style;\n          viewportStyle.width = width + 'px';\n          viewportStyle.height = height + 'px';\n        }\n\n        var svgDom = this._svgDom;\n\n        if (svgDom) {\n          svgDom.setAttribute('width', width);\n          svgDom.setAttribute('height', height);\n        }\n      }\n    };\n\n    SVGPainter.prototype.getWidth = function () {\n      return this._width;\n    };\n\n    SVGPainter.prototype.getHeight = function () {\n      return this._height;\n    };\n\n    SVGPainter.prototype.dispose = function () {\n      if (this.root) {\n        this.root.innerHTML = '';\n      }\n\n      this._svgDom = this._viewport = this.storage = this._oldVNode = this._bgVNode = this._mainVNode = null;\n    };\n\n    SVGPainter.prototype.clear = function () {\n      if (this._svgDom) {\n        this._svgDom.innerHTML = null;\n      }\n\n      this._oldVNode = null;\n    };\n\n    SVGPainter.prototype.toDataURL = function (base64) {\n      var str = encodeURIComponent(this.renderToString());\n      var prefix = 'data:image/svg+xml;';\n\n      if (base64) {\n        str = encodeBase64(str);\n        return str && prefix + 'base64,' + str;\n      }\n\n      return prefix + 'charset=UTF-8,' + str;\n    };\n\n    return SVGPainter;\n  }();\n\n  function createMethodNotSupport(method) {\n    return function () {\n      {\n        logError('In SVG mode painter not support method \"' + method + '\"');\n      }\n    };\n  }\n\n  registerPainter('svg', SVGPainter);\n  exports.version = version;\n  exports.dependencies = dependencies;\n  exports.PRIORITY = PRIORITY;\n  exports.init = init;\n  exports.connect = connect;\n  exports.disConnect = disConnect;\n  exports.disconnect = disconnect;\n  exports.dispose = dispose;\n  exports.getInstanceByDom = getInstanceByDom;\n  exports.getInstanceById = getInstanceById;\n  exports.registerTheme = registerTheme;\n  exports.registerPreprocessor = registerPreprocessor;\n  exports.registerProcessor = registerProcessor;\n  exports.registerPostInit = registerPostInit;\n  exports.registerPostUpdate = registerPostUpdate;\n  exports.registerUpdateLifecycle = registerUpdateLifecycle;\n  exports.registerAction = registerAction;\n  exports.registerCoordinateSystem = registerCoordinateSystem;\n  exports.getCoordinateSystemDimensions = getCoordinateSystemDimensions;\n  exports.registerLayout = registerLayout;\n  exports.registerVisual = registerVisual;\n  exports.registerLoading = registerLoading;\n  exports.setCanvasCreator = setCanvasCreator;\n  exports.registerMap = registerMap;\n  exports.getMap = getMap;\n  exports.registerTransform = registerTransform;\n  exports.dataTool = dataTool;\n  exports.registerLocale = registerLocale;\n  exports.zrender = zrender;\n  exports.matrix = matrix;\n  exports.vector = vector;\n  exports.zrUtil = util;\n  exports.color = color;\n  exports.helper = helper;\n  exports.number = number;\n  exports.time = time;\n  exports.graphic = graphic$1;\n  exports.format = format$1;\n  exports.util = util$1;\n  exports.List = SeriesData;\n  exports.ComponentModel = ComponentModel;\n  exports.ComponentView = ComponentView;\n  exports.SeriesModel = SeriesModel;\n  exports.ChartView = ChartView;\n  exports.extendComponentModel = extendComponentModel;\n  exports.extendComponentView = extendComponentView;\n  exports.extendSeriesModel = extendSeriesModel;\n  exports.extendChartView = extendChartView;\n  exports.throttle = throttle;\n  exports.use = use;\n  exports.setPlatformAPI = setPlatformAPI;\n  exports.parseGeoJSON = parseGeoJSON;\n  exports.parseGeoJson = parseGeoJSON;\n  exports.env = env;\n  exports.Model = Model;\n  exports.Axis = Axis;\n  exports.innerDrawElementOnCanvas = brushSingle;\n});\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('header',{staticClass:\"navbar navbar-dark sticky-top bg-info flex-md-nowrap p-0 shadow\"},[_c('a',{staticClass:\"fs-3 navbar-brand d-flex justify-content-center col-4 offset-4 px-3\",attrs:{\"href\":\"#\"}},[_vm._v(\"TWYW-Quantified self\")]),_vm._m(0),_c('div',{staticClass:\"btn-group\"},[_vm._m(1),_c('ul',{staticClass:\"dropdown-menu dropdown-menu-end\"},[_vm._m(2),_c('hr',{staticClass:\"dropdown-divider\"}),_c('li',[_c('a',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.signout}},[_vm._v(\"Sign out\")])])])])]),_c('router-view')],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('button',{staticClass:\"navbar-toggler position-absolute d-md-none collapsed\",attrs:{\"type\":\"button\",\"data-bs-toggle\":\"collapse\",\"data-bs-target\":\"#sidebarMenu\",\"aria-controls\":\"sidebarMenu\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\"}},[_c('span',{staticClass:\"navbar-toggler-icon\"})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('button',{staticClass:\"d-flex align-items-center justify-content-center p-3 link-dark text-decoration-none dropdown-toggle btn dropdown-toggle\",attrs:{\"type\":\"button\",\"data-bs-toggle\":\"dropdown\",\"data-bs-display\":\"static\",\"aria-expanded\":\"false\"}},[_c('img',{staticClass:\"rounded-circle\",attrs:{\"src\":require(\"../public/img/userimg.png\"),\"alt\":\"mdo\",\"width\":\"30\",\"height\":\"30\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_c('a',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"}},[_vm._v(\"Profile\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n    <header\n      class=\"navbar navbar-dark  sticky-top bg-info flex-md-nowrap p-0 shadow\"\n    >\n      <a\n        class=\"fs-3  navbar-brand d-flex justify-content-center col-4 offset-4 px-3 \"\n        href=\"#\"\n        >TWYW-Quantified self</a\n      >\n      <button\n        class=\"navbar-toggler position-absolute d-md-none collapsed\"\n        type=\"button\"\n        data-bs-toggle=\"collapse\"\n        data-bs-target=\"#sidebarMenu\"\n        aria-controls=\"sidebarMenu\"\n        aria-expanded=\"false\"\n        aria-label=\"Toggle navigation\"\n      >\n        <span class=\"navbar-toggler-icon\"></span>\n      </button>\n      <!-- <input class=\"form-control form-control-dark w-100\" type=\"text\" placeholder=\"Search\" aria-label=\"Search\"> -->\n      <div class=\"btn-group\">\n        <button\n          type=\"button\"\n          class=\"d-flex align-items-center justify-content-center p-3 link-dark text-decoration-none dropdown-toggle btn dropdown-toggle\"\n          data-bs-toggle=\"dropdown\"\n          data-bs-display=\"static\"\n          aria-expanded=\"false\"\n        >\n          <img\n            src=\"../public/img/userimg.png\"\n            alt=\"mdo\"\n            width=\"30\"\n            height=\"30\"\n            class=\"rounded-circle\"\n          />\n        </button>\n\n        <ul class=\"dropdown-menu dropdown-menu-end\">\n          <li><a class=\"dropdown-item\" type=\"button\">Profile</a></li>\n          <hr class=\"dropdown-divider\" />\n          <li>\n            <a @click=\"signout\" class=\"dropdown-item\" type=\"button\">Sign out</a>\n          </li>\n        </ul>\n      </div>\n    </header>\n    <router-view />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"App\",\n  methods: {\n    signout() {\n      this.$cookies.remove(\"user\");\n      this.$router.go();\n    }\n  }\n};\n</script>\n\n<style>\n#app {\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  margin-top: 0px;\n}\n</style>\n","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=eaefb42a&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=eaefb42a&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable no-console */\n\nimport { register } from 'register-service-worker'\n\nif (process.env.NODE_ENV === 'production') {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready () {\n      console.log(\n        'App is being served from cache by a service worker.\\n' +\n        'For more details, visit https://goo.gl/AFskqB'\n      )\n    },\n    registered () {\n      console.log('Service worker has been registered.')\n    },\n    cached () {\n      console.log('Content has been cached for offline use.')\n    },\n    updatefound () {\n      console.log('New content is downloading.')\n    },\n    updated () {\n      console.log('New content is available; please refresh.')\n    },\n    offline () {\n      console.log('No internet connection found. App is running in offline mode.')\n    },\n    error (error) {\n      console.error('Error during service worker registration:', error)\n    }\n  })\n}\n","/* eslint-disable */ \nvar Ciphers = {\n  alphabet: \"abcdefghijklmnopqrstuvwxyz\".split(\"\"),\n  morse: [\n    '.-',\n    '-...',\n    '-.-.',\n    '-..',\n    '.',\n    '..-.',\n    '--.',\n    '....',\n    '..',\n    '.---',\n    '-.-',\n    '.-..',\n    '--',\n    '-.',\n    '---',\n    '.--.',\n    '--.-',\n    '.-.',\n    '...',\n    '-',\n    '..-',\n    '...-',\n    '.--',\n    '-..-',\n    '-.--',\n    '--..'\n  ],\n  morse_numbers: [\n    \"-----\",\n    \".----\",\n    \"..---\",\n    \"...--\",\n    \"....-\",\n    \".....\",\n    \"-....\",\n    \"--...\",\n    \"---..\",\n    \"----.\"\n  ],\n  nato_spelling_alphabet: [\n    \"alfa\",\n    \"bravo\",\n    \"charlie\",\n    \"delta\",\n    \"echo\",\n    \"foxtrot\",\n    \"golf\",\n    \"hotel\",\n    \"india\",\n    \"juliett\",\n    \"kilo\",\n    \"lima\",\n    \"mike\",\n    \"november\",\n    \"oscar\",\n    \"papa\",\n    \"quebec\",\n    \"romeo\",\n    \"sierra\",\n    \"tango\",\n    \"uniform\",\n    \"victor\",\n    \"whiskey\",\n    \"x-ray\",\n    \"yankee\",\n    \"zulu\"\n  ],\n  ciphers: [\n    \"ROT13\",\n    \"Caesar Cipher\",\n    \"Morse Code\",\n    \"Vigenere Cipher\",\n    \"NATO Spelling Alphabet\",\n    \"Base64\",\n    \"URL Encoding\"\n  ],\n  parameters: [\n    \"[]\",\n    \"[shift_amount (Integer)]\",\n    \"[]\",\n    \"[String keyword (String)]\",\n    \"[]\",\n    \"[]\",\n    \"[]\"\n  ],\n  encode: function(cipher, cipher_text, params){\n    switch (cipher) {\n      case \"Caesar Cipher\":\n        var encoded_text = \"\";\n        for(var char_index = 0; char_index < cipher_text.length; char_index++){\n          var char = cipher_text[char_index];\n          if(this.alphabet.indexOf(char.toLowerCase()) != -1){\n            var letter_case = \"lower\";\n            if(char == char.toUpperCase()){\n              letter_case = \"upper\";\n            }\n            var encoded_char = this.alphabet[(this.alphabet.indexOf(char.toLowerCase()) + params[0]) % this.alphabet.length];\n            if(letter_case == \"lower\"){\n              encoded_text += encoded_char;\n            }else{\n              encoded_text += encoded_char.toUpperCase();\n            }\n          }else{\n            encoded_text += char;\n          }\n        }\n        return encoded_text;\n        break;\n      case \"ROT13\":\n        return this.encode(\"Caesar Cipher\", cipher_text, [13]);\n        break;\n      case \"Vigenere Cipher\":\n        params[0] = params[0].toLowerCase();\n        var encoded_text = \"\";\n        var current_encode_char = params[0][0];\n        var current_encode_char_index = 0;\n        for(var char_index = 0; char_index < cipher_text.length; char_index++){\n            var char = cipher_text[char_index];\n            if(this.alphabet.indexOf(char.toLowerCase()) != -1){\n              var letter_case = \"lower\";\n              if(char == char.toUpperCase()){\n                letter_case = \"upper\";\n              }\n\n              var encoded_char;\n\n              if(params[1]){\n                encoded_char = this.decode(\"Caesar Cipher\", char, [this.alphabet.indexOf(current_encode_char)]);\n              }else{\n                encoded_char = this.encode(\"Caesar Cipher\", char, [this.alphabet.indexOf(current_encode_char)]);\n              }\n\n              if(letter_case == \"lower\"){\n                encoded_text += encoded_char;\n              }else{\n                encoded_text += encoded_char.toUpperCase();\n              }\n\n              current_encode_char_index++;\n              current_encode_char = params[0][current_encode_char_index % params[0].length];\n            }else{\n              encoded_text += char;\n            }\n        }\n        return encoded_text;\n        break;\n      case \"Morse Code\":\n        var encoded_text = \"\";\n        for(var char_index = 0; char_index < cipher_text.length; char_index++){\n          if(char_index != 0){\n            encoded_text += \" \";\n          }\n          var char = cipher_text[char_index];\n          if(this.alphabet.indexOf(char.toLowerCase()) != -1){\n            encoded_text += this.morse[this.alphabet.indexOf(char.toLowerCase())];\n          }else if(parseInt(char) >= 0 && parseInt(char) <= 9){\n            encoded_text += this.morse_numbers[parseInt(char)];\n          }else if(char == \" \"){\n            encoded_text += \"/\";\n          }else if(char == \"!\"){\n            encoded_text += \"-.-.--\";\n          }else if(char == \".\"){\n            encoded_text += \".-.-.-\";\n          }else if(char == \",\"){\n            encoded_text += \"--..--\";\n          }else{\n            encoded_text += char;\n          }\n        }\n        return encoded_text;\n        break;\n      case \"NATO Spelling Alphabet\":\n        var encoded_text = \"\";\n        for(var char_index = 0; char_index < cipher_text.length; char_index++){\n          if(char_index != 0){\n            encoded_text += \" \";\n          }\n          var char = cipher_text[char_index];\n          if(this.alphabet.indexOf(char.toLowerCase()) != -1){\n            var encoded_char = this.nato_spelling_alphabet[this.alphabet.indexOf(char.toLowerCase())];\n            if(char == char.toUpperCase()){\n              encoded_text += encoded_char.toUpperCase();\n            }else{\n              encoded_text += encoded_char.toLowerCase();\n            }\n          }else if(char == \".\"){\n            encoded_text += \"Stop\";\n          }else if(char == \" \"){\n            encoded_text += \"(space)\";\n          }else{\n            encoded_text += char;\n          }\n        }\n        return encoded_text;\n        break;\n      case \"Base64\":\n        return btoa(cipher_text);\n        break;\n      case \"URL Encoding\":\n        return (encodeURIComponent(cipher_text));\n        break;\n      default:\n        console.error(\"Cipher \" + cipher + \" not found.\");\n        return;\n    }\n  },\n  decode: function(cipher, cipher_text, params){\n    switch (cipher) {\n      case \"Caesar Cipher\":\n        return this.encode(\"Caesar Cipher\", cipher_text, [26 - params[0]]);\n        break;\n      case \"ROT13\":\n        return this.decode(\"Caesar Cipher\", cipher_text, [13]);\n        break;\n      case \"Vigenere Cipher\":\n        return this.encode(\"Vigenere Cipher\", cipher_text, [params[0], true]);\n        break;\n      case \"Morse Code\":\n        var decoded_text = \"\";\n        cipher_text = cipher_text.split(\" \");\n        for(var char_index = 0; char_index < cipher_text.length; char_index++){\n          var char = cipher_text[char_index];\n          if(this.morse.indexOf(char) != -1){\n            decoded_text += this.alphabet[this.morse.indexOf(char)];\n          }else if(this.morse_numbers.indexOf(char) != -1){\n            decoded_text += this.morse_numbers.indexOf(char);\n          }else if(char == \"/\"){\n            decoded_text += \" \";\n          }else if(char == \"-.-.--\"){\n            decoded_text += \"!\";\n          }else if(char == \".-.-.-\"){\n            decoded_text += \".\";\n          }else if(char == \"--..--\"){\n            decoded_text += \",\";\n          }else{\n            decoded_text += char;\n          }\n        }\n        return decoded_text;\n        break;\n      case \"NATO Spelling Alphabet\":\n        var decoded_text = \"\";\n        cipher_text = cipher_text.split(\" \");\n        for(var char_index = 0; char_index < cipher_text.length; char_index++){\n          var char = cipher_text[char_index];\n          if(this.nato_spelling_alphabet.indexOf(char.toLowerCase()) != -1){\n            var decoded_char = this.alphabet[this.nato_spelling_alphabet.indexOf(char.toLowerCase())];\n            if(char == char.toUpperCase()){\n              decoded_text += decoded_char.toUpperCase();\n            }else{\n              decoded_text += decoded_char.toLowerCase();\n            }\n          }else if(char == \"Stop\"){\n            decoded_text += \".\";\n          }else if(char == \"(space)\"){\n            decoded_text += \" \";\n          }else{\n            decoded_text += char;\n          }\n        }\n        return decoded_text;\n        break;\n      case \"Base64\":\n        return atob(cipher_text);\n        break;\n      case \"URL Encoding\":\n        return decodeURIComponent(cipher_text);\n        break;\n      default:\n        console.error(\"Cipher \" + cipher + \" not found.\");\n        return;\n    }\n  }\n};\nexport default Ciphers;\n","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport cookies from 'vue-cookies'\nimport Ciphers from '../assets/ciphers.js'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    user_id:Ciphers.decode(\"Vigenere Cipher\",cookies.get(\"user\")||\"\",[\"Pwd\"]).split(\";\")[0]||\"\",\n    user:Ciphers.decode(\"Vigenere Cipher\",cookies.get(\"user\")||\"\",[\"Pwd\"]).split(\";\")[1]||\"\",\n    token:Ciphers.decode(\"Vigenere Cipher\",cookies.get(\"user\")||\"\",[\"Pwd\"]).split(\";\")[2]||\"\",\n    trackers:[]\n  },\n  getters:{\n    get_user(state){\n      return [state.user_id,state.user]\n    },\n    tracker_types(state){\n      return state.trackers.map(t=>t.tracker_type)\n    },\n    tracker_ids(state){\n      return state.trackers.map(t=>t.tracker_id)\n    },\n    get_trackers(state){\n      return state.trackers\n    }\n  },\n  mutations: {\n    logout(state){\n      state.user=\"\";\n      state.token=\"\";\n      state.user_id=\"\";\n      state.trackers=[]\n    },\n    login(state,obj){\n      state.user_id=obj.user_id;\n      state.user=obj.username;\n      state.token=obj.auth_token;\n    },\n    set_tracker(state,obj){\n      state.trackers.push(obj)\n    }\n  },\n  actions: {\n  },\n  modules: {\n  }\n})\n","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport store from '../store/index.js'\n\nVue.use(VueRouter)\n\nconst routes = [{\n    path:'/',\n    redirect:'/dashboard'\n  },{\n    path: '/dashboard',\n    component: () => import('@/views/DashIndex'),\n    children: [{\n        path: '/',\n        name: 'dash.home',\n        component: () => import('@/components/DashHome'),\n        meta: {\n          title: 'Home Dashboard',\n          auth:true\n        }\n      },\n      {\n          path: '/report',\n          name: 'schedule.report',\n          component: () => import('@/components/ScheduleReport'),\n          meta: {\n            title: 'Schedule Reports',\n            auth:true\n          }\n        },\n      {\n        path: '/tracker/add/',\n        name: 'tracker.add',\n        component: () => import('@/components/AddTracker')\n      },\n      {\n        path: '/tracker/update/:id',\n        name: 'tracker.update',\n        component: () => import('@/components/UpdateTracker')\n      },\n      {\n        path: '/tracker/:id',\n        name: 'dash.tracker',\n        component: () => import('@/components/DashTracker')\n      },\n      {\n        path: '/import/tracker',\n        name: 'imp.tracker',\n        component: () => import('@/components/ImportTracker')\n      },\n      {\n        path:'/log/add',\n        name: 'log.add',\n        redirect:'/log/null'\n      },\n\n      {\n        path:'/log/update/:id',\n        name: 'log.update',\n        component: () => import('@/components/UpdateLog')\n      },\n      {\n        path:'/log/:id',\n        name: 'log.add.id',\n        component: () => import('@/components/AddLog')\n      },\n      {\n        path: '/import/log',\n        name: 'imp.logs',\n        component: () => import('@/components/ImportLogs')\n      }\n    ]\n  },\n  {\n    path: '/login',\n    name: 'login',\n    component: () => import('@/views/LogIn'),\n    meta:{auth:false}\n  },\n  {\n    path: '/signup',\n    name: 'signup',\n    component: () => import('@/views/SignUp'),\n    meta:{auth:false}\n  },\n\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\nrouter.beforeEach(async(to, from,next) => {\n  // instead of having to check every route record with \"WyI1MjJlMDBmMGI3ODE0NTg0YjcwMmEyN2IwZGEwOTFkYiJd.Yv3haw.CCf1H1tUJqdwZmusxwOFuCCLwkI\"\n  // to.matched.some(record => record.meta.requiresAuth)\n  console.log(from.path+'-->'+to.path)\n  console.log(store.state.token.length)\n  if (to.meta.auth) {\n    if(store.state.token.length==83)\n    {next()}\n    else{next({name:'login'})}\n  }\n  else {\n  next()}\n})\nexport default router\n","// npm install vue-cookies --save\n//\n// // require\n// var Vue = require('vue')\n// Vue.use(require('vue-cookies'))\n\nimport Vue from 'vue'\nimport App from './App.vue'\nimport './registerServiceWorker'\nimport router from './router'\nimport store from './store'\nimport VueCookies from 'vue-cookies'\nimport Ciphers from './assets/ciphers.js'\nimport * as echarts from './assets/echarts.js'\n\nVue.use(VueCookies);\nVue.prototype.$echarts= echarts;\nVue.prototype.$Ciphers = Ciphers;\nVue.filter(\"date_format\", function(value) {\n  let currentdate = new Date(value);\n  let mstr = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\"\n  ];\n  let datetime =\n    currentdate.getDate() +\n    \"/\" +\n    mstr[currentdate.getMonth()] +\n    \"/\" +\n    currentdate.getFullYear() +\n    \", \" +\n    currentdate.getHours() +\n    \":\" +\n    currentdate.getMinutes() +\n    \":\" +\n    currentdate.getSeconds() +\n    \".\" +\n    currentdate.getMilliseconds();\n  // if(!value) return ''\n  // value = value.toString()\n  return datetime;\n});\n\nVue.config.productionTip = false\n\nnew Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + {\"10\":\"5031c5d8\",\"53\":\"15615428\",\"122\":\"71a38068\",\"172\":\"da5aa7be\",\"218\":\"b15eda16\",\"370\":\"e0a02d3f\",\"530\":\"64e442e5\",\"635\":\"3876cb3a\",\"636\":\"c97e25fd\",\"838\":\"3573b360\",\"868\":\"4efef564\",\"918\":\"a51236ac\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"css/\" + chunkId + \".\" + {\"10\":\"e611425e\",\"635\":\"31a16679\",\"838\":\"a8e5d745\",\"868\":\"5a9d5d09\"}[chunkId] + \".css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"vue-test:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","var createStylesheet = function(chunkId, fullhref, resolve, reject) {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tvar onLinkComplete = function(event) {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + realHref + \")\");\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tlinkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\tdocument.head.appendChild(linkTag);\n\treturn linkTag;\n};\nvar findStylesheet = function(href, fullhref) {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = function(chunkId) {\n\treturn new Promise(function(resolve, reject) {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.miniCss = function(chunkId, promises) {\n\tvar cssChunks = {\"10\":1,\"635\":1,\"838\":1,\"868\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(function() {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, function(e) {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkvue_test\"] = self[\"webpackChunkvue_test\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(3191); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["global","factory","exports","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","constructor","create","Browser","firefox","ie","edge","newEdge","weChat","Env","browser","node","wxa","worker","svgSupported","touchEventsSupported","pointerEventsSupported","domSupported","transformSupported","transform3dSupported","hasGlobalWindow","window","env","detect","ua","match","test","version","split","SVGRect","document","style","documentElement","WebKitCSSMatrix","wx","getSystemInfoSync","self","navigator","userAgent","DEFAULT_FONT_SIZE","DEFAULT_FONT_FAMILY","DEFAULT_FONT","OFFSET","SCALE","defaultWidthMapStr","getTextWidthMap","mapStr","map","JSON","i","length","char","fromCharCode","size","charCodeAt","DEFAULT_TEXT_WIDTH_MAP","platformApi","createCanvas","createElement","measureText","_ctx","_cachedFont","text","font","canvas","getContext","res","exec","fontSize","width","indexOf","preCalcWidth","loadImage","src","onload","onerror","image","Image","setPlatformAPI","newPlatformApis","key","BUILTIN_OBJECT","reduce","obj","val","TYPED_ARRAY","objToString","toString","arrayProto","nativeForEach","forEach","nativeFilter","filter","nativeSlice","slice","nativeMap","ctorFunction","protoFunction","protoKey","idStart","guid","logError","args","_i","arguments","console","error","apply","clone","source","result","typeStr","isPrimitive","len","Ctor","from","isDom","merge","target","overwrite","isObject","targetProp","sourceProp","isArray","isBuiltInObject","mergeAll","targetAndSources","extend","assign","defaults","overlay","keysArr","keys","array","value","inherits","clazz","baseClazz","clazzPrototype","F","prop","superClass","mixin","override","getOwnPropertyNames","keyList","isArrayLike","data","each","arr","cb","context","push","memo","find","bindPolyfill","func","concat","bind","isFunction","curry","isString","isStringSafe","isNumber","type","isTypedArray","nodeType","ownerDocument","isGradientObject","colorStops","isImagePatternObject","isRegExp","eqNaN","retrieve","retrieve2","value0","value1","retrieve3","value2","normalizeCssArray","assert","condition","message","Error","trim","str","replace","primitiveKey","setAsPrimitive","HashMap","isArr","thisMap","visit","set","get","removeKey","createHashMap","concatArray","a","newArray","offset","createObject","proto","properties","StyleCtor","disableUserSelect","dom","domStyle","webkitUserSelect","userSelect","webkitTapHighlightColor","hasOwn","own","noop","RADIAN_TO_DEGREE","Math","PI","util","freeze","x","y","copy","out","v","clone$1","add","v1","v2","scaleAndAdd","sub","sqrt","lenSquare","lengthSquare","mul","div","dot","scale","s","normalize","distance","dist","distanceSquare","distSquare","negate","lerp","t","applyTransform","m","min","max","vector","Param","e","topTarget","Draggable","handler","on","_dragStart","_drag","_dragEnd","draggingTarget","draggable","parent","__hostTarget","_draggingTarget","dragging","_x","offsetX","_y","offsetY","dispatchToElement","event","dx","dy","drift","dropTarget","findHover","lastDropTarget","_dropTarget","Eventful","eventProcessors","_$eventProcessor","query","_$handlers","_h","eventProcessor","normalizeQuery","h","wrap","ctx","callAtLast","zrEventfulCallAtLast","lastIndex","lastWrap","splice","isSilent","eventName","off","eventType","newList","l","trigger","argLen","hItem","afterTrigger","triggerWithContext","LN2","log","determinant","rows","rank","rowStart","rowMask","colMask","detCache","cacheKey","fullRank","colStart","round","subRowMask","subRowStart","sum","j","colLocalIdx","colTag","buildTransformer","dest","mA","det","vh","srcPointX","srcPointY","pk","EVENT_SAVED_PROP","_calcOut$1","transformLocalCoord","elFrom","elTarget","inX","inY","transformCoordWithViewport","el","inverse","getBoundingClientRect","isCanvasEl","saved","markers","prepareCoordMarkers","transformer","preparePointerTransformer","propLR","propTB","marker","stl","idxLR","idxTB","cssText","join","appendChild","transformerName","oldSrcCoords","srcCoords","destCoords","oldCoordTheSame","rect","ii","left","top","offsetLeft","offsetTop","nodeName","toUpperCase","MOUSE_EVENT_REG","_calcOut","firefoxNotSupportOffsetXY","clientToLocal","calculate","calculateZrXY","layerX","zrX","zrY","layerY","ex","clientX","ey","clientY","box","getNativeEvent","normalizeEvent","isTouch","touch","targetTouches","changedTouches","wheelDelta","getWheelDeltaMayPolyfill","zrDelta","detail","button","which","undefined","rawWheelDelta","deltaX","deltaY","delta","abs","sign","addEventListener","name","opt","removeEventListener","stop","preventDefault","stopPropagation","cancelBubble","isMiddleOrRightButtonOnMouseUpDown","GestureMgr","_track","recognize","root","_doTrack","_recognize","clear","touches","trackItem","points","pos","recognizers","gestureInfo","dist$1","pointPair","center","pinch","tracks","trackLen","pinchEnd","pinchPre","pinchScale","isFinite","pinchCenter","pinchX","pinchY","SILENT","makeEventPacket","eveType","targetInfo","gestureEvent","zrByTouch","stopEvent","EmptyProxy","_super","_this","dispose","setCursor","HoveredResult","handlerNames","Handler","storage","painter","proxy","painterRoot","_hovered","setHandlerProxy","_draggingMgr","mousemove","isOutside","isOutsideBoundary","lastHovered","lastHoveredTarget","__zr","hovered","hoveredTarget","cursor","mouseout","eventControl","zrEventControl","resize","dispatch","eventArgs","setCursorStyle","cursorStyle","silent","eventKey","eventPacket","eachOtherLayer","layer","exclude","list","getDisplayList","hoverCheckResult","ignore","isHover","processGesture","stage","_gestureMgr","gestureMgr","displayable","rectHover","ignoreClip","clipPath","getClipPath","contain","hostEl","handlerInstance","getWidth","getHeight","_downEl","_downPoint","_upEl","DEFAULT_MIN_MERGE","DEFAULT_MIN_GALLOPING","minRunLength","n","r","makeAscendingRun","lo","hi","compare","runHi","reverseRun","binaryInsertionSort","start","mid","pivot","right","gallopLeft","hint","lastOffset","maxOffset","tmp","gallopRight","TimSort","runStart","runLength","minGallop","stackSize","pushRun","_runStart","_runLength","mergeRuns","mergeAt","forceMergeRuns","start1","length1","start2","length2","k","mergeLow","mergeHigh","cursor1","cursor2","count1","count2","exit","_minGallop","customCursor","customDest","sort","remaining","ts","minRun","force","REDRAW_BIT","STYLE_CHANGED_BIT","SHAPE_CHANGED_BIT","invalidZErrorLogged","logInvalidZError","warn","shapeCompareFunc","zlevel","z","z2","requestAnimationFrame","Storage","_roots","_displayList","_displayListLen","displayableSortFunc","traverse","update","includeIgnore","displayList","updateDisplayList","roots","_updateAndAddDisplayable","clipPaths","beforeUpdate","afterUpdate","userSetClipPath","currentClipPath","parentClipPath","updateTransform","childrenRef","children","child","__dirty","disp","__clipPaths","isNaN","decalEl","getDecalElement","textGuide","getTextGuideLine","textEl","getTextContent","addRoot","delRoot","idx","delAllRoots","getRoots","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","setTimeout","requestAnimationFrame$1","easingFuncs","linear","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","cos","sinusoidalOut","sin","sinusoidalInOut","exponentialIn","pow","exponentialOut","exponentialInOut","circularIn","circularOut","circularInOut","elasticIn","asin","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceIn","bounceOut","bounceInOut","mathPow","mathSqrt","EPSILON","EPSILON_NUMERIC","THREE_SQRT","ONE_THIRD","_v0","_v1","_v2","isAroundZero","isNotAroundZero","cubicAt","p0","p1","p2","p3","onet","cubicDerivativeAt","cubicRootAt","c","A","B","C","t1","disc","K","t2","discSqrt","Y1","Y2","T","theta","acos","ASqrt","t3","cubicExtrema","extrema","cubicSubdivide","p01","p12","p23","p012","p123","p0123","cubicProjectPoint","x0","y0","x1","y1","x2","y2","x3","y3","prev","next","d1","d2","interval","Infinity","_t","cubicLength","iteration","px","py","step","quadraticAt","quadraticDerivativeAt","quadraticRootAt","quadraticExtremum","divider","quadraticSubdivide","quadraticProjectPoint","quadraticLength","regexp","createCubicEasingFunc","cubicEasingStr","cubic","a_1","b_1","c_1","d_1","roots_1","Clip","opts","_inited","_startTime","_pausedTime","_paused","_life","life","_delay","delay","loop","onframe","ondestroy","onrestart","easing","setEasing","globalTime","deltaTime","elapsedTime","percent","easingFunc","schedule","remainder","pause","resume","Entry","LinkedList","_len","insert","entry","insertEntry","head","tail","remove","LRU","maxSize","_list","_maxSize","_map","put","removed","_lastRemovedEntry","leastUsedEntry","kCSSColorTable","clampCssByte","clampCssAngle","clampCssFloat","f","parseCssInt","charAt","parseFloat","parseInt","parseCssFloat","cssHueToRgb","m1","m2","lerpNumber","setRgba","g","copyRgba","colorCache","lastRemovedArr","putToCache","colorStr","rgbaArr","parse","cached","toLowerCase","strLen","op","ep","fname","substr","params","alpha","pop","hsla2rgba","iv","hsla","rgba","rgba2hsla","H","S","R","G","vMin","vMax","L","deltaR","deltaG","deltaB","lift","color","level","colorArr","stringify","toHex","fastLerp","normalizedValue","colors","leftIndex","floor","rightIndex","ceil","leftColor","rightColor","dv","fastMapToColor","lerp$1","fullOutput","mapToColor","modifyHSL","modifyAlpha","arrColor","lum","backgroundLum","random","mathRound","normalizeColor","opacity","EPSILON$1","isAroundZero$1","transform","round3","round4","getMatrixStr","TEXT_ALIGN_TO_ANCHOR","middle","adjustTextY","lineHeight","textBaseline","hasShadow","shadowBlur","shadowOffsetX","shadowOffsetY","getShadowKey","globalScale","getGlobalScale","shadowColor","toFixed","isImagePattern","isSVGPattern","svgElement","isPattern","isLinearGradient","isRadialGradient","isGradient","getIdURL","id","getPathPrecision","getSRTTransformString","rotation","scaleX","scaleY","skewX","skewY","encodeBase64","btoa","unescape","Buffer","arraySlice","interpolateNumber","interpolate1DArray","interpolate2DArray","len2","add1DArray","add2DArray","fillColorStops","val0","val1","len0","len1","shorterArr","shorterLen","last","fillArray","arrDim","arr0","arr1","arr0Len","arr1Len","isPreviousLarger","cloneValue","ret","rgba2String","guessArrayDim","VALUE_TYPE_NUMBER","VALUE_TYPE_1D_ARRAY","VALUE_TYPE_2D_ARRAY","VALUE_TYPE_COLOR","VALUE_TYPE_LINEAR_GRADIENT","VALUE_TYPE_RADIAL_GRADIENT","VALUE_TYPE_UNKOWN","isGradientValueType","valType","isArrayValueType","tmpRgba","Track","propName","keyframes","discrete","_invalid","_needsSort","_lastFr","_lastFrP","isFinished","_finished","setFinished","_additiveTrack","needsAnimate","getAdditiveTrack","addKeyframe","time","rawValue","arrayDim","colorArray","parsedGradient","colorStop","kf","prepare","maxTime","additiveTrack","kfs","kfsLen","lastKf","isDiscrete","isGradient$$1","lastValue","startValue","additiveValue","frameIdx","frame","nextFrame","isAdditive","valueKey","kfsNum","isValueColor","lastFrame","mathMin","w","targetArr","_additiveValue","nextVal_1","isLinearGradient_1","nextColorStop","_addToTarget","Animator","allowDiscreteAnimation","additiveTo","_tracks","_trackKeys","_maxTime","_started","_clip","_target","_loop","_additiveAnimators","_allowDiscrete","getMaxTime","getDelay","getLoop","getTarget","changeTarget","when","props","whenWithKeys","propNames","track","initialValue","_getAdditiveTrack","addtiveTrackKfs","lastFinalKf","isPaused","duration","_force","_doneCallback","_setTracksFinished","doneList","_doneCbs","_abortedCallback","animation","abortedList","_abortedCbs","removeClip","tracksKeys","trackName","additiveAnimators","getTrack","clip","stillHasAdditiveAnimator","onframeList","_onframeCbs","addClip","forwardToLast","during","done","aborted","getClip","getTracks","stopTracks","allAborted","saveTo","trackKeys","firstOrLast","__changeFinalValue","finalProps","getTime","Date","Animation","_running","_time","_pauseStart","_head","_tail","addAnimator","animator","removeAnimator","notTriggerFrameAndStageUpdate","nextClip","finished","_startLoop","animate","options","TOUCH_CLICK_DELAY","globalEventSupported","localNativeListenerNames","mouseHandlerNames","touchHandlerNames","pointerEventNameMap","pointerdown","pointerup","pointermove","pointerout","pointerHandlerNames","nm","mouse","pointer","globalNativeListenerNames","wheelEventSupported","isPointerFromTouch","pointerType","setTouchTimer","scope","touching","touchTimer","clearTimeout","markTouch","normalizeGlobalEvent","instance","FakeGlobalEvent","isLocalEl","elTmp","isLocal","domBelongToZr","parentNode","stopImmediatePropagation","currentTarget","localDOMHandlers","mousedown","__mayPointerCapture","downPoint","__togglePointerCapture","mouseup","element","toElement","relatedTarget","__pointerCapturing","wheel","mousewheel","touchstart","__lastTouchMoment","touchmove","touchend","click","globalDOMHandlers","pointerCaptureReleasing","mountLocalDOMEventListeners","domHandlers","nativeEventName","mountSingleDOMEventListener","mountGlobalDOMEventListeners","mount","nativeEventListener","capture","listener","mounted","listenerOpts","domTarget","unmountDOMEventListeners","DOMHandlerScope","HandlerDomProxy","_localHandlerScope","_globalHandlerScope","isPointerCapturing","globalHandlerScope","dpr","devicePixelRatio","screen","deviceXDPI","logicalXDPI","DARK_MODE_THRESHOLD","DARK_LABEL_COLOR","LIGHT_LABEL_COLOR","LIGHTER_LABEL_COLOR","create$1","identity","copy$1","mul$1","out0","out1","out2","out3","out4","out5","translate","rotate","rad","aa","ac","atx","ab","ad","aty","st","ct","scale$1","vx","vy","invert","clone$2","matrix","mIdentity","EPSILON$2","isNotAroundZero$1","scaleTmp","tmpTransform","originTransform","Transformable","getLocalTransform","setPosition","setScale","setSkew","setOrigin","originX","originY","needLocalTransform","parentTransform","_resolveGlobalScaleRatio","globalScaleRatio","relX","relY","sx","sy","invTransform","getComputedTransform","transformNode","ancestors","setLocalTransform","atan2","shearX","decomposeTransform","ox","oy","transformCoordToLocal","transformCoordToGlobal","getLineScale","copyTransform","ax","anchorX","ay","anchorY","tan","initDefaultProps","TRANSFORMABLE_PROPS","Point","other","equal","scalar","toArray","fromArray","input","mathMax","lt","rb","lb","rt","minTv","maxTv","BoundingRect","height","union","calculateTransform","intersect","mtv","ax0","ax1","ay0","ay1","bx0","bx1","by0","by1","overlap","dMin","dMax","d0","d3","plain","isZero","tx","ty","maxX","maxY","textWidthCache","cacheOfFont","innerGetBoundingRect","textAlign","getLineHeight","adjustTextX","adjustTextY$1","getBoundingRect","textLines","uniondRect","verticalAlign","parsePercent","maxValue","lastIndexOf","calculateTextPosition","textPosition","position","halfHeight","textVerticalAlign","align","PRESERVED_NORMAL_STATE","PRIMARY_STATES_KEYS","DEFAULT_ANIMATABLE_MAP","tmpTextPosCalcRes","tmpBoundingRect","Element","animators","currentStates","states","_init","attr","markRedraw","updateInnerText","forceUpdate","_textContent","textConfig","local","innerTransformable","textStyleChanged","innerOrigin","layoutRect","textOrigin","origin","relOriginX","relOriginY","textOffset","isInside","inside","innerTextDefaultStyle","_innerTextDefaultStyle","textFill","textStroke","autoStroke","canBeInsideText","insideFill","insideStroke","getInsideTextFill","getInsideTextStroke","outsideFill","outsideStroke","getOutsideFill","getOutsideStroke","fill","stroke","setDefaultTextStyle","dirtyStyle","isDarkMode","backgroundColor","getBackgroundColor","isDark","attrKV","setTextConfig","setTextContent","setClipPath","extra","hide","show","keyOrObj","saveCurrentToNormalState","toState","_innerSaveToNormal","normalState","_normalState","fromStateTransition","__fromStateTransition","targetName","_savePrimaryToNormal","primaryKeys","hasState","getState","ensureState","clearStates","noAnimation","useState","stateName","keepCurrentStates","forceUseHoverLayer","toNormalState","hasStates","animationCfg","stateTransition","state","stateProxy","useHoverLayer","hoverLayer","_toggleHoverLayerFlag","_applyStateObj","__inHover","textContent","_textGuide","_updateAnimationTargets","useStates","stateObjects","notChange","stateObj","lastStateObj","mergedState","_mergeStates","removeState","replaceState","oldState","newState","forceAdd","newStateExists","toggleState","enable","mergedTextConfig","transition","needsRestoreToNormal","transitionTarget","hasTransition","propNeedsTransition","_transitionState","_attachComponent","componentEl","zr","addSelfToZr","_detachComponent","removeSelfFromZr","_clipPath","removeClipPath","previousTextContent","removeTextContent","cfg","removeTextConfig","setTextGuideLine","guideLine","removeTextGuideLine","refreshHover","refresh","dirty","inHover","updateDuringAnimation","wakeUp","stopAnimation","leftAnimators","animateTo","animationProps","animateFrom","getPaintRect","elProto","isGroup","logs","logDeprecatedError","xKey","yKey","createLegacyProperty","privateKey","enhanceArray","defineProperty","animatable","reverse","animateToShallow","finishCount","doneHappened","cfgDone","cfgAborted","doneCb","abortedCb","copyArrShallow","is2DArray","copyValue","sourceArr","isValueSame","val2","is1DArraySame","topKey","animateObj","targetKeys","additive","setToFinal","animateAll","existsAnimators","animationKeys","innerKey","targetVal","keyLen","revertedSource","reversedTarget","sourceClone","Group","_children","childAt","childOfName","childCount","_doAdd","addBefore","nextSibling","oldChild","newChild","replaceAt","index","old","removeAll","eachChild","stopped","includeChildren","tmpRect","tmpMat","invisible","childRect","painterCtors","instances$1","delInstance","totalLum","ZRender","_sleepAfterStill","_stillFrameAccum","_needsRefresh","_needsRefreshHover","_darkMode","rendererType","renderer","useDirtyRect","ssrMode","ssr","ssrOnly","handerProxy","getViewportRoot","_flush","configLayer","zLevel","config","setBackgroundColor","_backgroundColor","setDarkMode","darkMode","refreshImmediately","fromInside","flush","triggerRendered","refreshHoverImmediately","end","setSleepAfterStill","stillFramesCount","getType","clearAnimation","eventHandler","init$1","dispose$1","disposeAll","getInstance","registerPainter","version$1","zrender","init","RADIAN_EPSILON","ROUND_SUPPORTED_PRECISION_MAX","_trim","linearMap","domain","range","clamp","r0","r1","subDomain","subRange","parsePercent$1","all","NaN","precision","returnStr","asc","getPrecision","getPrecisionSafe","eIndex","exp","significandPartLen","dotIndex","decimalPartLen","getPixelPrecision","dataExtent","pixelExtent","LN10","dataQuantity","sizeQuantity","getPercentWithPrecision","valueList","acc","digits","votesPerQuota","targetSeats","seats","votes","currentSum","Number","NEGATIVE_INFINITY","maxId","addSafe","maxPrecision","MAX_SAFE_INTEGER","remRadian","radian","pi2","isRadianAroundZero","TIME_REG","parseDate","hour","UTC","substring","quantity","quantityExponent","nice","nf","exponent","exp10","quantile","ascArr","reformIntervals","littleThan","curr","currClose","close_1","close","lg","numericToNumber","valFloat","isNumeric","getRandomIdBase","getGreatestCommonDividor","getLeastCommonMultiple","ECHARTS_PREFIX","storedLogs","hasConsole","outputLog","onlyOnce","deprecateLog","deprecateReplaceLog","oldOpt","newOpt","makePrintable","hintInfo","msg","makePrintableStringIfPossible_1","toISOString","arg","printableStr","err","throwError","interpolateNumber$1","DUMMY_COMPONENT_NAME_PREFIX","INTERNAL_COMPONENT_ID_PREFIX","normalizeToArray","defaultEmphasis","subOpts","emphasis","subOptName","TEXT_STYLE_OPTIONS","getDataItemValue","dataItem","isDataItemOption","mappingToExists","existings","newCmptOptions","mode","isNormalMergeMode","isReplaceMergeMode","isReplaceAllMode","existingIdIdxMap","cmptOption","isValidIdOrName","warnInvalidateIdOrName","prepareResult","mappingById","mappingByName","mappingByIndex","mappingInReplaceAllMode","makeIdAndName","existing","isComponentIdInternal","newOption","keyInfo","brandNew","optionId","makeComparableKey","existingIdx","resultItem","keyExistAndEqual","nextIdx","mapResult","idMap","item","idNum","obj1","obj2","key1","convertOptionIdName","key2","idOrName","defaultValue","isNameSpecified","componentModel","makeInternalComponentId","idSuffix","setComponentTypeToKeyInfo","mappingResult","mainType","componentModelCtor","subType","determineSubType","newCmptOption","existComponent","queryDataIndex","payload","dataIndexInside","dataIndex","indexOfRawIndex","indexOfName","makeInner","innerUniqueIndex","hostObj","parseFinder","ecModel","finderInput","_a","preParseFinder","mainTypeSpecified","queryOptionMap","others","defaultMainType","queryOption","queryResult","queryReferringComponents","useDefault","enableAll","enableNone","models","finder","parsedKey","queryType","includeMainTypes","SINGLE_REFERRING","MULTIPLE_REFERRING","userOption","indexOption","idOption","nameOption","specified","firstCmpt","getComponent","queryComponents","setAttribute","getAttribute","getTooltipRenderMode","renderModeOption","interpolateRawValues","sourceValue","targetValue","isAutoPrecision","interpolated","leftArr","rightArr","length_1","info","getDimensionInfo","leftVal","rightVal","TYPE_DELIMITER","IS_CONTAINER","IS_EXTENDED_CLASS","parseClassType","componentType","main","typeArr","checkClassType","isExtendedClass","clz","enableClassExtend","rootClz","mandatoryMethods","$constructor","method","ExtendedClass","isESClass","class_1","superCall","superApply","fn","Function","mountExtend","SubClz","SupperClz","classBase","enableClassCheck","classAttr","isInstance","methodName","enableClassManagement","makeContainer","componentTypeInfo","container","registerClass","componentFullType","getClass","throwWhenNotFound","getClassesByMainType","o","hasClass","getAllClassMainTypes","types","hasSubTypes","makeStyleMapper","ignoreParent","model","excludes","includes","getShallow","AREA_STYLE_KEY_MAP","getAreaStyle","AreaStyleMixin","globalImageCache","findExistImage","newImageOrSrc","cachedImgObj","createOrUpdateImage","cbPayload","__zrImageSrc","pendingWrap","isImageReady","pending","imageOnLoad","__cachedImgObj","STYLE_REG","truncateText","containerWidth","ellipsis","prepareTruncateOptions","truncateSingleLine","preparedOpts","maxIterations","minChar","cnCharWidth","ascCharWidth","placeholder","contentWidth","ellipsisWidth","textLine","lineWidth","subLength","estimateLength","charCode","parsePlainText","lines","overflow","padding","truncate","calculatedLineHeight","bgColorDrawn","truncateLineOverflow","lineOverflow","wrapText","contentHeight","lineCount","truncateMinChar","outerHeight","outerWidth","RichTextToken","RichTextLine","tokens","RichTextContentBlock","parseRichText","contentBlock","topWidth","topHeight","wrapInfo","accumWidth","breakAll","matchedIndex","pushTokens","pendingList","calculatedHeight","calculatedWidth","stlPadding","truncateLine","finishLine","line","outer","token","tokenStyle","styleName","rich","textPadding","paddingH","tokenHeight","innerHeight","styleTokenWidth","tokenWidthNotSpecified","percentWidth","textBackgroundColor","bgImg","remainTruncWidth","block","strLines","linesWidths","isEmptyStr","newLine","tokenPadding","tokenPaddingH","outerWidth_1","isLineHolder","tokensLen","isLatin","ch","code","breakCharMap","isWordBreakChar","isBreakAll","lastAccumWidth","currentWord","currentWordWidth","chWidth","inWord","STYLE_MAGIC_KEY","DEFAULT_COMMON_STYLE","blend","DEFAULT_COMMON_ANIMATION_PROPS","PRIMARY_STATES_KEYS$1","PRIMARY_STATES_KEYS_IN_HOVER_LAYER","Displayable","useStyle","beforeBrush","afterBrush","innerBeforeBrush","innerAfterBrush","shouldBePainted","viewWidth","viewHeight","considerClipPath","considerAncestors","culling","isDisplayableCulled","isZeroArea","parent_1","rectContain","coord","_paintRect","elRect","shadowSize","tolerance","dirtyRectTolerance","setPrevPaintRect","paintRect","_prevPaintRect","getPrevPaintRect","animateStyle","targetKey","setStyle","notRedraw","_rect","styleChanged","styleUpdated","createStyle","__hoverStyle","isStyleObject","_mergeStyle","targetStyle","sourceStyle","changedKeys","getAnimationStyleProps","statesKeys","mergedStyle","dispProto","incremental","viewRect","mathMin$2","mathMax$2","mathSin$1","mathCos$1","PI2$1","extremity","fromLine","min$$1","max$$1","xDim","yDim","fromCubic","cubicExtrema$$1","cubicAt$$1","fromQuadratic","quadraticExtremum$$1","quadraticAt$$1","fromArc","rx","ry","startAngle","endAngle","anticlockwise","vec2Min","vec2Max","diff","angle","CMD","M","Q","Z","tmpOutX","tmpOutY","min$1","max$1","min2","max2","mathMin$1","mathMax$1","mathCos","mathSin","mathAbs","PI2","hasTypedArray","Float32Array","tmpAngles","modPI2","normalizeArcAngles","angles","newStartAngle","newEndAngle","PathProxy","notSaveData","_xi","_yi","_x0","_y0","_saveData","increaseVersion","_version","getVersion","segmentIgnoreThreshold","_ux","_uy","setDPR","setContext","beginPath","reset","_pathSegLen","_pathLen","moveTo","_drawPendingPt","addData","lineTo","exceedUnit","_pendingPtDist","_pendingPtX","_pendingPtY","bezierCurveTo","quadraticCurveTo","arc","cx","cy","arcTo","radius","closePath","toStatic","setData","len$$1","appendPath","path","appendSize","appendPathData","cmd","_expandData","newData","MAX_VALUE","xi","yi","isFirst","_calculateLength","ux","uy","pathSegLen","pathTotalLen","segCount","rebuildPath","displayedLength","pendingPtX","pendingPtY","drawPart","accumLength","pendingPtDist","psi","isEllipse","breakBuild","ellipse","newProxy","containStroke$1","_l","_b","_s","containStroke$2","containStroke$3","PI2$4","normalizeRadian","PI2$3","containStroke$4","windingLine","dir","x_","CMD$1","PI2$2","EPSILON$3","isAroundEqual","swapExtrema","windingCubic","nRoots","nExtrema","y0_","y1_","unit","windingQuadratic","y_","windingArc","dTheta","tmp_1","containPath","isStroke","pathProxy","containStroke","DEFAULT_PATH_STYLE","strokePercent","fillOpacity","strokeOpacity","lineDashOffset","lineCap","miterLimit","strokeNoScale","strokeFirst","DEFAULT_PATH_ANIMATION_PROPS","pathCopyParams","Path","decal","_decalEl","buildPath","shape","decalElStyle","getDefaultShape","defaultStyle","getDefaultStyle","hasFill","pathFill","fillLum","isDarkLabel","shapeCfg","inBatch","pathUpdated","getUpdatedPathProxy","createPathProxy","hasStroke","needsUpdateRect","firstInvoke","rectStroke","_rectStroke","lineScale","strokeContainThreshold","localPos","dirtyShape","animateShape","setShape","shapeChanged","targetShape","targetShapePrimaryProps","shapeKeys","mergedShape","defaultProps","Sub","pathProto","subPixelOptimize","autoBatch","DEFAULT_TSPAN_STYLE","TSpan","setBoundingRect","tspanProto","DEFAULT_IMAGE_STYLE","DEFAULT_IMAGE_ANIMATION_PROPS","sWidth","sHeight","isImageLike","ZRImage","_getSize","dim","imageSource","__image","otherDim","otherDimSize","r2","r3","r4","total","round$1","subPixelOptimizeLine","outputShape","inputShape","subPixelOptimizeRect","originWidth","originHeight","positiveOrNegative","doubledPosition","RectShape","subPixelOptimizeOutputShape","Rect","optimizedShape","DEFAULT_RICH_TEXT_COLOR","DEFAULT_STROKE_LINE_WIDTH","DEFAULT_TEXT_ANIMATION_PROPS","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","borderColor","borderWidth","borderRadius","ZRText","_defaultStyle","_updateSubTexts","_childCursor","normalizeTextStyle","_updateRichTexts","_updatePlainTexts","defaultTextStyle","sourceRich","targetRich","_mergeRich","richNames","richName","_getOrCreateChild","textFont","getStyleText","needDrawBg","needDrawBackground","baseX","baseY","textX","textY","boxX","boxY","_renderBackground","getTextXForPadding","defaultLineWidth","useDefaultFill","getFill","getStroke","fixedBoundingRect","subElStyle","lineDash","setSeparateFont","xLeft","lineTop","xRight","tokenCount","remainedWidth","lineXLeft","lineXRight","_placeToken","parentBgColorDrawn","textWidth","textHeight","topStyle","rectEl","imgEl","textBorderWidth","textBorderColor","isImageBg","isPlainOrGradientBg","textBorderRadius","rectShape","rectStyle","imgStyle","borderDash","borderDashOffset","commonStyle","makeFont","hasSeparateFont","fontStyle","fontWeight","parseFontSize","fontFamily","VALID_TEXT_ALIGN","VALID_TEXT_VERTICAL_ALIGN","bottom","FONT_PARTS","fontProp","normalizeStyle","getECData","setCommonECData","seriesIndex","dataType","dataIdx","ecData","childECData","_highlightNextDigit","_highlightKeyMap","getSavedStates","getComponentStates","HOVER_STATE_NORMAL","HOVER_STATE_BLUR","HOVER_STATE_EMPHASIS","SPECIAL_STATES","DISPLAY_STATES","Z2_EMPHASIS_LIFT","Z2_SELECT_LIFT","HIGHLIGHT_ACTION_TYPE","DOWNPLAY_ACTION_TYPE","SELECT_ACTION_TYPE","UNSELECT_ACTION_TYPE","TOGGLE_SELECT_ACTION_TYPE","hasFillOrStroke","fillOrStroke","liftedColorCache","liftColor","liftedColor","doChangeHoverState","hoverStateEnum","onHoverStateChange","hoverState","singleEnterEmphasis","singleLeaveEmphasis","singleEnterBlur","singleLeaveBlur","singleEnterSelect","selected","singleLeaveSelect","updateElementState","updater","commonParam","traverseUpdateState","setStatesFlag","getFromStateStyle","toStateName","fromState","createEmphasisDefaultState","targetStates","hasSelect","cloned","store","fromFill","selectFill","normalFill","fromStroke","selectStroke","normalStroke","emphasisStyle","z2EmphasisLift","createSelectDefaultState","z2SelectLift","createBlurDefaultState","hasBlur","currentOpacity","blurStyle","elementStateProxy","setDefaultStateProxy","enterEmphasisWhenMouseOver","shouldSilent","__highByOuter","leaveEmphasisWhenMouseOut","enterEmphasis","highlightDigit","leaveEmphasis","enterBlur","leaveBlur","enterSelect","leaveSelect","__highDownSilentOnTouch","allLeaveBlur","api","getModel","leaveBlurredSeries","allComponentViews","eachComponent","componentStates","isSeries","view","getViewOfSeriesModel","getViewOfComponentModel","isBlured","group","toggleBlurSeries","blurSeries","targetSeriesIndex","focus","blurScope","leaveBlurOfIndices","dataIndices","itemEl","getItemGraphicEl","targetSeriesModel","getSeriesByIndex","targetCoordSys","coordinateSystem","master","blurredSeries","eachSeries","seriesModel","sameSeries","coordSys","sameCoordSys","getData","dataTypes","blurComponent","componentMainType","componentIndex","focusBlurEnabled","blurSeriesFromHighlightPayload","count","current","focus_1","findComponentHighDownDispatchers","focusSelf","dispatchers","findHighDownDispatchers","isHighDownDispatcher","handleGlobalMouseOverForHighDown","dispatcher","componentHighDownName","handleGlobalMouseOutForHighDown","toggleSelectionFromPayload","isSelectChangePayload","updateSeriesElementSelection","allData","getAllData","eachItemGraphicEl","isSelected","getAllSelectedIndices","getSelectedDataIndices","enableHoverEmphasis","setAsHighDownDispatcher","enableHoverFocus","disableHoverEmphasis","toggleHoverEmphasis","isDisabled","OTHER_STATES","defaultStyleGetterMap","itemStyle","lineStyle","areaStyle","setStatesStylesFromModel","itemModel","styleType","getter","asDispatcher","disable","extendedEl","highDownSilentOnTouch","__highDownDispatcher","getHighlightDigit","highlightKey","payloadType","isHighDownPayload","savePathStates","selectState","select","CMD$2","mathSqrt$2","mathAtan2","transformPath","nPoint","p_1","mathSqrt$1","mathSin$2","mathCos$2","PI$1","vMag","vRatio","u","vAngle","processArc","fa","fs","psiDeg","xp","yp","lambda","cxp","cyp","commandReg","numberReg","createPathProxyFromString","prevCmd","cpx","cpy","subpathX","subpathY","cmdList","cmdText","cmdStr","pLen","ctlPtx","ctlPty","pathData","SVGPath","isPathProxy","createPathOptions","innerOpts","createFromString","extendFromString","defaultOpts","mergePath$1","pathEls","pathList","pathEl","pathBundle","CircleShape","Circle","EllipseShape","Ellipse","PI$2","PI2$5","mathSin$3","mathCos$3","mathACos","mathATan2","mathAbs$1","mathSqrt$3","mathMax$4","mathMin$4","dx10","dy10","dx32","dy32","computeCornerTangents","cr","clockwise","x01","y01","x11","y11","x10","y10","x00","y00","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","normalizeCornerRadius","buildPath$1","innerRadius","hasRadius","hasInnerRadius","mod","icrStart","icrEnd","ocrStart","ocrEnd","ocrs","ocre","icrs","icre","ocrMax","icrMax","limitedOcrMax","limitedIcrMax","xre","yre","xirs","yirs","xrs","yrs","xire","yire","hasArc","cornerRadius","halfRd","it_1","crStart","crEnd","ct0","ct1","SectorShape","Sector","RingShape","Ring","smoothBezier","smooth","isLoop","constraint","prevPoint","nextPoint","cps","point","cp0","cp1","shift","buildPath$2","controlPoints","smoothConstraint","cp2","PolygonShape","Polygon","PolylineShape","Polyline","subPixelOptimizeOutputShape$1","LineShape","Line","pointAt","BezierCurveShape","cpx1","cpy1","someVectorAt","isTangent","cpx2","cpy2","BezierCurve","tangentAt","ArcShape","Arc","unitX","unitY","CompoundPath","_updatePathDirty","paths","dirtyPath","Gradient","addColorStop","LinearGradient","globalCoord","RadialGradient","extent","extent2","minTv$1","maxTv$1","OrientedBoundingRect","_corners","_axes","_origin","fromBoundingRect","corners","axes","overlapped","noMtv","_intersectCheckOneSide","axis","_getProjMinMaxOnAxis","dist0","dist1","proj","proj_1","IncrementalDisplayable","notClear","_displayables","_temporaryDisplayables","_cursor","getCursor","clearDisplaybles","clearTemporalDisplayables","addDisplayable","notPersistent","addDisplayables","displayables","getDisplayables","getTemporalDisplayables","eachPendingDisplayable","transitionStore","getAnimationConfig","animationType","animatableModel","extraOpts","extraDelayParams","animationPayload","updatePayload","getUpdatePayload","animationEnabled","isAnimationEnabled","isUpdate","animateOrSetProps","removeOpt","isFrom","isRemove","animationConfig","getAnimationDelayParams","animationDelay","animationEasing","animateConfig","updateProps","initProps","isElementRemoved","removeElement","fadeOutDisplayable","removeElementWithFadeOut","doRemove","saveOldStyle","oldStyle","mathMax$3","mathMin$3","_customShapeMap","extendShape","extendPathFromString","extendPath","registerShape","ShapeClass","getShapeClass","makePath","layout","centerGraphic","resizePath","makeImage","imageUrl","zrImg","img","boundingRect","aspect","mergePath","pathRect","subPixelOptimizeLine$1","param","subPixelOptimizeRect$1","subPixelOptimize$1","getTransform","ancestor","mat","applyTransform$1","invert$$1","transformDirection","direction","hBase","vBase","vertex","isNotGroup","isPath","groupTransition","g1","g2","elMap1","getElMap","anid","oldEl","newProp","getAnimatableProps","elMap","clipPointsByRect","clipRectByRect","targetRect","createIcon","iconStr","linePolygonIntersect","a1x","a1y","a2x","a2y","lineLineIntersect","b1x","b1y","b2x","b2y","mx","my","nx","ny","nmCrossProduct","crossProduct2d","nearZero","b1a1x","b1a1y","q","setTooltipConfig","itemTooltipOption","itemName","itemTooltipOptionObj","formatter","formatterParams","$vars","formatterParamsExtra","tooltipConfig","option","content","traverseElement","traverseElements","els","graphic","Text","EMPTY_OBJ","setLabelText","label","labelTexts","oldStates","normal","getLabelText","stateModels","interpolatedValue","baseText","labelFetcher","labelDataIndex","labelDimIndex","normalModel","getFormattedLabel","defaultText","statesText","stateModel","setLabelStyle","targetEl","labelStatesModels","stateSpecified","isSetOnText","needsCreateText","labelStatesTexts","showNormal","normalStyle","createTextStyle","createTextConfig","stateShow","targetElEmphasisState","enableTextSetter","labelInner","getLabelStatesModels","labelName","statesModels","textStyleModel","specifiedTextStyle","isNotNormal","isAttached","textStyle","setTextStyleCommon","labelPosition","labelRotate","labelDistance","labelOffset","defaultOutsidePosition","inheritColor","richResult","globalTextStyle","richItemNames","getRichItemNames","name_1","richTextStyle","setTokenTextStyle","margin","richItemNameMap","richKeys","richKey","parentModel","TEXT_PROPS_WITH_GLOBAL","TEXT_PROPS_SELF","TEXT_PROPS_BOX","isBlock","inRich","fillColor","strokeColor","textBorderType","textBorderDashOffset","defaultOpacity","baseline","disableBox","borderType","getFont","gTextStyleModel","setLabelValueAnimation","getDefaultText","prevValue","normalLabelModel","valueAnimation","defaultInterpolatedText","animateLabelValue","labelInnerStore","currValue","labelText","PATH_COLOR","textStyleParams","tmpText","TextStyleMixin","getTextColor","isEmphasis","getTextRect","LINE_STYLE_KEY_MAP","getLineStyle","LineStyleMixin","ITEM_STYLE_KEY_MAP","getItemStyle","ItemStyleMixin","Model","rest","mergeOption","_doGet","parsePath","hasPath","pathFinal","resolveParentPath","isEmpty","restoreData","pathArr","base","getUID","enableSubTypeDefaulter","subTypeDefaulters","registerSubTypeDefaulter","defaulter","componentTypeMain","enableTopologicalTravel","entity","dependencyGetter","makeDepndencyGraph","fullNameList","graph","noEntryList","thisItem","createDependencyGraphItem","originalDeps","availableDeps","getAvailableDependencies","entryCount","dependentName","predecessor","thatItem","successor","dep","topologicalTravel","targetNameList","callback","targetNameSet","currComponentType","currVertex","isInTargetNameSet","removeEdgeAndAdd","removeEdge","errMsg","succComponentType","inheritDefaultOption","superOption","subOption","langEN","month","monthAbbr","dayOfWeek","dayOfWeekAbbr","legend","selector","toolbox","brush","title","polygon","lineX","lineY","keep","dataView","lang","dataZoom","zoom","back","magicType","bar","stack","tiled","restore","saveAsImage","series","typeNames","pie","scatter","effectScatter","radar","tree","treemap","boxplot","candlestick","heatmap","parallel","sankey","funnel","gauge","pictorialBar","themeRiver","sunburst","aria","general","withTitle","withoutTitle","single","prefix","withName","withoutName","multiple","separator","partialData","langZH","LOCALE_ZH","LOCALE_EN","DEFAULT_LOCALE","localeStorage","localeModels","SYSTEM_LANG","langStr","language","browserLanguage","registerLocale","locale","localeObj","createLocaleObject","getLocaleModel","getDefaultLocaleModel","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_DAY","ONE_YEAR","defaultLeveledFormatter","year","day","minute","second","millisecond","none","fullDayFormatter","fullLeveledFormatter","primaryTimeUnits","timeUnits","pad","getPrimaryTimeUnit","timeUnit","isPrimaryTimeUnit","getDefaultFormatPrecisionOfInterval","format","template","isUTC","date","fullYearGetterName","monthGetterName","dateGetterName","hoursGetterName","minutesGetterName","secondsGetterName","millisecondsGetterName","localeModel","timeModel","leveledFormat","tick","defaults$$1","mergedFormatter","inherit","getUnitFromValue","targetId","levelId","isSecond","isMinute","isHour","isDay","isMonth","isYear","getUnitValue","fullYearSetterName","monthSetterName","dateSetterName","hoursSetterName","minutesSetterName","secondsSetterName","millisecondsSetterName","addCommas","parts","toCamelCase","upperCaseFirst","group1","normalizeCssArray$1","replaceReg","replaceMap","encodeHTML","makeValueReadable","valueType","useUTC","USER_READABLE_DEFUALT_TIME_PATTERN","stringToUserReadable","isNumberUserReadable","num","isTypeTime","isValueDate","numericResult","TPL_VAR_ALIAS","wrapVar","varName","seriesIdx","formatTpl","tpl","paramsList","encode","seriesLen","alias","getTooltipMarker","inOpt","extraCssText","renderMode","markerId","formatTime","getUTC","capitalFirst","convertToColorString","defaultColor","windowOpen","link","blank","open","opener","location","href","each$1","LOCATION_PARAMS","HV_NAMES","boxLayout","orient","gap","maxWidth","maxHeight","currentLineMaxSize","nextX","nextY","nextChild","nextChildRect","moveX","newline","moveY","getLayoutRect","positionInfo","containerRect","containerHeight","verticalMargin","horizontalMargin","positionElement","hv","boundingMode","fetchLayoutMode","ins","layoutMode","mergeLayoutParam","targetOption","ignoreSize","hResult","merge$$1","vResult","names","hvIdx","newParams","newValueCount","merged","mergedValueCount","enoughParamNumber","hasProp","hasValue","getLayoutParams","copyLayoutParams","inner","ComponentModel","uid","mergeDefaultAndTheme","inputPositionParams","themeModel","getTheme","getDefaultOption","optionUpdated","newCptOption","isInit","ctor","defaultOption","fields","optList","getReferringComponents","indexKey","idKey","getBoxLayoutParams","boxLayoutModel","getZLevelKey","setZLevel","protoInitialize","getDependencies","deps","dependencies","unshift","platform","decalColor","globalDefault","colorBy","gradientColor","decals","dashArrayX","dashArrayY","symbolSize","symbol","blendMode","stateAnimation","animationDuration","animationDurationUpdate","animationEasingUpdate","animationThreshold","progressiveThreshold","progressive","hoverLayerThreshold","VISUAL_DIMENSIONS","SOURCE_FORMAT_ORIGINAL","SOURCE_FORMAT_ARRAY_ROWS","SOURCE_FORMAT_OBJECT_ROWS","SOURCE_FORMAT_KEYED_COLUMNS","SOURCE_FORMAT_TYPED_ARRAY","SOURCE_FORMAT_UNKNOWN","SERIES_LAYOUT_BY_COLUMN","SERIES_LAYOUT_BY_ROW","BE_ORDINAL","Must","Might","Not","innerGlobalModel","resetSourceDefaulter","datasetMap","makeSeriesEncodeForAxisCoordSys","coordDimensions","datasetModel","querySeriesUpstreamDatasetModel","baseCategoryDimIndex","categoryWayValueDimStart","encodeItemName","encodeSeriesName","seriesLayoutBy","coordDimInfoLoose","coordDimIdx","coordDimInfo","getDataDimCountOnCoordDim","datasetRecord","categoryWayDim","valueWayDim","pushDim","dimIdxArr","idxFrom","idxCount","dimsDef","coordDimName","seriesName","makeSeriesEncodeForNameBased","dimCount","potentialNameDimIndex","sourceFormat","dimensionsDefine","idxResult","idxRes0","idxRes1","guessRecords","guessResult","doGuessOrdinal","startIndex","isPureNumber","fulfilled","nameDimIndex","thisData","queryDatasetUpstreamDatasetModels","guessOrdinal","dimIndex","dimName","dimType","maxLoop","dimDefItem","dataArrayRows","sample","detectValue","row","dataObjectRows","dataKeyedColumns","dataOriginal","beStr","internalOptionCreatorMap","registerInternalOptionCreator","creator","concatInternalOptions","newCmptOptionList","internalOptionCreator","internalOptions","reCreateSeriesIndices","assertSeriesInitialized","initBase","innerColor","PaletteMixin","getColorFromPalette","requestNum","defaultPalette","layeredPalette","getFromPalette","clearColorPalette","clearPalette","getNearestPalette","palettes","requestColorNum","paletteNum","that","scopeFields","paletteIdx","paletteNameMap","palette","pickedPaletteItem","OPTION_INNER_KEY","OPTION_INNER_VALUE","BUITIN_COMPONENTS_MAP","grid","polar","geo","singleAxis","calendar","tooltip","axisPointer","timeline","markPoint","markLine","markArea","visualMap","xAxis","yAxis","angleAxis","radiusAxis","BUILTIN_CHARTS_MAP","custom","componetsMissingLogPrinted","checkMissingComponents","componentOption","componentImportName","GlobalModel","theme","optionManager","_theme","_locale","_optionManager","setOption","optionPreprocessorFuncs","innerOpt","normalizeSetOptionInput","_resetOption","resetOption","optionChanged","baseOption","mountOption","_mergeOption","timelineOption","getTimelineOption","mediaOptions","getMediaOption","mediaOption","componentsMap","_componentsMap","componentsCount","_componentsCount","newCmptTypes","newCmptTypeMap","replaceMergeMainTypeMap","visitComponent","oldCmptList","mergeMode","tooltipExists","tooltipWarningLogged","optionsByMainType","cmptsByMainType","cmptsCountByMainType","isSeriesType","ComponentModelClass","seriesImportName","extraOpt","__requireNewView","mainTypeInReplaceMerge","_seriesIndices","getOption","optInMainType","realLen","metNonInner","setUpdatePayload","_payload","cmpt","cmpts","queryByIdOrName","filterBySubType","findComponents","queryCond","getQueryCond","doFilter","indexAttr","idAttr","nameAttr","ctxForAll_1","cbForAll_1","getSeriesByName","nameStr","oneSeries","getSeriesByType","getSeries","getSeriesCount","rawSeriesIndex","eachRawSeries","eachSeriesByType","eachRawSeriesByType","isSeriesFiltered","_seriesIndicesMap","getCurrentSeriesIndices","filterSeries","newSeriesIndices","seriesRawIdx","componentTypes","components","component","isNotTargetSeries","internalField","seriesIndices","airaOption","enabled","mergeTheme","seriesId","notMergeColorLayer","colorLayer","themeItem","keyMap_1","idOrNameItem","idName","idName_1","replaceMerge","availableMethods","ExtensionAPI","ecInstance","coordinateSystemCreators","CoordinateSystemManager","_coordinateSystems","coordinateSystems","creater","getCoordinateSystems","register","QUERY_REG","OptionManager","_timelineOptions","_mediaList","_currentMediaIndices","_api","rawOption","dataset","optionBackup","_optionBackup","newParsedOption","parseRawOption","_newBaseOption","timelineOptions","mediaList","mediaDefault","isRecreate","_mediaDefault","timelineModel","getCurrentIndex","ecWidth","ecHeight","indices","applyMediaQuery","indicesEquals","isNew","declaredBaseOption","timelineOnRoot","timelineOptionsOnRoot","mediaOnRoot","media","hasMedia","hasTimeline","doPreprocess","preProcess","singleMedia","realMap","aspectratio","applicatable","matched","operator","realAttr","real","expect","indices1","indices2","each$2","isObject$1","POSSIBLE_STYLES","compatEC2ItemStyle","itemStyleOpt","normalItemStyleOpt","emphasisItemStyleOpt","convertNormalEmphasis","optType","useExtend","normalOpt","emphasisOpt","removeEC3NormalStatus","compatTextStyle","labelOptSingle","textPropName","compatEC3CommonStyles","processSeries","seriesOpt","nodes","edgeData","links","edges","categories","mpData","mlData","breadcrumb","levels","leaves","toArr","toObj","globalCompatStyle","isTheme","axisName","axisOpt","parallelOpt","parallelAxisDefault","calendarOpt","radarOpt","nameGap","axisNameGap","indicator","indicatorOpt","geoOpt","regions","regionObj","timelineOpt","toolboxOpt","feature","featureOpt","set$1","compatLayoutProperties","LAYOUT_PROPERTIES","COMPATITABLE_COMPONENTS","BAR_ITEM_STYLE_MAP","compatBarItemStyle","oldName","newName","compatPieLabel","alignTo","edgeDistance","compatSunburstState","downplay","blur","compatGraphFocus","focusNodeAdjacency","traverseTree","globalBackwardCompat","seriesType","clipOverflow","clockWise","hoverOffset","scaleSize","pointerColor","backgroundStyle","highlightPolicy","mapType","mapLocation","hoverAnimation","dataRange","componentName","dataStack","stackInfoMap","stackInfoList","stackInfo","stackResultDimension","getCalculationInfo","stackedOverDimension","stackedDimension","stackedByDimension","isStackedByIndex","setCalculationInfo","calculateStack","targetStackInfo","idxInStack","resultVal","resultNaN","dims","targetData","stackStrategy","modify","v0","byValue","stackedDataRawIndex","getRawIndex","stackedOver","rawIndexOf","getByRawIndex","_c","providerMethods","mountMethods","SourceImpl","dimensionsDetectedCount","metaRawOption","isSourceInstance","createSource","sourceData","thisMetaRawOption","detectSourceFormat","determined","determineSourceDimensions","sourceHeader","dimensions","createSourceFromSeriesDataOption","cloneSourceShallow","normalizeDimensionsOption","arrayRowsTravelFirst","objectRowsCollectDimensions","colArr","firstIndex","dimensions_1","nameMap","rawItem","displayName","exist","shouldRetrieveDataByName","DefaultDataProvider","sourceParam","dimSize","_source","_data","_offset","_dimSize","getSource","getItem","appendData","clean","pure","persistent","provider","methods","getMethodMapKey","getItemForTypedArray","countForTypedArray","fillStorage","fillStorageForTypedArray","rawItemGetter","getRawSourceItemGetter","rawCounter","getRawSourceDataCounter","dimExtent","appendDataSimply","newCol","oldCol","getItemSimply","rawData","rawSourceItemGetterMap","col","countSimply","rawSourceDataCounterMap","getRawValueSimply","property","rawSourceValueGetterMap","getRawSourceValueGetter","retrieveRawValue","getRawDataItem","getStore","getDimensionIndex","getDimensionProperty","DIMENSION_LABEL_REG","DataFormatMixin","getDataParams","getRawValue","rawDataIndex","getName","itemOpt","getItemVisual","userOutput","componentSubType","dimensionNames","fullDimensions","status","extendParams","getItemModel","dimensionIndex","dimStr","dimLoose","formatTooltip","multipleSeries","normalizeTooltipFormatResult","markupText","markupFragment","frag","createTask","define","Task","_reset","_plan","plan","_count","_onDirty","onDirty","_dirty","perform","performArgs","planResult","upTask","_upstream","skip","outputData","__pipeline","currentTask","forceFirstProgress","lastModBy","normalizeModBy","_modBy","lastModDataCount","_modDataCount","modBy","modDataCount","_doReset","_outputDueEnd","_dueEnd","_progress","_dueIndex","progress","_doProgress","outputDueEnd","_settedOutputEnd","unfinished","iterator","_callingProgress","downstream","_downstream","pipe","downTask","_disposed","getUpstream","getDownstream","setOutputEnd","winCount","it","sStep","sCount","modNext","sequentialNext","parseDataValue","ORDER_COMPARISON_OP_MAP","lval","rval","lte","gt","gte","SortOrderComparator","FilterOrderComparator","_opFn","_rvalFloat","evaluate","order","incomparable","isDesc","_resultLT","_incomparable","lvalFloat","rvalFloat","lvalNotNumeric","rvalNotNumeric","lvalIsStr","rvalIsStr","ExternalSource","FilterEqualityComparator","isEq","_rval","_isEQ","_rvalTypeof","eqResult","lvalTypeof","getRawData","cloneRawData","cloneAllDimensionInfo","retrieveValue","retrieveValueFromItem","convertValue","rawVal","dimInfo","createExternalSource","internalSource","externalTransform","extSource","sourceHeaderCount","dimsByName","dimDef","dimDefExt","errMsg_1","__isBuiltIn","rawValueGetter","upstream","isSupportedSourceFormat","externalTransformMap","registerExternalTransform","typeParsed","isBuiltIn","applyDataTransform","rawTransOption","sourceList","infoForPrint","pipedTransOption","pipeLen","transOption","applySingleDataTransform","upSourceList","pipeIndex","transType","extUpSourceList","upSource","resultList","upstreamList","print","printStrArr","pipeIndexStr","datasetIndex","resultIndex","resultMetaRawOption","firstUpSource","defaultDimValueGetters","UNDEFINED","CtorUint32Array","Uint32Array","CtorUint16Array","Uint16Array","CtorInt32Array","Int32Array","CtorFloat64Array","Float64Array","dataCtors","getIndicesCtor","rawCount","getInitialExtent","cloneChunk","originalChunk","prepareStore","dimIdx","append","DataCtor","oldStore","oldLen","newStore","DataStore","_chunks","_rawExtent","_extent","_rawCount","_calcDimNameToIdx","initData","inputDimensions","dimValueGetter","_provider","_indices","_getRawIdxIdentity","defaultGetter","defaultDimValueGetter","_dimValueGetter","willRetrieveDataByName","_dimensions","_initDataFromProvider","getProvider","ensureCalculationDimension","calcDimNameToIdx","calcDimIdx","collectOrdinalMeta","ordinalMeta","chunk","rawExtents","ordinalOffset","dimRawExtent","parseAndCollect","getOrdinalMeta","appendValues","values","minFillLen","chunks","dimLen","rawExtent","emptyDataItem","sourceIdx","arrayRows","dimNames","dimStorage","dimStore","getValues","dimArr","rawIdx","getSum","dimData","getMedian","dimDataArray","sortedDimDataArray","rawIndex","indicesOfNearest","maxDistance","nearestIndices","minDist","minDiff","nearestIndicesLen","getIndices","newIndices","thisCount","buffer","dim0","_updateGetRawIdx","selectRange","originalCount","storeArr","quickFinished","dimStorage2","dimk","_updateDims","targetChunks","tmpRetValue","dataCount","retValue","rawExtentOnDim","lttbDownSample","valueDimension","rate","maxArea","area","nextRawIndex","targetStorage","sampledIndex","frameSize","currentRawIndex","nextFrameStart","nextFrameEnd","avgX","avgY","frameStart","frameEnd","pointAX","pointAY","firstNaNIndex","countNaN","_getRawIdx","downSample","dimension","sampleValue","sampleIndex","frameValues","sampleFrameIdx","getDataExtent","initialExtent","currEnd","useRaw","clonedDims","ignoreIndices","clonedDimsMap","_copyCommonProps","_cloneIndices","getDimValueSimply","objectRows","keyedColumns","original","typedArray","SourceManager","sourceHost","_sourceList","_storeList","_upstreamSignList","_versionSignBase","_sourceHost","_setLocalSource","upstreamSignList","_getVersionSign","prepareSource","_isDirty","_createSource","resultSourceList","upSourceMgrList","_getUpstreamSourceManagers","hasUpstream","upSourceMgr","newMetaRawOption","_getSourceMetaRawOption","upMetaRawOption","needsCreateSource","_applyTransform","upMgrList","transformOption","fromTransformResult","doThrow","upMgr","upSrcMgr","sourceIndex","getSharedDataStore","seriesDimRequest","schema","makeStoreSchema","_innerGetDataStore","hash","storeDims","seriesSource","sourceReadKey","storeList","cachedStoreMap","cachedStore","getSourceManager","disableTransformOptionMerge","TOOLTIP_LINE_HEIGHT_CSS","getTooltipTextStyle","nameFontColor","nameFontSize","nameFontWeight","valueFontColor","valueFontSize","valueFontWeight","nameStyle","valueStyle","HTML_GAPS","RICH_TEXT_GAPS","createTooltipMarkup","isSectionFragment","getBuilder","buildSection","buildNameValue","getBlockGapLevel","gapLevel_1","subBlockLen","blocks","hasInnerGap_1","noHeader","subBlock","subGapLevel","fragment","topMarginForOuterGap","toolTipTextStyle","gaps","getGap","subMarkupTextList","subBlocks","orderMode","sortBlocks","orderMap","valueAsc","valueDesc","comparator_1","sortParam","valueFormatter","subMarkupText","html","richText","wrapBlockHTML","displayableHeader","header","wrapInlineNameRichText","noName","noValue","noMarker","markerType","valueTypeOption","markerStr","markupStyleCreator","makeTooltipMarker","markerColor","readableName","readableValueList","valueAlignRight","valueCloseToMarker","wrapInlineValueRichText","wrapInlineNameHTML","wrapInlineValueHTML","buildTooltipMarkup","builder","gapLevel","encodedContent","topGap","clearfix","marginCSS","leftHasMarker","marginCss","alignRight","paddingStr","alignCSS","wrapRichTextStyle","styles","paddingLeft","retrieveVisualColorForTooltipMarker","visualDrawType","getPaddingFromTooltipModel","TooltipMarkupStyleCreator","richTextStyles","_nextStyleNameId","_generateStyleName","finalStl","defaultSeriesFormatTooltip","inlineValue","inlineValueType","tooltipDims","mapDimensionsAll","tooltipDimLen","isValueArr","formatArrResult","formatTooltipArrayValue","inlineValues","inlineValueTypes","seriesNameSpecified","inlineName","isValueMultipleLine","dimItem","setEachItem","otherDims","inner$1","getSelectionKey","getId","SERIES_UNIVERSAL_TRANSITION_PROP","SeriesModel","_selectedDataIndicesMap","dataTask","dataTaskCount","dataTaskReset","sourceManager","getInitialData","wrapData","dataBeforeProcessed","autoSeriesName","_initSelectedMapFromData","themeSubType","fillDataTextStyle","newSeriesOption","task","getCurrentTask","getLinkedData","mainData","getLinkedDataAll","getEncode","getColorBy","isColorBySeries","getBaseAxis","coordDimToDataDim","coordDim","getProgressive","getProgressiveThreshold","innerDataIndices","_innerSelect","unselect","selectedMap","selectedMode","nameOrId","toggleSelect","tmpArr","selectedDataIndicesMap","nameOrIds","isUniversalTransitionEnabled","universalTransitionOpt","universalTransition","lastDataIndex","hasItemOption","ignoreStyleOnData","hasSymbolVisual","defaultSymbol","visualStyleAccessPath","getSeriesAutoName","dataDims","nameArr","dataDim","cloneShallow","dataTaskProgress","CHANGABLE_METHODS","DOWNSAMPLE_METHODS","wrapMethod","onDataChange","scheduler","pipeline","getPipeline","agentStubMap","ComponentView","render","updateView","updateLayout","updateVisual","seriesModels","isBlur","eachRendered","createRenderPlanner","pipelineContext","originalLarge","large","originalProgressive","progressiveRender","inner$2","renderPlanner","ChartView","renderTask","renderTaskPlan","renderTaskReset","highlight","toggleHighlight","markUpdateMethod","updateMethod","elSetState","progressMethodMap","incrementalPrepareRender","incrementalRender","ORIGIN_METHOD","RATE","THROTTLE_TYPE","throttle","debounce","currCall","debounceNextCall","lastCall","lastExec","timer","cbArgs","thisDelay","thisDebounce","debounceDelay","createOrUpdate","fnAttr","throttleType","originFn","lastThrottleType","lastRate","inner$3","defaultStyleMappers","defaultColorKey","getStyleMapper","stylePath","styleMapper","visualStyleMapper","getDefaultColorKey","colorKey","seriesStyleTask","createOnAllSeries","performRawSeries","styleModel","getStyle","globalStyle","decalOption","setVisual","colorCallback","hasAutoColor","colorPalette","dataEach","dataParams","setItemVisual","sharedModel","dataStyleTask","getVisual","existsStyle","ensureUniqueItemVisual","dataColorPaletteTask","overallReset","paletteScopeGroupByType","colorScope","dataAll","idxMap","fromPalette","PI$3","defaultLoading","textColor","maskColor","showSpinner","spinnerRadius","mask","labelRect","Scheduler","dataProcessorHandlers","visualHandlers","_stageTaskMap","_dataProcessorHandlers","_visualHandlers","_allHandlers","taskRecord","overallTask","getPerformArgs","_pipelineMap","pCtx","progressiveEnabled","__idxInPipeline","blockIndex","pipelineId","updateStreamModes","dataLen","threshold","restorePipelines","pipelineMap","preventIncremental","_pipe","prepareStageTasks","stageTaskMap","record","_createSeriesStageTask","_createOverallStageTask","prepareView","__block","performDataProcessorTasks","_performStageTasks","performVisualTasks","stageHandlers","needSetDirty","setDirty","dirtyMap","stageHandler","visualType","stageHandlerRecord","seriesTaskMap","overallNeedDirty_1","stub","performArgs_1","performSeriesTasks","oldSeriesTaskMap","newSeriesTaskMap","getTargetSeries","seriesTaskPlan","seriesTaskReset","seriesTaskCount","useClearVisual","isVisual","isLayout","overallTaskReset","oldAgentStubMap","newAgentStubMap","overallProgress","shouldOverallTaskDirty","createStub","stubReset","stubOnDirty","agent","wrapStageHandler","detectSeriseType","stubProgress","clearAllVisual","resetDefines","makeSeriesTaskProgress","singleSeriesTaskProgress","resetDefineIdx","resetDefine","legacyFunc","ecModelMock","apiMock","mockMethods","Clz","cond","colorAll","lightTheme","contrastColor","axisCommon","axisLine","splitLine","splitArea","minorSplitLine","crossStyle","subtextStyle","iconStyle","brushStyle","handleStyle","moveHandleStyle","fillerColor","dataBackground","selectedDataBackground","controlStyle","dayLabel","monthLabel","yearLabel","timeAxis","logAxis","valueAxis","categoryAxis","axisLabel","color0","borderColor0","ECEventProcessor","cptQuery","dataQuery","otherQuery","condCptType","suffixes_1","dataKeys_1","reserved","propSuffix","suffixPos","eventInfo","packedEvent","check","filterForExposedEvent","host","propOnHost","SYMBOL_PROPS_WITH_CB","SYMBOL_PROPS","seriesSymbolTask","legendIcon","symbolOptions","symbolOptionsCb","hasCallback","symbolPropName","symbolKeepAspect","symbolPropsCb","dataSymbolTask","getItemVisualFromData","getVisualFromData","createLegacyDataSelectAction","ecRegisterAction","getSeriesIndices","eventsMap","dispatchAction","handleSeriesLegacySelectEvents","eventPostfix","ecIns","legacyEventName","fromActionPayload","handleLegacySelectEvents","messageCenter","isFromClick","fromAction","findEventDispatcher","returnFirstMatch","found","wmUniqueIndex","supportDefineProperty","WeakMap","_id","_guard","enumerable","configurable","has","Triangle","Diamond","Pin","tanX","tanY","cpLen","cpLen2","Arrow","symbolCtors","roundRect","square","circle","diamond","pin","arrow","triangle","symbolShapeMakers","symbolBuildProxies","SymbolClz","symbolType","inBundle","proxySymbol","symbolPathSetColor","symbolStyle","__isEmptyBrush","createSymbol","keepAspect","symbolPath","setColor","normalizeSymbolSize","normalizeSymbolOffset","symbolOffset","isSafeNum","createLinearGradient","canvasGradient","createRadialGradient","getCanvasGradient","isClipPathChanged","prevClipPaths","parseInt10","getSize","whIdx","wh","cwh","plt","prb","defaultView","getComputedStyle","normalizeLineDash","lineType","getLineDash","lineScale_1","pathProxyForDraw","styleHasStroke","isValidStrokeFillStyle","strokeOrFill","styleHasFill","doFillPath","originalGlobalAlpha","globalAlpha","doStrokePath","createCanvasPattern","pattern","canvasPattern","createPattern","repeat","DOMMatrix","setTransform","translateSelf","rotateSelf","scaleSelf","brushPath","strokePart","firstDraw","dirtyFlag","hasFillGradient","hasStrokeGradient","hasFillPattern","hasStrokePattern","fillGradient","strokeGradient","fillPattern","strokePattern","__canvasFillGradient","__canvasStrokeGradient","__canvasFillPattern","__canvasStrokePattern","fillStyle","strokeStyle","setLineDash","needsRebuild","brushImage","drawImage","brushText","strokeText","fillText","SHADOW_NUMBER_PROPS","STROKE_PROPS","bindCommonProps","prevStyle","forceSetAll","flushPathDrawn","globalCompositeOperation","bindPathAndTextCommonStyle","prevEl","newLineWidth","bindImageStyle","setContextTransform","updateClipStatus","allClipped","isTransformChanged","m0","DRAW_TYPE_PATH","DRAW_TYPE_IMAGE","DRAW_TYPE_TEXT","DRAW_TYPE_INCREMENTAL","canPathBatch","batchFill","batchStroke","brushSingle","isLast","__isRendered","prevElClipPaths","forceSetTransform","forceSetStyle","save","canBatchPath","lastDrawType","brushIncremental","temporalDisplayables","innerScope","i_1","len_1","decalMap","decalCache","decalKeys","createOrUpdatePatternFromDecal","decalObject","getDevicePixelRatio","getZr","isSVG","oldPattern","decalOpt","maxTileWidth","maxTileHeight","setPatternnSource","keys$$1","isValidKey","cache","normalizeDashArrayX","normalizeDashArrayY","symbolArray","normalizeSymbolArray","lineBlockLengthsX","getLineBlockLengthX","lineBlockLengthY","getLineBlockLengthY","svgRoot","tag","attrs","pSize","getPatternSize","xlen","symbolRepeats","attrName","brushDecal","clearRect","fillRect","ySum","yId","yIdTotal","xId0","symbolYId","xId1","xId1Total","xSum","top_1","symbolXId","brushSymbol","symbolVNode","renderOneToVNode","svgWidth","svgHeight","isAllString","dash","dashValue","isAllNumber","dashValue_1","blockLength","decalVisual","hasItemVisual","lifecycle","implsStore","registerImpl","impl","getImpl","hasWindow","TEST_FRAME_REMAIN_TIME","PRIORITY_PROCESSOR_SERIES_FILTER","PRIORITY_PROCESSOR_DATASTACK","PRIORITY_PROCESSOR_FILTER","PRIORITY_PROCESSOR_DEFAULT","PRIORITY_PROCESSOR_STATISTIC","PRIORITY_VISUAL_LAYOUT","PRIORITY_VISUAL_PROGRESSIVE_LAYOUT","PRIORITY_VISUAL_GLOBAL","PRIORITY_VISUAL_CHART","PRIORITY_VISUAL_COMPONENT","PRIORITY_VISUAL_CHART_DATA_CUSTOM","PRIORITY_VISUAL_POST_CHART_LAYOUT","PRIORITY_VISUAL_BRUSH","PRIORITY_VISUAL_ARIA","PRIORITY_VISUAL_DECAL","PRIORITY","PROCESSOR","FILTER","SERIES_FILTER","STATISTIC","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","GLOBAL","CHART","POST_CHART_LAYOUT","COMPONENT","BRUSH","CHART_ITEM","ARIA","DECAL","IN_MAIN_PROCESS_KEY","PENDING_UPDATE","STATUS_NEEDS_UPDATE_KEY","ACTION_REG","CONNECT_STATUS_KEY","CONNECT_STATUS_PENDING","CONNECT_STATUS_UPDATING","CONNECT_STATUS_UPDATED","createRegisterEventWithLowercaseECharts","isDisposed","toLowercaseNameAndCallEventful","disposedWarning","createRegisterEventWithLowercaseMessageCenter","updateDirectly","updateMethods","doConvertPixel","doDispatchAction","flushPendingActions","triggerUpdatedEvent","bindRenderedEvent","bindMouseEvent","renderComponents","renderSeries","createExtensionAPI","enableConnect","markStatusToUpdate","applyChangedStates","MessageCenter","messageCenterProto","ECharts","theme$$1","_chartsViews","_chartsMap","_componentsViews","_pendingActions","themeStorage","_dom","defaultRenderer","defaultUseDirtyRect","__ECHARTS__DEFAULT__RENDERER__","devUseDirtyRect","__ECHARTS__DEFAULT__USE_DIRTY_RECT__","_zr","_ssr","_throttledZrFlush","_coordSysMgr","prioritySortFunc","__prio","visualFuncs","dataProcessorFuncs","_scheduler","_messageCenter","_initEvents","_onframe","updateParams","remainTime","_model","startTime","getDom","isSSR","notMerge","lazyUpdate","transitionOpt","seriesTransition","setTheme","getRenderedCanvas","renderToCanvas","pixelRatio","renderToSVGString","renderToString","useViewBox","getSvgDataURL","toDataURL","getDataURL","excludeComponents","excludesComponentViews","__viewId","url","getConnectedDataURL","isSvg","groupId","MAX_NUMBER","connectedGroups","left_1","right_1","bottom_1","canvasList_1","dpr_1","instances","chart","getSvgDom","innerHTML","targetCanvas","zr_1","content_1","getSvgRoot","connectedBackgroundColor","convertToPixel","convertFromPixel","containPixel","findResult","containPoint","parsedFinder","MOUSE_EVENT_NAMES","eveName","isGlobalOut","dataModel","eventData","eventActionMap","actionType","DOM_ATTRIBUTE_KEY","_loadingFX","needPrepare","showLoading","hideLoading","loadingEffects","makeActionFromEvent","eventObj","actions","updateLabelLayout","updatedSeries","allocateZlevels","componentZLevels","seriesZLevels","hasSeperateZLevel","zlevelKey","lastSeriesZLevel_1","lastSeriesKey_1","zLevels","applyElementStates","newStates","updateHoverLayerStatus","elCount","preventUsingHoverLayer","chartView","__alive","updateBlend","updateZ","preventAutoZ","doUpdateZ","maxZ2","labelLine","textGuideLineConfig","showAbove","clearStates$$1","prevStates","updateStates","stateAnimationModel","enableAnimation","isComponent","viewList","viewMap","doPrepare","requireNewView","viewId","classType","Clazz","__id","__model","__ecComponentInfo","excludeSeriesIdMap","excludeSeriesId","modelId","isExcluded","notBlur","callView","prepareAndUpdate","coordSysMgr","componentDirtyList","componentView","seriesDirtyMap","coordSysList","chartsMap","escapeConnect","actionWrap","actionInfo","cptTypeTmp","cptType","payloads","batched","batch","eventObjBatch","isSelectChange","isHighDown","batchItem","action","newObj","pendingActions","dirtyList","getComponentByElement","modelInfo","updateConnectedChartsStatus","charts","otherChart","action_1","otherCharts_1","echartsProto","one","wrapped","args2","idBase","groupIdBase","isClient","existInstance","getInstanceByDom","clientWidth","clientHeight","connect","disConnect","disconnect","getInstanceById","registerTheme","registerPreprocessor","preprocessorFunc","registerProcessor","priority","processor","normalizeRegister","registerPostInit","postInitFunc","registerUpdateLifecycle","registerPostUpdate","postUpdateFunc","registerAction","registerCoordinateSystem","coordSysCreator","getCoordinateSystemDimensions","getDimensionsInfo","registerLayout","layoutTask","registerVisual","visualTask","registeredTasks","targetList","defaultPriority","__raw","registerLoading","loadingFx","setCanvasCreator","registerMap","mapName","geoJson","specialAreas","getMap","registerTransform","dataTool","dataIndexMapValueLength","valNumOrArrLengthMoreThan2","defaultKeyGetter","DataDiffer","oldArr","newArr","oldKeyGetter","newKeyGetter","diffMode","_old","_new","_oldKeyGetter","_newKeyGetter","_diffModeMultiple","_add","_update","updateManyToOne","_updateManyToOne","updateOneToMany","_updateOneToMany","updateManyToMany","_updateManyToMany","_remove","execute","_executeOneToOne","newDataIndexMap","oldDataKeyArr","newDataKeyArr","_initIndexMap","oldKey","newIdxMapVal","newIdxMapValLen","newIdx","_performRestAdd","_executeMultiple","oldDataIndexMap","oldIdxMapVal","oldIdxMapValLen","newKey","idxMapValLen","keyArr","keyGetterName","cbModeMultiple","idxMapVal","DimensionUserOuput","dimRequest","_encode","_schema","_getFullDimensionNames","_cachedDimNames","makeOutputDimensionNames","summarizeDimensions","summary","notExtraCoordDimMap","defaultedLabel","defaultedTooltip","userOutputEncode","coordDimIndex","getOrCreateEncodeArr","isExtraCoord","mayLabelDimType","defaultTooltip","encodeArr","dataDimsOnCoord","encodeFirstDimNotExtra","dataDimIndicesOnCoord","storeDimIndex","encodeLabel","encodeTooltip","getDimensionTypeByAxis","axisType","SeriesDimensionDefine","inner$4","dimTypeShort","float","int","ordinal","number","SeriesDataSchema","_dimOmitted","dimensionOmitted","_fullDimCount","fullDimensionCount","_updateDimOmitted","isDimensionOmitted","_dimNameMap","ensureSourceDimNameMap","getSourceDimensionIndex","getSourceDimension","makeHashStrict","shouldOmitUnusedDimensions","dimHash","fullDimIdx","seriesDimIdx","seriesDimDef","sourceDimDef","isCalculationCoord","appendCalculationDimension","isSeriesDataSchema","createDimNameMap","dataDimNameMap","dimDefItemRaw","userDimName","innerSource","dimNameMap","prepareInvertedIndex","getIdNameFromStore","normalizeDimensions","transferProperties","cloneListForMapAndSample","makeIdFromName","isObject$2","map$1","CtorInt32Array$1","ID_PREFIX","INDEX_NOT_FOUND","TRANSFERABLE_PROPERTIES","CLONE_PROPERTIES","SeriesData","dimensionsInput","hostModel","_nameList","_idList","_visual","_layout","_itemVisuals","_itemLayouts","_graphicEls","_approximateExtent","_calculationInfo","TRANSFERABLE_METHODS","assignStoreDimIdx","dimensionInfos","invertedIndicesMap","needsHasOwn","emptyObj","dimInfoInput","dimensionInfo","dimensionName","createInvertedIndices","_nameDimIdx","itemId","_idDimIdx","_dimInfos","_initGetDimensionInfo","_invertedIndicesMap","dimIdxToName_1","_dimIdxToName","getDimension","_recognizeDimIndex","_getDimInfo","_getStoreDimIndex","getDimensionsOnCoord","_dimSummary","mapDimension","dimensionsSummary","_store","nameList","_nameRepeatCount","_doInit","shouldMakeIdFromName","_shouldMakeIdFromName","_updateOrdinalMeta","idList","isFormatOriginal","sharedDataItem","getApproximateExtent","setApproximateExtent","_getCategory","invertedIndices","fCtx","dimIndices","filterSelf","innerRange","mapArray","ctxCompat","otherList","thisList","visual","kvObj","itemVisual","itemVisuals","setLayout","getLayout","getItemLayout","setItemLayout","clearItemLayouts","setItemGraphicEl","injectFunction","originalMethod","__wrappedMethods","nameDimIdx","idDimIdx","nameRepeatCount","nmCnt","createDimensions","prepareSeriesDataSchema","sysDims","coordDimNameMap","getDimCount","dimensionsCount","omitUnusedDimensions","canOmitUnusedDimensions","isUsingSourceDimensionsDef","encodeDef","encodeDefine","encodeDefaulter","encodeDefMap","indicesMap","getResultItem","dataDimsRaw","validDataDims","resultDimIdxOrName","resultDimIdx","applyDim","availDimIdx","sysDimItemRaw","sysDimItemDimsDef","sysDimItemOtherDims","sysDimItem","sysDimItemDimsDefItem","generateCoord","generateCoordCount","fromZero","ifNoNameFillWithCoordName","item0","item1","genCoordDimName","removeDuplication","duplicationMap","dimOriginalName","optDimCount","map$$1","mapData","CoordSysInfo","coordSysName","coordSysDims","axisMap","categoryAxisMap","getCoordSysInfoBySeries","fetch","fetchers","cartesian2d","xAxisModel","yAxisModel","isCategory","firstCategoryDimIndex","singleAxisModel","polarModel","radiusAxisModel","findAxisModel","angleAxisModel","parallelModel","parallelAxisIndex","axisIndex","axisModel","axisDim","enableDataStack","dimensionDefineList","byIndex","stackedCoordDimension","isLegacyDimensionsInput","stackedByDimInfo","stackedDimInfo","mayStack","stackedDimCoordDim_1","stackedDimType","stackedDimCoordIndex_1","stackedOverDimensionDefine","stackResultDimensionDefine","isDimensionStacked","stackedDim","getStackedDimension","targetDim","getCoordSysDimDefs","coordSysInfo","coordSysDimDefs","registeredCoordSys","injectOrdinalMeta","dimInfoList","hasNameEncode","categoryAxisModel","createSeriesData","sourceRaw","isOriginalSource","useEncodeDefaulter","createDimensionOptions","stackCalculationInfo","isNeedCompleteOrdinalData","sampleItem","firstDataNotNull","Scale","setting","_setting","getSetting","unionExtent","unionExtentFromData","getExtent","setExtent","thisExtent","isInExtentRange","isBlank","_isBlank","setBlank","uidBase","OrdinalMeta","_needCollect","needCollect","_deduplication","deduplication","createByAxisModel","dedplication","getOrdinal","category","_getOrCreateMap","isValueNice","isIntervalOrLogScale","intervalScaleNiceTicks","splitNumber","minInterval","maxInterval","span","intervalPrecision","getIntervalPrecision","niceTickExtent","fixExtent","increaseInterval","contain$1","normalize$1","scale$2","OrdinalScale","_ordinalMeta","_getTickNumber","getRawOrdinalNumber","getTicks","ticks","getMinorTicks","setSortInfo","infoOrdinalNumbers","ordinalNumbers","ordinalsByTick","_ordinalNumbersByTick","ticksByOrdinal","_ticksByOrdinalNumber","tickNum","allCategoryLen","ordinalNumber","unusedOrdinal","ticksByOrdinalNumber","tickNumber","ordinalNumbersByTick","getLabel","cateogry","calcNiceTicks","calcNiceExtent","roundNumber","IntervalScale","_interval","_intervalPrecision","getInterval","setInterval","_niceExtent","expandToNicedExtent","safeLimit","lastNiceTick","minorTicks","nextTick","prevTick","minorTicksGroup","minorInterval","minorTick","dataNum","expandSize","fixMax","fixMin","setNiceExtent","supportFloat32Array","Float32ArrayCtor","createFloat32Array","STACK_PREFIX","getSeriesStackId","getAxisKey","prepareLayoutBarSeries","isOnCartesian","getValueAxesMinGaps","barSeries","axisValues","cartesian","baseAxis","cnt","axisMinGaps","valuesInAxis","makeColumnLayout","seriesInfoList","bandWidth","axisExtent","getBandWidth","minGap","extentSpan","scaleSpan","barWidth","barMaxWidth","barMinWidth","isInLargeMode","barGap","barCategoryGap","axisKey","stackId","doCalBarWidthAndOffset","columnsMap","seriesInfo","columnsOnAxis","autoWidthCount","categoryGap","stacks","minWidth","categoryGapPercent","columnCount","barGapPercent","autoWidth","column","finalWidth","lastColumn","widthSum","retrieveColumnLayout","barWidthAndOffset","columnLayoutInfo","columnOffset","columnWidth","createProgressiveLayout","getOtherAxis","valueDimIdx","baseDimIdx","drawBackground","valueDim","stackResultDim","stacked","isValueAxisH","isHorizontal","valueAxisStart","getValueAxisStart","isLarge","barMinHeight","stackedDimIdx","largePoints","largeBackgroundPoints","largeDataIndices","coordLayout","getRect","bgSize","idxOffset","baseValue","baseCoord","dataToPoint","startCoord","valueAxisHorizontal","toGlobalCoord","dataToCoord","bisect","TimeScale","settings","_minLevelUnit","labelFormatter","innerTicks","getIntervalTicks","_approxInterval","getFullYear","getMonth","getDate","approxTickNum","scaleIntervalsLen","scaleIntervals","isUnitValueSame","valueA","valueB","dateA","dateB","isSame","isSameYear","isSameMonth","isSameDay","isSameHour","isSameMinute","isSameSecond","isSameMilliSecond","getDateInterval","approxInterval","daysInMonth","getMonthInterval","APPROX_ONE_MONTH","getHourInterval","getMinutesAndSecondsInterval","isMinutes","getMillisecondsInterval","getFirstTimestampOfUnit","unitName","outDate","bottomUnitName","unitNames","iter","addTicksInSpan","minTimestamp","maxTimestamp","getMethodName","setMethodName","isDate","dateTime","notAdd","addLevelTicks","lastLevelTicks","levelTicks","newAddedTicks","isFirstLevel","startTick","endTick","getterName","setterName","levelsTicks","currentLevelTicks","tickCount","lastLevelTickCount","primaryTimeUnit","nextPrimaryTimeUnit","levelTicksRemoveDuplicated","tickValue","targetTickNum","levelsTicksInExtent","maxLevel","scaleProto","intervalScaleProto","roundingErrorFix","mathFloor","mathCeil","mathPow$1","mathLog","LogScale","_originalScale","originalScale","originalExtent","powVal","_fixMin","fixRoundingError","_fixMax","niceExtent","originalVal","ScaleRawExtentInfo","_prepareParams","_dataMin","_dataMax","isOrdinal","_isOrdinal","_needCrossZero","getNeedCrossZero","modelMinRaw","_modelMinRaw","_modelMinNum","parseAxisModelMinMax","modelMaxRaw","_modelMaxRaw","_modelMaxNum","_axisDataLen","getCategories","boundaryGap","boundaryGapArr","_boundaryGapInner","dataMin","dataMax","axisDataLen","boundaryGapInner","minFixed","maxFixed","determinedMin","_determinedMin","determinedMax","_determinedMax","modifyDataMinMax","minMaxName","frozen","DATA_MIN_MAX_ATTR","setDeterminedMinMax","DETERMINED_MIN_MAX_ATTR","ensureScaleRawExtentInfo","rawExtentInfo","minMax","getScaleExtent","scaleType","rawExtentResult","barSeriesModels","isBaseAxisAndHasBarSeries_1","adjustedScale","adjustScaleForOverflow","axisLength","barsOnCurrentAxis","minOverflow","maxOverflow","totalOverFlow","oldRange","oldRangePercentOfNew","overflowBuffer","niceScaleExtent","inModel","extentInfo","isIntervalOrTime","createScaleByModel","ifAxisCrossZero","makeLabelFormatter","getLabelModel","categoryTickStart","getAxisRawValue","estimateLabelUnionRect","realNumberScaleTicks","categoryScaleExtent","axisLabelModel","unrotatedSingleRect","singleRect","rotateTextRect","textRect","rotateRadians","beforeWidth","beforeHeight","afterWidth","afterHeight","rotatedRect","getOptionCategoryInterval","shouldShowAllLabels","getDataDimensionsOnAxis","dataDimMap","unionAxisExtentFromData","seriesExtent","AxisModelCommonMixin","getCoordSysModel","createList","dataStack$1","createScale","mixinAxisModelCommonMethods","Model$$1","createTextStyle$1","helper","extensions","extensionRegisters","registerComponentModel","registerComponentView","ComponentViewClass","registerSeriesModel","SeriesModelClass","registerChartView","ChartViewClass","painterType","PainterCtor","use","ext","singleExt","install","EPSILON$4","isAroundEqual$1","contain$2","TMP_TRANSFORM","transformPoints","updateBBoxFromPoints","projection","project","centroid","signedArea","Region","setCenter","_center","getCenter","calcCenter","GeoJSONPolygonGeometry","exterior","interiors","GeoJSONLineStringGeometry","GeoJSONRegion","geometries","cp","largestGeo","largestGeoSize","loopGeo","transformTo","interior","newRegion","GeoSVGRegion","elOnlyForCalculate","_elOnlyForCalculate","isGeoSVGGraphicRoot","decode","json","UTF8Encoding","jsonCompressed","encodeScale","UTF8Scale","features","geometry","encodeOffsets","coordinates","decodeRing","decodeRings","rings","coordinate","prevX","prevY","parseGeoJSON","nameProperty","featureObj","region","graphic$1","format$1","util$1","inner$5","createAxisLabels","makeCategoryLabels","makeRealNumberLabels","createAxisTicks","tickModel","makeCategoryTicks","labelModel","makeCategoryLabelsActually","labels","labelCategoryInterval","numericLabelInterval","labelsCache","getListCache","optionLabelInterval","listCacheGet","makeLabelsByCustomizedCategoryInterval","makeAutoCategoryInterval","makeLabelsByNumericCategoryInterval","listCacheSet","tickCategoryInterval","ticksCache","optionTickInterval","labelsResult","labelItem","formattedLabel","rawLabel","autoInterval","calculateCategoryInterval","fetchAutoCategoryIntervalCalculationParams","axisRotate","ordinalScale","ordinalExtent","unitSpan","unitW","unitH","maxW","maxH","dw","dh","lastAutoInterval","lastTickCount","axisExtent0","axisExtent1","getRotate","categoryInterval","onlyTick","showAllLabel","includeMinLabel","includeMaxLabel","addItem","tickObj","NORMALIZED_EXTENT","Axis","onBand","containData","fixExtentWithBands","coordToData","pointToData","getTicksCoords","getTickModel","ticksCoords","tickVal","alignWithLabel","fixOnBandTicksCoords","getMinorTicksCoords","minorTickModel","minorTicksCoords","getViewLabels","nTick","ticksLen","diffSize","crossLen","shift_1","ticksItem","extendComponentModel","extendComponentView","View","extendSeriesModel","extendChartView","PI2$6","CMD$3","DEFAULT_SEARCH_SPACE","getCandidateAnchor","distance$$1","outPt","outDir","projectPointToArc","projectPointToLine","limitToEnds","lineLen","projectedLen","projectPointToRect","tmpPt","nearestPointOnRect","pt","dist$$1","nearestPointOnPath","pt0","pt1","pt2","dir2","updateLabelLinePoints","labelLineModel","labelGuideConfig","searchSpace","candidates","anchorPoint","anchor","targetTransform","targetInversedTransform","candidate","limitTurnAngle","tmpProjPoint","linePoints","minTurnAngle","angleCos","minTurnAngleCos","limitSurfaceAngle","surfaceNormal","maxSurfaceAngle","maxSurfaceAngleCos","HALF_PI","angle2","newAngle","setLabelLineState","isNormal","styleObj","buildLabelLinePath","moveLen","midPoint0","midPoint2","midPoint1","setLabelLineStyle","labelIgnoreNormal","isLabelIgnored","labelLineConfig","getLabelLineStatesModels","labelLineName","prepareLayoutList","defaultAttr","localRect","isAxisAligned","minMargin","globalRect","obb","layoutOption","computedLayoutOption","axisAligned","shiftLayout","xyDim","sizeDim","minBound","maxBound","balanceShift","lastPos","adjusted","shifts","totalShifts","shiftList","maxGap","first","updateMinMaxGap","squeezeGaps","takeBoundsGap","squeezeWhenBailout","gapThisBound","gapOtherBound","moveDir","moveFromMaxGap","remained","maxSqeezePercent","totalGaps","prevItemRect","squeezePercent","movement","moveForEachLabel","shiftLayoutOnX","leftBound","rightBound","shiftLayoutOnY","topBound","bottomBound","hideOverlap","labelList","displayedLabels","hideEl","emphasisState","existsTextCfg","labelGuideIgnore","cloneArr","newPoints","prepareLayoutCallbackParams","hostRect","labelLinePoints","LABEL_OPTION_TO_STYLE_KEYS","dummyTransformable","labelLayoutInnerStore","labelLineAnimationStore","extendWithKeys","LABEL_LAYOUT_PROPS","LabelManager","_labelList","_chartViewList","clearLabels","_addLabel","labelStyle","labelTransform","labelGuide","attachedPos","attachedRot","addLabelsOfSeries","disableLabelLayout","updateLayoutConfig","createDragHandler","defaultLabelAttr","degreeToRadian","needsUpdateLabelLine","labelLayoutStore","labelsNeedsAdjustOnX","moveOverlap","labelsNeedsAdjustOnY","labelsNeedsHideOverlap","processLabelsOverall","ignoreLabelLineUpdate","forceLabelAnimation","_updateLabelLine","_animateLabels","visualStyle","disableLabelAnimation","layoutStore","oldLayout","newProps","oldLayoutSelect","oldLayoutEmphasis","oldOpacity","layoutSelect","layoutEmphasis","newLayout","getLabelManager","installLabelLayout","registers","labelManager","createDom","newDom","newDomStyle","Layer","motionBlur","lastFrameAlpha","virtual","maxRepaintRectCount","__firstTimePaint","__used","__drawIndex","__startIndex","__endIndex","__prevStartIndex","__prevEndIndex","onselectstart","getElementCount","initContext","setUnpainted","createBackBuffer","domBack","ctxBack","createRepaintRects","prevList","hasIntersections","mergedRepaintRects","full","pendingRect","addRectToMergePool","isMerged","minDeltaArea","bestRectToMergeIdx","mergedRect","pendingRect_1","aArea","bArea","pendingArea","deltaArea","shouldPaint","prevRect","curRect","_paintRects","debugGetPaintRects","clearAll","clearColor","repaintRects","haveMotionBLur","doClear","clearColorGradientOrPattern","__canvasGradient","__painter","HOVER_LAYER_ZLEVEL","CANVAS_ZLEVEL","EL_AFTER_INCREMENTAL_INC","INCREMENTAL_INC","isLayerValid","__builtin__","createRoot","domRoot","CanvasPainter","_zlevelList","_prevDisplayList","_layers","_layerConfig","_needsManuallyCompositing","singleCanvas","_opts","_singleCanvas","rootStyle","zlevelList","layers","rootCanvas","_width","_height","mainLayer","_domRoot","isSingleCanvas","getViewportRootOffset","viewportRoot","paintAll","_redrawId","_paintList","_paintHoverList","_hoverlayer","getLayer","getHoverLayer","paintOne","redrawId","_updateLayerStatus","_doPaintList","needsRefreshHover","_compositeManually","eachLayer","self_1","eachBuiltinLayer","layerList","zi","_loop_1","this_1","useTimer","now","firstEl","repaint","repaintRect","_doPaintEl","dTime","draw","currentLayer","insertLayer","layersMap","prevLayer","prevDom","insertBefore","firstChild","getLayers","updatePrevLayer","prevZlevel","incrementalLayerCount","_clearLayer","layerConfig","_zlevel","delLayer","removeChild","display","clearLayer","imageLayer","width_1","height_1","DatasetModel","_sourceManager","DatasetView","install$1","samplers","average","nearest","indexSampler","dataSample","sampling","sampler","BaseBarSeriesModel","getMarkerPosition","clampData","offsetIndex","legendHoverLink","barMinAngle","largeThreshold","progressiveChunkMode","BarSeriesModel","brushSelector","selectors","roundCap","showBackground","realtimeSort","createGridClipPath","hasAnimation","getArea","isAxisInversed","duringCb","createPolarClipPath","sectorArea","isRadial","createClipPath","SausageShape","SausagePath","dr","rCenter","lessThanCircle","unitStartX","unitStartY","unitEndX","unitEndY","isCoordinateSystemType","getDefaultLabel","labelDims","vals","getDefaultInterpolatedLabel","createSectorCalculateTextPosition","positionMapping","isRoundCap","mappedSectorPosition","sector","middleR","middleAngle","extraDist","adjustAngleDistanceX","adjustAngleDistanceY","setSectorTextRotation","rotateType","anchorAngle","isEnd","mathMax$5","mathMin$5","getClipArea","coordSysClipArea","expandWidth","BarView","_isFirstFrame","_removeOnRenderedListener","_updateDrawMode","coordinateSystemType","_progressiveEls","_isLargeDraw","_renderLarge","_renderNormal","_clear","_updateLargeClip","_incrementalRenderLarge","isLargeDraw","isHorizontalOrRadial","oldData","animationModel","realtimeSortCfg","shouldRealtimeSort","_enableRealtimeSort","needsClip","backgroundModel","barBorderRadius","bgEls","oldBgEls","_backgroundEls","isInitSort","isChangeOrder","createBackground","bgLayout","bgEl","createBackgroundEl","isValidLayout","isClipped","elementCreator","updateStyle","updateRealtimeAnimation","newIndex","oldIndex","createBackgroundShape","bgGroup","_backgroundGroup","createLarge","_removeBackground","_dispatchInitSort","orderMapping_1","_onRendered","_updateSortWithinSameData","_dataSort","orderMapping","mappedValue","_isOrderChangedWithinSameData","ordinalDataDim","MIN_VALUE","_isOrderDifferentInView","orderInfo","tickMax","sortInfo","axisId","sortResult","otherAxis","coordSysBoundingRect","signWidth","signHeight","coordSysX2","coordSysY2","xClipped","yClipped","signR","clipped","__dataIndex","animateProperty","positionMap","createPolarPositionMapping","sectorShape","animateTarget","realtimeSortOption","seriesAnimationModel","seriesTarget","axisTarget","axisAnimationModel","checkPropertiesNotValid","rectPropties","polarPropties","fixedLineWidth","getLineWidth","signX","signY","isZeroOnPolar","arcOrAngle","isPolar","labelPositionOutside","emphasisModel","rawLayout","LagePathShape","LargePath","startPoint","progressiveEls","bgPoints","largePathUpdateDataIndex","largePath","largePathFindDataIndex","ElementClz","install$2","setCategorySortInfo","LineSeriesModel","getLegendIcon","itemHeight","itemWidth","visualRotate","symbolRotate","iconRotate","endLabel","smoothMonotone","showSymbol","showAllSymbol","connectNulls","divideShape","triggerLineEvent","Symbol$1","Symbol","seriesScope","updateData","_createSymbol","driftSymbol","_symbolType","stopSymbolAnimation","toLastFrame","getSymbolType","getSymbolPath","setZ","setDraggable","hasCursorOption","getSymbolSize","disableAnimation","_updateCommon","_sizeX","_sizeY","emphasisItemStyle","blurItemStyle","selectItemStyle","emphasisDisabled","hoverScale","visualColor","pathStyle","symbolInnerColor","liftZ","z2Origin","_z2","useNameLabel","getLabelDefaultText","scaleRatio","setSymbolScale","fadeOut","animationOpt","fadeLabel","symbolNeedsDraw","isIgnore","clipShape","normalizeUpdateOpt","makeSeriesScope","SymbolDraw","SymbolCtor","_SymbolCtor","symbolUpdateOpt","getSymbolPoint","symbolEl","oldIdx","newSymbolType","oldSymbolType","_getSymbolPoint","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","prepareDataCoordInfo","valueOrigin","valueStart","getValueStart","baseAxisDim","valueAxisDim","baseDim","baseDataOffset","dataDimsForPoint","getStackedOnPoint","dataCoordInfo","stackedData","diffData","diffResult","idx1","lineAnimationDiff","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","newValueOrigin","currPoints","nextPoints","currStackedPoints","nextStackedPoints","sortedIndices","rawIndices","newDataOldCoordInfo","oldPoints","diffItem","pointAdded","oldIdx2","newIdx2","currentX","currentY","newDataDimsForPoint","oldPt","stackedOnPoint","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","i2","idx2","stackedOnCurrent","stackedOnNext","mathMin$6","mathMax$6","isPointNull$1","drawSegment","segLen","allLen","cpx0","cpy0","tmpK","ratioNextSeg","nextCpx0","nextCpy0","lenPrevSeg","lenNextSeg","dir_1","dir_2","ECPolylineShape","ECPolyline","getPointOn","xOrY","isDimX","nRoot","t_1","ECPolygonShape","ECPolygon","stackedOnPoints","stackedOnSmooth","isPointsSame","points1","points2","bboxFromPoints","minX","minY","getBoundingDiff","min1","max1","getSmooth","getStackedOnPoints","turnPointsIntoStep","stepTurnAt","baseIndex","stepPoints","stepPt","nextPt","filteredPoints","stepPt2","clipColorStops","prevOutOfRangeColorStop","prevInRangeColorStop","newColorStops","lerpStop","stop0","stop1","clippedCoord","coord0","stop_1","getVisualGradient","visualMetaList","visualMeta","getAxis","stops","stopLen","outerColors","colorStopsInRange","inRangeStopLen","tinyExtent","minCoord","maxCoord","coordSpan","gradient","getIsIgnoreFunc","isAuto","getAxesByScale","canShowAllSymbolForCategory","categoryDataDim","labelMap","availSize","isPointNull","getLastIndexNotNull","getPointAtIndex","getIndexRange","prevIndex","nextIndex","anyStateShowEndLabel","createLineClipPath","lineView","endLabelModel_1","valueAnimation_1","data_1","labelAnimationRecord_1","lastFrameIndex","clipRect","_endLabelOnDuring","_endLabel","originalX","originalY","getEndLabelStateSpecified","endLabelModel","isBaseInversed","LineView","lineGroup","symbolDraw","_symbolDraw","_lineGroup","lineStyleModel","areaStyleModel","isCoordSysPolar","prevCoordSys","_coordSys","polyline","_polyline","_polygon","isAreaChart","isIgnoreFunc","__temp","clipShapeForSymbol","_clipShapeForSymbol","_step","_newPolygon","_initOrUpdateEndLabel","oldClipPath","newClipPath","_stackedOnPoints","_points","_doUpdateAnimation","_initSymbolLabelAnimation","_newPolyline","lineJoin","emphasisLineStyle","stackedOnSeries","changePolyState","_changePolyState","_valueOrigin","packEventData","symbolLabel","isAxisInverse","seriesDuration","seriesDalay","seriesDalayValue","polarClip","pointToCoord","gridClip","ratio","data_2","animationRecord","distanceX","distanceY","dataIndexRange","endValue","__points","updatedDataInfo","diffStatus","ptIdx","pointsLayout","forceStoreInTypedArray","useTypedArray","dimIdx0","dimIdx1","tmpIn","tmpOut","install$3","PI2$7","RADIAN","getViewRect","getBasicPieLayout","pieLayout","minAngle","validDataCount","unitRadian","roseType","stillShowZeroSum","restAngle","valueSumLargerThanMinAngle","currentAngle","angle_1","layout_1","layout_2","dataFilter","legendModels","RADIAN$1","adjustSingleSide","viewLeft","viewTop","farthestX","labelAlignTo","recalculateX","recalculateXOnSemiToAlignOnEllipseCurve","semi","rB","rB2","rA","rA2","newX","newTargetWidth","targetTextWidth","constrainTextWidth","items","topSemi","bottomSemi","avoidOverlap","labelLayoutList","leftList","rightList","leftmostX","rightmostX","isPositionCenter","labelStyleWidth","bleedMargin","isAlignToEdge","extraPaddingH","realTextWidth","availableWidth","forceRecalculate","bgColor","oldOuterWidth","oldHeight","innerRect","availableInnerWidth","newWidth","unconstrainedWidth","newRect","pieLabelLayout","hasLabelRotate","minShowLabelRadian","setNotShow","isLabelShown","labelLineLen","labelLineLen2","midAngle","isLabelInside","radialAngle","isDown","notShowLabel","getSectorCornerRadius","zeroIfNull","PiePiece","firstCreate","_updateLabel","visualOpacity","PieView","_emptyCircleSector","piePiece","itemLayout","createSeriesDataSimply","LegendVisualProvider","getDataWithEncodedVisual","_getDataWithEncodedVisual","_getRawData","getAllNames","containName","dataWithEncodedVisual","PieSeriesModel","legendVisualProvider","_defaultLabelLine","labelLineNormalOpt","labelLineEmphasisOpt","minShowLabelAngle","selectedOffset","percentPrecision","distanceToLabelLine","borderJoin","showEmptyCircle","emptyCircleStyle","labelLayout","avoidLabelOverlap","animationTypeUpdate","negativeDataFilter","curValue","install$4","ScatterSeriesModel","BOOST_SIZE_THRESHOLD","LargeSymbolPathShape","LargeSymbolPath","_off","hoverDataIdx","symbolProxy","symbolProxyShape","canBoost","softClipShape","findDataIndex","LargeSymbolDraw","_create","_setCommon","endIndex","byteOffset","lastAdded","_newAdded","extrudeShadow","ScatterView","_updateSymbolDraw","_getClipShape","clipArea","GridModel","containLabel","CartesianAxisModel","nameLocation","nameRotate","nameTruncate","nameTextStyle","triggerEvent","onZero","onZeroAxisIndex","axisTick","showMinLabel","showMaxLabel","primary","logBase","axisDefault","AXIS_TYPES","axisModelCreator","BaseAxisModelClass","extraDefaultOption","AxisModel","getAxisType","thisOption","__ordinalMeta","Cartesian","_dimList","getAxes","addAxis","cartesian2DDimensions","canCalculateAffineTransform","scale$$1","Cartesian2D","calcAffineTransform","_transform","_invTransform","xAxisScale","yAxisScale","xScaleExtent","yScaleExtent","xScaleSpan","yScaleSpan","translateX","translateY","axisX","axisY","toLocalCoord","containZone","data1","data2","zoneDiag1","zoneDiag2","zone","xVal","yVal","xScale","yScale","xAxisExtent","yAxisExtent","xExtent","getGlobalExtent","yExtent","Axis2D","coordExtent","categorySortInfo","layout$1","gridModel","otherAxisOnZeroOf","getAxesOnZeroOf","rawAxisPosition","axisPosition","rectBound","axisOffset","posBound","onZeroCoord","dirMap","labelDirection","tickDirection","nameDirection","labelInside","isCartesian2DSeries","findAxisModels","axisModelMap","mathLog$1","alignScaleTicks","alignToScale","alignToTicks","alignToNicedTicks","alignToSplitNumber","alignToInterval","scaleExtent","isMinFixed","isMaxFixed","nicedSplitNumber","t0","Grid","_coordsMap","_coordsList","_axesMap","_axesList","axisPointerEnabled","_initCartesian","axesMap","updateAxisTicks","axesIndices","axisNeedsAlign","_updateScale","onZeroRecords","fixAxisOnZero","ignoreContainLabel","boxLayoutParams","isContainLabel","gridRect","axesList","adjustAxes","updateAxisTransform","labelUnionRect","axesMapOnDim","getCartesian","xAxisIndex","yAxisIndex","coordList","getCartesians","_findConvertTarget","coordsList","axisPositionUsed","axesCount","createAxisCreator","isAxisUsedInTheGrid","axesModelMap","getTooltipAxes","baseAxes","otherAxes","grids","otherAxisDim","canOnZeroToAxis","getOnZeroRecordKey","coordBase","axisExtentSum","PI$4","AxisBuilder","handleAutoShown","transformGroup","_transformGroup","hasBuilder","builders","getGroup","innerTextLayout","axisRotation","textRotation","rotationDiff","makeAxisEventDataBase","isLabelSilent","tooltipOpt","shown","arrows","arrowSize","arrowOffset","symbolWidth_1","symbolHeight_1","axisTickLabel","ticksEls","buildAxisMajorTicks","labelEls","buildAxisLabel","fixMinMaxLabelShow","buildAxisMinorTicks","axisNameAvailableWidth","gapSignal","isNameLocationCenter","nameRotation","endTextLayout","truncateOpt","nameTruncateMaxWidth","__fullText","targetType","textRotate","onLeft","tickEls","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","lastTick","ignoreEl","isTwoLabelOverlapped","firstRect","nextRect","mRotationBack","createTicks","tickTransform","tickEndCoord","tickLineStyle","anidPrefix","tickCoord","tickEl","minorTickLineStyle","minorTicksEls","axisLabelShow","labelMargin","labelRotation","rawCategoryData","itemLabelModel","rawCategoryItem","tickIndex","collect","axesInfo","seriesInvolved","coordSysAxesInfo","coordSysMap","collectAxesInfo","collectSeriesInfo","globalTooltipModel","globalAxisPointerModel","linksOption","linkGroups","coordSysKey","makeKey","axesInfoInCoordSys","coordSysModel","baseTooltipModel","saveTooltipAxisInfo","triggerAxis","cross","tooltipAxes","fromTooltip","triggerTooltip","axisPointerModel","axisPointerShow","isHandleTrigger","makeAxisPointerModel","snap","involveSeries","axisInfo","useHandle","linkGroup","groupIndex","getLinkGroupIndex","mapper","tooltipAxisPointerModel","volatileOption","field","labelOption","tooltipAxisPointerLabelShow","seriesTooltipTrigger","seriesTooltipShow","seriesDataCount","linkOption","checkPropInLink","linkPropValue","axisPropValue","fixValue","getAxisInfo","getAxisPointerModel","axisPointerClazz","AxisView","axisPointerClass","_doUpdateAxisPointerClass","updateAxisPointer","_axisPointer","_disposeAxisPointer","forceRender","getAxisPointerClass","registerAxisPointerClass","inner$6","rectCoordAxisBuildSplitArea","axisView","axisGroup","splitAreaModel","areaColors","areaColorsLen","lastSplitAreaColors","splitAreaColors","newSplitAreaColors","colorIndex","cIndex","rectCoordAxisHandleRemove","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","_axisGroup","axisBuilder","elementType","cartesians","axisElementBuilders","isInitialSortFromBarRacing","splitLineModel","lineColors","minorSplitLineModel","CartesianXAxisView","CartesianYAxisView","GridView","extraOption","install$6","install$5","TitleModel","subtext","subtarget","itemGap","TitleView","titleModel","subtextStyleModel","subText","subTextEl","sublink","groupRect","alignStyle","install$7","getDefaultSelectorOptions","LegendModel","_updateSelector","_updateData","legendData","hasSelected","potentialData","availableNames","isPotential","_availableNames","unSelect","toggleSelected","allSelect","inverseSelect","getOrient","inactiveColor","inactiveBorderColor","inactiveBorderWidth","borderCap","borderMiterLimit","inactiveWidth","cap","dashOffset","selectorLabel","selectorPosition","selectorItemGap","selectorButtonGap","layout$2","viewportSize","makeBackground","curry$1","each$3","Group$2","LegendView","newlineDisabled","_contentGroup","_selectorGroup","_isFirstRender","getContentGroup","getSelectorGroup","legendModel","isFirstRender","resetInner","itemAlign","renderInner","mainRect","layoutInner","_backgroundEl","contentGroup","legendDrawnMap","selectMode","legendItemModel","lineVisualStyle","itemGroup","_createItem","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","_createSelector","selectorGroup","selectorItem","onclick","emphasisLabelModel","itemVisualStyle","drawType","legendIconType","getLegendStyle","getDefaultLegendIcon","icon","hitRect","tooltipModel","__legendDataIndex","contentRect","contentPos","selectorRect","selectorPos","orientIdx","hw","yx","iconType","handleCommonProps","propVal","itemStyleModel","iconBrushType","decalStyle","legendLineModel","visualHasBorder","symboType","dataName","isUseHoverLayer","legendFilter","legendSelectActionHandler","isToggleSelect","isItemSelected","installLegendAction","install$9","ScrollableLegendModel","setScrollDataIndex","scrollDataIndex","mergeAndNormalizeLayoutParams","pageButtonItemGap","pageButtonGap","pageButtonPosition","pageFormatter","pageIcons","horizontal","vertical","pageIconColor","pageIconInactiveColor","pageIconSize","pageTextStyle","raw","Group$3","WH","XY","ScrollableLegendView","_currentIndex","_containerGroup","_controllerGroup","__rectSize","controllerGroup","pageIconSizeArr","createPageButton","pageTextStyleModel","iconIdx","pageDataIndexName","_pageGo","xy","processMaxSize","_layoutContentAndController","containerGroup","controllerRect","showController","_showController","containerPos","controllerPos","pageInfo","_getPageInfo","pageIndex","contentPosition","_updatePageInfoView","to","legendId","canJump","pageText","pageCount","containerRectSize","targetItemIndex","_findTargetItemIndex","targetItem","itemCount","pCount","pagePrevDataIndex","pageNextDataIndex","targetItemInfo","getItemInfo","winStartItemInfo","winEndItemInfo","currItemInfo","itemRect","itemInfo","winStart","targetDataIndex","defaultIndex","legendDataIdx","installScrollableLegendAction","install$8","inner$7","clone$3","bind$1","BaseAxisPointer","_dragging","_axisModel","_axisPointerModel","_lastValue","_lastStatus","_group","handle","_handle","elOption","makeElOption","graphicKey","_lastGraphicKey","moveAnimation","_moveAnimation","determineAnimation","doUpdateProps","updateProps$1","updatePointerEl","updateLabelEl","createPointerEl","createLabelEl","updateMandatoryProps","_renderHandle","isCategoryAxis","useSnap","pointerOption","pointerEl","labelEl","updateLabelShowHide","updateProps$$1","updateHandleTransform","handleModel","onmousemove","onmousedown","_onHandleDragMove","ondragend","_onHandleDragEnd","handleSize","_moveHandleToValue","getHandleTransProps","getHandleTransform","trans","_payloadInfo","lastProp","_doDispatchAxisPointer","payloadInfo","cursorPoint","tooltipOption","buildLabel","xDimIndex","propsEqual","lastProps","equals_1","buildElStyle","axisPointerType","buildLabelElOption","labelPos","getValueLabel","paddings","confineInContainer","seriesDataIndices","params_1","axisDimension","seriesData","idxItem","getTransformedPosition","layoutInfo","buildCartesianSingleLabelElOption","textLayout","makeLineShape","makeRectShape","CartesianAxisPointer","otherExtent","pixelValue","elStyle","pointerShapeBuilder","currPosition","cursorOtherValue","tooltipOptions","getAxisDimIndex","shadow","AxisPointerModel","shadowStyle","inner$8","each$4","records","initGlobalListeners","useHandler","dis","makeDispatchAction","dispatchTooltipFinally","pendings","initialized","doEnter","onLeave","actuallyPayload","showLen","showTip","hideLen","hideTip","currTrigger","unregister","AxisPointerView","triggerOn","findPointFromSeries","getTooltipPosition","isStacked","inner$9","axisTrigger","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","outputPayload","showValueMap","dataByCoordSys","updaters","showPointer","showTooltip","coordSysContainsPoint","inputAxisInfo","findInputAxisInfo","processOnAxis","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","noSnap","outputFinder","buildPayloadsBySeries","payloadBatch","snapToValue","seriesNestestValue","getAxisTooltipData","nestestValue","coordSysItem","coordSysId","coordSysIndex","coordSysType","coordSysMainType","dataByAxis","valueLabelOpt","outputAxesInfo","valItem","highDownKey","lastHighlights","newHighlights","toHighlight","toDownplay","install$11","TooltipModel","showContent","alwaysShowContent","displayMode","confine","showDelay","hideDelay","transitionDuration","enterable","shouldTooltipConfine","confineOption","testStyle","styleProps","TRANSFORM_VENDOR","TRANSITION_VENDOR","toCSSVendorPrefix","styleVendor","styleProp","currentStyle","CSS_TRANSITION_VENDOR","CSS_TRANSFORM_VENDOR","gCssText","mirrorPos","assembleArrow","arrowPosition","rotateDeg","arrowPos","positionStyle","transformStyle","rotateRadian","arrowWH","rotatedWH","SQRT2","borderStyle","styleCss","assembleTransition","onlyFade","transitionCurve","transitionOption","transitionText","assembleTransform","is3d","assembleFont","assembleCssText","enableTransition","boxShadow","borderName","camelCase","makeStyleCoord","appendToBody","zrPainter","zrViewportRoot","body","viewportRootOffset","TooltipHTMLContent","_show","_styleCoord","_enterable","_firstShow","_longHide","_appendToBody","_container","onmouseenter","_hideTimeout","_inContent","onmouseleave","hideLater","_hideDelay","_moveIfResized","className","nearPointColor","_longHideTimeout","styleCoord","setContent","childNodes","arrowEl","setEnterable","offsetWidth","offsetHeight","style_1","transforms","ratioX","ratioY","visibility","willChange","isShow","TooltipRichContent","makeStyleCoord$1","bounding","shadowOuterSize","calcShadowOuterSize","mathMaxWith0","proxyRect","TooltipView","_renderMode","_tooltipContent","_tooltipModel","_ecModel","_alwaysShowContent","tooltipContent","_initGlobalListener","_keepShow","_tryShow","_hide","_lastX","_lastY","_refreshUpdateTimeout","manuallyShowTip","_lastDataByCoordSys","makeDispatchAction$1","_ticket","cmptRef","findComponentReference","positionDefault","_manuallyAxisShowTip","pointInfo","manuallyHideTip","tooltipCascadedModel","buildTooltipModel","_showAxisTooltip","seriesDispatcher_1","cmptDispatcher_1","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","_showTimout","singleTooltipModel","cbParamsList","articleMarkup","markupTextArrLegacy","itemCoordSys","axisItem","axisValue","axisValueLabel","axisSectionMarkup","cbParams","seriesTooltipResult","positionExpr","builtMarkupText","blockBreak","allMarkupText","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","tooltipTrigger","asyncTicket","tooltipModelCascade","subTooltipModel","defaultHtml","nearPoint","_getNearestPoint","params0","isTimeAxis","cbTicket","tooltipDataParams","contentSize","vAlign","viewSize","boxLayoutPosition","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","lastCbParamsList","_cbParamsList","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","lastIndices","lastIdxItem","newIdxItem","lastCbParams","modelCascade","defaultTooltipOption","resultModel","gapH","gapV","domWidth","domHeight","rectWidth","rectHeight","subEl","install$10","DATA_ZOOM_AXIS_DIMENSIONS","SERIES_COORDS","isCoordSupported","coordType","getAxisMainType","findEffectedDataZooms","foundNewLink","axisRecords","effectedModels","effectedModelMap","dataZoomModel","addToEffected","processSingle","isLinked","markAxisControlled","isLink","eachTargetAxis","axisIdxArr","collectReferCoordSysModelInfo","coordSysInfoWrap","infoList","infoMap","coordSysUid","axisModels","DataZoomAxisInfo","indexList","indexMap","axisCmptIdx","DataZoomModel","_autoThrottle","_noTarget","_rangePropMode","inputRawOption","retrieveRawOption","settledOption","_setDefaultThrottle","_updateRangeUse","_resetTarget","optionOrient","targetAxisIndexMap","_targetAxisInfoMap","hasAxisSpecified","_fillSpecifiedTargetAxis","_orient","_makeAutoOrientByTargetAxis","_fillAutoTargetAxisByOrient","refering","needAuto","setParallelAxis","gridModel_1","axModel","globalOption","rangePropMode","rangeModeInOption","percentSpecified","valueSpecified","noTarget","getFirstTargetAxisModel","firstAxisModel","getAxisProxy","getAxisModel","__dzAxisProxy","setRawRange","setCalculatedRange","getPercentRange","axisProxy","findRepresentativeAxisProxy","getDataPercentWindow","getValueRange","getDataValueWindow","firstProxy","axisDimList","hostedBy","getRangePropMode","filterMode","InsideZoomModel","disabled","zoomLock","zoomOnMouseWheel","moveOnMouseMove","moveOnMouseWheel","preventDefaultMouseMove","DataZoomView","sliderMove","handleEnds","handleIndex","minSpan","maxSpan","restrict","handleSpan","originalDistSign","getSpanSign","currDistSign","extentMinSpan","realExtent","ATTR","take","resourceKey","userKey","release","uKey","isTaken","RoamController","mousedownHandler","_mousedownHandler","mousemoveHandler","_mousemoveHandler","mouseupHandler","_mouseupHandler","mousewheelHandler","_mousewheelHandler","pinchHandler","_pinchHandler","controlType","_opt","isDragging","isPinching","_pinching","setPointerChecker","pointerChecker","isAvailableBehavior","oldX","oldY","newY","shouldZoom","shouldMove","absWheelDeltaDelta","factor","checkPointerAndTrigger","absDelta","scrollDelta","controller","behaviorToCheck","contollerEvent","inner$10","setViewInfoToCoordSysRecord","getRange","coordSysRecordMap","coordSysRecord","dzInfo","dataZoomInfoMap","disposeCoordSysRecordIfNeeded","coordSysKeyArr","dzUid","disposeCoordSysRecord","createCoordSysRecord","containsPoint","dzReferCoordSysInfo","dataZoomId","mergeControllerParams","typePriority","dataZoomInfo","oneType","installDataZoomRoamProcessor","apiInner","dzReferCoordSysWrap","dzCoordSysInfo","firstDzInfo","firstDzKey","controllerParams","InsideZoomView","pan","getRangeHandlers","scrollMove","lastRange","directionInfo","getDirectionInfo","percentPoint","signal","pixelStart","pixelLength","pixel","minMaxSpan","getMinMaxSpan","makeMover","getPercentDelta","percentDelta","oldPoint","newPoint","radiusExtent","getRadiusAxis","angleExtent","getAngleAxis","each$5","asc$1","AxisProxy","_dimName","_axisIndex","_dataZoomModel","_valueWindow","_percentWindow","getTargetSeriesModels","axisMainType","_minMaxSpan","calculateDataWindow","hasPropModeValue","_dataExtent","percentExtent","percentWindow","valueWindow","boundPercent","boundValue","spans","restrictSet","fromWindow","toWindow","fromExtent","toExtent","toValue","suffix","targetSeries","calculateDataExtent","_updateMinMaxSpan","dataWindow","_setAxisModel","filterData","store_1","dataDimIndices_1","leftOut","rightOut","thisHasValue","thisLeftOut","thisRightOut","isInWindow","percentSpan","valueSpan","dataZoomProcessor","eachAxisModel","proxyList","seriesModelMap","percentRange","valueRange","installDataZoomAction","installed","installCommon","install$13","SliderZoomModel","handleIcon","moveHandleSize","moveHandleIcon","showDetail","showDataShadow","realtime","brushSelect","Rect$2","DEFAULT_LOCATION_EDGE_GAP","DEFAULT_FRAME_BORDER_WIDTH","DEFAULT_FILLER_SIZE","DEFAULT_MOVE_HANDLE_SIZE","HORIZONTAL","VERTICAL","LABEL_GAP","SHOW_DATA_SHADOW_SERIES_TYPE","REALTIME_ANIMATION_CONFIG","SliderZoomView","_onBrush","_onBrushEnd","_buildView","_updateView","thisGroup","_brushing","brushRect","_resetLocation","_resetInterval","barGroup","sliderGroup","_renderDataShadow","_positionGroup","showMoveHandle","coordRect","_findCoordRect","ecSize","layoutParams","_location","_size","targetAxisModel","otherAxisInverse","_dataShadowInfo","_getViewExtent","clickPanel","_onClickPanel","_onBrushStart","_prepareDataShadowInfo","dataShadowSegs","oldSize","_shadowSize","getShadowDim","polygonPts","_shadowPolygonPts","polylinePts","_shadowPolylinePts","_shadowData","_shadowDim","otherDataExtent_1","otherOffset","lastIsEmpty_1","otherShadowExtent_1","thisShadowExtent","areaPoints_1","linePoints_1","step_1","thisCoord_1","stride_1","otherCoord","createDataShadowGroup","isSelectedArea","thisAxis","getOtherDim","thisDim","handles","handleLabels","filler","_onDragMove","_onDragEnd","onmouseover","_showDataInfo","onmouseout","bRect","_handleHeight","_handleWidth","handleColor","actualMoveZone","moveHandleHeight","moveHandle_1","moveHandle","iconSize","moveZoneExpandSize","moveZone","ondragstart","_range","viewExtent","_handleEnds","_updateInterval","viewExtend","nonRealtime","displaybles","handleInterval","handleHeight","segIntervals","segGroup","_updateDataInfo","dataInterval","_formatLabel","orderedHandleEnds","setLabel","barTransform","textPoint","labelPrecision","valueStr","showOrHide","changed","_dispatchZoomAction","localPoint","_brushStart","_brushStartTime","brushShape","brushEndTime","_updateBrushRect","mouseX","mouseY","brushStart","endPoint","coordSysInfoList","install$14","install$12","SelectDataZoomModel","SelectDataZoomView","install$16","ToolboxFeature","registerFeature","getFeature","ToolboxModel","featureName","Feature","itemSize","showTitle","ToolboxView","toolboxModel","isVertical","featureOpts","_features","featureNames","_featureNames","processFeature","titleText","__title","emphasisTextConfig","emphasisTextState","emphasisTextStyle","needPutOnTop","topOffset","featureModel","newTitle","isUserFeatureName","isToolboxFeature","unusable","createIconPaths","setIconStatus","iconName","iconPaths","iconStatus","iconsMap","titlesMap","iconStyleModel","iconStyleEmphasisModel","icons","getIcons","titles","pathEmphasisState","hoverStyle","defaultTextPosition","SaveAsImage","MouseEvent","$a","download","evt","bubbles","cancelable","dispatchEvent","msSaveOrOpenBlob","base64Encoded","bstr","decodeURIComponent","atob","filename","u8arr","Uint8Array","blob","Blob","cw","contentWindow","doc","write","execCommand","tab","INNER_STACK_KEYWORD","radioTypes","MagicType","availableIcons","seriesOptGenreator","generateNewSeriesTypes","newSeriesOpt","radio","currentType","isStack","BLOCK_SPLITER","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","assembleSeriesWithCategoryAxis","groups","tables","headers","columns","assembleOtherSeries","getContentFromModel","trim$1","isTSVFormat","firstLine","itemSplitRegex","RegExp","parseTSVContents","tsv","tsvLines","parseListContents","hasName","parseContents","blockMetaList","blockMeta","DataView","viewMain","textarea","optionToContent","contentToOption","htmlOrDom","readOnly","buttonContainer","buttonStyle","closeButton","refreshButton","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","tryMergeDataOption","originalData","newVal","newValIsObject","shouldDeleteName","newSeriesOptList","each$6","inner$11","newSnapshot","storedSnapshots","getStoreSnapshots","snapshot","clear$1","snapshots","RestoreOption","BRUSH_PANEL_GLOBAL","mathMin$7","mathMax$7","mathPow$2","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","CURSOR_MAP","ne","sw","nw","se","DEFAULT_BRUSH_OPT","transformable","brushMode","removeOnClick","baseUID","BrushController","_covers","_handlers","_uid","pointerHandlers","enableBrush","brushOption","_mounted","_brushType","_doDisableBrush","brushType","_doEnableBrush","_enableGlobalPan","_brushOption","setPanels","panelOpts","panels_1","_panels","panelId","enableGlobalPan","updateCovers","coverConfigList","coverConfig","tmpIdPrefix","oldCovers","newCovers","creatingCover","_creatingCover","oldGetKey","getKey","addOrUpdate","cover","__brushOption","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","unmount","clearCovers","coverRenderers","coverRenderer","getCoverRenderer","updateCoverShape","updateCommon","getPanelByPoint","localCursorPoint","panel","panels","pn","isTargetByCursor","getPanelByCover","covers","originalLength","trigger$1","areas","shouldShowCover","getTrackEnds","createBaseRectCover","rectRangeConverter","edgeNameSequences","makeStyle","driftRect","nameSequence","updateBaseRect","localRange","xa","ya","x2a","y2a","widtha","heighta","updateRectShape","mainEl","globalDir","getGlobalDirection1","getGlobalDirection2","pointsToRect","clipByPanel","formatRectRange","getTransform$1","localDirName","inverseMap","localDirNameSeq","dirNameSequence","rectRange","toRectRange","localDelta","toLocalDelta","dirName","ind","fromRectRange","driftPolygon","localD","localZero","xmin","ymin","xmax","ymax","resetCursor","isOutsideZrArea","currPanel","rawE","mainShapeContain","updateCoverByMouse","eventParams","_creatingPanel","thisBrushOption","determineBrushType","coverBrushOption","getCreatingRange","defaultBrushType","handleDragEnd","getLineRenderer","returnInput","localTrack","ends","xyIndex","getLinearBrushOtherExtent","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetCoordSysModel","makeRectPanelClipPath","normalizeRect","localPoints","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","makeRectIsTargetByCursor","targetModel","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","_targetInfoList","foundCpts","parseFinder$1","targetInfoBuilders","include","setOutputRanges","matchOutputRanges","coordRange","coordRanges","coordConvert","__rangeOffset","diffProcessor","xyMinMax","findTargetInfo","coordSyses","setInputRanges","rangeOffset","getScales","makePanelOpts","getDefaultBrushType","getPanelRect","controlSeries","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","panelRectBuilders","xAxisDeclared","yAxisDeclared","geoModels","geoModel","axisConvert","rangeOrCoordRange","xminymin","xmaxymax","axisNameIndex","axisDiffProcessor","refer","scales","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","getSize$1","sizeOrigin","each$7","DATA_ZOOM_ID_BASE","DataZoomFeature","_brushController","updateZoomBtnStatus","updateBackBtnStatus","handlers","eventParam","brushTargetManager","makeAxisFinder","setBatch","findDataZoom","minValueSpan","maxValueSpan","dzModel","nextActive","_isZoomActive","dataZoomSelectActive","dzFeatureModel","xAxisId","yAxisId","zoomActive","install$15","featureDataZoomPath","dzOptions","finderResult","buildInternalOptions","axisIndexPropName","$fromToolbox","mathSin$4","mathCos$4","PI$5","PI2$8","degree","SVGPathRebuilder","_start","_d","_str","_p","dThetaPositive","isCircle","unifiedTheta","xRot","dTheta_1","generateStr","getStr","NONE","mathRound$1","pathHasFill","pathHasStroke","strokeProps","svgStrokeProps","mapStyleToAttrs","updateAttr","strokeScale","strokeWidth","SVGNS","XLINKNS","XMLNS","XML_NAMESPACE","createElementNS","createVNode","createElementOpen","attrsStr","part","createElementClose","vNodeToString","convertElToString","getCssString","selectorNodes","animationNodes","bracketBegin","bracketEnd","animations","animationName","createBrushScope","zrId","shadowCache","patternCache","gradientCache","clipPathCache","defs","cssNodes","cssAnims","cssClassIdx","cssAnimIdx","shadowIdx","gradientIdx","patternIdx","clipPathIdx","createSVGVNode","EASING_MAP","transformOriginKey","buildPathString","kfShape","svgPathBuilder","setTransformOrigin","ANIMATE_STYLE_MAP","addAnimation","cssAnim","createCompoundPathCSSAnimation","cssAnimationCfg","cssAnimationName","composedAnim","subScope","createCSSAnimation","animNames","lastAnim","getEasingFunc","onlyShape","cssAnimations","groupAnimators","cfgArr","createSingleCSSAnimation","groupAnimator","transformKfs","shapeKfs","finalKfs","animationTimingFunctionAttrName","saveAnimatorTrackToCssKfs","cssKfs","toCssAttrName","kfEasing","timingFunction","canAnimateShape","newLen","transformOrigin","percents","allTransformOriginSame","round$2","isImageLike$1","isCanvasLike","setStyleAttrs","isFillStroke","setGradient","setPattern","setShadow","noRotateScale","noTranslate","compress","convertPolyShape","strArr","validatePolyShape","createAttrsConvert","desc","normalizedDesc","buitinShapesDef","hasShapeAnimation","brushSVGPath","builtinShpDef","svgElType","willUpdate","pathVersion","elExt","__svgPathBuilder","__svgPathVersion","__svgPathStrokePercent","brushSVGImage","brushSVGTSpan","separatedFontStr","brush$1","shadowKey","shadowId","blur_1","stdDx","stdDy","stdDeviation","gradientTag","gradientAttrs","stopColor","stopsAttrs","gradientVNode","gradientKey","gradientId","patternAttrs","imageWidth_1","imageWidth","imageHeight_1","imageHeight","imageSrc","patternImage","setSizeToVNode_1","vNode","svgEl","elm","createdImage","patternVNode","patternTransform","patternKey","patternId","clipPathId","clipPathAttrs","createTextNode","newNode","referenceNode","colonChar","xChar","emptyNode","isUndef","isDef","createKeyToOldIdx","beginIdx","endIdx","sameVnode","vnode1","vnode2","isSameKey","isSameTag","createElm","vnode","updateAttrs","addVnodes","parentElm","before","vnodes","startIdx","removeVnodes","oldVnode","oldAttrs","cur","removeAttribute","setAttributeNS","updateChildren","oldCh","newCh","oldKeyToIdx","idxInOld","elmToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","patchVnode","patch","parent_2","svgId","SVGPainter","createMethodNotSupport","_oldVNode","viewport","_viewport","svgDom","_svgDom","renderToVNode","_bgVNode","mainVNode","_mainVNode","animationCssStr","styleNode","cssAnimation","bgVNode","currentClipPathGroup","listLen","clipPathsGroupsStack","clipPathsGroupsStackDepth","clipGroupNodeIdx","prevLen","lca","i_2","groupAttrs","viewportStyle","base64","encodeURIComponent","zrUtil","List","parseGeoJson","innerDrawElementOnCanvas","_vm","_self","staticClass","_v","_m","signout","staticRenderFns","require","ready","registered","updatefound","updated","offline","Ciphers","alphabet","morse","morse_numbers","nato_spelling_alphabet","ciphers","parameters","cipher","cipher_text","encoded_text","char_index","letter_case","encoded_char","current_encode_char","current_encode_char_index","decoded_text","decoded_char","Vue","Vuex","user_id","cookies","user","trackers","getters","get_user","tracker_types","tracker_type","tracker_ids","tracker_id","get_trackers","mutations","logout","login","username","auth_token","set_tracker","modules","VueRouter","routes","redirect","auth","router","process","beforeEach","async","VueCookies","echarts","currentdate","mstr","datetime","getHours","getMinutes","getSeconds","getMilliseconds","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","deferred","O","chunkIds","notFulfilled","every","__esModule","definition","chunkId","Promise","promises","miniCssF","globalThis","inProgress","dataWebpackPrefix","script","needAttach","scripts","getElementsByTagName","charset","timeout","nc","onScriptComplete","doneFns","toStringTag","createStylesheet","fullhref","resolve","reject","linkTag","rel","onLinkComplete","errorType","realHref","request","findStylesheet","existingLinkTags","dataHref","existingStyleTags","loadStylesheet","installedCssChunks","miniCss","cssChunks","then","installedChunks","installedChunkData","promise","loadingEnded","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}