"use strict";(self["webpackChunkvue_test"]=self["webpackChunkvue_test"]||[]).push([[901],{2901:function(t,e,r){r.r(e),r.d(e,{default:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"addlogs"},[t._m(0),e("br"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6 offset-3 h5"},[e("div",{staticClass:"row m-3"},[e("div",{staticClass:"col-6"},[t._v(" Add log to Tracker: ")]),e("div",{staticClass:"col-6"},["null"==this.rtracker_id?e("select",{directives:[{name:"model",rawName:"v-model",value:t.tracker,expression:"tracker"}],staticClass:"sel_trk",attrs:{id:"sel_trk",name:"sel_trk"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.tracker=e.target.multiple?r:r[0]}}},t._l(t.get_trackers,(function(r){return e("option",{key:r.tracker_id,domProps:{value:r}},[t._v(t._s(r.tracker_name)+"-"+t._s(r.tracker_type)+" ")])})),0):e("div",{staticClass:"sel_trk"},[e("router-link",{attrs:{to:{name:"dash.tracker",params:{id:t.rtracker_id}}}},[t._v(t._s(t.sel_tracker.tracker_name))])],1)])]),e("div",{staticClass:"row m-3"},[e("div",{staticClass:"col-6"},[t._v(" Tracker type: ")]),e("div",{staticClass:"col-6"},[t._v(" "+t._s(this.tracker.tracker_type)+" ")])]),"Integer"===t.tracker.tracker_type?e("div",{staticClass:"row m-3"},[t._m(1),t._m(2)]):t._e(),"Numeric"===t.tracker.tracker_type?e("div",{staticClass:"row m-3"},[t._m(3),t._m(4)]):t._e(),"Time"===t.tracker.tracker_type?e("div",{staticClass:"row m-3"},[t._m(5),e("div",{staticClass:"col-6"},[e("input",{attrs:{id:"log_val",type:"text"},domProps:{value:t.time}}),e("button",{attrs:{id:"start"},on:{click:function(e){return t.startwatch()}}},[t._v("Start")]),e("button",{attrs:{id:"reset"},on:{click:function(e){t.resetwatch().reset()}}},[t._v("Reset")])])]):t._e(),"Multiple-choice"===t.tracker.tracker_type?e("div",{staticClass:"row m-3"},[t._m(6),e("div",{staticClass:"col-6"},[e("select",{attrs:{id:"log_val",name:"log_val"}},t._l(t.tracker.settings.split(","),(function(r,s){return e("option",{key:s},[t._v(t._s(r))])})),0)])]):t._e(),t._m(7),e("div",{staticClass:"row m-3"},[e("div",{staticClass:"col d-flex justify-content-center"},[e("button",{attrs:{type:"submit",name:"button"},on:{click:t.postlog}},[t._v("Submit")]),e("div",{attrs:{id:"error"}})])])])])])},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-6 offset-3 d-flex justify-content-center"},[e("h1",[t._v("Add a log")])]),e("div",{staticClass:"col-3 d-flex justify-content-center"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-6"},[e("label",{attrs:{for:"log_val"}},[t._v("Log value")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-6"},[e("input",{attrs:{step:"1",type:"Number",id:"log_val",name:"log_val",placeholder:"Int",oninput:"this.value = Math.round(this.value);",required:""}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-6"},[e("label",{attrs:{for:"log_val"}},[t._v("Log value")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-6"},[e("input",{attrs:{type:"Number",id:"log_val",name:"log_val",step:"0.000001",placeholder:"Float",required:""}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-6"},[e("label",{attrs:{for:"log_val"}},[t._v("Log value")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-6"},[e("label",{attrs:{for:"log_val"}},[t._v("Log value")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row m-3"},[e("div",{staticClass:"col-6"},[t._v(" Enter a note ")]),e("div",{staticClass:"col-6"},[e("textarea",{attrs:{id:"log_note",name:"note",placeholder:"Note/Remark"}})])])}],i=r(3822),o=r(5200),l={data(){return{tracker:"",rtracker_id:this.$route.params.id||null,time:"00:00:00"}},methods:{refresh(){let t=this;fetch("http://localhost:5000/api/user/"+t.$store.state.user,{method:"GET",headers:{"A-T":t.$Ciphers.decode("Vigenere Cipher",t.$cookies.get("user")||"",["Pwd"]).split(";")[2]||""}}).then((t=>{if(t.ok&&!t.redirected)return t.json();throw{e_code:t.status,error:t.statusText}})).then((e=>{for(let r of e.trackers)t.$store.commit("set_tracker",r)})).catch((e=>{console.log(e),console.log(e.error+" kindly re-login"),t.$router.push("/login")}))},startwatch:function(){return o.Z.start()},resetwatch:function(){return o.Z.reset()},postlog(){if(""===this.tracker)return document.getElementById("error").innerHTML="Select Tracker first",null;if(null===document.getElementById("log_val")||""===document.getElementById("log_val").value)return document.getElementById("error").innerHTML="Enter log value",null;if(null===document.getElementById("log_note"))return console.log("note element missing"),null;document.getElementById("error").innerHTML="";let t=new Date,e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=t.getDate()+"/"+e[t.getMonth()]+"/"+t.getFullYear()+", "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"."+t.getMilliseconds(),s={tracker_id:this.tracker.tracker_id,log_value:document.getElementById("log_val").value,log_datetime:r,log_note:document.getElementById("log_note").value};fetch("http://localhost:5000/api/log",{method:"POST",headers:{"Content-Type":"application/json","A-T":this.$Ciphers.decode("Vigenere Cipher",this.$cookies.get("user")||"",["Pwd"]).split(";")[2]||""},body:JSON.stringify(s)}).then((t=>{if(!t.ok||t.redirected)throw{e_code:t.status,error:t.statusText};alert("Logged")})).catch((t=>{console.log(t),console.log(t.error+" kindly re-login")}))},set_tracker(t){this.tracker=t}},computed:{...(0,i.Se)(["tracker_types","get_trackers","tracker_ids"]),sel_tracker(){for(let t of this.get_trackers)t.tracker_id==this.rtracker_id&&this.set_tracker(t);return this.tracker}},mounted(){0==this.$store.getters.tracker_types.length&&this.refresh()}},n=l,c=r(1001),u=(0,c.Z)(n,s,a,!1,null,"1f671606",null),d=u.exports},5200:function(t,e){const r={hour:0,sec:0,min:0,dispHour:0,dispMin:0,dispSec:0,timeoutId:null,check:"start",timer:function(){console.log("from timer"),console.log(this),r.sec++,r.sec/60==1&&(r.min++,r.sec=0,r.min/60==1&&(r.hour++,r.min=0)),r.sec<10?r.dispSec="0"+r.sec.toString():r.dispSec=r.sec.toString(),r.min<10?r.dispMin="0"+r.min.toString():r.dispMin=r.min.toString(),r.hour<10?r.dispHour="0"+r.hour.toString():r.dispHour=r.hour.toString(),document.getElementById("log_val").value=r.dispHour+":"+r.dispMin+":"+r.dispSec},start:function(){"start"===this.check?(this.timeoutId=window.setInterval(this.timer,1e3),document.getElementById("start").innerHTML="Stop",this.check="stop"):(window.clearInterval(this.timeoutId),document.getElementById("start").innerHTML="Start",this.check="start")},reset:function(){window.clearInterval(this.timeoutId),this.sec=0,this.min=0,this.hour=0,document.getElementById("log_val").value="00:00:00",document.getElementById("start").innerHTML="Start"}};e["Z"]=r}}]);
//# sourceMappingURL=901.595b62f8.js.map