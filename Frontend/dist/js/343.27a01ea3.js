"use strict";(self["webpackChunkvue_test"]=self["webpackChunkvue_test"]||[]).push([[343],{7343:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"userprofile"},[e._m(0),t("br"),t("div",{staticClass:"row"},[t("div",{staticClass:"form col-sm-6 offset-sm-3"},[t("label",{attrs:{for:"username"}},[e._v("Username:")]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",name:"username",id:"username",disabled:"",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:e.edit_username}},[e._v(" edit")]),t("br"),e.username_validate?e._e():t("h6",{staticStyle:{"font-family":"zillaslab,palatino,Palatino Linotype,serif",color:"red"}},[e._v(" "+e._s(e.error.u)+" ")]),t("br"),t("label",{attrs:{for:"email"}},[e._v("Email:")]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email",name:"email",required:"",disabled:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),t("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:e.edit_email}},[e._v(" edit ")]),e.email_validate?e._e():t("h6",{staticStyle:{"font-family":"zillaslab,palatino,Palatino Linotype,serif",color:"red"}},[e._v(" "+e._s(e.error.e)+" ")]),t("br"),t("div",{staticClass:"row"},[t("div",{staticClass:"col-6"},[t("label",{attrs:{for:"password"}},[e._v("Enter password:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.old_password,expression:"old_password"}],staticClass:"form-control",attrs:{type:"password",id:"password",required:""},domProps:{value:e.old_password},on:{input:function(t){t.target.composing||(e.old_password=t.target.value)}}}),t("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:e.show_pwd}},[e._v(" view ")])]),e.changepwd?t("div",{staticClass:"col-6"},[t("label",{attrs:{for:"new_password"}},[e._v("New password:")]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.new_password,expression:"new_password"}],staticClass:"form-control",attrs:{type:"text",name:"new_password",required:""},domProps:{value:e.new_password},on:{input:function(t){t.target.composing||(e.new_password=t.target.value)}}}),t("br")]):e._e()]),e.password_validate?e._e():t("h6",{staticStyle:{"font-family":"zillaslab,palatino,Palatino Linotype,serif",color:"red"}},[e._v(" "+e._s(e.error.p)+" ")])])]),t("div",{staticClass:"d-flex col justify-content-center"},[t("button",{staticClass:"m-2 btn btn-outline-info",attrs:{type:"button"},on:{click:function(t){e.changepwd?e.changepwd=!1:e.changepwd=!0}}},[e._v(" Change password ")]),t("button",{staticClass:"m-2 btn btn-outline-primary",attrs:{type:"button"},on:{click:e.update}},[e._v(" Update submit ")]),t("button",{staticClass:"h6 m-2 btn btn-outline-danger",attrs:{type:"button"},on:{click:e.del}},[e._v(" Delete Account ")])])])},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"row",attrs:{align:"center"}},[t("h3",[e._v("Profile")]),t("br"),t("br")])}],o={data(){return{username:"",changepwd:!1,old_password:"",new_password:"",email:"",error:{u:"",p:"",e:""}}},methods:{gen_uerror:function(e){this.error.u=e},gen_perror:function(e){this.error.p=e},gen_eerror:function(e){this.error.e=e},edit_email(){document.getElementById("email").disabled?document.getElementById("email").disabled=!1:document.getElementById("email").disabled=!0},edit_username(){document.getElementById("username").disabled?document.getElementById("username").disabled=!1:document.getElementById("username").disabled=!0},show_pwd(){"password"==document.getElementById("password").type?document.getElementById("password").type="text":document.getElementById("password").type="password"},refresh(){let e=this;fetch("http://localhost:5000/api/user/"+this.$store.state.user,{method:"GET",headers:{"A-T":this.$Ciphers.decode("Vigenere Cipher",this.$cookies.get("user")||"",["Pwd"]).split(";")[2]||""}}).then((e=>{if(e.ok&&!e.redirected)return e.json();throw{e_code:e.status,error:e.statusText}})).then((t=>{e.username=t.username,e.email=t.email})).catch((t=>{console.log(t.error+" kindly re-login"),e.$router.push("/login")}))},update:function(){let e=this;if(this.username_validate){let t={modified_username:this.username,old_password:this.old_password,new_password:this.new_password,modified_email:this.email};fetch("http://localhost:5000/api/user/"+this.$store.state.user,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json","A-T":this.$Ciphers.decode("Vigenere Cipher",this.$cookies.get("user")||"",["Pwd"]).split(";")[2]||""},body:JSON.stringify(t)}).then((function(e){if(e.ok)return e.json();throw"no response"})).then((function(t){console.log(t),e.$cookies.set("user",e.$Ciphers.encode("Vigenere Cipher",t.user_id+";"+t.username+";"+e.$store.state.token,["Pwd"])),e.$store.commit("login",t),alert("Updated successfully"),e.$router.push("/dashboard")})).catch((e=>console.log(e)))}else alert("Invalid username or password")},del:function(){let e=this;if(window.confirm("Are you sure want to delete this account completely?")){let t={password:this.old_password};fetch("http://localhost:5000/api/user/"+this.$store.state.user,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json","A-T":this.$Ciphers.decode("Vigenere Cipher",this.$cookies.get("user")||"",["Pwd"]).split(";")[2]||""},body:JSON.stringify(t)}).then((function(e){if(e.ok)return e.json();throw e})).then((()=>{console.log(e),e.$cookies.remove("user"),alert("Deleted"),e.$router.push("/dashboard")})).catch((e=>{console.log(e),alert(e.statusText)}))}}},computed:{username_validate:function(){let e=/^[0-9a-zA-Z]*$/;return this.username.match(e)&&this.username.length>0?(this.gen_uerror(""),!0):(this.gen_uerror("Username must be alphanumeric"),!1)},password_validate:function(){let e=/^(?=.*).{8,}$/;return this.old_password.match(e)?this.changepwd&&!this.new_password.match(e)?(this.gen_perror("New password should be atleast 8 characters"),!1):(this.gen_perror(""),!0):(this.gen_perror("Password should be atleast 8 characters"),!1)},email_validate:function(){let e=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return!!this.email.match(e)||(this.gen_eerror("Invalid email"),!1)}},mounted(){this.refresh()}},n=o,i=s(1001),l=(0,i.Z)(n,r,a,!1,null,null,null),d=l.exports}}]);
//# sourceMappingURL=343.27a01ea3.js.map