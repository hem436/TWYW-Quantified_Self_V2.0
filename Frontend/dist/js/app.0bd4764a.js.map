{"version":3,"file":"js/app.0bd4764a.js","mappings":"mEAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,QAAQ,CAACF,EAAG,SAAS,CAACG,YAAY,mEAAmE,CAACH,EAAG,IAAI,CAACG,YAAY,sEAAsED,MAAM,CAAC,KAAO,MAAM,CAACJ,EAAIM,GAAG,0BAA0BN,EAAIO,GAAG,GAAGL,EAAG,MAAM,CAACG,YAAY,aAAa,CAACL,EAAIO,GAAG,GAAGL,EAAG,KAAK,CAACG,YAAY,mCAAmC,CAACH,EAAG,KAAK,CAACA,EAAG,cAAc,CAACG,YAAY,gBAAgBD,MAAM,CAAC,GAAK,aAAa,CAACJ,EAAIM,GAAG,eAAe,GAAGJ,EAAG,KAAK,CAACG,YAAY,qBAAqBH,EAAG,KAAK,CAACA,EAAG,IAAI,CAACG,YAAY,gBAAgBD,MAAM,CAAC,KAAO,UAAUI,GAAG,CAAC,MAAQR,EAAIS,UAAU,CAACT,EAAIM,GAAG,sBAAsBJ,EAAG,gBAAgB,EACnuB,EACGQ,EAAkB,CAAC,WAAY,IAAIV,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,SAAS,CAACG,YAAY,uDAAuDD,MAAM,CAAC,KAAO,SAAS,iBAAiB,WAAW,iBAAiB,eAAe,gBAAgB,cAAc,gBAAgB,QAAQ,aAAa,sBAAsB,CAACF,EAAG,OAAO,CAACG,YAAY,yBAC1V,EAAC,WAAY,IAAIL,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,SAAS,CAACG,YAAY,0HAA0HD,MAAM,CAAC,KAAO,SAAS,iBAAiB,WAAW,kBAAkB,SAAS,gBAAgB,UAAU,CAACF,EAAG,MAAM,CAACG,YAAY,iBAAiBD,MAAM,CAAC,IAAMO,EAAQ,MAA6B,IAAM,MAAM,MAAQ,KAAK,OAAS,SACxa,GCqDD,GACAC,KAAAA,MACAC,QAAAA,CACAJ,UACA,6BACA,2BACA,IC/D0O,I,UCQtOK,GAAY,OACd,EACAf,EACAW,GACA,EACA,KACA,KACA,MAIF,EAAeI,EAAiB,Q,WCd9BC,EAAAA,EAAAA,GAAU,qBAA2C,CACnDC,QACEC,QAAQC,IACN,qGAGH,EACDC,aACEF,QAAQC,IAAI,sCACb,EACDE,SACEH,QAAQC,IAAI,2CACb,EACDG,cACEJ,QAAQC,IAAI,8BACb,EACDI,UACEL,QAAQC,IAAI,4CACb,EACDK,UACEN,QAAQC,IAAI,gEACb,EACDM,MAAOA,GACLP,QAAQO,MAAM,4CAA6CA,EAC5D,I,2CC5BDC,G,QAAU,CACZC,SAAU,6BAA6BC,MAAM,IAC7CC,MAAO,CACL,KACA,OACA,OACA,MACA,IACA,OACA,MACA,OACA,KACA,OACA,MACA,OACA,KACA,KACA,MACA,OACA,OACA,MACA,MACA,IACA,MACA,OACA,MACA,OACA,OACA,QAEFC,cAAe,CACb,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,SAEFC,uBAAwB,CACtB,OACA,QACA,UACA,QACA,OACA,UACA,OACA,QACA,QACA,UACA,OACA,OACA,OACA,WACA,QACA,OACA,SACA,QACA,SACA,QACA,UACA,SACA,UACA,QACA,SACA,QAEFC,QAAS,CACP,QACA,gBACA,aACA,kBACA,yBACA,SACA,gBAEFC,WAAY,CACV,KACA,2BACA,KACA,4BACA,KACA,KACA,MAEFC,OAAQ,SAASC,EAAQC,EAAaC,GACpC,OAAQF,GACN,IAAK,gBAEH,IADA,IAAIG,EAAe,GACXC,EAAa,EAAGA,EAAaH,EAAYI,OAAQD,IAAa,CACpE,IAAIE,EAAOL,EAAYG,GACvB,IAAiD,GAA9CrC,KAAKyB,SAASe,QAAQD,EAAKE,eAAqB,CACjD,IAAIC,EAAc,QACfH,GAAQA,EAAKI,gBACdD,EAAc,SAEhB,IAAIE,EAAe5C,KAAKyB,UAAUzB,KAAKyB,SAASe,QAAQD,EAAKE,eAAiBN,EAAO,IAAMnC,KAAKyB,SAASa,QAEvGF,GADgB,SAAfM,EACeE,EAEAA,EAAaD,aAEhC,MACCP,GAAgBG,CAEnB,CACD,OAAOH,EAET,IAAK,QACH,OAAOpC,KAAKgC,OAAO,gBAAiBE,EAAa,CAAC,KAEpD,IAAK,kBACHC,EAAO,GAAKA,EAAO,GAAGM,cAClBL,EAAe,GAAnB,IACIS,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","sources":["webpack://vue-test/./src/App.vue","webpack://vue-test/src/App.vue","webpack://vue-test/./src/App.vue?51dd","webpack://vue-test/./src/App.vue?0e40","webpack://vue-test/./src/registerServiceWorker.js","webpack://vue-test/./src/scripts/ciphers.js","webpack://vue-test/./src/store/index.js","webpack://vue-test/./src/router/index.js","webpack://vue-test/./src/main.js","webpack://vue-test/./src/scripts/echarts.js","webpack://vue-test/webpack/bootstrap","webpack://vue-test/webpack/runtime/chunk loaded","webpack://vue-test/webpack/runtime/compat get default export","webpack://vue-test/webpack/runtime/define property getters","webpack://vue-test/webpack/runtime/ensure chunk","webpack://vue-test/webpack/runtime/get javascript chunk filename","webpack://vue-test/webpack/runtime/get mini-css chunk filename","webpack://vue-test/webpack/runtime/global","webpack://vue-test/webpack/runtime/hasOwnProperty shorthand","webpack://vue-test/webpack/runtime/load script","webpack://vue-test/webpack/runtime/make namespace object","webpack://vue-test/webpack/runtime/publicPath","webpack://vue-test/webpack/runtime/css loading","webpack://vue-test/webpack/runtime/jsonp chunk loading","webpack://vue-test/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('header',{staticClass:\"navbar navbar-dark sticky-top bg-info flex-md-nowrap p-0 shadow\"},[_c('a',{staticClass:\"fs-3 navbar-brand d-flex justify-content-center col-4 offset-4 px-3\",attrs:{\"href\":\"#\"}},[_vm._v(\"TWYW-Quantified self\")]),_vm._m(0),_c('div',{staticClass:\"btn-group\"},[_vm._m(1),_c('ul',{staticClass:\"dropdown-menu dropdown-menu-end\"},[_c('li',[_c('router-link',{staticClass:\"dropdown-item\",attrs:{\"to\":\"/profile\"}},[_vm._v(\" Profile\")])],1),_c('hr',{staticClass:\"dropdown-divider\"}),_c('li',[_c('a',{staticClass:\"dropdown-item\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.signout}},[_vm._v(\"Sign out\")])])])])]),_c('router-view')],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('button',{staticClass:\"navbar-toggler position-absolute d-md-none collapsed\",attrs:{\"type\":\"button\",\"data-bs-toggle\":\"collapse\",\"data-bs-target\":\"#sidebarMenu\",\"aria-controls\":\"sidebarMenu\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\"}},[_c('span',{staticClass:\"navbar-toggler-icon\"})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('button',{staticClass:\"d-flex align-items-center justify-content-center p-3 link-dark text-decoration-none dropdown-toggle btn dropdown-toggle\",attrs:{\"type\":\"button\",\"data-bs-toggle\":\"dropdown\",\"data-bs-display\":\"static\",\"aria-expanded\":\"false\"}},[_c('img',{staticClass:\"rounded-circle\",attrs:{\"src\":require(\"../public/img/userimg.png\"),\"alt\":\"mdo\",\"width\":\"30\",\"height\":\"30\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n    <header\n      class=\"navbar navbar-dark  sticky-top bg-info flex-md-nowrap p-0 shadow\"\n    >\n      <a\n        class=\"fs-3  navbar-brand d-flex justify-content-center col-4 offset-4 px-3 \"\n        href=\"#\"\n        >TWYW-Quantified self</a\n      >\n      <button\n        class=\"navbar-toggler position-absolute d-md-none collapsed\"\n        type=\"button\"\n        data-bs-toggle=\"collapse\"\n        data-bs-target=\"#sidebarMenu\"\n        aria-controls=\"sidebarMenu\"\n        aria-expanded=\"false\"\n        aria-label=\"Toggle navigation\"\n      >\n        <span class=\"navbar-toggler-icon\"></span>\n      </button>\n      <!-- <input class=\"form-control form-control-dark w-100\" type=\"text\" placeholder=\"Search\" aria-label=\"Search\"> -->\n      <div class=\"btn-group\">\n        <button\n          type=\"button\"\n          class=\"d-flex align-items-center justify-content-center p-3 link-dark text-decoration-none dropdown-toggle btn dropdown-toggle\"\n          data-bs-toggle=\"dropdown\"\n          data-bs-display=\"static\"\n          aria-expanded=\"false\"\n        >\n          <img\n            src=\"../public/img/userimg.png\"\n            alt=\"mdo\"\n            width=\"30\"\n            height=\"30\"\n            class=\"rounded-circle\"\n          />\n        </button>\n\n        <ul class=\"dropdown-menu dropdown-menu-end\">\n          <li>\n            <router-link class=\"dropdown-item\" to=\"/profile\">\n              Profile</router-link\n            >\n          </li>\n          <hr class=\"dropdown-divider\" />\n          <li>\n            <a @click=\"signout\" class=\"dropdown-item\" type=\"button\">Sign out</a>\n          </li>\n        </ul>\n      </div>\n    </header>\n    <router-view />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"App\",\n  methods: {\n    signout() {\n      this.$cookies.remove(\"user\");\n      this.$router.push(\"/login\");\n    }\n  }\n};\n</script>\n\n<style>\n#app {\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  margin-top: 0px;\n}\n</style>\n","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=96d59bc8&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=96d59bc8&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable no-console */\n\nimport { register } from 'register-service-worker'\n\nif (process.env.NODE_ENV === 'production') {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready () {\n      console.log(\n        'App is being served from cache by a service worker.\\n' +\n        'For more details, visit https://goo.gl/AFskqB'\n      )\n    },\n    registered () {\n      console.log('Service worker has been registered.')\n    },\n    cached () {\n      console.log('Content has been cached for offline use.')\n    },\n    updatefound () {\n      console.log('New content is downloading.')\n    },\n    updated () {\n      console.log('New content is available; please refresh.')\n    },\n    offline () {\n      console.log('No internet connection found. App is running in offline mode.')\n    },\n    error (error) {\n      console.error('Error during service worker registration:', error)\n    }\n  })\n}\n","/* eslint-disable */ \nvar Ciphers = {\n  alphabet: \"abcdefghijklmnopqrstuvwxyz\".split(\"\"),\n  morse: [\n    '.-',\n    '-...',\n    '-.-.',\n    '-..',\n    '.',\n    '..-.',\n    '--.',\n    '....',\n    '..',\n    '.---',\n    '-.-',\n    '.-..',\n    '--',\n    '-.',\n    '---',\n    '.--.',\n    '--.-',\n    '.-.',\n    '...',\n    '-',\n    '..-',\n    '...-',\n    '.--',\n    '-..-',\n    '-.--',\n    '--..'\n  ],\n  morse_numbers: [\n    \"-----\",\n    \".----\",\n    \"..---\",\n    \"...--\",\n    \"....-\",\n    \".....\",\n    \"-....\",\n    \"--...\",\n    \"---..\",\n    \"----.\"\n  ],\n  nato_spelling_alphabet: [\n    \"alfa\",\n    \"bravo\",\n    \"charlie\",\n    \"delta\",\n    \"echo\",\n    \"foxtrot\",\n    \"golf\",\n    \"hotel\",\n    \"india\",\n    \"juliett\",\n    \"kilo\",\n    \"lima\",\n    \"mike\",\n    \"november\",\n    \"oscar\",\n    \"papa\",\n    \"quebec\",\n    \"romeo\",\n    \"sierra\",\n    \"tango\",\n    \"uniform\",\n    \"victor\",\n    \"whiskey\",\n    \"x-ray\",\n    \"yankee\",\n    \"zulu\"\n  ],\n  ciphers: [\n    \"ROT13\",\n    \"Caesar Cipher\",\n    \"Morse Code\",\n    \"Vigenere Cipher\",\n    \"NATO Spelling Alphabet\",\n    \"Base64\",\n    \"URL Encoding\"\n  ],\n  parameters: [\n    \"[]\",\n    \"[shift_amount (Integer)]\",\n    \"[]\",\n    \"[String keyword (String)]\",\n    \"[]\",\n    \"[]\",\n    \"[]\"\n  ],\n  encode: function(cipher, cipher_text, params){\n    switch (cipher) {\n      case \"Caesar Cipher\":\n        var encoded_text = \"\";\n        for(var char_index = 0; char_index < cipher_text.length; char_index++){\n          var char = cipher_text[char_index];\n          if(this.alphabet.indexOf(char.toLowerCase()) != -1){\n            var letter_case = \"lower\";\n            if(char == char.toUpperCase()){\n              letter_case = \"upper\";\n            }\n            var encoded_char = this.alphabet[(this.alphabet.indexOf(char.toLowerCase()) + params[0]) % this.alphabet.length];\n            if(letter_case == \"lower\"){\n              encoded_text += encoded_char;\n            }else{\n              encoded_text += encoded_char.toUpperCase();\n            }\n          }else{\n            encoded_text += char;\n          }\n        }\n        return encoded_text;\n        break;\n      case \"ROT13\":\n        return this.encode(\"Caesar Cipher\", cipher_text, [13]);\n        break;\n      case \"Vigenere Cipher\":\n        params[0] = params[0].toLowerCase();\n        var encoded_text = \"\";\n        var current_encode_char = params[0][0];\n        var current_encode_char_index = 0;\n        for(var char_index = 0; char_index < cipher_text.length; char_index++){\n            var char = cipher_text[char_index];\n            if(this.alphabet.indexOf(char.toLowerCase()) != -1){\n              var letter_case = \"lower\";\n              if(char == char.toUpperCase()){\n                letter_case = \"upper\";\n              }\n\n              var encoded_char;\n\n              if(params[1]){\n                encoded_char = this.decode(\"Caesar Cipher\", char, [this.alphabet.indexOf(current_encode_char)]);\n              }else{\n                encoded_char = this.encode(\"Caesar Cipher\", char, [this.alphabet.indexOf(current_encode_char)]);\n              }\n\n              if(letter_case == \"lower\"){\n                encoded_text += encoded_char;\n              }else{\n                encoded_text += encoded_char.toUpperCase();\n              }\n\n              current_encode_char_index++;\n              current_encode_char = params[0][current_encode_char_index % params[0].length];\n            }else{\n              encoded_text += char;\n            }\n        }\n        return encoded_text;\n        break;\n      case \"Morse Code\":\n        var encoded_text = \"\";\n        for(var char_index = 0; char_index < cipher_text.length; char_index++){\n          if(char_index != 0){\n            encoded_text += \" \";\n          }\n          var char = cipher_text[char_index];\n          if(this.alphabet.indexOf(char.toLowerCase()) != -1){\n            encoded_text += this.morse[this.alphabet.indexOf(char.toLowerCase())];\n          }else if(parseInt(char) >= 0 && parseInt(char) <= 9){\n            encoded_text += this.morse_numbers[parseInt(char)];\n          }else if(char == \" \"){\n            encoded_text += \"/\";\n          }else if(char == \"!\"){\n            encoded_text += \"-.-.--\";\n          }else if(char == \".\"){\n            encoded_text += \".-.-.-\";\n          }else if(char == \",\"){\n            encoded_text += \"--..--\";\n          }else{\n            encoded_text += char;\n          }\n        }\n        return encoded_text;\n        break;\n      case \"NATO Spelling Alphabet\":\n        var encoded_text = \"\";\n        for(var char_index = 0; char_index < cipher_text.length; char_index++){\n          if(char_index != 0){\n            encoded_text += \" \";\n          }\n          var char = cipher_text[char_index];\n          if(this.alphabet.indexOf(char.toLowerCase()) != -1){\n            var encoded_char = this.nato_spelling_alphabet[this.alphabet.indexOf(char.toLowerCase())];\n            if(char == char.toUpperCase()){\n              encoded_text += encoded_char.toUpperCase();\n            }else{\n              encoded_text += encoded_char.toLowerCase();\n            }\n          }else if(char == \".\"){\n            encoded_text += \"Stop\";\n          }else if(char == \" \"){\n            encoded_text += \"(space)\";\n          }else{\n            encoded_text += char;\n          }\n        }\n        return encoded_text;\n        break;\n      case \"Base64\":\n        return btoa(cipher_text);\n        break;\n      case \"URL Encoding\":\n        return (encodeURIComponent(cipher_text));\n        break;\n      default:\n        console.error(\"Cipher \" + cipher + \" not found.\");\n        return;\n    }\n  },\n  decode: function(cipher, cipher_text, params){\n    switch (cipher) {\n      case \"Caesar Cipher\":\n        return this.encode(\"Caesar Cipher\", cipher_text, [26 - params[0]]);\n        break;\n      case \"ROT13\":\n        return this.decode(\"Caesar Cipher\", cipher_text, [13]);\n        break;\n      case \"Vigenere Cipher\":\n        return this.encode(\"Vigenere Cipher\", cipher_text, [params[0], true]);\n        break;\n      case \"Morse Code\":\n        var decoded_text = \"\";\n        cipher_text = cipher_text.split(\" \");\n        for(var char_index = 0; char_index < cipher_text.length; char_index++){\n          var char = cipher_text[char_index];\n          if(this.morse.indexOf(char) != -1){\n            decoded_text += this.alphabet[this.morse.indexOf(char)];\n          }else if(this.morse_numbers.indexOf(char) != -1){\n            decoded_text += this.morse_numbers.indexOf(char);\n          }else if(char == \"/\"){\n            decoded_text += \" \";\n          }else if(char == \"-.-.--\"){\n            decoded_text += \"!\";\n          }else if(char == \".-.-.-\"){\n            decoded_text += \".\";\n          }else if(char == \"--..--\"){\n            decoded_text += \",\";\n          }else{\n            decoded_text += char;\n          }\n        }\n        return decoded_text;\n        break;\n      case \"NATO Spelling Alphabet\":\n        var decoded_text = \"\";\n        cipher_text = cipher_text.split(\" \");\n        for(var char_index = 0; char_index < cipher_text.length; char_index++){\n          var char = cipher_text[char_index];\n          if(this.nato_spelling_alphabet.indexOf(char.toLowerCase()) != -1){\n            var decoded_char = this.alphabet[this.nato_spelling_alphabet.indexOf(char.toLowerCase())];\n            if(char == char.toUpperCase()){\n              decoded_text += decoded_char.toUpperCase();\n            }else{\n              decoded_text += decoded_char.toLowerCase();\n            }\n          }else if(char == \"Stop\"){\n            decoded_text += \".\";\n          }else if(char == \"(space)\"){\n            decoded_text += \" \";\n          }else{\n            decoded_text += char;\n          }\n        }\n        return decoded_text;\n        break;\n      case \"Base64\":\n        return atob(cipher_text);\n        break;\n      case \"URL Encoding\":\n        return decodeURIComponent(cipher_text);\n        break;\n      default:\n        console.error(\"Cipher \" + cipher + \" not found.\");\n        return;\n    }\n  }\n};\nexport default Ciphers;\n","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport cookies from 'vue-cookies'\nimport Ciphers from '../scripts/ciphers.js'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    user_id:Ciphers.decode(\"Vigenere Cipher\",cookies.get(\"user\")||\"\",[\"Pwd\"]).split(\";\")[0]||\"\",\n    user:Ciphers.decode(\"Vigenere Cipher\",cookies.get(\"user\")||\"\",[\"Pwd\"]).split(\";\")[1]||\"\",\n    token:Ciphers.decode(\"Vigenere Cipher\",cookies.get(\"user\")||\"\",[\"Pwd\"]).split(\";\")[2]||\"\",\n    trackers:[]\n  },\n  getters:{\n    get_user(state){\n      return [state.user_id,state.user]\n    },\n    tracker_types(state){\n      return state.trackers.map(t=>t.tracker_type)\n    },\n    tracker_ids(state){\n      return state.trackers.map(t=>t.tracker_id)\n    },\n    get_trackers(state){\n      return state.trackers\n    }\n  },\n  mutations: {\n    logout(state){\n      state.user=\"\";\n      state.token=\"\";\n      state.user_id=\"\";\n      state.trackers=[]\n    },\n    login(state,obj){\n      state.user_id=obj.user_id;\n      state.user=obj.username;\n      state.token=obj.auth_token;\n    },\n    set_tracker(state,obj){\n      state.trackers.push(obj)},\n    delete_trackers(state){\n      state.trackers=[]\n    }\n  },\n  actions: {\n  },\n  modules: {\n  }\n})\n","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport store from '../store/index.js'\n\nVue.use(VueRouter)\n\nconst routes = [{\n    path:'/',\n    redirect:'/dashboard'\n  },{\n    path: '/dashboard',\n    component: () => import('@/views/DashIndex'),\n    children: [{\n        path: '/',\n        name: 'dash.home',\n        component: () => import('@/components/DashHome'),\n        meta: {\n          title: 'Home Dashboard',\n          auth:true\n        }\n      },\n      {\n          path: '/report',\n          name: 'schedule.report',\n          component: () => import('@/components/ScheduleReport'),\n          meta: {\n            title: 'Schedule Reports',\n            auth:true\n          }\n        },{\n            path: '/profile',\n            name: 'user.profile',\n            component: () => import('@/components/ProFile'),\n            meta: {\n              title: 'User Profile',\n              auth:true\n            }\n          },\n      {\n        path: '/tracker/add',\n        name: 'tracker.add',\n        component: () => import('@/components/AddTracker')\n      },\n      {\n        path: '/tracker/update/:id',\n        name: 'tracker.update',\n        component: () => import('@/components/UpdateTracker')\n      },\n      {\n        path: '/tracker/:id',\n        name: 'dash.tracker',\n        component: () => import('@/components/DashTracker')\n      },\n      {\n        path: '/import/tracker',\n        name: 'imp.tracker',\n        component: () => import('@/components/ImportTracker')\n      },\n      {\n        path:'/log/add',\n        name: 'log.add',\n        redirect:'/log/null'\n      },\n\n      {\n        path:'/log/update/:id',\n        name: 'log.update',\n        component: () => import('@/components/UpdateLog')\n      },\n      {\n        path:'/log/:id',\n        name: 'log.add.id',\n        component: () => import('@/components/AddLog')\n      },\n      {\n        path: '/import/log',\n        name: 'imp.logs',\n        component: () => import('@/components/ImportLogs')\n      }\n    ]\n  },\n  {\n    path: '/login',\n    name: 'login',\n    component: () => import('@/views/LogIn'),\n    meta:{auth:false}\n  },\n  {\n    path: '/signup',\n    name: 'signup',\n    component: () => import('@/views/SignUp'),\n    meta:{auth:false}\n  },\n\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\nrouter.beforeEach(async(to, from,next) => {\n  // instead of having to check every route record with \"WyI1MjJlMDBmMGI3ODE0NTg0YjcwMmEyN2IwZGEwOTFkYiJd.Yv3haw.CCf1H1tUJqdwZmusxwOFuCCLwkI\"\n  // to.matched.some(record => record.meta.requiresAuth)\n  console.log(from.path+'-->'+to.path)\n  console.log(store.state.token.length)\n  if (to.meta.auth) {\n    if(store.state.token.length==83)\n    {next()}\n    else{next({name:'login'})}\n  }\n  else {\n  next()}\n})\nexport default router\n","// npm install vue-cookies --save\n//\n// // require\n// var Vue = require('vue')\n// Vue.use(require('vue-cookies'))\n\nimport Vue from 'vue'\nimport App from './App.vue'\nimport './registerServiceWorker'\nimport router from './router'\nimport store from './store'\nimport VueCookies from 'vue-cookies'\nimport Ciphers from './scripts/ciphers.js'\nimport * as echarts from './scripts/echarts.js'\n\nVue.use(VueCookies);\nVue.prototype.$echarts= echarts;\nVue.prototype.$Ciphers = Ciphers;\nVue.filter(\"date_format\", function(value) {\n  let currentdate = new Date(value);\n  let mstr = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\"\n  ];\n  let datetime =\n    currentdate.getDate() +\n    \"/\" +\n    mstr[currentdate.getMonth()] +\n    \"/\" +\n    currentdate.getFullYear() +\n    \", \" +\n    currentdate.getHours() +\n    \":\" +\n    currentdate.getMinutes() +\n    \":\" +\n    currentdate.getSeconds() +\n    \".\" +\n    currentdate.getMilliseconds();\n  // if(!value) return ''\n  // value = value.toString()\n  return datetime;\n});\n\nVue.config.productionTip = false\n\nnew Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount('#app')\n","\n\n/* eslint-disable */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) : typeof define === 'function' && define.amd ? define(['exports'], factory) : factory(global.echarts = {});\n})(this, function (exports) {\n  'use strict';\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  function __extends(d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  }\n  /** @deprecated */\n\n  /** @deprecated */\n\n\n  var Browser = function () {\n    function Browser() {\n      this.firefox = false;\n      this.ie = false;\n      this.edge = false;\n      this.newEdge = false;\n      this.weChat = false;\n    }\n\n    return Browser;\n  }();\n\n  var Env = function () {\n    function Env() {\n      this.browser = new Browser();\n      this.node = false;\n      this.wxa = false;\n      this.worker = false;\n      this.svgSupported = false;\n      this.touchEventsSupported = false;\n      this.pointerEventsSupported = false;\n      this.domSupported = false;\n      this.transformSupported = false;\n      this.transform3dSupported = false;\n      this.hasGlobalWindow = typeof window !== 'undefined';\n    }\n\n    return Env;\n  }();\n\n  var env = new Env();\n\n  if (typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function') {\n    env.wxa = true;\n    env.touchEventsSupported = true;\n  } else if (typeof document === 'undefined' && typeof self !== 'undefined') {\n    env.worker = true;\n  } else if (typeof navigator === 'undefined') {\n    env.node = true;\n    env.svgSupported = true;\n  } else {\n    detect(navigator.userAgent, env);\n  }\n\n  function detect(ua, env) {\n    var browser = env.browser;\n    var firefox = ua.match(/Firefox\\/([\\d.]+)/);\n    var ie = ua.match(/MSIE\\s([\\d.]+)/) || ua.match(/Trident\\/.+?rv:(([\\d.]+))/);\n    var edge = ua.match(/Edge?\\/([\\d.]+)/);\n    var weChat = /micromessenger/i.test(ua);\n\n    if (firefox) {\n      browser.firefox = true;\n      browser.version = firefox[1];\n    }\n\n    if (ie) {\n      browser.ie = true;\n      browser.version = ie[1];\n    }\n\n    if (edge) {\n      browser.edge = true;\n      browser.version = edge[1];\n      browser.newEdge = +edge[1].split('.')[0] > 18;\n    }\n\n    if (weChat) {\n      browser.weChat = true;\n    }\n\n    env.svgSupported = typeof SVGRect !== 'undefined';\n    env.touchEventsSupported = 'ontouchstart' in window && !browser.ie && !browser.edge;\n    env.pointerEventsSupported = 'onpointerdown' in window && (browser.edge || browser.ie && +browser.version >= 11);\n    env.domSupported = typeof document !== 'undefined';\n    var style = document.documentElement.style;\n    env.transform3dSupported = (browser.ie && 'transition' in style || browser.edge || 'WebKitCSSMatrix' in window && 'm11' in new WebKitCSSMatrix() || 'MozPerspective' in style) && !('OTransition' in style);\n    env.transformSupported = env.transform3dSupported || browser.ie && +browser.version >= 9;\n  }\n\n  var DEFAULT_FONT_SIZE = 12;\n  var DEFAULT_FONT_FAMILY = 'sans-serif';\n  var DEFAULT_FONT = DEFAULT_FONT_SIZE + \"px \" + DEFAULT_FONT_FAMILY;\n  var OFFSET = 20;\n  var SCALE = 100;\n  var defaultWidthMapStr = \"007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\\\\\WQb\\\\0FWLg\\\\bWb\\\\WQ\\\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\\\FFF5.5N\";\n\n  function getTextWidthMap(mapStr) {\n    var map = {};\n\n    if (typeof JSON === 'undefined') {\n      return map;\n    }\n\n    for (var i = 0; i < mapStr.length; i++) {\n      var char = String.fromCharCode(i + 32);\n      var size = (mapStr.charCodeAt(i) - OFFSET) / SCALE;\n      map[char] = size;\n    }\n\n    return map;\n  }\n\n  var DEFAULT_TEXT_WIDTH_MAP = getTextWidthMap(defaultWidthMapStr);\n  var platformApi = {\n    createCanvas: function () {\n      return typeof document !== 'undefined' && document.createElement('canvas');\n    },\n    measureText: function () {\n      var _ctx;\n\n      var _cachedFont;\n\n      return function (text, font) {\n        if (!_ctx) {\n          var canvas = platformApi.createCanvas();\n          _ctx = canvas && canvas.getContext('2d');\n        }\n\n        if (_ctx) {\n          if (_cachedFont !== font) {\n            _cachedFont = _ctx.font = font || DEFAULT_FONT;\n          }\n\n          return _ctx.measureText(text);\n        } else {\n          text = text || '';\n          font = font || DEFAULT_FONT;\n          var res = /^([0-9]*?)px$/.exec(font);\n          var fontSize = +(res && res[1]) || DEFAULT_FONT_SIZE;\n          var width = 0;\n\n          if (font.indexOf('mono') >= 0) {\n            width = fontSize * text.length;\n          } else {\n            for (var i = 0; i < text.length; i++) {\n              var preCalcWidth = DEFAULT_TEXT_WIDTH_MAP[text[i]];\n              width += preCalcWidth == null ? fontSize : preCalcWidth * fontSize;\n            }\n          }\n\n          return {\n            width: width\n          };\n        }\n      };\n    }(),\n    loadImage: function (src, onload, onerror) {\n      var image = new Image();\n      image.onload = onload;\n      image.onerror = onerror;\n      image.src = src;\n      return image;\n    }\n  };\n\n  function setPlatformAPI(newPlatformApis) {\n    for (var key in platformApi) {\n      if (newPlatformApis[key]) {\n        platformApi[key] = newPlatformApis[key];\n      }\n    }\n  }\n\n  var BUILTIN_OBJECT = reduce(['Function', 'RegExp', 'Date', 'Error', 'CanvasGradient', 'CanvasPattern', 'Image', 'Canvas'], function (obj, val) {\n    obj['[object ' + val + ']'] = true;\n    return obj;\n  }, {});\n  var TYPED_ARRAY = reduce(['Int8', 'Uint8', 'Uint8Clamped', 'Int16', 'Uint16', 'Int32', 'Uint32', 'Float32', 'Float64'], function (obj, val) {\n    obj['[object ' + val + 'Array]'] = true;\n    return obj;\n  }, {});\n  var objToString = Object.prototype.toString;\n  var arrayProto = Array.prototype;\n  var nativeForEach = arrayProto.forEach;\n  var nativeFilter = arrayProto.filter;\n  var nativeSlice = arrayProto.slice;\n  var nativeMap = arrayProto.map;\n\n  var ctorFunction = function () {}.constructor;\n\n  var protoFunction = ctorFunction ? ctorFunction.prototype : null;\n  var protoKey = '__proto__';\n  var idStart = 0x0907;\n\n  function guid() {\n    return idStart++;\n  }\n\n  function logError() {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (typeof console !== 'undefined') {\n      console.error.apply(console, args);\n    }\n  }\n\n  function clone(source) {\n    if (source == null || typeof source !== 'object') {\n      return source;\n    }\n\n    var result = source;\n    var typeStr = objToString.call(source);\n\n    if (typeStr === '[object Array]') {\n      if (!isPrimitive(source)) {\n        result = [];\n\n        for (var i = 0, len = source.length; i < len; i++) {\n          result[i] = clone(source[i]);\n        }\n      }\n    } else if (TYPED_ARRAY[typeStr]) {\n      if (!isPrimitive(source)) {\n        var Ctor = source.constructor;\n\n        if (Ctor.from) {\n          result = Ctor.from(source);\n        } else {\n          result = new Ctor(source.length);\n\n          for (var i = 0, len = source.length; i < len; i++) {\n            result[i] = source[i];\n          }\n        }\n      }\n    } else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\n      result = {};\n\n      for (var key in source) {\n        if (source.hasOwnProperty(key) && key !== protoKey) {\n          result[key] = clone(source[key]);\n        }\n      }\n    }\n\n    return result;\n  }\n\n  function merge(target, source, overwrite) {\n    if (!isObject(source) || !isObject(target)) {\n      return overwrite ? clone(source) : target;\n    }\n\n    for (var key in source) {\n      if (source.hasOwnProperty(key) && key !== protoKey) {\n        var targetProp = target[key];\n        var sourceProp = source[key];\n\n        if (isObject(sourceProp) && isObject(targetProp) && !isArray(sourceProp) && !isArray(targetProp) && !isDom(sourceProp) && !isDom(targetProp) && !isBuiltInObject(sourceProp) && !isBuiltInObject(targetProp) && !isPrimitive(sourceProp) && !isPrimitive(targetProp)) {\n          merge(targetProp, sourceProp, overwrite);\n        } else if (overwrite || !(key in target)) {\n          target[key] = clone(source[key]);\n        }\n      }\n    }\n\n    return target;\n  }\n\n  function mergeAll(targetAndSources, overwrite) {\n    var result = targetAndSources[0];\n\n    for (var i = 1, len = targetAndSources.length; i < len; i++) {\n      result = merge(result, targetAndSources[i], overwrite);\n    }\n\n    return result;\n  }\n\n  function extend(target, source) {\n    if (Object.assign) {\n      Object.assign(target, source);\n    } else {\n      for (var key in source) {\n        if (source.hasOwnProperty(key) && key !== protoKey) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  }\n\n  function defaults(target, source, overlay) {\n    var keysArr = keys(source);\n\n    for (var i = 0; i < keysArr.length; i++) {\n      var key = keysArr[i];\n\n      if (overlay ? source[key] != null : target[key] == null) {\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  var createCanvas = platformApi.createCanvas;\n\n  function indexOf(array, value) {\n    if (array) {\n      if (array.indexOf) {\n        return array.indexOf(value);\n      }\n\n      for (var i = 0, len = array.length; i < len; i++) {\n        if (array[i] === value) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  function inherits(clazz, baseClazz) {\n    var clazzPrototype = clazz.prototype;\n\n    function F() {}\n\n    F.prototype = baseClazz.prototype;\n    clazz.prototype = new F();\n\n    for (var prop in clazzPrototype) {\n      if (clazzPrototype.hasOwnProperty(prop)) {\n        clazz.prototype[prop] = clazzPrototype[prop];\n      }\n    }\n\n    clazz.prototype.constructor = clazz;\n    clazz.superClass = baseClazz;\n  }\n\n  function mixin(target, source, override) {\n    target = 'prototype' in target ? target.prototype : target;\n    source = 'prototype' in source ? source.prototype : source;\n\n    if (Object.getOwnPropertyNames) {\n      var keyList = Object.getOwnPropertyNames(source);\n\n      for (var i = 0; i < keyList.length; i++) {\n        var key = keyList[i];\n\n        if (key !== 'constructor') {\n          if (override ? source[key] != null : target[key] == null) {\n            target[key] = source[key];\n          }\n        }\n      }\n    } else {\n      defaults(target, source, override);\n    }\n  }\n\n  function isArrayLike(data) {\n    if (!data) {\n      return false;\n    }\n\n    if (typeof data === 'string') {\n      return false;\n    }\n\n    return typeof data.length === 'number';\n  }\n\n  function each(arr, cb, context) {\n    if (!(arr && cb)) {\n      return;\n    }\n\n    if (arr.forEach && arr.forEach === nativeForEach) {\n      arr.forEach(cb, context);\n    } else if (arr.length === +arr.length) {\n      for (var i = 0, len = arr.length; i < len; i++) {\n        cb.call(context, arr[i], i, arr);\n      }\n    } else {\n      for (var key in arr) {\n        if (arr.hasOwnProperty(key)) {\n          cb.call(context, arr[key], key, arr);\n        }\n      }\n    }\n  }\n\n  function map(arr, cb, context) {\n    if (!arr) {\n      return [];\n    }\n\n    if (!cb) {\n      return slice(arr);\n    }\n\n    if (arr.map && arr.map === nativeMap) {\n      return arr.map(cb, context);\n    } else {\n      var result = [];\n\n      for (var i = 0, len = arr.length; i < len; i++) {\n        result.push(cb.call(context, arr[i], i, arr));\n      }\n\n      return result;\n    }\n  }\n\n  function reduce(arr, cb, memo, context) {\n    if (!(arr && cb)) {\n      return;\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      memo = cb.call(context, memo, arr[i], i, arr);\n    }\n\n    return memo;\n  }\n\n  function filter(arr, cb, context) {\n    if (!arr) {\n      return [];\n    }\n\n    if (!cb) {\n      return slice(arr);\n    }\n\n    if (arr.filter && arr.filter === nativeFilter) {\n      return arr.filter(cb, context);\n    } else {\n      var result = [];\n\n      for (var i = 0, len = arr.length; i < len; i++) {\n        if (cb.call(context, arr[i], i, arr)) {\n          result.push(arr[i]);\n        }\n      }\n\n      return result;\n    }\n  }\n\n  function find(arr, cb, context) {\n    if (!(arr && cb)) {\n      return;\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      if (cb.call(context, arr[i], i, arr)) {\n        return arr[i];\n      }\n    }\n  }\n\n  function keys(obj) {\n    if (!obj) {\n      return [];\n    }\n\n    if (Object.keys) {\n      return Object.keys(obj);\n    }\n\n    var keyList = [];\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        keyList.push(key);\n      }\n    }\n\n    return keyList;\n  }\n\n  function bindPolyfill(func, context) {\n    var args = [];\n\n    for (var _i = 2; _i < arguments.length; _i++) {\n      args[_i - 2] = arguments[_i];\n    }\n\n    return function () {\n      return func.apply(context, args.concat(nativeSlice.call(arguments)));\n    };\n  }\n\n  var bind = protoFunction && isFunction(protoFunction.bind) ? protoFunction.call.bind(protoFunction.bind) : bindPolyfill;\n\n  function curry(func) {\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n\n    return function () {\n      return func.apply(this, args.concat(nativeSlice.call(arguments)));\n    };\n  }\n\n  function isArray(value) {\n    if (Array.isArray) {\n      return Array.isArray(value);\n    }\n\n    return objToString.call(value) === '[object Array]';\n  }\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n\n  function isString(value) {\n    return typeof value === 'string';\n  }\n\n  function isStringSafe(value) {\n    return objToString.call(value) === '[object String]';\n  }\n\n  function isNumber(value) {\n    return typeof value === 'number';\n  }\n\n  function isObject(value) {\n    var type = typeof value;\n    return type === 'function' || !!value && type === 'object';\n  }\n\n  function isBuiltInObject(value) {\n    return !!BUILTIN_OBJECT[objToString.call(value)];\n  }\n\n  function isTypedArray(value) {\n    return !!TYPED_ARRAY[objToString.call(value)];\n  }\n\n  function isDom(value) {\n    return typeof value === 'object' && typeof value.nodeType === 'number' && typeof value.ownerDocument === 'object';\n  }\n\n  function isGradientObject(value) {\n    return value.colorStops != null;\n  }\n\n  function isImagePatternObject(value) {\n    return value.image != null;\n  }\n\n  function isRegExp(value) {\n    return objToString.call(value) === '[object RegExp]';\n  }\n\n  function eqNaN(value) {\n    return value !== value;\n  }\n\n  function retrieve() {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    for (var i = 0, len = args.length; i < len; i++) {\n      if (args[i] != null) {\n        return args[i];\n      }\n    }\n  }\n\n  function retrieve2(value0, value1) {\n    return value0 != null ? value0 : value1;\n  }\n\n  function retrieve3(value0, value1, value2) {\n    return value0 != null ? value0 : value1 != null ? value1 : value2;\n  }\n\n  function slice(arr) {\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n\n    return nativeSlice.apply(arr, args);\n  }\n\n  function normalizeCssArray(val) {\n    if (typeof val === 'number') {\n      return [val, val, val, val];\n    }\n\n    var len = val.length;\n\n    if (len === 2) {\n      return [val[0], val[1], val[0], val[1]];\n    } else if (len === 3) {\n      return [val[0], val[1], val[2], val[1]];\n    }\n\n    return val;\n  }\n\n  function assert(condition, message) {\n    if (!condition) {\n      throw new Error(message);\n    }\n  }\n\n  function trim(str) {\n    if (str == null) {\n      return null;\n    } else if (typeof str.trim === 'function') {\n      return str.trim();\n    } else {\n      return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    }\n  }\n\n  var primitiveKey = '__ec_primitive__';\n\n  function setAsPrimitive(obj) {\n    obj[primitiveKey] = true;\n  }\n\n  function isPrimitive(obj) {\n    return obj[primitiveKey];\n  }\n\n  var HashMap = function () {\n    function HashMap(obj) {\n      this.data = {};\n      var isArr = isArray(obj);\n      this.data = {};\n      var thisMap = this;\n      obj instanceof HashMap ? obj.each(visit) : obj && each(obj, visit);\n\n      function visit(value, key) {\n        isArr ? thisMap.set(value, key) : thisMap.set(key, value);\n      }\n    }\n\n    HashMap.prototype.get = function (key) {\n      return this.data.hasOwnProperty(key) ? this.data[key] : null;\n    };\n\n    HashMap.prototype.set = function (key, value) {\n      return this.data[key] = value;\n    };\n\n    HashMap.prototype.each = function (cb, context) {\n      for (var key in this.data) {\n        if (this.data.hasOwnProperty(key)) {\n          cb.call(context, this.data[key], key);\n        }\n      }\n    };\n\n    HashMap.prototype.keys = function () {\n      return keys(this.data);\n    };\n\n    HashMap.prototype.removeKey = function (key) {\n      delete this.data[key];\n    };\n\n    return HashMap;\n  }();\n\n  function createHashMap(obj) {\n    return new HashMap(obj);\n  }\n\n  function concatArray(a, b) {\n    var newArray = new a.constructor(a.length + b.length);\n\n    for (var i = 0; i < a.length; i++) {\n      newArray[i] = a[i];\n    }\n\n    var offset = a.length;\n\n    for (var i = 0; i < b.length; i++) {\n      newArray[i + offset] = b[i];\n    }\n\n    return newArray;\n  }\n\n  function createObject(proto, properties) {\n    var obj;\n\n    if (Object.create) {\n      obj = Object.create(proto);\n    } else {\n      var StyleCtor = function () {};\n\n      StyleCtor.prototype = proto;\n      obj = new StyleCtor();\n    }\n\n    if (properties) {\n      extend(obj, properties);\n    }\n\n    return obj;\n  }\n\n  function disableUserSelect(dom) {\n    var domStyle = dom.style;\n    domStyle.webkitUserSelect = 'none';\n    domStyle.userSelect = 'none';\n    domStyle.webkitTapHighlightColor = 'rgba(0,0,0,0)';\n    domStyle['-webkit-touch-callout'] = 'none';\n  }\n\n  function hasOwn(own, prop) {\n    return own.hasOwnProperty(prop);\n  }\n\n  function noop() {}\n\n  var RADIAN_TO_DEGREE = 180 / Math.PI;\n  var util = (Object.freeze || Object)({\n    guid: guid,\n    logError: logError,\n    clone: clone,\n    merge: merge,\n    mergeAll: mergeAll,\n    extend: extend,\n    defaults: defaults,\n    createCanvas: createCanvas,\n    indexOf: indexOf,\n    inherits: inherits,\n    mixin: mixin,\n    isArrayLike: isArrayLike,\n    each: each,\n    map: map,\n    reduce: reduce,\n    filter: filter,\n    find: find,\n    keys: keys,\n    bind: bind,\n    curry: curry,\n    isArray: isArray,\n    isFunction: isFunction,\n    isString: isString,\n    isStringSafe: isStringSafe,\n    isNumber: isNumber,\n    isObject: isObject,\n    isBuiltInObject: isBuiltInObject,\n    isTypedArray: isTypedArray,\n    isDom: isDom,\n    isGradientObject: isGradientObject,\n    isImagePatternObject: isImagePatternObject,\n    isRegExp: isRegExp,\n    eqNaN: eqNaN,\n    retrieve: retrieve,\n    retrieve2: retrieve2,\n    retrieve3: retrieve3,\n    slice: slice,\n    normalizeCssArray: normalizeCssArray,\n    assert: assert,\n    trim: trim,\n    setAsPrimitive: setAsPrimitive,\n    isPrimitive: isPrimitive,\n    HashMap: HashMap,\n    createHashMap: createHashMap,\n    concatArray: concatArray,\n    createObject: createObject,\n    disableUserSelect: disableUserSelect,\n    hasOwn: hasOwn,\n    noop: noop,\n    RADIAN_TO_DEGREE: RADIAN_TO_DEGREE\n  });\n\n  function create(x, y) {\n    if (x == null) {\n      x = 0;\n    }\n\n    if (y == null) {\n      y = 0;\n    }\n\n    return [x, y];\n  }\n\n  function copy(out, v) {\n    out[0] = v[0];\n    out[1] = v[1];\n    return out;\n  }\n\n  function clone$1(v) {\n    return [v[0], v[1]];\n  }\n\n  function set(out, a, b) {\n    out[0] = a;\n    out[1] = b;\n    return out;\n  }\n\n  function add(out, v1, v2) {\n    out[0] = v1[0] + v2[0];\n    out[1] = v1[1] + v2[1];\n    return out;\n  }\n\n  function scaleAndAdd(out, v1, v2, a) {\n    out[0] = v1[0] + v2[0] * a;\n    out[1] = v1[1] + v2[1] * a;\n    return out;\n  }\n\n  function sub(out, v1, v2) {\n    out[0] = v1[0] - v2[0];\n    out[1] = v1[1] - v2[1];\n    return out;\n  }\n\n  function len(v) {\n    return Math.sqrt(lenSquare(v));\n  }\n\n  var length = len;\n\n  function lenSquare(v) {\n    return v[0] * v[0] + v[1] * v[1];\n  }\n\n  var lengthSquare = lenSquare;\n\n  function mul(out, v1, v2) {\n    out[0] = v1[0] * v2[0];\n    out[1] = v1[1] * v2[1];\n    return out;\n  }\n\n  function div(out, v1, v2) {\n    out[0] = v1[0] / v2[0];\n    out[1] = v1[1] / v2[1];\n    return out;\n  }\n\n  function dot(v1, v2) {\n    return v1[0] * v2[0] + v1[1] * v2[1];\n  }\n\n  function scale(out, v, s) {\n    out[0] = v[0] * s;\n    out[1] = v[1] * s;\n    return out;\n  }\n\n  function normalize(out, v) {\n    var d = len(v);\n\n    if (d === 0) {\n      out[0] = 0;\n      out[1] = 0;\n    } else {\n      out[0] = v[0] / d;\n      out[1] = v[1] / d;\n    }\n\n    return out;\n  }\n\n  function distance(v1, v2) {\n    return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]));\n  }\n\n  var dist = distance;\n\n  function distanceSquare(v1, v2) {\n    return (v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]);\n  }\n\n  var distSquare = distanceSquare;\n\n  function negate(out, v) {\n    out[0] = -v[0];\n    out[1] = -v[1];\n    return out;\n  }\n\n  function lerp(out, v1, v2, t) {\n    out[0] = v1[0] + t * (v2[0] - v1[0]);\n    out[1] = v1[1] + t * (v2[1] - v1[1]);\n    return out;\n  }\n\n  function applyTransform(out, v, m) {\n    var x = v[0];\n    var y = v[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n  }\n\n  function min(out, v1, v2) {\n    out[0] = Math.min(v1[0], v2[0]);\n    out[1] = Math.min(v1[1], v2[1]);\n    return out;\n  }\n\n  function max(out, v1, v2) {\n    out[0] = Math.max(v1[0], v2[0]);\n    out[1] = Math.max(v1[1], v2[1]);\n    return out;\n  }\n\n  var vector = (Object.freeze || Object)({\n    create: create,\n    copy: copy,\n    clone: clone$1,\n    set: set,\n    add: add,\n    scaleAndAdd: scaleAndAdd,\n    sub: sub,\n    len: len,\n    length: length,\n    lenSquare: lenSquare,\n    lengthSquare: lengthSquare,\n    mul: mul,\n    div: div,\n    dot: dot,\n    scale: scale,\n    normalize: normalize,\n    distance: distance,\n    dist: dist,\n    distanceSquare: distanceSquare,\n    distSquare: distSquare,\n    negate: negate,\n    lerp: lerp,\n    applyTransform: applyTransform,\n    min: min,\n    max: max\n  });\n\n  var Param = function () {\n    function Param(target, e) {\n      this.target = target;\n      this.topTarget = e && e.topTarget;\n    }\n\n    return Param;\n  }();\n\n  var Draggable = function () {\n    function Draggable(handler) {\n      this.handler = handler;\n      handler.on('mousedown', this._dragStart, this);\n      handler.on('mousemove', this._drag, this);\n      handler.on('mouseup', this._dragEnd, this);\n    }\n\n    Draggable.prototype._dragStart = function (e) {\n      var draggingTarget = e.target;\n\n      while (draggingTarget && !draggingTarget.draggable) {\n        draggingTarget = draggingTarget.parent || draggingTarget.__hostTarget;\n      }\n\n      if (draggingTarget) {\n        this._draggingTarget = draggingTarget;\n        draggingTarget.dragging = true;\n        this._x = e.offsetX;\n        this._y = e.offsetY;\n        this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragstart', e.event);\n      }\n    };\n\n    Draggable.prototype._drag = function (e) {\n      var draggingTarget = this._draggingTarget;\n\n      if (draggingTarget) {\n        var x = e.offsetX;\n        var y = e.offsetY;\n        var dx = x - this._x;\n        var dy = y - this._y;\n        this._x = x;\n        this._y = y;\n        draggingTarget.drift(dx, dy, e);\n        this.handler.dispatchToElement(new Param(draggingTarget, e), 'drag', e.event);\n        var dropTarget = this.handler.findHover(x, y, draggingTarget).target;\n        var lastDropTarget = this._dropTarget;\n        this._dropTarget = dropTarget;\n\n        if (draggingTarget !== dropTarget) {\n          if (lastDropTarget && dropTarget !== lastDropTarget) {\n            this.handler.dispatchToElement(new Param(lastDropTarget, e), 'dragleave', e.event);\n          }\n\n          if (dropTarget && dropTarget !== lastDropTarget) {\n            this.handler.dispatchToElement(new Param(dropTarget, e), 'dragenter', e.event);\n          }\n        }\n      }\n    };\n\n    Draggable.prototype._dragEnd = function (e) {\n      var draggingTarget = this._draggingTarget;\n\n      if (draggingTarget) {\n        draggingTarget.dragging = false;\n      }\n\n      this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragend', e.event);\n\n      if (this._dropTarget) {\n        this.handler.dispatchToElement(new Param(this._dropTarget, e), 'drop', e.event);\n      }\n\n      this._draggingTarget = null;\n      this._dropTarget = null;\n    };\n\n    return Draggable;\n  }();\n\n  var Eventful = function () {\n    function Eventful(eventProcessors) {\n      if (eventProcessors) {\n        this._$eventProcessor = eventProcessors;\n      }\n    }\n\n    Eventful.prototype.on = function (event, query, handler, context) {\n      if (!this._$handlers) {\n        this._$handlers = {};\n      }\n\n      var _h = this._$handlers;\n\n      if (typeof query === 'function') {\n        context = handler;\n        handler = query;\n        query = null;\n      }\n\n      if (!handler || !event) {\n        return this;\n      }\n\n      var eventProcessor = this._$eventProcessor;\n\n      if (query != null && eventProcessor && eventProcessor.normalizeQuery) {\n        query = eventProcessor.normalizeQuery(query);\n      }\n\n      if (!_h[event]) {\n        _h[event] = [];\n      }\n\n      for (var i = 0; i < _h[event].length; i++) {\n        if (_h[event][i].h === handler) {\n          return this;\n        }\n      }\n\n      var wrap = {\n        h: handler,\n        query: query,\n        ctx: context || this,\n        callAtLast: handler.zrEventfulCallAtLast\n      };\n      var lastIndex = _h[event].length - 1;\n      var lastWrap = _h[event][lastIndex];\n      lastWrap && lastWrap.callAtLast ? _h[event].splice(lastIndex, 0, wrap) : _h[event].push(wrap);\n      return this;\n    };\n\n    Eventful.prototype.isSilent = function (eventName) {\n      var _h = this._$handlers;\n      return !_h || !_h[eventName] || !_h[eventName].length;\n    };\n\n    Eventful.prototype.off = function (eventType, handler) {\n      var _h = this._$handlers;\n\n      if (!_h) {\n        return this;\n      }\n\n      if (!eventType) {\n        this._$handlers = {};\n        return this;\n      }\n\n      if (handler) {\n        if (_h[eventType]) {\n          var newList = [];\n\n          for (var i = 0, l = _h[eventType].length; i < l; i++) {\n            if (_h[eventType][i].h !== handler) {\n              newList.push(_h[eventType][i]);\n            }\n          }\n\n          _h[eventType] = newList;\n        }\n\n        if (_h[eventType] && _h[eventType].length === 0) {\n          delete _h[eventType];\n        }\n      } else {\n        delete _h[eventType];\n      }\n\n      return this;\n    };\n\n    Eventful.prototype.trigger = function (eventType) {\n      var args = [];\n\n      for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n      }\n\n      if (!this._$handlers) {\n        return this;\n      }\n\n      var _h = this._$handlers[eventType];\n      var eventProcessor = this._$eventProcessor;\n\n      if (_h) {\n        var argLen = args.length;\n        var len = _h.length;\n\n        for (var i = 0; i < len; i++) {\n          var hItem = _h[i];\n\n          if (eventProcessor && eventProcessor.filter && hItem.query != null && !eventProcessor.filter(eventType, hItem.query)) {\n            continue;\n          }\n\n          switch (argLen) {\n            case 0:\n              hItem.h.call(hItem.ctx);\n              break;\n\n            case 1:\n              hItem.h.call(hItem.ctx, args[0]);\n              break;\n\n            case 2:\n              hItem.h.call(hItem.ctx, args[0], args[1]);\n              break;\n\n            default:\n              hItem.h.apply(hItem.ctx, args);\n              break;\n          }\n        }\n      }\n\n      eventProcessor && eventProcessor.afterTrigger && eventProcessor.afterTrigger(eventType);\n      return this;\n    };\n\n    Eventful.prototype.triggerWithContext = function (type) {\n      var args = [];\n\n      for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n      }\n\n      if (!this._$handlers) {\n        return this;\n      }\n\n      var _h = this._$handlers[type];\n      var eventProcessor = this._$eventProcessor;\n\n      if (_h) {\n        var argLen = args.length;\n        var ctx = args[argLen - 1];\n        var len = _h.length;\n\n        for (var i = 0; i < len; i++) {\n          var hItem = _h[i];\n\n          if (eventProcessor && eventProcessor.filter && hItem.query != null && !eventProcessor.filter(type, hItem.query)) {\n            continue;\n          }\n\n          switch (argLen) {\n            case 0:\n              hItem.h.call(ctx);\n              break;\n\n            case 1:\n              hItem.h.call(ctx, args[0]);\n              break;\n\n            case 2:\n              hItem.h.call(ctx, args[0], args[1]);\n              break;\n\n            default:\n              hItem.h.apply(ctx, args.slice(1, argLen - 1));\n              break;\n          }\n        }\n      }\n\n      eventProcessor && eventProcessor.afterTrigger && eventProcessor.afterTrigger(type);\n      return this;\n    };\n\n    return Eventful;\n  }();\n\n  var LN2 = Math.log(2);\n\n  function determinant(rows, rank, rowStart, rowMask, colMask, detCache) {\n    var cacheKey = rowMask + '-' + colMask;\n    var fullRank = rows.length;\n\n    if (detCache.hasOwnProperty(cacheKey)) {\n      return detCache[cacheKey];\n    }\n\n    if (rank === 1) {\n      var colStart = Math.round(Math.log((1 << fullRank) - 1 & ~colMask) / LN2);\n      return rows[rowStart][colStart];\n    }\n\n    var subRowMask = rowMask | 1 << rowStart;\n    var subRowStart = rowStart + 1;\n\n    while (rowMask & 1 << subRowStart) {\n      subRowStart++;\n    }\n\n    var sum = 0;\n\n    for (var j = 0, colLocalIdx = 0; j < fullRank; j++) {\n      var colTag = 1 << j;\n\n      if (!(colTag & colMask)) {\n        sum += (colLocalIdx % 2 ? -1 : 1) * rows[rowStart][j] * determinant(rows, rank - 1, subRowStart, subRowMask, colMask | colTag, detCache);\n        colLocalIdx++;\n      }\n    }\n\n    detCache[cacheKey] = sum;\n    return sum;\n  }\n\n  function buildTransformer(src, dest) {\n    var mA = [[src[0], src[1], 1, 0, 0, 0, -dest[0] * src[0], -dest[0] * src[1]], [0, 0, 0, src[0], src[1], 1, -dest[1] * src[0], -dest[1] * src[1]], [src[2], src[3], 1, 0, 0, 0, -dest[2] * src[2], -dest[2] * src[3]], [0, 0, 0, src[2], src[3], 1, -dest[3] * src[2], -dest[3] * src[3]], [src[4], src[5], 1, 0, 0, 0, -dest[4] * src[4], -dest[4] * src[5]], [0, 0, 0, src[4], src[5], 1, -dest[5] * src[4], -dest[5] * src[5]], [src[6], src[7], 1, 0, 0, 0, -dest[6] * src[6], -dest[6] * src[7]], [0, 0, 0, src[6], src[7], 1, -dest[7] * src[6], -dest[7] * src[7]]];\n    var detCache = {};\n    var det = determinant(mA, 8, 0, 0, 0, detCache);\n\n    if (det === 0) {\n      return;\n    }\n\n    var vh = [];\n\n    for (var i = 0; i < 8; i++) {\n      for (var j = 0; j < 8; j++) {\n        vh[j] == null && (vh[j] = 0);\n        vh[j] += ((i + j) % 2 ? -1 : 1) * determinant(mA, 7, i === 0 ? 1 : 0, 1 << i, 1 << j, detCache) / det * dest[i];\n      }\n    }\n\n    return function (out, srcPointX, srcPointY) {\n      var pk = srcPointX * vh[6] + srcPointY * vh[7] + 1;\n      out[0] = (srcPointX * vh[0] + srcPointY * vh[1] + vh[2]) / pk;\n      out[1] = (srcPointX * vh[3] + srcPointY * vh[4] + vh[5]) / pk;\n    };\n  }\n\n  var EVENT_SAVED_PROP = '___zrEVENTSAVED';\n  var _calcOut$1 = [];\n\n  function transformLocalCoord(out, elFrom, elTarget, inX, inY) {\n    return transformCoordWithViewport(_calcOut$1, elFrom, inX, inY, true) && transformCoordWithViewport(out, elTarget, _calcOut$1[0], _calcOut$1[1]);\n  }\n\n  function transformCoordWithViewport(out, el, inX, inY, inverse) {\n    if (el.getBoundingClientRect && env.domSupported && !isCanvasEl(el)) {\n      var saved = el[EVENT_SAVED_PROP] || (el[EVENT_SAVED_PROP] = {});\n      var markers = prepareCoordMarkers(el, saved);\n      var transformer = preparePointerTransformer(markers, saved, inverse);\n\n      if (transformer) {\n        transformer(out, inX, inY);\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function prepareCoordMarkers(el, saved) {\n    var markers = saved.markers;\n\n    if (markers) {\n      return markers;\n    }\n\n    markers = saved.markers = [];\n    var propLR = ['left', 'right'];\n    var propTB = ['top', 'bottom'];\n\n    for (var i = 0; i < 4; i++) {\n      var marker = document.createElement('div');\n      var stl = marker.style;\n      var idxLR = i % 2;\n      var idxTB = (i >> 1) % 2;\n      stl.cssText = ['position: absolute', 'visibility: hidden', 'padding: 0', 'margin: 0', 'border-width: 0', 'user-select: none', 'width:0', 'height:0', propLR[idxLR] + ':0', propTB[idxTB] + ':0', propLR[1 - idxLR] + ':auto', propTB[1 - idxTB] + ':auto', ''].join('!important;');\n      el.appendChild(marker);\n      markers.push(marker);\n    }\n\n    return markers;\n  }\n\n  function preparePointerTransformer(markers, saved, inverse) {\n    var transformerName = inverse ? 'invTrans' : 'trans';\n    var transformer = saved[transformerName];\n    var oldSrcCoords = saved.srcCoords;\n    var srcCoords = [];\n    var destCoords = [];\n    var oldCoordTheSame = true;\n\n    for (var i = 0; i < 4; i++) {\n      var rect = markers[i].getBoundingClientRect();\n      var ii = 2 * i;\n      var x = rect.left;\n      var y = rect.top;\n      srcCoords.push(x, y);\n      oldCoordTheSame = oldCoordTheSame && oldSrcCoords && x === oldSrcCoords[ii] && y === oldSrcCoords[ii + 1];\n      destCoords.push(markers[i].offsetLeft, markers[i].offsetTop);\n    }\n\n    return oldCoordTheSame && transformer ? transformer : (saved.srcCoords = srcCoords, saved[transformerName] = inverse ? buildTransformer(destCoords, srcCoords) : buildTransformer(srcCoords, destCoords));\n  }\n\n  function isCanvasEl(el) {\n    return el.nodeName.toUpperCase() === 'CANVAS';\n  }\n\n  var MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\n  var _calcOut = [];\n  var firefoxNotSupportOffsetXY = env.browser.firefox && +env.browser.version.split('.')[0] < 39;\n\n  function clientToLocal(el, e, out, calculate) {\n    out = out || {};\n\n    if (calculate) {\n      calculateZrXY(el, e, out);\n    } else if (firefoxNotSupportOffsetXY && e.layerX != null && e.layerX !== e.offsetX) {\n      out.zrX = e.layerX;\n      out.zrY = e.layerY;\n    } else if (e.offsetX != null) {\n      out.zrX = e.offsetX;\n      out.zrY = e.offsetY;\n    } else {\n      calculateZrXY(el, e, out);\n    }\n\n    return out;\n  }\n\n  function calculateZrXY(el, e, out) {\n    if (env.domSupported && el.getBoundingClientRect) {\n      var ex = e.clientX;\n      var ey = e.clientY;\n\n      if (isCanvasEl(el)) {\n        var box = el.getBoundingClientRect();\n        out.zrX = ex - box.left;\n        out.zrY = ey - box.top;\n        return;\n      } else {\n        if (transformCoordWithViewport(_calcOut, el, ex, ey)) {\n          out.zrX = _calcOut[0];\n          out.zrY = _calcOut[1];\n          return;\n        }\n      }\n    }\n\n    out.zrX = out.zrY = 0;\n  }\n\n  function getNativeEvent(e) {\n    return e || window.event;\n  }\n\n  function normalizeEvent(el, e, calculate) {\n    e = getNativeEvent(e);\n\n    if (e.zrX != null) {\n      return e;\n    }\n\n    var eventType = e.type;\n    var isTouch = eventType && eventType.indexOf('touch') >= 0;\n\n    if (!isTouch) {\n      clientToLocal(el, e, e, calculate);\n      var wheelDelta = getWheelDeltaMayPolyfill(e);\n      e.zrDelta = wheelDelta ? wheelDelta / 120 : -(e.detail || 0) / 3;\n    } else {\n      var touch = eventType !== 'touchend' ? e.targetTouches[0] : e.changedTouches[0];\n      touch && clientToLocal(el, touch, e, calculate);\n    }\n\n    var button = e.button;\n\n    if (e.which == null && button !== undefined && MOUSE_EVENT_REG.test(e.type)) {\n      e.which = button & 1 ? 1 : button & 2 ? 3 : button & 4 ? 2 : 0;\n    }\n\n    return e;\n  }\n\n  function getWheelDeltaMayPolyfill(e) {\n    var rawWheelDelta = e.wheelDelta;\n\n    if (rawWheelDelta) {\n      return rawWheelDelta;\n    }\n\n    var deltaX = e.deltaX;\n    var deltaY = e.deltaY;\n\n    if (deltaX == null || deltaY == null) {\n      return rawWheelDelta;\n    }\n\n    var delta = deltaY !== 0 ? Math.abs(deltaY) : Math.abs(deltaX);\n    var sign = deltaY > 0 ? -1 : deltaY < 0 ? 1 : deltaX > 0 ? -1 : 1;\n    return 3 * delta * sign;\n  }\n\n  function addEventListener(el, name, handler, opt) {\n    el.addEventListener(name, handler, opt);\n  }\n\n  function removeEventListener(el, name, handler, opt) {\n    el.removeEventListener(name, handler, opt);\n  }\n\n  var stop = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    e.cancelBubble = true;\n  };\n\n  function isMiddleOrRightButtonOnMouseUpDown(e) {\n    return e.which === 2 || e.which === 3;\n  }\n\n  var GestureMgr = function () {\n    function GestureMgr() {\n      this._track = [];\n    }\n\n    GestureMgr.prototype.recognize = function (event, target, root) {\n      this._doTrack(event, target, root);\n\n      return this._recognize(event);\n    };\n\n    GestureMgr.prototype.clear = function () {\n      this._track.length = 0;\n      return this;\n    };\n\n    GestureMgr.prototype._doTrack = function (event, target, root) {\n      var touches = event.touches;\n\n      if (!touches) {\n        return;\n      }\n\n      var trackItem = {\n        points: [],\n        touches: [],\n        target: target,\n        event: event\n      };\n\n      for (var i = 0, len = touches.length; i < len; i++) {\n        var touch = touches[i];\n        var pos = clientToLocal(root, touch, {});\n        trackItem.points.push([pos.zrX, pos.zrY]);\n        trackItem.touches.push(touch);\n      }\n\n      this._track.push(trackItem);\n    };\n\n    GestureMgr.prototype._recognize = function (event) {\n      for (var eventName in recognizers) {\n        if (recognizers.hasOwnProperty(eventName)) {\n          var gestureInfo = recognizers[eventName](this._track, event);\n\n          if (gestureInfo) {\n            return gestureInfo;\n          }\n        }\n      }\n    };\n\n    return GestureMgr;\n  }();\n\n  function dist$1(pointPair) {\n    var dx = pointPair[1][0] - pointPair[0][0];\n    var dy = pointPair[1][1] - pointPair[0][1];\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  function center(pointPair) {\n    return [(pointPair[0][0] + pointPair[1][0]) / 2, (pointPair[0][1] + pointPair[1][1]) / 2];\n  }\n\n  var recognizers = {\n    pinch: function (tracks, event) {\n      var trackLen = tracks.length;\n\n      if (!trackLen) {\n        return;\n      }\n\n      var pinchEnd = (tracks[trackLen - 1] || {}).points;\n      var pinchPre = (tracks[trackLen - 2] || {}).points || pinchEnd;\n\n      if (pinchPre && pinchPre.length > 1 && pinchEnd && pinchEnd.length > 1) {\n        var pinchScale = dist$1(pinchEnd) / dist$1(pinchPre);\n        !isFinite(pinchScale) && (pinchScale = 1);\n        event.pinchScale = pinchScale;\n        var pinchCenter = center(pinchEnd);\n        event.pinchX = pinchCenter[0];\n        event.pinchY = pinchCenter[1];\n        return {\n          type: 'pinch',\n          target: tracks[0].target,\n          event: event\n        };\n      }\n    }\n  };\n  var SILENT = 'silent';\n\n  function makeEventPacket(eveType, targetInfo, event) {\n    return {\n      type: eveType,\n      event: event,\n      target: targetInfo.target,\n      topTarget: targetInfo.topTarget,\n      cancelBubble: false,\n      offsetX: event.zrX,\n      offsetY: event.zrY,\n      gestureEvent: event.gestureEvent,\n      pinchX: event.pinchX,\n      pinchY: event.pinchY,\n      pinchScale: event.pinchScale,\n      wheelDelta: event.zrDelta,\n      zrByTouch: event.zrByTouch,\n      which: event.which,\n      stop: stopEvent\n    };\n  }\n\n  function stopEvent() {\n    stop(this.event);\n  }\n\n  var EmptyProxy = function (_super) {\n    __extends(EmptyProxy, _super);\n\n    function EmptyProxy() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.handler = null;\n      return _this;\n    }\n\n    EmptyProxy.prototype.dispose = function () {};\n\n    EmptyProxy.prototype.setCursor = function () {};\n\n    return EmptyProxy;\n  }(Eventful);\n\n  var HoveredResult = function () {\n    function HoveredResult(x, y) {\n      this.x = x;\n      this.y = y;\n    }\n\n    return HoveredResult;\n  }();\n\n  var handlerNames = ['click', 'dblclick', 'mousewheel', 'mouseout', 'mouseup', 'mousedown', 'mousemove', 'contextmenu'];\n\n  var Handler = function (_super) {\n    __extends(Handler, _super);\n\n    function Handler(storage, painter, proxy, painterRoot) {\n      var _this = _super.call(this) || this;\n\n      _this._hovered = new HoveredResult(0, 0);\n      _this.storage = storage;\n      _this.painter = painter;\n      _this.painterRoot = painterRoot;\n      proxy = proxy || new EmptyProxy();\n      _this.proxy = null;\n\n      _this.setHandlerProxy(proxy);\n\n      _this._draggingMgr = new Draggable(_this);\n      return _this;\n    }\n\n    Handler.prototype.setHandlerProxy = function (proxy) {\n      if (this.proxy) {\n        this.proxy.dispose();\n      }\n\n      if (proxy) {\n        each(handlerNames, function (name) {\n          proxy.on && proxy.on(name, this[name], this);\n        }, this);\n        proxy.handler = this;\n      }\n\n      this.proxy = proxy;\n    };\n\n    Handler.prototype.mousemove = function (event) {\n      var x = event.zrX;\n      var y = event.zrY;\n      var isOutside = isOutsideBoundary(this, x, y);\n      var lastHovered = this._hovered;\n      var lastHoveredTarget = lastHovered.target;\n\n      if (lastHoveredTarget && !lastHoveredTarget.__zr) {\n        lastHovered = this.findHover(lastHovered.x, lastHovered.y);\n        lastHoveredTarget = lastHovered.target;\n      }\n\n      var hovered = this._hovered = isOutside ? new HoveredResult(x, y) : this.findHover(x, y);\n      var hoveredTarget = hovered.target;\n      var proxy = this.proxy;\n      proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default');\n\n      if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\n        this.dispatchToElement(lastHovered, 'mouseout', event);\n      }\n\n      this.dispatchToElement(hovered, 'mousemove', event);\n\n      if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\n        this.dispatchToElement(hovered, 'mouseover', event);\n      }\n    };\n\n    Handler.prototype.mouseout = function (event) {\n      var eventControl = event.zrEventControl;\n\n      if (eventControl !== 'only_globalout') {\n        this.dispatchToElement(this._hovered, 'mouseout', event);\n      }\n\n      if (eventControl !== 'no_globalout') {\n        this.trigger('globalout', {\n          type: 'globalout',\n          event: event\n        });\n      }\n    };\n\n    Handler.prototype.resize = function () {\n      this._hovered = new HoveredResult(0, 0);\n    };\n\n    Handler.prototype.dispatch = function (eventName, eventArgs) {\n      var handler = this[eventName];\n      handler && handler.call(this, eventArgs);\n    };\n\n    Handler.prototype.dispose = function () {\n      this.proxy.dispose();\n      this.storage = null;\n      this.proxy = null;\n      this.painter = null;\n    };\n\n    Handler.prototype.setCursorStyle = function (cursorStyle) {\n      var proxy = this.proxy;\n      proxy.setCursor && proxy.setCursor(cursorStyle);\n    };\n\n    Handler.prototype.dispatchToElement = function (targetInfo, eventName, event) {\n      targetInfo = targetInfo || {};\n      var el = targetInfo.target;\n\n      if (el && el.silent) {\n        return;\n      }\n\n      var eventKey = 'on' + eventName;\n      var eventPacket = makeEventPacket(eventName, targetInfo, event);\n\n      while (el) {\n        el[eventKey] && (eventPacket.cancelBubble = !!el[eventKey].call(el, eventPacket));\n        el.trigger(eventName, eventPacket);\n        el = el.__hostTarget ? el.__hostTarget : el.parent;\n\n        if (eventPacket.cancelBubble) {\n          break;\n        }\n      }\n\n      if (!eventPacket.cancelBubble) {\n        this.trigger(eventName, eventPacket);\n\n        if (this.painter && this.painter.eachOtherLayer) {\n          this.painter.eachOtherLayer(function (layer) {\n            if (typeof layer[eventKey] === 'function') {\n              layer[eventKey].call(layer, eventPacket);\n            }\n\n            if (layer.trigger) {\n              layer.trigger(eventName, eventPacket);\n            }\n          });\n        }\n      }\n    };\n\n    Handler.prototype.findHover = function (x, y, exclude) {\n      var list = this.storage.getDisplayList();\n      var out = new HoveredResult(x, y);\n\n      for (var i = list.length - 1; i >= 0; i--) {\n        var hoverCheckResult = void 0;\n\n        if (list[i] !== exclude && !list[i].ignore && (hoverCheckResult = isHover(list[i], x, y))) {\n          !out.topTarget && (out.topTarget = list[i]);\n\n          if (hoverCheckResult !== SILENT) {\n            out.target = list[i];\n            break;\n          }\n        }\n      }\n\n      return out;\n    };\n\n    Handler.prototype.processGesture = function (event, stage) {\n      if (!this._gestureMgr) {\n        this._gestureMgr = new GestureMgr();\n      }\n\n      var gestureMgr = this._gestureMgr;\n      stage === 'start' && gestureMgr.clear();\n      var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);\n      stage === 'end' && gestureMgr.clear();\n\n      if (gestureInfo) {\n        var type = gestureInfo.type;\n        event.gestureEvent = type;\n        var res = new HoveredResult();\n        res.target = gestureInfo.target;\n        this.dispatchToElement(res, type, gestureInfo.event);\n      }\n    };\n\n    return Handler;\n  }(Eventful);\n\n  each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n    Handler.prototype[name] = function (event) {\n      var x = event.zrX;\n      var y = event.zrY;\n      var isOutside = isOutsideBoundary(this, x, y);\n      var hovered;\n      var hoveredTarget;\n\n      if (name !== 'mouseup' || !isOutside) {\n        hovered = this.findHover(x, y);\n        hoveredTarget = hovered.target;\n      }\n\n      if (name === 'mousedown') {\n        this._downEl = hoveredTarget;\n        this._downPoint = [event.zrX, event.zrY];\n        this._upEl = hoveredTarget;\n      } else if (name === 'mouseup') {\n        this._upEl = hoveredTarget;\n      } else if (name === 'click') {\n        if (this._downEl !== this._upEl || !this._downPoint || dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\n          return;\n        }\n\n        this._downPoint = null;\n      }\n\n      this.dispatchToElement(hovered, name, event);\n    };\n  });\n\n  function isHover(displayable, x, y) {\n    if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\n      var el = displayable;\n      var isSilent = void 0;\n      var ignoreClip = false;\n\n      while (el) {\n        if (el.ignoreClip) {\n          ignoreClip = true;\n        }\n\n        if (!ignoreClip) {\n          var clipPath = el.getClipPath();\n\n          if (clipPath && !clipPath.contain(x, y)) {\n            return false;\n          }\n\n          if (el.silent) {\n            isSilent = true;\n          }\n        }\n\n        var hostEl = el.__hostTarget;\n        el = hostEl ? hostEl : el.parent;\n      }\n\n      return isSilent ? SILENT : true;\n    }\n\n    return false;\n  }\n\n  function isOutsideBoundary(handlerInstance, x, y) {\n    var painter = handlerInstance.painter;\n    return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\n  }\n\n  var DEFAULT_MIN_MERGE = 32;\n  var DEFAULT_MIN_GALLOPING = 7;\n\n  function minRunLength(n) {\n    var r = 0;\n\n    while (n >= DEFAULT_MIN_MERGE) {\n      r |= n & 1;\n      n >>= 1;\n    }\n\n    return n + r;\n  }\n\n  function makeAscendingRun(array, lo, hi, compare) {\n    var runHi = lo + 1;\n\n    if (runHi === hi) {\n      return 1;\n    }\n\n    if (compare(array[runHi++], array[lo]) < 0) {\n      while (runHi < hi && compare(array[runHi], array[runHi - 1]) < 0) {\n        runHi++;\n      }\n\n      reverseRun(array, lo, runHi);\n    } else {\n      while (runHi < hi && compare(array[runHi], array[runHi - 1]) >= 0) {\n        runHi++;\n      }\n    }\n\n    return runHi - lo;\n  }\n\n  function reverseRun(array, lo, hi) {\n    hi--;\n\n    while (lo < hi) {\n      var t = array[lo];\n      array[lo++] = array[hi];\n      array[hi--] = t;\n    }\n  }\n\n  function binaryInsertionSort(array, lo, hi, start, compare) {\n    if (start === lo) {\n      start++;\n    }\n\n    for (; start < hi; start++) {\n      var pivot = array[start];\n      var left = lo;\n      var right = start;\n      var mid;\n\n      while (left < right) {\n        mid = left + right >>> 1;\n\n        if (compare(pivot, array[mid]) < 0) {\n          right = mid;\n        } else {\n          left = mid + 1;\n        }\n      }\n\n      var n = start - left;\n\n      switch (n) {\n        case 3:\n          array[left + 3] = array[left + 2];\n\n        case 2:\n          array[left + 2] = array[left + 1];\n\n        case 1:\n          array[left + 1] = array[left];\n          break;\n\n        default:\n          while (n > 0) {\n            array[left + n] = array[left + n - 1];\n            n--;\n          }\n\n      }\n\n      array[left] = pivot;\n    }\n  }\n\n  function gallopLeft(value, array, start, length, hint, compare) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n\n    if (compare(value, array[start + hint]) > 0) {\n      maxOffset = length - hint;\n\n      while (offset < maxOffset && compare(value, array[start + hint + offset]) > 0) {\n        lastOffset = offset;\n        offset = (offset << 1) + 1;\n\n        if (offset <= 0) {\n          offset = maxOffset;\n        }\n      }\n\n      if (offset > maxOffset) {\n        offset = maxOffset;\n      }\n\n      lastOffset += hint;\n      offset += hint;\n    } else {\n      maxOffset = hint + 1;\n\n      while (offset < maxOffset && compare(value, array[start + hint - offset]) <= 0) {\n        lastOffset = offset;\n        offset = (offset << 1) + 1;\n\n        if (offset <= 0) {\n          offset = maxOffset;\n        }\n      }\n\n      if (offset > maxOffset) {\n        offset = maxOffset;\n      }\n\n      var tmp = lastOffset;\n      lastOffset = hint - offset;\n      offset = hint - tmp;\n    }\n\n    lastOffset++;\n\n    while (lastOffset < offset) {\n      var m = lastOffset + (offset - lastOffset >>> 1);\n\n      if (compare(value, array[start + m]) > 0) {\n        lastOffset = m + 1;\n      } else {\n        offset = m;\n      }\n    }\n\n    return offset;\n  }\n\n  function gallopRight(value, array, start, length, hint, compare) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n\n    if (compare(value, array[start + hint]) < 0) {\n      maxOffset = hint + 1;\n\n      while (offset < maxOffset && compare(value, array[start + hint - offset]) < 0) {\n        lastOffset = offset;\n        offset = (offset << 1) + 1;\n\n        if (offset <= 0) {\n          offset = maxOffset;\n        }\n      }\n\n      if (offset > maxOffset) {\n        offset = maxOffset;\n      }\n\n      var tmp = lastOffset;\n      lastOffset = hint - offset;\n      offset = hint - tmp;\n    } else {\n      maxOffset = length - hint;\n\n      while (offset < maxOffset && compare(value, array[start + hint + offset]) >= 0) {\n        lastOffset = offset;\n        offset = (offset << 1) + 1;\n\n        if (offset <= 0) {\n          offset = maxOffset;\n        }\n      }\n\n      if (offset > maxOffset) {\n        offset = maxOffset;\n      }\n\n      lastOffset += hint;\n      offset += hint;\n    }\n\n    lastOffset++;\n\n    while (lastOffset < offset) {\n      var m = lastOffset + (offset - lastOffset >>> 1);\n\n      if (compare(value, array[start + m]) < 0) {\n        offset = m;\n      } else {\n        lastOffset = m + 1;\n      }\n    }\n\n    return offset;\n  }\n\n  function TimSort(array, compare) {\n    var minGallop = DEFAULT_MIN_GALLOPING;\n    var runStart;\n    var runLength;\n    var stackSize = 0;\n    var tmp = [];\n    runStart = [];\n    runLength = [];\n\n    function pushRun(_runStart, _runLength) {\n      runStart[stackSize] = _runStart;\n      runLength[stackSize] = _runLength;\n      stackSize += 1;\n    }\n\n    function mergeRuns() {\n      while (stackSize > 1) {\n        var n = stackSize - 2;\n\n        if (n >= 1 && runLength[n - 1] <= runLength[n] + runLength[n + 1] || n >= 2 && runLength[n - 2] <= runLength[n] + runLength[n - 1]) {\n          if (runLength[n - 1] < runLength[n + 1]) {\n            n--;\n          }\n        } else if (runLength[n] > runLength[n + 1]) {\n          break;\n        }\n\n        mergeAt(n);\n      }\n    }\n\n    function forceMergeRuns() {\n      while (stackSize > 1) {\n        var n = stackSize - 2;\n\n        if (n > 0 && runLength[n - 1] < runLength[n + 1]) {\n          n--;\n        }\n\n        mergeAt(n);\n      }\n    }\n\n    function mergeAt(i) {\n      var start1 = runStart[i];\n      var length1 = runLength[i];\n      var start2 = runStart[i + 1];\n      var length2 = runLength[i + 1];\n      runLength[i] = length1 + length2;\n\n      if (i === stackSize - 3) {\n        runStart[i + 1] = runStart[i + 2];\n        runLength[i + 1] = runLength[i + 2];\n      }\n\n      stackSize--;\n      var k = gallopRight(array[start2], array, start1, length1, 0, compare);\n      start1 += k;\n      length1 -= k;\n\n      if (length1 === 0) {\n        return;\n      }\n\n      length2 = gallopLeft(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare);\n\n      if (length2 === 0) {\n        return;\n      }\n\n      if (length1 <= length2) {\n        mergeLow(start1, length1, start2, length2);\n      } else {\n        mergeHigh(start1, length1, start2, length2);\n      }\n    }\n\n    function mergeLow(start1, length1, start2, length2) {\n      var i = 0;\n\n      for (i = 0; i < length1; i++) {\n        tmp[i] = array[start1 + i];\n      }\n\n      var cursor1 = 0;\n      var cursor2 = start2;\n      var dest = start1;\n      array[dest++] = array[cursor2++];\n\n      if (--length2 === 0) {\n        for (i = 0; i < length1; i++) {\n          array[dest + i] = tmp[cursor1 + i];\n        }\n\n        return;\n      }\n\n      if (length1 === 1) {\n        for (i = 0; i < length2; i++) {\n          array[dest + i] = array[cursor2 + i];\n        }\n\n        array[dest + length2] = tmp[cursor1];\n        return;\n      }\n\n      var _minGallop = minGallop;\n      var count1;\n      var count2;\n      var exit;\n\n      while (1) {\n        count1 = 0;\n        count2 = 0;\n        exit = false;\n\n        do {\n          if (compare(array[cursor2], tmp[cursor1]) < 0) {\n            array[dest++] = array[cursor2++];\n            count2++;\n            count1 = 0;\n\n            if (--length2 === 0) {\n              exit = true;\n              break;\n            }\n          } else {\n            array[dest++] = tmp[cursor1++];\n            count1++;\n            count2 = 0;\n\n            if (--length1 === 1) {\n              exit = true;\n              break;\n            }\n          }\n        } while ((count1 | count2) < _minGallop);\n\n        if (exit) {\n          break;\n        }\n\n        do {\n          count1 = gallopRight(array[cursor2], tmp, cursor1, length1, 0, compare);\n\n          if (count1 !== 0) {\n            for (i = 0; i < count1; i++) {\n              array[dest + i] = tmp[cursor1 + i];\n            }\n\n            dest += count1;\n            cursor1 += count1;\n            length1 -= count1;\n\n            if (length1 <= 1) {\n              exit = true;\n              break;\n            }\n          }\n\n          array[dest++] = array[cursor2++];\n\n          if (--length2 === 0) {\n            exit = true;\n            break;\n          }\n\n          count2 = gallopLeft(tmp[cursor1], array, cursor2, length2, 0, compare);\n\n          if (count2 !== 0) {\n            for (i = 0; i < count2; i++) {\n              array[dest + i] = array[cursor2 + i];\n            }\n\n            dest += count2;\n            cursor2 += count2;\n            length2 -= count2;\n\n            if (length2 === 0) {\n              exit = true;\n              break;\n            }\n          }\n\n          array[dest++] = tmp[cursor1++];\n\n          if (--length1 === 1) {\n            exit = true;\n            break;\n          }\n\n          _minGallop--;\n        } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n\n        if (exit) {\n          break;\n        }\n\n        if (_minGallop < 0) {\n          _minGallop = 0;\n        }\n\n        _minGallop += 2;\n      }\n\n      minGallop = _minGallop;\n      minGallop < 1 && (minGallop = 1);\n\n      if (length1 === 1) {\n        for (i = 0; i < length2; i++) {\n          array[dest + i] = array[cursor2 + i];\n        }\n\n        array[dest + length2] = tmp[cursor1];\n      } else if (length1 === 0) {\n        throw new Error();\n      } else {\n        for (i = 0; i < length1; i++) {\n          array[dest + i] = tmp[cursor1 + i];\n        }\n      }\n    }\n\n    function mergeHigh(start1, length1, start2, length2) {\n      var i = 0;\n\n      for (i = 0; i < length2; i++) {\n        tmp[i] = array[start2 + i];\n      }\n\n      var cursor1 = start1 + length1 - 1;\n      var cursor2 = length2 - 1;\n      var dest = start2 + length2 - 1;\n      var customCursor = 0;\n      var customDest = 0;\n      array[dest--] = array[cursor1--];\n\n      if (--length1 === 0) {\n        customCursor = dest - (length2 - 1);\n\n        for (i = 0; i < length2; i++) {\n          array[customCursor + i] = tmp[i];\n        }\n\n        return;\n      }\n\n      if (length2 === 1) {\n        dest -= length1;\n        cursor1 -= length1;\n        customDest = dest + 1;\n        customCursor = cursor1 + 1;\n\n        for (i = length1 - 1; i >= 0; i--) {\n          array[customDest + i] = array[customCursor + i];\n        }\n\n        array[dest] = tmp[cursor2];\n        return;\n      }\n\n      var _minGallop = minGallop;\n\n      while (true) {\n        var count1 = 0;\n        var count2 = 0;\n        var exit = false;\n\n        do {\n          if (compare(tmp[cursor2], array[cursor1]) < 0) {\n            array[dest--] = array[cursor1--];\n            count1++;\n            count2 = 0;\n\n            if (--length1 === 0) {\n              exit = true;\n              break;\n            }\n          } else {\n            array[dest--] = tmp[cursor2--];\n            count2++;\n            count1 = 0;\n\n            if (--length2 === 1) {\n              exit = true;\n              break;\n            }\n          }\n        } while ((count1 | count2) < _minGallop);\n\n        if (exit) {\n          break;\n        }\n\n        do {\n          count1 = length1 - gallopRight(tmp[cursor2], array, start1, length1, length1 - 1, compare);\n\n          if (count1 !== 0) {\n            dest -= count1;\n            cursor1 -= count1;\n            length1 -= count1;\n            customDest = dest + 1;\n            customCursor = cursor1 + 1;\n\n            for (i = count1 - 1; i >= 0; i--) {\n              array[customDest + i] = array[customCursor + i];\n            }\n\n            if (length1 === 0) {\n              exit = true;\n              break;\n            }\n          }\n\n          array[dest--] = tmp[cursor2--];\n\n          if (--length2 === 1) {\n            exit = true;\n            break;\n          }\n\n          count2 = length2 - gallopLeft(array[cursor1], tmp, 0, length2, length2 - 1, compare);\n\n          if (count2 !== 0) {\n            dest -= count2;\n            cursor2 -= count2;\n            length2 -= count2;\n            customDest = dest + 1;\n            customCursor = cursor2 + 1;\n\n            for (i = 0; i < count2; i++) {\n              array[customDest + i] = tmp[customCursor + i];\n            }\n\n            if (length2 <= 1) {\n              exit = true;\n              break;\n            }\n          }\n\n          array[dest--] = array[cursor1--];\n\n          if (--length1 === 0) {\n            exit = true;\n            break;\n          }\n\n          _minGallop--;\n        } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n\n        if (exit) {\n          break;\n        }\n\n        if (_minGallop < 0) {\n          _minGallop = 0;\n        }\n\n        _minGallop += 2;\n      }\n\n      minGallop = _minGallop;\n\n      if (minGallop < 1) {\n        minGallop = 1;\n      }\n\n      if (length2 === 1) {\n        dest -= length1;\n        cursor1 -= length1;\n        customDest = dest + 1;\n        customCursor = cursor1 + 1;\n\n        for (i = length1 - 1; i >= 0; i--) {\n          array[customDest + i] = array[customCursor + i];\n        }\n\n        array[dest] = tmp[cursor2];\n      } else if (length2 === 0) {\n        throw new Error();\n      } else {\n        customCursor = dest - (length2 - 1);\n\n        for (i = 0; i < length2; i++) {\n          array[customCursor + i] = tmp[i];\n        }\n      }\n    }\n\n    return {\n      mergeRuns: mergeRuns,\n      forceMergeRuns: forceMergeRuns,\n      pushRun: pushRun\n    };\n  }\n\n  function sort(array, compare, lo, hi) {\n    if (!lo) {\n      lo = 0;\n    }\n\n    if (!hi) {\n      hi = array.length;\n    }\n\n    var remaining = hi - lo;\n\n    if (remaining < 2) {\n      return;\n    }\n\n    var runLength = 0;\n\n    if (remaining < DEFAULT_MIN_MERGE) {\n      runLength = makeAscendingRun(array, lo, hi, compare);\n      binaryInsertionSort(array, lo, hi, lo + runLength, compare);\n      return;\n    }\n\n    var ts = TimSort(array, compare);\n    var minRun = minRunLength(remaining);\n\n    do {\n      runLength = makeAscendingRun(array, lo, hi, compare);\n\n      if (runLength < minRun) {\n        var force = remaining;\n\n        if (force > minRun) {\n          force = minRun;\n        }\n\n        binaryInsertionSort(array, lo, lo + force, lo + runLength, compare);\n        runLength = force;\n      }\n\n      ts.pushRun(lo, runLength);\n      ts.mergeRuns();\n      remaining -= runLength;\n      lo += runLength;\n    } while (remaining !== 0);\n\n    ts.forceMergeRuns();\n  }\n\n  var REDRAW_BIT = 1;\n  var STYLE_CHANGED_BIT = 2;\n  var SHAPE_CHANGED_BIT = 4;\n  var invalidZErrorLogged = false;\n\n  function logInvalidZError() {\n    if (invalidZErrorLogged) {\n      return;\n    }\n\n    invalidZErrorLogged = true;\n    console.warn('z / z2 / zlevel of displayable is invalid, which may cause unexpected errors');\n  }\n\n  function shapeCompareFunc(a, b) {\n    if (a.zlevel === b.zlevel) {\n      if (a.z === b.z) {\n        return a.z2 - b.z2;\n      }\n\n      return a.z - b.z;\n    }\n\n    return a.zlevel - b.zlevel;\n  }\n\n  var Storage = function () {\n    function Storage() {\n      this._roots = [];\n      this._displayList = [];\n      this._displayListLen = 0;\n      this.displayableSortFunc = shapeCompareFunc;\n    }\n\n    Storage.prototype.traverse = function (cb, context) {\n      for (var i = 0; i < this._roots.length; i++) {\n        this._roots[i].traverse(cb, context);\n      }\n    };\n\n    Storage.prototype.getDisplayList = function (update, includeIgnore) {\n      includeIgnore = includeIgnore || false;\n      var displayList = this._displayList;\n\n      if (update || !displayList.length) {\n        this.updateDisplayList(includeIgnore);\n      }\n\n      return displayList;\n    };\n\n    Storage.prototype.updateDisplayList = function (includeIgnore) {\n      this._displayListLen = 0;\n      var roots = this._roots;\n      var displayList = this._displayList;\n\n      for (var i = 0, len = roots.length; i < len; i++) {\n        this._updateAndAddDisplayable(roots[i], null, includeIgnore);\n      }\n\n      displayList.length = this._displayListLen;\n      sort(displayList, shapeCompareFunc);\n    };\n\n    Storage.prototype._updateAndAddDisplayable = function (el, clipPaths, includeIgnore) {\n      if (el.ignore && !includeIgnore) {\n        return;\n      }\n\n      el.beforeUpdate();\n      el.update();\n      el.afterUpdate();\n      var userSetClipPath = el.getClipPath();\n\n      if (el.ignoreClip) {\n        clipPaths = null;\n      } else if (userSetClipPath) {\n        if (clipPaths) {\n          clipPaths = clipPaths.slice();\n        } else {\n          clipPaths = [];\n        }\n\n        var currentClipPath = userSetClipPath;\n        var parentClipPath = el;\n\n        while (currentClipPath) {\n          currentClipPath.parent = parentClipPath;\n          currentClipPath.updateTransform();\n          clipPaths.push(currentClipPath);\n          parentClipPath = currentClipPath;\n          currentClipPath = currentClipPath.getClipPath();\n        }\n      }\n\n      if (el.childrenRef) {\n        var children = el.childrenRef();\n\n        for (var i = 0; i < children.length; i++) {\n          var child = children[i];\n\n          if (el.__dirty) {\n            child.__dirty |= REDRAW_BIT;\n          }\n\n          this._updateAndAddDisplayable(child, clipPaths, includeIgnore);\n        }\n\n        el.__dirty = 0;\n      } else {\n        var disp = el;\n\n        if (clipPaths && clipPaths.length) {\n          disp.__clipPaths = clipPaths;\n        } else if (disp.__clipPaths && disp.__clipPaths.length > 0) {\n          disp.__clipPaths = [];\n        }\n\n        if (isNaN(disp.z)) {\n          logInvalidZError();\n          disp.z = 0;\n        }\n\n        if (isNaN(disp.z2)) {\n          logInvalidZError();\n          disp.z2 = 0;\n        }\n\n        if (isNaN(disp.zlevel)) {\n          logInvalidZError();\n          disp.zlevel = 0;\n        }\n\n        this._displayList[this._displayListLen++] = disp;\n      }\n\n      var decalEl = el.getDecalElement && el.getDecalElement();\n\n      if (decalEl) {\n        this._updateAndAddDisplayable(decalEl, clipPaths, includeIgnore);\n      }\n\n      var textGuide = el.getTextGuideLine();\n\n      if (textGuide) {\n        this._updateAndAddDisplayable(textGuide, clipPaths, includeIgnore);\n      }\n\n      var textEl = el.getTextContent();\n\n      if (textEl) {\n        this._updateAndAddDisplayable(textEl, clipPaths, includeIgnore);\n      }\n    };\n\n    Storage.prototype.addRoot = function (el) {\n      if (el.__zr && el.__zr.storage === this) {\n        return;\n      }\n\n      this._roots.push(el);\n    };\n\n    Storage.prototype.delRoot = function (el) {\n      if (el instanceof Array) {\n        for (var i = 0, l = el.length; i < l; i++) {\n          this.delRoot(el[i]);\n        }\n\n        return;\n      }\n\n      var idx = indexOf(this._roots, el);\n\n      if (idx >= 0) {\n        this._roots.splice(idx, 1);\n      }\n    };\n\n    Storage.prototype.delAllRoots = function () {\n      this._roots = [];\n      this._displayList = [];\n      this._displayListLen = 0;\n      return;\n    };\n\n    Storage.prototype.getRoots = function () {\n      return this._roots;\n    };\n\n    Storage.prototype.dispose = function () {\n      this._displayList = null;\n      this._roots = null;\n    };\n\n    return Storage;\n  }();\n\n  var requestAnimationFrame;\n\n  requestAnimationFrame = env.hasGlobalWindow && (window.requestAnimationFrame && window.requestAnimationFrame.bind(window) || window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window) || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame) || function (func) {\n    return setTimeout(func, 16);\n  };\n\n  var requestAnimationFrame$1 = requestAnimationFrame;\n  var easingFuncs = {\n    linear: function (k) {\n      return k;\n    },\n    quadraticIn: function (k) {\n      return k * k;\n    },\n    quadraticOut: function (k) {\n      return k * (2 - k);\n    },\n    quadraticInOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k;\n      }\n\n      return -0.5 * (--k * (k - 2) - 1);\n    },\n    cubicIn: function (k) {\n      return k * k * k;\n    },\n    cubicOut: function (k) {\n      return --k * k * k + 1;\n    },\n    cubicInOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k;\n      }\n\n      return 0.5 * ((k -= 2) * k * k + 2);\n    },\n    quarticIn: function (k) {\n      return k * k * k * k;\n    },\n    quarticOut: function (k) {\n      return 1 - --k * k * k * k;\n    },\n    quarticInOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k;\n      }\n\n      return -0.5 * ((k -= 2) * k * k * k - 2);\n    },\n    quinticIn: function (k) {\n      return k * k * k * k * k;\n    },\n    quinticOut: function (k) {\n      return --k * k * k * k * k + 1;\n    },\n    quinticInOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k * k;\n      }\n\n      return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    },\n    sinusoidalIn: function (k) {\n      return 1 - Math.cos(k * Math.PI / 2);\n    },\n    sinusoidalOut: function (k) {\n      return Math.sin(k * Math.PI / 2);\n    },\n    sinusoidalInOut: function (k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k));\n    },\n    exponentialIn: function (k) {\n      return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n    exponentialOut: function (k) {\n      return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n    },\n    exponentialInOut: function (k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      if ((k *= 2) < 1) {\n        return 0.5 * Math.pow(1024, k - 1);\n      }\n\n      return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n    },\n    circularIn: function (k) {\n      return 1 - Math.sqrt(1 - k * k);\n    },\n    circularOut: function (k) {\n      return Math.sqrt(1 - --k * k);\n    },\n    circularInOut: function (k) {\n      if ((k *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - k * k) - 1);\n      }\n\n      return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    },\n    elasticIn: function (k) {\n      var s;\n      var a = 0.1;\n      var p = 0.4;\n\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      if (!a || a < 1) {\n        a = 1;\n        s = p / 4;\n      } else {\n        s = p * Math.asin(1 / a) / (2 * Math.PI);\n      }\n\n      return -(a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\n    },\n    elasticOut: function (k) {\n      var s;\n      var a = 0.1;\n      var p = 0.4;\n\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      if (!a || a < 1) {\n        a = 1;\n        s = p / 4;\n      } else {\n        s = p * Math.asin(1 / a) / (2 * Math.PI);\n      }\n\n      return a * Math.pow(2, -10 * k) * Math.sin((k - s) * (2 * Math.PI) / p) + 1;\n    },\n    elasticInOut: function (k) {\n      var s;\n      var a = 0.1;\n      var p = 0.4;\n\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      if (!a || a < 1) {\n        a = 1;\n        s = p / 4;\n      } else {\n        s = p * Math.asin(1 / a) / (2 * Math.PI);\n      }\n\n      if ((k *= 2) < 1) {\n        return -0.5 * (a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\n      }\n\n      return a * Math.pow(2, -10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n    },\n    backIn: function (k) {\n      var s = 1.70158;\n      return k * k * ((s + 1) * k - s);\n    },\n    backOut: function (k) {\n      var s = 1.70158;\n      return --k * k * ((s + 1) * k + s) + 1;\n    },\n    backInOut: function (k) {\n      var s = 1.70158 * 1.525;\n\n      if ((k *= 2) < 1) {\n        return 0.5 * (k * k * ((s + 1) * k - s));\n      }\n\n      return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    },\n    bounceIn: function (k) {\n      return 1 - easingFuncs.bounceOut(1 - k);\n    },\n    bounceOut: function (k) {\n      if (k < 1 / 2.75) {\n        return 7.5625 * k * k;\n      } else if (k < 2 / 2.75) {\n        return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n      } else if (k < 2.5 / 2.75) {\n        return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n      } else {\n        return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n      }\n    },\n    bounceInOut: function (k) {\n      if (k < 0.5) {\n        return easingFuncs.bounceIn(k * 2) * 0.5;\n      }\n\n      return easingFuncs.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n    }\n  };\n  var mathPow = Math.pow;\n  var mathSqrt = Math.sqrt;\n  var EPSILON = 1e-8;\n  var EPSILON_NUMERIC = 1e-4;\n  var THREE_SQRT = mathSqrt(3);\n  var ONE_THIRD = 1 / 3;\n\n  var _v0 = create();\n\n  var _v1 = create();\n\n  var _v2 = create();\n\n  function isAroundZero(val) {\n    return val > -EPSILON && val < EPSILON;\n  }\n\n  function isNotAroundZero(val) {\n    return val > EPSILON || val < -EPSILON;\n  }\n\n  function cubicAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return onet * onet * (onet * p0 + 3 * t * p1) + t * t * (t * p3 + 3 * onet * p2);\n  }\n\n  function cubicDerivativeAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return 3 * (((p1 - p0) * onet + 2 * (p2 - p1) * t) * onet + (p3 - p2) * t * t);\n  }\n\n  function cubicRootAt(p0, p1, p2, p3, val, roots) {\n    var a = p3 + 3 * (p1 - p2) - p0;\n    var b = 3 * (p2 - p1 * 2 + p0);\n    var c = 3 * (p1 - p0);\n    var d = p0 - val;\n    var A = b * b - 3 * a * c;\n    var B = b * c - 9 * a * d;\n    var C = c * c - 3 * b * d;\n    var n = 0;\n\n    if (isAroundZero(A) && isAroundZero(B)) {\n      if (isAroundZero(b)) {\n        roots[0] = 0;\n      } else {\n        var t1 = -c / b;\n\n        if (t1 >= 0 && t1 <= 1) {\n          roots[n++] = t1;\n        }\n      }\n    } else {\n      var disc = B * B - 4 * A * C;\n\n      if (isAroundZero(disc)) {\n        var K = B / A;\n        var t1 = -b / a + K;\n        var t2 = -K / 2;\n\n        if (t1 >= 0 && t1 <= 1) {\n          roots[n++] = t1;\n        }\n\n        if (t2 >= 0 && t2 <= 1) {\n          roots[n++] = t2;\n        }\n      } else if (disc > 0) {\n        var discSqrt = mathSqrt(disc);\n        var Y1 = A * b + 1.5 * a * (-B + discSqrt);\n        var Y2 = A * b + 1.5 * a * (-B - discSqrt);\n\n        if (Y1 < 0) {\n          Y1 = -mathPow(-Y1, ONE_THIRD);\n        } else {\n          Y1 = mathPow(Y1, ONE_THIRD);\n        }\n\n        if (Y2 < 0) {\n          Y2 = -mathPow(-Y2, ONE_THIRD);\n        } else {\n          Y2 = mathPow(Y2, ONE_THIRD);\n        }\n\n        var t1 = (-b - (Y1 + Y2)) / (3 * a);\n\n        if (t1 >= 0 && t1 <= 1) {\n          roots[n++] = t1;\n        }\n      } else {\n        var T = (2 * A * b - 3 * a * B) / (2 * mathSqrt(A * A * A));\n        var theta = Math.acos(T) / 3;\n        var ASqrt = mathSqrt(A);\n        var tmp = Math.cos(theta);\n        var t1 = (-b - 2 * ASqrt * tmp) / (3 * a);\n        var t2 = (-b + ASqrt * (tmp + THREE_SQRT * Math.sin(theta))) / (3 * a);\n        var t3 = (-b + ASqrt * (tmp - THREE_SQRT * Math.sin(theta))) / (3 * a);\n\n        if (t1 >= 0 && t1 <= 1) {\n          roots[n++] = t1;\n        }\n\n        if (t2 >= 0 && t2 <= 1) {\n          roots[n++] = t2;\n        }\n\n        if (t3 >= 0 && t3 <= 1) {\n          roots[n++] = t3;\n        }\n      }\n    }\n\n    return n;\n  }\n\n  function cubicExtrema(p0, p1, p2, p3, extrema) {\n    var b = 6 * p2 - 12 * p1 + 6 * p0;\n    var a = 9 * p1 + 3 * p3 - 3 * p0 - 9 * p2;\n    var c = 3 * p1 - 3 * p0;\n    var n = 0;\n\n    if (isAroundZero(a)) {\n      if (isNotAroundZero(b)) {\n        var t1 = -c / b;\n\n        if (t1 >= 0 && t1 <= 1) {\n          extrema[n++] = t1;\n        }\n      }\n    } else {\n      var disc = b * b - 4 * a * c;\n\n      if (isAroundZero(disc)) {\n        extrema[0] = -b / (2 * a);\n      } else if (disc > 0) {\n        var discSqrt = mathSqrt(disc);\n        var t1 = (-b + discSqrt) / (2 * a);\n        var t2 = (-b - discSqrt) / (2 * a);\n\n        if (t1 >= 0 && t1 <= 1) {\n          extrema[n++] = t1;\n        }\n\n        if (t2 >= 0 && t2 <= 1) {\n          extrema[n++] = t2;\n        }\n      }\n    }\n\n    return n;\n  }\n\n  function cubicSubdivide(p0, p1, p2, p3, t, out) {\n    var p01 = (p1 - p0) * t + p0;\n    var p12 = (p2 - p1) * t + p1;\n    var p23 = (p3 - p2) * t + p2;\n    var p012 = (p12 - p01) * t + p01;\n    var p123 = (p23 - p12) * t + p12;\n    var p0123 = (p123 - p012) * t + p012;\n    out[0] = p0;\n    out[1] = p01;\n    out[2] = p012;\n    out[3] = p0123;\n    out[4] = p0123;\n    out[5] = p123;\n    out[6] = p23;\n    out[7] = p3;\n  }\n\n  function cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, out) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    var prev;\n    var next;\n    var d1;\n    var d2;\n    _v0[0] = x;\n    _v0[1] = y;\n\n    for (var _t = 0; _t < 1; _t += 0.05) {\n      _v1[0] = cubicAt(x0, x1, x2, x3, _t);\n      _v1[1] = cubicAt(y0, y1, y2, y3, _t);\n      d1 = distSquare(_v0, _v1);\n\n      if (d1 < d) {\n        t = _t;\n        d = d1;\n      }\n    }\n\n    d = Infinity;\n\n    for (var i = 0; i < 32; i++) {\n      if (interval < EPSILON_NUMERIC) {\n        break;\n      }\n\n      prev = t - interval;\n      next = t + interval;\n      _v1[0] = cubicAt(x0, x1, x2, x3, prev);\n      _v1[1] = cubicAt(y0, y1, y2, y3, prev);\n      d1 = distSquare(_v1, _v0);\n\n      if (prev >= 0 && d1 < d) {\n        t = prev;\n        d = d1;\n      } else {\n        _v2[0] = cubicAt(x0, x1, x2, x3, next);\n        _v2[1] = cubicAt(y0, y1, y2, y3, next);\n        d2 = distSquare(_v2, _v0);\n\n        if (next <= 1 && d2 < d) {\n          t = next;\n          d = d2;\n        } else {\n          interval *= 0.5;\n        }\n      }\n    }\n\n    if (out) {\n      out[0] = cubicAt(x0, x1, x2, x3, t);\n      out[1] = cubicAt(y0, y1, y2, y3, t);\n    }\n\n    return mathSqrt(d);\n  }\n\n  function cubicLength(x0, y0, x1, y1, x2, y2, x3, y3, iteration) {\n    var px = x0;\n    var py = y0;\n    var d = 0;\n    var step = 1 / iteration;\n\n    for (var i = 1; i <= iteration; i++) {\n      var t = i * step;\n      var x = cubicAt(x0, x1, x2, x3, t);\n      var y = cubicAt(y0, y1, y2, y3, t);\n      var dx = x - px;\n      var dy = y - py;\n      d += Math.sqrt(dx * dx + dy * dy);\n      px = x;\n      py = y;\n    }\n\n    return d;\n  }\n\n  function quadraticAt(p0, p1, p2, t) {\n    var onet = 1 - t;\n    return onet * (onet * p0 + 2 * t * p1) + t * t * p2;\n  }\n\n  function quadraticDerivativeAt(p0, p1, p2, t) {\n    return 2 * ((1 - t) * (p1 - p0) + t * (p2 - p1));\n  }\n\n  function quadraticRootAt(p0, p1, p2, val, roots) {\n    var a = p0 - 2 * p1 + p2;\n    var b = 2 * (p1 - p0);\n    var c = p0 - val;\n    var n = 0;\n\n    if (isAroundZero(a)) {\n      if (isNotAroundZero(b)) {\n        var t1 = -c / b;\n\n        if (t1 >= 0 && t1 <= 1) {\n          roots[n++] = t1;\n        }\n      }\n    } else {\n      var disc = b * b - 4 * a * c;\n\n      if (isAroundZero(disc)) {\n        var t1 = -b / (2 * a);\n\n        if (t1 >= 0 && t1 <= 1) {\n          roots[n++] = t1;\n        }\n      } else if (disc > 0) {\n        var discSqrt = mathSqrt(disc);\n        var t1 = (-b + discSqrt) / (2 * a);\n        var t2 = (-b - discSqrt) / (2 * a);\n\n        if (t1 >= 0 && t1 <= 1) {\n          roots[n++] = t1;\n        }\n\n        if (t2 >= 0 && t2 <= 1) {\n          roots[n++] = t2;\n        }\n      }\n    }\n\n    return n;\n  }\n\n  function quadraticExtremum(p0, p1, p2) {\n    var divider = p0 + p2 - 2 * p1;\n\n    if (divider === 0) {\n      return 0.5;\n    } else {\n      return (p0 - p1) / divider;\n    }\n  }\n\n  function quadraticSubdivide(p0, p1, p2, t, out) {\n    var p01 = (p1 - p0) * t + p0;\n    var p12 = (p2 - p1) * t + p1;\n    var p012 = (p12 - p01) * t + p01;\n    out[0] = p0;\n    out[1] = p01;\n    out[2] = p012;\n    out[3] = p012;\n    out[4] = p12;\n    out[5] = p2;\n  }\n\n  function quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, out) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    _v0[0] = x;\n    _v0[1] = y;\n\n    for (var _t = 0; _t < 1; _t += 0.05) {\n      _v1[0] = quadraticAt(x0, x1, x2, _t);\n      _v1[1] = quadraticAt(y0, y1, y2, _t);\n      var d1 = distSquare(_v0, _v1);\n\n      if (d1 < d) {\n        t = _t;\n        d = d1;\n      }\n    }\n\n    d = Infinity;\n\n    for (var i = 0; i < 32; i++) {\n      if (interval < EPSILON_NUMERIC) {\n        break;\n      }\n\n      var prev = t - interval;\n      var next = t + interval;\n      _v1[0] = quadraticAt(x0, x1, x2, prev);\n      _v1[1] = quadraticAt(y0, y1, y2, prev);\n      var d1 = distSquare(_v1, _v0);\n\n      if (prev >= 0 && d1 < d) {\n        t = prev;\n        d = d1;\n      } else {\n        _v2[0] = quadraticAt(x0, x1, x2, next);\n        _v2[1] = quadraticAt(y0, y1, y2, next);\n        var d2 = distSquare(_v2, _v0);\n\n        if (next <= 1 && d2 < d) {\n          t = next;\n          d = d2;\n        } else {\n          interval *= 0.5;\n        }\n      }\n    }\n\n    if (out) {\n      out[0] = quadraticAt(x0, x1, x2, t);\n      out[1] = quadraticAt(y0, y1, y2, t);\n    }\n\n    return mathSqrt(d);\n  }\n\n  function quadraticLength(x0, y0, x1, y1, x2, y2, iteration) {\n    var px = x0;\n    var py = y0;\n    var d = 0;\n    var step = 1 / iteration;\n\n    for (var i = 1; i <= iteration; i++) {\n      var t = i * step;\n      var x = quadraticAt(x0, x1, x2, t);\n      var y = quadraticAt(y0, y1, y2, t);\n      var dx = x - px;\n      var dy = y - py;\n      d += Math.sqrt(dx * dx + dy * dy);\n      px = x;\n      py = y;\n    }\n\n    return d;\n  }\n\n  var regexp = /cubic-bezier\\(([0-9,\\.e ]+)\\)/;\n\n  function createCubicEasingFunc(cubicEasingStr) {\n    var cubic = cubicEasingStr && regexp.exec(cubicEasingStr);\n\n    if (cubic) {\n      var points = cubic[1].split(',');\n      var a_1 = +trim(points[0]);\n      var b_1 = +trim(points[1]);\n      var c_1 = +trim(points[2]);\n      var d_1 = +trim(points[3]);\n\n      if (isNaN(a_1 + b_1 + c_1 + d_1)) {\n        return;\n      }\n\n      var roots_1 = [];\n      return function (p) {\n        return p <= 0 ? 0 : p >= 1 ? 1 : cubicRootAt(0, a_1, c_1, 1, p, roots_1) && cubicAt(0, b_1, d_1, 1, roots_1[0]);\n      };\n    }\n  }\n\n  var Clip = function () {\n    function Clip(opts) {\n      this._inited = false;\n      this._startTime = 0;\n      this._pausedTime = 0;\n      this._paused = false;\n      this._life = opts.life || 1000;\n      this._delay = opts.delay || 0;\n      this.loop = opts.loop || false;\n      this.onframe = opts.onframe || noop;\n      this.ondestroy = opts.ondestroy || noop;\n      this.onrestart = opts.onrestart || noop;\n      opts.easing && this.setEasing(opts.easing);\n    }\n\n    Clip.prototype.step = function (globalTime, deltaTime) {\n      if (!this._inited) {\n        this._startTime = globalTime + this._delay;\n        this._inited = true;\n      }\n\n      if (this._paused) {\n        this._pausedTime += deltaTime;\n        return;\n      }\n\n      var life = this._life;\n      var elapsedTime = globalTime - this._startTime - this._pausedTime;\n      var percent = elapsedTime / life;\n\n      if (percent < 0) {\n        percent = 0;\n      }\n\n      percent = Math.min(percent, 1);\n      var easingFunc = this.easingFunc;\n      var schedule = easingFunc ? easingFunc(percent) : percent;\n      this.onframe(schedule);\n\n      if (percent === 1) {\n        if (this.loop) {\n          var remainder = elapsedTime % life;\n          this._startTime = globalTime - remainder;\n          this._pausedTime = 0;\n          this.onrestart();\n        } else {\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    Clip.prototype.pause = function () {\n      this._paused = true;\n    };\n\n    Clip.prototype.resume = function () {\n      this._paused = false;\n    };\n\n    Clip.prototype.setEasing = function (easing) {\n      this.easing = easing;\n      this.easingFunc = isFunction(easing) ? easing : easingFuncs[easing] || createCubicEasingFunc(easing);\n    };\n\n    return Clip;\n  }();\n\n  var Entry = function () {\n    function Entry(val) {\n      this.value = val;\n    }\n\n    return Entry;\n  }();\n\n  var LinkedList = function () {\n    function LinkedList() {\n      this._len = 0;\n    }\n\n    LinkedList.prototype.insert = function (val) {\n      var entry = new Entry(val);\n      this.insertEntry(entry);\n      return entry;\n    };\n\n    LinkedList.prototype.insertEntry = function (entry) {\n      if (!this.head) {\n        this.head = this.tail = entry;\n      } else {\n        this.tail.next = entry;\n        entry.prev = this.tail;\n        entry.next = null;\n        this.tail = entry;\n      }\n\n      this._len++;\n    };\n\n    LinkedList.prototype.remove = function (entry) {\n      var prev = entry.prev;\n      var next = entry.next;\n\n      if (prev) {\n        prev.next = next;\n      } else {\n        this.head = next;\n      }\n\n      if (next) {\n        next.prev = prev;\n      } else {\n        this.tail = prev;\n      }\n\n      entry.next = entry.prev = null;\n      this._len--;\n    };\n\n    LinkedList.prototype.len = function () {\n      return this._len;\n    };\n\n    LinkedList.prototype.clear = function () {\n      this.head = this.tail = null;\n      this._len = 0;\n    };\n\n    return LinkedList;\n  }();\n\n  var LRU = function () {\n    function LRU(maxSize) {\n      this._list = new LinkedList();\n      this._maxSize = 10;\n      this._map = {};\n      this._maxSize = maxSize;\n    }\n\n    LRU.prototype.put = function (key, value) {\n      var list = this._list;\n      var map = this._map;\n      var removed = null;\n\n      if (map[key] == null) {\n        var len = list.len();\n        var entry = this._lastRemovedEntry;\n\n        if (len >= this._maxSize && len > 0) {\n          var leastUsedEntry = list.head;\n          list.remove(leastUsedEntry);\n          delete map[leastUsedEntry.key];\n          removed = leastUsedEntry.value;\n          this._lastRemovedEntry = leastUsedEntry;\n        }\n\n        if (entry) {\n          entry.value = value;\n        } else {\n          entry = new Entry(value);\n        }\n\n        entry.key = key;\n        list.insertEntry(entry);\n        map[key] = entry;\n      }\n\n      return removed;\n    };\n\n    LRU.prototype.get = function (key) {\n      var entry = this._map[key];\n      var list = this._list;\n\n      if (entry != null) {\n        if (entry !== list.tail) {\n          list.remove(entry);\n          list.insertEntry(entry);\n        }\n\n        return entry.value;\n      }\n    };\n\n    LRU.prototype.clear = function () {\n      this._list.clear();\n\n      this._map = {};\n    };\n\n    LRU.prototype.len = function () {\n      return this._list.len();\n    };\n\n    return LRU;\n  }();\n\n  var kCSSColorTable = {\n    'transparent': [0, 0, 0, 0],\n    'aliceblue': [240, 248, 255, 1],\n    'antiquewhite': [250, 235, 215, 1],\n    'aqua': [0, 255, 255, 1],\n    'aquamarine': [127, 255, 212, 1],\n    'azure': [240, 255, 255, 1],\n    'beige': [245, 245, 220, 1],\n    'bisque': [255, 228, 196, 1],\n    'black': [0, 0, 0, 1],\n    'blanchedalmond': [255, 235, 205, 1],\n    'blue': [0, 0, 255, 1],\n    'blueviolet': [138, 43, 226, 1],\n    'brown': [165, 42, 42, 1],\n    'burlywood': [222, 184, 135, 1],\n    'cadetblue': [95, 158, 160, 1],\n    'chartreuse': [127, 255, 0, 1],\n    'chocolate': [210, 105, 30, 1],\n    'coral': [255, 127, 80, 1],\n    'cornflowerblue': [100, 149, 237, 1],\n    'cornsilk': [255, 248, 220, 1],\n    'crimson': [220, 20, 60, 1],\n    'cyan': [0, 255, 255, 1],\n    'darkblue': [0, 0, 139, 1],\n    'darkcyan': [0, 139, 139, 1],\n    'darkgoldenrod': [184, 134, 11, 1],\n    'darkgray': [169, 169, 169, 1],\n    'darkgreen': [0, 100, 0, 1],\n    'darkgrey': [169, 169, 169, 1],\n    'darkkhaki': [189, 183, 107, 1],\n    'darkmagenta': [139, 0, 139, 1],\n    'darkolivegreen': [85, 107, 47, 1],\n    'darkorange': [255, 140, 0, 1],\n    'darkorchid': [153, 50, 204, 1],\n    'darkred': [139, 0, 0, 1],\n    'darksalmon': [233, 150, 122, 1],\n    'darkseagreen': [143, 188, 143, 1],\n    'darkslateblue': [72, 61, 139, 1],\n    'darkslategray': [47, 79, 79, 1],\n    'darkslategrey': [47, 79, 79, 1],\n    'darkturquoise': [0, 206, 209, 1],\n    'darkviolet': [148, 0, 211, 1],\n    'deeppink': [255, 20, 147, 1],\n    'deepskyblue': [0, 191, 255, 1],\n    'dimgray': [105, 105, 105, 1],\n    'dimgrey': [105, 105, 105, 1],\n    'dodgerblue': [30, 144, 255, 1],\n    'firebrick': [178, 34, 34, 1],\n    'floralwhite': [255, 250, 240, 1],\n    'forestgreen': [34, 139, 34, 1],\n    'fuchsia': [255, 0, 255, 1],\n    'gainsboro': [220, 220, 220, 1],\n    'ghostwhite': [248, 248, 255, 1],\n    'gold': [255, 215, 0, 1],\n    'goldenrod': [218, 165, 32, 1],\n    'gray': [128, 128, 128, 1],\n    'green': [0, 128, 0, 1],\n    'greenyellow': [173, 255, 47, 1],\n    'grey': [128, 128, 128, 1],\n    'honeydew': [240, 255, 240, 1],\n    'hotpink': [255, 105, 180, 1],\n    'indianred': [205, 92, 92, 1],\n    'indigo': [75, 0, 130, 1],\n    'ivory': [255, 255, 240, 1],\n    'khaki': [240, 230, 140, 1],\n    'lavender': [230, 230, 250, 1],\n    'lavenderblush': [255, 240, 245, 1],\n    'lawngreen': [124, 252, 0, 1],\n    'lemonchiffon': [255, 250, 205, 1],\n    'lightblue': [173, 216, 230, 1],\n    'lightcoral': [240, 128, 128, 1],\n    'lightcyan': [224, 255, 255, 1],\n    'lightgoldenrodyellow': [250, 250, 210, 1],\n    'lightgray': [211, 211, 211, 1],\n    'lightgreen': [144, 238, 144, 1],\n    'lightgrey': [211, 211, 211, 1],\n    'lightpink': [255, 182, 193, 1],\n    'lightsalmon': [255, 160, 122, 1],\n    'lightseagreen': [32, 178, 170, 1],\n    'lightskyblue': [135, 206, 250, 1],\n    'lightslategray': [119, 136, 153, 1],\n    'lightslategrey': [119, 136, 153, 1],\n    'lightsteelblue': [176, 196, 222, 1],\n    'lightyellow': [255, 255, 224, 1],\n    'lime': [0, 255, 0, 1],\n    'limegreen': [50, 205, 50, 1],\n    'linen': [250, 240, 230, 1],\n    'magenta': [255, 0, 255, 1],\n    'maroon': [128, 0, 0, 1],\n    'mediumaquamarine': [102, 205, 170, 1],\n    'mediumblue': [0, 0, 205, 1],\n    'mediumorchid': [186, 85, 211, 1],\n    'mediumpurple': [147, 112, 219, 1],\n    'mediumseagreen': [60, 179, 113, 1],\n    'mediumslateblue': [123, 104, 238, 1],\n    'mediumspringgreen': [0, 250, 154, 1],\n    'mediumturquoise': [72, 209, 204, 1],\n    'mediumvioletred': [199, 21, 133, 1],\n    'midnightblue': [25, 25, 112, 1],\n    'mintcream': [245, 255, 250, 1],\n    'mistyrose': [255, 228, 225, 1],\n    'moccasin': [255, 228, 181, 1],\n    'navajowhite': [255, 222, 173, 1],\n    'navy': [0, 0, 128, 1],\n    'oldlace': [253, 245, 230, 1],\n    'olive': [128, 128, 0, 1],\n    'olivedrab': [107, 142, 35, 1],\n    'orange': [255, 165, 0, 1],\n    'orangered': [255, 69, 0, 1],\n    'orchid': [218, 112, 214, 1],\n    'palegoldenrod': [238, 232, 170, 1],\n    'palegreen': [152, 251, 152, 1],\n    'paleturquoise': [175, 238, 238, 1],\n    'palevioletred': [219, 112, 147, 1],\n    'papayawhip': [255, 239, 213, 1],\n    'peachpuff': [255, 218, 185, 1],\n    'peru': [205, 133, 63, 1],\n    'pink': [255, 192, 203, 1],\n    'plum': [221, 160, 221, 1],\n    'powderblue': [176, 224, 230, 1],\n    'purple': [128, 0, 128, 1],\n    'red': [255, 0, 0, 1],\n    'rosybrown': [188, 143, 143, 1],\n    'royalblue': [65, 105, 225, 1],\n    'saddlebrown': [139, 69, 19, 1],\n    'salmon': [250, 128, 114, 1],\n    'sandybrown': [244, 164, 96, 1],\n    'seagreen': [46, 139, 87, 1],\n    'seashell': [255, 245, 238, 1],\n    'sienna': [160, 82, 45, 1],\n    'silver': [192, 192, 192, 1],\n    'skyblue': [135, 206, 235, 1],\n    'slateblue': [106, 90, 205, 1],\n    'slategray': [112, 128, 144, 1],\n    'slategrey': [112, 128, 144, 1],\n    'snow': [255, 250, 250, 1],\n    'springgreen': [0, 255, 127, 1],\n    'steelblue': [70, 130, 180, 1],\n    'tan': [210, 180, 140, 1],\n    'teal': [0, 128, 128, 1],\n    'thistle': [216, 191, 216, 1],\n    'tomato': [255, 99, 71, 1],\n    'turquoise': [64, 224, 208, 1],\n    'violet': [238, 130, 238, 1],\n    'wheat': [245, 222, 179, 1],\n    'white': [255, 255, 255, 1],\n    'whitesmoke': [245, 245, 245, 1],\n    'yellow': [255, 255, 0, 1],\n    'yellowgreen': [154, 205, 50, 1]\n  };\n\n  function clampCssByte(i) {\n    i = Math.round(i);\n    return i < 0 ? 0 : i > 255 ? 255 : i;\n  }\n\n  function clampCssAngle(i) {\n    i = Math.round(i);\n    return i < 0 ? 0 : i > 360 ? 360 : i;\n  }\n\n  function clampCssFloat(f) {\n    return f < 0 ? 0 : f > 1 ? 1 : f;\n  }\n\n  function parseCssInt(val) {\n    var str = val;\n\n    if (str.length && str.charAt(str.length - 1) === '%') {\n      return clampCssByte(parseFloat(str) / 100 * 255);\n    }\n\n    return clampCssByte(parseInt(str, 10));\n  }\n\n  function parseCssFloat(val) {\n    var str = val;\n\n    if (str.length && str.charAt(str.length - 1) === '%') {\n      return clampCssFloat(parseFloat(str) / 100);\n    }\n\n    return clampCssFloat(parseFloat(str));\n  }\n\n  function cssHueToRgb(m1, m2, h) {\n    if (h < 0) {\n      h += 1;\n    } else if (h > 1) {\n      h -= 1;\n    }\n\n    if (h * 6 < 1) {\n      return m1 + (m2 - m1) * h * 6;\n    }\n\n    if (h * 2 < 1) {\n      return m2;\n    }\n\n    if (h * 3 < 2) {\n      return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n    }\n\n    return m1;\n  }\n\n  function lerpNumber(a, b, p) {\n    return a + (b - a) * p;\n  }\n\n  function setRgba(out, r, g, b, a) {\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    out[3] = a;\n    return out;\n  }\n\n  function copyRgba(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n  }\n\n  var colorCache = new LRU(20);\n  var lastRemovedArr = null;\n\n  function putToCache(colorStr, rgbaArr) {\n    if (lastRemovedArr) {\n      copyRgba(lastRemovedArr, rgbaArr);\n    }\n\n    lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || rgbaArr.slice());\n  }\n\n  function parse(colorStr, rgbaArr) {\n    if (!colorStr) {\n      return;\n    }\n\n    rgbaArr = rgbaArr || [];\n    var cached = colorCache.get(colorStr);\n\n    if (cached) {\n      return copyRgba(rgbaArr, cached);\n    }\n\n    colorStr = colorStr + '';\n    var str = colorStr.replace(/ /g, '').toLowerCase();\n\n    if (str in kCSSColorTable) {\n      copyRgba(rgbaArr, kCSSColorTable[str]);\n      putToCache(colorStr, rgbaArr);\n      return rgbaArr;\n    }\n\n    var strLen = str.length;\n\n    if (str.charAt(0) === '#') {\n      if (strLen === 4 || strLen === 5) {\n        var iv = parseInt(str.slice(1, 4), 16);\n\n        if (!(iv >= 0 && iv <= 0xfff)) {\n          setRgba(rgbaArr, 0, 0, 0, 1);\n          return;\n        }\n\n        setRgba(rgbaArr, (iv & 0xf00) >> 4 | (iv & 0xf00) >> 8, iv & 0xf0 | (iv & 0xf0) >> 4, iv & 0xf | (iv & 0xf) << 4, strLen === 5 ? parseInt(str.slice(4), 16) / 0xf : 1);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n      } else if (strLen === 7 || strLen === 9) {\n        var iv = parseInt(str.slice(1, 7), 16);\n\n        if (!(iv >= 0 && iv <= 0xffffff)) {\n          setRgba(rgbaArr, 0, 0, 0, 1);\n          return;\n        }\n\n        setRgba(rgbaArr, (iv & 0xff0000) >> 16, (iv & 0xff00) >> 8, iv & 0xff, strLen === 9 ? parseInt(str.slice(7), 16) / 0xff : 1);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n      }\n\n      return;\n    }\n\n    var op = str.indexOf('(');\n    var ep = str.indexOf(')');\n\n    if (op !== -1 && ep + 1 === strLen) {\n      var fname = str.substr(0, op);\n      var params = str.substr(op + 1, ep - (op + 1)).split(',');\n      var alpha = 1;\n\n      switch (fname) {\n        case 'rgba':\n          if (params.length !== 4) {\n            return params.length === 3 ? setRgba(rgbaArr, +params[0], +params[1], +params[2], 1) : setRgba(rgbaArr, 0, 0, 0, 1);\n          }\n\n          alpha = parseCssFloat(params.pop());\n\n        case 'rgb':\n          if (params.length !== 3) {\n            setRgba(rgbaArr, 0, 0, 0, 1);\n            return;\n          }\n\n          setRgba(rgbaArr, parseCssInt(params[0]), parseCssInt(params[1]), parseCssInt(params[2]), alpha);\n          putToCache(colorStr, rgbaArr);\n          return rgbaArr;\n\n        case 'hsla':\n          if (params.length !== 4) {\n            setRgba(rgbaArr, 0, 0, 0, 1);\n            return;\n          }\n\n          params[3] = parseCssFloat(params[3]);\n          hsla2rgba(params, rgbaArr);\n          putToCache(colorStr, rgbaArr);\n          return rgbaArr;\n\n        case 'hsl':\n          if (params.length !== 3) {\n            setRgba(rgbaArr, 0, 0, 0, 1);\n            return;\n          }\n\n          hsla2rgba(params, rgbaArr);\n          putToCache(colorStr, rgbaArr);\n          return rgbaArr;\n\n        default:\n          return;\n      }\n    }\n\n    setRgba(rgbaArr, 0, 0, 0, 1);\n    return;\n  }\n\n  function hsla2rgba(hsla, rgba) {\n    var h = (parseFloat(hsla[0]) % 360 + 360) % 360 / 360;\n    var s = parseCssFloat(hsla[1]);\n    var l = parseCssFloat(hsla[2]);\n    var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    var m1 = l * 2 - m2;\n    rgba = rgba || [];\n    setRgba(rgba, clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255), clampCssByte(cssHueToRgb(m1, m2, h) * 255), clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255), 1);\n\n    if (hsla.length === 4) {\n      rgba[3] = hsla[3];\n    }\n\n    return rgba;\n  }\n\n  function rgba2hsla(rgba) {\n    if (!rgba) {\n      return;\n    }\n\n    var R = rgba[0] / 255;\n    var G = rgba[1] / 255;\n    var B = rgba[2] / 255;\n    var vMin = Math.min(R, G, B);\n    var vMax = Math.max(R, G, B);\n    var delta = vMax - vMin;\n    var L = (vMax + vMin) / 2;\n    var H;\n    var S;\n\n    if (delta === 0) {\n      H = 0;\n      S = 0;\n    } else {\n      if (L < 0.5) {\n        S = delta / (vMax + vMin);\n      } else {\n        S = delta / (2 - vMax - vMin);\n      }\n\n      var deltaR = ((vMax - R) / 6 + delta / 2) / delta;\n      var deltaG = ((vMax - G) / 6 + delta / 2) / delta;\n      var deltaB = ((vMax - B) / 6 + delta / 2) / delta;\n\n      if (R === vMax) {\n        H = deltaB - deltaG;\n      } else if (G === vMax) {\n        H = 1 / 3 + deltaR - deltaB;\n      } else if (B === vMax) {\n        H = 2 / 3 + deltaG - deltaR;\n      }\n\n      if (H < 0) {\n        H += 1;\n      }\n\n      if (H > 1) {\n        H -= 1;\n      }\n    }\n\n    var hsla = [H * 360, S, L];\n\n    if (rgba[3] != null) {\n      hsla.push(rgba[3]);\n    }\n\n    return hsla;\n  }\n\n  function lift(color, level) {\n    var colorArr = parse(color);\n\n    if (colorArr) {\n      for (var i = 0; i < 3; i++) {\n        if (level < 0) {\n          colorArr[i] = colorArr[i] * (1 - level) | 0;\n        } else {\n          colorArr[i] = (255 - colorArr[i]) * level + colorArr[i] | 0;\n        }\n\n        if (colorArr[i] > 255) {\n          colorArr[i] = 255;\n        } else if (colorArr[i] < 0) {\n          colorArr[i] = 0;\n        }\n      }\n\n      return stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\n    }\n  }\n\n  function toHex(color) {\n    var colorArr = parse(color);\n\n    if (colorArr) {\n      return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + +colorArr[2]).toString(16).slice(1);\n    }\n  }\n\n  function fastLerp(normalizedValue, colors, out) {\n    if (!(colors && colors.length) || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n      return;\n    }\n\n    out = out || [];\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = colors[leftIndex];\n    var rightColor = colors[rightIndex];\n    var dv = value - leftIndex;\n    out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\n    out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\n    out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\n    out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\n    return out;\n  }\n\n  var fastMapToColor = fastLerp;\n\n  function lerp$1(normalizedValue, colors, fullOutput) {\n    if (!(colors && colors.length) || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n      return;\n    }\n\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = parse(colors[leftIndex]);\n    var rightColor = parse(colors[rightIndex]);\n    var dv = value - leftIndex;\n    var color = stringify([clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)), clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)), clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)), clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))], 'rgba');\n    return fullOutput ? {\n      color: color,\n      leftIndex: leftIndex,\n      rightIndex: rightIndex,\n      value: value\n    } : color;\n  }\n\n  var mapToColor = lerp$1;\n\n  function modifyHSL(color, h, s, l) {\n    var colorArr = parse(color);\n\n    if (color) {\n      colorArr = rgba2hsla(colorArr);\n      h != null && (colorArr[0] = clampCssAngle(h));\n      s != null && (colorArr[1] = parseCssFloat(s));\n      l != null && (colorArr[2] = parseCssFloat(l));\n      return stringify(hsla2rgba(colorArr), 'rgba');\n    }\n  }\n\n  function modifyAlpha(color, alpha) {\n    var colorArr = parse(color);\n\n    if (colorArr && alpha != null) {\n      colorArr[3] = clampCssFloat(alpha);\n      return stringify(colorArr, 'rgba');\n    }\n  }\n\n  function stringify(arrColor, type) {\n    if (!arrColor || !arrColor.length) {\n      return;\n    }\n\n    var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n\n    if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n      colorStr += ',' + arrColor[3];\n    }\n\n    return type + '(' + colorStr + ')';\n  }\n\n  function lum(color, backgroundLum) {\n    var arr = parse(color);\n    return arr ? (0.299 * arr[0] + 0.587 * arr[1] + 0.114 * arr[2]) * arr[3] / 255 + (1 - arr[3]) * backgroundLum : 0;\n  }\n\n  function random() {\n    return stringify([Math.round(Math.random() * 255), Math.round(Math.random() * 255), Math.round(Math.random() * 255)], 'rgb');\n  }\n\n  var color = (Object.freeze || Object)({\n    parse: parse,\n    lift: lift,\n    toHex: toHex,\n    fastLerp: fastLerp,\n    fastMapToColor: fastMapToColor,\n    lerp: lerp$1,\n    mapToColor: mapToColor,\n    modifyHSL: modifyHSL,\n    modifyAlpha: modifyAlpha,\n    stringify: stringify,\n    lum: lum,\n    random: random\n  });\n  var mathRound = Math.round;\n\n  function normalizeColor(color) {\n    var opacity;\n\n    if (!color || color === 'transparent') {\n      color = 'none';\n    } else if (typeof color === 'string' && color.indexOf('rgba') > -1) {\n      var arr = parse(color);\n\n      if (arr) {\n        color = 'rgb(' + arr[0] + ',' + arr[1] + ',' + arr[2] + ')';\n        opacity = arr[3];\n      }\n    }\n\n    return {\n      color: color,\n      opacity: opacity == null ? 1 : opacity\n    };\n  }\n\n  var EPSILON$1 = 1e-4;\n\n  function isAroundZero$1(transform) {\n    return transform < EPSILON$1 && transform > -EPSILON$1;\n  }\n\n  function round3(transform) {\n    return mathRound(transform * 1e3) / 1e3;\n  }\n\n  function round4(transform) {\n    return mathRound(transform * 1e4) / 1e4;\n  }\n\n  function getMatrixStr(m) {\n    return 'matrix(' + round3(m[0]) + ',' + round3(m[1]) + ',' + round3(m[2]) + ',' + round3(m[3]) + ',' + round4(m[4]) + ',' + round4(m[5]) + ')';\n  }\n\n  var TEXT_ALIGN_TO_ANCHOR = {\n    left: 'start',\n    right: 'end',\n    center: 'middle',\n    middle: 'middle'\n  };\n\n  function adjustTextY(y, lineHeight, textBaseline) {\n    if (textBaseline === 'top') {\n      y += lineHeight / 2;\n    } else if (textBaseline === 'bottom') {\n      y -= lineHeight / 2;\n    }\n\n    return y;\n  }\n\n  function hasShadow(style) {\n    return style && (style.shadowBlur || style.shadowOffsetX || style.shadowOffsetY);\n  }\n\n  function getShadowKey(displayable) {\n    var style = displayable.style;\n    var globalScale = displayable.getGlobalScale();\n    return [style.shadowColor, (style.shadowBlur || 0).toFixed(2), (style.shadowOffsetX || 0).toFixed(2), (style.shadowOffsetY || 0).toFixed(2), globalScale[0], globalScale[1]].join(',');\n  }\n\n  function isImagePattern(val) {\n    return val && !!val.image;\n  }\n\n  function isSVGPattern(val) {\n    return val && !!val.svgElement;\n  }\n\n  function isPattern(val) {\n    return isImagePattern(val) || isSVGPattern(val);\n  }\n\n  function isLinearGradient(val) {\n    return val.type === 'linear';\n  }\n\n  function isRadialGradient(val) {\n    return val.type === 'radial';\n  }\n\n  function isGradient(val) {\n    return val && (val.type === 'linear' || val.type === 'radial');\n  }\n\n  function getIdURL(id) {\n    return \"url(#\" + id + \")\";\n  }\n\n  function getPathPrecision(el) {\n    var scale = el.getGlobalScale();\n    var size = Math.max(scale[0], scale[1]);\n    return Math.max(Math.ceil(Math.log(size) / Math.log(10)), 1);\n  }\n\n  function getSRTTransformString(transform) {\n    var x = transform.x || 0;\n    var y = transform.y || 0;\n    var rotation = (transform.rotation || 0) * RADIAN_TO_DEGREE;\n    var scaleX = retrieve2(transform.scaleX, 1);\n    var scaleY = retrieve2(transform.scaleY, 1);\n    var skewX = transform.skewX || 0;\n    var skewY = transform.skewY || 0;\n    var res = [];\n\n    if (x || y) {\n      res.push(\"translate(\" + x + \"px,\" + y + \"px)\");\n    }\n\n    if (rotation) {\n      res.push(\"rotate(\" + rotation + \")\");\n    }\n\n    if (scaleX !== 1 || scaleY !== 1) {\n      res.push(\"scale(\" + scaleX + \",\" + scaleY + \")\");\n    }\n\n    if (skewX || skewY) {\n      res.push(\"skew(\" + mathRound(skewX * RADIAN_TO_DEGREE) + \"deg, \" + mathRound(skewY * RADIAN_TO_DEGREE) + \"deg)\");\n    }\n\n    return res.join(' ');\n  }\n\n  var encodeBase64 = function () {\n    if (env.hasGlobalWindow && isFunction(window.btoa)) {\n      return function (str) {\n        return window.btoa(unescape(str));\n      };\n    }\n\n    if (typeof Buffer !== 'undefined') {\n      return function (str) {\n        return Buffer.from(str).toString('base64');\n      };\n    }\n\n    return function (str) {\n      {\n        logError('Base64 isn\\'t natively supported in the current environment.');\n      }\n      return null;\n    };\n  }();\n\n  var arraySlice = Array.prototype.slice;\n\n  function interpolateNumber(p0, p1, percent) {\n    return (p1 - p0) * percent + p0;\n  }\n\n  function interpolate1DArray(out, p0, p1, percent) {\n    var len = p0.length;\n\n    for (var i = 0; i < len; i++) {\n      out[i] = interpolateNumber(p0[i], p1[i], percent);\n    }\n\n    return out;\n  }\n\n  function interpolate2DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n\n    for (var i = 0; i < len; i++) {\n      if (!out[i]) {\n        out[i] = [];\n      }\n\n      for (var j = 0; j < len2; j++) {\n        out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\n      }\n    }\n\n    return out;\n  }\n\n  function add1DArray(out, p0, p1, sign) {\n    var len = p0.length;\n\n    for (var i = 0; i < len; i++) {\n      out[i] = p0[i] + p1[i] * sign;\n    }\n\n    return out;\n  }\n\n  function add2DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n\n    for (var i = 0; i < len; i++) {\n      if (!out[i]) {\n        out[i] = [];\n      }\n\n      for (var j = 0; j < len2; j++) {\n        out[i][j] = p0[i][j] + p1[i][j] * sign;\n      }\n    }\n\n    return out;\n  }\n\n  function fillColorStops(val0, val1) {\n    var len0 = val0.length;\n    var len1 = val1.length;\n    var shorterArr = len0 > len1 ? val1 : val0;\n    var shorterLen = Math.min(len0, len1);\n    var last = shorterArr[shorterLen - 1] || {\n      color: [0, 0, 0, 0],\n      offset: 0\n    };\n\n    for (var i = shorterLen; i < Math.max(len0, len1); i++) {\n      shorterArr.push({\n        offset: last.offset,\n        color: last.color.slice()\n      });\n    }\n  }\n\n  function fillArray(val0, val1, arrDim) {\n    var arr0 = val0;\n    var arr1 = val1;\n\n    if (!arr0.push || !arr1.push) {\n      return;\n    }\n\n    var arr0Len = arr0.length;\n    var arr1Len = arr1.length;\n\n    if (arr0Len !== arr1Len) {\n      var isPreviousLarger = arr0Len > arr1Len;\n\n      if (isPreviousLarger) {\n        arr0.length = arr1Len;\n      } else {\n        for (var i = arr0Len; i < arr1Len; i++) {\n          arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\n        }\n      }\n    }\n\n    var len2 = arr0[0] && arr0[0].length;\n\n    for (var i = 0; i < arr0.length; i++) {\n      if (arrDim === 1) {\n        if (isNaN(arr0[i])) {\n          arr0[i] = arr1[i];\n        }\n      } else {\n        for (var j = 0; j < len2; j++) {\n          if (isNaN(arr0[i][j])) {\n            arr0[i][j] = arr1[i][j];\n          }\n        }\n      }\n    }\n  }\n\n  function cloneValue(value) {\n    if (isArrayLike(value)) {\n      var len = value.length;\n\n      if (isArrayLike(value[0])) {\n        var ret = [];\n\n        for (var i = 0; i < len; i++) {\n          ret.push(arraySlice.call(value[i]));\n        }\n\n        return ret;\n      }\n\n      return arraySlice.call(value);\n    }\n\n    return value;\n  }\n\n  function rgba2String(rgba) {\n    rgba[0] = Math.floor(rgba[0]) || 0;\n    rgba[1] = Math.floor(rgba[1]) || 0;\n    rgba[2] = Math.floor(rgba[2]) || 0;\n    rgba[3] = rgba[3] == null ? 1 : rgba[3];\n    return 'rgba(' + rgba.join(',') + ')';\n  }\n\n  function guessArrayDim(value) {\n    return isArrayLike(value && value[0]) ? 2 : 1;\n  }\n\n  var VALUE_TYPE_NUMBER = 0;\n  var VALUE_TYPE_1D_ARRAY = 1;\n  var VALUE_TYPE_2D_ARRAY = 2;\n  var VALUE_TYPE_COLOR = 3;\n  var VALUE_TYPE_LINEAR_GRADIENT = 4;\n  var VALUE_TYPE_RADIAL_GRADIENT = 5;\n  var VALUE_TYPE_UNKOWN = 6;\n\n  function isGradientValueType(valType) {\n    return valType === VALUE_TYPE_LINEAR_GRADIENT || valType === VALUE_TYPE_RADIAL_GRADIENT;\n  }\n\n  function isArrayValueType(valType) {\n    return valType === VALUE_TYPE_1D_ARRAY || valType === VALUE_TYPE_2D_ARRAY;\n  }\n\n  var tmpRgba = [0, 0, 0, 0];\n\n  var Track = function () {\n    function Track(propName) {\n      this.keyframes = [];\n      this.discrete = false;\n      this._invalid = false;\n      this._needsSort = false;\n      this._lastFr = 0;\n      this._lastFrP = 0;\n      this.propName = propName;\n    }\n\n    Track.prototype.isFinished = function () {\n      return this._finished;\n    };\n\n    Track.prototype.setFinished = function () {\n      this._finished = true;\n\n      if (this._additiveTrack) {\n        this._additiveTrack.setFinished();\n      }\n    };\n\n    Track.prototype.needsAnimate = function () {\n      return this.keyframes.length >= 1;\n    };\n\n    Track.prototype.getAdditiveTrack = function () {\n      return this._additiveTrack;\n    };\n\n    Track.prototype.addKeyframe = function (time, rawValue, easing) {\n      this._needsSort = true;\n      var keyframes = this.keyframes;\n      var len = keyframes.length;\n      var discrete = false;\n      var valType = VALUE_TYPE_UNKOWN;\n      var value = rawValue;\n\n      if (isArrayLike(rawValue)) {\n        var arrayDim = guessArrayDim(rawValue);\n        valType = arrayDim;\n\n        if (arrayDim === 1 && !isNumber(rawValue[0]) || arrayDim === 2 && !isNumber(rawValue[0][0])) {\n          discrete = true;\n        }\n      } else {\n        if (isNumber(rawValue) && !eqNaN(rawValue)) {\n          valType = VALUE_TYPE_NUMBER;\n        } else if (isString(rawValue)) {\n          if (!isNaN(+rawValue)) {\n            valType = VALUE_TYPE_NUMBER;\n          } else {\n            var colorArray = parse(rawValue);\n\n            if (colorArray) {\n              value = colorArray;\n              valType = VALUE_TYPE_COLOR;\n            }\n          }\n        } else if (isGradientObject(rawValue)) {\n          var parsedGradient = extend({}, value);\n          parsedGradient.colorStops = map(rawValue.colorStops, function (colorStop) {\n            return {\n              offset: colorStop.offset,\n              color: parse(colorStop.color)\n            };\n          });\n\n          if (isLinearGradient(rawValue)) {\n            valType = VALUE_TYPE_LINEAR_GRADIENT;\n          } else if (isRadialGradient(rawValue)) {\n            valType = VALUE_TYPE_RADIAL_GRADIENT;\n          }\n\n          value = parsedGradient;\n        }\n      }\n\n      if (len === 0) {\n        this.valType = valType;\n      } else if (valType !== this.valType || valType === VALUE_TYPE_UNKOWN) {\n        discrete = true;\n      }\n\n      this.discrete = this.discrete || discrete;\n      var kf = {\n        time: time,\n        value: value,\n        rawValue: rawValue,\n        percent: 0\n      };\n\n      if (easing) {\n        kf.easing = easing;\n        kf.easingFunc = isFunction(easing) ? easing : easingFuncs[easing] || createCubicEasingFunc(easing);\n      }\n\n      keyframes.push(kf);\n      return kf;\n    };\n\n    Track.prototype.prepare = function (maxTime, additiveTrack) {\n      var kfs = this.keyframes;\n\n      if (this._needsSort) {\n        kfs.sort(function (a, b) {\n          return a.time - b.time;\n        });\n      }\n\n      var valType = this.valType;\n      var kfsLen = kfs.length;\n      var lastKf = kfs[kfsLen - 1];\n      var isDiscrete = this.discrete;\n      var isArr = isArrayValueType(valType);\n      var isGradient$$1 = isGradientValueType(valType);\n\n      for (var i = 0; i < kfsLen; i++) {\n        var kf = kfs[i];\n        var value = kf.value;\n        var lastValue = lastKf.value;\n        kf.percent = kf.time / maxTime;\n\n        if (!isDiscrete) {\n          if (isArr && i !== kfsLen - 1) {\n            fillArray(value, lastValue, valType);\n          } else if (isGradient$$1) {\n            fillColorStops(value.colorStops, lastValue.colorStops);\n          }\n        }\n      }\n\n      if (!isDiscrete && valType !== VALUE_TYPE_RADIAL_GRADIENT && additiveTrack && this.needsAnimate() && additiveTrack.needsAnimate() && valType === additiveTrack.valType && !additiveTrack._finished) {\n        this._additiveTrack = additiveTrack;\n        var startValue = kfs[0].value;\n\n        for (var i = 0; i < kfsLen; i++) {\n          if (valType === VALUE_TYPE_NUMBER) {\n            kfs[i].additiveValue = kfs[i].value - startValue;\n          } else if (valType === VALUE_TYPE_COLOR) {\n            kfs[i].additiveValue = add1DArray([], kfs[i].value, startValue, -1);\n          } else if (isArrayValueType(valType)) {\n            kfs[i].additiveValue = valType === VALUE_TYPE_1D_ARRAY ? add1DArray([], kfs[i].value, startValue, -1) : add2DArray([], kfs[i].value, startValue, -1);\n          }\n        }\n      }\n    };\n\n    Track.prototype.step = function (target, percent) {\n      if (this._finished) {\n        return;\n      }\n\n      if (this._additiveTrack && this._additiveTrack._finished) {\n        this._additiveTrack = null;\n      }\n\n      var isAdditive = this._additiveTrack != null;\n      var valueKey = isAdditive ? 'additiveValue' : 'value';\n      var valType = this.valType;\n      var keyframes = this.keyframes;\n      var kfsNum = keyframes.length;\n      var propName = this.propName;\n      var isValueColor = valType === VALUE_TYPE_COLOR;\n      var frameIdx;\n      var lastFrame = this._lastFr;\n      var mathMin = Math.min;\n      var frame;\n      var nextFrame;\n\n      if (kfsNum === 1) {\n        frame = nextFrame = keyframes[0];\n      } else {\n        if (percent < 0) {\n          frameIdx = 0;\n        } else if (percent < this._lastFrP) {\n          var start = mathMin(lastFrame + 1, kfsNum - 1);\n\n          for (frameIdx = start; frameIdx >= 0; frameIdx--) {\n            if (keyframes[frameIdx].percent <= percent) {\n              break;\n            }\n          }\n\n          frameIdx = mathMin(frameIdx, kfsNum - 2);\n        } else {\n          for (frameIdx = lastFrame; frameIdx < kfsNum; frameIdx++) {\n            if (keyframes[frameIdx].percent > percent) {\n              break;\n            }\n          }\n\n          frameIdx = mathMin(frameIdx - 1, kfsNum - 2);\n        }\n\n        nextFrame = keyframes[frameIdx + 1];\n        frame = keyframes[frameIdx];\n      }\n\n      if (!(frame && nextFrame)) {\n        return;\n      }\n\n      this._lastFr = frameIdx;\n      this._lastFrP = percent;\n      var interval = nextFrame.percent - frame.percent;\n      var w = interval === 0 ? 1 : mathMin((percent - frame.percent) / interval, 1);\n\n      if (nextFrame.easingFunc) {\n        w = nextFrame.easingFunc(w);\n      }\n\n      var targetArr = isAdditive ? this._additiveValue : isValueColor ? tmpRgba : target[propName];\n\n      if ((isArrayValueType(valType) || isValueColor) && !targetArr) {\n        targetArr = this._additiveValue = [];\n      }\n\n      if (this.discrete) {\n        target[propName] = w < 1 ? frame.rawValue : nextFrame.rawValue;\n      } else if (isArrayValueType(valType)) {\n        valType === VALUE_TYPE_1D_ARRAY ? interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w) : interpolate2DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n      } else if (isGradientValueType(valType)) {\n        var val = frame[valueKey];\n        var nextVal_1 = nextFrame[valueKey];\n        var isLinearGradient_1 = valType === VALUE_TYPE_LINEAR_GRADIENT;\n        target[propName] = {\n          type: isLinearGradient_1 ? 'linear' : 'radial',\n          x: interpolateNumber(val.x, nextVal_1.x, w),\n          y: interpolateNumber(val.y, nextVal_1.y, w),\n          colorStops: map(val.colorStops, function (colorStop, idx) {\n            var nextColorStop = nextVal_1.colorStops[idx];\n            return {\n              offset: interpolateNumber(colorStop.offset, nextColorStop.offset, w),\n              color: rgba2String(interpolate1DArray([], colorStop.color, nextColorStop.color, w))\n            };\n          }),\n          global: nextVal_1.global\n        };\n\n        if (isLinearGradient_1) {\n          target[propName].x2 = interpolateNumber(val.x2, nextVal_1.x2, w);\n          target[propName].y2 = interpolateNumber(val.y2, nextVal_1.y2, w);\n        } else {\n          target[propName].r = interpolateNumber(val.r, nextVal_1.r, w);\n        }\n      } else if (isValueColor) {\n        interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n\n        if (!isAdditive) {\n          target[propName] = rgba2String(targetArr);\n        }\n      } else {\n        var value = interpolateNumber(frame[valueKey], nextFrame[valueKey], w);\n\n        if (isAdditive) {\n          this._additiveValue = value;\n        } else {\n          target[propName] = value;\n        }\n      }\n\n      if (isAdditive) {\n        this._addToTarget(target);\n      }\n    };\n\n    Track.prototype._addToTarget = function (target) {\n      var valType = this.valType;\n      var propName = this.propName;\n      var additiveValue = this._additiveValue;\n\n      if (valType === VALUE_TYPE_NUMBER) {\n        target[propName] = target[propName] + additiveValue;\n      } else if (valType === VALUE_TYPE_COLOR) {\n        parse(target[propName], tmpRgba);\n        add1DArray(tmpRgba, tmpRgba, additiveValue, 1);\n        target[propName] = rgba2String(tmpRgba);\n      } else if (valType === VALUE_TYPE_1D_ARRAY) {\n        add1DArray(target[propName], target[propName], additiveValue, 1);\n      } else if (valType === VALUE_TYPE_2D_ARRAY) {\n        add2DArray(target[propName], target[propName], additiveValue, 1);\n      }\n    };\n\n    return Track;\n  }();\n\n  var Animator = function () {\n    function Animator(target, loop, allowDiscreteAnimation, additiveTo) {\n      this._tracks = {};\n      this._trackKeys = [];\n      this._maxTime = 0;\n      this._started = 0;\n      this._clip = null;\n      this._target = target;\n      this._loop = loop;\n\n      if (loop && additiveTo) {\n        logError('Can\\' use additive animation on looped animation.');\n        return;\n      }\n\n      this._additiveAnimators = additiveTo;\n      this._allowDiscrete = allowDiscreteAnimation;\n    }\n\n    Animator.prototype.getMaxTime = function () {\n      return this._maxTime;\n    };\n\n    Animator.prototype.getDelay = function () {\n      return this._delay;\n    };\n\n    Animator.prototype.getLoop = function () {\n      return this._loop;\n    };\n\n    Animator.prototype.getTarget = function () {\n      return this._target;\n    };\n\n    Animator.prototype.changeTarget = function (target) {\n      this._target = target;\n    };\n\n    Animator.prototype.when = function (time, props, easing) {\n      return this.whenWithKeys(time, props, keys(props), easing);\n    };\n\n    Animator.prototype.whenWithKeys = function (time, props, propNames, easing) {\n      var tracks = this._tracks;\n\n      for (var i = 0; i < propNames.length; i++) {\n        var propName = propNames[i];\n        var track = tracks[propName];\n\n        if (!track) {\n          track = tracks[propName] = new Track(propName);\n          var initialValue = void 0;\n\n          var additiveTrack = this._getAdditiveTrack(propName);\n\n          if (additiveTrack) {\n            var addtiveTrackKfs = additiveTrack.keyframes;\n            var lastFinalKf = addtiveTrackKfs[addtiveTrackKfs.length - 1];\n            initialValue = lastFinalKf && lastFinalKf.value;\n\n            if (additiveTrack.valType === VALUE_TYPE_COLOR && initialValue) {\n              initialValue = rgba2String(initialValue);\n            }\n          } else {\n            initialValue = this._target[propName];\n          }\n\n          if (initialValue == null) {\n            continue;\n          }\n\n          if (time > 0) {\n            track.addKeyframe(0, cloneValue(initialValue), easing);\n          }\n\n          this._trackKeys.push(propName);\n        }\n\n        track.addKeyframe(time, cloneValue(props[propName]), easing);\n      }\n\n      this._maxTime = Math.max(this._maxTime, time);\n      return this;\n    };\n\n    Animator.prototype.pause = function () {\n      this._clip.pause();\n\n      this._paused = true;\n    };\n\n    Animator.prototype.resume = function () {\n      this._clip.resume();\n\n      this._paused = false;\n    };\n\n    Animator.prototype.isPaused = function () {\n      return !!this._paused;\n    };\n\n    Animator.prototype.duration = function (duration) {\n      this._maxTime = duration;\n      this._force = true;\n      return this;\n    };\n\n    Animator.prototype._doneCallback = function () {\n      this._setTracksFinished();\n\n      this._clip = null;\n      var doneList = this._doneCbs;\n\n      if (doneList) {\n        var len = doneList.length;\n\n        for (var i = 0; i < len; i++) {\n          doneList[i].call(this);\n        }\n      }\n    };\n\n    Animator.prototype._abortedCallback = function () {\n      this._setTracksFinished();\n\n      var animation = this.animation;\n      var abortedList = this._abortedCbs;\n\n      if (animation) {\n        animation.removeClip(this._clip);\n      }\n\n      this._clip = null;\n\n      if (abortedList) {\n        for (var i = 0; i < abortedList.length; i++) {\n          abortedList[i].call(this);\n        }\n      }\n    };\n\n    Animator.prototype._setTracksFinished = function () {\n      var tracks = this._tracks;\n      var tracksKeys = this._trackKeys;\n\n      for (var i = 0; i < tracksKeys.length; i++) {\n        tracks[tracksKeys[i]].setFinished();\n      }\n    };\n\n    Animator.prototype._getAdditiveTrack = function (trackName) {\n      var additiveTrack;\n      var additiveAnimators = this._additiveAnimators;\n\n      if (additiveAnimators) {\n        for (var i = 0; i < additiveAnimators.length; i++) {\n          var track = additiveAnimators[i].getTrack(trackName);\n\n          if (track) {\n            additiveTrack = track;\n          }\n        }\n      }\n\n      return additiveTrack;\n    };\n\n    Animator.prototype.start = function (easing) {\n      if (this._started > 0) {\n        return;\n      }\n\n      this._started = 1;\n      var self = this;\n      var tracks = [];\n      var maxTime = this._maxTime || 0;\n\n      for (var i = 0; i < this._trackKeys.length; i++) {\n        var propName = this._trackKeys[i];\n        var track = this._tracks[propName];\n\n        var additiveTrack = this._getAdditiveTrack(propName);\n\n        var kfs = track.keyframes;\n        var kfsNum = kfs.length;\n        track.prepare(maxTime, additiveTrack);\n\n        if (track.needsAnimate()) {\n          if (!this._allowDiscrete && track.discrete) {\n            var lastKf = kfs[kfsNum - 1];\n\n            if (lastKf) {\n              self._target[track.propName] = lastKf.rawValue;\n            }\n\n            track.setFinished();\n          } else {\n            tracks.push(track);\n          }\n        }\n      }\n\n      if (tracks.length || this._force) {\n        var clip = new Clip({\n          life: maxTime,\n          loop: this._loop,\n          delay: this._delay || 0,\n          onframe: function (percent) {\n            self._started = 2;\n            var additiveAnimators = self._additiveAnimators;\n\n            if (additiveAnimators) {\n              var stillHasAdditiveAnimator = false;\n\n              for (var i = 0; i < additiveAnimators.length; i++) {\n                if (additiveAnimators[i]._clip) {\n                  stillHasAdditiveAnimator = true;\n                  break;\n                }\n              }\n\n              if (!stillHasAdditiveAnimator) {\n                self._additiveAnimators = null;\n              }\n            }\n\n            for (var i = 0; i < tracks.length; i++) {\n              tracks[i].step(self._target, percent);\n            }\n\n            var onframeList = self._onframeCbs;\n\n            if (onframeList) {\n              for (var i = 0; i < onframeList.length; i++) {\n                onframeList[i](self._target, percent);\n              }\n            }\n          },\n          ondestroy: function () {\n            self._doneCallback();\n          }\n        });\n        this._clip = clip;\n\n        if (this.animation) {\n          this.animation.addClip(clip);\n        }\n\n        if (easing) {\n          clip.setEasing(easing);\n        }\n      } else {\n        this._doneCallback();\n      }\n\n      return this;\n    };\n\n    Animator.prototype.stop = function (forwardToLast) {\n      if (!this._clip) {\n        return;\n      }\n\n      var clip = this._clip;\n\n      if (forwardToLast) {\n        clip.onframe(1);\n      }\n\n      this._abortedCallback();\n    };\n\n    Animator.prototype.delay = function (time) {\n      this._delay = time;\n      return this;\n    };\n\n    Animator.prototype.during = function (cb) {\n      if (cb) {\n        if (!this._onframeCbs) {\n          this._onframeCbs = [];\n        }\n\n        this._onframeCbs.push(cb);\n      }\n\n      return this;\n    };\n\n    Animator.prototype.done = function (cb) {\n      if (cb) {\n        if (!this._doneCbs) {\n          this._doneCbs = [];\n        }\n\n        this._doneCbs.push(cb);\n      }\n\n      return this;\n    };\n\n    Animator.prototype.aborted = function (cb) {\n      if (cb) {\n        if (!this._abortedCbs) {\n          this._abortedCbs = [];\n        }\n\n        this._abortedCbs.push(cb);\n      }\n\n      return this;\n    };\n\n    Animator.prototype.getClip = function () {\n      return this._clip;\n    };\n\n    Animator.prototype.getTrack = function (propName) {\n      return this._tracks[propName];\n    };\n\n    Animator.prototype.getTracks = function () {\n      var _this = this;\n\n      return map(this._trackKeys, function (key) {\n        return _this._tracks[key];\n      });\n    };\n\n    Animator.prototype.stopTracks = function (propNames, forwardToLast) {\n      if (!propNames.length || !this._clip) {\n        return true;\n      }\n\n      var tracks = this._tracks;\n      var tracksKeys = this._trackKeys;\n\n      for (var i = 0; i < propNames.length; i++) {\n        var track = tracks[propNames[i]];\n\n        if (track && !track.isFinished()) {\n          if (forwardToLast) {\n            track.step(this._target, 1);\n          } else if (this._started === 1) {\n            track.step(this._target, 0);\n          }\n\n          track.setFinished();\n        }\n      }\n\n      var allAborted = true;\n\n      for (var i = 0; i < tracksKeys.length; i++) {\n        if (!tracks[tracksKeys[i]].isFinished()) {\n          allAborted = false;\n          break;\n        }\n      }\n\n      if (allAborted) {\n        this._abortedCallback();\n      }\n\n      return allAborted;\n    };\n\n    Animator.prototype.saveTo = function (target, trackKeys, firstOrLast) {\n      if (!target) {\n        return;\n      }\n\n      trackKeys = trackKeys || this._trackKeys;\n\n      for (var i = 0; i < trackKeys.length; i++) {\n        var propName = trackKeys[i];\n        var track = this._tracks[propName];\n\n        if (!track || track.isFinished()) {\n          continue;\n        }\n\n        var kfs = track.keyframes;\n        var kf = kfs[firstOrLast ? 0 : kfs.length - 1];\n\n        if (kf) {\n          target[propName] = cloneValue(kf.rawValue);\n        }\n      }\n    };\n\n    Animator.prototype.__changeFinalValue = function (finalProps, trackKeys) {\n      trackKeys = trackKeys || keys(finalProps);\n\n      for (var i = 0; i < trackKeys.length; i++) {\n        var propName = trackKeys[i];\n        var track = this._tracks[propName];\n\n        if (!track) {\n          continue;\n        }\n\n        var kfs = track.keyframes;\n\n        if (kfs.length > 1) {\n          var lastKf = kfs.pop();\n          track.addKeyframe(lastKf.time, finalProps[propName]);\n          track.prepare(this._maxTime, track.getAdditiveTrack());\n        }\n      }\n    };\n\n    return Animator;\n  }();\n\n  function getTime() {\n    return new Date().getTime();\n  }\n\n  var Animation = function (_super) {\n    __extends(Animation, _super);\n\n    function Animation(opts) {\n      var _this = _super.call(this) || this;\n\n      _this._running = false;\n      _this._time = 0;\n      _this._pausedTime = 0;\n      _this._pauseStart = 0;\n      _this._paused = false;\n      opts = opts || {};\n      _this.stage = opts.stage || {};\n      return _this;\n    }\n\n    Animation.prototype.addClip = function (clip) {\n      if (clip.animation) {\n        this.removeClip(clip);\n      }\n\n      if (!this._head) {\n        this._head = this._tail = clip;\n      } else {\n        this._tail.next = clip;\n        clip.prev = this._tail;\n        clip.next = null;\n        this._tail = clip;\n      }\n\n      clip.animation = this;\n    };\n\n    Animation.prototype.addAnimator = function (animator) {\n      animator.animation = this;\n      var clip = animator.getClip();\n\n      if (clip) {\n        this.addClip(clip);\n      }\n    };\n\n    Animation.prototype.removeClip = function (clip) {\n      if (!clip.animation) {\n        return;\n      }\n\n      var prev = clip.prev;\n      var next = clip.next;\n\n      if (prev) {\n        prev.next = next;\n      } else {\n        this._head = next;\n      }\n\n      if (next) {\n        next.prev = prev;\n      } else {\n        this._tail = prev;\n      }\n\n      clip.next = clip.prev = clip.animation = null;\n    };\n\n    Animation.prototype.removeAnimator = function (animator) {\n      var clip = animator.getClip();\n\n      if (clip) {\n        this.removeClip(clip);\n      }\n\n      animator.animation = null;\n    };\n\n    Animation.prototype.update = function (notTriggerFrameAndStageUpdate) {\n      var time = getTime() - this._pausedTime;\n\n      var delta = time - this._time;\n      var clip = this._head;\n\n      while (clip) {\n        var nextClip = clip.next;\n        var finished = clip.step(time, delta);\n\n        if (finished) {\n          clip.ondestroy();\n          this.removeClip(clip);\n          clip = nextClip;\n        } else {\n          clip = nextClip;\n        }\n      }\n\n      this._time = time;\n\n      if (!notTriggerFrameAndStageUpdate) {\n        this.trigger('frame', delta);\n        this.stage.update && this.stage.update();\n      }\n    };\n\n    Animation.prototype._startLoop = function () {\n      var self = this;\n      this._running = true;\n\n      function step() {\n        if (self._running) {\n          requestAnimationFrame$1(step);\n          !self._paused && self.update();\n        }\n      }\n\n      requestAnimationFrame$1(step);\n    };\n\n    Animation.prototype.start = function () {\n      if (this._running) {\n        return;\n      }\n\n      this._time = getTime();\n      this._pausedTime = 0;\n\n      this._startLoop();\n    };\n\n    Animation.prototype.stop = function () {\n      this._running = false;\n    };\n\n    Animation.prototype.pause = function () {\n      if (!this._paused) {\n        this._pauseStart = getTime();\n        this._paused = true;\n      }\n    };\n\n    Animation.prototype.resume = function () {\n      if (this._paused) {\n        this._pausedTime += getTime() - this._pauseStart;\n        this._paused = false;\n      }\n    };\n\n    Animation.prototype.clear = function () {\n      var clip = this._head;\n\n      while (clip) {\n        var nextClip = clip.next;\n        clip.prev = clip.next = clip.animation = null;\n        clip = nextClip;\n      }\n\n      this._head = this._tail = null;\n    };\n\n    Animation.prototype.isFinished = function () {\n      return this._head == null;\n    };\n\n    Animation.prototype.animate = function (target, options) {\n      options = options || {};\n      this.start();\n      var animator = new Animator(target, options.loop);\n      this.addAnimator(animator);\n      return animator;\n    };\n\n    return Animation;\n  }(Eventful);\n\n  var TOUCH_CLICK_DELAY = 300;\n  var globalEventSupported = env.domSupported;\n\n  var localNativeListenerNames = function () {\n    var mouseHandlerNames = ['click', 'dblclick', 'mousewheel', 'wheel', 'mouseout', 'mouseup', 'mousedown', 'mousemove', 'contextmenu'];\n    var touchHandlerNames = ['touchstart', 'touchend', 'touchmove'];\n    var pointerEventNameMap = {\n      pointerdown: 1,\n      pointerup: 1,\n      pointermove: 1,\n      pointerout: 1\n    };\n    var pointerHandlerNames = map(mouseHandlerNames, function (name) {\n      var nm = name.replace('mouse', 'pointer');\n      return pointerEventNameMap.hasOwnProperty(nm) ? nm : name;\n    });\n    return {\n      mouse: mouseHandlerNames,\n      touch: touchHandlerNames,\n      pointer: pointerHandlerNames\n    };\n  }();\n\n  var globalNativeListenerNames = {\n    mouse: ['mousemove', 'mouseup'],\n    pointer: ['pointermove', 'pointerup']\n  };\n  var wheelEventSupported = false;\n\n  function isPointerFromTouch(event) {\n    var pointerType = event.pointerType;\n    return pointerType === 'pen' || pointerType === 'touch';\n  }\n\n  function setTouchTimer(scope) {\n    scope.touching = true;\n\n    if (scope.touchTimer != null) {\n      clearTimeout(scope.touchTimer);\n      scope.touchTimer = null;\n    }\n\n    scope.touchTimer = setTimeout(function () {\n      scope.touching = false;\n      scope.touchTimer = null;\n    }, 700);\n  }\n\n  function markTouch(event) {\n    event && (event.zrByTouch = true);\n  }\n\n  function normalizeGlobalEvent(instance, event) {\n    return normalizeEvent(instance.dom, new FakeGlobalEvent(instance, event), true);\n  }\n\n  function isLocalEl(instance, el) {\n    var elTmp = el;\n    var isLocal = false;\n\n    while (elTmp && elTmp.nodeType !== 9 && !(isLocal = elTmp.domBelongToZr || elTmp !== el && elTmp === instance.painterRoot)) {\n      elTmp = elTmp.parentNode;\n    }\n\n    return isLocal;\n  }\n\n  var FakeGlobalEvent = function () {\n    function FakeGlobalEvent(instance, event) {\n      this.stopPropagation = noop;\n      this.stopImmediatePropagation = noop;\n      this.preventDefault = noop;\n      this.type = event.type;\n      this.target = this.currentTarget = instance.dom;\n      this.pointerType = event.pointerType;\n      this.clientX = event.clientX;\n      this.clientY = event.clientY;\n    }\n\n    return FakeGlobalEvent;\n  }();\n\n  var localDOMHandlers = {\n    mousedown: function (event) {\n      event = normalizeEvent(this.dom, event);\n      this.__mayPointerCapture = [event.zrX, event.zrY];\n      this.trigger('mousedown', event);\n    },\n    mousemove: function (event) {\n      event = normalizeEvent(this.dom, event);\n      var downPoint = this.__mayPointerCapture;\n\n      if (downPoint && (event.zrX !== downPoint[0] || event.zrY !== downPoint[1])) {\n        this.__togglePointerCapture(true);\n      }\n\n      this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n      event = normalizeEvent(this.dom, event);\n\n      this.__togglePointerCapture(false);\n\n      this.trigger('mouseup', event);\n    },\n    mouseout: function (event) {\n      event = normalizeEvent(this.dom, event);\n      var element = event.toElement || event.relatedTarget;\n\n      if (!isLocalEl(this, element)) {\n        if (this.__pointerCapturing) {\n          event.zrEventControl = 'no_globalout';\n        }\n\n        this.trigger('mouseout', event);\n      }\n    },\n    wheel: function (event) {\n      wheelEventSupported = true;\n      event = normalizeEvent(this.dom, event);\n      this.trigger('mousewheel', event);\n    },\n    mousewheel: function (event) {\n      if (wheelEventSupported) {\n        return;\n      }\n\n      event = normalizeEvent(this.dom, event);\n      this.trigger('mousewheel', event);\n    },\n    touchstart: function (event) {\n      event = normalizeEvent(this.dom, event);\n      markTouch(event);\n      this.__lastTouchMoment = new Date();\n      this.handler.processGesture(event, 'start');\n      localDOMHandlers.mousemove.call(this, event);\n      localDOMHandlers.mousedown.call(this, event);\n    },\n    touchmove: function (event) {\n      event = normalizeEvent(this.dom, event);\n      markTouch(event);\n      this.handler.processGesture(event, 'change');\n      localDOMHandlers.mousemove.call(this, event);\n    },\n    touchend: function (event) {\n      event = normalizeEvent(this.dom, event);\n      markTouch(event);\n      this.handler.processGesture(event, 'end');\n      localDOMHandlers.mouseup.call(this, event);\n\n      if (+new Date() - +this.__lastTouchMoment < TOUCH_CLICK_DELAY) {\n        localDOMHandlers.click.call(this, event);\n      }\n    },\n    pointerdown: function (event) {\n      localDOMHandlers.mousedown.call(this, event);\n    },\n    pointermove: function (event) {\n      if (!isPointerFromTouch(event)) {\n        localDOMHandlers.mousemove.call(this, event);\n      }\n    },\n    pointerup: function (event) {\n      localDOMHandlers.mouseup.call(this, event);\n    },\n    pointerout: function (event) {\n      if (!isPointerFromTouch(event)) {\n        localDOMHandlers.mouseout.call(this, event);\n      }\n    }\n  };\n  each(['click', 'dblclick', 'contextmenu'], function (name) {\n    localDOMHandlers[name] = function (event) {\n      event = normalizeEvent(this.dom, event);\n      this.trigger(name, event);\n    };\n  });\n  var globalDOMHandlers = {\n    pointermove: function (event) {\n      if (!isPointerFromTouch(event)) {\n        globalDOMHandlers.mousemove.call(this, event);\n      }\n    },\n    pointerup: function (event) {\n      globalDOMHandlers.mouseup.call(this, event);\n    },\n    mousemove: function (event) {\n      this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n      var pointerCaptureReleasing = this.__pointerCapturing;\n\n      this.__togglePointerCapture(false);\n\n      this.trigger('mouseup', event);\n\n      if (pointerCaptureReleasing) {\n        event.zrEventControl = 'only_globalout';\n        this.trigger('mouseout', event);\n      }\n    }\n  };\n\n  function mountLocalDOMEventListeners(instance, scope) {\n    var domHandlers = scope.domHandlers;\n\n    if (env.pointerEventsSupported) {\n      each(localNativeListenerNames.pointer, function (nativeEventName) {\n        mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n          domHandlers[nativeEventName].call(instance, event);\n        });\n      });\n    } else {\n      if (env.touchEventsSupported) {\n        each(localNativeListenerNames.touch, function (nativeEventName) {\n          mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n            domHandlers[nativeEventName].call(instance, event);\n            setTouchTimer(scope);\n          });\n        });\n      }\n\n      each(localNativeListenerNames.mouse, function (nativeEventName) {\n        mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n          event = getNativeEvent(event);\n\n          if (!scope.touching) {\n            domHandlers[nativeEventName].call(instance, event);\n          }\n        });\n      });\n    }\n  }\n\n  function mountGlobalDOMEventListeners(instance, scope) {\n    if (env.pointerEventsSupported) {\n      each(globalNativeListenerNames.pointer, mount);\n    } else if (!env.touchEventsSupported) {\n      each(globalNativeListenerNames.mouse, mount);\n    }\n\n    function mount(nativeEventName) {\n      function nativeEventListener(event) {\n        event = getNativeEvent(event);\n\n        if (!isLocalEl(instance, event.target)) {\n          event = normalizeGlobalEvent(instance, event);\n          scope.domHandlers[nativeEventName].call(instance, event);\n        }\n      }\n\n      mountSingleDOMEventListener(scope, nativeEventName, nativeEventListener, {\n        capture: true\n      });\n    }\n  }\n\n  function mountSingleDOMEventListener(scope, nativeEventName, listener, opt) {\n    scope.mounted[nativeEventName] = listener;\n    scope.listenerOpts[nativeEventName] = opt;\n    addEventListener(scope.domTarget, nativeEventName, listener, opt);\n  }\n\n  function unmountDOMEventListeners(scope) {\n    var mounted = scope.mounted;\n\n    for (var nativeEventName in mounted) {\n      if (mounted.hasOwnProperty(nativeEventName)) {\n        removeEventListener(scope.domTarget, nativeEventName, mounted[nativeEventName], scope.listenerOpts[nativeEventName]);\n      }\n    }\n\n    scope.mounted = {};\n  }\n\n  var DOMHandlerScope = function () {\n    function DOMHandlerScope(domTarget, domHandlers) {\n      this.mounted = {};\n      this.listenerOpts = {};\n      this.touching = false;\n      this.domTarget = domTarget;\n      this.domHandlers = domHandlers;\n    }\n\n    return DOMHandlerScope;\n  }();\n\n  var HandlerDomProxy = function (_super) {\n    __extends(HandlerDomProxy, _super);\n\n    function HandlerDomProxy(dom, painterRoot) {\n      var _this = _super.call(this) || this;\n\n      _this.__pointerCapturing = false;\n      _this.dom = dom;\n      _this.painterRoot = painterRoot;\n      _this._localHandlerScope = new DOMHandlerScope(dom, localDOMHandlers);\n\n      if (globalEventSupported) {\n        _this._globalHandlerScope = new DOMHandlerScope(document, globalDOMHandlers);\n      }\n\n      mountLocalDOMEventListeners(_this, _this._localHandlerScope);\n      return _this;\n    }\n\n    HandlerDomProxy.prototype.dispose = function () {\n      unmountDOMEventListeners(this._localHandlerScope);\n\n      if (globalEventSupported) {\n        unmountDOMEventListeners(this._globalHandlerScope);\n      }\n    };\n\n    HandlerDomProxy.prototype.setCursor = function (cursorStyle) {\n      this.dom.style && (this.dom.style.cursor = cursorStyle || 'default');\n    };\n\n    HandlerDomProxy.prototype.__togglePointerCapture = function (isPointerCapturing) {\n      this.__mayPointerCapture = null;\n\n      if (globalEventSupported && +this.__pointerCapturing ^ +isPointerCapturing) {\n        this.__pointerCapturing = isPointerCapturing;\n        var globalHandlerScope = this._globalHandlerScope;\n        isPointerCapturing ? mountGlobalDOMEventListeners(this, globalHandlerScope) : unmountDOMEventListeners(globalHandlerScope);\n      }\n    };\n\n    return HandlerDomProxy;\n  }(Eventful);\n\n  var dpr = 1;\n\n  if (env.hasGlobalWindow) {\n    dpr = Math.max(window.devicePixelRatio || window.screen && window.screen.deviceXDPI / window.screen.logicalXDPI || 1, 1);\n  }\n\n  var devicePixelRatio = dpr;\n  var DARK_MODE_THRESHOLD = 0.4;\n  var DARK_LABEL_COLOR = '#333';\n  var LIGHT_LABEL_COLOR = '#ccc';\n  var LIGHTER_LABEL_COLOR = '#eee';\n\n  function create$1() {\n    return [1, 0, 0, 1, 0, 0];\n  }\n\n  function identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n  }\n\n  function copy$1(out, m) {\n    out[0] = m[0];\n    out[1] = m[1];\n    out[2] = m[2];\n    out[3] = m[3];\n    out[4] = m[4];\n    out[5] = m[5];\n    return out;\n  }\n\n  function mul$1(out, m1, m2) {\n    var out0 = m1[0] * m2[0] + m1[2] * m2[1];\n    var out1 = m1[1] * m2[0] + m1[3] * m2[1];\n    var out2 = m1[0] * m2[2] + m1[2] * m2[3];\n    var out3 = m1[1] * m2[2] + m1[3] * m2[3];\n    var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\n    var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n    out[0] = out0;\n    out[1] = out1;\n    out[2] = out2;\n    out[3] = out3;\n    out[4] = out4;\n    out[5] = out5;\n    return out;\n  }\n\n  function translate(out, a, v) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4] + v[0];\n    out[5] = a[5] + v[1];\n    return out;\n  }\n\n  function rotate(out, a, rad) {\n    var aa = a[0];\n    var ac = a[2];\n    var atx = a[4];\n    var ab = a[1];\n    var ad = a[3];\n    var aty = a[5];\n    var st = Math.sin(rad);\n    var ct = Math.cos(rad);\n    out[0] = aa * ct + ab * st;\n    out[1] = -aa * st + ab * ct;\n    out[2] = ac * ct + ad * st;\n    out[3] = -ac * st + ct * ad;\n    out[4] = ct * atx + st * aty;\n    out[5] = ct * aty - st * atx;\n    return out;\n  }\n\n  function scale$1(out, a, v) {\n    var vx = v[0];\n    var vy = v[1];\n    out[0] = a[0] * vx;\n    out[1] = a[1] * vy;\n    out[2] = a[2] * vx;\n    out[3] = a[3] * vy;\n    out[4] = a[4] * vx;\n    out[5] = a[5] * vy;\n    return out;\n  }\n\n  function invert(out, a) {\n    var aa = a[0];\n    var ac = a[2];\n    var atx = a[4];\n    var ab = a[1];\n    var ad = a[3];\n    var aty = a[5];\n    var det = aa * ad - ab * ac;\n\n    if (!det) {\n      return null;\n    }\n\n    det = 1.0 / det;\n    out[0] = ad * det;\n    out[1] = -ab * det;\n    out[2] = -ac * det;\n    out[3] = aa * det;\n    out[4] = (ac * aty - ad * atx) * det;\n    out[5] = (ab * atx - aa * aty) * det;\n    return out;\n  }\n\n  function clone$2(a) {\n    var b = create$1();\n    copy$1(b, a);\n    return b;\n  }\n\n  var matrix = (Object.freeze || Object)({\n    create: create$1,\n    identity: identity,\n    copy: copy$1,\n    mul: mul$1,\n    translate: translate,\n    rotate: rotate,\n    scale: scale$1,\n    invert: invert,\n    clone: clone$2\n  });\n  var mIdentity = identity;\n  var EPSILON$2 = 5e-5;\n\n  function isNotAroundZero$1(val) {\n    return val > EPSILON$2 || val < -EPSILON$2;\n  }\n\n  var scaleTmp = [];\n  var tmpTransform = [];\n  var originTransform = create$1();\n  var abs = Math.abs;\n\n  var Transformable = function () {\n    function Transformable() {}\n\n    Transformable.prototype.getLocalTransform = function (m) {\n      return Transformable.getLocalTransform(this, m);\n    };\n\n    Transformable.prototype.setPosition = function (arr) {\n      this.x = arr[0];\n      this.y = arr[1];\n    };\n\n    Transformable.prototype.setScale = function (arr) {\n      this.scaleX = arr[0];\n      this.scaleY = arr[1];\n    };\n\n    Transformable.prototype.setSkew = function (arr) {\n      this.skewX = arr[0];\n      this.skewY = arr[1];\n    };\n\n    Transformable.prototype.setOrigin = function (arr) {\n      this.originX = arr[0];\n      this.originY = arr[1];\n    };\n\n    Transformable.prototype.needLocalTransform = function () {\n      return isNotAroundZero$1(this.rotation) || isNotAroundZero$1(this.x) || isNotAroundZero$1(this.y) || isNotAroundZero$1(this.scaleX - 1) || isNotAroundZero$1(this.scaleY - 1) || isNotAroundZero$1(this.skewX) || isNotAroundZero$1(this.skewY);\n    };\n\n    Transformable.prototype.updateTransform = function () {\n      var parentTransform = this.parent && this.parent.transform;\n      var needLocalTransform = this.needLocalTransform();\n      var m = this.transform;\n\n      if (!(needLocalTransform || parentTransform)) {\n        m && mIdentity(m);\n        return;\n      }\n\n      m = m || create$1();\n\n      if (needLocalTransform) {\n        this.getLocalTransform(m);\n      } else {\n        mIdentity(m);\n      }\n\n      if (parentTransform) {\n        if (needLocalTransform) {\n          mul$1(m, parentTransform, m);\n        } else {\n          copy$1(m, parentTransform);\n        }\n      }\n\n      this.transform = m;\n\n      this._resolveGlobalScaleRatio(m);\n    };\n\n    Transformable.prototype._resolveGlobalScaleRatio = function (m) {\n      var globalScaleRatio = this.globalScaleRatio;\n\n      if (globalScaleRatio != null && globalScaleRatio !== 1) {\n        this.getGlobalScale(scaleTmp);\n        var relX = scaleTmp[0] < 0 ? -1 : 1;\n        var relY = scaleTmp[1] < 0 ? -1 : 1;\n        var sx = ((scaleTmp[0] - relX) * globalScaleRatio + relX) / scaleTmp[0] || 0;\n        var sy = ((scaleTmp[1] - relY) * globalScaleRatio + relY) / scaleTmp[1] || 0;\n        m[0] *= sx;\n        m[1] *= sx;\n        m[2] *= sy;\n        m[3] *= sy;\n      }\n\n      this.invTransform = this.invTransform || create$1();\n      invert(this.invTransform, m);\n    };\n\n    Transformable.prototype.getComputedTransform = function () {\n      var transformNode = this;\n      var ancestors = [];\n\n      while (transformNode) {\n        ancestors.push(transformNode);\n        transformNode = transformNode.parent;\n      }\n\n      while (transformNode = ancestors.pop()) {\n        transformNode.updateTransform();\n      }\n\n      return this.transform;\n    };\n\n    Transformable.prototype.setLocalTransform = function (m) {\n      if (!m) {\n        return;\n      }\n\n      var sx = m[0] * m[0] + m[1] * m[1];\n      var sy = m[2] * m[2] + m[3] * m[3];\n      var rotation = Math.atan2(m[1], m[0]);\n      var shearX = Math.PI / 2 + rotation - Math.atan2(m[3], m[2]);\n      sy = Math.sqrt(sy) * Math.cos(shearX);\n      sx = Math.sqrt(sx);\n      this.skewX = shearX;\n      this.skewY = 0;\n      this.rotation = -rotation;\n      this.x = +m[4];\n      this.y = +m[5];\n      this.scaleX = sx;\n      this.scaleY = sy;\n      this.originX = 0;\n      this.originY = 0;\n    };\n\n    Transformable.prototype.decomposeTransform = function () {\n      if (!this.transform) {\n        return;\n      }\n\n      var parent = this.parent;\n      var m = this.transform;\n\n      if (parent && parent.transform) {\n        mul$1(tmpTransform, parent.invTransform, m);\n        m = tmpTransform;\n      }\n\n      var ox = this.originX;\n      var oy = this.originY;\n\n      if (ox || oy) {\n        originTransform[4] = ox;\n        originTransform[5] = oy;\n        mul$1(tmpTransform, m, originTransform);\n        tmpTransform[4] -= ox;\n        tmpTransform[5] -= oy;\n        m = tmpTransform;\n      }\n\n      this.setLocalTransform(m);\n    };\n\n    Transformable.prototype.getGlobalScale = function (out) {\n      var m = this.transform;\n      out = out || [];\n\n      if (!m) {\n        out[0] = 1;\n        out[1] = 1;\n        return out;\n      }\n\n      out[0] = Math.sqrt(m[0] * m[0] + m[1] * m[1]);\n      out[1] = Math.sqrt(m[2] * m[2] + m[3] * m[3]);\n\n      if (m[0] < 0) {\n        out[0] = -out[0];\n      }\n\n      if (m[3] < 0) {\n        out[1] = -out[1];\n      }\n\n      return out;\n    };\n\n    Transformable.prototype.transformCoordToLocal = function (x, y) {\n      var v2 = [x, y];\n      var invTransform = this.invTransform;\n\n      if (invTransform) {\n        applyTransform(v2, v2, invTransform);\n      }\n\n      return v2;\n    };\n\n    Transformable.prototype.transformCoordToGlobal = function (x, y) {\n      var v2 = [x, y];\n      var transform = this.transform;\n\n      if (transform) {\n        applyTransform(v2, v2, transform);\n      }\n\n      return v2;\n    };\n\n    Transformable.prototype.getLineScale = function () {\n      var m = this.transform;\n      return m && abs(m[0] - 1) > 1e-10 && abs(m[3] - 1) > 1e-10 ? Math.sqrt(abs(m[0] * m[3] - m[2] * m[1])) : 1;\n    };\n\n    Transformable.prototype.copyTransform = function (source) {\n      copyTransform(this, source);\n    };\n\n    Transformable.getLocalTransform = function (target, m) {\n      m = m || [];\n      var ox = target.originX || 0;\n      var oy = target.originY || 0;\n      var sx = target.scaleX;\n      var sy = target.scaleY;\n      var ax = target.anchorX;\n      var ay = target.anchorY;\n      var rotation = target.rotation || 0;\n      var x = target.x;\n      var y = target.y;\n      var skewX = target.skewX ? Math.tan(target.skewX) : 0;\n      var skewY = target.skewY ? Math.tan(-target.skewY) : 0;\n\n      if (ox || oy || ax || ay) {\n        var dx = ox + ax;\n        var dy = oy + ay;\n        m[4] = -dx * sx - skewX * dy * sy;\n        m[5] = -dy * sy - skewY * dx * sx;\n      } else {\n        m[4] = m[5] = 0;\n      }\n\n      m[0] = sx;\n      m[3] = sy;\n      m[1] = skewY * sx;\n      m[2] = skewX * sy;\n      rotation && rotate(m, m, rotation);\n      m[4] += ox + x;\n      m[5] += oy + y;\n      return m;\n    };\n\n    Transformable.initDefaultProps = function () {\n      var proto = Transformable.prototype;\n      proto.scaleX = proto.scaleY = proto.globalScaleRatio = 1;\n      proto.x = proto.y = proto.originX = proto.originY = proto.skewX = proto.skewY = proto.rotation = proto.anchorX = proto.anchorY = 0;\n    }();\n\n    return Transformable;\n  }();\n\n  var TRANSFORMABLE_PROPS = ['x', 'y', 'originX', 'originY', 'anchorX', 'anchorY', 'rotation', 'scaleX', 'scaleY', 'skewX', 'skewY'];\n\n  function copyTransform(target, source) {\n    for (var i = 0; i < TRANSFORMABLE_PROPS.length; i++) {\n      var propName = TRANSFORMABLE_PROPS[i];\n      target[propName] = source[propName];\n    }\n  }\n\n  var Point = function () {\n    function Point(x, y) {\n      this.x = x || 0;\n      this.y = y || 0;\n    }\n\n    Point.prototype.copy = function (other) {\n      this.x = other.x;\n      this.y = other.y;\n      return this;\n    };\n\n    Point.prototype.clone = function () {\n      return new Point(this.x, this.y);\n    };\n\n    Point.prototype.set = function (x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    };\n\n    Point.prototype.equal = function (other) {\n      return other.x === this.x && other.y === this.y;\n    };\n\n    Point.prototype.add = function (other) {\n      this.x += other.x;\n      this.y += other.y;\n      return this;\n    };\n\n    Point.prototype.scale = function (scalar) {\n      this.x *= scalar;\n      this.y *= scalar;\n    };\n\n    Point.prototype.scaleAndAdd = function (other, scalar) {\n      this.x += other.x * scalar;\n      this.y += other.y * scalar;\n    };\n\n    Point.prototype.sub = function (other) {\n      this.x -= other.x;\n      this.y -= other.y;\n      return this;\n    };\n\n    Point.prototype.dot = function (other) {\n      return this.x * other.x + this.y * other.y;\n    };\n\n    Point.prototype.len = function () {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    };\n\n    Point.prototype.lenSquare = function () {\n      return this.x * this.x + this.y * this.y;\n    };\n\n    Point.prototype.normalize = function () {\n      var len = this.len();\n      this.x /= len;\n      this.y /= len;\n      return this;\n    };\n\n    Point.prototype.distance = function (other) {\n      var dx = this.x - other.x;\n      var dy = this.y - other.y;\n      return Math.sqrt(dx * dx + dy * dy);\n    };\n\n    Point.prototype.distanceSquare = function (other) {\n      var dx = this.x - other.x;\n      var dy = this.y - other.y;\n      return dx * dx + dy * dy;\n    };\n\n    Point.prototype.negate = function () {\n      this.x = -this.x;\n      this.y = -this.y;\n      return this;\n    };\n\n    Point.prototype.transform = function (m) {\n      if (!m) {\n        return;\n      }\n\n      var x = this.x;\n      var y = this.y;\n      this.x = m[0] * x + m[2] * y + m[4];\n      this.y = m[1] * x + m[3] * y + m[5];\n      return this;\n    };\n\n    Point.prototype.toArray = function (out) {\n      out[0] = this.x;\n      out[1] = this.y;\n      return out;\n    };\n\n    Point.prototype.fromArray = function (input) {\n      this.x = input[0];\n      this.y = input[1];\n    };\n\n    Point.set = function (p, x, y) {\n      p.x = x;\n      p.y = y;\n    };\n\n    Point.copy = function (p, p2) {\n      p.x = p2.x;\n      p.y = p2.y;\n    };\n\n    Point.len = function (p) {\n      return Math.sqrt(p.x * p.x + p.y * p.y);\n    };\n\n    Point.lenSquare = function (p) {\n      return p.x * p.x + p.y * p.y;\n    };\n\n    Point.dot = function (p0, p1) {\n      return p0.x * p1.x + p0.y * p1.y;\n    };\n\n    Point.add = function (out, p0, p1) {\n      out.x = p0.x + p1.x;\n      out.y = p0.y + p1.y;\n    };\n\n    Point.sub = function (out, p0, p1) {\n      out.x = p0.x - p1.x;\n      out.y = p0.y - p1.y;\n    };\n\n    Point.scale = function (out, p0, scalar) {\n      out.x = p0.x * scalar;\n      out.y = p0.y * scalar;\n    };\n\n    Point.scaleAndAdd = function (out, p0, p1, scalar) {\n      out.x = p0.x + p1.x * scalar;\n      out.y = p0.y + p1.y * scalar;\n    };\n\n    Point.lerp = function (out, p0, p1, t) {\n      var onet = 1 - t;\n      out.x = onet * p0.x + t * p1.x;\n      out.y = onet * p0.y + t * p1.y;\n    };\n\n    return Point;\n  }();\n\n  var mathMin = Math.min;\n  var mathMax = Math.max;\n  var lt = new Point();\n  var rb = new Point();\n  var lb = new Point();\n  var rt = new Point();\n  var minTv = new Point();\n  var maxTv = new Point();\n\n  var BoundingRect = function () {\n    function BoundingRect(x, y, width, height) {\n      if (width < 0) {\n        x = x + width;\n        width = -width;\n      }\n\n      if (height < 0) {\n        y = y + height;\n        height = -height;\n      }\n\n      this.x = x;\n      this.y = y;\n      this.width = width;\n      this.height = height;\n    }\n\n    BoundingRect.prototype.union = function (other) {\n      var x = mathMin(other.x, this.x);\n      var y = mathMin(other.y, this.y);\n\n      if (isFinite(this.x) && isFinite(this.width)) {\n        this.width = mathMax(other.x + other.width, this.x + this.width) - x;\n      } else {\n        this.width = other.width;\n      }\n\n      if (isFinite(this.y) && isFinite(this.height)) {\n        this.height = mathMax(other.y + other.height, this.y + this.height) - y;\n      } else {\n        this.height = other.height;\n      }\n\n      this.x = x;\n      this.y = y;\n    };\n\n    BoundingRect.prototype.applyTransform = function (m) {\n      BoundingRect.applyTransform(this, this, m);\n    };\n\n    BoundingRect.prototype.calculateTransform = function (b) {\n      var a = this;\n      var sx = b.width / a.width;\n      var sy = b.height / a.height;\n      var m = create$1();\n      translate(m, m, [-a.x, -a.y]);\n      scale$1(m, m, [sx, sy]);\n      translate(m, m, [b.x, b.y]);\n      return m;\n    };\n\n    BoundingRect.prototype.intersect = function (b, mtv) {\n      if (!b) {\n        return false;\n      }\n\n      if (!(b instanceof BoundingRect)) {\n        b = BoundingRect.create(b);\n      }\n\n      var a = this;\n      var ax0 = a.x;\n      var ax1 = a.x + a.width;\n      var ay0 = a.y;\n      var ay1 = a.y + a.height;\n      var bx0 = b.x;\n      var bx1 = b.x + b.width;\n      var by0 = b.y;\n      var by1 = b.y + b.height;\n      var overlap = !(ax1 < bx0 || bx1 < ax0 || ay1 < by0 || by1 < ay0);\n\n      if (mtv) {\n        var dMin = Infinity;\n        var dMax = 0;\n        var d0 = Math.abs(ax1 - bx0);\n        var d1 = Math.abs(bx1 - ax0);\n        var d2 = Math.abs(ay1 - by0);\n        var d3 = Math.abs(by1 - ay0);\n        var dx = Math.min(d0, d1);\n        var dy = Math.min(d2, d3);\n\n        if (ax1 < bx0 || bx1 < ax0) {\n          if (dx > dMax) {\n            dMax = dx;\n\n            if (d0 < d1) {\n              Point.set(maxTv, -d0, 0);\n            } else {\n              Point.set(maxTv, d1, 0);\n            }\n          }\n        } else {\n          if (dx < dMin) {\n            dMin = dx;\n\n            if (d0 < d1) {\n              Point.set(minTv, d0, 0);\n            } else {\n              Point.set(minTv, -d1, 0);\n            }\n          }\n        }\n\n        if (ay1 < by0 || by1 < ay0) {\n          if (dy > dMax) {\n            dMax = dy;\n\n            if (d2 < d3) {\n              Point.set(maxTv, 0, -d2);\n            } else {\n              Point.set(maxTv, 0, d3);\n            }\n          }\n        } else {\n          if (dx < dMin) {\n            dMin = dx;\n\n            if (d2 < d3) {\n              Point.set(minTv, 0, d2);\n            } else {\n              Point.set(minTv, 0, -d3);\n            }\n          }\n        }\n      }\n\n      if (mtv) {\n        Point.copy(mtv, overlap ? minTv : maxTv);\n      }\n\n      return overlap;\n    };\n\n    BoundingRect.prototype.contain = function (x, y) {\n      var rect = this;\n      return x >= rect.x && x <= rect.x + rect.width && y >= rect.y && y <= rect.y + rect.height;\n    };\n\n    BoundingRect.prototype.clone = function () {\n      return new BoundingRect(this.x, this.y, this.width, this.height);\n    };\n\n    BoundingRect.prototype.copy = function (other) {\n      BoundingRect.copy(this, other);\n    };\n\n    BoundingRect.prototype.plain = function () {\n      return {\n        x: this.x,\n        y: this.y,\n        width: this.width,\n        height: this.height\n      };\n    };\n\n    BoundingRect.prototype.isFinite = function () {\n      return isFinite(this.x) && isFinite(this.y) && isFinite(this.width) && isFinite(this.height);\n    };\n\n    BoundingRect.prototype.isZero = function () {\n      return this.width === 0 || this.height === 0;\n    };\n\n    BoundingRect.create = function (rect) {\n      return new BoundingRect(rect.x, rect.y, rect.width, rect.height);\n    };\n\n    BoundingRect.copy = function (target, source) {\n      target.x = source.x;\n      target.y = source.y;\n      target.width = source.width;\n      target.height = source.height;\n    };\n\n    BoundingRect.applyTransform = function (target, source, m) {\n      if (!m) {\n        if (target !== source) {\n          BoundingRect.copy(target, source);\n        }\n\n        return;\n      }\n\n      if (m[1] < 1e-5 && m[1] > -1e-5 && m[2] < 1e-5 && m[2] > -1e-5) {\n        var sx = m[0];\n        var sy = m[3];\n        var tx = m[4];\n        var ty = m[5];\n        target.x = source.x * sx + tx;\n        target.y = source.y * sy + ty;\n        target.width = source.width * sx;\n        target.height = source.height * sy;\n\n        if (target.width < 0) {\n          target.x += target.width;\n          target.width = -target.width;\n        }\n\n        if (target.height < 0) {\n          target.y += target.height;\n          target.height = -target.height;\n        }\n\n        return;\n      }\n\n      lt.x = lb.x = source.x;\n      lt.y = rt.y = source.y;\n      rb.x = rt.x = source.x + source.width;\n      rb.y = lb.y = source.y + source.height;\n      lt.transform(m);\n      rt.transform(m);\n      rb.transform(m);\n      lb.transform(m);\n      target.x = mathMin(lt.x, rb.x, lb.x, rt.x);\n      target.y = mathMin(lt.y, rb.y, lb.y, rt.y);\n      var maxX = mathMax(lt.x, rb.x, lb.x, rt.x);\n      var maxY = mathMax(lt.y, rb.y, lb.y, rt.y);\n      target.width = maxX - target.x;\n      target.height = maxY - target.y;\n    };\n\n    return BoundingRect;\n  }();\n\n  var textWidthCache = {};\n\n  function getWidth(text, font) {\n    font = font || DEFAULT_FONT;\n    var cacheOfFont = textWidthCache[font];\n\n    if (!cacheOfFont) {\n      cacheOfFont = textWidthCache[font] = new LRU(500);\n    }\n\n    var width = cacheOfFont.get(text);\n\n    if (width == null) {\n      width = platformApi.measureText(text, font).width;\n      cacheOfFont.put(text, width);\n    }\n\n    return width;\n  }\n\n  function innerGetBoundingRect(text, font, textAlign, textBaseline) {\n    var width = getWidth(text, font);\n    var height = getLineHeight(font);\n    var x = adjustTextX(0, width, textAlign);\n    var y = adjustTextY$1(0, height, textBaseline);\n    var rect = new BoundingRect(x, y, width, height);\n    return rect;\n  }\n\n  function getBoundingRect(text, font, textAlign, textBaseline) {\n    var textLines = ((text || '') + '').split('\\n');\n    var len = textLines.length;\n\n    if (len === 1) {\n      return innerGetBoundingRect(textLines[0], font, textAlign, textBaseline);\n    } else {\n      var uniondRect = new BoundingRect(0, 0, 0, 0);\n\n      for (var i = 0; i < textLines.length; i++) {\n        var rect = innerGetBoundingRect(textLines[i], font, textAlign, textBaseline);\n        i === 0 ? uniondRect.copy(rect) : uniondRect.union(rect);\n      }\n\n      return uniondRect;\n    }\n  }\n\n  function adjustTextX(x, width, textAlign) {\n    if (textAlign === 'right') {\n      x -= width;\n    } else if (textAlign === 'center') {\n      x -= width / 2;\n    }\n\n    return x;\n  }\n\n  function adjustTextY$1(y, height, verticalAlign) {\n    if (verticalAlign === 'middle') {\n      y -= height / 2;\n    } else if (verticalAlign === 'bottom') {\n      y -= height;\n    }\n\n    return y;\n  }\n\n  function getLineHeight(font) {\n    return getWidth('国', font);\n  }\n\n  function parsePercent(value, maxValue) {\n    if (typeof value === 'string') {\n      if (value.lastIndexOf('%') >= 0) {\n        return parseFloat(value) / 100 * maxValue;\n      }\n\n      return parseFloat(value);\n    }\n\n    return value;\n  }\n\n  function calculateTextPosition(out, opts, rect) {\n    var textPosition = opts.position || 'inside';\n    var distance = opts.distance != null ? opts.distance : 5;\n    var height = rect.height;\n    var width = rect.width;\n    var halfHeight = height / 2;\n    var x = rect.x;\n    var y = rect.y;\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n\n    if (textPosition instanceof Array) {\n      x += parsePercent(textPosition[0], rect.width);\n      y += parsePercent(textPosition[1], rect.height);\n      textAlign = null;\n      textVerticalAlign = null;\n    } else {\n      switch (textPosition) {\n        case 'left':\n          x -= distance;\n          y += halfHeight;\n          textAlign = 'right';\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'right':\n          x += distance + width;\n          y += halfHeight;\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'top':\n          x += width / 2;\n          y -= distance;\n          textAlign = 'center';\n          textVerticalAlign = 'bottom';\n          break;\n\n        case 'bottom':\n          x += width / 2;\n          y += height + distance;\n          textAlign = 'center';\n          break;\n\n        case 'inside':\n          x += width / 2;\n          y += halfHeight;\n          textAlign = 'center';\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'insideLeft':\n          x += distance;\n          y += halfHeight;\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'insideRight':\n          x += width - distance;\n          y += halfHeight;\n          textAlign = 'right';\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'insideTop':\n          x += width / 2;\n          y += distance;\n          textAlign = 'center';\n          break;\n\n        case 'insideBottom':\n          x += width / 2;\n          y += height - distance;\n          textAlign = 'center';\n          textVerticalAlign = 'bottom';\n          break;\n\n        case 'insideTopLeft':\n          x += distance;\n          y += distance;\n          break;\n\n        case 'insideTopRight':\n          x += width - distance;\n          y += distance;\n          textAlign = 'right';\n          break;\n\n        case 'insideBottomLeft':\n          x += distance;\n          y += height - distance;\n          textVerticalAlign = 'bottom';\n          break;\n\n        case 'insideBottomRight':\n          x += width - distance;\n          y += height - distance;\n          textAlign = 'right';\n          textVerticalAlign = 'bottom';\n          break;\n      }\n    }\n\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n  }\n\n  var PRESERVED_NORMAL_STATE = '__zr_normal__';\n  var PRIMARY_STATES_KEYS = TRANSFORMABLE_PROPS.concat(['ignore']);\n  var DEFAULT_ANIMATABLE_MAP = reduce(TRANSFORMABLE_PROPS, function (obj, key) {\n    obj[key] = true;\n    return obj;\n  }, {\n    ignore: false\n  });\n  var tmpTextPosCalcRes = {};\n  var tmpBoundingRect = new BoundingRect(0, 0, 0, 0);\n\n  var Element = function () {\n    function Element(props) {\n      this.id = guid();\n      this.animators = [];\n      this.currentStates = [];\n      this.states = {};\n\n      this._init(props);\n    }\n\n    Element.prototype._init = function (props) {\n      this.attr(props);\n    };\n\n    Element.prototype.drift = function (dx, dy, e) {\n      switch (this.draggable) {\n        case 'horizontal':\n          dy = 0;\n          break;\n\n        case 'vertical':\n          dx = 0;\n          break;\n      }\n\n      var m = this.transform;\n\n      if (!m) {\n        m = this.transform = [1, 0, 0, 1, 0, 0];\n      }\n\n      m[4] += dx;\n      m[5] += dy;\n      this.decomposeTransform();\n      this.markRedraw();\n    };\n\n    Element.prototype.beforeUpdate = function () {};\n\n    Element.prototype.afterUpdate = function () {};\n\n    Element.prototype.update = function () {\n      this.updateTransform();\n\n      if (this.__dirty) {\n        this.updateInnerText();\n      }\n    };\n\n    Element.prototype.updateInnerText = function (forceUpdate) {\n      var textEl = this._textContent;\n\n      if (textEl && (!textEl.ignore || forceUpdate)) {\n        if (!this.textConfig) {\n          this.textConfig = {};\n        }\n\n        var textConfig = this.textConfig;\n        var isLocal = textConfig.local;\n        var innerTransformable = textEl.innerTransformable;\n        var textAlign = void 0;\n        var textVerticalAlign = void 0;\n        var textStyleChanged = false;\n        innerTransformable.parent = isLocal ? this : null;\n        var innerOrigin = false;\n        innerTransformable.copyTransform(textEl);\n\n        if (textConfig.position != null) {\n          var layoutRect = tmpBoundingRect;\n\n          if (textConfig.layoutRect) {\n            layoutRect.copy(textConfig.layoutRect);\n          } else {\n            layoutRect.copy(this.getBoundingRect());\n          }\n\n          if (!isLocal) {\n            layoutRect.applyTransform(this.transform);\n          }\n\n          if (this.calculateTextPosition) {\n            this.calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n          } else {\n            calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n          }\n\n          innerTransformable.x = tmpTextPosCalcRes.x;\n          innerTransformable.y = tmpTextPosCalcRes.y;\n          textAlign = tmpTextPosCalcRes.align;\n          textVerticalAlign = tmpTextPosCalcRes.verticalAlign;\n          var textOrigin = textConfig.origin;\n\n          if (textOrigin && textConfig.rotation != null) {\n            var relOriginX = void 0;\n            var relOriginY = void 0;\n\n            if (textOrigin === 'center') {\n              relOriginX = layoutRect.width * 0.5;\n              relOriginY = layoutRect.height * 0.5;\n            } else {\n              relOriginX = parsePercent(textOrigin[0], layoutRect.width);\n              relOriginY = parsePercent(textOrigin[1], layoutRect.height);\n            }\n\n            innerOrigin = true;\n            innerTransformable.originX = -innerTransformable.x + relOriginX + (isLocal ? 0 : layoutRect.x);\n            innerTransformable.originY = -innerTransformable.y + relOriginY + (isLocal ? 0 : layoutRect.y);\n          }\n        }\n\n        if (textConfig.rotation != null) {\n          innerTransformable.rotation = textConfig.rotation;\n        }\n\n        var textOffset = textConfig.offset;\n\n        if (textOffset) {\n          innerTransformable.x += textOffset[0];\n          innerTransformable.y += textOffset[1];\n\n          if (!innerOrigin) {\n            innerTransformable.originX = -textOffset[0];\n            innerTransformable.originY = -textOffset[1];\n          }\n        }\n\n        var isInside = textConfig.inside == null ? typeof textConfig.position === 'string' && textConfig.position.indexOf('inside') >= 0 : textConfig.inside;\n        var innerTextDefaultStyle = this._innerTextDefaultStyle || (this._innerTextDefaultStyle = {});\n        var textFill = void 0;\n        var textStroke = void 0;\n        var autoStroke = void 0;\n\n        if (isInside && this.canBeInsideText()) {\n          textFill = textConfig.insideFill;\n          textStroke = textConfig.insideStroke;\n\n          if (textFill == null || textFill === 'auto') {\n            textFill = this.getInsideTextFill();\n          }\n\n          if (textStroke == null || textStroke === 'auto') {\n            textStroke = this.getInsideTextStroke(textFill);\n            autoStroke = true;\n          }\n        } else {\n          textFill = textConfig.outsideFill;\n          textStroke = textConfig.outsideStroke;\n\n          if (textFill == null || textFill === 'auto') {\n            textFill = this.getOutsideFill();\n          }\n\n          if (textStroke == null || textStroke === 'auto') {\n            textStroke = this.getOutsideStroke(textFill);\n            autoStroke = true;\n          }\n        }\n\n        textFill = textFill || '#000';\n\n        if (textFill !== innerTextDefaultStyle.fill || textStroke !== innerTextDefaultStyle.stroke || autoStroke !== innerTextDefaultStyle.autoStroke || textAlign !== innerTextDefaultStyle.align || textVerticalAlign !== innerTextDefaultStyle.verticalAlign) {\n          textStyleChanged = true;\n          innerTextDefaultStyle.fill = textFill;\n          innerTextDefaultStyle.stroke = textStroke;\n          innerTextDefaultStyle.autoStroke = autoStroke;\n          innerTextDefaultStyle.align = textAlign;\n          innerTextDefaultStyle.verticalAlign = textVerticalAlign;\n          textEl.setDefaultTextStyle(innerTextDefaultStyle);\n        }\n\n        textEl.__dirty |= REDRAW_BIT;\n\n        if (textStyleChanged) {\n          textEl.dirtyStyle(true);\n        }\n      }\n    };\n\n    Element.prototype.canBeInsideText = function () {\n      return true;\n    };\n\n    Element.prototype.getInsideTextFill = function () {\n      return '#fff';\n    };\n\n    Element.prototype.getInsideTextStroke = function (textFill) {\n      return '#000';\n    };\n\n    Element.prototype.getOutsideFill = function () {\n      return this.__zr && this.__zr.isDarkMode() ? LIGHT_LABEL_COLOR : DARK_LABEL_COLOR;\n    };\n\n    Element.prototype.getOutsideStroke = function (textFill) {\n      var backgroundColor = this.__zr && this.__zr.getBackgroundColor();\n\n      var colorArr = typeof backgroundColor === 'string' && parse(backgroundColor);\n\n      if (!colorArr) {\n        colorArr = [255, 255, 255, 1];\n      }\n\n      var alpha = colorArr[3];\n\n      var isDark = this.__zr.isDarkMode();\n\n      for (var i = 0; i < 3; i++) {\n        colorArr[i] = colorArr[i] * alpha + (isDark ? 0 : 255) * (1 - alpha);\n      }\n\n      colorArr[3] = 1;\n      return stringify(colorArr, 'rgba');\n    };\n\n    Element.prototype.traverse = function (cb, context) {};\n\n    Element.prototype.attrKV = function (key, value) {\n      if (key === 'textConfig') {\n        this.setTextConfig(value);\n      } else if (key === 'textContent') {\n        this.setTextContent(value);\n      } else if (key === 'clipPath') {\n        this.setClipPath(value);\n      } else if (key === 'extra') {\n        this.extra = this.extra || {};\n        extend(this.extra, value);\n      } else {\n        this[key] = value;\n      }\n    };\n\n    Element.prototype.hide = function () {\n      this.ignore = true;\n      this.markRedraw();\n    };\n\n    Element.prototype.show = function () {\n      this.ignore = false;\n      this.markRedraw();\n    };\n\n    Element.prototype.attr = function (keyOrObj, value) {\n      if (typeof keyOrObj === 'string') {\n        this.attrKV(keyOrObj, value);\n      } else if (isObject(keyOrObj)) {\n        var obj = keyOrObj;\n        var keysArr = keys(obj);\n\n        for (var i = 0; i < keysArr.length; i++) {\n          var key = keysArr[i];\n          this.attrKV(key, keyOrObj[key]);\n        }\n      }\n\n      this.markRedraw();\n      return this;\n    };\n\n    Element.prototype.saveCurrentToNormalState = function (toState) {\n      this._innerSaveToNormal(toState);\n\n      var normalState = this._normalState;\n\n      for (var i = 0; i < this.animators.length; i++) {\n        var animator = this.animators[i];\n        var fromStateTransition = animator.__fromStateTransition;\n\n        if (animator.getLoop() || fromStateTransition && fromStateTransition !== PRESERVED_NORMAL_STATE) {\n          continue;\n        }\n\n        var targetName = animator.targetName;\n        var target = targetName ? normalState[targetName] : normalState;\n        animator.saveTo(target);\n      }\n    };\n\n    Element.prototype._innerSaveToNormal = function (toState) {\n      var normalState = this._normalState;\n\n      if (!normalState) {\n        normalState = this._normalState = {};\n      }\n\n      if (toState.textConfig && !normalState.textConfig) {\n        normalState.textConfig = this.textConfig;\n      }\n\n      this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n\n    Element.prototype._savePrimaryToNormal = function (toState, normalState, primaryKeys) {\n      for (var i = 0; i < primaryKeys.length; i++) {\n        var key = primaryKeys[i];\n\n        if (toState[key] != null && !(key in normalState)) {\n          normalState[key] = this[key];\n        }\n      }\n    };\n\n    Element.prototype.hasState = function () {\n      return this.currentStates.length > 0;\n    };\n\n    Element.prototype.getState = function (name) {\n      return this.states[name];\n    };\n\n    Element.prototype.ensureState = function (name) {\n      var states = this.states;\n\n      if (!states[name]) {\n        states[name] = {};\n      }\n\n      return states[name];\n    };\n\n    Element.prototype.clearStates = function (noAnimation) {\n      this.useState(PRESERVED_NORMAL_STATE, false, noAnimation);\n    };\n\n    Element.prototype.useState = function (stateName, keepCurrentStates, noAnimation, forceUseHoverLayer) {\n      var toNormalState = stateName === PRESERVED_NORMAL_STATE;\n      var hasStates = this.hasState();\n\n      if (!hasStates && toNormalState) {\n        return;\n      }\n\n      var currentStates = this.currentStates;\n      var animationCfg = this.stateTransition;\n\n      if (indexOf(currentStates, stateName) >= 0 && (keepCurrentStates || currentStates.length === 1)) {\n        return;\n      }\n\n      var state;\n\n      if (this.stateProxy && !toNormalState) {\n        state = this.stateProxy(stateName);\n      }\n\n      if (!state) {\n        state = this.states && this.states[stateName];\n      }\n\n      if (!state && !toNormalState) {\n        logError(\"State \" + stateName + \" not exists.\");\n        return;\n      }\n\n      if (!toNormalState) {\n        this.saveCurrentToNormalState(state);\n      }\n\n      var useHoverLayer = !!(state && state.hoverLayer || forceUseHoverLayer);\n\n      if (useHoverLayer) {\n        this._toggleHoverLayerFlag(true);\n      }\n\n      this._applyStateObj(stateName, state, this._normalState, keepCurrentStates, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n\n      var textContent = this._textContent;\n      var textGuide = this._textGuide;\n\n      if (textContent) {\n        textContent.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n      }\n\n      if (textGuide) {\n        textGuide.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n      }\n\n      if (toNormalState) {\n        this.currentStates = [];\n        this._normalState = {};\n      } else {\n        if (!keepCurrentStates) {\n          this.currentStates = [stateName];\n        } else {\n          this.currentStates.push(stateName);\n        }\n      }\n\n      this._updateAnimationTargets();\n\n      this.markRedraw();\n\n      if (!useHoverLayer && this.__inHover) {\n        this._toggleHoverLayerFlag(false);\n\n        this.__dirty &= ~REDRAW_BIT;\n      }\n\n      return state;\n    };\n\n    Element.prototype.useStates = function (states, noAnimation, forceUseHoverLayer) {\n      if (!states.length) {\n        this.clearStates();\n      } else {\n        var stateObjects = [];\n        var currentStates = this.currentStates;\n        var len = states.length;\n        var notChange = len === currentStates.length;\n\n        if (notChange) {\n          for (var i = 0; i < len; i++) {\n            if (states[i] !== currentStates[i]) {\n              notChange = false;\n              break;\n            }\n          }\n        }\n\n        if (notChange) {\n          return;\n        }\n\n        for (var i = 0; i < len; i++) {\n          var stateName = states[i];\n          var stateObj = void 0;\n\n          if (this.stateProxy) {\n            stateObj = this.stateProxy(stateName, states);\n          }\n\n          if (!stateObj) {\n            stateObj = this.states[stateName];\n          }\n\n          if (stateObj) {\n            stateObjects.push(stateObj);\n          }\n        }\n\n        var lastStateObj = stateObjects[len - 1];\n        var useHoverLayer = !!(lastStateObj && lastStateObj.hoverLayer || forceUseHoverLayer);\n\n        if (useHoverLayer) {\n          this._toggleHoverLayerFlag(true);\n        }\n\n        var mergedState = this._mergeStates(stateObjects);\n\n        var animationCfg = this.stateTransition;\n        this.saveCurrentToNormalState(mergedState);\n\n        this._applyStateObj(states.join(','), mergedState, this._normalState, false, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n\n        if (textContent) {\n          textContent.useStates(states, noAnimation, useHoverLayer);\n        }\n\n        if (textGuide) {\n          textGuide.useStates(states, noAnimation, useHoverLayer);\n        }\n\n        this._updateAnimationTargets();\n\n        this.currentStates = states.slice();\n        this.markRedraw();\n\n        if (!useHoverLayer && this.__inHover) {\n          this._toggleHoverLayerFlag(false);\n\n          this.__dirty &= ~REDRAW_BIT;\n        }\n      }\n    };\n\n    Element.prototype._updateAnimationTargets = function () {\n      for (var i = 0; i < this.animators.length; i++) {\n        var animator = this.animators[i];\n\n        if (animator.targetName) {\n          animator.changeTarget(this[animator.targetName]);\n        }\n      }\n    };\n\n    Element.prototype.removeState = function (state) {\n      var idx = indexOf(this.currentStates, state);\n\n      if (idx >= 0) {\n        var currentStates = this.currentStates.slice();\n        currentStates.splice(idx, 1);\n        this.useStates(currentStates);\n      }\n    };\n\n    Element.prototype.replaceState = function (oldState, newState, forceAdd) {\n      var currentStates = this.currentStates.slice();\n      var idx = indexOf(currentStates, oldState);\n      var newStateExists = indexOf(currentStates, newState) >= 0;\n\n      if (idx >= 0) {\n        if (!newStateExists) {\n          currentStates[idx] = newState;\n        } else {\n          currentStates.splice(idx, 1);\n        }\n      } else if (forceAdd && !newStateExists) {\n        currentStates.push(newState);\n      }\n\n      this.useStates(currentStates);\n    };\n\n    Element.prototype.toggleState = function (state, enable) {\n      if (enable) {\n        this.useState(state, true);\n      } else {\n        this.removeState(state);\n      }\n    };\n\n    Element.prototype._mergeStates = function (states) {\n      var mergedState = {};\n      var mergedTextConfig;\n\n      for (var i = 0; i < states.length; i++) {\n        var state = states[i];\n        extend(mergedState, state);\n\n        if (state.textConfig) {\n          mergedTextConfig = mergedTextConfig || {};\n          extend(mergedTextConfig, state.textConfig);\n        }\n      }\n\n      if (mergedTextConfig) {\n        mergedState.textConfig = mergedTextConfig;\n      }\n\n      return mergedState;\n    };\n\n    Element.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n      var needsRestoreToNormal = !(state && keepCurrentStates);\n\n      if (state && state.textConfig) {\n        this.textConfig = extend({}, keepCurrentStates ? this.textConfig : normalState.textConfig);\n        extend(this.textConfig, state.textConfig);\n      } else if (needsRestoreToNormal) {\n        if (normalState.textConfig) {\n          this.textConfig = normalState.textConfig;\n        }\n      }\n\n      var transitionTarget = {};\n      var hasTransition = false;\n\n      for (var i = 0; i < PRIMARY_STATES_KEYS.length; i++) {\n        var key = PRIMARY_STATES_KEYS[i];\n        var propNeedsTransition = transition && DEFAULT_ANIMATABLE_MAP[key];\n\n        if (state && state[key] != null) {\n          if (propNeedsTransition) {\n            hasTransition = true;\n            transitionTarget[key] = state[key];\n          } else {\n            this[key] = state[key];\n          }\n        } else if (needsRestoreToNormal) {\n          if (normalState[key] != null) {\n            if (propNeedsTransition) {\n              hasTransition = true;\n              transitionTarget[key] = normalState[key];\n            } else {\n              this[key] = normalState[key];\n            }\n          }\n        }\n      }\n\n      if (!transition) {\n        for (var i = 0; i < this.animators.length; i++) {\n          var animator = this.animators[i];\n          var targetName = animator.targetName;\n\n          if (!animator.getLoop()) {\n            animator.__changeFinalValue(targetName ? (state || normalState)[targetName] : state || normalState);\n          }\n        }\n      }\n\n      if (hasTransition) {\n        this._transitionState(stateName, transitionTarget, animationCfg);\n      }\n    };\n\n    Element.prototype._attachComponent = function (componentEl) {\n      if (componentEl.__zr && !componentEl.__hostTarget) {\n        {\n          throw new Error('Text element has been added to zrender.');\n        }\n        return;\n      }\n\n      if (componentEl === this) {\n        {\n          throw new Error('Recursive component attachment.');\n        }\n        return;\n      }\n\n      var zr = this.__zr;\n\n      if (zr) {\n        componentEl.addSelfToZr(zr);\n      }\n\n      componentEl.__zr = zr;\n      componentEl.__hostTarget = this;\n    };\n\n    Element.prototype._detachComponent = function (componentEl) {\n      if (componentEl.__zr) {\n        componentEl.removeSelfFromZr(componentEl.__zr);\n      }\n\n      componentEl.__zr = null;\n      componentEl.__hostTarget = null;\n    };\n\n    Element.prototype.getClipPath = function () {\n      return this._clipPath;\n    };\n\n    Element.prototype.setClipPath = function (clipPath) {\n      if (this._clipPath && this._clipPath !== clipPath) {\n        this.removeClipPath();\n      }\n\n      this._attachComponent(clipPath);\n\n      this._clipPath = clipPath;\n      this.markRedraw();\n    };\n\n    Element.prototype.removeClipPath = function () {\n      var clipPath = this._clipPath;\n\n      if (clipPath) {\n        this._detachComponent(clipPath);\n\n        this._clipPath = null;\n        this.markRedraw();\n      }\n    };\n\n    Element.prototype.getTextContent = function () {\n      return this._textContent;\n    };\n\n    Element.prototype.setTextContent = function (textEl) {\n      var previousTextContent = this._textContent;\n\n      if (previousTextContent === textEl) {\n        return;\n      }\n\n      if (previousTextContent && previousTextContent !== textEl) {\n        this.removeTextContent();\n      }\n\n      {\n        if (textEl.__zr && !textEl.__hostTarget) {\n          throw new Error('Text element has been added to zrender.');\n        }\n      }\n      textEl.innerTransformable = new Transformable();\n\n      this._attachComponent(textEl);\n\n      this._textContent = textEl;\n      this.markRedraw();\n    };\n\n    Element.prototype.setTextConfig = function (cfg) {\n      if (!this.textConfig) {\n        this.textConfig = {};\n      }\n\n      extend(this.textConfig, cfg);\n      this.markRedraw();\n    };\n\n    Element.prototype.removeTextConfig = function () {\n      this.textConfig = null;\n      this.markRedraw();\n    };\n\n    Element.prototype.removeTextContent = function () {\n      var textEl = this._textContent;\n\n      if (textEl) {\n        textEl.innerTransformable = null;\n\n        this._detachComponent(textEl);\n\n        this._textContent = null;\n        this._innerTextDefaultStyle = null;\n        this.markRedraw();\n      }\n    };\n\n    Element.prototype.getTextGuideLine = function () {\n      return this._textGuide;\n    };\n\n    Element.prototype.setTextGuideLine = function (guideLine) {\n      if (this._textGuide && this._textGuide !== guideLine) {\n        this.removeTextGuideLine();\n      }\n\n      this._attachComponent(guideLine);\n\n      this._textGuide = guideLine;\n      this.markRedraw();\n    };\n\n    Element.prototype.removeTextGuideLine = function () {\n      var textGuide = this._textGuide;\n\n      if (textGuide) {\n        this._detachComponent(textGuide);\n\n        this._textGuide = null;\n        this.markRedraw();\n      }\n    };\n\n    Element.prototype.markRedraw = function () {\n      this.__dirty |= REDRAW_BIT;\n      var zr = this.__zr;\n\n      if (zr) {\n        if (this.__inHover) {\n          zr.refreshHover();\n        } else {\n          zr.refresh();\n        }\n      }\n\n      if (this.__hostTarget) {\n        this.__hostTarget.markRedraw();\n      }\n    };\n\n    Element.prototype.dirty = function () {\n      this.markRedraw();\n    };\n\n    Element.prototype._toggleHoverLayerFlag = function (inHover) {\n      this.__inHover = inHover;\n      var textContent = this._textContent;\n      var textGuide = this._textGuide;\n\n      if (textContent) {\n        textContent.__inHover = inHover;\n      }\n\n      if (textGuide) {\n        textGuide.__inHover = inHover;\n      }\n    };\n\n    Element.prototype.addSelfToZr = function (zr) {\n      if (this.__zr === zr) {\n        return;\n      }\n\n      this.__zr = zr;\n      var animators = this.animators;\n\n      if (animators) {\n        for (var i = 0; i < animators.length; i++) {\n          zr.animation.addAnimator(animators[i]);\n        }\n      }\n\n      if (this._clipPath) {\n        this._clipPath.addSelfToZr(zr);\n      }\n\n      if (this._textContent) {\n        this._textContent.addSelfToZr(zr);\n      }\n\n      if (this._textGuide) {\n        this._textGuide.addSelfToZr(zr);\n      }\n    };\n\n    Element.prototype.removeSelfFromZr = function (zr) {\n      if (!this.__zr) {\n        return;\n      }\n\n      this.__zr = null;\n      var animators = this.animators;\n\n      if (animators) {\n        for (var i = 0; i < animators.length; i++) {\n          zr.animation.removeAnimator(animators[i]);\n        }\n      }\n\n      if (this._clipPath) {\n        this._clipPath.removeSelfFromZr(zr);\n      }\n\n      if (this._textContent) {\n        this._textContent.removeSelfFromZr(zr);\n      }\n\n      if (this._textGuide) {\n        this._textGuide.removeSelfFromZr(zr);\n      }\n    };\n\n    Element.prototype.animate = function (key, loop, allowDiscreteAnimation) {\n      var target = key ? this[key] : this;\n      {\n        if (!target) {\n          logError('Property \"' + key + '\" is not existed in element ' + this.id);\n          return;\n        }\n      }\n      var animator = new Animator(target, loop, allowDiscreteAnimation);\n      key && (animator.targetName = key);\n      this.addAnimator(animator, key);\n      return animator;\n    };\n\n    Element.prototype.addAnimator = function (animator, key) {\n      var zr = this.__zr;\n      var el = this;\n      animator.during(function () {\n        el.updateDuringAnimation(key);\n      }).done(function () {\n        var animators = el.animators;\n        var idx = indexOf(animators, animator);\n\n        if (idx >= 0) {\n          animators.splice(idx, 1);\n        }\n      });\n      this.animators.push(animator);\n\n      if (zr) {\n        zr.animation.addAnimator(animator);\n      }\n\n      zr && zr.wakeUp();\n    };\n\n    Element.prototype.updateDuringAnimation = function (key) {\n      this.markRedraw();\n    };\n\n    Element.prototype.stopAnimation = function (scope, forwardToLast) {\n      var animators = this.animators;\n      var len = animators.length;\n      var leftAnimators = [];\n\n      for (var i = 0; i < len; i++) {\n        var animator = animators[i];\n\n        if (!scope || scope === animator.scope) {\n          animator.stop(forwardToLast);\n        } else {\n          leftAnimators.push(animator);\n        }\n      }\n\n      this.animators = leftAnimators;\n      return this;\n    };\n\n    Element.prototype.animateTo = function (target, cfg, animationProps) {\n      animateTo(this, target, cfg, animationProps);\n    };\n\n    Element.prototype.animateFrom = function (target, cfg, animationProps) {\n      animateTo(this, target, cfg, animationProps, true);\n    };\n\n    Element.prototype._transitionState = function (stateName, target, cfg, animationProps) {\n      var animators = animateTo(this, target, cfg, animationProps);\n\n      for (var i = 0; i < animators.length; i++) {\n        animators[i].__fromStateTransition = stateName;\n      }\n    };\n\n    Element.prototype.getBoundingRect = function () {\n      return null;\n    };\n\n    Element.prototype.getPaintRect = function () {\n      return null;\n    };\n\n    Element.initDefaultProps = function () {\n      var elProto = Element.prototype;\n      elProto.type = 'element';\n      elProto.name = '';\n      elProto.ignore = elProto.silent = elProto.isGroup = elProto.draggable = elProto.dragging = elProto.ignoreClip = elProto.__inHover = false;\n      elProto.__dirty = REDRAW_BIT;\n      var logs = {};\n\n      function logDeprecatedError(key, xKey, yKey) {\n        if (!logs[key + xKey + yKey]) {\n          console.warn(\"DEPRECATED: '\" + key + \"' has been deprecated. use '\" + xKey + \"', '\" + yKey + \"' instead\");\n          logs[key + xKey + yKey] = true;\n        }\n      }\n\n      function createLegacyProperty(key, privateKey, xKey, yKey) {\n        Object.defineProperty(elProto, key, {\n          get: function () {\n            {\n              logDeprecatedError(key, xKey, yKey);\n            }\n\n            if (!this[privateKey]) {\n              var pos = this[privateKey] = [];\n              enhanceArray(this, pos);\n            }\n\n            return this[privateKey];\n          },\n          set: function (pos) {\n            {\n              logDeprecatedError(key, xKey, yKey);\n            }\n            this[xKey] = pos[0];\n            this[yKey] = pos[1];\n            this[privateKey] = pos;\n            enhanceArray(this, pos);\n          }\n        });\n\n        function enhanceArray(self, pos) {\n          Object.defineProperty(pos, 0, {\n            get: function () {\n              return self[xKey];\n            },\n            set: function (val) {\n              self[xKey] = val;\n            }\n          });\n          Object.defineProperty(pos, 1, {\n            get: function () {\n              return self[yKey];\n            },\n            set: function (val) {\n              self[yKey] = val;\n            }\n          });\n        }\n      }\n\n      if (Object.defineProperty) {\n        createLegacyProperty('position', '_legacyPos', 'x', 'y');\n        createLegacyProperty('scale', '_legacyScale', 'scaleX', 'scaleY');\n        createLegacyProperty('origin', '_legacyOrigin', 'originX', 'originY');\n      }\n    }();\n\n    return Element;\n  }();\n\n  mixin(Element, Eventful);\n  mixin(Element, Transformable);\n\n  function animateTo(animatable, target, cfg, animationProps, reverse) {\n    cfg = cfg || {};\n    var animators = [];\n    animateToShallow(animatable, '', animatable, target, cfg, animationProps, animators, reverse);\n    var finishCount = animators.length;\n    var doneHappened = false;\n    var cfgDone = cfg.done;\n    var cfgAborted = cfg.aborted;\n\n    var doneCb = function () {\n      doneHappened = true;\n      finishCount--;\n\n      if (finishCount <= 0) {\n        doneHappened ? cfgDone && cfgDone() : cfgAborted && cfgAborted();\n      }\n    };\n\n    var abortedCb = function () {\n      finishCount--;\n\n      if (finishCount <= 0) {\n        doneHappened ? cfgDone && cfgDone() : cfgAborted && cfgAborted();\n      }\n    };\n\n    if (!finishCount) {\n      cfgDone && cfgDone();\n    }\n\n    if (animators.length > 0 && cfg.during) {\n      animators[0].during(function (target, percent) {\n        cfg.during(percent);\n      });\n    }\n\n    for (var i = 0; i < animators.length; i++) {\n      var animator = animators[i];\n\n      if (doneCb) {\n        animator.done(doneCb);\n      }\n\n      if (abortedCb) {\n        animator.aborted(abortedCb);\n      }\n\n      if (cfg.force) {\n        animator.duration(cfg.duration);\n      }\n\n      animator.start(cfg.easing);\n    }\n\n    return animators;\n  }\n\n  function copyArrShallow(source, target, len) {\n    for (var i = 0; i < len; i++) {\n      source[i] = target[i];\n    }\n  }\n\n  function is2DArray(value) {\n    return isArrayLike(value[0]);\n  }\n\n  function copyValue(target, source, key) {\n    if (isArrayLike(source[key])) {\n      if (!isArrayLike(target[key])) {\n        target[key] = [];\n      }\n\n      if (isTypedArray(source[key])) {\n        var len = source[key].length;\n\n        if (target[key].length !== len) {\n          target[key] = new source[key].constructor(len);\n          copyArrShallow(target[key], source[key], len);\n        }\n      } else {\n        var sourceArr = source[key];\n        var targetArr = target[key];\n        var len0 = sourceArr.length;\n\n        if (is2DArray(sourceArr)) {\n          var len1 = sourceArr[0].length;\n\n          for (var i = 0; i < len0; i++) {\n            if (!targetArr[i]) {\n              targetArr[i] = Array.prototype.slice.call(sourceArr[i]);\n            } else {\n              copyArrShallow(targetArr[i], sourceArr[i], len1);\n            }\n          }\n        } else {\n          copyArrShallow(targetArr, sourceArr, len0);\n        }\n\n        targetArr.length = sourceArr.length;\n      }\n    } else {\n      target[key] = source[key];\n    }\n  }\n\n  function isValueSame(val1, val2) {\n    return val1 === val2 || isArrayLike(val1) && isArrayLike(val2) && is1DArraySame(val1, val2);\n  }\n\n  function is1DArraySame(arr0, arr1) {\n    var len = arr0.length;\n\n    if (len !== arr1.length) {\n      return false;\n    }\n\n    for (var i = 0; i < len; i++) {\n      if (arr0[i] !== arr1[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function animateToShallow(animatable, topKey, animateObj, target, cfg, animationProps, animators, reverse) {\n    var targetKeys = keys(target);\n    var duration = cfg.duration;\n    var delay = cfg.delay;\n    var additive = cfg.additive;\n    var setToFinal = cfg.setToFinal;\n    var animateAll = !isObject(animationProps);\n    var existsAnimators = animatable.animators;\n    var animationKeys = [];\n\n    for (var k = 0; k < targetKeys.length; k++) {\n      var innerKey = targetKeys[k];\n      var targetVal = target[innerKey];\n\n      if (targetVal != null && animateObj[innerKey] != null && (animateAll || animationProps[innerKey])) {\n        if (isObject(targetVal) && !isArrayLike(targetVal) && !isGradientObject(targetVal)) {\n          if (topKey) {\n            if (!reverse) {\n              animateObj[innerKey] = targetVal;\n              animatable.updateDuringAnimation(topKey);\n            }\n\n            continue;\n          }\n\n          animateToShallow(animatable, innerKey, animateObj[innerKey], targetVal, cfg, animationProps && animationProps[innerKey], animators, reverse);\n        } else {\n          animationKeys.push(innerKey);\n        }\n      } else if (!reverse) {\n        animateObj[innerKey] = targetVal;\n        animatable.updateDuringAnimation(topKey);\n        animationKeys.push(innerKey);\n      }\n    }\n\n    var keyLen = animationKeys.length;\n\n    if (!additive && keyLen) {\n      for (var i = 0; i < existsAnimators.length; i++) {\n        var animator = existsAnimators[i];\n\n        if (animator.targetName === topKey) {\n          var allAborted = animator.stopTracks(animationKeys);\n\n          if (allAborted) {\n            var idx = indexOf(existsAnimators, animator);\n            existsAnimators.splice(idx, 1);\n          }\n        }\n      }\n    }\n\n    if (!cfg.force) {\n      animationKeys = filter(animationKeys, function (key) {\n        return !isValueSame(target[key], animateObj[key]);\n      });\n      keyLen = animationKeys.length;\n    }\n\n    if (keyLen > 0 || cfg.force && !animators.length) {\n      var revertedSource = void 0;\n      var reversedTarget = void 0;\n      var sourceClone = void 0;\n\n      if (reverse) {\n        reversedTarget = {};\n\n        if (setToFinal) {\n          revertedSource = {};\n        }\n\n        for (var i = 0; i < keyLen; i++) {\n          var innerKey = animationKeys[i];\n          reversedTarget[innerKey] = animateObj[innerKey];\n\n          if (setToFinal) {\n            revertedSource[innerKey] = target[innerKey];\n          } else {\n            animateObj[innerKey] = target[innerKey];\n          }\n        }\n      } else if (setToFinal) {\n        sourceClone = {};\n\n        for (var i = 0; i < keyLen; i++) {\n          var innerKey = animationKeys[i];\n          sourceClone[innerKey] = cloneValue(animateObj[innerKey]);\n          copyValue(animateObj, target, innerKey);\n        }\n      }\n\n      var animator = new Animator(animateObj, false, false, additive ? filter(existsAnimators, function (animator) {\n        return animator.targetName === topKey;\n      }) : null);\n      animator.targetName = topKey;\n\n      if (cfg.scope) {\n        animator.scope = cfg.scope;\n      }\n\n      if (setToFinal && revertedSource) {\n        animator.whenWithKeys(0, revertedSource, animationKeys);\n      }\n\n      if (sourceClone) {\n        animator.whenWithKeys(0, sourceClone, animationKeys);\n      }\n\n      animator.whenWithKeys(duration == null ? 500 : duration, reverse ? reversedTarget : target, animationKeys).delay(delay || 0);\n      animatable.addAnimator(animator, topKey);\n      animators.push(animator);\n    }\n  }\n\n  var Group = function (_super) {\n    __extends(Group, _super);\n\n    function Group(opts) {\n      var _this = _super.call(this) || this;\n\n      _this.isGroup = true;\n      _this._children = [];\n\n      _this.attr(opts);\n\n      return _this;\n    }\n\n    Group.prototype.childrenRef = function () {\n      return this._children;\n    };\n\n    Group.prototype.children = function () {\n      return this._children.slice();\n    };\n\n    Group.prototype.childAt = function (idx) {\n      return this._children[idx];\n    };\n\n    Group.prototype.childOfName = function (name) {\n      var children = this._children;\n\n      for (var i = 0; i < children.length; i++) {\n        if (children[i].name === name) {\n          return children[i];\n        }\n      }\n    };\n\n    Group.prototype.childCount = function () {\n      return this._children.length;\n    };\n\n    Group.prototype.add = function (child) {\n      if (child) {\n        if (child !== this && child.parent !== this) {\n          this._children.push(child);\n\n          this._doAdd(child);\n        }\n\n        {\n          if (child.__hostTarget) {\n            throw 'This elemenet has been used as an attachment';\n          }\n        }\n      }\n\n      return this;\n    };\n\n    Group.prototype.addBefore = function (child, nextSibling) {\n      if (child && child !== this && child.parent !== this && nextSibling && nextSibling.parent === this) {\n        var children = this._children;\n        var idx = children.indexOf(nextSibling);\n\n        if (idx >= 0) {\n          children.splice(idx, 0, child);\n\n          this._doAdd(child);\n        }\n      }\n\n      return this;\n    };\n\n    Group.prototype.replace = function (oldChild, newChild) {\n      var idx = indexOf(this._children, oldChild);\n\n      if (idx >= 0) {\n        this.replaceAt(newChild, idx);\n      }\n\n      return this;\n    };\n\n    Group.prototype.replaceAt = function (child, index) {\n      var children = this._children;\n      var old = children[index];\n\n      if (child && child !== this && child.parent !== this && child !== old) {\n        children[index] = child;\n        old.parent = null;\n        var zr = this.__zr;\n\n        if (zr) {\n          old.removeSelfFromZr(zr);\n        }\n\n        this._doAdd(child);\n      }\n\n      return this;\n    };\n\n    Group.prototype._doAdd = function (child) {\n      if (child.parent) {\n        child.parent.remove(child);\n      }\n\n      child.parent = this;\n      var zr = this.__zr;\n\n      if (zr && zr !== child.__zr) {\n        child.addSelfToZr(zr);\n      }\n\n      zr && zr.refresh();\n    };\n\n    Group.prototype.remove = function (child) {\n      var zr = this.__zr;\n      var children = this._children;\n      var idx = indexOf(children, child);\n\n      if (idx < 0) {\n        return this;\n      }\n\n      children.splice(idx, 1);\n      child.parent = null;\n\n      if (zr) {\n        child.removeSelfFromZr(zr);\n      }\n\n      zr && zr.refresh();\n      return this;\n    };\n\n    Group.prototype.removeAll = function () {\n      var children = this._children;\n      var zr = this.__zr;\n\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n\n        if (zr) {\n          child.removeSelfFromZr(zr);\n        }\n\n        child.parent = null;\n      }\n\n      children.length = 0;\n      return this;\n    };\n\n    Group.prototype.eachChild = function (cb, context) {\n      var children = this._children;\n\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n        cb.call(context, child, i);\n      }\n\n      return this;\n    };\n\n    Group.prototype.traverse = function (cb, context) {\n      for (var i = 0; i < this._children.length; i++) {\n        var child = this._children[i];\n        var stopped = cb.call(context, child);\n\n        if (child.isGroup && !stopped) {\n          child.traverse(cb, context);\n        }\n      }\n\n      return this;\n    };\n\n    Group.prototype.addSelfToZr = function (zr) {\n      _super.prototype.addSelfToZr.call(this, zr);\n\n      for (var i = 0; i < this._children.length; i++) {\n        var child = this._children[i];\n        child.addSelfToZr(zr);\n      }\n    };\n\n    Group.prototype.removeSelfFromZr = function (zr) {\n      _super.prototype.removeSelfFromZr.call(this, zr);\n\n      for (var i = 0; i < this._children.length; i++) {\n        var child = this._children[i];\n        child.removeSelfFromZr(zr);\n      }\n    };\n\n    Group.prototype.getBoundingRect = function (includeChildren) {\n      var tmpRect = new BoundingRect(0, 0, 0, 0);\n      var children = includeChildren || this._children;\n      var tmpMat = [];\n      var rect = null;\n\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n\n        if (child.ignore || child.invisible) {\n          continue;\n        }\n\n        var childRect = child.getBoundingRect();\n        var transform = child.getLocalTransform(tmpMat);\n\n        if (transform) {\n          BoundingRect.applyTransform(tmpRect, childRect, transform);\n          rect = rect || tmpRect.clone();\n          rect.union(tmpRect);\n        } else {\n          rect = rect || childRect.clone();\n          rect.union(childRect);\n        }\n      }\n\n      return rect || tmpRect;\n    };\n\n    return Group;\n  }(Element);\n\n  Group.prototype.type = 'group';\n  /*!\n  * ZRender, a high performance 2d drawing library.\n  *\n  * Copyright (c) 2013, Baidu Inc.\n  * All rights reserved.\n  *\n  * LICENSE\n  * https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\n  */\n\n  var painterCtors = {};\n  var instances$1 = {};\n\n  function delInstance(id) {\n    delete instances$1[id];\n  }\n\n  function isDarkMode(backgroundColor) {\n    if (!backgroundColor) {\n      return false;\n    }\n\n    if (typeof backgroundColor === 'string') {\n      return lum(backgroundColor, 1) < DARK_MODE_THRESHOLD;\n    } else if (backgroundColor.colorStops) {\n      var colorStops = backgroundColor.colorStops;\n      var totalLum = 0;\n      var len = colorStops.length;\n\n      for (var i = 0; i < len; i++) {\n        totalLum += lum(colorStops[i].color, 1);\n      }\n\n      totalLum /= len;\n      return totalLum < DARK_MODE_THRESHOLD;\n    }\n\n    return false;\n  }\n\n  var ZRender = function () {\n    function ZRender(id, dom, opts) {\n      var _this = this;\n\n      this._sleepAfterStill = 10;\n      this._stillFrameAccum = 0;\n      this._needsRefresh = true;\n      this._needsRefreshHover = true;\n      this._darkMode = false;\n      opts = opts || {};\n      this.dom = dom;\n      this.id = id;\n      var storage = new Storage();\n      var rendererType = opts.renderer || 'canvas';\n\n      if (!painterCtors[rendererType]) {\n        rendererType = keys(painterCtors)[0];\n      }\n\n      {\n        if (!painterCtors[rendererType]) {\n          throw new Error(\"Renderer '\" + rendererType + \"' is not imported. Please import it first.\");\n        }\n      }\n      opts.useDirtyRect = opts.useDirtyRect == null ? false : opts.useDirtyRect;\n      var painter = new painterCtors[rendererType](dom, storage, opts, id);\n      var ssrMode = opts.ssr || painter.ssrOnly;\n      this.storage = storage;\n      this.painter = painter;\n      var handerProxy = !env.node && !env.worker && !ssrMode ? new HandlerDomProxy(painter.getViewportRoot(), painter.root) : null;\n      this.handler = new Handler(storage, painter, handerProxy, painter.root);\n      this.animation = new Animation({\n        stage: {\n          update: ssrMode ? null : function () {\n            return _this._flush(true);\n          }\n        }\n      });\n\n      if (!ssrMode) {\n        this.animation.start();\n      }\n    }\n\n    ZRender.prototype.add = function (el) {\n      if (!el) {\n        return;\n      }\n\n      this.storage.addRoot(el);\n      el.addSelfToZr(this);\n      this.refresh();\n    };\n\n    ZRender.prototype.remove = function (el) {\n      if (!el) {\n        return;\n      }\n\n      this.storage.delRoot(el);\n      el.removeSelfFromZr(this);\n      this.refresh();\n    };\n\n    ZRender.prototype.configLayer = function (zLevel, config) {\n      if (this.painter.configLayer) {\n        this.painter.configLayer(zLevel, config);\n      }\n\n      this.refresh();\n    };\n\n    ZRender.prototype.setBackgroundColor = function (backgroundColor) {\n      if (this.painter.setBackgroundColor) {\n        this.painter.setBackgroundColor(backgroundColor);\n      }\n\n      this.refresh();\n      this._backgroundColor = backgroundColor;\n      this._darkMode = isDarkMode(backgroundColor);\n    };\n\n    ZRender.prototype.getBackgroundColor = function () {\n      return this._backgroundColor;\n    };\n\n    ZRender.prototype.setDarkMode = function (darkMode) {\n      this._darkMode = darkMode;\n    };\n\n    ZRender.prototype.isDarkMode = function () {\n      return this._darkMode;\n    };\n\n    ZRender.prototype.refreshImmediately = function (fromInside) {\n      if (!fromInside) {\n        this.animation.update(true);\n      }\n\n      this._needsRefresh = false;\n      this.painter.refresh();\n      this._needsRefresh = false;\n    };\n\n    ZRender.prototype.refresh = function () {\n      this._needsRefresh = true;\n      this.animation.start();\n    };\n\n    ZRender.prototype.flush = function () {\n      this._flush(false);\n    };\n\n    ZRender.prototype._flush = function (fromInside) {\n      var triggerRendered;\n      var start = getTime();\n\n      if (this._needsRefresh) {\n        triggerRendered = true;\n        this.refreshImmediately(fromInside);\n      }\n\n      if (this._needsRefreshHover) {\n        triggerRendered = true;\n        this.refreshHoverImmediately();\n      }\n\n      var end = getTime();\n\n      if (triggerRendered) {\n        this._stillFrameAccum = 0;\n        this.trigger('rendered', {\n          elapsedTime: end - start\n        });\n      } else if (this._sleepAfterStill > 0) {\n        this._stillFrameAccum++;\n\n        if (this._stillFrameAccum > this._sleepAfterStill) {\n          this.animation.stop();\n        }\n      }\n    };\n\n    ZRender.prototype.setSleepAfterStill = function (stillFramesCount) {\n      this._sleepAfterStill = stillFramesCount;\n    };\n\n    ZRender.prototype.wakeUp = function () {\n      this.animation.start();\n      this._stillFrameAccum = 0;\n    };\n\n    ZRender.prototype.refreshHover = function () {\n      this._needsRefreshHover = true;\n    };\n\n    ZRender.prototype.refreshHoverImmediately = function () {\n      this._needsRefreshHover = false;\n\n      if (this.painter.refreshHover && this.painter.getType() === 'canvas') {\n        this.painter.refreshHover();\n      }\n    };\n\n    ZRender.prototype.resize = function (opts) {\n      opts = opts || {};\n      this.painter.resize(opts.width, opts.height);\n      this.handler.resize();\n    };\n\n    ZRender.prototype.clearAnimation = function () {\n      this.animation.clear();\n    };\n\n    ZRender.prototype.getWidth = function () {\n      return this.painter.getWidth();\n    };\n\n    ZRender.prototype.getHeight = function () {\n      return this.painter.getHeight();\n    };\n\n    ZRender.prototype.setCursorStyle = function (cursorStyle) {\n      this.handler.setCursorStyle(cursorStyle);\n    };\n\n    ZRender.prototype.findHover = function (x, y) {\n      return this.handler.findHover(x, y);\n    };\n\n    ZRender.prototype.on = function (eventName, eventHandler, context) {\n      this.handler.on(eventName, eventHandler, context);\n      return this;\n    };\n\n    ZRender.prototype.off = function (eventName, eventHandler) {\n      this.handler.off(eventName, eventHandler);\n    };\n\n    ZRender.prototype.trigger = function (eventName, event) {\n      this.handler.trigger(eventName, event);\n    };\n\n    ZRender.prototype.clear = function () {\n      var roots = this.storage.getRoots();\n\n      for (var i = 0; i < roots.length; i++) {\n        if (roots[i] instanceof Group) {\n          roots[i].removeSelfFromZr(this);\n        }\n      }\n\n      this.storage.delAllRoots();\n      this.painter.clear();\n    };\n\n    ZRender.prototype.dispose = function () {\n      this.animation.stop();\n      this.clear();\n      this.storage.dispose();\n      this.painter.dispose();\n      this.handler.dispose();\n      this.animation = this.storage = this.painter = this.handler = null;\n      delInstance(this.id);\n    };\n\n    return ZRender;\n  }();\n\n  function init$1(dom, opts) {\n    var zr = new ZRender(guid(), dom, opts);\n    instances$1[zr.id] = zr;\n    return zr;\n  }\n\n  function dispose$1(zr) {\n    zr.dispose();\n  }\n\n  function disposeAll() {\n    for (var key in instances$1) {\n      if (instances$1.hasOwnProperty(key)) {\n        instances$1[key].dispose();\n      }\n    }\n\n    instances$1 = {};\n  }\n\n  function getInstance(id) {\n    return instances$1[id];\n  }\n\n  function registerPainter(name, Ctor) {\n    painterCtors[name] = Ctor;\n  }\n\n  var version$1 = '5.3.2';\n  var zrender = (Object.freeze || Object)({\n    init: init$1,\n    dispose: dispose$1,\n    disposeAll: disposeAll,\n    getInstance: getInstance,\n    registerPainter: registerPainter,\n    version: version$1\n  });\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /*\n  * A third-party license is embeded for some of the code in this file:\n  * The method \"quantile\" was copied from \"d3.js\".\n  * (See more details in the comment of the method below.)\n  * The use of the source code of this file is also subject to the terms\n  * and consitions of the license of \"d3.js\" (BSD-3Clause, see\n  * </licenses/LICENSE-d3>).\n  */\n\n  var RADIAN_EPSILON = 1e-4; // Although chrome already enlarge this number to 100 for `toFixed`, but\n  // we sill follow the spec for compatibility.\n\n  var ROUND_SUPPORTED_PRECISION_MAX = 20;\n\n  function _trim(str) {\n    return str.replace(/^\\s+|\\s+$/g, '');\n  }\n  /**\n   * Linear mapping a value from domain to range\n   * @param  val\n   * @param  domain Domain extent domain[0] can be bigger than domain[1]\n   * @param  range  Range extent range[0] can be bigger than range[1]\n   * @param  clamp Default to be false\n   */\n\n\n  function linearMap(val, domain, range, clamp) {\n    var d0 = domain[0];\n    var d1 = domain[1];\n    var r0 = range[0];\n    var r1 = range[1];\n    var subDomain = d1 - d0;\n    var subRange = r1 - r0;\n\n    if (subDomain === 0) {\n      return subRange === 0 ? r0 : (r0 + r1) / 2;\n    } // Avoid accuracy problem in edge, such as\n    // 146.39 - 62.83 === 83.55999999999999.\n    // See echarts/test/ut/spec/util/number.js#linearMap#accuracyError\n    // It is a little verbose for efficiency considering this method\n    // is a hotspot.\n\n\n    if (clamp) {\n      if (subDomain > 0) {\n        if (val <= d0) {\n          return r0;\n        } else if (val >= d1) {\n          return r1;\n        }\n      } else {\n        if (val >= d0) {\n          return r0;\n        } else if (val <= d1) {\n          return r1;\n        }\n      }\n    } else {\n      if (val === d0) {\n        return r0;\n      }\n\n      if (val === d1) {\n        return r1;\n      }\n    }\n\n    return (val - d0) / subDomain * subRange + r0;\n  }\n  /**\n   * Convert a percent string to absolute number.\n   * Returns NaN if percent is not a valid string or number\n   */\n\n\n  function parsePercent$1(percent, all) {\n    switch (percent) {\n      case 'center':\n      case 'middle':\n        percent = '50%';\n        break;\n\n      case 'left':\n      case 'top':\n        percent = '0%';\n        break;\n\n      case 'right':\n      case 'bottom':\n        percent = '100%';\n        break;\n    }\n\n    if (isString(percent)) {\n      if (_trim(percent).match(/%$/)) {\n        return parseFloat(percent) / 100 * all;\n      }\n\n      return parseFloat(percent);\n    }\n\n    return percent == null ? NaN : +percent;\n  }\n\n  function round(x, precision, returnStr) {\n    if (precision == null) {\n      precision = 10;\n    } // Avoid range error\n\n\n    precision = Math.min(Math.max(0, precision), ROUND_SUPPORTED_PRECISION_MAX); // PENDING: 1.005.toFixed(2) is '1.00' rather than '1.01'\n\n    x = (+x).toFixed(precision);\n    return returnStr ? x : +x;\n  }\n  /**\n   * Inplacd asc sort arr.\n   * The input arr will be modified.\n   */\n\n\n  function asc(arr) {\n    arr.sort(function (a, b) {\n      return a - b;\n    });\n    return arr;\n  }\n  /**\n   * Get precision.\n   */\n\n\n  function getPrecision(val) {\n    val = +val;\n\n    if (isNaN(val)) {\n      return 0;\n    } // It is much faster than methods converting number to string as follows\n    //      let tmp = val.toString();\n    //      return tmp.length - 1 - tmp.indexOf('.');\n    // especially when precision is low\n    // Notice:\n    // (1) If the loop count is over about 20, it is slower than `getPrecisionSafe`.\n    //     (see https://jsbench.me/2vkpcekkvw/1)\n    // (2) If the val is less than for example 1e-15, the result may be incorrect.\n    //     (see test/ut/spec/util/number.test.ts `getPrecision_equal_random`)\n\n\n    if (val > 1e-14) {\n      var e = 1;\n\n      for (var i = 0; i < 15; i++, e *= 10) {\n        if (Math.round(val * e) / e === val) {\n          return i;\n        }\n      }\n    }\n\n    return getPrecisionSafe(val);\n  }\n  /**\n   * Get precision with slow but safe method\n   */\n\n\n  function getPrecisionSafe(val) {\n    // toLowerCase for: '3.4E-12'\n    var str = val.toString().toLowerCase(); // Consider scientific notation: '3.4e-12' '3.4e+12'\n\n    var eIndex = str.indexOf('e');\n    var exp = eIndex > 0 ? +str.slice(eIndex + 1) : 0;\n    var significandPartLen = eIndex > 0 ? eIndex : str.length;\n    var dotIndex = str.indexOf('.');\n    var decimalPartLen = dotIndex < 0 ? 0 : significandPartLen - 1 - dotIndex;\n    return Math.max(0, decimalPartLen - exp);\n  }\n  /**\n   * Minimal dicernible data precisioin according to a single pixel.\n   */\n\n\n  function getPixelPrecision(dataExtent, pixelExtent) {\n    var log = Math.log;\n    var LN10 = Math.LN10;\n    var dataQuantity = Math.floor(log(dataExtent[1] - dataExtent[0]) / LN10);\n    var sizeQuantity = Math.round(log(Math.abs(pixelExtent[1] - pixelExtent[0])) / LN10); // toFixed() digits argument must be between 0 and 20.\n\n    var precision = Math.min(Math.max(-dataQuantity + sizeQuantity, 0), 20);\n    return !isFinite(precision) ? 20 : precision;\n  }\n  /**\n   * Get a data of given precision, assuring the sum of percentages\n   * in valueList is 1.\n   * The largest remainer method is used.\n   * https://en.wikipedia.org/wiki/Largest_remainder_method\n   *\n   * @param valueList a list of all data\n   * @param idx index of the data to be processed in valueList\n   * @param precision integer number showing digits of precision\n   * @return percent ranging from 0 to 100\n   */\n\n\n  function getPercentWithPrecision(valueList, idx, precision) {\n    if (!valueList[idx]) {\n      return 0;\n    }\n\n    var sum = reduce(valueList, function (acc, val) {\n      return acc + (isNaN(val) ? 0 : val);\n    }, 0);\n\n    if (sum === 0) {\n      return 0;\n    }\n\n    var digits = Math.pow(10, precision);\n    var votesPerQuota = map(valueList, function (val) {\n      return (isNaN(val) ? 0 : val) / sum * digits * 100;\n    });\n    var targetSeats = digits * 100;\n    var seats = map(votesPerQuota, function (votes) {\n      // Assign automatic seats.\n      return Math.floor(votes);\n    });\n    var currentSum = reduce(seats, function (acc, val) {\n      return acc + val;\n    }, 0);\n    var remainder = map(votesPerQuota, function (votes, idx) {\n      return votes - seats[idx];\n    }); // Has remainding votes.\n\n    while (currentSum < targetSeats) {\n      // Find next largest remainder.\n      var max = Number.NEGATIVE_INFINITY;\n      var maxId = null;\n\n      for (var i = 0, len = remainder.length; i < len; ++i) {\n        if (remainder[i] > max) {\n          max = remainder[i];\n          maxId = i;\n        }\n      } // Add a vote to max remainder.\n\n\n      ++seats[maxId];\n      remainder[maxId] = 0;\n      ++currentSum;\n    }\n\n    return seats[idx] / digits;\n  }\n  /**\n   * Solve the floating point adding problem like 0.1 + 0.2 === 0.30000000000000004\n   * See <http://0.30000000000000004.com/>\n   */\n\n\n  function addSafe(val0, val1) {\n    var maxPrecision = Math.max(getPrecision(val0), getPrecision(val1)); // const multiplier = Math.pow(10, maxPrecision);\n    // return (Math.round(val0 * multiplier) + Math.round(val1 * multiplier)) / multiplier;\n\n    var sum = val0 + val1; // // PENDING: support more?\n\n    return maxPrecision > ROUND_SUPPORTED_PRECISION_MAX ? sum : round(sum, maxPrecision);\n  } // Number.MAX_SAFE_INTEGER, ie do not support.\n\n\n  var MAX_SAFE_INTEGER = 9007199254740991;\n  /**\n   * To 0 - 2 * PI, considering negative radian.\n   */\n\n  function remRadian(radian) {\n    var pi2 = Math.PI * 2;\n    return (radian % pi2 + pi2) % pi2;\n  }\n  /**\n   * @param {type} radian\n   * @return {boolean}\n   */\n\n\n  function isRadianAroundZero(val) {\n    return val > -RADIAN_EPSILON && val < RADIAN_EPSILON;\n  } // eslint-disable-next-line\n\n\n  var TIME_REG = /^(?:(\\d{4})(?:[-\\/](\\d{1,2})(?:[-\\/](\\d{1,2})(?:[T ](\\d{1,2})(?::(\\d{1,2})(?::(\\d{1,2})(?:[.,](\\d+))?)?)?(Z|[\\+\\-]\\d\\d:?\\d\\d)?)?)?)?)?$/; // jshint ignore:line\n\n  /**\n   * @param value valid type: number | string | Date, otherwise return `new Date(NaN)`\n   *   These values can be accepted:\n   *   + An instance of Date, represent a time in its own time zone.\n   *   + Or string in a subset of ISO 8601, only including:\n   *     + only year, month, date: '2012-03', '2012-03-01', '2012-03-01 05', '2012-03-01 05:06',\n   *     + separated with T or space: '2012-03-01T12:22:33.123', '2012-03-01 12:22:33.123',\n   *     + time zone: '2012-03-01T12:22:33Z', '2012-03-01T12:22:33+8000', '2012-03-01T12:22:33-05:00',\n   *     all of which will be treated as local time if time zone is not specified\n   *     (see <https://momentjs.com/>).\n   *   + Or other string format, including (all of which will be treated as loacal time):\n   *     '2012', '2012-3-1', '2012/3/1', '2012/03/01',\n   *     '2009/6/12 2:00', '2009/6/12 2:05:08', '2009/6/12 2:05:08.123'\n   *   + a timestamp, which represent a time in UTC.\n   * @return date Never be null/undefined. If invalid, return `new Date(NaN)`.\n   */\n\n  function parseDate(value) {\n    if (value instanceof Date) {\n      return value;\n    } else if (isString(value)) {\n      // Different browsers parse date in different way, so we parse it manually.\n      // Some other issues:\n      // new Date('1970-01-01') is UTC,\n      // new Date('1970/01/01') and new Date('1970-1-01') is local.\n      // See issue #3623\n      var match = TIME_REG.exec(value);\n\n      if (!match) {\n        // return Invalid Date.\n        return new Date(NaN);\n      } // Use local time when no timezone offset specifed.\n\n\n      if (!match[8]) {\n        // match[n] can only be string or undefined.\n        // But take care of '12' + 1 => '121'.\n        return new Date(+match[1], +(match[2] || 1) - 1, +match[3] || 1, +match[4] || 0, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0);\n      } // Timezoneoffset of Javascript Date has considered DST (Daylight Saving Time,\n      // https://tc39.github.io/ecma262/#sec-daylight-saving-time-adjustment).\n      // For example, system timezone is set as \"Time Zone: America/Toronto\",\n      // then these code will get different result:\n      // `new Date(1478411999999).getTimezoneOffset();  // get 240`\n      // `new Date(1478412000000).getTimezoneOffset();  // get 300`\n      // So we should not use `new Date`, but use `Date.UTC`.\n      else {\n          var hour = +match[4] || 0;\n\n          if (match[8].toUpperCase() !== 'Z') {\n            hour -= +match[8].slice(0, 3);\n          }\n\n          return new Date(Date.UTC(+match[1], +(match[2] || 1) - 1, +match[3] || 1, hour, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0));\n        }\n    } else if (value == null) {\n      return new Date(NaN);\n    }\n\n    return new Date(Math.round(value));\n  }\n  /**\n   * Quantity of a number. e.g. 0.1, 1, 10, 100\n   *\n   * @param val\n   * @return\n   */\n\n\n  function quantity(val) {\n    return Math.pow(10, quantityExponent(val));\n  }\n  /**\n   * Exponent of the quantity of a number\n   * e.g., 1234 equals to 1.234*10^3, so quantityExponent(1234) is 3\n   *\n   * @param val non-negative value\n   * @return\n   */\n\n\n  function quantityExponent(val) {\n    if (val === 0) {\n      return 0;\n    }\n\n    var exp = Math.floor(Math.log(val) / Math.LN10);\n    /**\n     * exp is expected to be the rounded-down result of the base-10 log of val.\n     * But due to the precision loss with Math.log(val), we need to restore it\n     * using 10^exp to make sure we can get val back from exp. #11249\n     */\n\n    if (val / Math.pow(10, exp) >= 10) {\n      exp++;\n    }\n\n    return exp;\n  }\n  /**\n   * find a “nice” number approximately equal to x. Round the number if round = true,\n   * take ceiling if round = false. The primary observation is that the “nicest”\n   * numbers in decimal are 1, 2, and 5, and all power-of-ten multiples of these numbers.\n   *\n   * See \"Nice Numbers for Graph Labels\" of Graphic Gems.\n   *\n   * @param  val Non-negative value.\n   * @param  round\n   * @return Niced number\n   */\n\n\n  function nice(val, round) {\n    var exponent = quantityExponent(val);\n    var exp10 = Math.pow(10, exponent);\n    var f = val / exp10; // 1 <= f < 10\n\n    var nf;\n\n    if (round) {\n      if (f < 1.5) {\n        nf = 1;\n      } else if (f < 2.5) {\n        nf = 2;\n      } else if (f < 4) {\n        nf = 3;\n      } else if (f < 7) {\n        nf = 5;\n      } else {\n        nf = 10;\n      }\n    } else {\n      if (f < 1) {\n        nf = 1;\n      } else if (f < 2) {\n        nf = 2;\n      } else if (f < 3) {\n        nf = 3;\n      } else if (f < 5) {\n        nf = 5;\n      } else {\n        nf = 10;\n      }\n    }\n\n    val = nf * exp10; // Fix 3 * 0.1 === 0.30000000000000004 issue (see IEEE 754).\n    // 20 is the uppper bound of toFixed.\n\n    return exponent >= -20 ? +val.toFixed(exponent < 0 ? -exponent : 0) : val;\n  }\n  /**\n   * This code was copied from \"d3.js\"\n   * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/arrays/quantile.js>.\n   * See the license statement at the head of this file.\n   * @param ascArr\n   */\n\n\n  function quantile(ascArr, p) {\n    var H = (ascArr.length - 1) * p + 1;\n    var h = Math.floor(H);\n    var v = +ascArr[h - 1];\n    var e = H - h;\n    return e ? v + e * (ascArr[h] - v) : v;\n  }\n  /**\n   * Order intervals asc, and split them when overlap.\n   * expect(numberUtil.reformIntervals([\n   *     {interval: [18, 62], close: [1, 1]},\n   *     {interval: [-Infinity, -70], close: [0, 0]},\n   *     {interval: [-70, -26], close: [1, 1]},\n   *     {interval: [-26, 18], close: [1, 1]},\n   *     {interval: [62, 150], close: [1, 1]},\n   *     {interval: [106, 150], close: [1, 1]},\n   *     {interval: [150, Infinity], close: [0, 0]}\n   * ])).toEqual([\n   *     {interval: [-Infinity, -70], close: [0, 0]},\n   *     {interval: [-70, -26], close: [1, 1]},\n   *     {interval: [-26, 18], close: [0, 1]},\n   *     {interval: [18, 62], close: [0, 1]},\n   *     {interval: [62, 150], close: [0, 1]},\n   *     {interval: [150, Infinity], close: [0, 0]}\n   * ]);\n   * @param list, where `close` mean open or close\n   *        of the interval, and Infinity can be used.\n   * @return The origin list, which has been reformed.\n   */\n\n\n  function reformIntervals(list) {\n    list.sort(function (a, b) {\n      return littleThan(a, b, 0) ? -1 : 1;\n    });\n    var curr = -Infinity;\n    var currClose = 1;\n\n    for (var i = 0; i < list.length;) {\n      var interval = list[i].interval;\n      var close_1 = list[i].close;\n\n      for (var lg = 0; lg < 2; lg++) {\n        if (interval[lg] <= curr) {\n          interval[lg] = curr;\n          close_1[lg] = !lg ? 1 - currClose : 1;\n        }\n\n        curr = interval[lg];\n        currClose = close_1[lg];\n      }\n\n      if (interval[0] === interval[1] && close_1[0] * close_1[1] !== 1) {\n        list.splice(i, 1);\n      } else {\n        i++;\n      }\n    }\n\n    return list;\n\n    function littleThan(a, b, lg) {\n      return a.interval[lg] < b.interval[lg] || a.interval[lg] === b.interval[lg] && (a.close[lg] - b.close[lg] === (!lg ? 1 : -1) || !lg && littleThan(a, b, 1));\n    }\n  }\n  /**\n   * [Numberic is defined as]:\n   *     `parseFloat(val) == val`\n   * For example:\n   * numeric:\n   *     typeof number except NaN, '-123', '123', '2e3', '-2e3', '011', 'Infinity', Infinity,\n   *     and they rounded by white-spaces or line-terminal like ' -123 \\n ' (see es spec)\n   * not-numeric:\n   *     null, undefined, [], {}, true, false, 'NaN', NaN, '123ab',\n   *     empty string, string with only white-spaces or line-terminal (see es spec),\n   *     0x12, '0x12', '-0x12', 012, '012', '-012',\n   *     non-string, ...\n   *\n   * @test See full test cases in `test/ut/spec/util/number.js`.\n   * @return Must be a typeof number. If not numeric, return NaN.\n   */\n\n\n  function numericToNumber(val) {\n    var valFloat = parseFloat(val);\n    return valFloat == val // eslint-disable-line eqeqeq\n    && (valFloat !== 0 || !isString(val) || val.indexOf('x') <= 0) // For case ' 0x0 '.\n    ? valFloat : NaN;\n  }\n  /**\n   * Definition of \"numeric\": see `numericToNumber`.\n   */\n\n\n  function isNumeric(val) {\n    return !isNaN(numericToNumber(val));\n  }\n  /**\n   * Use random base to prevent users hard code depending on\n   * this auto generated marker id.\n   * @return An positive integer.\n   */\n\n\n  function getRandomIdBase() {\n    return Math.round(Math.random() * 9);\n  }\n  /**\n   * Get the greatest common dividor\n   *\n   * @param {number} a one number\n   * @param {number} b the other number\n   */\n\n\n  function getGreatestCommonDividor(a, b) {\n    if (b === 0) {\n      return a;\n    }\n\n    return getGreatestCommonDividor(b, a % b);\n  }\n  /**\n   * Get the least common multiple\n   *\n   * @param {number} a one number\n   * @param {number} b the other number\n   */\n\n\n  function getLeastCommonMultiple(a, b) {\n    if (a == null) {\n      return b;\n    }\n\n    if (b == null) {\n      return a;\n    }\n\n    return a * b / getGreatestCommonDividor(a, b);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var ECHARTS_PREFIX = '[ECharts] ';\n  var storedLogs = {};\n  var hasConsole = typeof console !== 'undefined' // eslint-disable-next-line\n  && console.warn && console.log;\n\n  function outputLog(type, str, onlyOnce) {\n    if (hasConsole) {\n      if (onlyOnce) {\n        if (storedLogs[str]) {\n          return;\n        }\n\n        storedLogs[str] = true;\n      } // eslint-disable-next-line\n\n\n      console[type](ECHARTS_PREFIX + str);\n    }\n  }\n\n  function log(str, onlyOnce) {\n    outputLog('log', str, onlyOnce);\n  }\n\n  function warn(str, onlyOnce) {\n    outputLog('warn', str, onlyOnce);\n  }\n\n  function error(str, onlyOnce) {\n    outputLog('error', str, onlyOnce);\n  }\n\n  function deprecateLog(str) {\n    {\n      // Not display duplicate message.\n      outputLog('warn', 'DEPRECATED: ' + str, true);\n    }\n  }\n\n  function deprecateReplaceLog(oldOpt, newOpt, scope) {\n    {\n      deprecateLog((scope ? \"[\" + scope + \"]\" : '') + (oldOpt + \" is deprecated, use \" + newOpt + \" instead.\"));\n    }\n  }\n  /**\n   * If in __DEV__ environment, get console printable message for users hint.\n   * Parameters are separated by ' '.\n   * @usuage\n   * makePrintable('This is an error on', someVar, someObj);\n   *\n   * @param hintInfo anything about the current execution context to hint users.\n   * @throws Error\n   */\n\n\n  function makePrintable() {\n    var hintInfo = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      hintInfo[_i] = arguments[_i];\n    }\n\n    var msg = '';\n    {\n      // Fuzzy stringify for print.\n      // This code only exist in dev environment.\n      var makePrintableStringIfPossible_1 = function (val) {\n        return val === void 0 ? 'undefined' : val === Infinity ? 'Infinity' : val === -Infinity ? '-Infinity' : eqNaN(val) ? 'NaN' : val instanceof Date ? 'Date(' + val.toISOString() + ')' : isFunction(val) ? 'function () { ... }' : isRegExp(val) ? val + '' : null;\n      };\n\n      msg = map(hintInfo, function (arg) {\n        if (isString(arg)) {\n          // Print without quotation mark for some statement.\n          return arg;\n        } else {\n          var printableStr = makePrintableStringIfPossible_1(arg);\n\n          if (printableStr != null) {\n            return printableStr;\n          } else if (typeof JSON !== 'undefined' && JSON.stringify) {\n            try {\n              return JSON.stringify(arg, function (n, val) {\n                var printableStr = makePrintableStringIfPossible_1(val);\n                return printableStr == null ? val : printableStr;\n              }); // In most cases the info object is small, so do not line break.\n            } catch (err) {\n              return '?';\n            }\n          } else {\n            return '?';\n          }\n        }\n      }).join(' ');\n    }\n    return msg;\n  }\n  /**\n   * @throws Error\n   */\n\n\n  function throwError(msg) {\n    throw new Error(msg);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function interpolateNumber$1(p0, p1, percent) {\n    return (p1 - p0) * percent + p0;\n  }\n  /**\n   * Make the name displayable. But we should\n   * make sure it is not duplicated with user\n   * specified name, so use '\\0';\n   */\n\n\n  var DUMMY_COMPONENT_NAME_PREFIX = 'series\\0';\n  var INTERNAL_COMPONENT_ID_PREFIX = '\\0_ec_\\0';\n  /**\n   * If value is not array, then translate it to array.\n   * @param  {*} value\n   * @return {Array} [value] or value\n   */\n\n  function normalizeToArray(value) {\n    return value instanceof Array ? value : value == null ? [] : [value];\n  }\n  /**\n   * Sync default option between normal and emphasis like `position` and `show`\n   * In case some one will write code like\n   *     label: {\n   *          show: false,\n   *          position: 'outside',\n   *          fontSize: 18\n   *     },\n   *     emphasis: {\n   *          label: { show: true }\n   *     }\n   */\n\n\n  function defaultEmphasis(opt, key, subOpts) {\n    // Caution: performance sensitive.\n    if (opt) {\n      opt[key] = opt[key] || {};\n      opt.emphasis = opt.emphasis || {};\n      opt.emphasis[key] = opt.emphasis[key] || {}; // Default emphasis option from normal\n\n      for (var i = 0, len = subOpts.length; i < len; i++) {\n        var subOptName = subOpts[i];\n\n        if (!opt.emphasis[key].hasOwnProperty(subOptName) && opt[key].hasOwnProperty(subOptName)) {\n          opt.emphasis[key][subOptName] = opt[key][subOptName];\n        }\n      }\n    }\n  }\n\n  var TEXT_STYLE_OPTIONS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'rich', 'tag', 'color', 'textBorderColor', 'textBorderWidth', 'width', 'height', 'lineHeight', 'align', 'verticalAlign', 'baseline', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY', 'backgroundColor', 'borderColor', 'borderWidth', 'borderRadius', 'padding']; // modelUtil.LABEL_OPTIONS = modelUtil.TEXT_STYLE_OPTIONS.concat([\n  //     'position', 'offset', 'rotate', 'origin', 'show', 'distance', 'formatter',\n  //     'fontStyle', 'fontWeight', 'fontSize', 'fontFamily',\n  //     // FIXME: deprecated, check and remove it.\n  //     'textStyle'\n  // ]);\n\n  /**\n   * The method do not ensure performance.\n   * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n   * This helper method retieves value from data.\n   */\n\n  function getDataItemValue(dataItem) {\n    return isObject(dataItem) && !isArray(dataItem) && !(dataItem instanceof Date) ? dataItem.value : dataItem;\n  }\n  /**\n   * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n   * This helper method determine if dataItem has extra option besides value\n   */\n\n\n  function isDataItemOption(dataItem) {\n    return isObject(dataItem) && !(dataItem instanceof Array); // // markLine data can be array\n    // && !(dataItem[0] && isObject(dataItem[0]) && !(dataItem[0] instanceof Array));\n  }\n  /**\n   * Mapping to existings for merge.\n   *\n   * Mode \"normalMege\":\n   *     The mapping result (merge result) will keep the order of the existing\n   *     component, rather than the order of new option. Because we should ensure\n   *     some specified index reference (like xAxisIndex) keep work.\n   *     And in most cases, \"merge option\" is used to update partial option but not\n   *     be expected to change the order.\n   *\n   * Mode \"replaceMege\":\n   *     (1) Only the id mapped components will be merged.\n   *     (2) Other existing components (except internal compoonets) will be removed.\n   *     (3) Other new options will be used to create new component.\n   *     (4) The index of the existing compoents will not be modified.\n   *     That means their might be \"hole\" after the removal.\n   *     The new components are created first at those available index.\n   *\n   * Mode \"replaceAll\":\n   *     This mode try to support that reproduce an echarts instance from another\n   *     echarts instance (via `getOption`) in some simple cases.\n   *     In this senario, the `result` index are exactly the consistent with the `newCmptOptions`,\n   *     which ensures the compoennt index referring (like `xAxisIndex: ?`) corrent. That is,\n   *     the \"hole\" in `newCmptOptions` will also be kept.\n   *     On the contrary, other modes try best to eliminate holes.\n   *     PENDING: This is an experimental mode yet.\n   *\n   * @return See the comment of <MappingResult>.\n   */\n\n\n  function mappingToExists(existings, newCmptOptions, mode) {\n    var isNormalMergeMode = mode === 'normalMerge';\n    var isReplaceMergeMode = mode === 'replaceMerge';\n    var isReplaceAllMode = mode === 'replaceAll';\n    existings = existings || [];\n    newCmptOptions = (newCmptOptions || []).slice();\n    var existingIdIdxMap = createHashMap(); // Validate id and name on user input option.\n\n    each(newCmptOptions, function (cmptOption, index) {\n      if (!isObject(cmptOption)) {\n        newCmptOptions[index] = null;\n        return;\n      }\n\n      {\n        // There is some legacy case that name is set as `false`.\n        // But should work normally rather than throw error.\n        if (cmptOption.id != null && !isValidIdOrName(cmptOption.id)) {\n          warnInvalidateIdOrName(cmptOption.id);\n        }\n\n        if (cmptOption.name != null && !isValidIdOrName(cmptOption.name)) {\n          warnInvalidateIdOrName(cmptOption.name);\n        }\n      }\n    });\n    var result = prepareResult(existings, existingIdIdxMap, mode);\n\n    if (isNormalMergeMode || isReplaceMergeMode) {\n      mappingById(result, existings, existingIdIdxMap, newCmptOptions);\n    }\n\n    if (isNormalMergeMode) {\n      mappingByName(result, newCmptOptions);\n    }\n\n    if (isNormalMergeMode || isReplaceMergeMode) {\n      mappingByIndex(result, newCmptOptions, isReplaceMergeMode);\n    } else if (isReplaceAllMode) {\n      mappingInReplaceAllMode(result, newCmptOptions);\n    }\n\n    makeIdAndName(result); // The array `result` MUST NOT contain elided items, otherwise the\n    // forEach will ommit those items and result in incorrect result.\n\n    return result;\n  }\n\n  function prepareResult(existings, existingIdIdxMap, mode) {\n    var result = [];\n\n    if (mode === 'replaceAll') {\n      return result;\n    } // Do not use native `map` to in case that the array `existings`\n    // contains elided items, which will be ommited.\n\n\n    for (var index = 0; index < existings.length; index++) {\n      var existing = existings[index]; // Because of replaceMerge, `existing` may be null/undefined.\n\n      if (existing && existing.id != null) {\n        existingIdIdxMap.set(existing.id, index);\n      } // For non-internal-componnets:\n      //     Mode \"normalMerge\": all existings kept.\n      //     Mode \"replaceMerge\": all existing removed unless mapped by id.\n      // For internal-components:\n      //     go with \"replaceMerge\" approach in both mode.\n\n\n      result.push({\n        existing: mode === 'replaceMerge' || isComponentIdInternal(existing) ? null : existing,\n        newOption: null,\n        keyInfo: null,\n        brandNew: null\n      });\n    }\n\n    return result;\n  }\n\n  function mappingById(result, existings, existingIdIdxMap, newCmptOptions) {\n    // Mapping by id if specified.\n    each(newCmptOptions, function (cmptOption, index) {\n      if (!cmptOption || cmptOption.id == null) {\n        return;\n      }\n\n      var optionId = makeComparableKey(cmptOption.id);\n      var existingIdx = existingIdIdxMap.get(optionId);\n\n      if (existingIdx != null) {\n        var resultItem = result[existingIdx];\n        assert(!resultItem.newOption, 'Duplicated option on id \"' + optionId + '\".');\n        resultItem.newOption = cmptOption; // In both mode, if id matched, new option will be merged to\n        // the existings rather than creating new component model.\n\n        resultItem.existing = existings[existingIdx];\n        newCmptOptions[index] = null;\n      }\n    });\n  }\n\n  function mappingByName(result, newCmptOptions) {\n    // Mapping by name if specified.\n    each(newCmptOptions, function (cmptOption, index) {\n      if (!cmptOption || cmptOption.name == null) {\n        return;\n      }\n\n      for (var i = 0; i < result.length; i++) {\n        var existing = result[i].existing;\n\n        if (!result[i].newOption // Consider name: two map to one.\n        // Can not match when both ids existing but different.\n        && existing && (existing.id == null || cmptOption.id == null) && !isComponentIdInternal(cmptOption) && !isComponentIdInternal(existing) && keyExistAndEqual('name', existing, cmptOption)) {\n          result[i].newOption = cmptOption;\n          newCmptOptions[index] = null;\n          return;\n        }\n      }\n    });\n  }\n\n  function mappingByIndex(result, newCmptOptions, brandNew) {\n    each(newCmptOptions, function (cmptOption) {\n      if (!cmptOption) {\n        return;\n      } // Find the first place that not mapped by id and not internal component (consider the \"hole\").\n\n\n      var resultItem;\n      var nextIdx = 0;\n\n      while ( // Be `!resultItem` only when `nextIdx >= result.length`.\n      (resultItem = result[nextIdx]) && ( // (1) Existing models that already have id should be able to mapped to. Because\n      // after mapping performed, model will always be assigned with an id if user not given.\n      // After that all models have id.\n      // (2) If new option has id, it can only set to a hole or append to the last. It should\n      // not be merged to the existings with different id. Because id should not be overwritten.\n      // (3) Name can be overwritten, because axis use name as 'show label text'.\n      resultItem.newOption || isComponentIdInternal(resultItem.existing) || // In mode \"replaceMerge\", here no not-mapped-non-internal-existing.\n      resultItem.existing && cmptOption.id != null && !keyExistAndEqual('id', cmptOption, resultItem.existing))) {\n        nextIdx++;\n      }\n\n      if (resultItem) {\n        resultItem.newOption = cmptOption;\n        resultItem.brandNew = brandNew;\n      } else {\n        result.push({\n          newOption: cmptOption,\n          brandNew: brandNew,\n          existing: null,\n          keyInfo: null\n        });\n      }\n\n      nextIdx++;\n    });\n  }\n\n  function mappingInReplaceAllMode(result, newCmptOptions) {\n    each(newCmptOptions, function (cmptOption) {\n      // The feature \"reproduce\" requires \"hole\" will also reproduced\n      // in case that compoennt index referring are broken.\n      result.push({\n        newOption: cmptOption,\n        brandNew: true,\n        existing: null,\n        keyInfo: null\n      });\n    });\n  }\n  /**\n   * Make id and name for mapping result (result of mappingToExists)\n   * into `keyInfo` field.\n   */\n\n\n  function makeIdAndName(mapResult) {\n    // We use this id to hash component models and view instances\n    // in echarts. id can be specified by user, or auto generated.\n    // The id generation rule ensures new view instance are able\n    // to mapped to old instance when setOption are called in\n    // no-merge mode. So we generate model id by name and plus\n    // type in view id.\n    // name can be duplicated among components, which is convenient\n    // to specify multi components (like series) by one name.\n    // Ensure that each id is distinct.\n    var idMap = createHashMap();\n    each(mapResult, function (item) {\n      var existing = item.existing;\n      existing && idMap.set(existing.id, item);\n    });\n    each(mapResult, function (item) {\n      var opt = item.newOption; // Force ensure id not duplicated.\n\n      assert(!opt || opt.id == null || !idMap.get(opt.id) || idMap.get(opt.id) === item, 'id duplicates: ' + (opt && opt.id));\n      opt && opt.id != null && idMap.set(opt.id, item);\n      !item.keyInfo && (item.keyInfo = {});\n    }); // Make name and id.\n\n    each(mapResult, function (item, index) {\n      var existing = item.existing;\n      var opt = item.newOption;\n      var keyInfo = item.keyInfo;\n\n      if (!isObject(opt)) {\n        return;\n      } // name can be overwitten. Consider case: axis.name = '20km'.\n      // But id generated by name will not be changed, which affect\n      // only in that case: setOption with 'not merge mode' and view\n      // instance will be recreated, which can be accepted.\n\n\n      keyInfo.name = opt.name != null ? makeComparableKey(opt.name) : existing ? existing.name // Avoid diffferent series has the same name,\n      // because name may be used like in color pallet.\n      : DUMMY_COMPONENT_NAME_PREFIX + index;\n\n      if (existing) {\n        keyInfo.id = makeComparableKey(existing.id);\n      } else if (opt.id != null) {\n        keyInfo.id = makeComparableKey(opt.id);\n      } else {\n        // Consider this situatoin:\n        //  optionA: [{name: 'a'}, {name: 'a'}, {..}]\n        //  optionB [{..}, {name: 'a'}, {name: 'a'}]\n        // Series with the same name between optionA and optionB\n        // should be mapped.\n        var idNum = 0;\n\n        do {\n          keyInfo.id = '\\0' + keyInfo.name + '\\0' + idNum++;\n        } while (idMap.get(keyInfo.id));\n      }\n\n      idMap.set(keyInfo.id, item);\n    });\n  }\n\n  function keyExistAndEqual(attr, obj1, obj2) {\n    var key1 = convertOptionIdName(obj1[attr], null);\n    var key2 = convertOptionIdName(obj2[attr], null); // See `MappingExistingItem`. `id` and `name` trade string equals to number.\n\n    return key1 != null && key2 != null && key1 === key2;\n  }\n  /**\n   * @return return null if not exist.\n   */\n\n\n  function makeComparableKey(val) {\n    {\n      if (val == null) {\n        throw new Error();\n      }\n    }\n    return convertOptionIdName(val, '');\n  }\n\n  function convertOptionIdName(idOrName, defaultValue) {\n    if (idOrName == null) {\n      return defaultValue;\n    }\n\n    return isString(idOrName) ? idOrName : isNumber(idOrName) || isStringSafe(idOrName) ? idOrName + '' : defaultValue;\n  }\n\n  function warnInvalidateIdOrName(idOrName) {\n    {\n      warn('`' + idOrName + '` is invalid id or name. Must be a string or number.');\n    }\n  }\n\n  function isValidIdOrName(idOrName) {\n    return isStringSafe(idOrName) || isNumeric(idOrName);\n  }\n\n  function isNameSpecified(componentModel) {\n    var name = componentModel.name; // Is specified when `indexOf` get -1 or > 0.\n\n    return !!(name && name.indexOf(DUMMY_COMPONENT_NAME_PREFIX));\n  }\n  /**\n   * @public\n   * @param {Object} cmptOption\n   * @return {boolean}\n   */\n\n\n  function isComponentIdInternal(cmptOption) {\n    return cmptOption && cmptOption.id != null && makeComparableKey(cmptOption.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX) === 0;\n  }\n\n  function makeInternalComponentId(idSuffix) {\n    return INTERNAL_COMPONENT_ID_PREFIX + idSuffix;\n  }\n\n  function setComponentTypeToKeyInfo(mappingResult, mainType, componentModelCtor) {\n    // Set mainType and complete subType.\n    each(mappingResult, function (item) {\n      var newOption = item.newOption;\n\n      if (isObject(newOption)) {\n        item.keyInfo.mainType = mainType;\n        item.keyInfo.subType = determineSubType(mainType, newOption, item.existing, componentModelCtor);\n      }\n    });\n  }\n\n  function determineSubType(mainType, newCmptOption, existComponent, componentModelCtor) {\n    var subType = newCmptOption.type ? newCmptOption.type : existComponent ? existComponent.subType // Use determineSubType only when there is no existComponent.\n    : componentModelCtor.determineSubType(mainType, newCmptOption); // tooltip, markline, markpoint may always has no subType\n\n    return subType;\n  }\n  /**\n   * A helper for removing duplicate items between batchA and batchB,\n   * and in themselves, and categorize by series.\n   *\n   * @param batchA Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n   * @param batchB Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n   * @return result: [resultBatchA, resultBatchB]\n   */\n\n  /**\n   * @param payload Contains dataIndex (means rawIndex) / dataIndexInside / name\n   *                         each of which can be Array or primary type.\n   * @return dataIndex If not found, return undefined/null.\n   */\n\n\n  function queryDataIndex(data, payload) {\n    if (payload.dataIndexInside != null) {\n      return payload.dataIndexInside;\n    } else if (payload.dataIndex != null) {\n      return isArray(payload.dataIndex) ? map(payload.dataIndex, function (value) {\n        return data.indexOfRawIndex(value);\n      }) : data.indexOfRawIndex(payload.dataIndex);\n    } else if (payload.name != null) {\n      return isArray(payload.name) ? map(payload.name, function (value) {\n        return data.indexOfName(value);\n      }) : data.indexOfName(payload.name);\n    }\n  }\n  /**\n   * Enable property storage to any host object.\n   * Notice: Serialization is not supported.\n   *\n   * For example:\n   * let inner = zrUitl.makeInner();\n   *\n   * function some1(hostObj) {\n   *      inner(hostObj).someProperty = 1212;\n   *      ...\n   * }\n   * function some2() {\n   *      let fields = inner(this);\n   *      fields.someProperty1 = 1212;\n   *      fields.someProperty2 = 'xx';\n   *      ...\n   * }\n   *\n   * @return {Function}\n   */\n\n\n  function makeInner() {\n    var key = '__ec_inner_' + innerUniqueIndex++;\n    return function (hostObj) {\n      return hostObj[key] || (hostObj[key] = {});\n    };\n  }\n\n  var innerUniqueIndex = getRandomIdBase();\n  /**\n   * The same behavior as `component.getReferringComponents`.\n   */\n\n  function parseFinder(ecModel, finderInput, opt) {\n    var _a = preParseFinder(finderInput, opt),\n        mainTypeSpecified = _a.mainTypeSpecified,\n        queryOptionMap = _a.queryOptionMap,\n        others = _a.others;\n\n    var result = others;\n    var defaultMainType = opt ? opt.defaultMainType : null;\n\n    if (!mainTypeSpecified && defaultMainType) {\n      queryOptionMap.set(defaultMainType, {});\n    }\n\n    queryOptionMap.each(function (queryOption, mainType) {\n      var queryResult = queryReferringComponents(ecModel, mainType, queryOption, {\n        useDefault: defaultMainType === mainType,\n        enableAll: opt && opt.enableAll != null ? opt.enableAll : true,\n        enableNone: opt && opt.enableNone != null ? opt.enableNone : true\n      });\n      result[mainType + 'Models'] = queryResult.models;\n      result[mainType + 'Model'] = queryResult.models[0];\n    });\n    return result;\n  }\n\n  function preParseFinder(finderInput, opt) {\n    var finder;\n\n    if (isString(finderInput)) {\n      var obj = {};\n      obj[finderInput + 'Index'] = 0;\n      finder = obj;\n    } else {\n      finder = finderInput;\n    }\n\n    var queryOptionMap = createHashMap();\n    var others = {};\n    var mainTypeSpecified = false;\n    each(finder, function (value, key) {\n      // Exclude 'dataIndex' and other illgal keys.\n      if (key === 'dataIndex' || key === 'dataIndexInside') {\n        others[key] = value;\n        return;\n      }\n\n      var parsedKey = key.match(/^(\\w+)(Index|Id|Name)$/) || [];\n      var mainType = parsedKey[1];\n      var queryType = (parsedKey[2] || '').toLowerCase();\n\n      if (!mainType || !queryType || opt && opt.includeMainTypes && indexOf(opt.includeMainTypes, mainType) < 0) {\n        return;\n      }\n\n      mainTypeSpecified = mainTypeSpecified || !!mainType;\n      var queryOption = queryOptionMap.get(mainType) || queryOptionMap.set(mainType, {});\n      queryOption[queryType] = value;\n    });\n    return {\n      mainTypeSpecified: mainTypeSpecified,\n      queryOptionMap: queryOptionMap,\n      others: others\n    };\n  }\n\n  var SINGLE_REFERRING = {\n    useDefault: true,\n    enableAll: false,\n    enableNone: false\n  };\n  var MULTIPLE_REFERRING = {\n    useDefault: false,\n    enableAll: true,\n    enableNone: true\n  };\n\n  function queryReferringComponents(ecModel, mainType, userOption, opt) {\n    opt = opt || SINGLE_REFERRING;\n    var indexOption = userOption.index;\n    var idOption = userOption.id;\n    var nameOption = userOption.name;\n    var result = {\n      models: null,\n      specified: indexOption != null || idOption != null || nameOption != null\n    };\n\n    if (!result.specified) {\n      // Use the first as default if `useDefault`.\n      var firstCmpt = void 0;\n      result.models = opt.useDefault && (firstCmpt = ecModel.getComponent(mainType)) ? [firstCmpt] : [];\n      return result;\n    }\n\n    if (indexOption === 'none' || indexOption === false) {\n      assert(opt.enableNone, '`\"none\"` or `false` is not a valid value on index option.');\n      result.models = [];\n      return result;\n    } // `queryComponents` will return all components if\n    // both all of index/id/name are null/undefined.\n\n\n    if (indexOption === 'all') {\n      assert(opt.enableAll, '`\"all\"` is not a valid value on index option.');\n      indexOption = idOption = nameOption = null;\n    }\n\n    result.models = ecModel.queryComponents({\n      mainType: mainType,\n      index: indexOption,\n      id: idOption,\n      name: nameOption\n    });\n    return result;\n  }\n\n  function setAttribute(dom, key, value) {\n    dom.setAttribute ? dom.setAttribute(key, value) : dom[key] = value;\n  }\n\n  function getAttribute(dom, key) {\n    return dom.getAttribute ? dom.getAttribute(key) : dom[key];\n  }\n\n  function getTooltipRenderMode(renderModeOption) {\n    if (renderModeOption === 'auto') {\n      // Using html when `document` exists, use richText otherwise\n      return env.domSupported ? 'html' : 'richText';\n    } else {\n      return renderModeOption || 'html';\n    }\n  }\n  /**\n   * Group a list by key.\n   */\n\n  /**\n   * Interpolate raw values of a series with percent\n   *\n   * @param data         data\n   * @param labelModel   label model of the text element\n   * @param sourceValue  start value. May be null/undefined when init.\n   * @param targetValue  end value\n   * @param percent      0~1 percentage; 0 uses start value while 1 uses end value\n   * @return             interpolated values\n   *                     If `sourceValue` and `targetValue` are `number`, return `number`.\n   *                     If `sourceValue` and `targetValue` are `string`, return `string`.\n   *                     If `sourceValue` and `targetValue` are `(string | number)[]`, return `(string | number)[]`.\n   *                     Other cases do not supported.\n   */\n\n\n  function interpolateRawValues(data, precision, sourceValue, targetValue, percent) {\n    var isAutoPrecision = precision == null || precision === 'auto';\n\n    if (targetValue == null) {\n      return targetValue;\n    }\n\n    if (isNumber(targetValue)) {\n      var value = interpolateNumber$1(sourceValue || 0, targetValue, percent);\n      return round(value, isAutoPrecision ? Math.max(getPrecision(sourceValue || 0), getPrecision(targetValue)) : precision);\n    } else if (isString(targetValue)) {\n      return percent < 1 ? sourceValue : targetValue;\n    } else {\n      var interpolated = [];\n      var leftArr = sourceValue;\n      var rightArr = targetValue;\n      var length_1 = Math.max(leftArr ? leftArr.length : 0, rightArr.length);\n\n      for (var i = 0; i < length_1; ++i) {\n        var info = data.getDimensionInfo(i); // Don't interpolate ordinal dims\n\n        if (info && info.type === 'ordinal') {\n          // In init, there is no `sourceValue`, but should better not to get undefined result.\n          interpolated[i] = (percent < 1 && leftArr ? leftArr : rightArr)[i];\n        } else {\n          var leftVal = leftArr && leftArr[i] ? leftArr[i] : 0;\n          var rightVal = rightArr[i];\n          var value = interpolateNumber$1(leftVal, rightVal, percent);\n          interpolated[i] = round(value, isAutoPrecision ? Math.max(getPrecision(leftVal), getPrecision(rightVal)) : precision);\n        }\n      }\n\n      return interpolated;\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var TYPE_DELIMITER = '.';\n  var IS_CONTAINER = '___EC__COMPONENT__CONTAINER___';\n  var IS_EXTENDED_CLASS = '___EC__EXTENDED_CLASS___';\n  /**\n   * Notice, parseClassType('') should returns {main: '', sub: ''}\n   * @public\n   */\n\n  function parseClassType(componentType) {\n    var ret = {\n      main: '',\n      sub: ''\n    };\n\n    if (componentType) {\n      var typeArr = componentType.split(TYPE_DELIMITER);\n      ret.main = typeArr[0] || '';\n      ret.sub = typeArr[1] || '';\n    }\n\n    return ret;\n  }\n  /**\n   * @public\n   */\n\n\n  function checkClassType(componentType) {\n    assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType), 'componentType \"' + componentType + '\" illegal');\n  }\n\n  function isExtendedClass(clz) {\n    return !!(clz && clz[IS_EXTENDED_CLASS]);\n  }\n  /**\n   * Implements `ExtendableConstructor` for `rootClz`.\n   *\n   * @usage\n   * ```ts\n   * class Xxx {}\n   * type XxxConstructor = typeof Xxx & ExtendableConstructor\n   * enableClassExtend(Xxx as XxxConstructor);\n   * ```\n   */\n\n\n  function enableClassExtend(rootClz, mandatoryMethods) {\n    rootClz.$constructor = rootClz; // FIXME: not necessary?\n\n    rootClz.extend = function (proto) {\n      {\n        each(mandatoryMethods, function (method) {\n          if (!proto[method]) {\n            console.warn('Method `' + method + '` should be implemented' + (proto.type ? ' in ' + proto.type : '') + '.');\n          }\n        });\n      }\n      var superClass = this;\n      var ExtendedClass;\n\n      if (isESClass(superClass)) {\n        ExtendedClass =\n        /** @class */\n        function (_super) {\n          __extends(class_1, _super);\n\n          function class_1() {\n            return _super.apply(this, arguments) || this;\n          }\n\n          return class_1;\n        }(superClass);\n      } else {\n        // For backward compat, we both support ts class inheritance and this\n        // \"extend\" approach.\n        // The constructor should keep the same behavior as ts class inheritance:\n        // If this constructor/$constructor is not declared, auto invoke the super\n        // constructor.\n        // If this constructor/$constructor is declared, it is responsible for\n        // calling the super constructor.\n        ExtendedClass = function () {\n          (proto.$constructor || superClass).apply(this, arguments);\n        };\n\n        inherits(ExtendedClass, this);\n      }\n\n      extend(ExtendedClass.prototype, proto);\n      ExtendedClass[IS_EXTENDED_CLASS] = true;\n      ExtendedClass.extend = this.extend;\n      ExtendedClass.superCall = superCall;\n      ExtendedClass.superApply = superApply;\n      ExtendedClass.superClass = superClass;\n      return ExtendedClass;\n    };\n  }\n\n  function isESClass(fn) {\n    return isFunction(fn) && /^class\\s/.test(Function.prototype.toString.call(fn));\n  }\n  /**\n   * A work around to both support ts extend and this extend mechanism.\n   * on sub-class.\n   * @usage\n   * ```ts\n   * class Component { ... }\n   * classUtil.enableClassExtend(Component);\n   * classUtil.enableClassManagement(Component, {registerWhenExtend: true});\n   *\n   * class Series extends Component { ... }\n   * // Without calling `markExtend`, `registerWhenExtend` will not work.\n   * Component.markExtend(Series);\n   * ```\n   */\n\n\n  function mountExtend(SubClz, SupperClz) {\n    SubClz.extend = SupperClz.extend;\n  } // A random offset.\n\n\n  var classBase = Math.round(Math.random() * 10);\n  /**\n   * Implements `CheckableConstructor` for `target`.\n   * Can not use instanceof, consider different scope by\n   * cross domain or es module import in ec extensions.\n   * Mount a method \"isInstance()\" to Clz.\n   *\n   * @usage\n   * ```ts\n   * class Xxx {}\n   * type XxxConstructor = typeof Xxx & CheckableConstructor;\n   * enableClassCheck(Xxx as XxxConstructor)\n   * ```\n   */\n\n  function enableClassCheck(target) {\n    var classAttr = ['__\\0is_clz', classBase++].join('_');\n    target.prototype[classAttr] = true;\n    {\n      assert(!target.isInstance, 'The method \"is\" can not be defined.');\n    }\n\n    target.isInstance = function (obj) {\n      return !!(obj && obj[classAttr]);\n    };\n  } // superCall should have class info, which can not be fetch from 'this'.\n  // Consider this case:\n  // class A has method f,\n  // class B inherits class A, overrides method f, f call superApply('f'),\n  // class C inherits class B, do not overrides method f,\n  // then when method of class C is called, dead loop occured.\n\n\n  function superCall(context, methodName) {\n    var args = [];\n\n    for (var _i = 2; _i < arguments.length; _i++) {\n      args[_i - 2] = arguments[_i];\n    }\n\n    return this.superClass.prototype[methodName].apply(context, args);\n  }\n\n  function superApply(context, methodName, args) {\n    return this.superClass.prototype[methodName].apply(context, args);\n  }\n  /**\n   * Implements `ClassManager` for `target`\n   *\n   * @usage\n   * ```ts\n   * class Xxx {}\n   * type XxxConstructor = typeof Xxx & ClassManager\n   * enableClassManagement(Xxx as XxxConstructor);\n   * ```\n   */\n\n\n  function enableClassManagement(target) {\n    /**\n     * Component model classes\n     * key: componentType,\n     * value:\n     *     componentClass, when componentType is 'a'\n     *     or Object.<subKey, componentClass>, when componentType is 'a.b'\n     */\n    var storage = {};\n\n    target.registerClass = function (clz) {\n      // `type` should not be a \"instance memeber\".\n      // If using TS class, should better declared as `static type = 'series.pie'`.\n      // otherwise users have to mount `type` on prototype manually.\n      // For backward compat and enable instance visit type via `this.type`,\n      // we stil support fetch `type` from prototype.\n      var componentFullType = clz.type || clz.prototype.type;\n\n      if (componentFullType) {\n        checkClassType(componentFullType); // If only static type declared, we assign it to prototype mandatorily.\n\n        clz.prototype.type = componentFullType;\n        var componentTypeInfo = parseClassType(componentFullType);\n\n        if (!componentTypeInfo.sub) {\n          {\n            if (storage[componentTypeInfo.main]) {\n              console.warn(componentTypeInfo.main + ' exists.');\n            }\n          }\n          storage[componentTypeInfo.main] = clz;\n        } else if (componentTypeInfo.sub !== IS_CONTAINER) {\n          var container = makeContainer(componentTypeInfo);\n          container[componentTypeInfo.sub] = clz;\n        }\n      }\n\n      return clz;\n    };\n\n    target.getClass = function (mainType, subType, throwWhenNotFound) {\n      var clz = storage[mainType];\n\n      if (clz && clz[IS_CONTAINER]) {\n        clz = subType ? clz[subType] : null;\n      }\n\n      if (throwWhenNotFound && !clz) {\n        throw new Error(!subType ? mainType + '.' + 'type should be specified.' : 'Component ' + mainType + '.' + (subType || '') + ' is used but not imported.');\n      }\n\n      return clz;\n    };\n\n    target.getClassesByMainType = function (componentType) {\n      var componentTypeInfo = parseClassType(componentType);\n      var result = [];\n      var obj = storage[componentTypeInfo.main];\n\n      if (obj && obj[IS_CONTAINER]) {\n        each(obj, function (o, type) {\n          type !== IS_CONTAINER && result.push(o);\n        });\n      } else {\n        result.push(obj);\n      }\n\n      return result;\n    };\n\n    target.hasClass = function (componentType) {\n      // Just consider componentType.main.\n      var componentTypeInfo = parseClassType(componentType);\n      return !!storage[componentTypeInfo.main];\n    };\n    /**\n     * @return Like ['aa', 'bb'], but can not be ['aa.xx']\n     */\n\n\n    target.getAllClassMainTypes = function () {\n      var types = [];\n      each(storage, function (obj, type) {\n        types.push(type);\n      });\n      return types;\n    };\n    /**\n     * If a main type is container and has sub types\n     */\n\n\n    target.hasSubTypes = function (componentType) {\n      var componentTypeInfo = parseClassType(componentType);\n      var obj = storage[componentTypeInfo.main];\n      return obj && obj[IS_CONTAINER];\n    };\n\n    function makeContainer(componentTypeInfo) {\n      var container = storage[componentTypeInfo.main];\n\n      if (!container || !container[IS_CONTAINER]) {\n        container = storage[componentTypeInfo.main] = {};\n        container[IS_CONTAINER] = true;\n      }\n\n      return container;\n    }\n  } // /**\n  //  * @param {string|Array.<string>} properties\n  //  */\n  // export function setReadOnly(obj, properties) {\n  // FIXME It seems broken in IE8 simulation of IE11\n  // if (!zrUtil.isArray(properties)) {\n  //     properties = properties != null ? [properties] : [];\n  // }\n  // zrUtil.each(properties, function (prop) {\n  //     let value = obj[prop];\n  //     Object.defineProperty\n  //         && Object.defineProperty(obj, prop, {\n  //             value: value, writable: false\n  //         });\n  //     zrUtil.isArray(obj[prop])\n  //         && Object.freeze\n  //         && Object.freeze(obj[prop]);\n  // });\n  // }\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // TODO Parse shadow style\n  // TODO Only shallow path support\n\n\n  function makeStyleMapper(properties, ignoreParent) {\n    // Normalize\n    for (var i = 0; i < properties.length; i++) {\n      if (!properties[i][1]) {\n        properties[i][1] = properties[i][0];\n      }\n    }\n\n    ignoreParent = ignoreParent || false;\n    return function (model, excludes, includes) {\n      var style = {};\n\n      for (var i = 0; i < properties.length; i++) {\n        var propName = properties[i][1];\n\n        if (excludes && indexOf(excludes, propName) >= 0 || includes && indexOf(includes, propName) < 0) {\n          continue;\n        }\n\n        var val = model.getShallow(propName, ignoreParent);\n\n        if (val != null) {\n          style[properties[i][0]] = val;\n        }\n      } // TODO Text or image?\n\n\n      return style;\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var AREA_STYLE_KEY_MAP = [['fill', 'color'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['opacity'], ['shadowColor'] // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n  // So do not transfer decal directly.\n  ];\n  var getAreaStyle = makeStyleMapper(AREA_STYLE_KEY_MAP);\n\n  var AreaStyleMixin =\n  /** @class */\n  function () {\n    function AreaStyleMixin() {}\n\n    AreaStyleMixin.prototype.getAreaStyle = function (excludes, includes) {\n      return getAreaStyle(this, excludes, includes);\n    };\n\n    return AreaStyleMixin;\n  }();\n\n  var globalImageCache = new LRU(50);\n\n  function findExistImage(newImageOrSrc) {\n    if (typeof newImageOrSrc === 'string') {\n      var cachedImgObj = globalImageCache.get(newImageOrSrc);\n      return cachedImgObj && cachedImgObj.image;\n    } else {\n      return newImageOrSrc;\n    }\n  }\n\n  function createOrUpdateImage(newImageOrSrc, image, hostEl, onload, cbPayload) {\n    if (!newImageOrSrc) {\n      return image;\n    } else if (typeof newImageOrSrc === 'string') {\n      if (image && image.__zrImageSrc === newImageOrSrc || !hostEl) {\n        return image;\n      }\n\n      var cachedImgObj = globalImageCache.get(newImageOrSrc);\n      var pendingWrap = {\n        hostEl: hostEl,\n        cb: onload,\n        cbPayload: cbPayload\n      };\n\n      if (cachedImgObj) {\n        image = cachedImgObj.image;\n        !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\n      } else {\n        image = platformApi.loadImage(newImageOrSrc, imageOnLoad, imageOnLoad);\n        image.__zrImageSrc = newImageOrSrc;\n        globalImageCache.put(newImageOrSrc, image.__cachedImgObj = {\n          image: image,\n          pending: [pendingWrap]\n        });\n      }\n\n      return image;\n    } else {\n      return newImageOrSrc;\n    }\n  }\n\n  function imageOnLoad() {\n    var cachedImgObj = this.__cachedImgObj;\n    this.onload = this.onerror = this.__cachedImgObj = null;\n\n    for (var i = 0; i < cachedImgObj.pending.length; i++) {\n      var pendingWrap = cachedImgObj.pending[i];\n      var cb = pendingWrap.cb;\n      cb && cb(this, pendingWrap.cbPayload);\n      pendingWrap.hostEl.dirty();\n    }\n\n    cachedImgObj.pending.length = 0;\n  }\n\n  function isImageReady(image) {\n    return image && image.width && image.height;\n  }\n\n  var STYLE_REG = /\\{([a-zA-Z0-9_]+)\\|([^}]*)\\}/g;\n\n  function truncateText(text, containerWidth, font, ellipsis, options) {\n    if (!containerWidth) {\n      return '';\n    }\n\n    var textLines = (text + '').split('\\n');\n    options = prepareTruncateOptions(containerWidth, font, ellipsis, options);\n\n    for (var i = 0, len = textLines.length; i < len; i++) {\n      textLines[i] = truncateSingleLine(textLines[i], options);\n    }\n\n    return textLines.join('\\n');\n  }\n\n  function prepareTruncateOptions(containerWidth, font, ellipsis, options) {\n    options = options || {};\n    var preparedOpts = extend({}, options);\n    preparedOpts.font = font;\n    ellipsis = retrieve2(ellipsis, '...');\n    preparedOpts.maxIterations = retrieve2(options.maxIterations, 2);\n    var minChar = preparedOpts.minChar = retrieve2(options.minChar, 0);\n    preparedOpts.cnCharWidth = getWidth('国', font);\n    var ascCharWidth = preparedOpts.ascCharWidth = getWidth('a', font);\n    preparedOpts.placeholder = retrieve2(options.placeholder, '');\n    var contentWidth = containerWidth = Math.max(0, containerWidth - 1);\n\n    for (var i = 0; i < minChar && contentWidth >= ascCharWidth; i++) {\n      contentWidth -= ascCharWidth;\n    }\n\n    var ellipsisWidth = getWidth(ellipsis, font);\n\n    if (ellipsisWidth > contentWidth) {\n      ellipsis = '';\n      ellipsisWidth = 0;\n    }\n\n    contentWidth = containerWidth - ellipsisWidth;\n    preparedOpts.ellipsis = ellipsis;\n    preparedOpts.ellipsisWidth = ellipsisWidth;\n    preparedOpts.contentWidth = contentWidth;\n    preparedOpts.containerWidth = containerWidth;\n    return preparedOpts;\n  }\n\n  function truncateSingleLine(textLine, options) {\n    var containerWidth = options.containerWidth;\n    var font = options.font;\n    var contentWidth = options.contentWidth;\n\n    if (!containerWidth) {\n      return '';\n    }\n\n    var lineWidth = getWidth(textLine, font);\n\n    if (lineWidth <= containerWidth) {\n      return textLine;\n    }\n\n    for (var j = 0;; j++) {\n      if (lineWidth <= contentWidth || j >= options.maxIterations) {\n        textLine += options.ellipsis;\n        break;\n      }\n\n      var subLength = j === 0 ? estimateLength(textLine, contentWidth, options.ascCharWidth, options.cnCharWidth) : lineWidth > 0 ? Math.floor(textLine.length * contentWidth / lineWidth) : 0;\n      textLine = textLine.substr(0, subLength);\n      lineWidth = getWidth(textLine, font);\n    }\n\n    if (textLine === '') {\n      textLine = options.placeholder;\n    }\n\n    return textLine;\n  }\n\n  function estimateLength(text, contentWidth, ascCharWidth, cnCharWidth) {\n    var width = 0;\n    var i = 0;\n\n    for (var len = text.length; i < len && width < contentWidth; i++) {\n      var charCode = text.charCodeAt(i);\n      width += 0 <= charCode && charCode <= 127 ? ascCharWidth : cnCharWidth;\n    }\n\n    return i;\n  }\n\n  function parsePlainText(text, style) {\n    text != null && (text += '');\n    var overflow = style.overflow;\n    var padding = style.padding;\n    var font = style.font;\n    var truncate = overflow === 'truncate';\n    var calculatedLineHeight = getLineHeight(font);\n    var lineHeight = retrieve2(style.lineHeight, calculatedLineHeight);\n    var bgColorDrawn = !!style.backgroundColor;\n    var truncateLineOverflow = style.lineOverflow === 'truncate';\n    var width = style.width;\n    var lines;\n\n    if (width != null && (overflow === 'break' || overflow === 'breakAll')) {\n      lines = text ? wrapText(text, style.font, width, overflow === 'breakAll', 0).lines : [];\n    } else {\n      lines = text ? text.split('\\n') : [];\n    }\n\n    var contentHeight = lines.length * lineHeight;\n    var height = retrieve2(style.height, contentHeight);\n\n    if (contentHeight > height && truncateLineOverflow) {\n      var lineCount = Math.floor(height / lineHeight);\n      lines = lines.slice(0, lineCount);\n    }\n\n    if (text && truncate && width != null) {\n      var options = prepareTruncateOptions(width, font, style.ellipsis, {\n        minChar: style.truncateMinChar,\n        placeholder: style.placeholder\n      });\n\n      for (var i = 0; i < lines.length; i++) {\n        lines[i] = truncateSingleLine(lines[i], options);\n      }\n    }\n\n    var outerHeight = height;\n    var contentWidth = 0;\n\n    for (var i = 0; i < lines.length; i++) {\n      contentWidth = Math.max(getWidth(lines[i], font), contentWidth);\n    }\n\n    if (width == null) {\n      width = contentWidth;\n    }\n\n    var outerWidth = contentWidth;\n\n    if (padding) {\n      outerHeight += padding[0] + padding[2];\n      outerWidth += padding[1] + padding[3];\n      width += padding[1] + padding[3];\n    }\n\n    if (bgColorDrawn) {\n      outerWidth = width;\n    }\n\n    return {\n      lines: lines,\n      height: height,\n      outerWidth: outerWidth,\n      outerHeight: outerHeight,\n      lineHeight: lineHeight,\n      calculatedLineHeight: calculatedLineHeight,\n      contentWidth: contentWidth,\n      contentHeight: contentHeight,\n      width: width\n    };\n  }\n\n  var RichTextToken = function () {\n    function RichTextToken() {}\n\n    return RichTextToken;\n  }();\n\n  var RichTextLine = function () {\n    function RichTextLine(tokens) {\n      this.tokens = [];\n\n      if (tokens) {\n        this.tokens = tokens;\n      }\n    }\n\n    return RichTextLine;\n  }();\n\n  var RichTextContentBlock = function () {\n    function RichTextContentBlock() {\n      this.width = 0;\n      this.height = 0;\n      this.contentWidth = 0;\n      this.contentHeight = 0;\n      this.outerWidth = 0;\n      this.outerHeight = 0;\n      this.lines = [];\n    }\n\n    return RichTextContentBlock;\n  }();\n\n  function parseRichText(text, style) {\n    var contentBlock = new RichTextContentBlock();\n    text != null && (text += '');\n\n    if (!text) {\n      return contentBlock;\n    }\n\n    var topWidth = style.width;\n    var topHeight = style.height;\n    var overflow = style.overflow;\n    var wrapInfo = (overflow === 'break' || overflow === 'breakAll') && topWidth != null ? {\n      width: topWidth,\n      accumWidth: 0,\n      breakAll: overflow === 'breakAll'\n    } : null;\n    var lastIndex = STYLE_REG.lastIndex = 0;\n    var result;\n\n    while ((result = STYLE_REG.exec(text)) != null) {\n      var matchedIndex = result.index;\n\n      if (matchedIndex > lastIndex) {\n        pushTokens(contentBlock, text.substring(lastIndex, matchedIndex), style, wrapInfo);\n      }\n\n      pushTokens(contentBlock, result[2], style, wrapInfo, result[1]);\n      lastIndex = STYLE_REG.lastIndex;\n    }\n\n    if (lastIndex < text.length) {\n      pushTokens(contentBlock, text.substring(lastIndex, text.length), style, wrapInfo);\n    }\n\n    var pendingList = [];\n    var calculatedHeight = 0;\n    var calculatedWidth = 0;\n    var stlPadding = style.padding;\n    var truncate = overflow === 'truncate';\n    var truncateLine = style.lineOverflow === 'truncate';\n\n    function finishLine(line, lineWidth, lineHeight) {\n      line.width = lineWidth;\n      line.lineHeight = lineHeight;\n      calculatedHeight += lineHeight;\n      calculatedWidth = Math.max(calculatedWidth, lineWidth);\n    }\n\n    outer: for (var i = 0; i < contentBlock.lines.length; i++) {\n      var line = contentBlock.lines[i];\n      var lineHeight = 0;\n      var lineWidth = 0;\n\n      for (var j = 0; j < line.tokens.length; j++) {\n        var token = line.tokens[j];\n        var tokenStyle = token.styleName && style.rich[token.styleName] || {};\n        var textPadding = token.textPadding = tokenStyle.padding;\n        var paddingH = textPadding ? textPadding[1] + textPadding[3] : 0;\n        var font = token.font = tokenStyle.font || style.font;\n        token.contentHeight = getLineHeight(font);\n        var tokenHeight = retrieve2(tokenStyle.height, token.contentHeight);\n        token.innerHeight = tokenHeight;\n        textPadding && (tokenHeight += textPadding[0] + textPadding[2]);\n        token.height = tokenHeight;\n        token.lineHeight = retrieve3(tokenStyle.lineHeight, style.lineHeight, tokenHeight);\n        token.align = tokenStyle && tokenStyle.align || style.align;\n        token.verticalAlign = tokenStyle && tokenStyle.verticalAlign || 'middle';\n\n        if (truncateLine && topHeight != null && calculatedHeight + token.lineHeight > topHeight) {\n          if (j > 0) {\n            line.tokens = line.tokens.slice(0, j);\n            finishLine(line, lineWidth, lineHeight);\n            contentBlock.lines = contentBlock.lines.slice(0, i + 1);\n          } else {\n            contentBlock.lines = contentBlock.lines.slice(0, i);\n          }\n\n          break outer;\n        }\n\n        var styleTokenWidth = tokenStyle.width;\n        var tokenWidthNotSpecified = styleTokenWidth == null || styleTokenWidth === 'auto';\n\n        if (typeof styleTokenWidth === 'string' && styleTokenWidth.charAt(styleTokenWidth.length - 1) === '%') {\n          token.percentWidth = styleTokenWidth;\n          pendingList.push(token);\n          token.contentWidth = getWidth(token.text, font);\n        } else {\n          if (tokenWidthNotSpecified) {\n            var textBackgroundColor = tokenStyle.backgroundColor;\n            var bgImg = textBackgroundColor && textBackgroundColor.image;\n\n            if (bgImg) {\n              bgImg = findExistImage(bgImg);\n\n              if (isImageReady(bgImg)) {\n                token.width = Math.max(token.width, bgImg.width * tokenHeight / bgImg.height);\n              }\n            }\n          }\n\n          var remainTruncWidth = truncate && topWidth != null ? topWidth - lineWidth : null;\n\n          if (remainTruncWidth != null && remainTruncWidth < token.width) {\n            if (!tokenWidthNotSpecified || remainTruncWidth < paddingH) {\n              token.text = '';\n              token.width = token.contentWidth = 0;\n            } else {\n              token.text = truncateText(token.text, remainTruncWidth - paddingH, font, style.ellipsis, {\n                minChar: style.truncateMinChar\n              });\n              token.width = token.contentWidth = getWidth(token.text, font);\n            }\n          } else {\n            token.contentWidth = getWidth(token.text, font);\n          }\n        }\n\n        token.width += paddingH;\n        lineWidth += token.width;\n        tokenStyle && (lineHeight = Math.max(lineHeight, token.lineHeight));\n      }\n\n      finishLine(line, lineWidth, lineHeight);\n    }\n\n    contentBlock.outerWidth = contentBlock.width = retrieve2(topWidth, calculatedWidth);\n    contentBlock.outerHeight = contentBlock.height = retrieve2(topHeight, calculatedHeight);\n    contentBlock.contentHeight = calculatedHeight;\n    contentBlock.contentWidth = calculatedWidth;\n\n    if (stlPadding) {\n      contentBlock.outerWidth += stlPadding[1] + stlPadding[3];\n      contentBlock.outerHeight += stlPadding[0] + stlPadding[2];\n    }\n\n    for (var i = 0; i < pendingList.length; i++) {\n      var token = pendingList[i];\n      var percentWidth = token.percentWidth;\n      token.width = parseInt(percentWidth, 10) / 100 * contentBlock.width;\n    }\n\n    return contentBlock;\n  }\n\n  function pushTokens(block, str, style, wrapInfo, styleName) {\n    var isEmptyStr = str === '';\n    var tokenStyle = styleName && style.rich[styleName] || {};\n    var lines = block.lines;\n    var font = tokenStyle.font || style.font;\n    var newLine = false;\n    var strLines;\n    var linesWidths;\n\n    if (wrapInfo) {\n      var tokenPadding = tokenStyle.padding;\n      var tokenPaddingH = tokenPadding ? tokenPadding[1] + tokenPadding[3] : 0;\n\n      if (tokenStyle.width != null && tokenStyle.width !== 'auto') {\n        var outerWidth_1 = parsePercent(tokenStyle.width, wrapInfo.width) + tokenPaddingH;\n\n        if (lines.length > 0) {\n          if (outerWidth_1 + wrapInfo.accumWidth > wrapInfo.width) {\n            strLines = str.split('\\n');\n            newLine = true;\n          }\n        }\n\n        wrapInfo.accumWidth = outerWidth_1;\n      } else {\n        var res = wrapText(str, font, wrapInfo.width, wrapInfo.breakAll, wrapInfo.accumWidth);\n        wrapInfo.accumWidth = res.accumWidth + tokenPaddingH;\n        linesWidths = res.linesWidths;\n        strLines = res.lines;\n      }\n    } else {\n      strLines = str.split('\\n');\n    }\n\n    for (var i = 0; i < strLines.length; i++) {\n      var text = strLines[i];\n      var token = new RichTextToken();\n      token.styleName = styleName;\n      token.text = text;\n      token.isLineHolder = !text && !isEmptyStr;\n\n      if (typeof tokenStyle.width === 'number') {\n        token.width = tokenStyle.width;\n      } else {\n        token.width = linesWidths ? linesWidths[i] : getWidth(text, font);\n      }\n\n      if (!i && !newLine) {\n        var tokens = (lines[lines.length - 1] || (lines[0] = new RichTextLine())).tokens;\n        var tokensLen = tokens.length;\n        tokensLen === 1 && tokens[0].isLineHolder ? tokens[0] = token : (text || !tokensLen || isEmptyStr) && tokens.push(token);\n      } else {\n        lines.push(new RichTextLine([token]));\n      }\n    }\n  }\n\n  function isLatin(ch) {\n    var code = ch.charCodeAt(0);\n    return code >= 0x21 && code <= 0x17F;\n  }\n\n  var breakCharMap = reduce(',&?/;] '.split(''), function (obj, ch) {\n    obj[ch] = true;\n    return obj;\n  }, {});\n\n  function isWordBreakChar(ch) {\n    if (isLatin(ch)) {\n      if (breakCharMap[ch]) {\n        return true;\n      }\n\n      return false;\n    }\n\n    return true;\n  }\n\n  function wrapText(text, font, lineWidth, isBreakAll, lastAccumWidth) {\n    var lines = [];\n    var linesWidths = [];\n    var line = '';\n    var currentWord = '';\n    var currentWordWidth = 0;\n    var accumWidth = 0;\n\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n\n      if (ch === '\\n') {\n        if (currentWord) {\n          line += currentWord;\n          accumWidth += currentWordWidth;\n        }\n\n        lines.push(line);\n        linesWidths.push(accumWidth);\n        line = '';\n        currentWord = '';\n        currentWordWidth = 0;\n        accumWidth = 0;\n        continue;\n      }\n\n      var chWidth = getWidth(ch, font);\n      var inWord = isBreakAll ? false : !isWordBreakChar(ch);\n\n      if (!lines.length ? lastAccumWidth + accumWidth + chWidth > lineWidth : accumWidth + chWidth > lineWidth) {\n        if (!accumWidth) {\n          if (inWord) {\n            lines.push(currentWord);\n            linesWidths.push(currentWordWidth);\n            currentWord = ch;\n            currentWordWidth = chWidth;\n          } else {\n            lines.push(ch);\n            linesWidths.push(chWidth);\n          }\n        } else if (line || currentWord) {\n          if (inWord) {\n            if (!line) {\n              line = currentWord;\n              currentWord = '';\n              currentWordWidth = 0;\n              accumWidth = currentWordWidth;\n            }\n\n            lines.push(line);\n            linesWidths.push(accumWidth - currentWordWidth);\n            currentWord += ch;\n            currentWordWidth += chWidth;\n            line = '';\n            accumWidth = currentWordWidth;\n          } else {\n            if (currentWord) {\n              line += currentWord;\n              currentWord = '';\n              currentWordWidth = 0;\n            }\n\n            lines.push(line);\n            linesWidths.push(accumWidth);\n            line = ch;\n            accumWidth = chWidth;\n          }\n        }\n\n        continue;\n      }\n\n      accumWidth += chWidth;\n\n      if (inWord) {\n        currentWord += ch;\n        currentWordWidth += chWidth;\n      } else {\n        if (currentWord) {\n          line += currentWord;\n          currentWord = '';\n          currentWordWidth = 0;\n        }\n\n        line += ch;\n      }\n    }\n\n    if (!lines.length && !line) {\n      line = text;\n      currentWord = '';\n      currentWordWidth = 0;\n    }\n\n    if (currentWord) {\n      line += currentWord;\n    }\n\n    if (line) {\n      lines.push(line);\n      linesWidths.push(accumWidth);\n    }\n\n    if (lines.length === 1) {\n      accumWidth += lastAccumWidth;\n    }\n\n    return {\n      accumWidth: accumWidth,\n      lines: lines,\n      linesWidths: linesWidths\n    };\n  }\n\n  var STYLE_MAGIC_KEY = '__zr_style_' + Math.round(Math.random() * 10);\n  var DEFAULT_COMMON_STYLE = {\n    shadowBlur: 0,\n    shadowOffsetX: 0,\n    shadowOffsetY: 0,\n    shadowColor: '#000',\n    opacity: 1,\n    blend: 'source-over'\n  };\n  var DEFAULT_COMMON_ANIMATION_PROPS = {\n    style: {\n      shadowBlur: true,\n      shadowOffsetX: true,\n      shadowOffsetY: true,\n      shadowColor: true,\n      opacity: true\n    }\n  };\n  DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY] = true;\n  var PRIMARY_STATES_KEYS$1 = ['z', 'z2', 'invisible'];\n  var PRIMARY_STATES_KEYS_IN_HOVER_LAYER = ['invisible'];\n\n  var Displayable = function (_super) {\n    __extends(Displayable, _super);\n\n    function Displayable(props) {\n      return _super.call(this, props) || this;\n    }\n\n    Displayable.prototype._init = function (props) {\n      var keysArr = keys(props);\n\n      for (var i = 0; i < keysArr.length; i++) {\n        var key = keysArr[i];\n\n        if (key === 'style') {\n          this.useStyle(props[key]);\n        } else {\n          _super.prototype.attrKV.call(this, key, props[key]);\n        }\n      }\n\n      if (!this.style) {\n        this.useStyle({});\n      }\n    };\n\n    Displayable.prototype.beforeBrush = function () {};\n\n    Displayable.prototype.afterBrush = function () {};\n\n    Displayable.prototype.innerBeforeBrush = function () {};\n\n    Displayable.prototype.innerAfterBrush = function () {};\n\n    Displayable.prototype.shouldBePainted = function (viewWidth, viewHeight, considerClipPath, considerAncestors) {\n      var m = this.transform;\n\n      if (this.ignore || this.invisible || this.style.opacity === 0 || this.culling && isDisplayableCulled(this, viewWidth, viewHeight) || m && !m[0] && !m[3]) {\n        return false;\n      }\n\n      if (considerClipPath && this.__clipPaths) {\n        for (var i = 0; i < this.__clipPaths.length; ++i) {\n          if (this.__clipPaths[i].isZeroArea()) {\n            return false;\n          }\n        }\n      }\n\n      if (considerAncestors && this.parent) {\n        var parent_1 = this.parent;\n\n        while (parent_1) {\n          if (parent_1.ignore) {\n            return false;\n          }\n\n          parent_1 = parent_1.parent;\n        }\n      }\n\n      return true;\n    };\n\n    Displayable.prototype.contain = function (x, y) {\n      return this.rectContain(x, y);\n    };\n\n    Displayable.prototype.traverse = function (cb, context) {\n      cb.call(context, this);\n    };\n\n    Displayable.prototype.rectContain = function (x, y) {\n      var coord = this.transformCoordToLocal(x, y);\n      var rect = this.getBoundingRect();\n      return rect.contain(coord[0], coord[1]);\n    };\n\n    Displayable.prototype.getPaintRect = function () {\n      var rect = this._paintRect;\n\n      if (!this._paintRect || this.__dirty) {\n        var transform = this.transform;\n        var elRect = this.getBoundingRect();\n        var style = this.style;\n        var shadowSize = style.shadowBlur || 0;\n        var shadowOffsetX = style.shadowOffsetX || 0;\n        var shadowOffsetY = style.shadowOffsetY || 0;\n        rect = this._paintRect || (this._paintRect = new BoundingRect(0, 0, 0, 0));\n\n        if (transform) {\n          BoundingRect.applyTransform(rect, elRect, transform);\n        } else {\n          rect.copy(elRect);\n        }\n\n        if (shadowSize || shadowOffsetX || shadowOffsetY) {\n          rect.width += shadowSize * 2 + Math.abs(shadowOffsetX);\n          rect.height += shadowSize * 2 + Math.abs(shadowOffsetY);\n          rect.x = Math.min(rect.x, rect.x + shadowOffsetX - shadowSize);\n          rect.y = Math.min(rect.y, rect.y + shadowOffsetY - shadowSize);\n        }\n\n        var tolerance = this.dirtyRectTolerance;\n\n        if (!rect.isZero()) {\n          rect.x = Math.floor(rect.x - tolerance);\n          rect.y = Math.floor(rect.y - tolerance);\n          rect.width = Math.ceil(rect.width + 1 + tolerance * 2);\n          rect.height = Math.ceil(rect.height + 1 + tolerance * 2);\n        }\n      }\n\n      return rect;\n    };\n\n    Displayable.prototype.setPrevPaintRect = function (paintRect) {\n      if (paintRect) {\n        this._prevPaintRect = this._prevPaintRect || new BoundingRect(0, 0, 0, 0);\n\n        this._prevPaintRect.copy(paintRect);\n      } else {\n        this._prevPaintRect = null;\n      }\n    };\n\n    Displayable.prototype.getPrevPaintRect = function () {\n      return this._prevPaintRect;\n    };\n\n    Displayable.prototype.animateStyle = function (loop) {\n      return this.animate('style', loop);\n    };\n\n    Displayable.prototype.updateDuringAnimation = function (targetKey) {\n      if (targetKey === 'style') {\n        this.dirtyStyle();\n      } else {\n        this.markRedraw();\n      }\n    };\n\n    Displayable.prototype.attrKV = function (key, value) {\n      if (key !== 'style') {\n        _super.prototype.attrKV.call(this, key, value);\n      } else {\n        if (!this.style) {\n          this.useStyle(value);\n        } else {\n          this.setStyle(value);\n        }\n      }\n    };\n\n    Displayable.prototype.setStyle = function (keyOrObj, value) {\n      if (typeof keyOrObj === 'string') {\n        this.style[keyOrObj] = value;\n      } else {\n        extend(this.style, keyOrObj);\n      }\n\n      this.dirtyStyle();\n      return this;\n    };\n\n    Displayable.prototype.dirtyStyle = function (notRedraw) {\n      if (!notRedraw) {\n        this.markRedraw();\n      }\n\n      this.__dirty |= STYLE_CHANGED_BIT;\n\n      if (this._rect) {\n        this._rect = null;\n      }\n    };\n\n    Displayable.prototype.dirty = function () {\n      this.dirtyStyle();\n    };\n\n    Displayable.prototype.styleChanged = function () {\n      return !!(this.__dirty & STYLE_CHANGED_BIT);\n    };\n\n    Displayable.prototype.styleUpdated = function () {\n      this.__dirty &= ~STYLE_CHANGED_BIT;\n    };\n\n    Displayable.prototype.createStyle = function (obj) {\n      return createObject(DEFAULT_COMMON_STYLE, obj);\n    };\n\n    Displayable.prototype.useStyle = function (obj) {\n      if (!obj[STYLE_MAGIC_KEY]) {\n        obj = this.createStyle(obj);\n      }\n\n      if (this.__inHover) {\n        this.__hoverStyle = obj;\n      } else {\n        this.style = obj;\n      }\n\n      this.dirtyStyle();\n    };\n\n    Displayable.prototype.isStyleObject = function (obj) {\n      return obj[STYLE_MAGIC_KEY];\n    };\n\n    Displayable.prototype._innerSaveToNormal = function (toState) {\n      _super.prototype._innerSaveToNormal.call(this, toState);\n\n      var normalState = this._normalState;\n\n      if (toState.style && !normalState.style) {\n        normalState.style = this._mergeStyle(this.createStyle(), this.style);\n      }\n\n      this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS$1);\n    };\n\n    Displayable.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n      _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n\n      var needsRestoreToNormal = !(state && keepCurrentStates);\n      var targetStyle;\n\n      if (state && state.style) {\n        if (transition) {\n          if (keepCurrentStates) {\n            targetStyle = state.style;\n          } else {\n            targetStyle = this._mergeStyle(this.createStyle(), normalState.style);\n\n            this._mergeStyle(targetStyle, state.style);\n          }\n        } else {\n          targetStyle = this._mergeStyle(this.createStyle(), keepCurrentStates ? this.style : normalState.style);\n\n          this._mergeStyle(targetStyle, state.style);\n        }\n      } else if (needsRestoreToNormal) {\n        targetStyle = normalState.style;\n      }\n\n      if (targetStyle) {\n        if (transition) {\n          var sourceStyle = this.style;\n          this.style = this.createStyle(needsRestoreToNormal ? {} : sourceStyle);\n\n          if (needsRestoreToNormal) {\n            var changedKeys = keys(sourceStyle);\n\n            for (var i = 0; i < changedKeys.length; i++) {\n              var key = changedKeys[i];\n\n              if (key in targetStyle) {\n                targetStyle[key] = targetStyle[key];\n                this.style[key] = sourceStyle[key];\n              }\n            }\n          }\n\n          var targetKeys = keys(targetStyle);\n\n          for (var i = 0; i < targetKeys.length; i++) {\n            var key = targetKeys[i];\n            this.style[key] = this.style[key];\n          }\n\n          this._transitionState(stateName, {\n            style: targetStyle\n          }, animationCfg, this.getAnimationStyleProps());\n        } else {\n          this.useStyle(targetStyle);\n        }\n      }\n\n      var statesKeys = this.__inHover ? PRIMARY_STATES_KEYS_IN_HOVER_LAYER : PRIMARY_STATES_KEYS$1;\n\n      for (var i = 0; i < statesKeys.length; i++) {\n        var key = statesKeys[i];\n\n        if (state && state[key] != null) {\n          this[key] = state[key];\n        } else if (needsRestoreToNormal) {\n          if (normalState[key] != null) {\n            this[key] = normalState[key];\n          }\n        }\n      }\n    };\n\n    Displayable.prototype._mergeStates = function (states) {\n      var mergedState = _super.prototype._mergeStates.call(this, states);\n\n      var mergedStyle;\n\n      for (var i = 0; i < states.length; i++) {\n        var state = states[i];\n\n        if (state.style) {\n          mergedStyle = mergedStyle || {};\n\n          this._mergeStyle(mergedStyle, state.style);\n        }\n      }\n\n      if (mergedStyle) {\n        mergedState.style = mergedStyle;\n      }\n\n      return mergedState;\n    };\n\n    Displayable.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n      extend(targetStyle, sourceStyle);\n      return targetStyle;\n    };\n\n    Displayable.prototype.getAnimationStyleProps = function () {\n      return DEFAULT_COMMON_ANIMATION_PROPS;\n    };\n\n    Displayable.initDefaultProps = function () {\n      var dispProto = Displayable.prototype;\n      dispProto.type = 'displayable';\n      dispProto.invisible = false;\n      dispProto.z = 0;\n      dispProto.z2 = 0;\n      dispProto.zlevel = 0;\n      dispProto.culling = false;\n      dispProto.cursor = 'pointer';\n      dispProto.rectHover = false;\n      dispProto.incremental = false;\n      dispProto._rect = null;\n      dispProto.dirtyRectTolerance = 0;\n      dispProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT;\n    }();\n\n    return Displayable;\n  }(Element);\n\n  var tmpRect = new BoundingRect(0, 0, 0, 0);\n  var viewRect = new BoundingRect(0, 0, 0, 0);\n\n  function isDisplayableCulled(el, width, height) {\n    tmpRect.copy(el.getBoundingRect());\n\n    if (el.transform) {\n      tmpRect.applyTransform(el.transform);\n    }\n\n    viewRect.width = width;\n    viewRect.height = height;\n    return !tmpRect.intersect(viewRect);\n  }\n\n  var mathMin$2 = Math.min;\n  var mathMax$2 = Math.max;\n  var mathSin$1 = Math.sin;\n  var mathCos$1 = Math.cos;\n  var PI2$1 = Math.PI * 2;\n  var start = create();\n  var end = create();\n  var extremity = create();\n\n  function fromLine(x0, y0, x1, y1, min$$1, max$$1) {\n    min$$1[0] = mathMin$2(x0, x1);\n    min$$1[1] = mathMin$2(y0, y1);\n    max$$1[0] = mathMax$2(x0, x1);\n    max$$1[1] = mathMax$2(y0, y1);\n  }\n\n  var xDim = [];\n  var yDim = [];\n\n  function fromCubic(x0, y0, x1, y1, x2, y2, x3, y3, min$$1, max$$1) {\n    var cubicExtrema$$1 = cubicExtrema;\n    var cubicAt$$1 = cubicAt;\n    var n = cubicExtrema$$1(x0, x1, x2, x3, xDim);\n    min$$1[0] = Infinity;\n    min$$1[1] = Infinity;\n    max$$1[0] = -Infinity;\n    max$$1[1] = -Infinity;\n\n    for (var i = 0; i < n; i++) {\n      var x = cubicAt$$1(x0, x1, x2, x3, xDim[i]);\n      min$$1[0] = mathMin$2(x, min$$1[0]);\n      max$$1[0] = mathMax$2(x, max$$1[0]);\n    }\n\n    n = cubicExtrema$$1(y0, y1, y2, y3, yDim);\n\n    for (var i = 0; i < n; i++) {\n      var y = cubicAt$$1(y0, y1, y2, y3, yDim[i]);\n      min$$1[1] = mathMin$2(y, min$$1[1]);\n      max$$1[1] = mathMax$2(y, max$$1[1]);\n    }\n\n    min$$1[0] = mathMin$2(x0, min$$1[0]);\n    max$$1[0] = mathMax$2(x0, max$$1[0]);\n    min$$1[0] = mathMin$2(x3, min$$1[0]);\n    max$$1[0] = mathMax$2(x3, max$$1[0]);\n    min$$1[1] = mathMin$2(y0, min$$1[1]);\n    max$$1[1] = mathMax$2(y0, max$$1[1]);\n    min$$1[1] = mathMin$2(y3, min$$1[1]);\n    max$$1[1] = mathMax$2(y3, max$$1[1]);\n  }\n\n  function fromQuadratic(x0, y0, x1, y1, x2, y2, min$$1, max$$1) {\n    var quadraticExtremum$$1 = quadraticExtremum;\n    var quadraticAt$$1 = quadraticAt;\n    var tx = mathMax$2(mathMin$2(quadraticExtremum$$1(x0, x1, x2), 1), 0);\n    var ty = mathMax$2(mathMin$2(quadraticExtremum$$1(y0, y1, y2), 1), 0);\n    var x = quadraticAt$$1(x0, x1, x2, tx);\n    var y = quadraticAt$$1(y0, y1, y2, ty);\n    min$$1[0] = mathMin$2(x0, x2, x);\n    min$$1[1] = mathMin$2(y0, y2, y);\n    max$$1[0] = mathMax$2(x0, x2, x);\n    max$$1[1] = mathMax$2(y0, y2, y);\n  }\n\n  function fromArc(x, y, rx, ry, startAngle, endAngle, anticlockwise, min$$1, max$$1) {\n    var vec2Min = min;\n    var vec2Max = max;\n    var diff = Math.abs(startAngle - endAngle);\n\n    if (diff % PI2$1 < 1e-4 && diff > 1e-4) {\n      min$$1[0] = x - rx;\n      min$$1[1] = y - ry;\n      max$$1[0] = x + rx;\n      max$$1[1] = y + ry;\n      return;\n    }\n\n    start[0] = mathCos$1(startAngle) * rx + x;\n    start[1] = mathSin$1(startAngle) * ry + y;\n    end[0] = mathCos$1(endAngle) * rx + x;\n    end[1] = mathSin$1(endAngle) * ry + y;\n    vec2Min(min$$1, start, end);\n    vec2Max(max$$1, start, end);\n    startAngle = startAngle % PI2$1;\n\n    if (startAngle < 0) {\n      startAngle = startAngle + PI2$1;\n    }\n\n    endAngle = endAngle % PI2$1;\n\n    if (endAngle < 0) {\n      endAngle = endAngle + PI2$1;\n    }\n\n    if (startAngle > endAngle && !anticlockwise) {\n      endAngle += PI2$1;\n    } else if (startAngle < endAngle && anticlockwise) {\n      startAngle += PI2$1;\n    }\n\n    if (anticlockwise) {\n      var tmp = endAngle;\n      endAngle = startAngle;\n      startAngle = tmp;\n    }\n\n    for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {\n      if (angle > startAngle) {\n        extremity[0] = mathCos$1(angle) * rx + x;\n        extremity[1] = mathSin$1(angle) * ry + y;\n        vec2Min(min$$1, extremity, min$$1);\n        vec2Max(max$$1, extremity, max$$1);\n      }\n    }\n  }\n\n  var CMD = {\n    M: 1,\n    L: 2,\n    C: 3,\n    Q: 4,\n    A: 5,\n    Z: 6,\n    R: 7\n  };\n  var tmpOutX = [];\n  var tmpOutY = [];\n  var min$1 = [];\n  var max$1 = [];\n  var min2 = [];\n  var max2 = [];\n  var mathMin$1 = Math.min;\n  var mathMax$1 = Math.max;\n  var mathCos = Math.cos;\n  var mathSin = Math.sin;\n  var mathAbs = Math.abs;\n  var PI = Math.PI;\n  var PI2 = PI * 2;\n  var hasTypedArray = typeof Float32Array !== 'undefined';\n  var tmpAngles = [];\n\n  function modPI2(radian) {\n    var n = Math.round(radian / PI * 1e8) / 1e8;\n    return n % 2 * PI;\n  }\n\n  function normalizeArcAngles(angles, anticlockwise) {\n    var newStartAngle = modPI2(angles[0]);\n\n    if (newStartAngle < 0) {\n      newStartAngle += PI2;\n    }\n\n    var delta = newStartAngle - angles[0];\n    var newEndAngle = angles[1];\n    newEndAngle += delta;\n\n    if (!anticlockwise && newEndAngle - newStartAngle >= PI2) {\n      newEndAngle = newStartAngle + PI2;\n    } else if (anticlockwise && newStartAngle - newEndAngle >= PI2) {\n      newEndAngle = newStartAngle - PI2;\n    } else if (!anticlockwise && newStartAngle > newEndAngle) {\n      newEndAngle = newStartAngle + (PI2 - modPI2(newStartAngle - newEndAngle));\n    } else if (anticlockwise && newStartAngle < newEndAngle) {\n      newEndAngle = newStartAngle - (PI2 - modPI2(newEndAngle - newStartAngle));\n    }\n\n    angles[0] = newStartAngle;\n    angles[1] = newEndAngle;\n  }\n\n  var PathProxy = function () {\n    function PathProxy(notSaveData) {\n      this.dpr = 1;\n      this._xi = 0;\n      this._yi = 0;\n      this._x0 = 0;\n      this._y0 = 0;\n      this._len = 0;\n\n      if (notSaveData) {\n        this._saveData = false;\n      }\n\n      if (this._saveData) {\n        this.data = [];\n      }\n    }\n\n    PathProxy.prototype.increaseVersion = function () {\n      this._version++;\n    };\n\n    PathProxy.prototype.getVersion = function () {\n      return this._version;\n    };\n\n    PathProxy.prototype.setScale = function (sx, sy, segmentIgnoreThreshold) {\n      segmentIgnoreThreshold = segmentIgnoreThreshold || 0;\n\n      if (segmentIgnoreThreshold > 0) {\n        this._ux = mathAbs(segmentIgnoreThreshold / devicePixelRatio / sx) || 0;\n        this._uy = mathAbs(segmentIgnoreThreshold / devicePixelRatio / sy) || 0;\n      }\n    };\n\n    PathProxy.prototype.setDPR = function (dpr) {\n      this.dpr = dpr;\n    };\n\n    PathProxy.prototype.setContext = function (ctx) {\n      this._ctx = ctx;\n    };\n\n    PathProxy.prototype.getContext = function () {\n      return this._ctx;\n    };\n\n    PathProxy.prototype.beginPath = function () {\n      this._ctx && this._ctx.beginPath();\n      this.reset();\n      return this;\n    };\n\n    PathProxy.prototype.reset = function () {\n      if (this._saveData) {\n        this._len = 0;\n      }\n\n      if (this._pathSegLen) {\n        this._pathSegLen = null;\n        this._pathLen = 0;\n      }\n\n      this._version++;\n    };\n\n    PathProxy.prototype.moveTo = function (x, y) {\n      this._drawPendingPt();\n\n      this.addData(CMD.M, x, y);\n      this._ctx && this._ctx.moveTo(x, y);\n      this._x0 = x;\n      this._y0 = y;\n      this._xi = x;\n      this._yi = y;\n      return this;\n    };\n\n    PathProxy.prototype.lineTo = function (x, y) {\n      var dx = mathAbs(x - this._xi);\n      var dy = mathAbs(y - this._yi);\n      var exceedUnit = dx > this._ux || dy > this._uy;\n      this.addData(CMD.L, x, y);\n\n      if (this._ctx && exceedUnit) {\n        this._ctx.lineTo(x, y);\n      }\n\n      if (exceedUnit) {\n        this._xi = x;\n        this._yi = y;\n        this._pendingPtDist = 0;\n      } else {\n        var d2 = dx * dx + dy * dy;\n\n        if (d2 > this._pendingPtDist) {\n          this._pendingPtX = x;\n          this._pendingPtY = y;\n          this._pendingPtDist = d2;\n        }\n      }\n\n      return this;\n    };\n\n    PathProxy.prototype.bezierCurveTo = function (x1, y1, x2, y2, x3, y3) {\n      this._drawPendingPt();\n\n      this.addData(CMD.C, x1, y1, x2, y2, x3, y3);\n\n      if (this._ctx) {\n        this._ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n      }\n\n      this._xi = x3;\n      this._yi = y3;\n      return this;\n    };\n\n    PathProxy.prototype.quadraticCurveTo = function (x1, y1, x2, y2) {\n      this._drawPendingPt();\n\n      this.addData(CMD.Q, x1, y1, x2, y2);\n\n      if (this._ctx) {\n        this._ctx.quadraticCurveTo(x1, y1, x2, y2);\n      }\n\n      this._xi = x2;\n      this._yi = y2;\n      return this;\n    };\n\n    PathProxy.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n      this._drawPendingPt();\n\n      tmpAngles[0] = startAngle;\n      tmpAngles[1] = endAngle;\n      normalizeArcAngles(tmpAngles, anticlockwise);\n      startAngle = tmpAngles[0];\n      endAngle = tmpAngles[1];\n      var delta = endAngle - startAngle;\n      this.addData(CMD.A, cx, cy, r, r, startAngle, delta, 0, anticlockwise ? 0 : 1);\n      this._ctx && this._ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n      this._xi = mathCos(endAngle) * r + cx;\n      this._yi = mathSin(endAngle) * r + cy;\n      return this;\n    };\n\n    PathProxy.prototype.arcTo = function (x1, y1, x2, y2, radius) {\n      this._drawPendingPt();\n\n      if (this._ctx) {\n        this._ctx.arcTo(x1, y1, x2, y2, radius);\n      }\n\n      return this;\n    };\n\n    PathProxy.prototype.rect = function (x, y, w, h) {\n      this._drawPendingPt();\n\n      this._ctx && this._ctx.rect(x, y, w, h);\n      this.addData(CMD.R, x, y, w, h);\n      return this;\n    };\n\n    PathProxy.prototype.closePath = function () {\n      this._drawPendingPt();\n\n      this.addData(CMD.Z);\n      var ctx = this._ctx;\n      var x0 = this._x0;\n      var y0 = this._y0;\n\n      if (ctx) {\n        ctx.closePath();\n      }\n\n      this._xi = x0;\n      this._yi = y0;\n      return this;\n    };\n\n    PathProxy.prototype.fill = function (ctx) {\n      ctx && ctx.fill();\n      this.toStatic();\n    };\n\n    PathProxy.prototype.stroke = function (ctx) {\n      ctx && ctx.stroke();\n      this.toStatic();\n    };\n\n    PathProxy.prototype.len = function () {\n      return this._len;\n    };\n\n    PathProxy.prototype.setData = function (data) {\n      var len$$1 = data.length;\n\n      if (!(this.data && this.data.length === len$$1) && hasTypedArray) {\n        this.data = new Float32Array(len$$1);\n      }\n\n      for (var i = 0; i < len$$1; i++) {\n        this.data[i] = data[i];\n      }\n\n      this._len = len$$1;\n    };\n\n    PathProxy.prototype.appendPath = function (path) {\n      if (!(path instanceof Array)) {\n        path = [path];\n      }\n\n      var len$$1 = path.length;\n      var appendSize = 0;\n      var offset = this._len;\n\n      for (var i = 0; i < len$$1; i++) {\n        appendSize += path[i].len();\n      }\n\n      if (hasTypedArray && this.data instanceof Float32Array) {\n        this.data = new Float32Array(offset + appendSize);\n      }\n\n      for (var i = 0; i < len$$1; i++) {\n        var appendPathData = path[i].data;\n\n        for (var k = 0; k < appendPathData.length; k++) {\n          this.data[offset++] = appendPathData[k];\n        }\n      }\n\n      this._len = offset;\n    };\n\n    PathProxy.prototype.addData = function (cmd, a, b, c, d, e, f, g, h) {\n      if (!this._saveData) {\n        return;\n      }\n\n      var data = this.data;\n\n      if (this._len + arguments.length > data.length) {\n        this._expandData();\n\n        data = this.data;\n      }\n\n      for (var i = 0; i < arguments.length; i++) {\n        data[this._len++] = arguments[i];\n      }\n    };\n\n    PathProxy.prototype._drawPendingPt = function () {\n      if (this._pendingPtDist > 0) {\n        this._ctx && this._ctx.lineTo(this._pendingPtX, this._pendingPtY);\n        this._pendingPtDist = 0;\n      }\n    };\n\n    PathProxy.prototype._expandData = function () {\n      if (!(this.data instanceof Array)) {\n        var newData = [];\n\n        for (var i = 0; i < this._len; i++) {\n          newData[i] = this.data[i];\n        }\n\n        this.data = newData;\n      }\n    };\n\n    PathProxy.prototype.toStatic = function () {\n      if (!this._saveData) {\n        return;\n      }\n\n      this._drawPendingPt();\n\n      var data = this.data;\n\n      if (data instanceof Array) {\n        data.length = this._len;\n\n        if (hasTypedArray && this._len > 11) {\n          this.data = new Float32Array(data);\n        }\n      }\n    };\n\n    PathProxy.prototype.getBoundingRect = function () {\n      min$1[0] = min$1[1] = min2[0] = min2[1] = Number.MAX_VALUE;\n      max$1[0] = max$1[1] = max2[0] = max2[1] = -Number.MAX_VALUE;\n      var data = this.data;\n      var xi = 0;\n      var yi = 0;\n      var x0 = 0;\n      var y0 = 0;\n      var i;\n\n      for (i = 0; i < this._len;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n\n        if (isFirst) {\n          xi = data[i];\n          yi = data[i + 1];\n          x0 = xi;\n          y0 = yi;\n        }\n\n        switch (cmd) {\n          case CMD.M:\n            xi = x0 = data[i++];\n            yi = y0 = data[i++];\n            min2[0] = x0;\n            min2[1] = y0;\n            max2[0] = x0;\n            max2[1] = y0;\n            break;\n\n          case CMD.L:\n            fromLine(xi, yi, data[i], data[i + 1], min2, max2);\n            xi = data[i++];\n            yi = data[i++];\n            break;\n\n          case CMD.C:\n            fromCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], min2, max2);\n            xi = data[i++];\n            yi = data[i++];\n            break;\n\n          case CMD.Q:\n            fromQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], min2, max2);\n            xi = data[i++];\n            yi = data[i++];\n            break;\n\n          case CMD.A:\n            var cx = data[i++];\n            var cy = data[i++];\n            var rx = data[i++];\n            var ry = data[i++];\n            var startAngle = data[i++];\n            var endAngle = data[i++] + startAngle;\n            i += 1;\n            var anticlockwise = !data[i++];\n\n            if (isFirst) {\n              x0 = mathCos(startAngle) * rx + cx;\n              y0 = mathSin(startAngle) * ry + cy;\n            }\n\n            fromArc(cx, cy, rx, ry, startAngle, endAngle, anticlockwise, min2, max2);\n            xi = mathCos(endAngle) * rx + cx;\n            yi = mathSin(endAngle) * ry + cy;\n            break;\n\n          case CMD.R:\n            x0 = xi = data[i++];\n            y0 = yi = data[i++];\n            var width = data[i++];\n            var height = data[i++];\n            fromLine(x0, y0, x0 + width, y0 + height, min2, max2);\n            break;\n\n          case CMD.Z:\n            xi = x0;\n            yi = y0;\n            break;\n        }\n\n        min(min$1, min$1, min2);\n        max(max$1, max$1, max2);\n      }\n\n      if (i === 0) {\n        min$1[0] = min$1[1] = max$1[0] = max$1[1] = 0;\n      }\n\n      return new BoundingRect(min$1[0], min$1[1], max$1[0] - min$1[0], max$1[1] - min$1[1]);\n    };\n\n    PathProxy.prototype._calculateLength = function () {\n      var data = this.data;\n      var len$$1 = this._len;\n      var ux = this._ux;\n      var uy = this._uy;\n      var xi = 0;\n      var yi = 0;\n      var x0 = 0;\n      var y0 = 0;\n\n      if (!this._pathSegLen) {\n        this._pathSegLen = [];\n      }\n\n      var pathSegLen = this._pathSegLen;\n      var pathTotalLen = 0;\n      var segCount = 0;\n\n      for (var i = 0; i < len$$1;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n\n        if (isFirst) {\n          xi = data[i];\n          yi = data[i + 1];\n          x0 = xi;\n          y0 = yi;\n        }\n\n        var l = -1;\n\n        switch (cmd) {\n          case CMD.M:\n            xi = x0 = data[i++];\n            yi = y0 = data[i++];\n            break;\n\n          case CMD.L:\n            {\n              var x2 = data[i++];\n              var y2 = data[i++];\n              var dx = x2 - xi;\n              var dy = y2 - yi;\n\n              if (mathAbs(dx) > ux || mathAbs(dy) > uy || i === len$$1 - 1) {\n                l = Math.sqrt(dx * dx + dy * dy);\n                xi = x2;\n                yi = y2;\n              }\n\n              break;\n            }\n\n          case CMD.C:\n            {\n              var x1 = data[i++];\n              var y1 = data[i++];\n              var x2 = data[i++];\n              var y2 = data[i++];\n              var x3 = data[i++];\n              var y3 = data[i++];\n              l = cubicLength(xi, yi, x1, y1, x2, y2, x3, y3, 10);\n              xi = x3;\n              yi = y3;\n              break;\n            }\n\n          case CMD.Q:\n            {\n              var x1 = data[i++];\n              var y1 = data[i++];\n              var x2 = data[i++];\n              var y2 = data[i++];\n              l = quadraticLength(xi, yi, x1, y1, x2, y2, 10);\n              xi = x2;\n              yi = y2;\n              break;\n            }\n\n          case CMD.A:\n            var cx = data[i++];\n            var cy = data[i++];\n            var rx = data[i++];\n            var ry = data[i++];\n            var startAngle = data[i++];\n            var delta = data[i++];\n            var endAngle = delta + startAngle;\n            i += 1;\n            var anticlockwise = !data[i++];\n\n            if (isFirst) {\n              x0 = mathCos(startAngle) * rx + cx;\n              y0 = mathSin(startAngle) * ry + cy;\n            }\n\n            l = mathMax$1(rx, ry) * mathMin$1(PI2, Math.abs(delta));\n            xi = mathCos(endAngle) * rx + cx;\n            yi = mathSin(endAngle) * ry + cy;\n            break;\n\n          case CMD.R:\n            {\n              x0 = xi = data[i++];\n              y0 = yi = data[i++];\n              var width = data[i++];\n              var height = data[i++];\n              l = width * 2 + height * 2;\n              break;\n            }\n\n          case CMD.Z:\n            {\n              var dx = x0 - xi;\n              var dy = y0 - yi;\n              l = Math.sqrt(dx * dx + dy * dy);\n              xi = x0;\n              yi = y0;\n              break;\n            }\n        }\n\n        if (l >= 0) {\n          pathSegLen[segCount++] = l;\n          pathTotalLen += l;\n        }\n      }\n\n      this._pathLen = pathTotalLen;\n      return pathTotalLen;\n    };\n\n    PathProxy.prototype.rebuildPath = function (ctx, percent) {\n      var d = this.data;\n      var ux = this._ux;\n      var uy = this._uy;\n      var len$$1 = this._len;\n      var x0;\n      var y0;\n      var xi;\n      var yi;\n      var x;\n      var y;\n      var drawPart = percent < 1;\n      var pathSegLen;\n      var pathTotalLen;\n      var accumLength = 0;\n      var segCount = 0;\n      var displayedLength;\n      var pendingPtDist = 0;\n      var pendingPtX;\n      var pendingPtY;\n\n      if (drawPart) {\n        if (!this._pathSegLen) {\n          this._calculateLength();\n        }\n\n        pathSegLen = this._pathSegLen;\n        pathTotalLen = this._pathLen;\n        displayedLength = percent * pathTotalLen;\n\n        if (!displayedLength) {\n          return;\n        }\n      }\n\n      lo: for (var i = 0; i < len$$1;) {\n        var cmd = d[i++];\n        var isFirst = i === 1;\n\n        if (isFirst) {\n          xi = d[i];\n          yi = d[i + 1];\n          x0 = xi;\n          y0 = yi;\n        }\n\n        if (cmd !== CMD.L && pendingPtDist > 0) {\n          ctx.lineTo(pendingPtX, pendingPtY);\n          pendingPtDist = 0;\n        }\n\n        switch (cmd) {\n          case CMD.M:\n            x0 = xi = d[i++];\n            y0 = yi = d[i++];\n            ctx.moveTo(xi, yi);\n            break;\n\n          case CMD.L:\n            {\n              x = d[i++];\n              y = d[i++];\n              var dx = mathAbs(x - xi);\n              var dy = mathAbs(y - yi);\n\n              if (dx > ux || dy > uy) {\n                if (drawPart) {\n                  var l = pathSegLen[segCount++];\n\n                  if (accumLength + l > displayedLength) {\n                    var t = (displayedLength - accumLength) / l;\n                    ctx.lineTo(xi * (1 - t) + x * t, yi * (1 - t) + y * t);\n                    break lo;\n                  }\n\n                  accumLength += l;\n                }\n\n                ctx.lineTo(x, y);\n                xi = x;\n                yi = y;\n                pendingPtDist = 0;\n              } else {\n                var d2 = dx * dx + dy * dy;\n\n                if (d2 > pendingPtDist) {\n                  pendingPtX = x;\n                  pendingPtY = y;\n                  pendingPtDist = d2;\n                }\n              }\n\n              break;\n            }\n\n          case CMD.C:\n            {\n              var x1 = d[i++];\n              var y1 = d[i++];\n              var x2 = d[i++];\n              var y2 = d[i++];\n              var x3 = d[i++];\n              var y3 = d[i++];\n\n              if (drawPart) {\n                var l = pathSegLen[segCount++];\n\n                if (accumLength + l > displayedLength) {\n                  var t = (displayedLength - accumLength) / l;\n                  cubicSubdivide(xi, x1, x2, x3, t, tmpOutX);\n                  cubicSubdivide(yi, y1, y2, y3, t, tmpOutY);\n                  ctx.bezierCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2], tmpOutX[3], tmpOutY[3]);\n                  break lo;\n                }\n\n                accumLength += l;\n              }\n\n              ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n              xi = x3;\n              yi = y3;\n              break;\n            }\n\n          case CMD.Q:\n            {\n              var x1 = d[i++];\n              var y1 = d[i++];\n              var x2 = d[i++];\n              var y2 = d[i++];\n\n              if (drawPart) {\n                var l = pathSegLen[segCount++];\n\n                if (accumLength + l > displayedLength) {\n                  var t = (displayedLength - accumLength) / l;\n                  quadraticSubdivide(xi, x1, x2, t, tmpOutX);\n                  quadraticSubdivide(yi, y1, y2, t, tmpOutY);\n                  ctx.quadraticCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2]);\n                  break lo;\n                }\n\n                accumLength += l;\n              }\n\n              ctx.quadraticCurveTo(x1, y1, x2, y2);\n              xi = x2;\n              yi = y2;\n              break;\n            }\n\n          case CMD.A:\n            var cx = d[i++];\n            var cy = d[i++];\n            var rx = d[i++];\n            var ry = d[i++];\n            var startAngle = d[i++];\n            var delta = d[i++];\n            var psi = d[i++];\n            var anticlockwise = !d[i++];\n            var r = rx > ry ? rx : ry;\n            var isEllipse = mathAbs(rx - ry) > 1e-3;\n            var endAngle = startAngle + delta;\n            var breakBuild = false;\n\n            if (drawPart) {\n              var l = pathSegLen[segCount++];\n\n              if (accumLength + l > displayedLength) {\n                endAngle = startAngle + delta * (displayedLength - accumLength) / l;\n                breakBuild = true;\n              }\n\n              accumLength += l;\n            }\n\n            if (isEllipse && ctx.ellipse) {\n              ctx.ellipse(cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise);\n            } else {\n              ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n            }\n\n            if (breakBuild) {\n              break lo;\n            }\n\n            if (isFirst) {\n              x0 = mathCos(startAngle) * rx + cx;\n              y0 = mathSin(startAngle) * ry + cy;\n            }\n\n            xi = mathCos(endAngle) * rx + cx;\n            yi = mathSin(endAngle) * ry + cy;\n            break;\n\n          case CMD.R:\n            x0 = xi = d[i];\n            y0 = yi = d[i + 1];\n            x = d[i++];\n            y = d[i++];\n            var width = d[i++];\n            var height = d[i++];\n\n            if (drawPart) {\n              var l = pathSegLen[segCount++];\n\n              if (accumLength + l > displayedLength) {\n                var d_1 = displayedLength - accumLength;\n                ctx.moveTo(x, y);\n                ctx.lineTo(x + mathMin$1(d_1, width), y);\n                d_1 -= width;\n\n                if (d_1 > 0) {\n                  ctx.lineTo(x + width, y + mathMin$1(d_1, height));\n                }\n\n                d_1 -= height;\n\n                if (d_1 > 0) {\n                  ctx.lineTo(x + mathMax$1(width - d_1, 0), y + height);\n                }\n\n                d_1 -= width;\n\n                if (d_1 > 0) {\n                  ctx.lineTo(x, y + mathMax$1(height - d_1, 0));\n                }\n\n                break lo;\n              }\n\n              accumLength += l;\n            }\n\n            ctx.rect(x, y, width, height);\n            break;\n\n          case CMD.Z:\n            if (drawPart) {\n              var l = pathSegLen[segCount++];\n\n              if (accumLength + l > displayedLength) {\n                var t = (displayedLength - accumLength) / l;\n                ctx.lineTo(xi * (1 - t) + x0 * t, yi * (1 - t) + y0 * t);\n                break lo;\n              }\n\n              accumLength += l;\n            }\n\n            ctx.closePath();\n            xi = x0;\n            yi = y0;\n        }\n      }\n    };\n\n    PathProxy.prototype.clone = function () {\n      var newProxy = new PathProxy();\n      var data = this.data;\n      newProxy.data = data.slice ? data.slice() : Array.prototype.slice.call(data);\n      newProxy._len = this._len;\n      return newProxy;\n    };\n\n    PathProxy.CMD = CMD;\n\n    PathProxy.initDefaultProps = function () {\n      var proto = PathProxy.prototype;\n      proto._saveData = true;\n      proto._ux = 0;\n      proto._uy = 0;\n      proto._pendingPtDist = 0;\n      proto._version = 0;\n    }();\n\n    return PathProxy;\n  }();\n\n  function containStroke$1(x0, y0, x1, y1, lineWidth, x, y) {\n    if (lineWidth === 0) {\n      return false;\n    }\n\n    var _l = lineWidth;\n    var _a = 0;\n    var _b = x0;\n\n    if (y > y0 + _l && y > y1 + _l || y < y0 - _l && y < y1 - _l || x > x0 + _l && x > x1 + _l || x < x0 - _l && x < x1 - _l) {\n      return false;\n    }\n\n    if (x0 !== x1) {\n      _a = (y0 - y1) / (x0 - x1);\n      _b = (x0 * y1 - x1 * y0) / (x0 - x1);\n    } else {\n      return Math.abs(x - x0) <= _l / 2;\n    }\n\n    var tmp = _a * x - y + _b;\n\n    var _s = tmp * tmp / (_a * _a + 1);\n\n    return _s <= _l / 2 * _l / 2;\n  }\n\n  function containStroke$2(x0, y0, x1, y1, x2, y2, x3, y3, lineWidth, x, y) {\n    if (lineWidth === 0) {\n      return false;\n    }\n\n    var _l = lineWidth;\n\n    if (y > y0 + _l && y > y1 + _l && y > y2 + _l && y > y3 + _l || y < y0 - _l && y < y1 - _l && y < y2 - _l && y < y3 - _l || x > x0 + _l && x > x1 + _l && x > x2 + _l && x > x3 + _l || x < x0 - _l && x < x1 - _l && x < x2 - _l && x < x3 - _l) {\n      return false;\n    }\n\n    var d = cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, null);\n    return d <= _l / 2;\n  }\n\n  function containStroke$3(x0, y0, x1, y1, x2, y2, lineWidth, x, y) {\n    if (lineWidth === 0) {\n      return false;\n    }\n\n    var _l = lineWidth;\n\n    if (y > y0 + _l && y > y1 + _l && y > y2 + _l || y < y0 - _l && y < y1 - _l && y < y2 - _l || x > x0 + _l && x > x1 + _l && x > x2 + _l || x < x0 - _l && x < x1 - _l && x < x2 - _l) {\n      return false;\n    }\n\n    var d = quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, null);\n    return d <= _l / 2;\n  }\n\n  var PI2$4 = Math.PI * 2;\n\n  function normalizeRadian(angle) {\n    angle %= PI2$4;\n\n    if (angle < 0) {\n      angle += PI2$4;\n    }\n\n    return angle;\n  }\n\n  var PI2$3 = Math.PI * 2;\n\n  function containStroke$4(cx, cy, r, startAngle, endAngle, anticlockwise, lineWidth, x, y) {\n    if (lineWidth === 0) {\n      return false;\n    }\n\n    var _l = lineWidth;\n    x -= cx;\n    y -= cy;\n    var d = Math.sqrt(x * x + y * y);\n\n    if (d - _l > r || d + _l < r) {\n      return false;\n    }\n\n    if (Math.abs(startAngle - endAngle) % PI2$3 < 1e-4) {\n      return true;\n    }\n\n    if (anticlockwise) {\n      var tmp = startAngle;\n      startAngle = normalizeRadian(endAngle);\n      endAngle = normalizeRadian(tmp);\n    } else {\n      startAngle = normalizeRadian(startAngle);\n      endAngle = normalizeRadian(endAngle);\n    }\n\n    if (startAngle > endAngle) {\n      endAngle += PI2$3;\n    }\n\n    var angle = Math.atan2(y, x);\n\n    if (angle < 0) {\n      angle += PI2$3;\n    }\n\n    return angle >= startAngle && angle <= endAngle || angle + PI2$3 >= startAngle && angle + PI2$3 <= endAngle;\n  }\n\n  function windingLine(x0, y0, x1, y1, x, y) {\n    if (y > y0 && y > y1 || y < y0 && y < y1) {\n      return 0;\n    }\n\n    if (y1 === y0) {\n      return 0;\n    }\n\n    var t = (y - y0) / (y1 - y0);\n    var dir = y1 < y0 ? 1 : -1;\n\n    if (t === 1 || t === 0) {\n      dir = y1 < y0 ? 0.5 : -0.5;\n    }\n\n    var x_ = t * (x1 - x0) + x0;\n    return x_ === x ? Infinity : x_ > x ? dir : 0;\n  }\n\n  var CMD$1 = PathProxy.CMD;\n  var PI2$2 = Math.PI * 2;\n  var EPSILON$3 = 1e-4;\n\n  function isAroundEqual(a, b) {\n    return Math.abs(a - b) < EPSILON$3;\n  }\n\n  var roots = [-1, -1, -1];\n  var extrema = [-1, -1];\n\n  function swapExtrema() {\n    var tmp = extrema[0];\n    extrema[0] = extrema[1];\n    extrema[1] = tmp;\n  }\n\n  function windingCubic(x0, y0, x1, y1, x2, y2, x3, y3, x, y) {\n    if (y > y0 && y > y1 && y > y2 && y > y3 || y < y0 && y < y1 && y < y2 && y < y3) {\n      return 0;\n    }\n\n    var nRoots = cubicRootAt(y0, y1, y2, y3, y, roots);\n\n    if (nRoots === 0) {\n      return 0;\n    } else {\n      var w = 0;\n      var nExtrema = -1;\n      var y0_ = void 0;\n      var y1_ = void 0;\n\n      for (var i = 0; i < nRoots; i++) {\n        var t = roots[i];\n        var unit = t === 0 || t === 1 ? 0.5 : 1;\n        var x_ = cubicAt(x0, x1, x2, x3, t);\n\n        if (x_ < x) {\n          continue;\n        }\n\n        if (nExtrema < 0) {\n          nExtrema = cubicExtrema(y0, y1, y2, y3, extrema);\n\n          if (extrema[1] < extrema[0] && nExtrema > 1) {\n            swapExtrema();\n          }\n\n          y0_ = cubicAt(y0, y1, y2, y3, extrema[0]);\n\n          if (nExtrema > 1) {\n            y1_ = cubicAt(y0, y1, y2, y3, extrema[1]);\n          }\n        }\n\n        if (nExtrema === 2) {\n          if (t < extrema[0]) {\n            w += y0_ < y0 ? unit : -unit;\n          } else if (t < extrema[1]) {\n            w += y1_ < y0_ ? unit : -unit;\n          } else {\n            w += y3 < y1_ ? unit : -unit;\n          }\n        } else {\n          if (t < extrema[0]) {\n            w += y0_ < y0 ? unit : -unit;\n          } else {\n            w += y3 < y0_ ? unit : -unit;\n          }\n        }\n      }\n\n      return w;\n    }\n  }\n\n  function windingQuadratic(x0, y0, x1, y1, x2, y2, x, y) {\n    if (y > y0 && y > y1 && y > y2 || y < y0 && y < y1 && y < y2) {\n      return 0;\n    }\n\n    var nRoots = quadraticRootAt(y0, y1, y2, y, roots);\n\n    if (nRoots === 0) {\n      return 0;\n    } else {\n      var t = quadraticExtremum(y0, y1, y2);\n\n      if (t >= 0 && t <= 1) {\n        var w = 0;\n        var y_ = quadraticAt(y0, y1, y2, t);\n\n        for (var i = 0; i < nRoots; i++) {\n          var unit = roots[i] === 0 || roots[i] === 1 ? 0.5 : 1;\n          var x_ = quadraticAt(x0, x1, x2, roots[i]);\n\n          if (x_ < x) {\n            continue;\n          }\n\n          if (roots[i] < t) {\n            w += y_ < y0 ? unit : -unit;\n          } else {\n            w += y2 < y_ ? unit : -unit;\n          }\n        }\n\n        return w;\n      } else {\n        var unit = roots[0] === 0 || roots[0] === 1 ? 0.5 : 1;\n        var x_ = quadraticAt(x0, x1, x2, roots[0]);\n\n        if (x_ < x) {\n          return 0;\n        }\n\n        return y2 < y0 ? unit : -unit;\n      }\n    }\n  }\n\n  function windingArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y) {\n    y -= cy;\n\n    if (y > r || y < -r) {\n      return 0;\n    }\n\n    var tmp = Math.sqrt(r * r - y * y);\n    roots[0] = -tmp;\n    roots[1] = tmp;\n    var dTheta = Math.abs(startAngle - endAngle);\n\n    if (dTheta < 1e-4) {\n      return 0;\n    }\n\n    if (dTheta >= PI2$2 - 1e-4) {\n      startAngle = 0;\n      endAngle = PI2$2;\n      var dir = anticlockwise ? 1 : -1;\n\n      if (x >= roots[0] + cx && x <= roots[1] + cx) {\n        return dir;\n      } else {\n        return 0;\n      }\n    }\n\n    if (startAngle > endAngle) {\n      var tmp_1 = startAngle;\n      startAngle = endAngle;\n      endAngle = tmp_1;\n    }\n\n    if (startAngle < 0) {\n      startAngle += PI2$2;\n      endAngle += PI2$2;\n    }\n\n    var w = 0;\n\n    for (var i = 0; i < 2; i++) {\n      var x_ = roots[i];\n\n      if (x_ + cx > x) {\n        var angle = Math.atan2(y, x_);\n        var dir = anticlockwise ? 1 : -1;\n\n        if (angle < 0) {\n          angle = PI2$2 + angle;\n        }\n\n        if (angle >= startAngle && angle <= endAngle || angle + PI2$2 >= startAngle && angle + PI2$2 <= endAngle) {\n          if (angle > Math.PI / 2 && angle < Math.PI * 1.5) {\n            dir = -dir;\n          }\n\n          w += dir;\n        }\n      }\n    }\n\n    return w;\n  }\n\n  function containPath(path, lineWidth, isStroke, x, y) {\n    var data = path.data;\n    var len = path.len();\n    var w = 0;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    var x1;\n    var y1;\n\n    for (var i = 0; i < len;) {\n      var cmd = data[i++];\n      var isFirst = i === 1;\n\n      if (cmd === CMD$1.M && i > 1) {\n        if (!isStroke) {\n          w += windingLine(xi, yi, x0, y0, x, y);\n        }\n      }\n\n      if (isFirst) {\n        xi = data[i];\n        yi = data[i + 1];\n        x0 = xi;\n        y0 = yi;\n      }\n\n      switch (cmd) {\n        case CMD$1.M:\n          x0 = data[i++];\n          y0 = data[i++];\n          xi = x0;\n          yi = y0;\n          break;\n\n        case CMD$1.L:\n          if (isStroke) {\n            if (containStroke$1(xi, yi, data[i], data[i + 1], lineWidth, x, y)) {\n              return true;\n            }\n          } else {\n            w += windingLine(xi, yi, data[i], data[i + 1], x, y) || 0;\n          }\n\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD$1.C:\n          if (isStroke) {\n            if (containStroke$2(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n              return true;\n            }\n          } else {\n            w += windingCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n          }\n\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD$1.Q:\n          if (isStroke) {\n            if (containStroke$3(xi, yi, data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n              return true;\n            }\n          } else {\n            w += windingQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n          }\n\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD$1.A:\n          var cx = data[i++];\n          var cy = data[i++];\n          var rx = data[i++];\n          var ry = data[i++];\n          var theta = data[i++];\n          var dTheta = data[i++];\n          i += 1;\n          var anticlockwise = !!(1 - data[i++]);\n          x1 = Math.cos(theta) * rx + cx;\n          y1 = Math.sin(theta) * ry + cy;\n\n          if (!isFirst) {\n            w += windingLine(xi, yi, x1, y1, x, y);\n          } else {\n            x0 = x1;\n            y0 = y1;\n          }\n\n          var _x = (x - cx) * ry / rx + cx;\n\n          if (isStroke) {\n            if (containStroke$4(cx, cy, ry, theta, theta + dTheta, anticlockwise, lineWidth, _x, y)) {\n              return true;\n            }\n          } else {\n            w += windingArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y);\n          }\n\n          xi = Math.cos(theta + dTheta) * rx + cx;\n          yi = Math.sin(theta + dTheta) * ry + cy;\n          break;\n\n        case CMD$1.R:\n          x0 = xi = data[i++];\n          y0 = yi = data[i++];\n          var width = data[i++];\n          var height = data[i++];\n          x1 = x0 + width;\n          y1 = y0 + height;\n\n          if (isStroke) {\n            if (containStroke$1(x0, y0, x1, y0, lineWidth, x, y) || containStroke$1(x1, y0, x1, y1, lineWidth, x, y) || containStroke$1(x1, y1, x0, y1, lineWidth, x, y) || containStroke$1(x0, y1, x0, y0, lineWidth, x, y)) {\n              return true;\n            }\n          } else {\n            w += windingLine(x1, y0, x1, y1, x, y);\n            w += windingLine(x0, y1, x0, y0, x, y);\n          }\n\n          break;\n\n        case CMD$1.Z:\n          if (isStroke) {\n            if (containStroke$1(xi, yi, x0, y0, lineWidth, x, y)) {\n              return true;\n            }\n          } else {\n            w += windingLine(xi, yi, x0, y0, x, y);\n          }\n\n          xi = x0;\n          yi = y0;\n          break;\n      }\n    }\n\n    if (!isStroke && !isAroundEqual(yi, y0)) {\n      w += windingLine(xi, yi, x0, y0, x, y) || 0;\n    }\n\n    return w !== 0;\n  }\n\n  function contain(pathProxy, x, y) {\n    return containPath(pathProxy, 0, false, x, y);\n  }\n\n  function containStroke(pathProxy, lineWidth, x, y) {\n    return containPath(pathProxy, lineWidth, true, x, y);\n  }\n\n  var DEFAULT_PATH_STYLE = defaults({\n    fill: '#000',\n    stroke: null,\n    strokePercent: 1,\n    fillOpacity: 1,\n    strokeOpacity: 1,\n    lineDashOffset: 0,\n    lineWidth: 1,\n    lineCap: 'butt',\n    miterLimit: 10,\n    strokeNoScale: false,\n    strokeFirst: false\n  }, DEFAULT_COMMON_STYLE);\n  var DEFAULT_PATH_ANIMATION_PROPS = {\n    style: defaults({\n      fill: true,\n      stroke: true,\n      strokePercent: true,\n      fillOpacity: true,\n      strokeOpacity: true,\n      lineDashOffset: true,\n      lineWidth: true,\n      miterLimit: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n  };\n  var pathCopyParams = TRANSFORMABLE_PROPS.concat(['invisible', 'culling', 'z', 'z2', 'zlevel', 'parent']);\n\n  var Path = function (_super) {\n    __extends(Path, _super);\n\n    function Path(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Path.prototype.update = function () {\n      var _this = this;\n\n      _super.prototype.update.call(this);\n\n      var style = this.style;\n\n      if (style.decal) {\n        var decalEl = this._decalEl = this._decalEl || new Path();\n\n        if (decalEl.buildPath === Path.prototype.buildPath) {\n          decalEl.buildPath = function (ctx) {\n            _this.buildPath(ctx, _this.shape);\n          };\n        }\n\n        decalEl.silent = true;\n        var decalElStyle = decalEl.style;\n\n        for (var key in style) {\n          if (decalElStyle[key] !== style[key]) {\n            decalElStyle[key] = style[key];\n          }\n        }\n\n        decalElStyle.fill = style.fill ? style.decal : null;\n        decalElStyle.decal = null;\n        decalElStyle.shadowColor = null;\n        style.strokeFirst && (decalElStyle.stroke = null);\n\n        for (var i = 0; i < pathCopyParams.length; ++i) {\n          decalEl[pathCopyParams[i]] = this[pathCopyParams[i]];\n        }\n\n        decalEl.__dirty |= REDRAW_BIT;\n      } else if (this._decalEl) {\n        this._decalEl = null;\n      }\n    };\n\n    Path.prototype.getDecalElement = function () {\n      return this._decalEl;\n    };\n\n    Path.prototype._init = function (props) {\n      var keysArr = keys(props);\n      this.shape = this.getDefaultShape();\n      var defaultStyle = this.getDefaultStyle();\n\n      if (defaultStyle) {\n        this.useStyle(defaultStyle);\n      }\n\n      for (var i = 0; i < keysArr.length; i++) {\n        var key = keysArr[i];\n        var value = props[key];\n\n        if (key === 'style') {\n          if (!this.style) {\n            this.useStyle(value);\n          } else {\n            extend(this.style, value);\n          }\n        } else if (key === 'shape') {\n          extend(this.shape, value);\n        } else {\n          _super.prototype.attrKV.call(this, key, value);\n        }\n      }\n\n      if (!this.style) {\n        this.useStyle({});\n      }\n    };\n\n    Path.prototype.getDefaultStyle = function () {\n      return null;\n    };\n\n    Path.prototype.getDefaultShape = function () {\n      return {};\n    };\n\n    Path.prototype.canBeInsideText = function () {\n      return this.hasFill();\n    };\n\n    Path.prototype.getInsideTextFill = function () {\n      var pathFill = this.style.fill;\n\n      if (pathFill !== 'none') {\n        if (isString(pathFill)) {\n          var fillLum = lum(pathFill, 0);\n\n          if (fillLum > 0.5) {\n            return DARK_LABEL_COLOR;\n          } else if (fillLum > 0.2) {\n            return LIGHTER_LABEL_COLOR;\n          }\n\n          return LIGHT_LABEL_COLOR;\n        } else if (pathFill) {\n          return LIGHT_LABEL_COLOR;\n        }\n      }\n\n      return DARK_LABEL_COLOR;\n    };\n\n    Path.prototype.getInsideTextStroke = function (textFill) {\n      var pathFill = this.style.fill;\n\n      if (isString(pathFill)) {\n        var zr = this.__zr;\n        var isDarkMode = !!(zr && zr.isDarkMode());\n        var isDarkLabel = lum(textFill, 0) < DARK_MODE_THRESHOLD;\n\n        if (isDarkMode === isDarkLabel) {\n          return pathFill;\n        }\n      }\n    };\n\n    Path.prototype.buildPath = function (ctx, shapeCfg, inBatch) {};\n\n    Path.prototype.pathUpdated = function () {\n      this.__dirty &= ~SHAPE_CHANGED_BIT;\n    };\n\n    Path.prototype.getUpdatedPathProxy = function (inBatch) {\n      !this.path && this.createPathProxy();\n      this.path.beginPath();\n      this.buildPath(this.path, this.shape, inBatch);\n      return this.path;\n    };\n\n    Path.prototype.createPathProxy = function () {\n      this.path = new PathProxy(false);\n    };\n\n    Path.prototype.hasStroke = function () {\n      var style = this.style;\n      var stroke = style.stroke;\n      return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n    };\n\n    Path.prototype.hasFill = function () {\n      var style = this.style;\n      var fill = style.fill;\n      return fill != null && fill !== 'none';\n    };\n\n    Path.prototype.getBoundingRect = function () {\n      var rect = this._rect;\n      var style = this.style;\n      var needsUpdateRect = !rect;\n\n      if (needsUpdateRect) {\n        var firstInvoke = false;\n\n        if (!this.path) {\n          firstInvoke = true;\n          this.createPathProxy();\n        }\n\n        var path = this.path;\n\n        if (firstInvoke || this.__dirty & SHAPE_CHANGED_BIT) {\n          path.beginPath();\n          this.buildPath(path, this.shape, false);\n          this.pathUpdated();\n        }\n\n        rect = path.getBoundingRect();\n      }\n\n      this._rect = rect;\n\n      if (this.hasStroke() && this.path && this.path.len() > 0) {\n        var rectStroke = this._rectStroke || (this._rectStroke = rect.clone());\n\n        if (this.__dirty || needsUpdateRect) {\n          rectStroke.copy(rect);\n          var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n          var w = style.lineWidth;\n\n          if (!this.hasFill()) {\n            var strokeContainThreshold = this.strokeContainThreshold;\n            w = Math.max(w, strokeContainThreshold == null ? 4 : strokeContainThreshold);\n          }\n\n          if (lineScale > 1e-10) {\n            rectStroke.width += w / lineScale;\n            rectStroke.height += w / lineScale;\n            rectStroke.x -= w / lineScale / 2;\n            rectStroke.y -= w / lineScale / 2;\n          }\n        }\n\n        return rectStroke;\n      }\n\n      return rect;\n    };\n\n    Path.prototype.contain = function (x, y) {\n      var localPos = this.transformCoordToLocal(x, y);\n      var rect = this.getBoundingRect();\n      var style = this.style;\n      x = localPos[0];\n      y = localPos[1];\n\n      if (rect.contain(x, y)) {\n        var pathProxy = this.path;\n\n        if (this.hasStroke()) {\n          var lineWidth = style.lineWidth;\n          var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n\n          if (lineScale > 1e-10) {\n            if (!this.hasFill()) {\n              lineWidth = Math.max(lineWidth, this.strokeContainThreshold);\n            }\n\n            if (containStroke(pathProxy, lineWidth / lineScale, x, y)) {\n              return true;\n            }\n          }\n        }\n\n        if (this.hasFill()) {\n          return contain(pathProxy, x, y);\n        }\n      }\n\n      return false;\n    };\n\n    Path.prototype.dirtyShape = function () {\n      this.__dirty |= SHAPE_CHANGED_BIT;\n\n      if (this._rect) {\n        this._rect = null;\n      }\n\n      if (this._decalEl) {\n        this._decalEl.dirtyShape();\n      }\n\n      this.markRedraw();\n    };\n\n    Path.prototype.dirty = function () {\n      this.dirtyStyle();\n      this.dirtyShape();\n    };\n\n    Path.prototype.animateShape = function (loop) {\n      return this.animate('shape', loop);\n    };\n\n    Path.prototype.updateDuringAnimation = function (targetKey) {\n      if (targetKey === 'style') {\n        this.dirtyStyle();\n      } else if (targetKey === 'shape') {\n        this.dirtyShape();\n      } else {\n        this.markRedraw();\n      }\n    };\n\n    Path.prototype.attrKV = function (key, value) {\n      if (key === 'shape') {\n        this.setShape(value);\n      } else {\n        _super.prototype.attrKV.call(this, key, value);\n      }\n    };\n\n    Path.prototype.setShape = function (keyOrObj, value) {\n      var shape = this.shape;\n\n      if (!shape) {\n        shape = this.shape = {};\n      }\n\n      if (typeof keyOrObj === 'string') {\n        shape[keyOrObj] = value;\n      } else {\n        extend(shape, keyOrObj);\n      }\n\n      this.dirtyShape();\n      return this;\n    };\n\n    Path.prototype.shapeChanged = function () {\n      return !!(this.__dirty & SHAPE_CHANGED_BIT);\n    };\n\n    Path.prototype.createStyle = function (obj) {\n      return createObject(DEFAULT_PATH_STYLE, obj);\n    };\n\n    Path.prototype._innerSaveToNormal = function (toState) {\n      _super.prototype._innerSaveToNormal.call(this, toState);\n\n      var normalState = this._normalState;\n\n      if (toState.shape && !normalState.shape) {\n        normalState.shape = extend({}, this.shape);\n      }\n    };\n\n    Path.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n      _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n\n      var needsRestoreToNormal = !(state && keepCurrentStates);\n      var targetShape;\n\n      if (state && state.shape) {\n        if (transition) {\n          if (keepCurrentStates) {\n            targetShape = state.shape;\n          } else {\n            targetShape = extend({}, normalState.shape);\n            extend(targetShape, state.shape);\n          }\n        } else {\n          targetShape = extend({}, keepCurrentStates ? this.shape : normalState.shape);\n          extend(targetShape, state.shape);\n        }\n      } else if (needsRestoreToNormal) {\n        targetShape = normalState.shape;\n      }\n\n      if (targetShape) {\n        if (transition) {\n          this.shape = extend({}, this.shape);\n          var targetShapePrimaryProps = {};\n          var shapeKeys = keys(targetShape);\n\n          for (var i = 0; i < shapeKeys.length; i++) {\n            var key = shapeKeys[i];\n\n            if (typeof targetShape[key] === 'object') {\n              this.shape[key] = targetShape[key];\n            } else {\n              targetShapePrimaryProps[key] = targetShape[key];\n            }\n          }\n\n          this._transitionState(stateName, {\n            shape: targetShapePrimaryProps\n          }, animationCfg);\n        } else {\n          this.shape = targetShape;\n          this.dirtyShape();\n        }\n      }\n    };\n\n    Path.prototype._mergeStates = function (states) {\n      var mergedState = _super.prototype._mergeStates.call(this, states);\n\n      var mergedShape;\n\n      for (var i = 0; i < states.length; i++) {\n        var state = states[i];\n\n        if (state.shape) {\n          mergedShape = mergedShape || {};\n\n          this._mergeStyle(mergedShape, state.shape);\n        }\n      }\n\n      if (mergedShape) {\n        mergedState.shape = mergedShape;\n      }\n\n      return mergedState;\n    };\n\n    Path.prototype.getAnimationStyleProps = function () {\n      return DEFAULT_PATH_ANIMATION_PROPS;\n    };\n\n    Path.prototype.isZeroArea = function () {\n      return false;\n    };\n\n    Path.extend = function (defaultProps) {\n      var Sub = function (_super) {\n        __extends(Sub, _super);\n\n        function Sub(opts) {\n          var _this = _super.call(this, opts) || this;\n\n          defaultProps.init && defaultProps.init.call(_this, opts);\n          return _this;\n        }\n\n        Sub.prototype.getDefaultStyle = function () {\n          return clone(defaultProps.style);\n        };\n\n        Sub.prototype.getDefaultShape = function () {\n          return clone(defaultProps.shape);\n        };\n\n        return Sub;\n      }(Path);\n\n      for (var key in defaultProps) {\n        if (typeof defaultProps[key] === 'function') {\n          Sub.prototype[key] = defaultProps[key];\n        }\n      }\n\n      return Sub;\n    };\n\n    Path.initDefaultProps = function () {\n      var pathProto = Path.prototype;\n      pathProto.type = 'path';\n      pathProto.strokeContainThreshold = 5;\n      pathProto.segmentIgnoreThreshold = 0;\n      pathProto.subPixelOptimize = false;\n      pathProto.autoBatch = false;\n      pathProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT | SHAPE_CHANGED_BIT;\n    }();\n\n    return Path;\n  }(Displayable);\n\n  var DEFAULT_TSPAN_STYLE = defaults({\n    strokeFirst: true,\n    font: DEFAULT_FONT,\n    x: 0,\n    y: 0,\n    textAlign: 'left',\n    textBaseline: 'top',\n    miterLimit: 2\n  }, DEFAULT_PATH_STYLE);\n\n  var TSpan = function (_super) {\n    __extends(TSpan, _super);\n\n    function TSpan() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    TSpan.prototype.hasStroke = function () {\n      var style = this.style;\n      var stroke = style.stroke;\n      return stroke != null && stroke !== 'none' && style.lineWidth > 0;\n    };\n\n    TSpan.prototype.hasFill = function () {\n      var style = this.style;\n      var fill = style.fill;\n      return fill != null && fill !== 'none';\n    };\n\n    TSpan.prototype.createStyle = function (obj) {\n      return createObject(DEFAULT_TSPAN_STYLE, obj);\n    };\n\n    TSpan.prototype.setBoundingRect = function (rect) {\n      this._rect = rect;\n    };\n\n    TSpan.prototype.getBoundingRect = function () {\n      var style = this.style;\n\n      if (!this._rect) {\n        var text = style.text;\n        text != null ? text += '' : text = '';\n        var rect = getBoundingRect(text, style.font, style.textAlign, style.textBaseline);\n        rect.x += style.x || 0;\n        rect.y += style.y || 0;\n\n        if (this.hasStroke()) {\n          var w = style.lineWidth;\n          rect.x -= w / 2;\n          rect.y -= w / 2;\n          rect.width += w;\n          rect.height += w;\n        }\n\n        this._rect = rect;\n      }\n\n      return this._rect;\n    };\n\n    TSpan.initDefaultProps = function () {\n      var tspanProto = TSpan.prototype;\n      tspanProto.dirtyRectTolerance = 10;\n    }();\n\n    return TSpan;\n  }(Displayable);\n\n  TSpan.prototype.type = 'tspan';\n  var DEFAULT_IMAGE_STYLE = defaults({\n    x: 0,\n    y: 0\n  }, DEFAULT_COMMON_STYLE);\n  var DEFAULT_IMAGE_ANIMATION_PROPS = {\n    style: defaults({\n      x: true,\n      y: true,\n      width: true,\n      height: true,\n      sx: true,\n      sy: true,\n      sWidth: true,\n      sHeight: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n  };\n\n  function isImageLike(source) {\n    return !!(source && typeof source !== 'string' && source.width && source.height);\n  }\n\n  var ZRImage = function (_super) {\n    __extends(ZRImage, _super);\n\n    function ZRImage() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    ZRImage.prototype.createStyle = function (obj) {\n      return createObject(DEFAULT_IMAGE_STYLE, obj);\n    };\n\n    ZRImage.prototype._getSize = function (dim) {\n      var style = this.style;\n      var size = style[dim];\n\n      if (size != null) {\n        return size;\n      }\n\n      var imageSource = isImageLike(style.image) ? style.image : this.__image;\n\n      if (!imageSource) {\n        return 0;\n      }\n\n      var otherDim = dim === 'width' ? 'height' : 'width';\n      var otherDimSize = style[otherDim];\n\n      if (otherDimSize == null) {\n        return imageSource[dim];\n      } else {\n        return imageSource[dim] / imageSource[otherDim] * otherDimSize;\n      }\n    };\n\n    ZRImage.prototype.getWidth = function () {\n      return this._getSize('width');\n    };\n\n    ZRImage.prototype.getHeight = function () {\n      return this._getSize('height');\n    };\n\n    ZRImage.prototype.getAnimationStyleProps = function () {\n      return DEFAULT_IMAGE_ANIMATION_PROPS;\n    };\n\n    ZRImage.prototype.getBoundingRect = function () {\n      var style = this.style;\n\n      if (!this._rect) {\n        this._rect = new BoundingRect(style.x || 0, style.y || 0, this.getWidth(), this.getHeight());\n      }\n\n      return this._rect;\n    };\n\n    return ZRImage;\n  }(Displayable);\n\n  ZRImage.prototype.type = 'image';\n\n  function buildPath(ctx, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var width = shape.width;\n    var height = shape.height;\n    var r = shape.r;\n    var r1;\n    var r2;\n    var r3;\n    var r4;\n\n    if (width < 0) {\n      x = x + width;\n      width = -width;\n    }\n\n    if (height < 0) {\n      y = y + height;\n      height = -height;\n    }\n\n    if (typeof r === 'number') {\n      r1 = r2 = r3 = r4 = r;\n    } else if (r instanceof Array) {\n      if (r.length === 1) {\n        r1 = r2 = r3 = r4 = r[0];\n      } else if (r.length === 2) {\n        r1 = r3 = r[0];\n        r2 = r4 = r[1];\n      } else if (r.length === 3) {\n        r1 = r[0];\n        r2 = r4 = r[1];\n        r3 = r[2];\n      } else {\n        r1 = r[0];\n        r2 = r[1];\n        r3 = r[2];\n        r4 = r[3];\n      }\n    } else {\n      r1 = r2 = r3 = r4 = 0;\n    }\n\n    var total;\n\n    if (r1 + r2 > width) {\n      total = r1 + r2;\n      r1 *= width / total;\n      r2 *= width / total;\n    }\n\n    if (r3 + r4 > width) {\n      total = r3 + r4;\n      r3 *= width / total;\n      r4 *= width / total;\n    }\n\n    if (r2 + r3 > height) {\n      total = r2 + r3;\n      r2 *= height / total;\n      r3 *= height / total;\n    }\n\n    if (r1 + r4 > height) {\n      total = r1 + r4;\n      r1 *= height / total;\n      r4 *= height / total;\n    }\n\n    ctx.moveTo(x + r1, y);\n    ctx.lineTo(x + width - r2, y);\n    r2 !== 0 && ctx.arc(x + width - r2, y + r2, r2, -Math.PI / 2, 0);\n    ctx.lineTo(x + width, y + height - r3);\n    r3 !== 0 && ctx.arc(x + width - r3, y + height - r3, r3, 0, Math.PI / 2);\n    ctx.lineTo(x + r4, y + height);\n    r4 !== 0 && ctx.arc(x + r4, y + height - r4, r4, Math.PI / 2, Math.PI);\n    ctx.lineTo(x, y + r1);\n    r1 !== 0 && ctx.arc(x + r1, y + r1, r1, Math.PI, Math.PI * 1.5);\n  }\n\n  var round$1 = Math.round;\n\n  function subPixelOptimizeLine(outputShape, inputShape, style) {\n    if (!inputShape) {\n      return;\n    }\n\n    var x1 = inputShape.x1;\n    var x2 = inputShape.x2;\n    var y1 = inputShape.y1;\n    var y2 = inputShape.y2;\n    outputShape.x1 = x1;\n    outputShape.x2 = x2;\n    outputShape.y1 = y1;\n    outputShape.y2 = y2;\n    var lineWidth = style && style.lineWidth;\n\n    if (!lineWidth) {\n      return outputShape;\n    }\n\n    if (round$1(x1 * 2) === round$1(x2 * 2)) {\n      outputShape.x1 = outputShape.x2 = subPixelOptimize(x1, lineWidth, true);\n    }\n\n    if (round$1(y1 * 2) === round$1(y2 * 2)) {\n      outputShape.y1 = outputShape.y2 = subPixelOptimize(y1, lineWidth, true);\n    }\n\n    return outputShape;\n  }\n\n  function subPixelOptimizeRect(outputShape, inputShape, style) {\n    if (!inputShape) {\n      return;\n    }\n\n    var originX = inputShape.x;\n    var originY = inputShape.y;\n    var originWidth = inputShape.width;\n    var originHeight = inputShape.height;\n    outputShape.x = originX;\n    outputShape.y = originY;\n    outputShape.width = originWidth;\n    outputShape.height = originHeight;\n    var lineWidth = style && style.lineWidth;\n\n    if (!lineWidth) {\n      return outputShape;\n    }\n\n    outputShape.x = subPixelOptimize(originX, lineWidth, true);\n    outputShape.y = subPixelOptimize(originY, lineWidth, true);\n    outputShape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - outputShape.x, originWidth === 0 ? 0 : 1);\n    outputShape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - outputShape.y, originHeight === 0 ? 0 : 1);\n    return outputShape;\n  }\n\n  function subPixelOptimize(position, lineWidth, positiveOrNegative) {\n    if (!lineWidth) {\n      return position;\n    }\n\n    var doubledPosition = round$1(position * 2);\n    return (doubledPosition + round$1(lineWidth)) % 2 === 0 ? doubledPosition / 2 : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\n  }\n\n  var RectShape = function () {\n    function RectShape() {\n      this.x = 0;\n      this.y = 0;\n      this.width = 0;\n      this.height = 0;\n    }\n\n    return RectShape;\n  }();\n\n  var subPixelOptimizeOutputShape = {};\n\n  var Rect = function (_super) {\n    __extends(Rect, _super);\n\n    function Rect(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Rect.prototype.getDefaultShape = function () {\n      return new RectShape();\n    };\n\n    Rect.prototype.buildPath = function (ctx, shape) {\n      var x;\n      var y;\n      var width;\n      var height;\n\n      if (this.subPixelOptimize) {\n        var optimizedShape = subPixelOptimizeRect(subPixelOptimizeOutputShape, shape, this.style);\n        x = optimizedShape.x;\n        y = optimizedShape.y;\n        width = optimizedShape.width;\n        height = optimizedShape.height;\n        optimizedShape.r = shape.r;\n        shape = optimizedShape;\n      } else {\n        x = shape.x;\n        y = shape.y;\n        width = shape.width;\n        height = shape.height;\n      }\n\n      if (!shape.r) {\n        ctx.rect(x, y, width, height);\n      } else {\n        buildPath(ctx, shape);\n      }\n    };\n\n    Rect.prototype.isZeroArea = function () {\n      return !this.shape.width || !this.shape.height;\n    };\n\n    return Rect;\n  }(Path);\n\n  Rect.prototype.type = 'rect';\n  var DEFAULT_RICH_TEXT_COLOR = {\n    fill: '#000'\n  };\n  var DEFAULT_STROKE_LINE_WIDTH = 2;\n  var DEFAULT_TEXT_ANIMATION_PROPS = {\n    style: defaults({\n      fill: true,\n      stroke: true,\n      fillOpacity: true,\n      strokeOpacity: true,\n      lineWidth: true,\n      fontSize: true,\n      lineHeight: true,\n      width: true,\n      height: true,\n      textShadowColor: true,\n      textShadowBlur: true,\n      textShadowOffsetX: true,\n      textShadowOffsetY: true,\n      backgroundColor: true,\n      padding: true,\n      borderColor: true,\n      borderWidth: true,\n      borderRadius: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n  };\n\n  var ZRText = function (_super) {\n    __extends(ZRText, _super);\n\n    function ZRText(opts) {\n      var _this = _super.call(this) || this;\n\n      _this.type = 'text';\n      _this._children = [];\n      _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\n\n      _this.attr(opts);\n\n      return _this;\n    }\n\n    ZRText.prototype.childrenRef = function () {\n      return this._children;\n    };\n\n    ZRText.prototype.update = function () {\n      _super.prototype.update.call(this);\n\n      if (this.styleChanged()) {\n        this._updateSubTexts();\n      }\n\n      for (var i = 0; i < this._children.length; i++) {\n        var child = this._children[i];\n        child.zlevel = this.zlevel;\n        child.z = this.z;\n        child.z2 = this.z2;\n        child.culling = this.culling;\n        child.cursor = this.cursor;\n        child.invisible = this.invisible;\n      }\n    };\n\n    ZRText.prototype.updateTransform = function () {\n      var innerTransformable = this.innerTransformable;\n\n      if (innerTransformable) {\n        innerTransformable.updateTransform();\n\n        if (innerTransformable.transform) {\n          this.transform = innerTransformable.transform;\n        }\n      } else {\n        _super.prototype.updateTransform.call(this);\n      }\n    };\n\n    ZRText.prototype.getLocalTransform = function (m) {\n      var innerTransformable = this.innerTransformable;\n      return innerTransformable ? innerTransformable.getLocalTransform(m) : _super.prototype.getLocalTransform.call(this, m);\n    };\n\n    ZRText.prototype.getComputedTransform = function () {\n      if (this.__hostTarget) {\n        this.__hostTarget.getComputedTransform();\n\n        this.__hostTarget.updateInnerText(true);\n      }\n\n      return _super.prototype.getComputedTransform.call(this);\n    };\n\n    ZRText.prototype._updateSubTexts = function () {\n      this._childCursor = 0;\n      normalizeTextStyle(this.style);\n      this.style.rich ? this._updateRichTexts() : this._updatePlainTexts();\n      this._children.length = this._childCursor;\n      this.styleUpdated();\n    };\n\n    ZRText.prototype.addSelfToZr = function (zr) {\n      _super.prototype.addSelfToZr.call(this, zr);\n\n      for (var i = 0; i < this._children.length; i++) {\n        this._children[i].__zr = zr;\n      }\n    };\n\n    ZRText.prototype.removeSelfFromZr = function (zr) {\n      _super.prototype.removeSelfFromZr.call(this, zr);\n\n      for (var i = 0; i < this._children.length; i++) {\n        this._children[i].__zr = null;\n      }\n    };\n\n    ZRText.prototype.getBoundingRect = function () {\n      if (this.styleChanged()) {\n        this._updateSubTexts();\n      }\n\n      if (!this._rect) {\n        var tmpRect = new BoundingRect(0, 0, 0, 0);\n        var children = this._children;\n        var tmpMat = [];\n        var rect = null;\n\n        for (var i = 0; i < children.length; i++) {\n          var child = children[i];\n          var childRect = child.getBoundingRect();\n          var transform = child.getLocalTransform(tmpMat);\n\n          if (transform) {\n            tmpRect.copy(childRect);\n            tmpRect.applyTransform(transform);\n            rect = rect || tmpRect.clone();\n            rect.union(tmpRect);\n          } else {\n            rect = rect || childRect.clone();\n            rect.union(childRect);\n          }\n        }\n\n        this._rect = rect || tmpRect;\n      }\n\n      return this._rect;\n    };\n\n    ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\n      this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\n    };\n\n    ZRText.prototype.setTextContent = function (textContent) {\n      {\n        throw new Error('Can\\'t attach text on another text');\n      }\n    };\n\n    ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n      if (!sourceStyle) {\n        return targetStyle;\n      }\n\n      var sourceRich = sourceStyle.rich;\n      var targetRich = targetStyle.rich || sourceRich && {};\n      extend(targetStyle, sourceStyle);\n\n      if (sourceRich && targetRich) {\n        this._mergeRich(targetRich, sourceRich);\n\n        targetStyle.rich = targetRich;\n      } else if (targetRich) {\n        targetStyle.rich = targetRich;\n      }\n\n      return targetStyle;\n    };\n\n    ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\n      var richNames = keys(sourceRich);\n\n      for (var i = 0; i < richNames.length; i++) {\n        var richName = richNames[i];\n        targetRich[richName] = targetRich[richName] || {};\n        extend(targetRich[richName], sourceRich[richName]);\n      }\n    };\n\n    ZRText.prototype.getAnimationStyleProps = function () {\n      return DEFAULT_TEXT_ANIMATION_PROPS;\n    };\n\n    ZRText.prototype._getOrCreateChild = function (Ctor) {\n      var child = this._children[this._childCursor];\n\n      if (!child || !(child instanceof Ctor)) {\n        child = new Ctor();\n      }\n\n      this._children[this._childCursor++] = child;\n      child.__zr = this.__zr;\n      child.parent = this;\n      return child;\n    };\n\n    ZRText.prototype._updatePlainTexts = function () {\n      var style = this.style;\n      var textFont = style.font || DEFAULT_FONT;\n      var textPadding = style.padding;\n      var text = getStyleText(style);\n      var contentBlock = parsePlainText(text, style);\n      var needDrawBg = needDrawBackground(style);\n      var bgColorDrawn = !!style.backgroundColor;\n      var outerHeight = contentBlock.outerHeight;\n      var outerWidth = contentBlock.outerWidth;\n      var contentWidth = contentBlock.contentWidth;\n      var textLines = contentBlock.lines;\n      var lineHeight = contentBlock.lineHeight;\n      var defaultStyle = this._defaultStyle;\n      var baseX = style.x || 0;\n      var baseY = style.y || 0;\n      var textAlign = style.align || defaultStyle.align || 'left';\n      var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\n      var textX = baseX;\n      var textY = adjustTextY$1(baseY, contentBlock.contentHeight, verticalAlign);\n\n      if (needDrawBg || textPadding) {\n        var boxX = adjustTextX(baseX, outerWidth, textAlign);\n        var boxY = adjustTextY$1(baseY, outerHeight, verticalAlign);\n        needDrawBg && this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n      }\n\n      textY += lineHeight / 2;\n\n      if (textPadding) {\n        textX = getTextXForPadding(baseX, textAlign, textPadding);\n\n        if (verticalAlign === 'top') {\n          textY += textPadding[0];\n        } else if (verticalAlign === 'bottom') {\n          textY -= textPadding[2];\n        }\n      }\n\n      var defaultLineWidth = 0;\n      var useDefaultFill = false;\n      var textFill = getFill('fill' in style ? style.fill : (useDefaultFill = true, defaultStyle.fill));\n      var textStroke = getStroke('stroke' in style ? style.stroke : !bgColorDrawn && (!defaultStyle.autoStroke || useDefaultFill) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke) : null);\n      var hasShadow = style.textShadowBlur > 0;\n      var fixedBoundingRect = style.width != null && (style.overflow === 'truncate' || style.overflow === 'break' || style.overflow === 'breakAll');\n      var calculatedLineHeight = contentBlock.calculatedLineHeight;\n\n      for (var i = 0; i < textLines.length; i++) {\n        var el = this._getOrCreateChild(TSpan);\n\n        var subElStyle = el.createStyle();\n        el.useStyle(subElStyle);\n        subElStyle.text = textLines[i];\n        subElStyle.x = textX;\n        subElStyle.y = textY;\n\n        if (textAlign) {\n          subElStyle.textAlign = textAlign;\n        }\n\n        subElStyle.textBaseline = 'middle';\n        subElStyle.opacity = style.opacity;\n        subElStyle.strokeFirst = true;\n\n        if (hasShadow) {\n          subElStyle.shadowBlur = style.textShadowBlur || 0;\n          subElStyle.shadowColor = style.textShadowColor || 'transparent';\n          subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\n          subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\n        }\n\n        subElStyle.stroke = textStroke;\n        subElStyle.fill = textFill;\n\n        if (textStroke) {\n          subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\n          subElStyle.lineDash = style.lineDash;\n          subElStyle.lineDashOffset = style.lineDashOffset || 0;\n        }\n\n        subElStyle.font = textFont;\n        setSeparateFont(subElStyle, style);\n        textY += lineHeight;\n\n        if (fixedBoundingRect) {\n          el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, style.width, subElStyle.textAlign), adjustTextY$1(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), contentWidth, calculatedLineHeight));\n        }\n      }\n    };\n\n    ZRText.prototype._updateRichTexts = function () {\n      var style = this.style;\n      var text = getStyleText(style);\n      var contentBlock = parseRichText(text, style);\n      var contentWidth = contentBlock.width;\n      var outerWidth = contentBlock.outerWidth;\n      var outerHeight = contentBlock.outerHeight;\n      var textPadding = style.padding;\n      var baseX = style.x || 0;\n      var baseY = style.y || 0;\n      var defaultStyle = this._defaultStyle;\n      var textAlign = style.align || defaultStyle.align;\n      var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\n      var boxX = adjustTextX(baseX, outerWidth, textAlign);\n      var boxY = adjustTextY$1(baseY, outerHeight, verticalAlign);\n      var xLeft = boxX;\n      var lineTop = boxY;\n\n      if (textPadding) {\n        xLeft += textPadding[3];\n        lineTop += textPadding[0];\n      }\n\n      var xRight = xLeft + contentWidth;\n\n      if (needDrawBackground(style)) {\n        this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n      }\n\n      var bgColorDrawn = !!style.backgroundColor;\n\n      for (var i = 0; i < contentBlock.lines.length; i++) {\n        var line = contentBlock.lines[i];\n        var tokens = line.tokens;\n        var tokenCount = tokens.length;\n        var lineHeight = line.lineHeight;\n        var remainedWidth = line.width;\n        var leftIndex = 0;\n        var lineXLeft = xLeft;\n        var lineXRight = xRight;\n        var rightIndex = tokenCount - 1;\n        var token = void 0;\n\n        while (leftIndex < tokenCount && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\n          this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\n\n          remainedWidth -= token.width;\n          lineXLeft += token.width;\n          leftIndex++;\n        }\n\n        while (rightIndex >= 0 && (token = tokens[rightIndex], token.align === 'right')) {\n          this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\n\n          remainedWidth -= token.width;\n          lineXRight -= token.width;\n          rightIndex--;\n        }\n\n        lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\n\n        while (leftIndex <= rightIndex) {\n          token = tokens[leftIndex];\n\n          this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\n\n          lineXLeft += token.width;\n          leftIndex++;\n        }\n\n        lineTop += lineHeight;\n      }\n    };\n\n    ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\n      var tokenStyle = style.rich[token.styleName] || {};\n      tokenStyle.text = token.text;\n      var verticalAlign = token.verticalAlign;\n      var y = lineTop + lineHeight / 2;\n\n      if (verticalAlign === 'top') {\n        y = lineTop + token.height / 2;\n      } else if (verticalAlign === 'bottom') {\n        y = lineTop + lineHeight - token.height / 2;\n      }\n\n      var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\n      needDrawBg && this._renderBackground(tokenStyle, style, textAlign === 'right' ? x - token.width : textAlign === 'center' ? x - token.width / 2 : x, y - token.height / 2, token.width, token.height);\n      var bgColorDrawn = !!tokenStyle.backgroundColor;\n      var textPadding = token.textPadding;\n\n      if (textPadding) {\n        x = getTextXForPadding(x, textAlign, textPadding);\n        y -= token.height / 2 - textPadding[0] - token.innerHeight / 2;\n      }\n\n      var el = this._getOrCreateChild(TSpan);\n\n      var subElStyle = el.createStyle();\n      el.useStyle(subElStyle);\n      var defaultStyle = this._defaultStyle;\n      var useDefaultFill = false;\n      var defaultLineWidth = 0;\n      var textFill = getFill('fill' in tokenStyle ? tokenStyle.fill : 'fill' in style ? style.fill : (useDefaultFill = true, defaultStyle.fill));\n      var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke : 'stroke' in style ? style.stroke : !bgColorDrawn && !parentBgColorDrawn && (!defaultStyle.autoStroke || useDefaultFill) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke) : null);\n      var hasShadow = tokenStyle.textShadowBlur > 0 || style.textShadowBlur > 0;\n      subElStyle.text = token.text;\n      subElStyle.x = x;\n      subElStyle.y = y;\n\n      if (hasShadow) {\n        subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\n        subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\n        subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\n        subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\n      }\n\n      subElStyle.textAlign = textAlign;\n      subElStyle.textBaseline = 'middle';\n      subElStyle.font = token.font || DEFAULT_FONT;\n      subElStyle.opacity = retrieve3(tokenStyle.opacity, style.opacity, 1);\n      setSeparateFont(subElStyle, tokenStyle);\n\n      if (textStroke) {\n        subElStyle.lineWidth = retrieve3(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\n        subElStyle.lineDash = retrieve2(tokenStyle.lineDash, style.lineDash);\n        subElStyle.lineDashOffset = style.lineDashOffset || 0;\n        subElStyle.stroke = textStroke;\n      }\n\n      if (textFill) {\n        subElStyle.fill = textFill;\n      }\n\n      var textWidth = token.contentWidth;\n      var textHeight = token.contentHeight;\n      el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, textWidth, subElStyle.textAlign), adjustTextY$1(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));\n    };\n\n    ZRText.prototype._renderBackground = function (style, topStyle, x, y, width, height) {\n      var textBackgroundColor = style.backgroundColor;\n      var textBorderWidth = style.borderWidth;\n      var textBorderColor = style.borderColor;\n      var isImageBg = textBackgroundColor && textBackgroundColor.image;\n      var isPlainOrGradientBg = textBackgroundColor && !isImageBg;\n      var textBorderRadius = style.borderRadius;\n      var self = this;\n      var rectEl;\n      var imgEl;\n\n      if (isPlainOrGradientBg || style.lineHeight || textBorderWidth && textBorderColor) {\n        rectEl = this._getOrCreateChild(Rect);\n        rectEl.useStyle(rectEl.createStyle());\n        rectEl.style.fill = null;\n        var rectShape = rectEl.shape;\n        rectShape.x = x;\n        rectShape.y = y;\n        rectShape.width = width;\n        rectShape.height = height;\n        rectShape.r = textBorderRadius;\n        rectEl.dirtyShape();\n      }\n\n      if (isPlainOrGradientBg) {\n        var rectStyle = rectEl.style;\n        rectStyle.fill = textBackgroundColor || null;\n        rectStyle.fillOpacity = retrieve2(style.fillOpacity, 1);\n      } else if (isImageBg) {\n        imgEl = this._getOrCreateChild(ZRImage);\n\n        imgEl.onload = function () {\n          self.dirtyStyle();\n        };\n\n        var imgStyle = imgEl.style;\n        imgStyle.image = textBackgroundColor.image;\n        imgStyle.x = x;\n        imgStyle.y = y;\n        imgStyle.width = width;\n        imgStyle.height = height;\n      }\n\n      if (textBorderWidth && textBorderColor) {\n        var rectStyle = rectEl.style;\n        rectStyle.lineWidth = textBorderWidth;\n        rectStyle.stroke = textBorderColor;\n        rectStyle.strokeOpacity = retrieve2(style.strokeOpacity, 1);\n        rectStyle.lineDash = style.borderDash;\n        rectStyle.lineDashOffset = style.borderDashOffset || 0;\n        rectEl.strokeContainThreshold = 0;\n\n        if (rectEl.hasFill() && rectEl.hasStroke()) {\n          rectStyle.strokeFirst = true;\n          rectStyle.lineWidth *= 2;\n        }\n      }\n\n      var commonStyle = (rectEl || imgEl).style;\n      commonStyle.shadowBlur = style.shadowBlur || 0;\n      commonStyle.shadowColor = style.shadowColor || 'transparent';\n      commonStyle.shadowOffsetX = style.shadowOffsetX || 0;\n      commonStyle.shadowOffsetY = style.shadowOffsetY || 0;\n      commonStyle.opacity = retrieve3(style.opacity, topStyle.opacity, 1);\n    };\n\n    ZRText.makeFont = function (style) {\n      var font = '';\n\n      if (hasSeparateFont(style)) {\n        font = [style.fontStyle, style.fontWeight, parseFontSize(style.fontSize), style.fontFamily || 'sans-serif'].join(' ');\n      }\n\n      return font && trim(font) || style.textFont || style.font;\n    };\n\n    return ZRText;\n  }(Displayable);\n\n  var VALID_TEXT_ALIGN = {\n    left: true,\n    right: 1,\n    center: 1\n  };\n  var VALID_TEXT_VERTICAL_ALIGN = {\n    top: 1,\n    bottom: 1,\n    middle: 1\n  };\n  var FONT_PARTS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily'];\n\n  function parseFontSize(fontSize) {\n    if (typeof fontSize === 'string' && (fontSize.indexOf('px') !== -1 || fontSize.indexOf('rem') !== -1 || fontSize.indexOf('em') !== -1)) {\n      return fontSize;\n    } else if (!isNaN(+fontSize)) {\n      return fontSize + 'px';\n    } else {\n      return DEFAULT_FONT_SIZE + 'px';\n    }\n  }\n\n  function setSeparateFont(targetStyle, sourceStyle) {\n    for (var i = 0; i < FONT_PARTS.length; i++) {\n      var fontProp = FONT_PARTS[i];\n      var val = sourceStyle[fontProp];\n\n      if (val != null) {\n        targetStyle[fontProp] = val;\n      }\n    }\n  }\n\n  function hasSeparateFont(style) {\n    return style.fontSize != null || style.fontFamily || style.fontWeight;\n  }\n\n  function normalizeTextStyle(style) {\n    normalizeStyle(style);\n    each(style.rich, normalizeStyle);\n    return style;\n  }\n\n  function normalizeStyle(style) {\n    if (style) {\n      style.font = ZRText.makeFont(style);\n      var textAlign = style.align;\n      textAlign === 'middle' && (textAlign = 'center');\n      style.align = textAlign == null || VALID_TEXT_ALIGN[textAlign] ? textAlign : 'left';\n      var verticalAlign = style.verticalAlign;\n      verticalAlign === 'center' && (verticalAlign = 'middle');\n      style.verticalAlign = verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign] ? verticalAlign : 'top';\n      var textPadding = style.padding;\n\n      if (textPadding) {\n        style.padding = normalizeCssArray(style.padding);\n      }\n    }\n  }\n\n  function getStroke(stroke, lineWidth) {\n    return stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none' ? null : stroke.image || stroke.colorStops ? '#000' : stroke;\n  }\n\n  function getFill(fill) {\n    return fill == null || fill === 'none' ? null : fill.image || fill.colorStops ? '#000' : fill;\n  }\n\n  function getTextXForPadding(x, textAlign, textPadding) {\n    return textAlign === 'right' ? x - textPadding[1] : textAlign === 'center' ? x + textPadding[3] / 2 - textPadding[1] / 2 : x + textPadding[3];\n  }\n\n  function getStyleText(style) {\n    var text = style.text;\n    text != null && (text += '');\n    return text;\n  }\n\n  function needDrawBackground(style) {\n    return !!(style.backgroundColor || style.lineHeight || style.borderWidth && style.borderColor);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var getECData = makeInner();\n\n  var setCommonECData = function (seriesIndex, dataType, dataIdx, el) {\n    if (el) {\n      var ecData = getECData(el); // Add data index and series index for indexing the data by element\n      // Useful in tooltip\n\n      ecData.dataIndex = dataIdx;\n      ecData.dataType = dataType;\n      ecData.seriesIndex = seriesIndex; // TODO: not store dataIndex on children.\n\n      if (el.type === 'group') {\n        el.traverse(function (child) {\n          var childECData = getECData(child);\n          childECData.seriesIndex = seriesIndex;\n          childECData.dataIndex = dataIdx;\n          childECData.dataType = dataType;\n        });\n      }\n    }\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var _highlightNextDigit = 1;\n  var _highlightKeyMap = {};\n  var getSavedStates = makeInner();\n  var getComponentStates = makeInner();\n  var HOVER_STATE_NORMAL = 0;\n  var HOVER_STATE_BLUR = 1;\n  var HOVER_STATE_EMPHASIS = 2;\n  var SPECIAL_STATES = ['emphasis', 'blur', 'select'];\n  var DISPLAY_STATES = ['normal', 'emphasis', 'blur', 'select'];\n  var Z2_EMPHASIS_LIFT = 10;\n  var Z2_SELECT_LIFT = 9;\n  var HIGHLIGHT_ACTION_TYPE = 'highlight';\n  var DOWNPLAY_ACTION_TYPE = 'downplay';\n  var SELECT_ACTION_TYPE = 'select';\n  var UNSELECT_ACTION_TYPE = 'unselect';\n  var TOGGLE_SELECT_ACTION_TYPE = 'toggleSelect';\n\n  function hasFillOrStroke(fillOrStroke) {\n    return fillOrStroke != null && fillOrStroke !== 'none';\n  } // Most lifted color are duplicated.\n\n\n  var liftedColorCache = new LRU(100);\n\n  function liftColor(color) {\n    if (isString(color)) {\n      var liftedColor = liftedColorCache.get(color);\n\n      if (!liftedColor) {\n        liftedColor = lift(color, -0.1);\n        liftedColorCache.put(color, liftedColor);\n      }\n\n      return liftedColor;\n    } else if (isGradientObject(color)) {\n      var ret = extend({}, color);\n      ret.colorStops = map(color.colorStops, function (stop) {\n        return {\n          offset: stop.offset,\n          color: lift(stop.color, -0.1)\n        };\n      });\n      return ret;\n    } // Change nothing.\n\n\n    return color;\n  }\n\n  function doChangeHoverState(el, stateName, hoverStateEnum) {\n    if (el.onHoverStateChange && (el.hoverState || 0) !== hoverStateEnum) {\n      el.onHoverStateChange(stateName);\n    }\n\n    el.hoverState = hoverStateEnum;\n  }\n\n  function singleEnterEmphasis(el) {\n    // Only mark the flag.\n    // States will be applied in the echarts.ts in next frame.\n    doChangeHoverState(el, 'emphasis', HOVER_STATE_EMPHASIS);\n  }\n\n  function singleLeaveEmphasis(el) {\n    // Only mark the flag.\n    // States will be applied in the echarts.ts in next frame.\n    if (el.hoverState === HOVER_STATE_EMPHASIS) {\n      doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\n    }\n  }\n\n  function singleEnterBlur(el) {\n    doChangeHoverState(el, 'blur', HOVER_STATE_BLUR);\n  }\n\n  function singleLeaveBlur(el) {\n    if (el.hoverState === HOVER_STATE_BLUR) {\n      doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\n    }\n  }\n\n  function singleEnterSelect(el) {\n    el.selected = true;\n  }\n\n  function singleLeaveSelect(el) {\n    el.selected = false;\n  }\n\n  function updateElementState(el, updater, commonParam) {\n    updater(el, commonParam);\n  }\n\n  function traverseUpdateState(el, updater, commonParam) {\n    updateElementState(el, updater, commonParam);\n    el.isGroup && el.traverse(function (child) {\n      updateElementState(child, updater, commonParam);\n    });\n  }\n\n  function setStatesFlag(el, stateName) {\n    switch (stateName) {\n      case 'emphasis':\n        el.hoverState = HOVER_STATE_EMPHASIS;\n        break;\n\n      case 'normal':\n        el.hoverState = HOVER_STATE_NORMAL;\n        break;\n\n      case 'blur':\n        el.hoverState = HOVER_STATE_BLUR;\n        break;\n\n      case 'select':\n        el.selected = true;\n    }\n  }\n  /**\n   * If we reuse elements when rerender.\n   * DONT forget to clearStates before we update the style and shape.\n   * Or we may update on the wrong state instead of normal state.\n   */\n\n\n  function getFromStateStyle(el, props, toStateName, defaultValue) {\n    var style = el.style;\n    var fromState = {};\n\n    for (var i = 0; i < props.length; i++) {\n      var propName = props[i];\n      var val = style[propName];\n      fromState[propName] = val == null ? defaultValue && defaultValue[propName] : val;\n    }\n\n    for (var i = 0; i < el.animators.length; i++) {\n      var animator = el.animators[i];\n\n      if (animator.__fromStateTransition // Dont consider the animation to emphasis state.\n      && animator.__fromStateTransition.indexOf(toStateName) < 0 && animator.targetName === 'style') {\n        animator.saveTo(fromState, props);\n      }\n    }\n\n    return fromState;\n  }\n\n  function createEmphasisDefaultState(el, stateName, targetStates, state) {\n    var hasSelect = targetStates && indexOf(targetStates, 'select') >= 0;\n    var cloned = false;\n\n    if (el instanceof Path) {\n      var store = getSavedStates(el);\n      var fromFill = hasSelect ? store.selectFill || store.normalFill : store.normalFill;\n      var fromStroke = hasSelect ? store.selectStroke || store.normalStroke : store.normalStroke;\n\n      if (hasFillOrStroke(fromFill) || hasFillOrStroke(fromStroke)) {\n        state = state || {};\n        var emphasisStyle = state.style || {}; // inherit case\n\n        if (emphasisStyle.fill === 'inherit') {\n          cloned = true;\n          state = extend({}, state);\n          emphasisStyle = extend({}, emphasisStyle);\n          emphasisStyle.fill = fromFill;\n        } // Apply default color lift\n        else if (!hasFillOrStroke(emphasisStyle.fill) && hasFillOrStroke(fromFill)) {\n            cloned = true; // Not modify the original value.\n\n            state = extend({}, state);\n            emphasisStyle = extend({}, emphasisStyle); // Already being applied 'emphasis'. DON'T lift color multiple times.\n\n            emphasisStyle.fill = liftColor(fromFill);\n          } // Not highlight stroke if fill has been highlighted.\n          else if (!hasFillOrStroke(emphasisStyle.stroke) && hasFillOrStroke(fromStroke)) {\n              if (!cloned) {\n                state = extend({}, state);\n                emphasisStyle = extend({}, emphasisStyle);\n              }\n\n              emphasisStyle.stroke = liftColor(fromStroke);\n            }\n\n        state.style = emphasisStyle;\n      }\n    }\n\n    if (state) {\n      // TODO Share with textContent?\n      if (state.z2 == null) {\n        if (!cloned) {\n          state = extend({}, state);\n        }\n\n        var z2EmphasisLift = el.z2EmphasisLift;\n        state.z2 = el.z2 + (z2EmphasisLift != null ? z2EmphasisLift : Z2_EMPHASIS_LIFT);\n      }\n    }\n\n    return state;\n  }\n\n  function createSelectDefaultState(el, stateName, state) {\n    // const hasSelect = indexOf(el.currentStates, stateName) >= 0;\n    if (state) {\n      // TODO Share with textContent?\n      if (state.z2 == null) {\n        state = extend({}, state);\n        var z2SelectLift = el.z2SelectLift;\n        state.z2 = el.z2 + (z2SelectLift != null ? z2SelectLift : Z2_SELECT_LIFT);\n      }\n    }\n\n    return state;\n  }\n\n  function createBlurDefaultState(el, stateName, state) {\n    var hasBlur = indexOf(el.currentStates, stateName) >= 0;\n    var currentOpacity = el.style.opacity;\n    var fromState = !hasBlur ? getFromStateStyle(el, ['opacity'], stateName, {\n      opacity: 1\n    }) : null;\n    state = state || {};\n    var blurStyle = state.style || {};\n\n    if (blurStyle.opacity == null) {\n      // clone state\n      state = extend({}, state);\n      blurStyle = extend({\n        // Already being applied 'emphasis'. DON'T mul opacity multiple times.\n        opacity: hasBlur ? currentOpacity : fromState.opacity * 0.1\n      }, blurStyle);\n      state.style = blurStyle;\n    }\n\n    return state;\n  }\n\n  function elementStateProxy(stateName, targetStates) {\n    var state = this.states[stateName];\n\n    if (this.style) {\n      if (stateName === 'emphasis') {\n        return createEmphasisDefaultState(this, stateName, targetStates, state);\n      } else if (stateName === 'blur') {\n        return createBlurDefaultState(this, stateName, state);\n      } else if (stateName === 'select') {\n        return createSelectDefaultState(this, stateName, state);\n      }\n    }\n\n    return state;\n  }\n  /**FI\n   * Set hover style (namely \"emphasis style\") of element.\n   * @param el Should not be `zrender/graphic/Group`.\n   * @param focus 'self' | 'selfInSeries' | 'series'\n   */\n\n\n  function setDefaultStateProxy(el) {\n    el.stateProxy = elementStateProxy;\n    var textContent = el.getTextContent();\n    var textGuide = el.getTextGuideLine();\n\n    if (textContent) {\n      textContent.stateProxy = elementStateProxy;\n    }\n\n    if (textGuide) {\n      textGuide.stateProxy = elementStateProxy;\n    }\n  }\n\n  function enterEmphasisWhenMouseOver(el, e) {\n    !shouldSilent(el, e) // \"emphasis\" event highlight has higher priority than mouse highlight.\n    && !el.__highByOuter && traverseUpdateState(el, singleEnterEmphasis);\n  }\n\n  function leaveEmphasisWhenMouseOut(el, e) {\n    !shouldSilent(el, e) // \"emphasis\" event highlight has higher priority than mouse highlight.\n    && !el.__highByOuter && traverseUpdateState(el, singleLeaveEmphasis);\n  }\n\n  function enterEmphasis(el, highlightDigit) {\n    el.__highByOuter |= 1 << (highlightDigit || 0);\n    traverseUpdateState(el, singleEnterEmphasis);\n  }\n\n  function leaveEmphasis(el, highlightDigit) {\n    !(el.__highByOuter &= ~(1 << (highlightDigit || 0))) && traverseUpdateState(el, singleLeaveEmphasis);\n  }\n\n  function enterBlur(el) {\n    traverseUpdateState(el, singleEnterBlur);\n  }\n\n  function leaveBlur(el) {\n    traverseUpdateState(el, singleLeaveBlur);\n  }\n\n  function enterSelect(el) {\n    traverseUpdateState(el, singleEnterSelect);\n  }\n\n  function leaveSelect(el) {\n    traverseUpdateState(el, singleLeaveSelect);\n  }\n\n  function shouldSilent(el, e) {\n    return el.__highDownSilentOnTouch && e.zrByTouch;\n  }\n\n  function allLeaveBlur(api) {\n    var model = api.getModel();\n    var leaveBlurredSeries = [];\n    var allComponentViews = [];\n    model.eachComponent(function (componentType, componentModel) {\n      var componentStates = getComponentStates(componentModel);\n      var isSeries = componentType === 'series';\n      var view = isSeries ? api.getViewOfSeriesModel(componentModel) : api.getViewOfComponentModel(componentModel);\n      !isSeries && allComponentViews.push(view);\n\n      if (componentStates.isBlured) {\n        // Leave blur anyway\n        view.group.traverse(function (child) {\n          singleLeaveBlur(child);\n        });\n        isSeries && leaveBlurredSeries.push(componentModel);\n      }\n\n      componentStates.isBlured = false;\n    });\n    each(allComponentViews, function (view) {\n      if (view && view.toggleBlurSeries) {\n        view.toggleBlurSeries(leaveBlurredSeries, false, model);\n      }\n    });\n  }\n\n  function blurSeries(targetSeriesIndex, focus, blurScope, api) {\n    var ecModel = api.getModel();\n    blurScope = blurScope || 'coordinateSystem';\n\n    function leaveBlurOfIndices(data, dataIndices) {\n      for (var i = 0; i < dataIndices.length; i++) {\n        var itemEl = data.getItemGraphicEl(dataIndices[i]);\n        itemEl && leaveBlur(itemEl);\n      }\n    }\n\n    if (targetSeriesIndex == null) {\n      return;\n    }\n\n    if (!focus || focus === 'none') {\n      return;\n    }\n\n    var targetSeriesModel = ecModel.getSeriesByIndex(targetSeriesIndex);\n    var targetCoordSys = targetSeriesModel.coordinateSystem;\n\n    if (targetCoordSys && targetCoordSys.master) {\n      targetCoordSys = targetCoordSys.master;\n    }\n\n    var blurredSeries = [];\n    ecModel.eachSeries(function (seriesModel) {\n      var sameSeries = targetSeriesModel === seriesModel;\n      var coordSys = seriesModel.coordinateSystem;\n\n      if (coordSys && coordSys.master) {\n        coordSys = coordSys.master;\n      }\n\n      var sameCoordSys = coordSys && targetCoordSys ? coordSys === targetCoordSys : sameSeries; // If there is no coordinate system. use sameSeries instead.\n\n      if (!( // Not blur other series if blurScope series\n      blurScope === 'series' && !sameSeries // Not blur other coordinate system if blurScope is coordinateSystem\n      || blurScope === 'coordinateSystem' && !sameCoordSys // Not blur self series if focus is series.\n      || focus === 'series' && sameSeries // TODO blurScope: coordinate system\n      )) {\n        var view = api.getViewOfSeriesModel(seriesModel);\n        view.group.traverse(function (child) {\n          singleEnterBlur(child);\n        });\n\n        if (isArrayLike(focus)) {\n          leaveBlurOfIndices(seriesModel.getData(), focus);\n        } else if (isObject(focus)) {\n          var dataTypes = keys(focus);\n\n          for (var d = 0; d < dataTypes.length; d++) {\n            leaveBlurOfIndices(seriesModel.getData(dataTypes[d]), focus[dataTypes[d]]);\n          }\n        }\n\n        blurredSeries.push(seriesModel);\n        getComponentStates(seriesModel).isBlured = true;\n      }\n    });\n    ecModel.eachComponent(function (componentType, componentModel) {\n      if (componentType === 'series') {\n        return;\n      }\n\n      var view = api.getViewOfComponentModel(componentModel);\n\n      if (view && view.toggleBlurSeries) {\n        view.toggleBlurSeries(blurredSeries, true, ecModel);\n      }\n    });\n  }\n\n  function blurComponent(componentMainType, componentIndex, api) {\n    if (componentMainType == null || componentIndex == null) {\n      return;\n    }\n\n    var componentModel = api.getModel().getComponent(componentMainType, componentIndex);\n\n    if (!componentModel) {\n      return;\n    }\n\n    getComponentStates(componentModel).isBlured = true;\n    var view = api.getViewOfComponentModel(componentModel);\n\n    if (!view || !view.focusBlurEnabled) {\n      return;\n    }\n\n    view.group.traverse(function (child) {\n      singleEnterBlur(child);\n    });\n  }\n\n  function blurSeriesFromHighlightPayload(seriesModel, payload, api) {\n    var seriesIndex = seriesModel.seriesIndex;\n    var data = seriesModel.getData(payload.dataType);\n\n    if (!data) {\n      {\n        error(\"Unknown dataType \" + payload.dataType);\n      }\n      return;\n    }\n\n    var dataIndex = queryDataIndex(data, payload); // Pick the first one if there is multiple/none exists.\n\n    dataIndex = (isArray(dataIndex) ? dataIndex[0] : dataIndex) || 0;\n    var el = data.getItemGraphicEl(dataIndex);\n\n    if (!el) {\n      var count = data.count();\n      var current = 0; // If data on dataIndex is NaN.\n\n      while (!el && current < count) {\n        el = data.getItemGraphicEl(current++);\n      }\n    }\n\n    if (el) {\n      var ecData = getECData(el);\n      blurSeries(seriesIndex, ecData.focus, ecData.blurScope, api);\n    } else {\n      // If there is no element put on the data. Try getting it from raw option\n      // TODO Should put it on seriesModel?\n      var focus_1 = seriesModel.get(['emphasis', 'focus']);\n      var blurScope = seriesModel.get(['emphasis', 'blurScope']);\n\n      if (focus_1 != null) {\n        blurSeries(seriesIndex, focus_1, blurScope, api);\n      }\n    }\n  }\n\n  function findComponentHighDownDispatchers(componentMainType, componentIndex, name, api) {\n    var ret = {\n      focusSelf: false,\n      dispatchers: null\n    };\n\n    if (componentMainType == null || componentMainType === 'series' || componentIndex == null || name == null) {\n      return ret;\n    }\n\n    var componentModel = api.getModel().getComponent(componentMainType, componentIndex);\n\n    if (!componentModel) {\n      return ret;\n    }\n\n    var view = api.getViewOfComponentModel(componentModel);\n\n    if (!view || !view.findHighDownDispatchers) {\n      return ret;\n    }\n\n    var dispatchers = view.findHighDownDispatchers(name); // At presnet, the component (like Geo) only blur inside itself.\n    // So we do not use `blurScope` in component.\n\n    var focusSelf;\n\n    for (var i = 0; i < dispatchers.length; i++) {\n      if (\"development\" !== 'production' && !isHighDownDispatcher(dispatchers[i])) {\n        error('param should be highDownDispatcher');\n      }\n\n      if (getECData(dispatchers[i]).focus === 'self') {\n        focusSelf = true;\n        break;\n      }\n    }\n\n    return {\n      focusSelf: focusSelf,\n      dispatchers: dispatchers\n    };\n  }\n\n  function handleGlobalMouseOverForHighDown(dispatcher, e, api) {\n    if (\"development\" !== 'production' && !isHighDownDispatcher(dispatcher)) {\n      error('param should be highDownDispatcher');\n    }\n\n    var ecData = getECData(dispatcher);\n\n    var _a = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api),\n        dispatchers = _a.dispatchers,\n        focusSelf = _a.focusSelf; // If `findHighDownDispatchers` is supported on the component,\n    // highlight/downplay elements with the same name.\n\n\n    if (dispatchers) {\n      if (focusSelf) {\n        blurComponent(ecData.componentMainType, ecData.componentIndex, api);\n      }\n\n      each(dispatchers, function (dispatcher) {\n        return enterEmphasisWhenMouseOver(dispatcher, e);\n      });\n    } else {\n      // Try blur all in the related series. Then emphasis the hoverred.\n      // TODO. progressive mode.\n      blurSeries(ecData.seriesIndex, ecData.focus, ecData.blurScope, api);\n\n      if (ecData.focus === 'self') {\n        blurComponent(ecData.componentMainType, ecData.componentIndex, api);\n      } // Other than series, component that not support `findHighDownDispatcher` will\n      // also use it. But in this case, highlight/downplay are only supported in\n      // mouse hover but not in dispatchAction.\n\n\n      enterEmphasisWhenMouseOver(dispatcher, e);\n    }\n  }\n\n  function handleGlobalMouseOutForHighDown(dispatcher, e, api) {\n    if (\"development\" !== 'production' && !isHighDownDispatcher(dispatcher)) {\n      error('param should be highDownDispatcher');\n    }\n\n    allLeaveBlur(api);\n    var ecData = getECData(dispatcher);\n    var dispatchers = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api).dispatchers;\n\n    if (dispatchers) {\n      each(dispatchers, function (dispatcher) {\n        return leaveEmphasisWhenMouseOut(dispatcher, e);\n      });\n    } else {\n      leaveEmphasisWhenMouseOut(dispatcher, e);\n    }\n  }\n\n  function toggleSelectionFromPayload(seriesModel, payload, api) {\n    if (!isSelectChangePayload(payload)) {\n      return;\n    }\n\n    var dataType = payload.dataType;\n    var data = seriesModel.getData(dataType);\n    var dataIndex = queryDataIndex(data, payload);\n\n    if (!isArray(dataIndex)) {\n      dataIndex = [dataIndex];\n    }\n\n    seriesModel[payload.type === TOGGLE_SELECT_ACTION_TYPE ? 'toggleSelect' : payload.type === SELECT_ACTION_TYPE ? 'select' : 'unselect'](dataIndex, dataType);\n  }\n\n  function updateSeriesElementSelection(seriesModel) {\n    var allData = seriesModel.getAllData();\n    each(allData, function (_a) {\n      var data = _a.data,\n          type = _a.type;\n      data.eachItemGraphicEl(function (el, idx) {\n        seriesModel.isSelected(idx, type) ? enterSelect(el) : leaveSelect(el);\n      });\n    });\n  }\n\n  function getAllSelectedIndices(ecModel) {\n    var ret = [];\n    ecModel.eachSeries(function (seriesModel) {\n      var allData = seriesModel.getAllData();\n      each(allData, function (_a) {\n        var data = _a.data,\n            type = _a.type;\n        var dataIndices = seriesModel.getSelectedDataIndices();\n\n        if (dataIndices.length > 0) {\n          var item = {\n            dataIndex: dataIndices,\n            seriesIndex: seriesModel.seriesIndex\n          };\n\n          if (type != null) {\n            item.dataType = type;\n          }\n\n          ret.push(item);\n        }\n      });\n    });\n    return ret;\n  }\n  /**\n   * Enable the function that mouseover will trigger the emphasis state.\n   *\n   * NOTE:\n   * This function should be used on the element with dataIndex, seriesIndex.\n   *\n   */\n\n\n  function enableHoverEmphasis(el, focus, blurScope) {\n    setAsHighDownDispatcher(el, true);\n    traverseUpdateState(el, setDefaultStateProxy);\n    enableHoverFocus(el, focus, blurScope);\n  }\n\n  function disableHoverEmphasis(el) {\n    setAsHighDownDispatcher(el, false);\n  }\n\n  function toggleHoverEmphasis(el, focus, blurScope, isDisabled) {\n    isDisabled ? disableHoverEmphasis(el) : enableHoverEmphasis(el, focus, blurScope);\n  }\n\n  function enableHoverFocus(el, focus, blurScope) {\n    var ecData = getECData(el);\n\n    if (focus != null) {\n      // TODO dataIndex may be set after this function. This check is not useful.\n      // if (ecData.dataIndex == null) {\n      //     if (__DEV__) {\n      //         console.warn('focus can only been set on element with dataIndex');\n      //     }\n      // }\n      // else {\n      ecData.focus = focus;\n      ecData.blurScope = blurScope; // }\n    } else if (ecData.focus) {\n      ecData.focus = null;\n    }\n  }\n\n  var OTHER_STATES = ['emphasis', 'blur', 'select'];\n  var defaultStyleGetterMap = {\n    itemStyle: 'getItemStyle',\n    lineStyle: 'getLineStyle',\n    areaStyle: 'getAreaStyle'\n  };\n  /**\n   * Set emphasis/blur/selected states of element.\n   */\n\n  function setStatesStylesFromModel(el, itemModel, styleType, // default itemStyle\n  getter) {\n    styleType = styleType || 'itemStyle';\n\n    for (var i = 0; i < OTHER_STATES.length; i++) {\n      var stateName = OTHER_STATES[i];\n      var model = itemModel.getModel([stateName, styleType]);\n      var state = el.ensureState(stateName); // Let it throw error if getterType is not found.\n\n      state.style = getter ? getter(model) : model[defaultStyleGetterMap[styleType]]();\n    }\n  }\n  /**\n   *\n   * Set element as highlight / downplay dispatcher.\n   * It will be checked when element recieved mouseover event or from highlight action.\n   * It's in change of all highlight/downplay behavior of it's children.\n   *\n   * @param el\n   * @param el.highDownSilentOnTouch\n   *        In touch device, mouseover event will be trigger on touchstart event\n   *        (see module:zrender/dom/HandlerProxy). By this mechanism, we can\n   *        conveniently use hoverStyle when tap on touch screen without additional\n   *        code for compatibility.\n   *        But if the chart/component has select feature, which usually also use\n   *        hoverStyle, there might be conflict between 'select-highlight' and\n   *        'hover-highlight' especially when roam is enabled (see geo for example).\n   *        In this case, `highDownSilentOnTouch` should be used to disable\n   *        hover-highlight on touch device.\n   * @param asDispatcher If `false`, do not set as \"highDownDispatcher\".\n   */\n\n\n  function setAsHighDownDispatcher(el, asDispatcher) {\n    var disable = asDispatcher === false;\n    var extendedEl = el; // Make `highDownSilentOnTouch` and `onStateChange` only work after\n    // `setAsHighDownDispatcher` called. Avoid it is modified by user unexpectedly.\n\n    if (el.highDownSilentOnTouch) {\n      extendedEl.__highDownSilentOnTouch = el.highDownSilentOnTouch;\n    } // Simple optimize, since this method might be\n    // called for each elements of a group in some cases.\n\n\n    if (!disable || extendedEl.__highDownDispatcher) {\n      // Emphasis, normal can be triggered manually by API or other components like hover link.\n      // el[method]('emphasis', onElementEmphasisEvent)[method]('normal', onElementNormalEvent);\n      // Also keep previous record.\n      extendedEl.__highByOuter = extendedEl.__highByOuter || 0;\n      extendedEl.__highDownDispatcher = !disable;\n    }\n  }\n\n  function isHighDownDispatcher(el) {\n    return !!(el && el.__highDownDispatcher);\n  }\n  /**\n   * Enable component highlight/downplay features:\n   * + hover link (within the same name)\n   * + focus blur in component\n   */\n\n  /**\n   * Support hightlight/downplay record on each elements.\n   * For the case: hover highlight/downplay (legend, visualMap, ...) and\n   * user triggerred hightlight/downplay should not conflict.\n   * Only all of the highlightDigit cleared, return to normal.\n   * @param {string} highlightKey\n   * @return {number} highlightDigit\n   */\n\n\n  function getHighlightDigit(highlightKey) {\n    var highlightDigit = _highlightKeyMap[highlightKey];\n\n    if (highlightDigit == null && _highlightNextDigit <= 32) {\n      highlightDigit = _highlightKeyMap[highlightKey] = _highlightNextDigit++;\n    }\n\n    return highlightDigit;\n  }\n\n  function isSelectChangePayload(payload) {\n    var payloadType = payload.type;\n    return payloadType === SELECT_ACTION_TYPE || payloadType === UNSELECT_ACTION_TYPE || payloadType === TOGGLE_SELECT_ACTION_TYPE;\n  }\n\n  function isHighDownPayload(payload) {\n    var payloadType = payload.type;\n    return payloadType === HIGHLIGHT_ACTION_TYPE || payloadType === DOWNPLAY_ACTION_TYPE;\n  }\n\n  function savePathStates(el) {\n    var store = getSavedStates(el);\n    store.normalFill = el.style.fill;\n    store.normalStroke = el.style.stroke;\n    var selectState = el.states.select || {};\n    store.selectFill = selectState.style && selectState.style.fill || null;\n    store.selectStroke = selectState.style && selectState.style.stroke || null;\n  }\n\n  var CMD$2 = PathProxy.CMD;\n  var points = [[], [], []];\n  var mathSqrt$2 = Math.sqrt;\n  var mathAtan2 = Math.atan2;\n\n  function transformPath(path, m) {\n    if (!m) {\n      return;\n    }\n\n    var data = path.data;\n    var len$$1 = path.len();\n    var cmd;\n    var nPoint;\n    var i;\n    var j;\n    var k;\n    var p;\n    var M = CMD$2.M;\n    var C = CMD$2.C;\n    var L = CMD$2.L;\n    var R = CMD$2.R;\n    var A = CMD$2.A;\n    var Q = CMD$2.Q;\n\n    for (i = 0, j = 0; i < len$$1;) {\n      cmd = data[i++];\n      j = i;\n      nPoint = 0;\n\n      switch (cmd) {\n        case M:\n          nPoint = 1;\n          break;\n\n        case L:\n          nPoint = 1;\n          break;\n\n        case C:\n          nPoint = 3;\n          break;\n\n        case Q:\n          nPoint = 2;\n          break;\n\n        case A:\n          var x = m[4];\n          var y = m[5];\n          var sx = mathSqrt$2(m[0] * m[0] + m[1] * m[1]);\n          var sy = mathSqrt$2(m[2] * m[2] + m[3] * m[3]);\n          var angle = mathAtan2(-m[1] / sy, m[0] / sx);\n          data[i] *= sx;\n          data[i++] += x;\n          data[i] *= sy;\n          data[i++] += y;\n          data[i++] *= sx;\n          data[i++] *= sy;\n          data[i++] += angle;\n          data[i++] += angle;\n          i += 2;\n          j = i;\n          break;\n\n        case R:\n          p[0] = data[i++];\n          p[1] = data[i++];\n          applyTransform(p, p, m);\n          data[j++] = p[0];\n          data[j++] = p[1];\n          p[0] += data[i++];\n          p[1] += data[i++];\n          applyTransform(p, p, m);\n          data[j++] = p[0];\n          data[j++] = p[1];\n      }\n\n      for (k = 0; k < nPoint; k++) {\n        var p_1 = points[k];\n        p_1[0] = data[i++];\n        p_1[1] = data[i++];\n        applyTransform(p_1, p_1, m);\n        data[j++] = p_1[0];\n        data[j++] = p_1[1];\n      }\n    }\n\n    path.increaseVersion();\n  }\n\n  var mathSqrt$1 = Math.sqrt;\n  var mathSin$2 = Math.sin;\n  var mathCos$2 = Math.cos;\n  var PI$1 = Math.PI;\n\n  function vMag(v) {\n    return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n  }\n\n  function vRatio(u, v) {\n    return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n  }\n\n  function vAngle(u, v) {\n    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n  }\n\n  function processArc(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg, cmd, path) {\n    var psi = psiDeg * (PI$1 / 180.0);\n    var xp = mathCos$2(psi) * (x1 - x2) / 2.0 + mathSin$2(psi) * (y1 - y2) / 2.0;\n    var yp = -1 * mathSin$2(psi) * (x1 - x2) / 2.0 + mathCos$2(psi) * (y1 - y2) / 2.0;\n    var lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);\n\n    if (lambda > 1) {\n      rx *= mathSqrt$1(lambda);\n      ry *= mathSqrt$1(lambda);\n    }\n\n    var f = (fa === fs ? -1 : 1) * mathSqrt$1((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) / (rx * rx * (yp * yp) + ry * ry * (xp * xp))) || 0;\n    var cxp = f * rx * yp / ry;\n    var cyp = f * -ry * xp / rx;\n    var cx = (x1 + x2) / 2.0 + mathCos$2(psi) * cxp - mathSin$2(psi) * cyp;\n    var cy = (y1 + y2) / 2.0 + mathSin$2(psi) * cxp + mathCos$2(psi) * cyp;\n    var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    var dTheta = vAngle(u, v);\n\n    if (vRatio(u, v) <= -1) {\n      dTheta = PI$1;\n    }\n\n    if (vRatio(u, v) >= 1) {\n      dTheta = 0;\n    }\n\n    if (dTheta < 0) {\n      var n = Math.round(dTheta / PI$1 * 1e6) / 1e6;\n      dTheta = PI$1 * 2 + n % 2 * PI$1;\n    }\n\n    path.addData(cmd, cx, cy, rx, ry, theta, dTheta, psi, fs);\n  }\n\n  var commandReg = /([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig;\n  var numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g;\n\n  function createPathProxyFromString(data) {\n    var path = new PathProxy();\n\n    if (!data) {\n      return path;\n    }\n\n    var cpx = 0;\n    var cpy = 0;\n    var subpathX = cpx;\n    var subpathY = cpy;\n    var prevCmd;\n    var CMD = PathProxy.CMD;\n    var cmdList = data.match(commandReg);\n\n    if (!cmdList) {\n      return path;\n    }\n\n    for (var l = 0; l < cmdList.length; l++) {\n      var cmdText = cmdList[l];\n      var cmdStr = cmdText.charAt(0);\n      var cmd = void 0;\n      var p = cmdText.match(numberReg) || [];\n      var pLen = p.length;\n\n      for (var i = 0; i < pLen; i++) {\n        p[i] = parseFloat(p[i]);\n      }\n\n      var off = 0;\n\n      while (off < pLen) {\n        var ctlPtx = void 0;\n        var ctlPty = void 0;\n        var rx = void 0;\n        var ry = void 0;\n        var psi = void 0;\n        var fa = void 0;\n        var fs = void 0;\n        var x1 = cpx;\n        var y1 = cpy;\n        var len = void 0;\n        var pathData = void 0;\n\n        switch (cmdStr) {\n          case 'l':\n            cpx += p[off++];\n            cpy += p[off++];\n            cmd = CMD.L;\n            path.addData(cmd, cpx, cpy);\n            break;\n\n          case 'L':\n            cpx = p[off++];\n            cpy = p[off++];\n            cmd = CMD.L;\n            path.addData(cmd, cpx, cpy);\n            break;\n\n          case 'm':\n            cpx += p[off++];\n            cpy += p[off++];\n            cmd = CMD.M;\n            path.addData(cmd, cpx, cpy);\n            subpathX = cpx;\n            subpathY = cpy;\n            cmdStr = 'l';\n            break;\n\n          case 'M':\n            cpx = p[off++];\n            cpy = p[off++];\n            cmd = CMD.M;\n            path.addData(cmd, cpx, cpy);\n            subpathX = cpx;\n            subpathY = cpy;\n            cmdStr = 'L';\n            break;\n\n          case 'h':\n            cpx += p[off++];\n            cmd = CMD.L;\n            path.addData(cmd, cpx, cpy);\n            break;\n\n          case 'H':\n            cpx = p[off++];\n            cmd = CMD.L;\n            path.addData(cmd, cpx, cpy);\n            break;\n\n          case 'v':\n            cpy += p[off++];\n            cmd = CMD.L;\n            path.addData(cmd, cpx, cpy);\n            break;\n\n          case 'V':\n            cpy = p[off++];\n            cmd = CMD.L;\n            path.addData(cmd, cpx, cpy);\n            break;\n\n          case 'C':\n            cmd = CMD.C;\n            path.addData(cmd, p[off++], p[off++], p[off++], p[off++], p[off++], p[off++]);\n            cpx = p[off - 2];\n            cpy = p[off - 1];\n            break;\n\n          case 'c':\n            cmd = CMD.C;\n            path.addData(cmd, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy);\n            cpx += p[off - 2];\n            cpy += p[off - 1];\n            break;\n\n          case 'S':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            len = path.len();\n            pathData = path.data;\n\n            if (prevCmd === CMD.C) {\n              ctlPtx += cpx - pathData[len - 4];\n              ctlPty += cpy - pathData[len - 3];\n            }\n\n            cmd = CMD.C;\n            x1 = p[off++];\n            y1 = p[off++];\n            cpx = p[off++];\n            cpy = p[off++];\n            path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n            break;\n\n          case 's':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            len = path.len();\n            pathData = path.data;\n\n            if (prevCmd === CMD.C) {\n              ctlPtx += cpx - pathData[len - 4];\n              ctlPty += cpy - pathData[len - 3];\n            }\n\n            cmd = CMD.C;\n            x1 = cpx + p[off++];\n            y1 = cpy + p[off++];\n            cpx += p[off++];\n            cpy += p[off++];\n            path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n            break;\n\n          case 'Q':\n            x1 = p[off++];\n            y1 = p[off++];\n            cpx = p[off++];\n            cpy = p[off++];\n            cmd = CMD.Q;\n            path.addData(cmd, x1, y1, cpx, cpy);\n            break;\n\n          case 'q':\n            x1 = p[off++] + cpx;\n            y1 = p[off++] + cpy;\n            cpx += p[off++];\n            cpy += p[off++];\n            cmd = CMD.Q;\n            path.addData(cmd, x1, y1, cpx, cpy);\n            break;\n\n          case 'T':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            len = path.len();\n            pathData = path.data;\n\n            if (prevCmd === CMD.Q) {\n              ctlPtx += cpx - pathData[len - 4];\n              ctlPty += cpy - pathData[len - 3];\n            }\n\n            cpx = p[off++];\n            cpy = p[off++];\n            cmd = CMD.Q;\n            path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n            break;\n\n          case 't':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            len = path.len();\n            pathData = path.data;\n\n            if (prevCmd === CMD.Q) {\n              ctlPtx += cpx - pathData[len - 4];\n              ctlPty += cpy - pathData[len - 3];\n            }\n\n            cpx += p[off++];\n            cpy += p[off++];\n            cmd = CMD.Q;\n            path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n            break;\n\n          case 'A':\n            rx = p[off++];\n            ry = p[off++];\n            psi = p[off++];\n            fa = p[off++];\n            fs = p[off++];\n            x1 = cpx, y1 = cpy;\n            cpx = p[off++];\n            cpy = p[off++];\n            cmd = CMD.A;\n            processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n            break;\n\n          case 'a':\n            rx = p[off++];\n            ry = p[off++];\n            psi = p[off++];\n            fa = p[off++];\n            fs = p[off++];\n            x1 = cpx, y1 = cpy;\n            cpx += p[off++];\n            cpy += p[off++];\n            cmd = CMD.A;\n            processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n            break;\n        }\n      }\n\n      if (cmdStr === 'z' || cmdStr === 'Z') {\n        cmd = CMD.Z;\n        path.addData(cmd);\n        cpx = subpathX;\n        cpy = subpathY;\n      }\n\n      prevCmd = cmd;\n    }\n\n    path.toStatic();\n    return path;\n  }\n\n  var SVGPath = function (_super) {\n    __extends(SVGPath, _super);\n\n    function SVGPath() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    SVGPath.prototype.applyTransform = function (m) {};\n\n    return SVGPath;\n  }(Path);\n\n  function isPathProxy(path) {\n    return path.setData != null;\n  }\n\n  function createPathOptions(str, opts) {\n    var pathProxy = createPathProxyFromString(str);\n    var innerOpts = extend({}, opts);\n\n    innerOpts.buildPath = function (path) {\n      if (isPathProxy(path)) {\n        path.setData(pathProxy.data);\n        var ctx = path.getContext();\n\n        if (ctx) {\n          path.rebuildPath(ctx, 1);\n        }\n      } else {\n        var ctx = path;\n        pathProxy.rebuildPath(ctx, 1);\n      }\n    };\n\n    innerOpts.applyTransform = function (m) {\n      transformPath(pathProxy, m);\n      this.dirtyShape();\n    };\n\n    return innerOpts;\n  }\n\n  function createFromString(str, opts) {\n    return new SVGPath(createPathOptions(str, opts));\n  }\n\n  function extendFromString(str, defaultOpts) {\n    var innerOpts = createPathOptions(str, defaultOpts);\n\n    var Sub = function (_super) {\n      __extends(Sub, _super);\n\n      function Sub(opts) {\n        var _this = _super.call(this, opts) || this;\n\n        _this.applyTransform = innerOpts.applyTransform;\n        _this.buildPath = innerOpts.buildPath;\n        return _this;\n      }\n\n      return Sub;\n    }(SVGPath);\n\n    return Sub;\n  }\n\n  function mergePath$1(pathEls, opts) {\n    var pathList = [];\n    var len = pathEls.length;\n\n    for (var i = 0; i < len; i++) {\n      var pathEl = pathEls[i];\n      pathList.push(pathEl.getUpdatedPathProxy(true));\n    }\n\n    var pathBundle = new Path(opts);\n    pathBundle.createPathProxy();\n\n    pathBundle.buildPath = function (path) {\n      if (isPathProxy(path)) {\n        path.appendPath(pathList);\n        var ctx = path.getContext();\n\n        if (ctx) {\n          path.rebuildPath(ctx, 1);\n        }\n      }\n    };\n\n    return pathBundle;\n  }\n\n  var CircleShape = function () {\n    function CircleShape() {\n      this.cx = 0;\n      this.cy = 0;\n      this.r = 0;\n    }\n\n    return CircleShape;\n  }();\n\n  var Circle = function (_super) {\n    __extends(Circle, _super);\n\n    function Circle(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Circle.prototype.getDefaultShape = function () {\n      return new CircleShape();\n    };\n\n    Circle.prototype.buildPath = function (ctx, shape) {\n      ctx.moveTo(shape.cx + shape.r, shape.cy);\n      ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2);\n    };\n\n    return Circle;\n  }(Path);\n\n  Circle.prototype.type = 'circle';\n\n  var EllipseShape = function () {\n    function EllipseShape() {\n      this.cx = 0;\n      this.cy = 0;\n      this.rx = 0;\n      this.ry = 0;\n    }\n\n    return EllipseShape;\n  }();\n\n  var Ellipse = function (_super) {\n    __extends(Ellipse, _super);\n\n    function Ellipse(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Ellipse.prototype.getDefaultShape = function () {\n      return new EllipseShape();\n    };\n\n    Ellipse.prototype.buildPath = function (ctx, shape) {\n      var k = 0.5522848;\n      var x = shape.cx;\n      var y = shape.cy;\n      var a = shape.rx;\n      var b = shape.ry;\n      var ox = a * k;\n      var oy = b * k;\n      ctx.moveTo(x - a, y);\n      ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\n      ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\n      ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);\n      ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);\n      ctx.closePath();\n    };\n\n    return Ellipse;\n  }(Path);\n\n  Ellipse.prototype.type = 'ellipse';\n  var PI$2 = Math.PI;\n  var PI2$5 = PI$2 * 2;\n  var mathSin$3 = Math.sin;\n  var mathCos$3 = Math.cos;\n  var mathACos = Math.acos;\n  var mathATan2 = Math.atan2;\n  var mathAbs$1 = Math.abs;\n  var mathSqrt$3 = Math.sqrt;\n  var mathMax$4 = Math.max;\n  var mathMin$4 = Math.min;\n  var e = 1e-4;\n\n  function intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n    var dx10 = x1 - x0;\n    var dy10 = y1 - y0;\n    var dx32 = x3 - x2;\n    var dy32 = y3 - y2;\n    var t = dy32 * dx10 - dx32 * dy10;\n\n    if (t * t < e) {\n      return;\n    }\n\n    t = (dx32 * (y0 - y2) - dy32 * (x0 - x2)) / t;\n    return [x0 + t * dx10, y0 + t * dy10];\n  }\n\n  function computeCornerTangents(x0, y0, x1, y1, radius, cr, clockwise) {\n    var x01 = x0 - x1;\n    var y01 = y0 - y1;\n    var lo = (clockwise ? cr : -cr) / mathSqrt$3(x01 * x01 + y01 * y01);\n    var ox = lo * y01;\n    var oy = -lo * x01;\n    var x11 = x0 + ox;\n    var y11 = y0 + oy;\n    var x10 = x1 + ox;\n    var y10 = y1 + oy;\n    var x00 = (x11 + x10) / 2;\n    var y00 = (y11 + y10) / 2;\n    var dx = x10 - x11;\n    var dy = y10 - y11;\n    var d2 = dx * dx + dy * dy;\n    var r = radius - cr;\n    var s = x11 * y10 - x10 * y11;\n    var d = (dy < 0 ? -1 : 1) * mathSqrt$3(mathMax$4(0, r * r * d2 - s * s));\n    var cx0 = (s * dy - dx * d) / d2;\n    var cy0 = (-s * dx - dy * d) / d2;\n    var cx1 = (s * dy + dx * d) / d2;\n    var cy1 = (-s * dx + dy * d) / d2;\n    var dx0 = cx0 - x00;\n    var dy0 = cy0 - y00;\n    var dx1 = cx1 - x00;\n    var dy1 = cy1 - y00;\n\n    if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) {\n      cx0 = cx1;\n      cy0 = cy1;\n    }\n\n    return {\n      cx: cx0,\n      cy: cy0,\n      x0: -ox,\n      y0: -oy,\n      x1: cx0 * (radius / r - 1),\n      y1: cy0 * (radius / r - 1)\n    };\n  }\n\n  function normalizeCornerRadius(cr) {\n    var arr;\n\n    if (isArray(cr)) {\n      var len = cr.length;\n\n      if (!len) {\n        return cr;\n      }\n\n      if (len === 1) {\n        arr = [cr[0], cr[0], 0, 0];\n      } else if (len === 2) {\n        arr = [cr[0], cr[0], cr[1], cr[1]];\n      } else if (len === 3) {\n        arr = cr.concat(cr[2]);\n      } else {\n        arr = cr;\n      }\n    } else {\n      arr = [cr, cr, cr, cr];\n    }\n\n    return arr;\n  }\n\n  function buildPath$1(ctx, shape) {\n    var _a;\n\n    var radius = mathMax$4(shape.r, 0);\n    var innerRadius = mathMax$4(shape.r0 || 0, 0);\n    var hasRadius = radius > 0;\n    var hasInnerRadius = innerRadius > 0;\n\n    if (!hasRadius && !hasInnerRadius) {\n      return;\n    }\n\n    if (!hasRadius) {\n      radius = innerRadius;\n      innerRadius = 0;\n    }\n\n    if (innerRadius > radius) {\n      var tmp = radius;\n      radius = innerRadius;\n      innerRadius = tmp;\n    }\n\n    var startAngle = shape.startAngle,\n        endAngle = shape.endAngle;\n\n    if (isNaN(startAngle) || isNaN(endAngle)) {\n      return;\n    }\n\n    var cx = shape.cx,\n        cy = shape.cy;\n    var clockwise = !!shape.clockwise;\n    var arc = mathAbs$1(endAngle - startAngle);\n    var mod = arc > PI2$5 && arc % PI2$5;\n    mod > e && (arc = mod);\n\n    if (!(radius > e)) {\n      ctx.moveTo(cx, cy);\n    } else if (arc > PI2$5 - e) {\n      ctx.moveTo(cx + radius * mathCos$3(startAngle), cy + radius * mathSin$3(startAngle));\n      ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\n\n      if (innerRadius > e) {\n        ctx.moveTo(cx + innerRadius * mathCos$3(endAngle), cy + innerRadius * mathSin$3(endAngle));\n        ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\n      }\n    } else {\n      var icrStart = void 0;\n      var icrEnd = void 0;\n      var ocrStart = void 0;\n      var ocrEnd = void 0;\n      var ocrs = void 0;\n      var ocre = void 0;\n      var icrs = void 0;\n      var icre = void 0;\n      var ocrMax = void 0;\n      var icrMax = void 0;\n      var limitedOcrMax = void 0;\n      var limitedIcrMax = void 0;\n      var xre = void 0;\n      var yre = void 0;\n      var xirs = void 0;\n      var yirs = void 0;\n      var xrs = radius * mathCos$3(startAngle);\n      var yrs = radius * mathSin$3(startAngle);\n      var xire = innerRadius * mathCos$3(endAngle);\n      var yire = innerRadius * mathSin$3(endAngle);\n      var hasArc = arc > e;\n\n      if (hasArc) {\n        var cornerRadius = shape.cornerRadius;\n\n        if (cornerRadius) {\n          _a = normalizeCornerRadius(cornerRadius), icrStart = _a[0], icrEnd = _a[1], ocrStart = _a[2], ocrEnd = _a[3];\n        }\n\n        var halfRd = mathAbs$1(radius - innerRadius) / 2;\n        ocrs = mathMin$4(halfRd, ocrStart);\n        ocre = mathMin$4(halfRd, ocrEnd);\n        icrs = mathMin$4(halfRd, icrStart);\n        icre = mathMin$4(halfRd, icrEnd);\n        limitedOcrMax = ocrMax = mathMax$4(ocrs, ocre);\n        limitedIcrMax = icrMax = mathMax$4(icrs, icre);\n\n        if (ocrMax > e || icrMax > e) {\n          xre = radius * mathCos$3(endAngle);\n          yre = radius * mathSin$3(endAngle);\n          xirs = innerRadius * mathCos$3(startAngle);\n          yirs = innerRadius * mathSin$3(startAngle);\n\n          if (arc < PI$2) {\n            var it_1 = intersect(xrs, yrs, xirs, yirs, xre, yre, xire, yire);\n\n            if (it_1) {\n              var x0 = xrs - it_1[0];\n              var y0 = yrs - it_1[1];\n              var x1 = xre - it_1[0];\n              var y1 = yre - it_1[1];\n              var a = 1 / mathSin$3(mathACos((x0 * x1 + y0 * y1) / (mathSqrt$3(x0 * x0 + y0 * y0) * mathSqrt$3(x1 * x1 + y1 * y1))) / 2);\n              var b = mathSqrt$3(it_1[0] * it_1[0] + it_1[1] * it_1[1]);\n              limitedOcrMax = mathMin$4(ocrMax, (radius - b) / (a + 1));\n              limitedIcrMax = mathMin$4(icrMax, (innerRadius - b) / (a - 1));\n            }\n          }\n        }\n      }\n\n      if (!hasArc) {\n        ctx.moveTo(cx + xrs, cy + yrs);\n      } else if (limitedOcrMax > e) {\n        var crStart = mathMin$4(ocrStart, limitedOcrMax);\n        var crEnd = mathMin$4(ocrEnd, limitedOcrMax);\n        var ct0 = computeCornerTangents(xirs, yirs, xrs, yrs, radius, crStart, clockwise);\n        var ct1 = computeCornerTangents(xre, yre, xire, yire, radius, crEnd, clockwise);\n        ctx.moveTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\n\n        if (limitedOcrMax < ocrMax && crStart === crEnd) {\n          ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedOcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\n        } else {\n          crStart > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crStart, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\n          ctx.arc(cx, cy, radius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), !clockwise);\n          crEnd > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crEnd, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\n        }\n      } else {\n        ctx.moveTo(cx + xrs, cy + yrs);\n        ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\n      }\n\n      if (!(innerRadius > e) || !hasArc) {\n        ctx.lineTo(cx + xire, cy + yire);\n      } else if (limitedIcrMax > e) {\n        var crStart = mathMin$4(icrStart, limitedIcrMax);\n        var crEnd = mathMin$4(icrEnd, limitedIcrMax);\n        var ct0 = computeCornerTangents(xire, yire, xre, yre, innerRadius, -crEnd, clockwise);\n        var ct1 = computeCornerTangents(xrs, yrs, xirs, yirs, innerRadius, -crStart, clockwise);\n        ctx.lineTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\n\n        if (limitedIcrMax < icrMax && crStart === crEnd) {\n          ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedIcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\n        } else {\n          crEnd > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crEnd, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\n          ctx.arc(cx, cy, innerRadius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), clockwise);\n          crStart > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crStart, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\n        }\n      } else {\n        ctx.lineTo(cx + xire, cy + yire);\n        ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\n      }\n    }\n\n    ctx.closePath();\n  }\n\n  var SectorShape = function () {\n    function SectorShape() {\n      this.cx = 0;\n      this.cy = 0;\n      this.r0 = 0;\n      this.r = 0;\n      this.startAngle = 0;\n      this.endAngle = Math.PI * 2;\n      this.clockwise = true;\n      this.cornerRadius = 0;\n    }\n\n    return SectorShape;\n  }();\n\n  var Sector = function (_super) {\n    __extends(Sector, _super);\n\n    function Sector(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Sector.prototype.getDefaultShape = function () {\n      return new SectorShape();\n    };\n\n    Sector.prototype.buildPath = function (ctx, shape) {\n      buildPath$1(ctx, shape);\n    };\n\n    Sector.prototype.isZeroArea = function () {\n      return this.shape.startAngle === this.shape.endAngle || this.shape.r === this.shape.r0;\n    };\n\n    return Sector;\n  }(Path);\n\n  Sector.prototype.type = 'sector';\n\n  var RingShape = function () {\n    function RingShape() {\n      this.cx = 0;\n      this.cy = 0;\n      this.r = 0;\n      this.r0 = 0;\n    }\n\n    return RingShape;\n  }();\n\n  var Ring = function (_super) {\n    __extends(Ring, _super);\n\n    function Ring(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Ring.prototype.getDefaultShape = function () {\n      return new RingShape();\n    };\n\n    Ring.prototype.buildPath = function (ctx, shape) {\n      var x = shape.cx;\n      var y = shape.cy;\n      var PI2 = Math.PI * 2;\n      ctx.moveTo(x + shape.r, y);\n      ctx.arc(x, y, shape.r, 0, PI2, false);\n      ctx.moveTo(x + shape.r0, y);\n      ctx.arc(x, y, shape.r0, 0, PI2, true);\n    };\n\n    return Ring;\n  }(Path);\n\n  Ring.prototype.type = 'ring';\n\n  function smoothBezier(points, smooth, isLoop, constraint) {\n    var cps = [];\n    var v = [];\n    var v1 = [];\n    var v2 = [];\n    var prevPoint;\n    var nextPoint;\n    var min$$1;\n    var max$$1;\n\n    if (constraint) {\n      min$$1 = [Infinity, Infinity];\n      max$$1 = [-Infinity, -Infinity];\n\n      for (var i = 0, len$$1 = points.length; i < len$$1; i++) {\n        min(min$$1, min$$1, points[i]);\n        max(max$$1, max$$1, points[i]);\n      }\n\n      min(min$$1, min$$1, constraint[0]);\n      max(max$$1, max$$1, constraint[1]);\n    }\n\n    for (var i = 0, len$$1 = points.length; i < len$$1; i++) {\n      var point = points[i];\n\n      if (isLoop) {\n        prevPoint = points[i ? i - 1 : len$$1 - 1];\n        nextPoint = points[(i + 1) % len$$1];\n      } else {\n        if (i === 0 || i === len$$1 - 1) {\n          cps.push(clone$1(points[i]));\n          continue;\n        } else {\n          prevPoint = points[i - 1];\n          nextPoint = points[i + 1];\n        }\n      }\n\n      sub(v, nextPoint, prevPoint);\n      scale(v, v, smooth);\n      var d0 = distance(point, prevPoint);\n      var d1 = distance(point, nextPoint);\n      var sum = d0 + d1;\n\n      if (sum !== 0) {\n        d0 /= sum;\n        d1 /= sum;\n      }\n\n      scale(v1, v, -d0);\n      scale(v2, v, d1);\n      var cp0 = add([], point, v1);\n      var cp1 = add([], point, v2);\n\n      if (constraint) {\n        max(cp0, cp0, min$$1);\n        min(cp0, cp0, max$$1);\n        max(cp1, cp1, min$$1);\n        min(cp1, cp1, max$$1);\n      }\n\n      cps.push(cp0);\n      cps.push(cp1);\n    }\n\n    if (isLoop) {\n      cps.push(cps.shift());\n    }\n\n    return cps;\n  }\n\n  function buildPath$2(ctx, shape, closePath) {\n    var smooth = shape.smooth;\n    var points = shape.points;\n\n    if (points && points.length >= 2) {\n      if (smooth) {\n        var controlPoints = smoothBezier(points, smooth, closePath, shape.smoothConstraint);\n        ctx.moveTo(points[0][0], points[0][1]);\n        var len = points.length;\n\n        for (var i = 0; i < (closePath ? len : len - 1); i++) {\n          var cp1 = controlPoints[i * 2];\n          var cp2 = controlPoints[i * 2 + 1];\n          var p = points[(i + 1) % len];\n          ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);\n        }\n      } else {\n        ctx.moveTo(points[0][0], points[0][1]);\n\n        for (var i = 1, l = points.length; i < l; i++) {\n          ctx.lineTo(points[i][0], points[i][1]);\n        }\n      }\n\n      closePath && ctx.closePath();\n    }\n  }\n\n  var PolygonShape = function () {\n    function PolygonShape() {\n      this.points = null;\n      this.smooth = 0;\n      this.smoothConstraint = null;\n    }\n\n    return PolygonShape;\n  }();\n\n  var Polygon = function (_super) {\n    __extends(Polygon, _super);\n\n    function Polygon(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Polygon.prototype.getDefaultShape = function () {\n      return new PolygonShape();\n    };\n\n    Polygon.prototype.buildPath = function (ctx, shape) {\n      buildPath$2(ctx, shape, true);\n    };\n\n    return Polygon;\n  }(Path);\n\n  Polygon.prototype.type = 'polygon';\n\n  var PolylineShape = function () {\n    function PolylineShape() {\n      this.points = null;\n      this.percent = 1;\n      this.smooth = 0;\n      this.smoothConstraint = null;\n    }\n\n    return PolylineShape;\n  }();\n\n  var Polyline = function (_super) {\n    __extends(Polyline, _super);\n\n    function Polyline(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Polyline.prototype.getDefaultStyle = function () {\n      return {\n        stroke: '#000',\n        fill: null\n      };\n    };\n\n    Polyline.prototype.getDefaultShape = function () {\n      return new PolylineShape();\n    };\n\n    Polyline.prototype.buildPath = function (ctx, shape) {\n      buildPath$2(ctx, shape, false);\n    };\n\n    return Polyline;\n  }(Path);\n\n  Polyline.prototype.type = 'polyline';\n  var subPixelOptimizeOutputShape$1 = {};\n\n  var LineShape = function () {\n    function LineShape() {\n      this.x1 = 0;\n      this.y1 = 0;\n      this.x2 = 0;\n      this.y2 = 0;\n      this.percent = 1;\n    }\n\n    return LineShape;\n  }();\n\n  var Line = function (_super) {\n    __extends(Line, _super);\n\n    function Line(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Line.prototype.getDefaultStyle = function () {\n      return {\n        stroke: '#000',\n        fill: null\n      };\n    };\n\n    Line.prototype.getDefaultShape = function () {\n      return new LineShape();\n    };\n\n    Line.prototype.buildPath = function (ctx, shape) {\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n\n      if (this.subPixelOptimize) {\n        var optimizedShape = subPixelOptimizeLine(subPixelOptimizeOutputShape$1, shape, this.style);\n        x1 = optimizedShape.x1;\n        y1 = optimizedShape.y1;\n        x2 = optimizedShape.x2;\n        y2 = optimizedShape.y2;\n      } else {\n        x1 = shape.x1;\n        y1 = shape.y1;\n        x2 = shape.x2;\n        y2 = shape.y2;\n      }\n\n      var percent = shape.percent;\n\n      if (percent === 0) {\n        return;\n      }\n\n      ctx.moveTo(x1, y1);\n\n      if (percent < 1) {\n        x2 = x1 * (1 - percent) + x2 * percent;\n        y2 = y1 * (1 - percent) + y2 * percent;\n      }\n\n      ctx.lineTo(x2, y2);\n    };\n\n    Line.prototype.pointAt = function (p) {\n      var shape = this.shape;\n      return [shape.x1 * (1 - p) + shape.x2 * p, shape.y1 * (1 - p) + shape.y2 * p];\n    };\n\n    return Line;\n  }(Path);\n\n  Line.prototype.type = 'line';\n  var out = [];\n\n  var BezierCurveShape = function () {\n    function BezierCurveShape() {\n      this.x1 = 0;\n      this.y1 = 0;\n      this.x2 = 0;\n      this.y2 = 0;\n      this.cpx1 = 0;\n      this.cpy1 = 0;\n      this.percent = 1;\n    }\n\n    return BezierCurveShape;\n  }();\n\n  function someVectorAt(shape, t, isTangent) {\n    var cpx2 = shape.cpx2;\n    var cpy2 = shape.cpy2;\n\n    if (cpx2 != null || cpy2 != null) {\n      return [(isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t), (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)];\n    } else {\n      return [(isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t), (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)];\n    }\n  }\n\n  var BezierCurve = function (_super) {\n    __extends(BezierCurve, _super);\n\n    function BezierCurve(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    BezierCurve.prototype.getDefaultStyle = function () {\n      return {\n        stroke: '#000',\n        fill: null\n      };\n    };\n\n    BezierCurve.prototype.getDefaultShape = function () {\n      return new BezierCurveShape();\n    };\n\n    BezierCurve.prototype.buildPath = function (ctx, shape) {\n      var x1 = shape.x1;\n      var y1 = shape.y1;\n      var x2 = shape.x2;\n      var y2 = shape.y2;\n      var cpx1 = shape.cpx1;\n      var cpy1 = shape.cpy1;\n      var cpx2 = shape.cpx2;\n      var cpy2 = shape.cpy2;\n      var percent = shape.percent;\n\n      if (percent === 0) {\n        return;\n      }\n\n      ctx.moveTo(x1, y1);\n\n      if (cpx2 == null || cpy2 == null) {\n        if (percent < 1) {\n          quadraticSubdivide(x1, cpx1, x2, percent, out);\n          cpx1 = out[1];\n          x2 = out[2];\n          quadraticSubdivide(y1, cpy1, y2, percent, out);\n          cpy1 = out[1];\n          y2 = out[2];\n        }\n\n        ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\n      } else {\n        if (percent < 1) {\n          cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\n          cpx1 = out[1];\n          cpx2 = out[2];\n          x2 = out[3];\n          cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\n          cpy1 = out[1];\n          cpy2 = out[2];\n          y2 = out[3];\n        }\n\n        ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\n      }\n    };\n\n    BezierCurve.prototype.pointAt = function (t) {\n      return someVectorAt(this.shape, t, false);\n    };\n\n    BezierCurve.prototype.tangentAt = function (t) {\n      var p = someVectorAt(this.shape, t, true);\n      return normalize(p, p);\n    };\n\n    return BezierCurve;\n  }(Path);\n\n  BezierCurve.prototype.type = 'bezier-curve';\n\n  var ArcShape = function () {\n    function ArcShape() {\n      this.cx = 0;\n      this.cy = 0;\n      this.r = 0;\n      this.startAngle = 0;\n      this.endAngle = Math.PI * 2;\n      this.clockwise = true;\n    }\n\n    return ArcShape;\n  }();\n\n  var Arc = function (_super) {\n    __extends(Arc, _super);\n\n    function Arc(opts) {\n      return _super.call(this, opts) || this;\n    }\n\n    Arc.prototype.getDefaultStyle = function () {\n      return {\n        stroke: '#000',\n        fill: null\n      };\n    };\n\n    Arc.prototype.getDefaultShape = function () {\n      return new ArcShape();\n    };\n\n    Arc.prototype.buildPath = function (ctx, shape) {\n      var x = shape.cx;\n      var y = shape.cy;\n      var r = Math.max(shape.r, 0);\n      var startAngle = shape.startAngle;\n      var endAngle = shape.endAngle;\n      var clockwise = shape.clockwise;\n      var unitX = Math.cos(startAngle);\n      var unitY = Math.sin(startAngle);\n      ctx.moveTo(unitX * r + x, unitY * r + y);\n      ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n    };\n\n    return Arc;\n  }(Path);\n\n  Arc.prototype.type = 'arc';\n\n  var CompoundPath = function (_super) {\n    __extends(CompoundPath, _super);\n\n    function CompoundPath() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = 'compound';\n      return _this;\n    }\n\n    CompoundPath.prototype._updatePathDirty = function () {\n      var paths = this.shape.paths;\n      var dirtyPath = this.shapeChanged();\n\n      for (var i = 0; i < paths.length; i++) {\n        dirtyPath = dirtyPath || paths[i].shapeChanged();\n      }\n\n      if (dirtyPath) {\n        this.dirtyShape();\n      }\n    };\n\n    CompoundPath.prototype.beforeBrush = function () {\n      this._updatePathDirty();\n\n      var paths = this.shape.paths || [];\n      var scale = this.getGlobalScale();\n\n      for (var i = 0; i < paths.length; i++) {\n        if (!paths[i].path) {\n          paths[i].createPathProxy();\n        }\n\n        paths[i].path.setScale(scale[0], scale[1], paths[i].segmentIgnoreThreshold);\n      }\n    };\n\n    CompoundPath.prototype.buildPath = function (ctx, shape) {\n      var paths = shape.paths || [];\n\n      for (var i = 0; i < paths.length; i++) {\n        paths[i].buildPath(ctx, paths[i].shape, true);\n      }\n    };\n\n    CompoundPath.prototype.afterBrush = function () {\n      var paths = this.shape.paths || [];\n\n      for (var i = 0; i < paths.length; i++) {\n        paths[i].pathUpdated();\n      }\n    };\n\n    CompoundPath.prototype.getBoundingRect = function () {\n      this._updatePathDirty.call(this);\n\n      return Path.prototype.getBoundingRect.call(this);\n    };\n\n    return CompoundPath;\n  }(Path);\n\n  var Gradient = function () {\n    function Gradient(colorStops) {\n      this.colorStops = colorStops || [];\n    }\n\n    Gradient.prototype.addColorStop = function (offset, color) {\n      this.colorStops.push({\n        offset: offset,\n        color: color\n      });\n    };\n\n    return Gradient;\n  }();\n\n  var LinearGradient = function (_super) {\n    __extends(LinearGradient, _super);\n\n    function LinearGradient(x, y, x2, y2, colorStops, globalCoord) {\n      var _this = _super.call(this, colorStops) || this;\n\n      _this.x = x == null ? 0 : x;\n      _this.y = y == null ? 0 : y;\n      _this.x2 = x2 == null ? 1 : x2;\n      _this.y2 = y2 == null ? 0 : y2;\n      _this.type = 'linear';\n      _this.global = globalCoord || false;\n      return _this;\n    }\n\n    return LinearGradient;\n  }(Gradient);\n\n  var RadialGradient = function (_super) {\n    __extends(RadialGradient, _super);\n\n    function RadialGradient(x, y, r, colorStops, globalCoord) {\n      var _this = _super.call(this, colorStops) || this;\n\n      _this.x = x == null ? 0.5 : x;\n      _this.y = y == null ? 0.5 : y;\n      _this.r = r == null ? 0.5 : r;\n      _this.type = 'radial';\n      _this.global = globalCoord || false;\n      return _this;\n    }\n\n    return RadialGradient;\n  }(Gradient);\n\n  var extent = [0, 0];\n  var extent2 = [0, 0];\n  var minTv$1 = new Point();\n  var maxTv$1 = new Point();\n\n  var OrientedBoundingRect = function () {\n    function OrientedBoundingRect(rect, transform) {\n      this._corners = [];\n      this._axes = [];\n      this._origin = [0, 0];\n\n      for (var i = 0; i < 4; i++) {\n        this._corners[i] = new Point();\n      }\n\n      for (var i = 0; i < 2; i++) {\n        this._axes[i] = new Point();\n      }\n\n      if (rect) {\n        this.fromBoundingRect(rect, transform);\n      }\n    }\n\n    OrientedBoundingRect.prototype.fromBoundingRect = function (rect, transform) {\n      var corners = this._corners;\n      var axes = this._axes;\n      var x = rect.x;\n      var y = rect.y;\n      var x2 = x + rect.width;\n      var y2 = y + rect.height;\n      corners[0].set(x, y);\n      corners[1].set(x2, y);\n      corners[2].set(x2, y2);\n      corners[3].set(x, y2);\n\n      if (transform) {\n        for (var i = 0; i < 4; i++) {\n          corners[i].transform(transform);\n        }\n      }\n\n      Point.sub(axes[0], corners[1], corners[0]);\n      Point.sub(axes[1], corners[3], corners[0]);\n      axes[0].normalize();\n      axes[1].normalize();\n\n      for (var i = 0; i < 2; i++) {\n        this._origin[i] = axes[i].dot(corners[0]);\n      }\n    };\n\n    OrientedBoundingRect.prototype.intersect = function (other, mtv) {\n      var overlapped = true;\n      var noMtv = !mtv;\n      minTv$1.set(Infinity, Infinity);\n      maxTv$1.set(0, 0);\n\n      if (!this._intersectCheckOneSide(this, other, minTv$1, maxTv$1, noMtv, 1)) {\n        overlapped = false;\n\n        if (noMtv) {\n          return overlapped;\n        }\n      }\n\n      if (!this._intersectCheckOneSide(other, this, minTv$1, maxTv$1, noMtv, -1)) {\n        overlapped = false;\n\n        if (noMtv) {\n          return overlapped;\n        }\n      }\n\n      if (!noMtv) {\n        Point.copy(mtv, overlapped ? minTv$1 : maxTv$1);\n      }\n\n      return overlapped;\n    };\n\n    OrientedBoundingRect.prototype._intersectCheckOneSide = function (self, other, minTv, maxTv, noMtv, inverse) {\n      var overlapped = true;\n\n      for (var i = 0; i < 2; i++) {\n        var axis = this._axes[i];\n\n        this._getProjMinMaxOnAxis(i, self._corners, extent);\n\n        this._getProjMinMaxOnAxis(i, other._corners, extent2);\n\n        if (extent[1] < extent2[0] || extent[0] > extent2[1]) {\n          overlapped = false;\n\n          if (noMtv) {\n            return overlapped;\n          }\n\n          var dist0 = Math.abs(extent2[0] - extent[1]);\n          var dist1 = Math.abs(extent[0] - extent2[1]);\n\n          if (Math.min(dist0, dist1) > maxTv.len()) {\n            if (dist0 < dist1) {\n              Point.scale(maxTv, axis, -dist0 * inverse);\n            } else {\n              Point.scale(maxTv, axis, dist1 * inverse);\n            }\n          }\n        } else if (minTv) {\n          var dist0 = Math.abs(extent2[0] - extent[1]);\n          var dist1 = Math.abs(extent[0] - extent2[1]);\n\n          if (Math.min(dist0, dist1) < minTv.len()) {\n            if (dist0 < dist1) {\n              Point.scale(minTv, axis, dist0 * inverse);\n            } else {\n              Point.scale(minTv, axis, -dist1 * inverse);\n            }\n          }\n        }\n      }\n\n      return overlapped;\n    };\n\n    OrientedBoundingRect.prototype._getProjMinMaxOnAxis = function (dim, corners, out) {\n      var axis = this._axes[dim];\n      var origin = this._origin;\n      var proj = corners[0].dot(axis) + origin[dim];\n      var min = proj;\n      var max = proj;\n\n      for (var i = 1; i < corners.length; i++) {\n        var proj_1 = corners[i].dot(axis) + origin[dim];\n        min = Math.min(proj_1, min);\n        max = Math.max(proj_1, max);\n      }\n\n      out[0] = min;\n      out[1] = max;\n    };\n\n    return OrientedBoundingRect;\n  }();\n\n  var m = [];\n\n  var IncrementalDisplayable = function (_super) {\n    __extends(IncrementalDisplayable, _super);\n\n    function IncrementalDisplayable() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.notClear = true;\n      _this.incremental = true;\n      _this._displayables = [];\n      _this._temporaryDisplayables = [];\n      _this._cursor = 0;\n      return _this;\n    }\n\n    IncrementalDisplayable.prototype.traverse = function (cb, context) {\n      cb.call(context, this);\n    };\n\n    IncrementalDisplayable.prototype.useStyle = function () {\n      this.style = {};\n    };\n\n    IncrementalDisplayable.prototype.getCursor = function () {\n      return this._cursor;\n    };\n\n    IncrementalDisplayable.prototype.innerAfterBrush = function () {\n      this._cursor = this._displayables.length;\n    };\n\n    IncrementalDisplayable.prototype.clearDisplaybles = function () {\n      this._displayables = [];\n      this._temporaryDisplayables = [];\n      this._cursor = 0;\n      this.markRedraw();\n      this.notClear = false;\n    };\n\n    IncrementalDisplayable.prototype.clearTemporalDisplayables = function () {\n      this._temporaryDisplayables = [];\n    };\n\n    IncrementalDisplayable.prototype.addDisplayable = function (displayable, notPersistent) {\n      if (notPersistent) {\n        this._temporaryDisplayables.push(displayable);\n      } else {\n        this._displayables.push(displayable);\n      }\n\n      this.markRedraw();\n    };\n\n    IncrementalDisplayable.prototype.addDisplayables = function (displayables, notPersistent) {\n      notPersistent = notPersistent || false;\n\n      for (var i = 0; i < displayables.length; i++) {\n        this.addDisplayable(displayables[i], notPersistent);\n      }\n    };\n\n    IncrementalDisplayable.prototype.getDisplayables = function () {\n      return this._displayables;\n    };\n\n    IncrementalDisplayable.prototype.getTemporalDisplayables = function () {\n      return this._temporaryDisplayables;\n    };\n\n    IncrementalDisplayable.prototype.eachPendingDisplayable = function (cb) {\n      for (var i = this._cursor; i < this._displayables.length; i++) {\n        cb && cb(this._displayables[i]);\n      }\n\n      for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n        cb && cb(this._temporaryDisplayables[i]);\n      }\n    };\n\n    IncrementalDisplayable.prototype.update = function () {\n      this.updateTransform();\n\n      for (var i = this._cursor; i < this._displayables.length; i++) {\n        var displayable = this._displayables[i];\n        displayable.parent = this;\n        displayable.update();\n        displayable.parent = null;\n      }\n\n      for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n        var displayable = this._temporaryDisplayables[i];\n        displayable.parent = this;\n        displayable.update();\n        displayable.parent = null;\n      }\n    };\n\n    IncrementalDisplayable.prototype.getBoundingRect = function () {\n      if (!this._rect) {\n        var rect = new BoundingRect(Infinity, Infinity, -Infinity, -Infinity);\n\n        for (var i = 0; i < this._displayables.length; i++) {\n          var displayable = this._displayables[i];\n          var childRect = displayable.getBoundingRect().clone();\n\n          if (displayable.needLocalTransform()) {\n            childRect.applyTransform(displayable.getLocalTransform(m));\n          }\n\n          rect.union(childRect);\n        }\n\n        this._rect = rect;\n      }\n\n      return this._rect;\n    };\n\n    IncrementalDisplayable.prototype.contain = function (x, y) {\n      var localPos = this.transformCoordToLocal(x, y);\n      var rect = this.getBoundingRect();\n\n      if (rect.contain(localPos[0], localPos[1])) {\n        for (var i = 0; i < this._displayables.length; i++) {\n          var displayable = this._displayables[i];\n\n          if (displayable.contain(x, y)) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    };\n\n    return IncrementalDisplayable;\n  }(Displayable);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var transitionStore = makeInner();\n  /**\n   * Return null if animation is disabled.\n   */\n\n  function getAnimationConfig(animationType, animatableModel, dataIndex, // Extra opts can override the option in animatable model.\n  extraOpts, // TODO It's only for pictorial bar now.\n  extraDelayParams) {\n    var animationPayload; // Check if there is global animation configuration from dataZoom/resize can override the config in option.\n    // If animation is enabled. Will use this animation config in payload.\n    // If animation is disabled. Just ignore it.\n\n    if (animatableModel && animatableModel.ecModel) {\n      var updatePayload = animatableModel.ecModel.getUpdatePayload();\n      animationPayload = updatePayload && updatePayload.animation;\n    }\n\n    var animationEnabled = animatableModel && animatableModel.isAnimationEnabled();\n    var isUpdate = animationType === 'update';\n\n    if (animationEnabled) {\n      var duration = void 0;\n      var easing = void 0;\n      var delay = void 0;\n\n      if (extraOpts) {\n        duration = retrieve2(extraOpts.duration, 200);\n        easing = retrieve2(extraOpts.easing, 'cubicOut');\n        delay = 0;\n      } else {\n        duration = animatableModel.getShallow(isUpdate ? 'animationDurationUpdate' : 'animationDuration');\n        easing = animatableModel.getShallow(isUpdate ? 'animationEasingUpdate' : 'animationEasing');\n        delay = animatableModel.getShallow(isUpdate ? 'animationDelayUpdate' : 'animationDelay');\n      } // animation from payload has highest priority.\n\n\n      if (animationPayload) {\n        animationPayload.duration != null && (duration = animationPayload.duration);\n        animationPayload.easing != null && (easing = animationPayload.easing);\n        animationPayload.delay != null && (delay = animationPayload.delay);\n      }\n\n      if (isFunction(delay)) {\n        delay = delay(dataIndex, extraDelayParams);\n      }\n\n      if (isFunction(duration)) {\n        duration = duration(dataIndex);\n      }\n\n      var config = {\n        duration: duration || 0,\n        delay: delay,\n        easing: easing\n      };\n      return config;\n    } else {\n      return null;\n    }\n  }\n\n  function animateOrSetProps(animationType, el, props, animatableModel, dataIndex, cb, during) {\n    var isFrom = false;\n    var removeOpt;\n\n    if (isFunction(dataIndex)) {\n      during = cb;\n      cb = dataIndex;\n      dataIndex = null;\n    } else if (isObject(dataIndex)) {\n      cb = dataIndex.cb;\n      during = dataIndex.during;\n      isFrom = dataIndex.isFrom;\n      removeOpt = dataIndex.removeOpt;\n      dataIndex = dataIndex.dataIndex;\n    }\n\n    var isRemove = animationType === 'leave';\n\n    if (!isRemove) {\n      // Must stop the remove animation.\n      el.stopAnimation('leave');\n    }\n\n    var animationConfig = getAnimationConfig(animationType, animatableModel, dataIndex, isRemove ? removeOpt || {} : null, animatableModel && animatableModel.getAnimationDelayParams ? animatableModel.getAnimationDelayParams(el, dataIndex) : null);\n\n    if (animationConfig && animationConfig.duration > 0) {\n      var duration = animationConfig.duration;\n      var animationDelay = animationConfig.delay;\n      var animationEasing = animationConfig.easing;\n      var animateConfig = {\n        duration: duration,\n        delay: animationDelay || 0,\n        easing: animationEasing,\n        done: cb,\n        force: !!cb || !!during,\n        // Set to final state in update/init animation.\n        // So the post processing based on the path shape can be done correctly.\n        setToFinal: !isRemove,\n        scope: animationType,\n        during: during\n      };\n      isFrom ? el.animateFrom(props, animateConfig) : el.animateTo(props, animateConfig);\n    } else {\n      el.stopAnimation(); // If `isFrom`, the props is the \"from\" props.\n\n      !isFrom && el.attr(props); // Call during at least once.\n\n      during && during(1);\n      cb && cb();\n    }\n  }\n  /**\n   * Update graphic element properties with or without animation according to the\n   * configuration in series.\n   *\n   * Caution: this method will stop previous animation.\n   * So do not use this method to one element twice before\n   * animation starts, unless you know what you are doing.\n   * @example\n   *     graphic.updateProps(el, {\n   *         position: [100, 100]\n   *     }, seriesModel, dataIndex, function () { console.log('Animation done!'); });\n   *     // Or\n   *     graphic.updateProps(el, {\n   *         position: [100, 100]\n   *     }, seriesModel, function () { console.log('Animation done!'); });\n   */\n\n\n  function updateProps(el, props, // TODO: TYPE AnimatableModel\n  animatableModel, dataIndex, cb, during) {\n    animateOrSetProps('update', el, props, animatableModel, dataIndex, cb, during);\n  }\n  /**\n   * Init graphic element properties with or without animation according to the\n   * configuration in series.\n   *\n   * Caution: this method will stop previous animation.\n   * So do not use this method to one element twice before\n   * animation starts, unless you know what you are doing.\n   */\n\n\n  function initProps(el, props, animatableModel, dataIndex, cb, during) {\n    animateOrSetProps('enter', el, props, animatableModel, dataIndex, cb, during);\n  }\n  /**\n   * If element is removed.\n   * It can determine if element is having remove animation.\n   */\n\n\n  function isElementRemoved(el) {\n    if (!el.__zr) {\n      return true;\n    }\n\n    for (var i = 0; i < el.animators.length; i++) {\n      var animator = el.animators[i];\n\n      if (animator.scope === 'leave') {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n   * Remove graphic element\n   */\n\n\n  function removeElement(el, props, animatableModel, dataIndex, cb, during) {\n    // Don't do remove animation twice.\n    if (isElementRemoved(el)) {\n      return;\n    }\n\n    animateOrSetProps('leave', el, props, animatableModel, dataIndex, cb, during);\n  }\n\n  function fadeOutDisplayable(el, animatableModel, dataIndex, done) {\n    el.removeTextContent();\n    el.removeTextGuideLine();\n    removeElement(el, {\n      style: {\n        opacity: 0\n      }\n    }, animatableModel, dataIndex, done);\n  }\n\n  function removeElementWithFadeOut(el, animatableModel, dataIndex) {\n    function doRemove() {\n      el.parent && el.parent.remove(el);\n    } // Hide label and labelLine first\n    // TODO Also use fade out animation?\n\n\n    if (!el.isGroup) {\n      fadeOutDisplayable(el, animatableModel, dataIndex, doRemove);\n    } else {\n      el.traverse(function (disp) {\n        if (!disp.isGroup) {\n          // Can invoke doRemove multiple times.\n          fadeOutDisplayable(disp, animatableModel, dataIndex, doRemove);\n        }\n      });\n    }\n  }\n  /**\n   * Save old style for style transition in universalTransition module.\n   * It's used when element will be reused in each render.\n   * For chart like map, heatmap, which will always create new element.\n   * We don't need to save this because universalTransition can get old style from the old element\n   */\n\n\n  function saveOldStyle(el) {\n    transitionStore(el).oldStyle = el.style;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var mathMax$3 = Math.max;\n  var mathMin$3 = Math.min;\n  var _customShapeMap = {};\n  /**\n   * Extend shape with parameters\n   */\n\n  function extendShape(opts) {\n    return Path.extend(opts);\n  }\n\n  var extendPathFromString = extendFromString;\n  /**\n   * Extend path\n   */\n\n  function extendPath(pathData, opts) {\n    return extendPathFromString(pathData, opts);\n  }\n  /**\n   * Register a user defined shape.\n   * The shape class can be fetched by `getShapeClass`\n   * This method will overwrite the registered shapes, including\n   * the registered built-in shapes, if using the same `name`.\n   * The shape can be used in `custom series` and\n   * `graphic component` by declaring `{type: name}`.\n   *\n   * @param name\n   * @param ShapeClass Can be generated by `extendShape`.\n   */\n\n\n  function registerShape(name, ShapeClass) {\n    _customShapeMap[name] = ShapeClass;\n  }\n  /**\n   * Find shape class registered by `registerShape`. Usually used in\n   * fetching user defined shape.\n   *\n   * [Caution]:\n   * (1) This method **MUST NOT be used inside echarts !!!**, unless it is prepared\n   * to use user registered shapes.\n   * Because the built-in shape (see `getBuiltInShape`) will be registered by\n   * `registerShape` by default. That enables users to get both built-in\n   * shapes as well as the shapes belonging to themsleves. But users can overwrite\n   * the built-in shapes by using names like 'circle', 'rect' via calling\n   * `registerShape`. So the echarts inner featrues should not fetch shapes from here\n   * in case that it is overwritten by users, except that some features, like\n   * `custom series`, `graphic component`, do it deliberately.\n   *\n   * (2) In the features like `custom series`, `graphic component`, the user input\n   * `{tpye: 'xxx'}` does not only specify shapes but also specify other graphic\n   * elements like `'group'`, `'text'`, `'image'` or event `'path'`. Those names\n   * are reserved names, that is, if some user register a shape named `'image'`,\n   * the shape will not be used. If we intending to add some more reserved names\n   * in feature, that might bring break changes (disable some existing user shape\n   * names). But that case probably rearly happen. So we dont make more mechanism\n   * to resolve this issue here.\n   *\n   * @param name\n   * @return The shape class. If not found, return nothing.\n   */\n\n\n  function getShapeClass(name) {\n    if (_customShapeMap.hasOwnProperty(name)) {\n      return _customShapeMap[name];\n    }\n  }\n  /**\n   * Create a path element from path data string\n   * @param pathData\n   * @param opts\n   * @param rect\n   * @param layout 'center' or 'cover' default to be cover\n   */\n\n\n  function makePath(pathData, opts, rect, layout) {\n    var path = createFromString(pathData, opts);\n\n    if (rect) {\n      if (layout === 'center') {\n        rect = centerGraphic(rect, path.getBoundingRect());\n      }\n\n      resizePath(path, rect);\n    }\n\n    return path;\n  }\n  /**\n   * Create a image element from image url\n   * @param imageUrl image url\n   * @param opts options\n   * @param rect constrain rect\n   * @param layout 'center' or 'cover'. Default to be 'cover'\n   */\n\n\n  function makeImage(imageUrl, rect, layout) {\n    var zrImg = new ZRImage({\n      style: {\n        image: imageUrl,\n        x: rect.x,\n        y: rect.y,\n        width: rect.width,\n        height: rect.height\n      },\n      onload: function (img) {\n        if (layout === 'center') {\n          var boundingRect = {\n            width: img.width,\n            height: img.height\n          };\n          zrImg.setStyle(centerGraphic(rect, boundingRect));\n        }\n      }\n    });\n    return zrImg;\n  }\n  /**\n   * Get position of centered element in bounding box.\n   *\n   * @param  rect         element local bounding box\n   * @param  boundingRect constraint bounding box\n   * @return element position containing x, y, width, and height\n   */\n\n\n  function centerGraphic(rect, boundingRect) {\n    // Set rect to center, keep width / height ratio.\n    var aspect = boundingRect.width / boundingRect.height;\n    var width = rect.height * aspect;\n    var height;\n\n    if (width <= rect.width) {\n      height = rect.height;\n    } else {\n      width = rect.width;\n      height = width / aspect;\n    }\n\n    var cx = rect.x + rect.width / 2;\n    var cy = rect.y + rect.height / 2;\n    return {\n      x: cx - width / 2,\n      y: cy - height / 2,\n      width: width,\n      height: height\n    };\n  }\n\n  var mergePath = mergePath$1;\n  /**\n   * Resize a path to fit the rect\n   * @param path\n   * @param rect\n   */\n\n  function resizePath(path, rect) {\n    if (!path.applyTransform) {\n      return;\n    }\n\n    var pathRect = path.getBoundingRect();\n    var m = pathRect.calculateTransform(rect);\n    path.applyTransform(m);\n  }\n  /**\n   * Sub pixel optimize line for canvas\n   */\n\n\n  function subPixelOptimizeLine$1(param) {\n    subPixelOptimizeLine(param.shape, param.shape, param.style);\n    return param;\n  }\n  /**\n   * Sub pixel optimize rect for canvas\n   */\n\n\n  function subPixelOptimizeRect$1(param) {\n    subPixelOptimizeRect(param.shape, param.shape, param.style);\n    return param;\n  }\n  /**\n   * Sub pixel optimize for canvas\n   *\n   * @param position Coordinate, such as x, y\n   * @param lineWidth Should be nonnegative integer.\n   * @param positiveOrNegative Default false (negative).\n   * @return Optimized position.\n   */\n\n\n  var subPixelOptimize$1 = subPixelOptimize;\n  /**\n   * Get transform matrix of target (param target),\n   * in coordinate of its ancestor (param ancestor)\n   *\n   * @param target\n   * @param [ancestor]\n   */\n\n  function getTransform(target, ancestor) {\n    var mat = identity([]);\n\n    while (target && target !== ancestor) {\n      mul$1(mat, target.getLocalTransform(), mat);\n      target = target.parent;\n    }\n\n    return mat;\n  }\n  /**\n   * Apply transform to an vertex.\n   * @param target [x, y]\n   * @param transform Can be:\n   *      + Transform matrix: like [1, 0, 0, 1, 0, 0]\n   *      + {position, rotation, scale}, the same as `zrender/Transformable`.\n   * @param invert Whether use invert matrix.\n   * @return [x, y]\n   */\n\n\n  function applyTransform$1(target, transform, invert$$1) {\n    if (transform && !isArrayLike(transform)) {\n      transform = Transformable.getLocalTransform(transform);\n    }\n\n    if (invert$$1) {\n      transform = invert([], transform);\n    }\n\n    return applyTransform([], target, transform);\n  }\n  /**\n   * @param direction 'left' 'right' 'top' 'bottom'\n   * @param transform Transform matrix: like [1, 0, 0, 1, 0, 0]\n   * @param invert Whether use invert matrix.\n   * @return Transformed direction. 'left' 'right' 'top' 'bottom'\n   */\n\n\n  function transformDirection(direction, transform, invert$$1) {\n    // Pick a base, ensure that transform result will not be (0, 0).\n    var hBase = transform[4] === 0 || transform[5] === 0 || transform[0] === 0 ? 1 : Math.abs(2 * transform[4] / transform[0]);\n    var vBase = transform[4] === 0 || transform[5] === 0 || transform[2] === 0 ? 1 : Math.abs(2 * transform[4] / transform[2]);\n    var vertex = [direction === 'left' ? -hBase : direction === 'right' ? hBase : 0, direction === 'top' ? -vBase : direction === 'bottom' ? vBase : 0];\n    vertex = applyTransform$1(vertex, transform, invert$$1);\n    return Math.abs(vertex[0]) > Math.abs(vertex[1]) ? vertex[0] > 0 ? 'right' : 'left' : vertex[1] > 0 ? 'bottom' : 'top';\n  }\n\n  function isNotGroup(el) {\n    return !el.isGroup;\n  }\n\n  function isPath(el) {\n    return el.shape != null;\n  }\n  /**\n   * Apply group transition animation from g1 to g2.\n   * If no animatableModel, no animation.\n   */\n\n\n  function groupTransition(g1, g2, animatableModel) {\n    if (!g1 || !g2) {\n      return;\n    }\n\n    function getElMap(g) {\n      var elMap = {};\n      g.traverse(function (el) {\n        if (isNotGroup(el) && el.anid) {\n          elMap[el.anid] = el;\n        }\n      });\n      return elMap;\n    }\n\n    function getAnimatableProps(el) {\n      var obj = {\n        x: el.x,\n        y: el.y,\n        rotation: el.rotation\n      };\n\n      if (isPath(el)) {\n        obj.shape = extend({}, el.shape);\n      }\n\n      return obj;\n    }\n\n    var elMap1 = getElMap(g1);\n    g2.traverse(function (el) {\n      if (isNotGroup(el) && el.anid) {\n        var oldEl = elMap1[el.anid];\n\n        if (oldEl) {\n          var newProp = getAnimatableProps(el);\n          el.attr(getAnimatableProps(oldEl));\n          updateProps(el, newProp, animatableModel, getECData(el).dataIndex);\n        }\n      }\n    });\n  }\n\n  function clipPointsByRect(points, rect) {\n    // FIXME: this way migth be incorrect when grpahic clipped by a corner.\n    // and when element have border.\n    return map(points, function (point) {\n      var x = point[0];\n      x = mathMax$3(x, rect.x);\n      x = mathMin$3(x, rect.x + rect.width);\n      var y = point[1];\n      y = mathMax$3(y, rect.y);\n      y = mathMin$3(y, rect.y + rect.height);\n      return [x, y];\n    });\n  }\n  /**\n   * Return a new clipped rect. If rect size are negative, return undefined.\n   */\n\n\n  function clipRectByRect(targetRect, rect) {\n    var x = mathMax$3(targetRect.x, rect.x);\n    var x2 = mathMin$3(targetRect.x + targetRect.width, rect.x + rect.width);\n    var y = mathMax$3(targetRect.y, rect.y);\n    var y2 = mathMin$3(targetRect.y + targetRect.height, rect.y + rect.height); // If the total rect is cliped, nothing, including the border,\n    // should be painted. So return undefined.\n\n    if (x2 >= x && y2 >= y) {\n      return {\n        x: x,\n        y: y,\n        width: x2 - x,\n        height: y2 - y\n      };\n    }\n  }\n\n  function createIcon(iconStr, // Support 'image://' or 'path://' or direct svg path.\n  opt, rect) {\n    var innerOpts = extend({\n      rectHover: true\n    }, opt);\n    var style = innerOpts.style = {\n      strokeNoScale: true\n    };\n    rect = rect || {\n      x: -1,\n      y: -1,\n      width: 2,\n      height: 2\n    };\n\n    if (iconStr) {\n      return iconStr.indexOf('image://') === 0 ? (style.image = iconStr.slice(8), defaults(style, rect), new ZRImage(innerOpts)) : makePath(iconStr.replace('path://', ''), innerOpts, rect, 'center');\n    }\n  }\n  /**\n   * Return `true` if the given line (line `a`) and the given polygon\n   * are intersect.\n   * Note that we do not count colinear as intersect here because no\n   * requirement for that. We could do that if required in future.\n   */\n\n\n  function linePolygonIntersect(a1x, a1y, a2x, a2y, points) {\n    for (var i = 0, p2 = points[points.length - 1]; i < points.length; i++) {\n      var p = points[i];\n\n      if (lineLineIntersect(a1x, a1y, a2x, a2y, p[0], p[1], p2[0], p2[1])) {\n        return true;\n      }\n\n      p2 = p;\n    }\n  }\n  /**\n   * Return `true` if the given two lines (line `a` and line `b`)\n   * are intersect.\n   * Note that we do not count colinear as intersect here because no\n   * requirement for that. We could do that if required in future.\n   */\n\n\n  function lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n    // let `vec_m` to be `vec_a2 - vec_a1` and `vec_n` to be `vec_b2 - vec_b1`.\n    var mx = a2x - a1x;\n    var my = a2y - a1y;\n    var nx = b2x - b1x;\n    var ny = b2y - b1y; // `vec_m` and `vec_n` are parallel iff\n    //     exising `k` such that `vec_m = k · vec_n`, equivalent to `vec_m X vec_n = 0`.\n\n    var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\n\n    if (nearZero(nmCrossProduct)) {\n      return false;\n    } // `vec_m` and `vec_n` are intersect iff\n    //     existing `p` and `q` in [0, 1] such that `vec_a1 + p * vec_m = vec_b1 + q * vec_n`,\n    //     such that `q = ((vec_a1 - vec_b1) X vec_m) / (vec_n X vec_m)`\n    //           and `p = ((vec_a1 - vec_b1) X vec_n) / (vec_n X vec_m)`.\n\n\n    var b1a1x = a1x - b1x;\n    var b1a1y = a1y - b1y;\n    var q = crossProduct2d(b1a1x, b1a1y, mx, my) / nmCrossProduct;\n\n    if (q < 0 || q > 1) {\n      return false;\n    }\n\n    var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\n\n    if (p < 0 || p > 1) {\n      return false;\n    }\n\n    return true;\n  }\n  /**\n   * Cross product of 2-dimension vector.\n   */\n\n\n  function crossProduct2d(x1, y1, x2, y2) {\n    return x1 * y2 - x2 * y1;\n  }\n\n  function nearZero(val) {\n    return val <= 1e-6 && val >= -1e-6;\n  }\n\n  function setTooltipConfig(opt) {\n    var itemTooltipOption = opt.itemTooltipOption;\n    var componentModel = opt.componentModel;\n    var itemName = opt.itemName;\n    var itemTooltipOptionObj = isString(itemTooltipOption) ? {\n      formatter: itemTooltipOption\n    } : itemTooltipOption;\n    var mainType = componentModel.mainType;\n    var componentIndex = componentModel.componentIndex;\n    var formatterParams = {\n      componentType: mainType,\n      name: itemName,\n      $vars: ['name']\n    };\n    formatterParams[mainType + 'Index'] = componentIndex;\n    var formatterParamsExtra = opt.formatterParamsExtra;\n\n    if (formatterParamsExtra) {\n      each(keys(formatterParamsExtra), function (key) {\n        if (!hasOwn(formatterParams, key)) {\n          formatterParams[key] = formatterParamsExtra[key];\n          formatterParams.$vars.push(key);\n        }\n      });\n    }\n\n    var ecData = getECData(opt.el);\n    ecData.componentMainType = mainType;\n    ecData.componentIndex = componentIndex;\n    ecData.tooltipConfig = {\n      name: itemName,\n      option: defaults({\n        content: itemName,\n        formatterParams: formatterParams\n      }, itemTooltipOptionObj)\n    };\n  }\n\n  function traverseElement(el, cb) {\n    var stopped; // TODO\n    // Polyfill for fixing zrender group traverse don't visit it's root issue.\n\n    if (el.isGroup) {\n      stopped = cb(el);\n    }\n\n    if (!stopped) {\n      el.traverse(cb);\n    }\n  }\n\n  function traverseElements(els, cb) {\n    if (els) {\n      if (isArray(els)) {\n        for (var i = 0; i < els.length; i++) {\n          traverseElement(els[i], cb);\n        }\n      } else {\n        traverseElement(els, cb);\n      }\n    }\n  } // Register built-in shapes. These shapes might be overwirtten\n  // by users, although we do not recommend that.\n\n\n  registerShape('circle', Circle);\n  registerShape('ellipse', Ellipse);\n  registerShape('sector', Sector);\n  registerShape('ring', Ring);\n  registerShape('polygon', Polygon);\n  registerShape('polyline', Polyline);\n  registerShape('rect', Rect);\n  registerShape('line', Line);\n  registerShape('bezierCurve', BezierCurve);\n  registerShape('arc', Arc);\n  var graphic = (Object.freeze || Object)({\n    updateProps: updateProps,\n    initProps: initProps,\n    removeElement: removeElement,\n    removeElementWithFadeOut: removeElementWithFadeOut,\n    isElementRemoved: isElementRemoved,\n    extendShape: extendShape,\n    extendPath: extendPath,\n    registerShape: registerShape,\n    getShapeClass: getShapeClass,\n    makePath: makePath,\n    makeImage: makeImage,\n    mergePath: mergePath,\n    resizePath: resizePath,\n    subPixelOptimizeLine: subPixelOptimizeLine$1,\n    subPixelOptimizeRect: subPixelOptimizeRect$1,\n    subPixelOptimize: subPixelOptimize$1,\n    getTransform: getTransform,\n    applyTransform: applyTransform$1,\n    transformDirection: transformDirection,\n    groupTransition: groupTransition,\n    clipPointsByRect: clipPointsByRect,\n    clipRectByRect: clipRectByRect,\n    createIcon: createIcon,\n    linePolygonIntersect: linePolygonIntersect,\n    lineLineIntersect: lineLineIntersect,\n    setTooltipConfig: setTooltipConfig,\n    traverseElements: traverseElements,\n    Group: Group,\n    Image: ZRImage,\n    Text: ZRText,\n    Circle: Circle,\n    Ellipse: Ellipse,\n    Sector: Sector,\n    Ring: Ring,\n    Polygon: Polygon,\n    Polyline: Polyline,\n    Rect: Rect,\n    Line: Line,\n    BezierCurve: BezierCurve,\n    Arc: Arc,\n    IncrementalDisplayable: IncrementalDisplayable,\n    CompoundPath: CompoundPath,\n    LinearGradient: LinearGradient,\n    RadialGradient: RadialGradient,\n    BoundingRect: BoundingRect,\n    OrientedBoundingRect: OrientedBoundingRect,\n    Point: Point,\n    Path: Path\n  });\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var EMPTY_OBJ = {};\n\n  function setLabelText(label, labelTexts) {\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      var text = labelTexts[stateName];\n      var state = label.ensureState(stateName);\n      state.style = state.style || {};\n      state.style.text = text;\n    }\n\n    var oldStates = label.currentStates.slice();\n    label.clearStates(true);\n    label.setStyle({\n      text: labelTexts.normal\n    });\n    label.useStates(oldStates, true);\n  }\n\n  function getLabelText(opt, stateModels, interpolatedValue) {\n    var labelFetcher = opt.labelFetcher;\n    var labelDataIndex = opt.labelDataIndex;\n    var labelDimIndex = opt.labelDimIndex;\n    var normalModel = stateModels.normal;\n    var baseText;\n\n    if (labelFetcher) {\n      baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, normalModel && normalModel.get('formatter'), interpolatedValue != null ? {\n        interpolatedValue: interpolatedValue\n      } : null);\n    }\n\n    if (baseText == null) {\n      baseText = isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt, interpolatedValue) : opt.defaultText;\n    }\n\n    var statesText = {\n      normal: baseText\n    };\n\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      var stateModel = stateModels[stateName];\n      statesText[stateName] = retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, stateName, null, labelDimIndex, stateModel && stateModel.get('formatter')) : null, baseText);\n    }\n\n    return statesText;\n  }\n\n  function setLabelStyle(targetEl, labelStatesModels, opt, stateSpecified // TODO specified position?\n  ) {\n    opt = opt || EMPTY_OBJ;\n    var isSetOnText = targetEl instanceof ZRText;\n    var needsCreateText = false;\n\n    for (var i = 0; i < DISPLAY_STATES.length; i++) {\n      var stateModel = labelStatesModels[DISPLAY_STATES[i]];\n\n      if (stateModel && stateModel.getShallow('show')) {\n        needsCreateText = true;\n        break;\n      }\n    }\n\n    var textContent = isSetOnText ? targetEl : targetEl.getTextContent();\n\n    if (needsCreateText) {\n      if (!isSetOnText) {\n        // Reuse the previous\n        if (!textContent) {\n          textContent = new ZRText();\n          targetEl.setTextContent(textContent);\n        } // Use same state proxy\n\n\n        if (targetEl.stateProxy) {\n          textContent.stateProxy = targetEl.stateProxy;\n        }\n      }\n\n      var labelStatesTexts = getLabelText(opt, labelStatesModels);\n      var normalModel = labelStatesModels.normal;\n      var showNormal = !!normalModel.getShallow('show');\n      var normalStyle = createTextStyle(normalModel, stateSpecified && stateSpecified.normal, opt, false, !isSetOnText);\n      normalStyle.text = labelStatesTexts.normal;\n\n      if (!isSetOnText) {\n        // Always create new\n        targetEl.setTextConfig(createTextConfig(normalModel, opt, false));\n      }\n\n      for (var i = 0; i < SPECIAL_STATES.length; i++) {\n        var stateName = SPECIAL_STATES[i];\n        var stateModel = labelStatesModels[stateName];\n\n        if (stateModel) {\n          var stateObj = textContent.ensureState(stateName);\n          var stateShow = !!retrieve2(stateModel.getShallow('show'), showNormal);\n\n          if (stateShow !== showNormal) {\n            stateObj.ignore = !stateShow;\n          }\n\n          stateObj.style = createTextStyle(stateModel, stateSpecified && stateSpecified[stateName], opt, true, !isSetOnText);\n          stateObj.style.text = labelStatesTexts[stateName];\n\n          if (!isSetOnText) {\n            var targetElEmphasisState = targetEl.ensureState(stateName);\n            targetElEmphasisState.textConfig = createTextConfig(stateModel, opt, true);\n          }\n        }\n      } // PENDING: if there is many requirements that emphasis position\n      // need to be different from normal position, we might consider\n      // auto slient is those cases.\n\n\n      textContent.silent = !!normalModel.getShallow('silent'); // Keep x and y\n\n      if (textContent.style.x != null) {\n        normalStyle.x = textContent.style.x;\n      }\n\n      if (textContent.style.y != null) {\n        normalStyle.y = textContent.style.y;\n      }\n\n      textContent.ignore = !showNormal; // Always create new style.\n\n      textContent.useStyle(normalStyle);\n      textContent.dirty();\n\n      if (opt.enableTextSetter) {\n        labelInner(textContent).setLabelText = function (interpolatedValue) {\n          var labelStatesTexts = getLabelText(opt, labelStatesModels, interpolatedValue);\n          setLabelText(textContent, labelStatesTexts);\n        };\n      }\n    } else if (textContent) {\n      // Not display rich text.\n      textContent.ignore = true;\n    }\n\n    targetEl.dirty();\n  }\n\n  function getLabelStatesModels(itemModel, labelName) {\n    labelName = labelName || 'label';\n    var statesModels = {\n      normal: itemModel.getModel(labelName)\n    };\n\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      statesModels[stateName] = itemModel.getModel([stateName, labelName]);\n    }\n\n    return statesModels;\n  }\n  /**\n   * Set basic textStyle properties.\n   */\n\n\n  function createTextStyle(textStyleModel, specifiedTextStyle, // Fixed style in the code. Can't be set by model.\n  opt, isNotNormal, isAttached // If text is attached on an element. If so, auto color will handling in zrender.\n  ) {\n    var textStyle = {};\n    setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached);\n    specifiedTextStyle && extend(textStyle, specifiedTextStyle); // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n\n    return textStyle;\n  }\n\n  function createTextConfig(textStyleModel, opt, isNotNormal) {\n    opt = opt || {};\n    var textConfig = {};\n    var labelPosition;\n    var labelRotate = textStyleModel.getShallow('rotate');\n    var labelDistance = retrieve2(textStyleModel.getShallow('distance'), isNotNormal ? null : 5);\n    var labelOffset = textStyleModel.getShallow('offset');\n    labelPosition = textStyleModel.getShallow('position') || (isNotNormal ? null : 'inside'); // 'outside' is not a valid zr textPostion value, but used\n    // in bar series, and magric type should be considered.\n\n    labelPosition === 'outside' && (labelPosition = opt.defaultOutsidePosition || 'top');\n\n    if (labelPosition != null) {\n      textConfig.position = labelPosition;\n    }\n\n    if (labelOffset != null) {\n      textConfig.offset = labelOffset;\n    }\n\n    if (labelRotate != null) {\n      labelRotate *= Math.PI / 180;\n      textConfig.rotation = labelRotate;\n    }\n\n    if (labelDistance != null) {\n      textConfig.distance = labelDistance;\n    } // fill and auto is determined by the color of path fill if it's not specified by developers.\n\n\n    textConfig.outsideFill = textStyleModel.get('color') === 'inherit' ? opt.inheritColor || null : 'auto';\n    return textConfig;\n  }\n  /**\n   * The uniform entry of set text style, that is, retrieve style definitions\n   * from `model` and set to `textStyle` object.\n   *\n   * Never in merge mode, but in overwrite mode, that is, all of the text style\n   * properties will be set. (Consider the states of normal and emphasis and\n   * default value can be adopted, merge would make the logic too complicated\n   * to manage.)\n   */\n\n\n  function setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached) {\n    // Consider there will be abnormal when merge hover style to normal style if given default value.\n    opt = opt || EMPTY_OBJ;\n    var ecModel = textStyleModel.ecModel;\n    var globalTextStyle = ecModel && ecModel.option.textStyle; // Consider case:\n    // {\n    //     data: [{\n    //         value: 12,\n    //         label: {\n    //             rich: {\n    //                 // no 'a' here but using parent 'a'.\n    //             }\n    //         }\n    //     }],\n    //     rich: {\n    //         a: { ... }\n    //     }\n    // }\n\n    var richItemNames = getRichItemNames(textStyleModel);\n    var richResult;\n\n    if (richItemNames) {\n      richResult = {};\n\n      for (var name_1 in richItemNames) {\n        if (richItemNames.hasOwnProperty(name_1)) {\n          // Cascade is supported in rich.\n          var richTextStyle = textStyleModel.getModel(['rich', name_1]); // In rich, never `disableBox`.\n          // FIXME: consider `label: {formatter: '{a|xx}', color: 'blue', rich: {a: {}}}`,\n          // the default color `'blue'` will not be adopted if no color declared in `rich`.\n          // That might confuses users. So probably we should put `textStyleModel` as the\n          // root ancestor of the `richTextStyle`. But that would be a break change.\n\n          setTokenTextStyle(richResult[name_1] = {}, richTextStyle, globalTextStyle, opt, isNotNormal, isAttached, false, true);\n        }\n      }\n    }\n\n    if (richResult) {\n      textStyle.rich = richResult;\n    }\n\n    var overflow = textStyleModel.get('overflow');\n\n    if (overflow) {\n      textStyle.overflow = overflow;\n    }\n\n    var margin = textStyleModel.get('minMargin');\n\n    if (margin != null) {\n      textStyle.margin = margin;\n    }\n\n    setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, true, false);\n  } // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             rich: {\n  //                 // no 'a' here but using parent 'a'.\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n  // TODO TextStyleModel\n\n\n  function getRichItemNames(textStyleModel) {\n    // Use object to remove duplicated names.\n    var richItemNameMap;\n\n    while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n      var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n\n      if (rich) {\n        richItemNameMap = richItemNameMap || {};\n        var richKeys = keys(rich);\n\n        for (var i = 0; i < richKeys.length; i++) {\n          var richKey = richKeys[i];\n          richItemNameMap[richKey] = 1;\n        }\n      }\n\n      textStyleModel = textStyleModel.parentModel;\n    }\n\n    return richItemNameMap;\n  }\n\n  var TEXT_PROPS_WITH_GLOBAL = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'];\n  var TEXT_PROPS_SELF = ['align', 'lineHeight', 'width', 'height', 'tag', 'verticalAlign'];\n  var TEXT_PROPS_BOX = ['padding', 'borderWidth', 'borderRadius', 'borderDashOffset', 'backgroundColor', 'borderColor', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n\n  function setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, isBlock, inRich) {\n    // In merge mode, default value should not be given.\n    globalTextStyle = !isNotNormal && globalTextStyle || EMPTY_OBJ;\n    var inheritColor = opt && opt.inheritColor;\n    var fillColor = textStyleModel.getShallow('color');\n    var strokeColor = textStyleModel.getShallow('textBorderColor');\n    var opacity = retrieve2(textStyleModel.getShallow('opacity'), globalTextStyle.opacity);\n\n    if (fillColor === 'inherit' || fillColor === 'auto') {\n      {\n        if (fillColor === 'auto') {\n          deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n        }\n      }\n\n      if (inheritColor) {\n        fillColor = inheritColor;\n      } else {\n        fillColor = null;\n      }\n    }\n\n    if (strokeColor === 'inherit' || strokeColor === 'auto') {\n      {\n        if (strokeColor === 'auto') {\n          deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n        }\n      }\n\n      if (inheritColor) {\n        strokeColor = inheritColor;\n      } else {\n        strokeColor = null;\n      }\n    }\n\n    if (!isAttached) {\n      // Only use default global textStyle.color if text is individual.\n      // Otherwise it will use the strategy of attached text color because text may be on a path.\n      fillColor = fillColor || globalTextStyle.color;\n      strokeColor = strokeColor || globalTextStyle.textBorderColor;\n    }\n\n    if (fillColor != null) {\n      textStyle.fill = fillColor;\n    }\n\n    if (strokeColor != null) {\n      textStyle.stroke = strokeColor;\n    }\n\n    var textBorderWidth = retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n\n    if (textBorderWidth != null) {\n      textStyle.lineWidth = textBorderWidth;\n    }\n\n    var textBorderType = retrieve2(textStyleModel.getShallow('textBorderType'), globalTextStyle.textBorderType);\n\n    if (textBorderType != null) {\n      textStyle.lineDash = textBorderType;\n    }\n\n    var textBorderDashOffset = retrieve2(textStyleModel.getShallow('textBorderDashOffset'), globalTextStyle.textBorderDashOffset);\n\n    if (textBorderDashOffset != null) {\n      textStyle.lineDashOffset = textBorderDashOffset;\n    }\n\n    if (!isNotNormal && opacity == null && !inRich) {\n      opacity = opt && opt.defaultOpacity;\n    }\n\n    if (opacity != null) {\n      textStyle.opacity = opacity;\n    } // TODO\n\n\n    if (!isNotNormal && !isAttached) {\n      // Set default finally.\n      if (textStyle.fill == null && opt.inheritColor) {\n        textStyle.fill = opt.inheritColor;\n      }\n    } // Do not use `getFont` here, because merge should be supported, where\n    // part of these properties may be changed in emphasis style, and the\n    // others should remain their original value got from normal style.\n\n\n    for (var i = 0; i < TEXT_PROPS_WITH_GLOBAL.length; i++) {\n      var key = TEXT_PROPS_WITH_GLOBAL[i];\n      var val = retrieve2(textStyleModel.getShallow(key), globalTextStyle[key]);\n\n      if (val != null) {\n        textStyle[key] = val;\n      }\n    }\n\n    for (var i = 0; i < TEXT_PROPS_SELF.length; i++) {\n      var key = TEXT_PROPS_SELF[i];\n      var val = textStyleModel.getShallow(key);\n\n      if (val != null) {\n        textStyle[key] = val;\n      }\n    }\n\n    if (textStyle.verticalAlign == null) {\n      var baseline = textStyleModel.getShallow('baseline');\n\n      if (baseline != null) {\n        textStyle.verticalAlign = baseline;\n      }\n    }\n\n    if (!isBlock || !opt.disableBox) {\n      for (var i = 0; i < TEXT_PROPS_BOX.length; i++) {\n        var key = TEXT_PROPS_BOX[i];\n        var val = textStyleModel.getShallow(key);\n\n        if (val != null) {\n          textStyle[key] = val;\n        }\n      }\n\n      var borderType = textStyleModel.getShallow('borderType');\n\n      if (borderType != null) {\n        textStyle.borderDash = borderType;\n      }\n\n      if ((textStyle.backgroundColor === 'auto' || textStyle.backgroundColor === 'inherit') && inheritColor) {\n        {\n          if (textStyle.backgroundColor === 'auto') {\n            deprecateReplaceLog('backgroundColor: \\'auto\\'', 'backgroundColor: \\'inherit\\'');\n          }\n        }\n        textStyle.backgroundColor = inheritColor;\n      }\n\n      if ((textStyle.borderColor === 'auto' || textStyle.borderColor === 'inherit') && inheritColor) {\n        {\n          if (textStyle.borderColor === 'auto') {\n            deprecateReplaceLog('borderColor: \\'auto\\'', 'borderColor: \\'inherit\\'');\n          }\n        }\n        textStyle.borderColor = inheritColor;\n      }\n    }\n  }\n\n  function getFont(opt, ecModel) {\n    var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\n    return trim([// FIXME in node-canvas fontWeight is before fontStyle\n    opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\n  }\n\n  var labelInner = makeInner();\n\n  function setLabelValueAnimation(label, labelStatesModels, value, getDefaultText) {\n    if (!label) {\n      return;\n    }\n\n    var obj = labelInner(label);\n    obj.prevValue = obj.value;\n    obj.value = value;\n    var normalLabelModel = labelStatesModels.normal;\n    obj.valueAnimation = normalLabelModel.get('valueAnimation');\n\n    if (obj.valueAnimation) {\n      obj.precision = normalLabelModel.get('precision');\n      obj.defaultInterpolatedText = getDefaultText;\n      obj.statesModels = labelStatesModels;\n    }\n  }\n\n  function animateLabelValue(textEl, dataIndex, data, animatableModel, labelFetcher) {\n    var labelInnerStore = labelInner(textEl);\n\n    if (!labelInnerStore.valueAnimation || labelInnerStore.prevValue === labelInnerStore.value) {\n      // Value not changed, no new label animation\n      return;\n    }\n\n    var defaultInterpolatedText = labelInnerStore.defaultInterpolatedText; // Consider the case that being animating, do not use the `obj.value`,\n    // Otherwise it will jump to the `obj.value` when this new animation started.\n\n    var currValue = retrieve2(labelInnerStore.interpolatedValue, labelInnerStore.prevValue);\n    var targetValue = labelInnerStore.value;\n\n    function during(percent) {\n      var interpolated = interpolateRawValues(data, labelInnerStore.precision, currValue, targetValue, percent);\n      labelInnerStore.interpolatedValue = percent === 1 ? null : interpolated;\n      var labelText = getLabelText({\n        labelDataIndex: dataIndex,\n        labelFetcher: labelFetcher,\n        defaultText: defaultInterpolatedText ? defaultInterpolatedText(interpolated) : interpolated + ''\n      }, labelInnerStore.statesModels, interpolated);\n      setLabelText(textEl, labelText);\n    }\n\n    textEl.percent = 0;\n    (labelInnerStore.prevValue == null ? initProps : updateProps)(textEl, {\n      // percent is used to prevent animation from being aborted #15916\n      percent: 1\n    }, animatableModel, dataIndex, null, during);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var PATH_COLOR = ['textStyle', 'color'];\n  var textStyleParams = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'padding', 'lineHeight', 'rich', 'width', 'height', 'overflow']; // TODO Performance improvement?\n\n  var tmpText = new ZRText();\n\n  var TextStyleMixin =\n  /** @class */\n  function () {\n    function TextStyleMixin() {}\n    /**\n     * Get color property or get color from option.textStyle.color\n     */\n    // TODO Callback\n\n\n    TextStyleMixin.prototype.getTextColor = function (isEmphasis) {\n      var ecModel = this.ecModel;\n      return this.getShallow('color') || (!isEmphasis && ecModel ? ecModel.get(PATH_COLOR) : null);\n    };\n    /**\n     * Create font string from fontStyle, fontWeight, fontSize, fontFamily\n     * @return {string}\n     */\n\n\n    TextStyleMixin.prototype.getFont = function () {\n      return getFont({\n        fontStyle: this.getShallow('fontStyle'),\n        fontWeight: this.getShallow('fontWeight'),\n        fontSize: this.getShallow('fontSize'),\n        fontFamily: this.getShallow('fontFamily')\n      }, this.ecModel);\n    };\n\n    TextStyleMixin.prototype.getTextRect = function (text) {\n      var style = {\n        text: text,\n        verticalAlign: this.getShallow('verticalAlign') || this.getShallow('baseline')\n      };\n\n      for (var i = 0; i < textStyleParams.length; i++) {\n        style[textStyleParams[i]] = this.getShallow(textStyleParams[i]);\n      }\n\n      tmpText.useStyle(style);\n      tmpText.update();\n      return tmpText.getBoundingRect();\n    };\n\n    return TextStyleMixin;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var LINE_STYLE_KEY_MAP = [['lineWidth', 'width'], ['stroke', 'color'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['lineDash', 'type'], ['lineDashOffset', 'dashOffset'], ['lineCap', 'cap'], ['lineJoin', 'join'], ['miterLimit'] // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n  // So do not transfer decal directly.\n  ];\n  var getLineStyle = makeStyleMapper(LINE_STYLE_KEY_MAP);\n\n  var LineStyleMixin =\n  /** @class */\n  function () {\n    function LineStyleMixin() {}\n\n    LineStyleMixin.prototype.getLineStyle = function (excludes) {\n      return getLineStyle(this, excludes);\n    };\n\n    return LineStyleMixin;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var ITEM_STYLE_KEY_MAP = [['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['lineDash', 'borderType'], ['lineDashOffset', 'borderDashOffset'], ['lineCap', 'borderCap'], ['lineJoin', 'borderJoin'], ['miterLimit', 'borderMiterLimit'] // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n  // So do not transfer decal directly.\n  ];\n  var getItemStyle = makeStyleMapper(ITEM_STYLE_KEY_MAP);\n\n  var ItemStyleMixin =\n  /** @class */\n  function () {\n    function ItemStyleMixin() {}\n\n    ItemStyleMixin.prototype.getItemStyle = function (excludes, includes) {\n      return getItemStyle(this, excludes, includes);\n    };\n\n    return ItemStyleMixin;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var Model =\n  /** @class */\n  function () {\n    function Model(option, parentModel, ecModel) {\n      this.parentModel = parentModel;\n      this.ecModel = ecModel;\n      this.option = option; // Simple optimization\n      // if (this.init) {\n      //     if (arguments.length <= 4) {\n      //         this.init(option, parentModel, ecModel, extraOpt);\n      //     }\n      //     else {\n      //         this.init.apply(this, arguments);\n      //     }\n      // }\n    }\n\n    Model.prototype.init = function (option, parentModel, ecModel) {\n      var rest = [];\n\n      for (var _i = 3; _i < arguments.length; _i++) {\n        rest[_i - 3] = arguments[_i];\n      }\n    };\n    /**\n     * Merge the input option to me.\n     */\n\n\n    Model.prototype.mergeOption = function (option, ecModel) {\n      merge(this.option, option, true);\n    }; // `path` can be 'a.b.c', so the return value type have to be `ModelOption`\n    // TODO: TYPE strict key check?\n    // get(path: string | string[], ignoreParent?: boolean): ModelOption;\n\n\n    Model.prototype.get = function (path, ignoreParent) {\n      if (path == null) {\n        return this.option;\n      }\n\n      return this._doGet(this.parsePath(path), !ignoreParent && this.parentModel);\n    };\n\n    Model.prototype.getShallow = function (key, ignoreParent) {\n      var option = this.option;\n      var val = option == null ? option : option[key];\n\n      if (val == null && !ignoreParent) {\n        var parentModel = this.parentModel;\n\n        if (parentModel) {\n          // FIXME:TS do not know how to make it works\n          val = parentModel.getShallow(key);\n        }\n      }\n\n      return val;\n    }; // `path` can be 'a.b.c', so the return value type have to be `Model<ModelOption>`\n    // getModel(path: string | string[], parentModel?: Model): Model;\n    // TODO 'a.b.c' is deprecated\n\n\n    Model.prototype.getModel = function (path, parentModel) {\n      var hasPath = path != null;\n      var pathFinal = hasPath ? this.parsePath(path) : null;\n      var obj = hasPath ? this._doGet(pathFinal) : this.option;\n      parentModel = parentModel || this.parentModel && this.parentModel.getModel(this.resolveParentPath(pathFinal));\n      return new Model(obj, parentModel, this.ecModel);\n    };\n    /**\n     * If model has option\n     */\n\n\n    Model.prototype.isEmpty = function () {\n      return this.option == null;\n    };\n\n    Model.prototype.restoreData = function () {}; // Pending\n\n\n    Model.prototype.clone = function () {\n      var Ctor = this.constructor;\n      return new Ctor(clone(this.option));\n    }; // setReadOnly(properties): void {\n    // clazzUtil.setReadOnly(this, properties);\n    // }\n    // If path is null/undefined, return null/undefined.\n\n\n    Model.prototype.parsePath = function (path) {\n      if (typeof path === 'string') {\n        return path.split('.');\n      }\n\n      return path;\n    }; // Resolve path for parent. Perhaps useful when parent use a different property.\n    // Default to be a identity resolver.\n    // Can be modified to a different resolver.\n\n\n    Model.prototype.resolveParentPath = function (path) {\n      return path;\n    }; // FIXME:TS check whether put this method here\n\n\n    Model.prototype.isAnimationEnabled = function () {\n      if (!env.node && this.option) {\n        if (this.option.animation != null) {\n          return !!this.option.animation;\n        } else if (this.parentModel) {\n          return this.parentModel.isAnimationEnabled();\n        }\n      }\n    };\n\n    Model.prototype._doGet = function (pathArr, parentModel) {\n      var obj = this.option;\n\n      if (!pathArr) {\n        return obj;\n      }\n\n      for (var i = 0; i < pathArr.length; i++) {\n        // Ignore empty\n        if (!pathArr[i]) {\n          continue;\n        } // obj could be number/string/... (like 0)\n\n\n        obj = obj && typeof obj === 'object' ? obj[pathArr[i]] : null;\n\n        if (obj == null) {\n          break;\n        }\n      }\n\n      if (obj == null && parentModel) {\n        obj = parentModel._doGet(this.resolveParentPath(pathArr), parentModel.parentModel);\n      }\n\n      return obj;\n    };\n\n    return Model;\n  }(); // Enable Model.extend.\n\n\n  enableClassExtend(Model);\n  enableClassCheck(Model);\n  mixin(Model, LineStyleMixin);\n  mixin(Model, ItemStyleMixin);\n  mixin(Model, AreaStyleMixin);\n  mixin(Model, TextStyleMixin);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var base = Math.round(Math.random() * 10);\n  /**\n   * @public\n   * @param {string} type\n   * @return {string}\n   */\n\n  function getUID(type) {\n    // Considering the case of crossing js context,\n    // use Math.random to make id as unique as possible.\n    return [type || '', base++].join('_');\n  }\n  /**\n   * Implements `SubTypeDefaulterManager` for `target`.\n   */\n\n\n  function enableSubTypeDefaulter(target) {\n    var subTypeDefaulters = {};\n\n    target.registerSubTypeDefaulter = function (componentType, defaulter) {\n      var componentTypeInfo = parseClassType(componentType);\n      subTypeDefaulters[componentTypeInfo.main] = defaulter;\n    };\n\n    target.determineSubType = function (componentType, option) {\n      var type = option.type;\n\n      if (!type) {\n        var componentTypeMain = parseClassType(componentType).main;\n\n        if (target.hasSubTypes(componentType) && subTypeDefaulters[componentTypeMain]) {\n          type = subTypeDefaulters[componentTypeMain](option);\n        }\n      }\n\n      return type;\n    };\n  }\n  /**\n   * Implements `TopologicalTravelable<any>` for `entity`.\n   *\n   * Topological travel on Activity Network (Activity On Vertices).\n   * Dependencies is defined in Model.prototype.dependencies, like ['xAxis', 'yAxis'].\n   * If 'xAxis' or 'yAxis' is absent in componentTypeList, just ignore it in topology.\n   * If there is circular dependencey, Error will be thrown.\n   */\n\n\n  function enableTopologicalTravel(entity, dependencyGetter) {\n    /**\n     * @param targetNameList Target Component type list.\n     *                       Can be ['aa', 'bb', 'aa.xx']\n     * @param fullNameList By which we can build dependency graph.\n     * @param callback Params: componentType, dependencies.\n     * @param context Scope of callback.\n     */\n    entity.topologicalTravel = function (targetNameList, fullNameList, callback, context) {\n      if (!targetNameList.length) {\n        return;\n      }\n\n      var result = makeDepndencyGraph(fullNameList);\n      var graph = result.graph;\n      var noEntryList = result.noEntryList;\n      var targetNameSet = {};\n      each(targetNameList, function (name) {\n        targetNameSet[name] = true;\n      });\n\n      while (noEntryList.length) {\n        var currComponentType = noEntryList.pop();\n        var currVertex = graph[currComponentType];\n        var isInTargetNameSet = !!targetNameSet[currComponentType];\n\n        if (isInTargetNameSet) {\n          callback.call(context, currComponentType, currVertex.originalDeps.slice());\n          delete targetNameSet[currComponentType];\n        }\n\n        each(currVertex.successor, isInTargetNameSet ? removeEdgeAndAdd : removeEdge);\n      }\n\n      each(targetNameSet, function () {\n        var errMsg = '';\n        {\n          errMsg = makePrintable('Circular dependency may exists: ', targetNameSet, targetNameList, fullNameList);\n        }\n        throw new Error(errMsg);\n      });\n\n      function removeEdge(succComponentType) {\n        graph[succComponentType].entryCount--;\n\n        if (graph[succComponentType].entryCount === 0) {\n          noEntryList.push(succComponentType);\n        }\n      } // Consider this case: legend depends on series, and we call\n      // chart.setOption({series: [...]}), where only series is in option.\n      // If we do not have 'removeEdgeAndAdd', legendModel.mergeOption will\n      // not be called, but only sereis.mergeOption is called. Thus legend\n      // have no chance to update its local record about series (like which\n      // name of series is available in legend).\n\n\n      function removeEdgeAndAdd(succComponentType) {\n        targetNameSet[succComponentType] = true;\n        removeEdge(succComponentType);\n      }\n    };\n\n    function makeDepndencyGraph(fullNameList) {\n      var graph = {};\n      var noEntryList = [];\n      each(fullNameList, function (name) {\n        var thisItem = createDependencyGraphItem(graph, name);\n        var originalDeps = thisItem.originalDeps = dependencyGetter(name);\n        var availableDeps = getAvailableDependencies(originalDeps, fullNameList);\n        thisItem.entryCount = availableDeps.length;\n\n        if (thisItem.entryCount === 0) {\n          noEntryList.push(name);\n        }\n\n        each(availableDeps, function (dependentName) {\n          if (indexOf(thisItem.predecessor, dependentName) < 0) {\n            thisItem.predecessor.push(dependentName);\n          }\n\n          var thatItem = createDependencyGraphItem(graph, dependentName);\n\n          if (indexOf(thatItem.successor, dependentName) < 0) {\n            thatItem.successor.push(name);\n          }\n        });\n      });\n      return {\n        graph: graph,\n        noEntryList: noEntryList\n      };\n    }\n\n    function createDependencyGraphItem(graph, name) {\n      if (!graph[name]) {\n        graph[name] = {\n          predecessor: [],\n          successor: []\n        };\n      }\n\n      return graph[name];\n    }\n\n    function getAvailableDependencies(originalDeps, fullNameList) {\n      var availableDeps = [];\n      each(originalDeps, function (dep) {\n        indexOf(fullNameList, dep) >= 0 && availableDeps.push(dep);\n      });\n      return availableDeps;\n    }\n  }\n\n  function inheritDefaultOption(superOption, subOption) {\n    // See also `model/Component.ts#getDefaultOption`\n    return merge(merge({}, superOption, true), subOption, true);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Language: English.\n   */\n\n\n  var langEN = {\n    time: {\n      month: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n      monthAbbr: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n      dayOfWeek: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n      dayOfWeekAbbr: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n    },\n    legend: {\n      selector: {\n        all: 'All',\n        inverse: 'Inv'\n      }\n    },\n    toolbox: {\n      brush: {\n        title: {\n          rect: 'Box Select',\n          polygon: 'Lasso Select',\n          lineX: 'Horizontally Select',\n          lineY: 'Vertically Select',\n          keep: 'Keep Selections',\n          clear: 'Clear Selections'\n        }\n      },\n      dataView: {\n        title: 'Data View',\n        lang: ['Data View', 'Close', 'Refresh']\n      },\n      dataZoom: {\n        title: {\n          zoom: 'Zoom',\n          back: 'Zoom Reset'\n        }\n      },\n      magicType: {\n        title: {\n          line: 'Switch to Line Chart',\n          bar: 'Switch to Bar Chart',\n          stack: 'Stack',\n          tiled: 'Tile'\n        }\n      },\n      restore: {\n        title: 'Restore'\n      },\n      saveAsImage: {\n        title: 'Save as Image',\n        lang: ['Right Click to Save Image']\n      }\n    },\n    series: {\n      typeNames: {\n        pie: 'Pie chart',\n        bar: 'Bar chart',\n        line: 'Line chart',\n        scatter: 'Scatter plot',\n        effectScatter: 'Ripple scatter plot',\n        radar: 'Radar chart',\n        tree: 'Tree',\n        treemap: 'Treemap',\n        boxplot: 'Boxplot',\n        candlestick: 'Candlestick',\n        k: 'K line chart',\n        heatmap: 'Heat map',\n        map: 'Map',\n        parallel: 'Parallel coordinate map',\n        lines: 'Line graph',\n        graph: 'Relationship graph',\n        sankey: 'Sankey diagram',\n        funnel: 'Funnel chart',\n        gauge: 'Gauge',\n        pictorialBar: 'Pictorial bar',\n        themeRiver: 'Theme River Map',\n        sunburst: 'Sunburst'\n      }\n    },\n    aria: {\n      general: {\n        withTitle: 'This is a chart about \"{title}\"',\n        withoutTitle: 'This is a chart'\n      },\n      series: {\n        single: {\n          prefix: '',\n          withName: ' with type {seriesType} named {seriesName}.',\n          withoutName: ' with type {seriesType}.'\n        },\n        multiple: {\n          prefix: '. It consists of {seriesCount} series count.',\n          withName: ' The {seriesId} series is a {seriesType} representing {seriesName}.',\n          withoutName: ' The {seriesId} series is a {seriesType}.',\n          separator: {\n            middle: '',\n            end: ''\n          }\n        }\n      },\n      data: {\n        allData: 'The data is as follows: ',\n        partialData: 'The first {displayCnt} items are: ',\n        withName: 'the data for {name} is {value}',\n        withoutName: '{value}',\n        separator: {\n          middle: ', ',\n          end: '. '\n        }\n      }\n    }\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n   * Licensed to the Apache Software Foundation (ASF) under one\n   * or more contributor license agreements.  See the NOTICE file\n   * distributed with this work for additional information\n   * regarding copyright ownership.  The ASF licenses this file\n   * to you under the Apache License, Version 2.0 (the\n   * \"License\"); you may not use this file except in compliance\n   * with the License.  You may obtain a copy of the License at\n   *\n   *   http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing,\n   * software distributed under the License is distributed on an\n   * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n   * KIND, either express or implied.  See the License for the\n   * specific language governing permissions and limitations\n   * under the License.\n   */\n\n  var langZH = {\n    time: {\n      month: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],\n      monthAbbr: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\n      dayOfWeek: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],\n      dayOfWeekAbbr: ['日', '一', '二', '三', '四', '五', '六']\n    },\n    legend: {\n      selector: {\n        all: '全选',\n        inverse: '反选'\n      }\n    },\n    toolbox: {\n      brush: {\n        title: {\n          rect: '矩形选择',\n          polygon: '圈选',\n          lineX: '横向选择',\n          lineY: '纵向选择',\n          keep: '保持选择',\n          clear: '清除选择'\n        }\n      },\n      dataView: {\n        title: '数据视图',\n        lang: ['数据视图', '关闭', '刷新']\n      },\n      dataZoom: {\n        title: {\n          zoom: '区域缩放',\n          back: '区域缩放还原'\n        }\n      },\n      magicType: {\n        title: {\n          line: '切换为折线图',\n          bar: '切换为柱状图',\n          stack: '切换为堆叠',\n          tiled: '切换为平铺'\n        }\n      },\n      restore: {\n        title: '还原'\n      },\n      saveAsImage: {\n        title: '保存为图片',\n        lang: ['右键另存为图片']\n      }\n    },\n    series: {\n      typeNames: {\n        pie: '饼图',\n        bar: '柱状图',\n        line: '折线图',\n        scatter: '散点图',\n        effectScatter: '涟漪散点图',\n        radar: '雷达图',\n        tree: '树图',\n        treemap: '矩形树图',\n        boxplot: '箱型图',\n        candlestick: 'K线图',\n        k: 'K线图',\n        heatmap: '热力图',\n        map: '地图',\n        parallel: '平行坐标图',\n        lines: '线图',\n        graph: '关系图',\n        sankey: '桑基图',\n        funnel: '漏斗图',\n        gauge: '仪表盘图',\n        pictorialBar: '象形柱图',\n        themeRiver: '主题河流图',\n        sunburst: '旭日图'\n      }\n    },\n    aria: {\n      general: {\n        withTitle: '这是一个关于“{title}”的图表。',\n        withoutTitle: '这是一个图表，'\n      },\n      series: {\n        single: {\n          prefix: '',\n          withName: '图表类型是{seriesType}，表示{seriesName}。',\n          withoutName: '图表类型是{seriesType}。'\n        },\n        multiple: {\n          prefix: '它由{seriesCount}个图表系列组成。',\n          withName: '第{seriesId}个系列是一个表示{seriesName}的{seriesType}，',\n          withoutName: '第{seriesId}个系列是一个{seriesType}，',\n          separator: {\n            middle: '；',\n            end: '。'\n          }\n        }\n      },\n      data: {\n        allData: '其数据是——',\n        partialData: '其中，前{displayCnt}项是——',\n        withName: '{name}的数据是{value}',\n        withoutName: '{value}',\n        separator: {\n          middle: '，',\n          end: ''\n        }\n      }\n    }\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var LOCALE_ZH = 'ZH';\n  var LOCALE_EN = 'EN';\n  var DEFAULT_LOCALE = LOCALE_EN;\n  var localeStorage = {};\n  var localeModels = {};\n  var SYSTEM_LANG = !env.domSupported ? DEFAULT_LOCALE : function () {\n    var langStr = (\n    /* eslint-disable-next-line */\n    document.documentElement.lang || navigator.language || navigator.browserLanguage).toUpperCase();\n    return langStr.indexOf(LOCALE_ZH) > -1 ? LOCALE_ZH : DEFAULT_LOCALE;\n  }();\n\n  function registerLocale(locale, localeObj) {\n    locale = locale.toUpperCase();\n    localeModels[locale] = new Model(localeObj);\n    localeStorage[locale] = localeObj;\n  } // export function getLocale(locale: string) {\n  //     return localeStorage[locale];\n  // }\n\n\n  function createLocaleObject(locale) {\n    if (isString(locale)) {\n      var localeObj = localeStorage[locale.toUpperCase()] || {};\n\n      if (locale === LOCALE_ZH || locale === LOCALE_EN) {\n        return clone(localeObj);\n      } else {\n        return merge(clone(localeObj), clone(localeStorage[DEFAULT_LOCALE]), false);\n      }\n    } else {\n      return merge(clone(locale), clone(localeStorage[DEFAULT_LOCALE]), false);\n    }\n  }\n\n  function getLocaleModel(lang) {\n    return localeModels[lang];\n  }\n\n  function getDefaultLocaleModel() {\n    return localeModels[DEFAULT_LOCALE];\n  } // Default locale\n\n\n  registerLocale(LOCALE_EN, langEN);\n  registerLocale(LOCALE_ZH, langZH);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var ONE_SECOND = 1000;\n  var ONE_MINUTE = ONE_SECOND * 60;\n  var ONE_HOUR = ONE_MINUTE * 60;\n  var ONE_DAY = ONE_HOUR * 24;\n  var ONE_YEAR = ONE_DAY * 365;\n  var defaultLeveledFormatter = {\n    year: '{yyyy}',\n    month: '{MMM}',\n    day: '{d}',\n    hour: '{HH}:{mm}',\n    minute: '{HH}:{mm}',\n    second: '{HH}:{mm}:{ss}',\n    millisecond: '{HH}:{mm}:{ss} {SSS}',\n    none: '{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}'\n  };\n  var fullDayFormatter = '{yyyy}-{MM}-{dd}';\n  var fullLeveledFormatter = {\n    year: '{yyyy}',\n    month: '{yyyy}-{MM}',\n    day: fullDayFormatter,\n    hour: fullDayFormatter + ' ' + defaultLeveledFormatter.hour,\n    minute: fullDayFormatter + ' ' + defaultLeveledFormatter.minute,\n    second: fullDayFormatter + ' ' + defaultLeveledFormatter.second,\n    millisecond: defaultLeveledFormatter.none\n  };\n  var primaryTimeUnits = ['year', 'month', 'day', 'hour', 'minute', 'second', 'millisecond'];\n  var timeUnits = ['year', 'half-year', 'quarter', 'month', 'week', 'half-week', 'day', 'half-day', 'quarter-day', 'hour', 'minute', 'second', 'millisecond'];\n\n  function pad(str, len) {\n    str += '';\n    return '0000'.substr(0, len - str.length) + str;\n  }\n\n  function getPrimaryTimeUnit(timeUnit) {\n    switch (timeUnit) {\n      case 'half-year':\n      case 'quarter':\n        return 'month';\n\n      case 'week':\n      case 'half-week':\n        return 'day';\n\n      case 'half-day':\n      case 'quarter-day':\n        return 'hour';\n\n      default:\n        // year, minutes, second, milliseconds\n        return timeUnit;\n    }\n  }\n\n  function isPrimaryTimeUnit(timeUnit) {\n    return timeUnit === getPrimaryTimeUnit(timeUnit);\n  }\n\n  function getDefaultFormatPrecisionOfInterval(timeUnit) {\n    switch (timeUnit) {\n      case 'year':\n      case 'month':\n        return 'day';\n\n      case 'millisecond':\n        return 'millisecond';\n\n      default:\n        // Also for day, hour, minute, second\n        return 'second';\n    }\n  }\n\n  function format( // Note: The result based on `isUTC` are totally different, which can not be just simply\n  // substituted by the result without `isUTC`. So we make the param `isUTC` mandatory.\n  time, template, isUTC, lang) {\n    var date = parseDate(time);\n    var y = date[fullYearGetterName(isUTC)]();\n    var M = date[monthGetterName(isUTC)]() + 1;\n    var q = Math.floor((M - 1) / 3) + 1;\n    var d = date[dateGetterName(isUTC)]();\n    var e = date['get' + (isUTC ? 'UTC' : '') + 'Day']();\n    var H = date[hoursGetterName(isUTC)]();\n    var h = (H - 1) % 12 + 1;\n    var m = date[minutesGetterName(isUTC)]();\n    var s = date[secondsGetterName(isUTC)]();\n    var S = date[millisecondsGetterName(isUTC)]();\n    var localeModel = lang instanceof Model ? lang : getLocaleModel(lang || SYSTEM_LANG) || getDefaultLocaleModel();\n    var timeModel = localeModel.getModel('time');\n    var month = timeModel.get('month');\n    var monthAbbr = timeModel.get('monthAbbr');\n    var dayOfWeek = timeModel.get('dayOfWeek');\n    var dayOfWeekAbbr = timeModel.get('dayOfWeekAbbr');\n    return (template || '').replace(/{yyyy}/g, y + '').replace(/{yy}/g, y % 100 + '').replace(/{Q}/g, q + '').replace(/{MMMM}/g, month[M - 1]).replace(/{MMM}/g, monthAbbr[M - 1]).replace(/{MM}/g, pad(M, 2)).replace(/{M}/g, M + '').replace(/{dd}/g, pad(d, 2)).replace(/{d}/g, d + '').replace(/{eeee}/g, dayOfWeek[e]).replace(/{ee}/g, dayOfWeekAbbr[e]).replace(/{e}/g, e + '').replace(/{HH}/g, pad(H, 2)).replace(/{H}/g, H + '').replace(/{hh}/g, pad(h + '', 2)).replace(/{h}/g, h + '').replace(/{mm}/g, pad(m, 2)).replace(/{m}/g, m + '').replace(/{ss}/g, pad(s, 2)).replace(/{s}/g, s + '').replace(/{SSS}/g, pad(S, 3)).replace(/{S}/g, S + '');\n  }\n\n  function leveledFormat(tick, idx, formatter, lang, isUTC) {\n    var template = null;\n\n    if (isString(formatter)) {\n      // Single formatter for all units at all levels\n      template = formatter;\n    } else if (isFunction(formatter)) {\n      // Callback formatter\n      template = formatter(tick.value, idx, {\n        level: tick.level\n      });\n    } else {\n      var defaults$$1 = extend({}, defaultLeveledFormatter);\n\n      if (tick.level > 0) {\n        for (var i = 0; i < primaryTimeUnits.length; ++i) {\n          defaults$$1[primaryTimeUnits[i]] = \"{primary|\" + defaults$$1[primaryTimeUnits[i]] + \"}\";\n        }\n      }\n\n      var mergedFormatter = formatter ? formatter.inherit === false ? formatter // Use formatter with bigger units\n      : defaults(formatter, defaults$$1) : defaults$$1;\n      var unit = getUnitFromValue(tick.value, isUTC);\n\n      if (mergedFormatter[unit]) {\n        template = mergedFormatter[unit];\n      } else if (mergedFormatter.inherit) {\n        // Unit formatter is not defined and should inherit from bigger units\n        var targetId = timeUnits.indexOf(unit);\n\n        for (var i = targetId - 1; i >= 0; --i) {\n          if (mergedFormatter[unit]) {\n            template = mergedFormatter[unit];\n            break;\n          }\n        }\n\n        template = template || defaults$$1.none;\n      }\n\n      if (isArray(template)) {\n        var levelId = tick.level == null ? 0 : tick.level >= 0 ? tick.level : template.length + tick.level;\n        levelId = Math.min(levelId, template.length - 1);\n        template = template[levelId];\n      }\n    }\n\n    return format(new Date(tick.value), template, isUTC, lang);\n  }\n\n  function getUnitFromValue(value, isUTC) {\n    var date = parseDate(value);\n    var M = date[monthGetterName(isUTC)]() + 1;\n    var d = date[dateGetterName(isUTC)]();\n    var h = date[hoursGetterName(isUTC)]();\n    var m = date[minutesGetterName(isUTC)]();\n    var s = date[secondsGetterName(isUTC)]();\n    var S = date[millisecondsGetterName(isUTC)]();\n    var isSecond = S === 0;\n    var isMinute = isSecond && s === 0;\n    var isHour = isMinute && m === 0;\n    var isDay = isHour && h === 0;\n    var isMonth = isDay && d === 1;\n    var isYear = isMonth && M === 1;\n\n    if (isYear) {\n      return 'year';\n    } else if (isMonth) {\n      return 'month';\n    } else if (isDay) {\n      return 'day';\n    } else if (isHour) {\n      return 'hour';\n    } else if (isMinute) {\n      return 'minute';\n    } else if (isSecond) {\n      return 'second';\n    } else {\n      return 'millisecond';\n    }\n  }\n\n  function getUnitValue(value, unit, isUTC) {\n    var date = isNumber(value) ? parseDate(value) : value;\n    unit = unit || getUnitFromValue(value, isUTC);\n\n    switch (unit) {\n      case 'year':\n        return date[fullYearGetterName(isUTC)]();\n\n      case 'half-year':\n        return date[monthGetterName(isUTC)]() >= 6 ? 1 : 0;\n\n      case 'quarter':\n        return Math.floor((date[monthGetterName(isUTC)]() + 1) / 4);\n\n      case 'month':\n        return date[monthGetterName(isUTC)]();\n\n      case 'day':\n        return date[dateGetterName(isUTC)]();\n\n      case 'half-day':\n        return date[hoursGetterName(isUTC)]() / 24;\n\n      case 'hour':\n        return date[hoursGetterName(isUTC)]();\n\n      case 'minute':\n        return date[minutesGetterName(isUTC)]();\n\n      case 'second':\n        return date[secondsGetterName(isUTC)]();\n\n      case 'millisecond':\n        return date[millisecondsGetterName(isUTC)]();\n    }\n  }\n\n  function fullYearGetterName(isUTC) {\n    return isUTC ? 'getUTCFullYear' : 'getFullYear';\n  }\n\n  function monthGetterName(isUTC) {\n    return isUTC ? 'getUTCMonth' : 'getMonth';\n  }\n\n  function dateGetterName(isUTC) {\n    return isUTC ? 'getUTCDate' : 'getDate';\n  }\n\n  function hoursGetterName(isUTC) {\n    return isUTC ? 'getUTCHours' : 'getHours';\n  }\n\n  function minutesGetterName(isUTC) {\n    return isUTC ? 'getUTCMinutes' : 'getMinutes';\n  }\n\n  function secondsGetterName(isUTC) {\n    return isUTC ? 'getUTCSeconds' : 'getSeconds';\n  }\n\n  function millisecondsGetterName(isUTC) {\n    return isUTC ? 'getUTCMilliseconds' : 'getMilliseconds';\n  }\n\n  function fullYearSetterName(isUTC) {\n    return isUTC ? 'setUTCFullYear' : 'setFullYear';\n  }\n\n  function monthSetterName(isUTC) {\n    return isUTC ? 'setUTCMonth' : 'setMonth';\n  }\n\n  function dateSetterName(isUTC) {\n    return isUTC ? 'setUTCDate' : 'setDate';\n  }\n\n  function hoursSetterName(isUTC) {\n    return isUTC ? 'setUTCHours' : 'setHours';\n  }\n\n  function minutesSetterName(isUTC) {\n    return isUTC ? 'setUTCMinutes' : 'setMinutes';\n  }\n\n  function secondsSetterName(isUTC) {\n    return isUTC ? 'setUTCSeconds' : 'setSeconds';\n  }\n\n  function millisecondsSetterName(isUTC) {\n    return isUTC ? 'setUTCMilliseconds' : 'setMilliseconds';\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function getTextRect(text, font, align, verticalAlign, padding, rich, truncate, lineHeight) {\n    var textEl = new ZRText({\n      style: {\n        text: text,\n        font: font,\n        align: align,\n        verticalAlign: verticalAlign,\n        padding: padding,\n        rich: rich,\n        overflow: truncate ? 'truncate' : null,\n        lineHeight: lineHeight\n      }\n    });\n    return textEl.getBoundingRect();\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Add a comma each three digit.\n   */\n\n\n  function addCommas(x) {\n    if (!isNumeric(x)) {\n      return isString(x) ? x : '-';\n    }\n\n    var parts = (x + '').split('.');\n    return parts[0].replace(/(\\d{1,3})(?=(?:\\d{3})+(?!\\d))/g, '$1,') + (parts.length > 1 ? '.' + parts[1] : '');\n  }\n\n  function toCamelCase(str, upperCaseFirst) {\n    str = (str || '').toLowerCase().replace(/-(.)/g, function (match, group1) {\n      return group1.toUpperCase();\n    });\n\n    if (upperCaseFirst && str) {\n      str = str.charAt(0).toUpperCase() + str.slice(1);\n    }\n\n    return str;\n  }\n\n  var normalizeCssArray$1 = normalizeCssArray;\n  var replaceReg = /([&<>\"'])/g;\n  var replaceMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    '\\'': '&#39;'\n  };\n\n  function encodeHTML(source) {\n    return source == null ? '' : (source + '').replace(replaceReg, function (str, c) {\n      return replaceMap[c];\n    });\n  }\n  /**\n   * Make value user readable for tooltip and label.\n   * \"User readable\":\n   *     Try to not print programmer-specific text like NaN, Infinity, null, undefined.\n   *     Avoid to display an empty string, which users can not recognize there is\n   *     a value and it might look like a bug.\n   */\n\n\n  function makeValueReadable(value, valueType, useUTC) {\n    var USER_READABLE_DEFUALT_TIME_PATTERN = '{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}';\n\n    function stringToUserReadable(str) {\n      return str && trim(str) ? str : '-';\n    }\n\n    function isNumberUserReadable(num) {\n      return !!(num != null && !isNaN(num) && isFinite(num));\n    }\n\n    var isTypeTime = valueType === 'time';\n    var isValueDate = value instanceof Date;\n\n    if (isTypeTime || isValueDate) {\n      var date = isTypeTime ? parseDate(value) : value;\n\n      if (!isNaN(+date)) {\n        return format(date, USER_READABLE_DEFUALT_TIME_PATTERN, useUTC);\n      } else if (isValueDate) {\n        return '-';\n      } // In other cases, continue to try to display the value in the following code.\n\n    }\n\n    if (valueType === 'ordinal') {\n      return isStringSafe(value) ? stringToUserReadable(value) : isNumber(value) ? isNumberUserReadable(value) ? value + '' : '-' : '-';\n    } // By default.\n\n\n    var numericResult = numericToNumber(value);\n    return isNumberUserReadable(numericResult) ? addCommas(numericResult) : isStringSafe(value) ? stringToUserReadable(value) : typeof value === 'boolean' ? value + '' : '-';\n  }\n\n  var TPL_VAR_ALIAS = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];\n\n  var wrapVar = function (varName, seriesIdx) {\n    return '{' + varName + (seriesIdx == null ? '' : seriesIdx) + '}';\n  };\n  /**\n   * Template formatter\n   * @param {Array.<Object>|Object} paramsList\n   */\n\n\n  function formatTpl(tpl, paramsList, encode) {\n    if (!isArray(paramsList)) {\n      paramsList = [paramsList];\n    }\n\n    var seriesLen = paramsList.length;\n\n    if (!seriesLen) {\n      return '';\n    }\n\n    var $vars = paramsList[0].$vars || [];\n\n    for (var i = 0; i < $vars.length; i++) {\n      var alias = TPL_VAR_ALIAS[i];\n      tpl = tpl.replace(wrapVar(alias), wrapVar(alias, 0));\n    }\n\n    for (var seriesIdx = 0; seriesIdx < seriesLen; seriesIdx++) {\n      for (var k = 0; k < $vars.length; k++) {\n        var val = paramsList[seriesIdx][$vars[k]];\n        tpl = tpl.replace(wrapVar(TPL_VAR_ALIAS[k], seriesIdx), encode ? encodeHTML(val) : val);\n      }\n    }\n\n    return tpl;\n  }\n  /**\n   * simple Template formatter\n   */\n\n\n  function getTooltipMarker(inOpt, extraCssText) {\n    var opt = isString(inOpt) ? {\n      color: inOpt,\n      extraCssText: extraCssText\n    } : inOpt || {};\n    var color = opt.color;\n    var type = opt.type;\n    extraCssText = opt.extraCssText;\n    var renderMode = opt.renderMode || 'html';\n\n    if (!color) {\n      return '';\n    }\n\n    if (renderMode === 'html') {\n      return type === 'subItem' ? '<span style=\"display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;' + 'border-radius:4px;width:4px;height:4px;background-color:' // Only support string\n      + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>' : '<span style=\"display:inline-block;margin-right:4px;' + 'border-radius:10px;width:10px;height:10px;background-color:' + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>';\n    } else {\n      // Should better not to auto generate style name by auto-increment number here.\n      // Because this util is usually called in tooltip formatter, which is probably\n      // called repeatly when mouse move and the auto-increment number increases fast.\n      // Users can make their own style name by theirselves, make it unique and readable.\n      var markerId = opt.markerId || 'markerX';\n      return {\n        renderMode: renderMode,\n        content: '{' + markerId + '|}  ',\n        style: type === 'subItem' ? {\n          width: 4,\n          height: 4,\n          borderRadius: 2,\n          backgroundColor: color\n        } : {\n          width: 10,\n          height: 10,\n          borderRadius: 5,\n          backgroundColor: color\n        }\n      };\n    }\n  }\n  /**\n   * @deprecated Use `time/format` instead.\n   * ISO Date format\n   * @param {string} tpl\n   * @param {number} value\n   * @param {boolean} [isUTC=false] Default in local time.\n   *           see `module:echarts/scale/Time`\n   *           and `module:echarts/util/number#parseDate`.\n   * @inner\n   */\n\n\n  function formatTime(tpl, value, isUTC) {\n    {\n      deprecateReplaceLog('echarts.format.formatTime', 'echarts.time.format');\n    }\n\n    if (tpl === 'week' || tpl === 'month' || tpl === 'quarter' || tpl === 'half-year' || tpl === 'year') {\n      tpl = 'MM-dd\\nyyyy';\n    }\n\n    var date = parseDate(value);\n    var getUTC = isUTC ? 'getUTC' : 'get';\n    var y = date[getUTC + 'FullYear']();\n    var M = date[getUTC + 'Month']() + 1;\n    var d = date[getUTC + 'Date']();\n    var h = date[getUTC + 'Hours']();\n    var m = date[getUTC + 'Minutes']();\n    var s = date[getUTC + 'Seconds']();\n    var S = date[getUTC + 'Milliseconds']();\n    tpl = tpl.replace('MM', pad(M, 2)).replace('M', M).replace('yyyy', y).replace('yy', pad(y % 100 + '', 2)).replace('dd', pad(d, 2)).replace('d', d).replace('hh', pad(h, 2)).replace('h', h).replace('mm', pad(m, 2)).replace('m', m).replace('ss', pad(s, 2)).replace('s', s).replace('SSS', pad(S, 3));\n    return tpl;\n  }\n  /**\n   * Capital first\n   * @param {string} str\n   * @return {string}\n   */\n\n\n  function capitalFirst(str) {\n    return str ? str.charAt(0).toUpperCase() + str.substr(1) : str;\n  }\n  /**\n   * @return Never be null/undefined.\n   */\n\n\n  function convertToColorString(color, defaultColor) {\n    defaultColor = defaultColor || 'transparent';\n    return isString(color) ? color : isObject(color) ? color.colorStops && (color.colorStops[0] || {}).color || defaultColor : defaultColor;\n  }\n  /**\n   * open new tab\n   * @param link url\n   * @param target blank or self\n   */\n\n\n  function windowOpen(link, target) {\n    /* global window */\n    if (target === '_blank' || target === 'blank') {\n      var blank = window.open();\n      blank.opener = null;\n      blank.location.href = link;\n    } else {\n      window.open(link, target);\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // Layout helpers for each component positioning\n\n\n  var each$1 = each;\n  /**\n   * @public\n   */\n\n  var LOCATION_PARAMS = ['left', 'right', 'top', 'bottom', 'width', 'height'];\n  /**\n   * @public\n   */\n\n  var HV_NAMES = [['width', 'left', 'right'], ['height', 'top', 'bottom']];\n\n  function boxLayout(orient, group, gap, maxWidth, maxHeight) {\n    var x = 0;\n    var y = 0;\n\n    if (maxWidth == null) {\n      maxWidth = Infinity;\n    }\n\n    if (maxHeight == null) {\n      maxHeight = Infinity;\n    }\n\n    var currentLineMaxSize = 0;\n    group.eachChild(function (child, idx) {\n      var rect = child.getBoundingRect();\n      var nextChild = group.childAt(idx + 1);\n      var nextChildRect = nextChild && nextChild.getBoundingRect();\n      var nextX;\n      var nextY;\n\n      if (orient === 'horizontal') {\n        var moveX = rect.width + (nextChildRect ? -nextChildRect.x + rect.x : 0);\n        nextX = x + moveX; // Wrap when width exceeds maxWidth or meet a `newline` group\n        // FIXME compare before adding gap?\n\n        if (nextX > maxWidth || child.newline) {\n          x = 0;\n          nextX = moveX;\n          y += currentLineMaxSize + gap;\n          currentLineMaxSize = rect.height;\n        } else {\n          // FIXME: consider rect.y is not `0`?\n          currentLineMaxSize = Math.max(currentLineMaxSize, rect.height);\n        }\n      } else {\n        var moveY = rect.height + (nextChildRect ? -nextChildRect.y + rect.y : 0);\n        nextY = y + moveY; // Wrap when width exceeds maxHeight or meet a `newline` group\n\n        if (nextY > maxHeight || child.newline) {\n          x += currentLineMaxSize + gap;\n          y = 0;\n          nextY = moveY;\n          currentLineMaxSize = rect.width;\n        } else {\n          currentLineMaxSize = Math.max(currentLineMaxSize, rect.width);\n        }\n      }\n\n      if (child.newline) {\n        return;\n      }\n\n      child.x = x;\n      child.y = y;\n      child.markRedraw();\n      orient === 'horizontal' ? x = nextX + gap : y = nextY + gap;\n    });\n  }\n  /**\n   * VBox or HBox layouting\n   * @param {string} orient\n   * @param {module:zrender/graphic/Group} group\n   * @param {number} gap\n   * @param {number} [width=Infinity]\n   * @param {number} [height=Infinity]\n   */\n\n\n  var box = boxLayout;\n  /**\n   * VBox layouting\n   * @param {module:zrender/graphic/Group} group\n   * @param {number} gap\n   * @param {number} [width=Infinity]\n   * @param {number} [height=Infinity]\n   */\n\n  var vbox = curry(boxLayout, 'vertical');\n  /**\n   * HBox layouting\n   * @param {module:zrender/graphic/Group} group\n   * @param {number} gap\n   * @param {number} [width=Infinity]\n   * @param {number} [height=Infinity]\n   */\n\n  var hbox = curry(boxLayout, 'horizontal');\n  /**\n   * If x or x2 is not specified or 'center' 'left' 'right',\n   * the width would be as long as possible.\n   * If y or y2 is not specified or 'middle' 'top' 'bottom',\n   * the height would be as long as possible.\n   */\n\n  /**\n   * Parse position info.\n   */\n\n  function getLayoutRect(positionInfo, containerRect, margin) {\n    margin = normalizeCssArray$1(margin || 0);\n    var containerWidth = containerRect.width;\n    var containerHeight = containerRect.height;\n    var left = parsePercent$1(positionInfo.left, containerWidth);\n    var top = parsePercent$1(positionInfo.top, containerHeight);\n    var right = parsePercent$1(positionInfo.right, containerWidth);\n    var bottom = parsePercent$1(positionInfo.bottom, containerHeight);\n    var width = parsePercent$1(positionInfo.width, containerWidth);\n    var height = parsePercent$1(positionInfo.height, containerHeight);\n    var verticalMargin = margin[2] + margin[0];\n    var horizontalMargin = margin[1] + margin[3];\n    var aspect = positionInfo.aspect; // If width is not specified, calculate width from left and right\n\n    if (isNaN(width)) {\n      width = containerWidth - right - horizontalMargin - left;\n    }\n\n    if (isNaN(height)) {\n      height = containerHeight - bottom - verticalMargin - top;\n    }\n\n    if (aspect != null) {\n      // If width and height are not given\n      // 1. Graph should not exceeds the container\n      // 2. Aspect must be keeped\n      // 3. Graph should take the space as more as possible\n      // FIXME\n      // Margin is not considered, because there is no case that both\n      // using margin and aspect so far.\n      if (isNaN(width) && isNaN(height)) {\n        if (aspect > containerWidth / containerHeight) {\n          width = containerWidth * 0.8;\n        } else {\n          height = containerHeight * 0.8;\n        }\n      } // Calculate width or height with given aspect\n\n\n      if (isNaN(width)) {\n        width = aspect * height;\n      }\n\n      if (isNaN(height)) {\n        height = width / aspect;\n      }\n    } // If left is not specified, calculate left from right and width\n\n\n    if (isNaN(left)) {\n      left = containerWidth - right - width - horizontalMargin;\n    }\n\n    if (isNaN(top)) {\n      top = containerHeight - bottom - height - verticalMargin;\n    } // Align left and top\n\n\n    switch (positionInfo.left || positionInfo.right) {\n      case 'center':\n        left = containerWidth / 2 - width / 2 - margin[3];\n        break;\n\n      case 'right':\n        left = containerWidth - width - horizontalMargin;\n        break;\n    }\n\n    switch (positionInfo.top || positionInfo.bottom) {\n      case 'middle':\n      case 'center':\n        top = containerHeight / 2 - height / 2 - margin[0];\n        break;\n\n      case 'bottom':\n        top = containerHeight - height - verticalMargin;\n        break;\n    } // If something is wrong and left, top, width, height are calculated as NaN\n\n\n    left = left || 0;\n    top = top || 0;\n\n    if (isNaN(width)) {\n      // Width may be NaN if only one value is given except width\n      width = containerWidth - horizontalMargin - left - (right || 0);\n    }\n\n    if (isNaN(height)) {\n      // Height may be NaN if only one value is given except height\n      height = containerHeight - verticalMargin - top - (bottom || 0);\n    }\n\n    var rect = new BoundingRect(left + margin[3], top + margin[0], width, height);\n    rect.margin = margin;\n    return rect;\n  }\n  /**\n   * Position a zr element in viewport\n   *  Group position is specified by either\n   *  {left, top}, {right, bottom}\n   *  If all properties exists, right and bottom will be igonred.\n   *\n   * Logic:\n   *     1. Scale (against origin point in parent coord)\n   *     2. Rotate (against origin point in parent coord)\n   *     3. Traslate (with el.position by this method)\n   * So this method only fixes the last step 'Traslate', which does not affect\n   * scaling and rotating.\n   *\n   * If be called repeatly with the same input el, the same result will be gotten.\n   *\n   * Return true if the layout happend.\n   *\n   * @param el Should have `getBoundingRect` method.\n   * @param positionInfo\n   * @param positionInfo.left\n   * @param positionInfo.top\n   * @param positionInfo.right\n   * @param positionInfo.bottom\n   * @param positionInfo.width Only for opt.boundingModel: 'raw'\n   * @param positionInfo.height Only for opt.boundingModel: 'raw'\n   * @param containerRect\n   * @param margin\n   * @param opt\n   * @param opt.hv Only horizontal or only vertical. Default to be [1, 1]\n   * @param opt.boundingMode\n   *        Specify how to calculate boundingRect when locating.\n   *        'all': Position the boundingRect that is transformed and uioned\n   *               both itself and its descendants.\n   *               This mode simplies confine the elements in the bounding\n   *               of their container (e.g., using 'right: 0').\n   *        'raw': Position the boundingRect that is not transformed and only itself.\n   *               This mode is useful when you want a element can overflow its\n   *               container. (Consider a rotated circle needs to be located in a corner.)\n   *               In this mode positionInfo.width/height can only be number.\n   */\n\n\n  function positionElement(el, positionInfo, containerRect, margin, opt, out) {\n    var h = !opt || !opt.hv || opt.hv[0];\n    var v = !opt || !opt.hv || opt.hv[1];\n    var boundingMode = opt && opt.boundingMode || 'all';\n    out = out || el;\n    out.x = el.x;\n    out.y = el.y;\n\n    if (!h && !v) {\n      return false;\n    }\n\n    var rect;\n\n    if (boundingMode === 'raw') {\n      rect = el.type === 'group' ? new BoundingRect(0, 0, +positionInfo.width || 0, +positionInfo.height || 0) : el.getBoundingRect();\n    } else {\n      rect = el.getBoundingRect();\n\n      if (el.needLocalTransform()) {\n        var transform = el.getLocalTransform(); // Notice: raw rect may be inner object of el,\n        // which should not be modified.\n\n        rect = rect.clone();\n        rect.applyTransform(transform);\n      }\n    } // The real width and height can not be specified but calculated by the given el.\n\n\n    var layoutRect = getLayoutRect(defaults({\n      width: rect.width,\n      height: rect.height\n    }, positionInfo), containerRect, margin); // Because 'tranlate' is the last step in transform\n    // (see zrender/core/Transformable#getLocalTransform),\n    // we can just only modify el.position to get final result.\n\n    var dx = h ? layoutRect.x - rect.x : 0;\n    var dy = v ? layoutRect.y - rect.y : 0;\n\n    if (boundingMode === 'raw') {\n      out.x = dx;\n      out.y = dy;\n    } else {\n      out.x += dx;\n      out.y += dy;\n    }\n\n    if (out === el) {\n      el.markRedraw();\n    }\n\n    return true;\n  }\n  /**\n   * @param option Contains some of the properties in HV_NAMES.\n   * @param hvIdx 0: horizontal; 1: vertical.\n   */\n\n\n  function fetchLayoutMode(ins) {\n    var layoutMode = ins.layoutMode || ins.constructor.layoutMode;\n    return isObject(layoutMode) ? layoutMode : layoutMode ? {\n      type: layoutMode\n    } : null;\n  }\n  /**\n   * Consider Case:\n   * When default option has {left: 0, width: 100}, and we set {right: 0}\n   * through setOption or media query, using normal zrUtil.merge will cause\n   * {right: 0} does not take effect.\n   *\n   * @example\n   * ComponentModel.extend({\n   *     init: function () {\n   *         ...\n   *         let inputPositionParams = layout.getLayoutParams(option);\n   *         this.mergeOption(inputPositionParams);\n   *     },\n   *     mergeOption: function (newOption) {\n   *         newOption && zrUtil.merge(thisOption, newOption, true);\n   *         layout.mergeLayoutParam(thisOption, newOption);\n   *     }\n   * });\n   *\n   * @param targetOption\n   * @param newOption\n   * @param opt\n   */\n\n\n  function mergeLayoutParam(targetOption, newOption, opt) {\n    var ignoreSize = opt && opt.ignoreSize;\n    !isArray(ignoreSize) && (ignoreSize = [ignoreSize, ignoreSize]);\n    var hResult = merge$$1(HV_NAMES[0], 0);\n    var vResult = merge$$1(HV_NAMES[1], 1);\n    copy(HV_NAMES[0], targetOption, hResult);\n    copy(HV_NAMES[1], targetOption, vResult);\n\n    function merge$$1(names, hvIdx) {\n      var newParams = {};\n      var newValueCount = 0;\n      var merged = {};\n      var mergedValueCount = 0;\n      var enoughParamNumber = 2;\n      each$1(names, function (name) {\n        merged[name] = targetOption[name];\n      });\n      each$1(names, function (name) {\n        // Consider case: newOption.width is null, which is\n        // set by user for removing width setting.\n        hasProp(newOption, name) && (newParams[name] = merged[name] = newOption[name]);\n        hasValue(newParams, name) && newValueCount++;\n        hasValue(merged, name) && mergedValueCount++;\n      });\n\n      if (ignoreSize[hvIdx]) {\n        // Only one of left/right is premitted to exist.\n        if (hasValue(newOption, names[1])) {\n          merged[names[2]] = null;\n        } else if (hasValue(newOption, names[2])) {\n          merged[names[1]] = null;\n        }\n\n        return merged;\n      } // Case: newOption: {width: ..., right: ...},\n      // or targetOption: {right: ...} and newOption: {width: ...},\n      // There is no conflict when merged only has params count\n      // little than enoughParamNumber.\n\n\n      if (mergedValueCount === enoughParamNumber || !newValueCount) {\n        return merged;\n      } // Case: newOption: {width: ..., right: ...},\n      // Than we can make sure user only want those two, and ignore\n      // all origin params in targetOption.\n      else if (newValueCount >= enoughParamNumber) {\n          return newParams;\n        } else {\n          // Chose another param from targetOption by priority.\n          for (var i = 0; i < names.length; i++) {\n            var name_1 = names[i];\n\n            if (!hasProp(newParams, name_1) && hasProp(targetOption, name_1)) {\n              newParams[name_1] = targetOption[name_1];\n              break;\n            }\n          }\n\n          return newParams;\n        }\n    }\n\n    function hasProp(obj, name) {\n      return obj.hasOwnProperty(name);\n    }\n\n    function hasValue(obj, name) {\n      return obj[name] != null && obj[name] !== 'auto';\n    }\n\n    function copy(names, target, source) {\n      each$1(names, function (name) {\n        target[name] = source[name];\n      });\n    }\n  }\n  /**\n   * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n   */\n\n\n  function getLayoutParams(source) {\n    return copyLayoutParams({}, source);\n  }\n  /**\n   * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n   * @param {Object} source\n   * @return {Object} Result contains those props.\n   */\n\n\n  function copyLayoutParams(target, source) {\n    source && target && each$1(LOCATION_PARAMS, function (name) {\n      source.hasOwnProperty(name) && (target[name] = source[name]);\n    });\n    return target;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var inner = makeInner();\n\n  var ComponentModel =\n  /** @class */\n  function (_super) {\n    __extends(ComponentModel, _super);\n\n    function ComponentModel(option, parentModel, ecModel) {\n      var _this = _super.call(this, option, parentModel, ecModel) || this;\n\n      _this.uid = getUID('ec_cpt_model');\n      return _this;\n    }\n\n    ComponentModel.prototype.init = function (option, parentModel, ecModel) {\n      this.mergeDefaultAndTheme(option, ecModel);\n    };\n\n    ComponentModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n      var layoutMode = fetchLayoutMode(this);\n      var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n      var themeModel = ecModel.getTheme();\n      merge(option, themeModel.get(this.mainType));\n      merge(option, this.getDefaultOption());\n\n      if (layoutMode) {\n        mergeLayoutParam(option, inputPositionParams, layoutMode);\n      }\n    };\n\n    ComponentModel.prototype.mergeOption = function (option, ecModel) {\n      merge(this.option, option, true);\n      var layoutMode = fetchLayoutMode(this);\n\n      if (layoutMode) {\n        mergeLayoutParam(this.option, option, layoutMode);\n      }\n    };\n    /**\n     * Called immediately after `init` or `mergeOption` of this instance called.\n     */\n\n\n    ComponentModel.prototype.optionUpdated = function (newCptOption, isInit) {};\n    /**\n     * [How to declare defaultOption]:\n     *\n     * (A) If using class declaration in typescript (since echarts 5):\n     * ```ts\n     * import {ComponentOption} from '../model/option.js';\n     * export interface XxxOption extends ComponentOption {\n     *     aaa: number\n     * }\n     * export class XxxModel extends Component {\n     *     static type = 'xxx';\n     *     static defaultOption: XxxOption = {\n     *         aaa: 123\n     *     }\n     * }\n     * Component.registerClass(XxxModel);\n     * ```\n     * ```ts\n     * import {inheritDefaultOption} from '../util/component.js';\n     * import {XxxModel, XxxOption} from './XxxModel.js';\n     * export interface XxxSubOption extends XxxOption {\n     *     bbb: number\n     * }\n     * class XxxSubModel extends XxxModel {\n     *     static defaultOption: XxxSubOption = inheritDefaultOption(XxxModel.defaultOption, {\n     *         bbb: 456\n     *     })\n     *     fn() {\n     *         let opt = this.getDefaultOption();\n     *         // opt is {aaa: 123, bbb: 456}\n     *     }\n     * }\n     * ```\n     *\n     * (B) If using class extend (previous approach in echarts 3 & 4):\n     * ```js\n     * let XxxComponent = Component.extend({\n     *     defaultOption: {\n     *         xx: 123\n     *     }\n     * })\n     * ```\n     * ```js\n     * let XxxSubComponent = XxxComponent.extend({\n     *     defaultOption: {\n     *         yy: 456\n     *     },\n     *     fn: function () {\n     *         let opt = this.getDefaultOption();\n     *         // opt is {xx: 123, yy: 456}\n     *     }\n     * })\n     * ```\n     */\n\n\n    ComponentModel.prototype.getDefaultOption = function () {\n      var ctor = this.constructor; // If using class declaration, it is different to travel super class\n      // in legacy env and auto merge defaultOption. So if using class\n      // declaration, defaultOption should be merged manually.\n\n      if (!isExtendedClass(ctor)) {\n        // When using ts class, defaultOption must be declared as static.\n        return ctor.defaultOption;\n      } // FIXME: remove this approach?\n\n\n      var fields = inner(this);\n\n      if (!fields.defaultOption) {\n        var optList = [];\n        var clz = ctor;\n\n        while (clz) {\n          var opt = clz.prototype.defaultOption;\n          opt && optList.push(opt);\n          clz = clz.superClass;\n        }\n\n        var defaultOption = {};\n\n        for (var i = optList.length - 1; i >= 0; i--) {\n          defaultOption = merge(defaultOption, optList[i], true);\n        }\n\n        fields.defaultOption = defaultOption;\n      }\n\n      return fields.defaultOption;\n    };\n    /**\n     * Notice: always force to input param `useDefault` in case that forget to consider it.\n     * The same behavior as `modelUtil.parseFinder`.\n     *\n     * @param useDefault In many cases like series refer axis and axis refer grid,\n     *        If axis index / axis id not specified, use the first target as default.\n     *        In other cases like dataZoom refer axis, if not specified, measn no refer.\n     */\n\n\n    ComponentModel.prototype.getReferringComponents = function (mainType, opt) {\n      var indexKey = mainType + 'Index';\n      var idKey = mainType + 'Id';\n      return queryReferringComponents(this.ecModel, mainType, {\n        index: this.get(indexKey, true),\n        id: this.get(idKey, true)\n      }, opt);\n    };\n\n    ComponentModel.prototype.getBoxLayoutParams = function () {\n      // Consider itself having box layout configs.\n      var boxLayoutModel = this;\n      return {\n        left: boxLayoutModel.get('left'),\n        top: boxLayoutModel.get('top'),\n        right: boxLayoutModel.get('right'),\n        bottom: boxLayoutModel.get('bottom'),\n        width: boxLayoutModel.get('width'),\n        height: boxLayoutModel.get('height')\n      };\n    };\n    /**\n     * Get key for zlevel.\n     * If developers don't configure zlevel. We will assign zlevel to series based on the key.\n     * For example, lines with trail effect and progressive series will in an individual zlevel.\n     */\n\n\n    ComponentModel.prototype.getZLevelKey = function () {\n      return '';\n    };\n\n    ComponentModel.prototype.setZLevel = function (zlevel) {\n      this.option.zlevel = zlevel;\n    };\n\n    ComponentModel.protoInitialize = function () {\n      var proto = ComponentModel.prototype;\n      proto.type = 'component';\n      proto.id = '';\n      proto.name = '';\n      proto.mainType = '';\n      proto.subType = '';\n      proto.componentIndex = 0;\n    }();\n\n    return ComponentModel;\n  }(Model);\n\n  mountExtend(ComponentModel, Model);\n  enableClassManagement(ComponentModel);\n  enableSubTypeDefaulter(ComponentModel);\n  enableTopologicalTravel(ComponentModel, getDependencies);\n\n  function getDependencies(componentType) {\n    var deps = [];\n    each(ComponentModel.getClassesByMainType(componentType), function (clz) {\n      deps = deps.concat(clz.dependencies || clz.prototype.dependencies || []);\n    }); // Ensure main type.\n\n    deps = map(deps, function (type) {\n      return parseClassType(type).main;\n    }); // Hack dataset for convenience.\n\n    if (componentType !== 'dataset' && indexOf(deps, 'dataset') <= 0) {\n      deps.unshift('dataset');\n    }\n\n    return deps;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var platform = ''; // Navigator not exists in node\n\n  if (typeof navigator !== 'undefined') {\n    /* global navigator */\n    platform = navigator.platform || '';\n  }\n\n  var decalColor = 'rgba(0, 0, 0, 0.2)';\n  var globalDefault = {\n    darkMode: 'auto',\n    // backgroundColor: 'rgba(0,0,0,0)',\n    colorBy: 'series',\n    color: ['#5470c6', '#91cc75', '#fac858', '#ee6666', '#73c0de', '#3ba272', '#fc8452', '#9a60b4', '#ea7ccc'],\n    gradientColor: ['#f6efa6', '#d88273', '#bf444c'],\n    aria: {\n      decal: {\n        decals: [{\n          color: decalColor,\n          dashArrayX: [1, 0],\n          dashArrayY: [2, 5],\n          symbolSize: 1,\n          rotation: Math.PI / 6\n        }, {\n          color: decalColor,\n          symbol: 'circle',\n          dashArrayX: [[8, 8], [0, 8, 8, 0]],\n          dashArrayY: [6, 0],\n          symbolSize: 0.8\n        }, {\n          color: decalColor,\n          dashArrayX: [1, 0],\n          dashArrayY: [4, 3],\n          rotation: -Math.PI / 4\n        }, {\n          color: decalColor,\n          dashArrayX: [[6, 6], [0, 6, 6, 0]],\n          dashArrayY: [6, 0]\n        }, {\n          color: decalColor,\n          dashArrayX: [[1, 0], [1, 6]],\n          dashArrayY: [1, 0, 6, 0],\n          rotation: Math.PI / 4\n        }, {\n          color: decalColor,\n          symbol: 'triangle',\n          dashArrayX: [[9, 9], [0, 9, 9, 0]],\n          dashArrayY: [7, 2],\n          symbolSize: 0.75\n        }]\n      }\n    },\n    // If xAxis and yAxis declared, grid is created by default.\n    // grid: {},\n    textStyle: {\n      // color: '#000',\n      // decoration: 'none',\n      // PENDING\n      fontFamily: platform.match(/^Win/) ? 'Microsoft YaHei' : 'sans-serif',\n      // fontFamily: 'Arial, Verdana, sans-serif',\n      fontSize: 12,\n      fontStyle: 'normal',\n      fontWeight: 'normal'\n    },\n    // http://blogs.adobe.com/webplatform/2014/02/24/using-blend-modes-in-html-canvas/\n    // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n    // Default is source-over\n    blendMode: null,\n    stateAnimation: {\n      duration: 300,\n      easing: 'cubicOut'\n    },\n    animation: 'auto',\n    animationDuration: 1000,\n    animationDurationUpdate: 500,\n    animationEasing: 'cubicInOut',\n    animationEasingUpdate: 'cubicInOut',\n    animationThreshold: 2000,\n    // Configuration for progressive/incremental rendering\n    progressiveThreshold: 3000,\n    progressive: 400,\n    // Threshold of if use single hover layer to optimize.\n    // It is recommended that `hoverLayerThreshold` is equivalent to or less than\n    // `progressiveThreshold`, otherwise hover will cause restart of progressive,\n    // which is unexpected.\n    // see example <echarts/test/heatmap-large.html>.\n    hoverLayerThreshold: 3000,\n    // See: module:echarts/scale/Time\n    useUTC: false\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var VISUAL_DIMENSIONS = createHashMap(['tooltip', 'label', 'itemName', 'itemId', 'itemGroupId', 'seriesName']);\n  var SOURCE_FORMAT_ORIGINAL = 'original';\n  var SOURCE_FORMAT_ARRAY_ROWS = 'arrayRows';\n  var SOURCE_FORMAT_OBJECT_ROWS = 'objectRows';\n  var SOURCE_FORMAT_KEYED_COLUMNS = 'keyedColumns';\n  var SOURCE_FORMAT_TYPED_ARRAY = 'typedArray';\n  var SOURCE_FORMAT_UNKNOWN = 'unknown';\n  var SERIES_LAYOUT_BY_COLUMN = 'column';\n  var SERIES_LAYOUT_BY_ROW = 'row';\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var BE_ORDINAL = {\n    Must: 1,\n    Might: 2,\n    Not: 3 // Other cases\n\n  };\n  var innerGlobalModel = makeInner();\n  /**\n   * MUST be called before mergeOption of all series.\n   */\n\n  function resetSourceDefaulter(ecModel) {\n    // `datasetMap` is used to make default encode.\n    innerGlobalModel(ecModel).datasetMap = createHashMap();\n  }\n  /**\n   * [The strategy of the arrengment of data dimensions for dataset]:\n   * \"value way\": all axes are non-category axes. So series one by one take\n   *     several (the number is coordSysDims.length) dimensions from dataset.\n   *     The result of data arrengment of data dimensions like:\n   *     | ser0_x | ser0_y | ser1_x | ser1_y | ser2_x | ser2_y |\n   * \"category way\": at least one axis is category axis. So the the first data\n   *     dimension is always mapped to the first category axis and shared by\n   *     all of the series. The other data dimensions are taken by series like\n   *     \"value way\" does.\n   *     The result of data arrengment of data dimensions like:\n   *     | ser_shared_x | ser0_y | ser1_y | ser2_y |\n   *\n   * @return encode Never be `null/undefined`.\n   */\n\n\n  function makeSeriesEncodeForAxisCoordSys(coordDimensions, seriesModel, source) {\n    var encode = {};\n    var datasetModel = querySeriesUpstreamDatasetModel(seriesModel); // Currently only make default when using dataset, util more reqirements occur.\n\n    if (!datasetModel || !coordDimensions) {\n      return encode;\n    }\n\n    var encodeItemName = [];\n    var encodeSeriesName = [];\n    var ecModel = seriesModel.ecModel;\n    var datasetMap = innerGlobalModel(ecModel).datasetMap;\n    var key = datasetModel.uid + '_' + source.seriesLayoutBy;\n    var baseCategoryDimIndex;\n    var categoryWayValueDimStart;\n    coordDimensions = coordDimensions.slice();\n    each(coordDimensions, function (coordDimInfoLoose, coordDimIdx) {\n      var coordDimInfo = isObject(coordDimInfoLoose) ? coordDimInfoLoose : coordDimensions[coordDimIdx] = {\n        name: coordDimInfoLoose\n      };\n\n      if (coordDimInfo.type === 'ordinal' && baseCategoryDimIndex == null) {\n        baseCategoryDimIndex = coordDimIdx;\n        categoryWayValueDimStart = getDataDimCountOnCoordDim(coordDimInfo);\n      }\n\n      encode[coordDimInfo.name] = [];\n    });\n    var datasetRecord = datasetMap.get(key) || datasetMap.set(key, {\n      categoryWayDim: categoryWayValueDimStart,\n      valueWayDim: 0\n    }); // TODO\n    // Auto detect first time axis and do arrangement.\n\n    each(coordDimensions, function (coordDimInfo, coordDimIdx) {\n      var coordDimName = coordDimInfo.name;\n      var count = getDataDimCountOnCoordDim(coordDimInfo); // In value way.\n\n      if (baseCategoryDimIndex == null) {\n        var start = datasetRecord.valueWayDim;\n        pushDim(encode[coordDimName], start, count);\n        pushDim(encodeSeriesName, start, count);\n        datasetRecord.valueWayDim += count; // ??? TODO give a better default series name rule?\n        // especially when encode x y specified.\n        // consider: when mutiple series share one dimension\n        // category axis, series name should better use\n        // the other dimsion name. On the other hand, use\n        // both dimensions name.\n      } // In category way, the first category axis.\n      else if (baseCategoryDimIndex === coordDimIdx) {\n          pushDim(encode[coordDimName], 0, count);\n          pushDim(encodeItemName, 0, count);\n        } // In category way, the other axis.\n        else {\n            var start = datasetRecord.categoryWayDim;\n            pushDim(encode[coordDimName], start, count);\n            pushDim(encodeSeriesName, start, count);\n            datasetRecord.categoryWayDim += count;\n          }\n    });\n\n    function pushDim(dimIdxArr, idxFrom, idxCount) {\n      for (var i = 0; i < idxCount; i++) {\n        dimIdxArr.push(idxFrom + i);\n      }\n    }\n\n    function getDataDimCountOnCoordDim(coordDimInfo) {\n      var dimsDef = coordDimInfo.dimsDef;\n      return dimsDef ? dimsDef.length : 1;\n    }\n\n    encodeItemName.length && (encode.itemName = encodeItemName);\n    encodeSeriesName.length && (encode.seriesName = encodeSeriesName);\n    return encode;\n  }\n  /**\n   * Work for data like [{name: ..., value: ...}, ...].\n   *\n   * @return encode Never be `null/undefined`.\n   */\n\n\n  function makeSeriesEncodeForNameBased(seriesModel, source, dimCount) {\n    var encode = {};\n    var datasetModel = querySeriesUpstreamDatasetModel(seriesModel); // Currently only make default when using dataset, util more reqirements occur.\n\n    if (!datasetModel) {\n      return encode;\n    }\n\n    var sourceFormat = source.sourceFormat;\n    var dimensionsDefine = source.dimensionsDefine;\n    var potentialNameDimIndex;\n\n    if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n      each(dimensionsDefine, function (dim, idx) {\n        if ((isObject(dim) ? dim.name : dim) === 'name') {\n          potentialNameDimIndex = idx;\n        }\n      });\n    }\n\n    var idxResult = function () {\n      var idxRes0 = {};\n      var idxRes1 = {};\n      var guessRecords = []; // 5 is an experience value.\n\n      for (var i = 0, len = Math.min(5, dimCount); i < len; i++) {\n        var guessResult = doGuessOrdinal(source.data, sourceFormat, source.seriesLayoutBy, dimensionsDefine, source.startIndex, i);\n        guessRecords.push(guessResult);\n        var isPureNumber = guessResult === BE_ORDINAL.Not; // [Strategy of idxRes0]: find the first BE_ORDINAL.Not as the value dim,\n        // and then find a name dim with the priority:\n        // \"BE_ORDINAL.Might|BE_ORDINAL.Must\" > \"other dim\" > \"the value dim itself\".\n\n        if (isPureNumber && idxRes0.v == null && i !== potentialNameDimIndex) {\n          idxRes0.v = i;\n        }\n\n        if (idxRes0.n == null || idxRes0.n === idxRes0.v || !isPureNumber && guessRecords[idxRes0.n] === BE_ORDINAL.Not) {\n          idxRes0.n = i;\n        }\n\n        if (fulfilled(idxRes0) && guessRecords[idxRes0.n] !== BE_ORDINAL.Not) {\n          return idxRes0;\n        } // [Strategy of idxRes1]: if idxRes0 not satisfied (that is, no BE_ORDINAL.Not),\n        // find the first BE_ORDINAL.Might as the value dim,\n        // and then find a name dim with the priority:\n        // \"other dim\" > \"the value dim itself\".\n        // That is for backward compat: number-like (e.g., `'3'`, `'55'`) can be\n        // treated as number.\n\n\n        if (!isPureNumber) {\n          if (guessResult === BE_ORDINAL.Might && idxRes1.v == null && i !== potentialNameDimIndex) {\n            idxRes1.v = i;\n          }\n\n          if (idxRes1.n == null || idxRes1.n === idxRes1.v) {\n            idxRes1.n = i;\n          }\n        }\n      }\n\n      function fulfilled(idxResult) {\n        return idxResult.v != null && idxResult.n != null;\n      }\n\n      return fulfilled(idxRes0) ? idxRes0 : fulfilled(idxRes1) ? idxRes1 : null;\n    }();\n\n    if (idxResult) {\n      encode.value = [idxResult.v]; // `potentialNameDimIndex` has highest priority.\n\n      var nameDimIndex = potentialNameDimIndex != null ? potentialNameDimIndex : idxResult.n; // By default, label use itemName in charts.\n      // So we dont set encodeLabel here.\n\n      encode.itemName = [nameDimIndex];\n      encode.seriesName = [nameDimIndex];\n    }\n\n    return encode;\n  }\n  /**\n   * @return If return null/undefined, indicate that should not use datasetModel.\n   */\n\n\n  function querySeriesUpstreamDatasetModel(seriesModel) {\n    // Caution: consider the scenario:\n    // A dataset is declared and a series is not expected to use the dataset,\n    // and at the beginning `setOption({series: { noData })` (just prepare other\n    // option but no data), then `setOption({series: {data: [...]}); In this case,\n    // the user should set an empty array to avoid that dataset is used by default.\n    var thisData = seriesModel.get('data', true);\n\n    if (!thisData) {\n      return queryReferringComponents(seriesModel.ecModel, 'dataset', {\n        index: seriesModel.get('datasetIndex', true),\n        id: seriesModel.get('datasetId', true)\n      }, SINGLE_REFERRING).models[0];\n    }\n  }\n  /**\n   * @return Always return an array event empty.\n   */\n\n\n  function queryDatasetUpstreamDatasetModels(datasetModel) {\n    // Only these attributes declared, we by defualt reference to `datasetIndex: 0`.\n    // Otherwise, no reference.\n    if (!datasetModel.get('transform', true) && !datasetModel.get('fromTransformResult', true)) {\n      return [];\n    }\n\n    return queryReferringComponents(datasetModel.ecModel, 'dataset', {\n      index: datasetModel.get('fromDatasetIndex', true),\n      id: datasetModel.get('fromDatasetId', true)\n    }, SINGLE_REFERRING).models;\n  }\n  /**\n   * The rule should not be complex, otherwise user might not\n   * be able to known where the data is wrong.\n   * The code is ugly, but how to make it neat?\n   */\n\n\n  function guessOrdinal(source, dimIndex) {\n    return doGuessOrdinal(source.data, source.sourceFormat, source.seriesLayoutBy, source.dimensionsDefine, source.startIndex, dimIndex);\n  } // dimIndex may be overflow source data.\n  // return {BE_ORDINAL}\n\n\n  function doGuessOrdinal(data, sourceFormat, seriesLayoutBy, dimensionsDefine, startIndex, dimIndex) {\n    var result; // Experience value.\n\n    var maxLoop = 5;\n\n    if (isTypedArray(data)) {\n      return BE_ORDINAL.Not;\n    } // When sourceType is 'objectRows' or 'keyedColumns', dimensionsDefine\n    // always exists in source.\n\n\n    var dimName;\n    var dimType;\n\n    if (dimensionsDefine) {\n      var dimDefItem = dimensionsDefine[dimIndex];\n\n      if (isObject(dimDefItem)) {\n        dimName = dimDefItem.name;\n        dimType = dimDefItem.type;\n      } else if (isString(dimDefItem)) {\n        dimName = dimDefItem;\n      }\n    }\n\n    if (dimType != null) {\n      return dimType === 'ordinal' ? BE_ORDINAL.Must : BE_ORDINAL.Not;\n    }\n\n    if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n      var dataArrayRows = data;\n\n      if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n        var sample = dataArrayRows[dimIndex];\n\n        for (var i = 0; i < (sample || []).length && i < maxLoop; i++) {\n          if ((result = detectValue(sample[startIndex + i])) != null) {\n            return result;\n          }\n        }\n      } else {\n        for (var i = 0; i < dataArrayRows.length && i < maxLoop; i++) {\n          var row = dataArrayRows[startIndex + i];\n\n          if (row && (result = detectValue(row[dimIndex])) != null) {\n            return result;\n          }\n        }\n      }\n    } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n      var dataObjectRows = data;\n\n      if (!dimName) {\n        return BE_ORDINAL.Not;\n      }\n\n      for (var i = 0; i < dataObjectRows.length && i < maxLoop; i++) {\n        var item = dataObjectRows[i];\n\n        if (item && (result = detectValue(item[dimName])) != null) {\n          return result;\n        }\n      }\n    } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n      var dataKeyedColumns = data;\n\n      if (!dimName) {\n        return BE_ORDINAL.Not;\n      }\n\n      var sample = dataKeyedColumns[dimName];\n\n      if (!sample || isTypedArray(sample)) {\n        return BE_ORDINAL.Not;\n      }\n\n      for (var i = 0; i < sample.length && i < maxLoop; i++) {\n        if ((result = detectValue(sample[i])) != null) {\n          return result;\n        }\n      }\n    } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n      var dataOriginal = data;\n\n      for (var i = 0; i < dataOriginal.length && i < maxLoop; i++) {\n        var item = dataOriginal[i];\n        var val = getDataItemValue(item);\n\n        if (!isArray(val)) {\n          return BE_ORDINAL.Not;\n        }\n\n        if ((result = detectValue(val[dimIndex])) != null) {\n          return result;\n        }\n      }\n    }\n\n    function detectValue(val) {\n      var beStr = isString(val); // Consider usage convenience, '1', '2' will be treated as \"number\".\n      // `isFinit('')` get `true`.\n\n      if (val != null && isFinite(val) && val !== '') {\n        return beStr ? BE_ORDINAL.Might : BE_ORDINAL.Not;\n      } else if (beStr && val !== '-') {\n        return BE_ORDINAL.Must;\n      }\n    }\n\n    return BE_ORDINAL.Not;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var internalOptionCreatorMap = createHashMap();\n\n  function registerInternalOptionCreator(mainType, creator) {\n    assert(internalOptionCreatorMap.get(mainType) == null && creator);\n    internalOptionCreatorMap.set(mainType, creator);\n  }\n\n  function concatInternalOptions(ecModel, mainType, newCmptOptionList) {\n    var internalOptionCreator = internalOptionCreatorMap.get(mainType);\n\n    if (!internalOptionCreator) {\n      return newCmptOptionList;\n    }\n\n    var internalOptions = internalOptionCreator(ecModel);\n\n    if (!internalOptions) {\n      return newCmptOptionList;\n    }\n\n    {\n      for (var i = 0; i < internalOptions.length; i++) {\n        assert(isComponentIdInternal(internalOptions[i]));\n      }\n    }\n    return newCmptOptionList.concat(internalOptions);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var innerColor = makeInner();\n  var innerDecal = makeInner();\n\n  var PaletteMixin =\n  /** @class */\n  function () {\n    function PaletteMixin() {}\n\n    PaletteMixin.prototype.getColorFromPalette = function (name, scope, requestNum) {\n      var defaultPalette = normalizeToArray(this.get('color', true));\n      var layeredPalette = this.get('colorLayer', true);\n      return getFromPalette(this, innerColor, defaultPalette, layeredPalette, name, scope, requestNum);\n    };\n\n    PaletteMixin.prototype.clearColorPalette = function () {\n      clearPalette(this, innerColor);\n    };\n\n    return PaletteMixin;\n  }();\n\n  function getNearestPalette(palettes, requestColorNum) {\n    var paletteNum = palettes.length; // TODO palettes must be in order\n\n    for (var i = 0; i < paletteNum; i++) {\n      if (palettes[i].length > requestColorNum) {\n        return palettes[i];\n      }\n    }\n\n    return palettes[paletteNum - 1];\n  }\n  /**\n   * @param name MUST NOT be null/undefined. Otherwise call this function\n   *             twise with the same parameters will get different result.\n   * @param scope default this.\n   * @return Can be null/undefined\n   */\n\n\n  function getFromPalette(that, inner, defaultPalette, layeredPalette, name, scope, requestNum) {\n    scope = scope || that;\n    var scopeFields = inner(scope);\n    var paletteIdx = scopeFields.paletteIdx || 0;\n    var paletteNameMap = scopeFields.paletteNameMap = scopeFields.paletteNameMap || {}; // Use `hasOwnProperty` to avoid conflict with Object.prototype.\n\n    if (paletteNameMap.hasOwnProperty(name)) {\n      return paletteNameMap[name];\n    }\n\n    var palette = requestNum == null || !layeredPalette ? defaultPalette : getNearestPalette(layeredPalette, requestNum); // In case can't find in layered color palette.\n\n    palette = palette || defaultPalette;\n\n    if (!palette || !palette.length) {\n      return;\n    }\n\n    var pickedPaletteItem = palette[paletteIdx];\n\n    if (name) {\n      paletteNameMap[name] = pickedPaletteItem;\n    }\n\n    scopeFields.paletteIdx = (paletteIdx + 1) % palette.length;\n    return pickedPaletteItem;\n  }\n\n  function clearPalette(that, inner) {\n    inner(that).paletteIdx = 0;\n    inner(that).paletteNameMap = {};\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Caution: If the mechanism should be changed some day, these cases\n   * should be considered:\n   *\n   * (1) In `merge option` mode, if using the same option to call `setOption`\n   * many times, the result should be the same (try our best to ensure that).\n   * (2) In `merge option` mode, if a component has no id/name specified, it\n   * will be merged by index, and the result sequence of the components is\n   * consistent to the original sequence.\n   * (3) In `replaceMerge` mode, keep the result sequence of the components is\n   * consistent to the original sequence, even though there might result in \"hole\".\n   * (4) `reset` feature (in toolbox). Find detailed info in comments about\n   * `mergeOption` in module:echarts/model/OptionManager.\n   */\n  // Internal method names:\n  // -----------------------\n\n\n  var reCreateSeriesIndices;\n  var assertSeriesInitialized;\n  var initBase;\n  var OPTION_INNER_KEY = '\\0_ec_inner';\n  var OPTION_INNER_VALUE = 1;\n  var BUITIN_COMPONENTS_MAP = {\n    grid: 'GridComponent',\n    polar: 'PolarComponent',\n    geo: 'GeoComponent',\n    singleAxis: 'SingleAxisComponent',\n    parallel: 'ParallelComponent',\n    calendar: 'CalendarComponent',\n    graphic: 'GraphicComponent',\n    toolbox: 'ToolboxComponent',\n    tooltip: 'TooltipComponent',\n    axisPointer: 'AxisPointerComponent',\n    brush: 'BrushComponent',\n    title: 'TitleComponent',\n    timeline: 'TimelineComponent',\n    markPoint: 'MarkPointComponent',\n    markLine: 'MarkLineComponent',\n    markArea: 'MarkAreaComponent',\n    legend: 'LegendComponent',\n    dataZoom: 'DataZoomComponent',\n    visualMap: 'VisualMapComponent',\n    // aria: 'AriaComponent',\n    // dataset: 'DatasetComponent',\n    // Dependencies\n    xAxis: 'GridComponent',\n    yAxis: 'GridComponent',\n    angleAxis: 'PolarComponent',\n    radiusAxis: 'PolarComponent'\n  };\n  var BUILTIN_CHARTS_MAP = {\n    line: 'LineChart',\n    bar: 'BarChart',\n    pie: 'PieChart',\n    scatter: 'ScatterChart',\n    radar: 'RadarChart',\n    map: 'MapChart',\n    tree: 'TreeChart',\n    treemap: 'TreemapChart',\n    graph: 'GraphChart',\n    gauge: 'GaugeChart',\n    funnel: 'FunnelChart',\n    parallel: 'ParallelChart',\n    sankey: 'SankeyChart',\n    boxplot: 'BoxplotChart',\n    candlestick: 'CandlestickChart',\n    effectScatter: 'EffectScatterChart',\n    lines: 'LinesChart',\n    heatmap: 'HeatmapChart',\n    pictorialBar: 'PictorialBarChart',\n    themeRiver: 'ThemeRiverChart',\n    sunburst: 'SunburstChart',\n    custom: 'CustomChart'\n  };\n  var componetsMissingLogPrinted = {};\n\n  function checkMissingComponents(option) {\n    each(option, function (componentOption, mainType) {\n      if (!ComponentModel.hasClass(mainType)) {\n        var componentImportName = BUITIN_COMPONENTS_MAP[mainType];\n\n        if (componentImportName && !componetsMissingLogPrinted[componentImportName]) {\n          error(\"Component \" + mainType + \" is used but not imported.\\nimport { \" + componentImportName + \" } from 'echarts/components';\\necharts.use([\" + componentImportName + \"]);\");\n          componetsMissingLogPrinted[componentImportName] = true;\n        }\n      }\n    });\n  }\n\n  var GlobalModel =\n  /** @class */\n  function (_super) {\n    __extends(GlobalModel, _super);\n\n    function GlobalModel() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    GlobalModel.prototype.init = function (option, parentModel, ecModel, theme, locale, optionManager) {\n      theme = theme || {};\n      this.option = null; // Mark as not initialized.\n\n      this._theme = new Model(theme);\n      this._locale = new Model(locale);\n      this._optionManager = optionManager;\n    };\n\n    GlobalModel.prototype.setOption = function (option, opts, optionPreprocessorFuncs) {\n      {\n        assert(option != null, 'option is null/undefined');\n        assert(option[OPTION_INNER_KEY] !== OPTION_INNER_VALUE, 'please use chart.getOption()');\n      }\n      var innerOpt = normalizeSetOptionInput(opts);\n\n      this._optionManager.setOption(option, optionPreprocessorFuncs, innerOpt);\n\n      this._resetOption(null, innerOpt);\n    };\n    /**\n     * @param type null/undefined: reset all.\n     *        'recreate': force recreate all.\n     *        'timeline': only reset timeline option\n     *        'media': only reset media query option\n     * @return Whether option changed.\n     */\n\n\n    GlobalModel.prototype.resetOption = function (type, opt) {\n      return this._resetOption(type, normalizeSetOptionInput(opt));\n    };\n\n    GlobalModel.prototype._resetOption = function (type, opt) {\n      var optionChanged = false;\n      var optionManager = this._optionManager;\n\n      if (!type || type === 'recreate') {\n        var baseOption = optionManager.mountOption(type === 'recreate');\n        {\n          checkMissingComponents(baseOption);\n        }\n\n        if (!this.option || type === 'recreate') {\n          initBase(this, baseOption);\n        } else {\n          this.restoreData();\n\n          this._mergeOption(baseOption, opt);\n        }\n\n        optionChanged = true;\n      }\n\n      if (type === 'timeline' || type === 'media') {\n        this.restoreData();\n      } // By design, if `setOption(option2)` at the second time, and `option2` is a `ECUnitOption`,\n      // it should better not have the same props with `MediaUnit['option']`.\n      // Becuase either `option2` or `MediaUnit['option']` will be always merged to \"current option\"\n      // rather than original \"baseOption\". If they both override a prop, the result might be\n      // unexpected when media state changed after `setOption` called.\n      // If we really need to modify a props in each `MediaUnit['option']`, use the full version\n      // (`{baseOption, media}`) in `setOption`.\n      // For `timeline`, the case is the same.\n\n\n      if (!type || type === 'recreate' || type === 'timeline') {\n        var timelineOption = optionManager.getTimelineOption(this);\n\n        if (timelineOption) {\n          optionChanged = true;\n\n          this._mergeOption(timelineOption, opt);\n        }\n      }\n\n      if (!type || type === 'recreate' || type === 'media') {\n        var mediaOptions = optionManager.getMediaOption(this);\n\n        if (mediaOptions.length) {\n          each(mediaOptions, function (mediaOption) {\n            optionChanged = true;\n\n            this._mergeOption(mediaOption, opt);\n          }, this);\n        }\n      }\n\n      return optionChanged;\n    };\n\n    GlobalModel.prototype.mergeOption = function (option) {\n      this._mergeOption(option, null);\n    };\n\n    GlobalModel.prototype._mergeOption = function (newOption, opt) {\n      var option = this.option;\n      var componentsMap = this._componentsMap;\n      var componentsCount = this._componentsCount;\n      var newCmptTypes = [];\n      var newCmptTypeMap = createHashMap();\n      var replaceMergeMainTypeMap = opt && opt.replaceMergeMainTypeMap;\n      resetSourceDefaulter(this); // If no component class, merge directly.\n      // For example: color, animaiton options, etc.\n\n      each(newOption, function (componentOption, mainType) {\n        if (componentOption == null) {\n          return;\n        }\n\n        if (!ComponentModel.hasClass(mainType)) {\n          // globalSettingTask.dirty();\n          option[mainType] = option[mainType] == null ? clone(componentOption) : merge(option[mainType], componentOption, true);\n        } else if (mainType) {\n          newCmptTypes.push(mainType);\n          newCmptTypeMap.set(mainType, true);\n        }\n      });\n\n      if (replaceMergeMainTypeMap) {\n        // If there is a mainType `xxx` in `replaceMerge` but not declared in option,\n        // we trade it as it is declared in option as `{xxx: []}`. Because:\n        // (1) for normal merge, `{xxx: null/undefined}` are the same meaning as `{xxx: []}`.\n        // (2) some preprocessor may convert some of `{xxx: null/undefined}` to `{xxx: []}`.\n        replaceMergeMainTypeMap.each(function (val, mainTypeInReplaceMerge) {\n          if (ComponentModel.hasClass(mainTypeInReplaceMerge) && !newCmptTypeMap.get(mainTypeInReplaceMerge)) {\n            newCmptTypes.push(mainTypeInReplaceMerge);\n            newCmptTypeMap.set(mainTypeInReplaceMerge, true);\n          }\n        });\n      }\n\n      ComponentModel.topologicalTravel(newCmptTypes, ComponentModel.getAllClassMainTypes(), visitComponent, this);\n\n      function visitComponent(mainType) {\n        var newCmptOptionList = concatInternalOptions(this, mainType, normalizeToArray(newOption[mainType]));\n        var oldCmptList = componentsMap.get(mainType);\n        var mergeMode = // `!oldCmptList` means init. See the comment in `mappingToExists`\n        !oldCmptList ? 'replaceAll' : replaceMergeMainTypeMap && replaceMergeMainTypeMap.get(mainType) ? 'replaceMerge' : 'normalMerge';\n        var mappingResult = mappingToExists(oldCmptList, newCmptOptionList, mergeMode); // Set mainType and complete subType.\n\n        setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel); // Empty it before the travel, in order to prevent `this._componentsMap`\n        // from being used in the `init`/`mergeOption`/`optionUpdated` of some\n        // components, which is probably incorrect logic.\n\n        option[mainType] = null;\n        componentsMap.set(mainType, null);\n        componentsCount.set(mainType, 0);\n        var optionsByMainType = [];\n        var cmptsByMainType = [];\n        var cmptsCountByMainType = 0;\n        var tooltipExists;\n        var tooltipWarningLogged;\n        each(mappingResult, function (resultItem, index) {\n          var componentModel = resultItem.existing;\n          var newCmptOption = resultItem.newOption;\n\n          if (!newCmptOption) {\n            if (componentModel) {\n              // Consider where is no new option and should be merged using {},\n              // see removeEdgeAndAdd in topologicalTravel and\n              // ComponentModel.getAllClassMainTypes.\n              componentModel.mergeOption({}, this);\n              componentModel.optionUpdated({}, false);\n            } // If no both `resultItem.exist` and `resultItem.option`,\n            // either it is in `replaceMerge` and not matched by any id,\n            // or it has been removed in previous `replaceMerge` and left a \"hole\" in this component index.\n\n          } else {\n            var isSeriesType = mainType === 'series';\n            var ComponentModelClass = ComponentModel.getClass(mainType, resultItem.keyInfo.subType, !isSeriesType // Give a more detailed warn later if series don't exists\n            );\n\n            if (!ComponentModelClass) {\n              {\n                var subType = resultItem.keyInfo.subType;\n                var seriesImportName = BUILTIN_CHARTS_MAP[subType];\n\n                if (!componetsMissingLogPrinted[subType]) {\n                  componetsMissingLogPrinted[subType] = true;\n\n                  if (seriesImportName) {\n                    error(\"Series \" + subType + \" is used but not imported.\\nimport { \" + seriesImportName + \" } from 'echarts/charts';\\necharts.use([\" + seriesImportName + \"]);\");\n                  } else {\n                    error(\"Unkown series \" + subType);\n                  }\n                }\n              }\n              return;\n            } // TODO Before multiple tooltips get supported, we do this check to avoid unexpected exception.\n\n\n            if (mainType === 'tooltip') {\n              if (tooltipExists) {\n                {\n                  if (!tooltipWarningLogged) {\n                    warn('Currently only one tooltip component is allowed.');\n                    tooltipWarningLogged = true;\n                  }\n                }\n                return;\n              }\n\n              tooltipExists = true;\n            }\n\n            if (componentModel && componentModel.constructor === ComponentModelClass) {\n              componentModel.name = resultItem.keyInfo.name; // componentModel.settingTask && componentModel.settingTask.dirty();\n\n              componentModel.mergeOption(newCmptOption, this);\n              componentModel.optionUpdated(newCmptOption, false);\n            } else {\n              // PENDING Global as parent ?\n              var extraOpt = extend({\n                componentIndex: index\n              }, resultItem.keyInfo);\n              componentModel = new ComponentModelClass(newCmptOption, this, this, extraOpt); // Assign `keyInfo`\n\n              extend(componentModel, extraOpt);\n\n              if (resultItem.brandNew) {\n                componentModel.__requireNewView = true;\n              }\n\n              componentModel.init(newCmptOption, this, this); // Call optionUpdated after init.\n              // newCmptOption has been used as componentModel.option\n              // and may be merged with theme and default, so pass null\n              // to avoid confusion.\n\n              componentModel.optionUpdated(null, true);\n            }\n          }\n\n          if (componentModel) {\n            optionsByMainType.push(componentModel.option);\n            cmptsByMainType.push(componentModel);\n            cmptsCountByMainType++;\n          } else {\n            // Always do assign to avoid elided item in array.\n            optionsByMainType.push(void 0);\n            cmptsByMainType.push(void 0);\n          }\n        }, this);\n        option[mainType] = optionsByMainType;\n        componentsMap.set(mainType, cmptsByMainType);\n        componentsCount.set(mainType, cmptsCountByMainType); // Backup series for filtering.\n\n        if (mainType === 'series') {\n          reCreateSeriesIndices(this);\n        }\n      } // If no series declared, ensure `_seriesIndices` initialized.\n\n\n      if (!this._seriesIndices) {\n        reCreateSeriesIndices(this);\n      }\n    };\n    /**\n     * Get option for output (cloned option and inner info removed)\n     */\n\n\n    GlobalModel.prototype.getOption = function () {\n      var option = clone(this.option);\n      each(option, function (optInMainType, mainType) {\n        if (ComponentModel.hasClass(mainType)) {\n          var opts = normalizeToArray(optInMainType); // Inner cmpts need to be removed.\n          // Inner cmpts might not be at last since ec5.0, but still\n          // compatible for users: if inner cmpt at last, splice the returned array.\n\n          var realLen = opts.length;\n          var metNonInner = false;\n\n          for (var i = realLen - 1; i >= 0; i--) {\n            // Remove options with inner id.\n            if (opts[i] && !isComponentIdInternal(opts[i])) {\n              metNonInner = true;\n            } else {\n              opts[i] = null;\n              !metNonInner && realLen--;\n            }\n          }\n\n          opts.length = realLen;\n          option[mainType] = opts;\n        }\n      });\n      delete option[OPTION_INNER_KEY];\n      return option;\n    };\n\n    GlobalModel.prototype.getTheme = function () {\n      return this._theme;\n    };\n\n    GlobalModel.prototype.getLocaleModel = function () {\n      return this._locale;\n    };\n\n    GlobalModel.prototype.setUpdatePayload = function (payload) {\n      this._payload = payload;\n    };\n\n    GlobalModel.prototype.getUpdatePayload = function () {\n      return this._payload;\n    };\n    /**\n     * @param idx If not specified, return the first one.\n     */\n\n\n    GlobalModel.prototype.getComponent = function (mainType, idx) {\n      var list = this._componentsMap.get(mainType);\n\n      if (list) {\n        var cmpt = list[idx || 0];\n\n        if (cmpt) {\n          return cmpt;\n        } else if (idx == null) {\n          for (var i = 0; i < list.length; i++) {\n            if (list[i]) {\n              return list[i];\n            }\n          }\n        }\n      }\n    };\n    /**\n     * @return Never be null/undefined.\n     */\n\n\n    GlobalModel.prototype.queryComponents = function (condition) {\n      var mainType = condition.mainType;\n\n      if (!mainType) {\n        return [];\n      }\n\n      var index = condition.index;\n      var id = condition.id;\n      var name = condition.name;\n\n      var cmpts = this._componentsMap.get(mainType);\n\n      if (!cmpts || !cmpts.length) {\n        return [];\n      }\n\n      var result;\n\n      if (index != null) {\n        result = [];\n        each(normalizeToArray(index), function (idx) {\n          cmpts[idx] && result.push(cmpts[idx]);\n        });\n      } else if (id != null) {\n        result = queryByIdOrName('id', id, cmpts);\n      } else if (name != null) {\n        result = queryByIdOrName('name', name, cmpts);\n      } else {\n        // Return all non-empty components in that mainType\n        result = filter(cmpts, function (cmpt) {\n          return !!cmpt;\n        });\n      }\n\n      return filterBySubType(result, condition);\n    };\n    /**\n     * The interface is different from queryComponents,\n     * which is convenient for inner usage.\n     *\n     * @usage\n     * let result = findComponents(\n     *     {mainType: 'dataZoom', query: {dataZoomId: 'abc'}}\n     * );\n     * let result = findComponents(\n     *     {mainType: 'series', subType: 'pie', query: {seriesName: 'uio'}}\n     * );\n     * let result = findComponents(\n     *     {mainType: 'series',\n     *     filter: function (model, index) {...}}\n     * );\n     * // result like [component0, componnet1, ...]\n     */\n\n\n    GlobalModel.prototype.findComponents = function (condition) {\n      var query = condition.query;\n      var mainType = condition.mainType;\n      var queryCond = getQueryCond(query);\n      var result = queryCond ? this.queryComponents(queryCond) // Retrieve all non-empty components.\n      : filter(this._componentsMap.get(mainType), function (cmpt) {\n        return !!cmpt;\n      });\n      return doFilter(filterBySubType(result, condition));\n\n      function getQueryCond(q) {\n        var indexAttr = mainType + 'Index';\n        var idAttr = mainType + 'Id';\n        var nameAttr = mainType + 'Name';\n        return q && (q[indexAttr] != null || q[idAttr] != null || q[nameAttr] != null) ? {\n          mainType: mainType,\n          // subType will be filtered finally.\n          index: q[indexAttr],\n          id: q[idAttr],\n          name: q[nameAttr]\n        } : null;\n      }\n\n      function doFilter(res) {\n        return condition.filter ? filter(res, condition.filter) : res;\n      }\n    };\n\n    GlobalModel.prototype.eachComponent = function (mainType, cb, context) {\n      var componentsMap = this._componentsMap;\n\n      if (isFunction(mainType)) {\n        var ctxForAll_1 = cb;\n        var cbForAll_1 = mainType;\n        componentsMap.each(function (cmpts, componentType) {\n          for (var i = 0; cmpts && i < cmpts.length; i++) {\n            var cmpt = cmpts[i];\n            cmpt && cbForAll_1.call(ctxForAll_1, componentType, cmpt, cmpt.componentIndex);\n          }\n        });\n      } else {\n        var cmpts = isString(mainType) ? componentsMap.get(mainType) : isObject(mainType) ? this.findComponents(mainType) : null;\n\n        for (var i = 0; cmpts && i < cmpts.length; i++) {\n          var cmpt = cmpts[i];\n          cmpt && cb.call(context, cmpt, cmpt.componentIndex);\n        }\n      }\n    };\n    /**\n     * Get series list before filtered by name.\n     */\n\n\n    GlobalModel.prototype.getSeriesByName = function (name) {\n      var nameStr = convertOptionIdName(name, null);\n      return filter(this._componentsMap.get('series'), function (oneSeries) {\n        return !!oneSeries && nameStr != null && oneSeries.name === nameStr;\n      });\n    };\n    /**\n     * Get series list before filtered by index.\n     */\n\n\n    GlobalModel.prototype.getSeriesByIndex = function (seriesIndex) {\n      return this._componentsMap.get('series')[seriesIndex];\n    };\n    /**\n     * Get series list before filtered by type.\n     * FIXME: rename to getRawSeriesByType?\n     */\n\n\n    GlobalModel.prototype.getSeriesByType = function (subType) {\n      return filter(this._componentsMap.get('series'), function (oneSeries) {\n        return !!oneSeries && oneSeries.subType === subType;\n      });\n    };\n    /**\n     * Get all series before filtered.\n     */\n\n\n    GlobalModel.prototype.getSeries = function () {\n      return filter(this._componentsMap.get('series'), function (oneSeries) {\n        return !!oneSeries;\n      });\n    };\n    /**\n     * Count series before filtered.\n     */\n\n\n    GlobalModel.prototype.getSeriesCount = function () {\n      return this._componentsCount.get('series');\n    };\n    /**\n     * After filtering, series may be different\n     * frome raw series.\n     */\n\n\n    GlobalModel.prototype.eachSeries = function (cb, context) {\n      assertSeriesInitialized(this);\n      each(this._seriesIndices, function (rawSeriesIndex) {\n        var series = this._componentsMap.get('series')[rawSeriesIndex];\n\n        cb.call(context, series, rawSeriesIndex);\n      }, this);\n    };\n    /**\n     * Iterate raw series before filtered.\n     *\n     * @param {Function} cb\n     * @param {*} context\n     */\n\n\n    GlobalModel.prototype.eachRawSeries = function (cb, context) {\n      each(this._componentsMap.get('series'), function (series) {\n        series && cb.call(context, series, series.componentIndex);\n      });\n    };\n    /**\n     * After filtering, series may be different.\n     * frome raw series.\n     */\n\n\n    GlobalModel.prototype.eachSeriesByType = function (subType, cb, context) {\n      assertSeriesInitialized(this);\n      each(this._seriesIndices, function (rawSeriesIndex) {\n        var series = this._componentsMap.get('series')[rawSeriesIndex];\n\n        if (series.subType === subType) {\n          cb.call(context, series, rawSeriesIndex);\n        }\n      }, this);\n    };\n    /**\n     * Iterate raw series before filtered of given type.\n     */\n\n\n    GlobalModel.prototype.eachRawSeriesByType = function (subType, cb, context) {\n      return each(this.getSeriesByType(subType), cb, context);\n    };\n\n    GlobalModel.prototype.isSeriesFiltered = function (seriesModel) {\n      assertSeriesInitialized(this);\n      return this._seriesIndicesMap.get(seriesModel.componentIndex) == null;\n    };\n\n    GlobalModel.prototype.getCurrentSeriesIndices = function () {\n      return (this._seriesIndices || []).slice();\n    };\n\n    GlobalModel.prototype.filterSeries = function (cb, context) {\n      assertSeriesInitialized(this);\n      var newSeriesIndices = [];\n      each(this._seriesIndices, function (seriesRawIdx) {\n        var series = this._componentsMap.get('series')[seriesRawIdx];\n\n        cb.call(context, series, seriesRawIdx) && newSeriesIndices.push(seriesRawIdx);\n      }, this);\n      this._seriesIndices = newSeriesIndices;\n      this._seriesIndicesMap = createHashMap(newSeriesIndices);\n    };\n\n    GlobalModel.prototype.restoreData = function (payload) {\n      reCreateSeriesIndices(this);\n      var componentsMap = this._componentsMap;\n      var componentTypes = [];\n      componentsMap.each(function (components, componentType) {\n        if (ComponentModel.hasClass(componentType)) {\n          componentTypes.push(componentType);\n        }\n      });\n      ComponentModel.topologicalTravel(componentTypes, ComponentModel.getAllClassMainTypes(), function (componentType) {\n        each(componentsMap.get(componentType), function (component) {\n          if (component && (componentType !== 'series' || !isNotTargetSeries(component, payload))) {\n            component.restoreData();\n          }\n        });\n      });\n    };\n\n    GlobalModel.internalField = function () {\n      reCreateSeriesIndices = function (ecModel) {\n        var seriesIndices = ecModel._seriesIndices = [];\n        each(ecModel._componentsMap.get('series'), function (series) {\n          // series may have been removed by `replaceMerge`.\n          series && seriesIndices.push(series.componentIndex);\n        });\n        ecModel._seriesIndicesMap = createHashMap(seriesIndices);\n      };\n\n      assertSeriesInitialized = function (ecModel) {\n        // Components that use _seriesIndices should depends on series component,\n        // which make sure that their initialization is after series.\n        {\n          if (!ecModel._seriesIndices) {\n            throw new Error('Option should contains series.');\n          }\n        }\n      };\n\n      initBase = function (ecModel, baseOption) {\n        // Using OPTION_INNER_KEY to mark that this option can not be used outside,\n        // i.e. `chart.setOption(chart.getModel().option);` is forbiden.\n        ecModel.option = {};\n        ecModel.option[OPTION_INNER_KEY] = OPTION_INNER_VALUE; // Init with series: [], in case of calling findSeries method\n        // before series initialized.\n\n        ecModel._componentsMap = createHashMap({\n          series: []\n        });\n        ecModel._componentsCount = createHashMap(); // If user spefied `option.aria`, aria will be enable. This detection should be\n        // performed before theme and globalDefault merge.\n\n        var airaOption = baseOption.aria;\n\n        if (isObject(airaOption) && airaOption.enabled == null) {\n          airaOption.enabled = true;\n        }\n\n        mergeTheme(baseOption, ecModel._theme.option); // TODO Needs clone when merging to the unexisted property\n\n        merge(baseOption, globalDefault, false);\n\n        ecModel._mergeOption(baseOption, null);\n      };\n    }();\n\n    return GlobalModel;\n  }(Model);\n\n  function isNotTargetSeries(seriesModel, payload) {\n    if (payload) {\n      var index = payload.seriesIndex;\n      var id = payload.seriesId;\n      var name_1 = payload.seriesName;\n      return index != null && seriesModel.componentIndex !== index || id != null && seriesModel.id !== id || name_1 != null && seriesModel.name !== name_1;\n    }\n  }\n\n  function mergeTheme(option, theme) {\n    // PENDING\n    // NOT use `colorLayer` in theme if option has `color`\n    var notMergeColorLayer = option.color && !option.colorLayer;\n    each(theme, function (themeItem, name) {\n      if (name === 'colorLayer' && notMergeColorLayer) {\n        return;\n      } // If it is component model mainType, the model handles that merge later.\n      // otherwise, merge them here.\n\n\n      if (!ComponentModel.hasClass(name)) {\n        if (typeof themeItem === 'object') {\n          option[name] = !option[name] ? clone(themeItem) : merge(option[name], themeItem, false);\n        } else {\n          if (option[name] == null) {\n            option[name] = themeItem;\n          }\n        }\n      }\n    });\n  }\n\n  function queryByIdOrName(attr, idOrName, cmpts) {\n    // Here is a break from echarts4: string and number are\n    // treated as equal.\n    if (isArray(idOrName)) {\n      var keyMap_1 = createHashMap();\n      each(idOrName, function (idOrNameItem) {\n        if (idOrNameItem != null) {\n          var idName = convertOptionIdName(idOrNameItem, null);\n          idName != null && keyMap_1.set(idOrNameItem, true);\n        }\n      });\n      return filter(cmpts, function (cmpt) {\n        return cmpt && keyMap_1.get(cmpt[attr]);\n      });\n    } else {\n      var idName_1 = convertOptionIdName(idOrName, null);\n      return filter(cmpts, function (cmpt) {\n        return cmpt && idName_1 != null && cmpt[attr] === idName_1;\n      });\n    }\n  }\n\n  function filterBySubType(components, condition) {\n    // Using hasOwnProperty for restrict. Consider\n    // subType is undefined in user payload.\n    return condition.hasOwnProperty('subType') ? filter(components, function (cmpt) {\n      return cmpt && cmpt.subType === condition.subType;\n    }) : components;\n  }\n\n  function normalizeSetOptionInput(opts) {\n    var replaceMergeMainTypeMap = createHashMap();\n    opts && each(normalizeToArray(opts.replaceMerge), function (mainType) {\n      {\n        assert(ComponentModel.hasClass(mainType), '\"' + mainType + '\" is not valid component main type in \"replaceMerge\"');\n      }\n      replaceMergeMainTypeMap.set(mainType, true);\n    });\n    return {\n      replaceMergeMainTypeMap: replaceMergeMainTypeMap\n    };\n  }\n\n  mixin(GlobalModel, PaletteMixin);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var availableMethods = ['getDom', 'getZr', 'getWidth', 'getHeight', 'getDevicePixelRatio', 'dispatchAction', 'isSSR', 'isDisposed', 'on', 'off', 'getDataURL', 'getConnectedDataURL', // 'getModel',\n  'getOption', // 'getViewOfComponentModel',\n  // 'getViewOfSeriesModel',\n  'getId', 'updateLabelLayout'];\n\n  var ExtensionAPI =\n  /** @class */\n  function () {\n    function ExtensionAPI(ecInstance) {\n      each(availableMethods, function (methodName) {\n        this[methodName] = bind(ecInstance[methodName], ecInstance);\n      }, this);\n    }\n\n    return ExtensionAPI;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var coordinateSystemCreators = {};\n\n  var CoordinateSystemManager =\n  /** @class */\n  function () {\n    function CoordinateSystemManager() {\n      this._coordinateSystems = [];\n    }\n\n    CoordinateSystemManager.prototype.create = function (ecModel, api) {\n      var coordinateSystems = [];\n      each(coordinateSystemCreators, function (creater, type) {\n        var list = creater.create(ecModel, api);\n        coordinateSystems = coordinateSystems.concat(list || []);\n      });\n      this._coordinateSystems = coordinateSystems;\n    };\n\n    CoordinateSystemManager.prototype.update = function (ecModel, api) {\n      each(this._coordinateSystems, function (coordSys) {\n        coordSys.update && coordSys.update(ecModel, api);\n      });\n    };\n\n    CoordinateSystemManager.prototype.getCoordinateSystems = function () {\n      return this._coordinateSystems.slice();\n    };\n\n    CoordinateSystemManager.register = function (type, creator) {\n      coordinateSystemCreators[type] = creator;\n    };\n\n    CoordinateSystemManager.get = function (type) {\n      return coordinateSystemCreators[type];\n    };\n\n    return CoordinateSystemManager;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var QUERY_REG = /^(min|max)?(.+)$/; // Key: mainType\n  // type FakeComponentsMap = HashMap<(MappingExistingItem & { subType: string })[]>;\n\n  /**\n   * TERM EXPLANATIONS:\n   * See `ECOption` and `ECUnitOption` in `src/util/types.ts`.\n   */\n\n  var OptionManager =\n  /** @class */\n  function () {\n    // timeline.notMerge is not supported in ec3. Firstly there is rearly\n    // case that notMerge is needed. Secondly supporting 'notMerge' requires\n    // rawOption cloned and backuped when timeline changed, which does no\n    // good to performance. What's more, that both timeline and setOption\n    // method supply 'notMerge' brings complex and some problems.\n    // Consider this case:\n    // (step1) chart.setOption({timeline: {notMerge: false}, ...}, false);\n    // (step2) chart.setOption({timeline: {notMerge: true}, ...}, false);\n    function OptionManager(api) {\n      this._timelineOptions = [];\n      this._mediaList = [];\n      /**\n       * -1, means default.\n       * empty means no media.\n       */\n\n      this._currentMediaIndices = [];\n      this._api = api;\n    }\n\n    OptionManager.prototype.setOption = function (rawOption, optionPreprocessorFuncs, opt) {\n      if (rawOption) {\n        // That set dat primitive is dangerous if user reuse the data when setOption again.\n        each(normalizeToArray(rawOption.series), function (series) {\n          series && series.data && isTypedArray(series.data) && setAsPrimitive(series.data);\n        });\n        each(normalizeToArray(rawOption.dataset), function (dataset) {\n          dataset && dataset.source && isTypedArray(dataset.source) && setAsPrimitive(dataset.source);\n        });\n      } // Caution: some series modify option data, if do not clone,\n      // it should ensure that the repeat modify correctly\n      // (create a new object when modify itself).\n\n\n      rawOption = clone(rawOption); // FIXME\n      // If some property is set in timeline options or media option but\n      // not set in baseOption, a warning should be given.\n\n      var optionBackup = this._optionBackup;\n      var newParsedOption = parseRawOption(rawOption, optionPreprocessorFuncs, !optionBackup);\n      this._newBaseOption = newParsedOption.baseOption; // For setOption at second time (using merge mode);\n\n      if (optionBackup) {\n        // FIXME\n        // the restore merge solution is essentially incorrect.\n        // the mapping can not be 100% consistent with ecModel, which probably brings\n        // potential bug!\n        // The first merge is delayed, becuase in most cases, users do not call `setOption` twice.\n        // let fakeCmptsMap = this._fakeCmptsMap;\n        // if (!fakeCmptsMap) {\n        //     fakeCmptsMap = this._fakeCmptsMap = createHashMap();\n        //     mergeToBackupOption(fakeCmptsMap, null, optionBackup.baseOption, null);\n        // }\n        // mergeToBackupOption(\n        //     fakeCmptsMap, optionBackup.baseOption, newParsedOption.baseOption, opt\n        // );\n        // For simplicity, timeline options and media options do not support merge,\n        // that is, if you `setOption` twice and both has timeline options, the latter\n        // timeline opitons will not be merged to the formers, but just substitude them.\n        if (newParsedOption.timelineOptions.length) {\n          optionBackup.timelineOptions = newParsedOption.timelineOptions;\n        }\n\n        if (newParsedOption.mediaList.length) {\n          optionBackup.mediaList = newParsedOption.mediaList;\n        }\n\n        if (newParsedOption.mediaDefault) {\n          optionBackup.mediaDefault = newParsedOption.mediaDefault;\n        }\n      } else {\n        this._optionBackup = newParsedOption;\n      }\n    };\n\n    OptionManager.prototype.mountOption = function (isRecreate) {\n      var optionBackup = this._optionBackup;\n      this._timelineOptions = optionBackup.timelineOptions;\n      this._mediaList = optionBackup.mediaList;\n      this._mediaDefault = optionBackup.mediaDefault;\n      this._currentMediaIndices = [];\n      return clone(isRecreate // this._optionBackup.baseOption, which is created at the first `setOption`\n      // called, and is merged into every new option by inner method `mergeToBackupOption`\n      // each time `setOption` called, can be only used in `isRecreate`, because\n      // its reliability is under suspicion. In other cases option merge is\n      // performed by `model.mergeOption`.\n      ? optionBackup.baseOption : this._newBaseOption);\n    };\n\n    OptionManager.prototype.getTimelineOption = function (ecModel) {\n      var option;\n      var timelineOptions = this._timelineOptions;\n\n      if (timelineOptions.length) {\n        // getTimelineOption can only be called after ecModel inited,\n        // so we can get currentIndex from timelineModel.\n        var timelineModel = ecModel.getComponent('timeline');\n\n        if (timelineModel) {\n          option = clone( // FIXME:TS as TimelineModel or quivlant interface\n          timelineOptions[timelineModel.getCurrentIndex()]);\n        }\n      }\n\n      return option;\n    };\n\n    OptionManager.prototype.getMediaOption = function (ecModel) {\n      var ecWidth = this._api.getWidth();\n\n      var ecHeight = this._api.getHeight();\n\n      var mediaList = this._mediaList;\n      var mediaDefault = this._mediaDefault;\n      var indices = [];\n      var result = []; // No media defined.\n\n      if (!mediaList.length && !mediaDefault) {\n        return result;\n      } // Multi media may be applied, the latter defined media has higher priority.\n\n\n      for (var i = 0, len = mediaList.length; i < len; i++) {\n        if (applyMediaQuery(mediaList[i].query, ecWidth, ecHeight)) {\n          indices.push(i);\n        }\n      } // FIXME\n      // Whether mediaDefault should force users to provide? Otherwise\n      // the change by media query can not be recorvered.\n\n\n      if (!indices.length && mediaDefault) {\n        indices = [-1];\n      }\n\n      if (indices.length && !indicesEquals(indices, this._currentMediaIndices)) {\n        result = map(indices, function (index) {\n          return clone(index === -1 ? mediaDefault.option : mediaList[index].option);\n        });\n      } // Otherwise return nothing.\n\n\n      this._currentMediaIndices = indices;\n      return result;\n    };\n\n    return OptionManager;\n  }();\n  /**\n   * [RAW_OPTION_PATTERNS]\n   * (Note: \"series: []\" represents all other props in `ECUnitOption`)\n   *\n   * (1) No prop \"baseOption\" declared:\n   * Root option is used as \"baseOption\" (except prop \"options\" and \"media\").\n   * ```js\n   * option = {\n   *     series: [],\n   *     timeline: {},\n   *     options: [],\n   * };\n   * option = {\n   *     series: [],\n   *     media: {},\n   * };\n   * option = {\n   *     series: [],\n   *     timeline: {},\n   *     options: [],\n   *     media: {},\n   * }\n   * ```\n   *\n   * (2) Prop \"baseOption\" declared:\n   * If \"baseOption\" declared, `ECUnitOption` props can only be declared\n   * inside \"baseOption\" except prop \"timeline\" (compat ec2).\n   * ```js\n   * option = {\n   *     baseOption: {\n   *         timeline: {},\n   *         series: [],\n   *     },\n   *     options: []\n   * };\n   * option = {\n   *     baseOption: {\n   *         series: [],\n   *     },\n   *     media: []\n   * };\n   * option = {\n   *     baseOption: {\n   *         timeline: {},\n   *         series: [],\n   *     },\n   *     options: []\n   *     media: []\n   * };\n   * option = {\n   *     // ec3 compat ec2: allow (only) `timeline` declared\n   *     // outside baseOption. Keep this setting for compat.\n   *     timeline: {},\n   *     baseOption: {\n   *         series: [],\n   *     },\n   *     options: [],\n   *     media: []\n   * };\n   * ```\n   */\n\n\n  function parseRawOption( // `rawOption` May be modified\n  rawOption, optionPreprocessorFuncs, isNew) {\n    var mediaList = [];\n    var mediaDefault;\n    var baseOption;\n    var declaredBaseOption = rawOption.baseOption; // Compatible with ec2, [RAW_OPTION_PATTERNS] above.\n\n    var timelineOnRoot = rawOption.timeline;\n    var timelineOptionsOnRoot = rawOption.options;\n    var mediaOnRoot = rawOption.media;\n    var hasMedia = !!rawOption.media;\n    var hasTimeline = !!(timelineOptionsOnRoot || timelineOnRoot || declaredBaseOption && declaredBaseOption.timeline);\n\n    if (declaredBaseOption) {\n      baseOption = declaredBaseOption; // For merge option.\n\n      if (!baseOption.timeline) {\n        baseOption.timeline = timelineOnRoot;\n      }\n    } // For convenience, enable to use the root option as the `baseOption`:\n    // `{ ...normalOptionProps, media: [{ ... }, { ... }] }`\n    else {\n        if (hasTimeline || hasMedia) {\n          rawOption.options = rawOption.media = null;\n        }\n\n        baseOption = rawOption;\n      }\n\n    if (hasMedia) {\n      if (isArray(mediaOnRoot)) {\n        each(mediaOnRoot, function (singleMedia) {\n          {\n            // Real case of wrong config.\n            if (singleMedia && !singleMedia.option && isObject(singleMedia.query) && isObject(singleMedia.query.option)) {\n              error('Illegal media option. Must be like { media: [ { query: {}, option: {} } ] }');\n            }\n          }\n\n          if (singleMedia && singleMedia.option) {\n            if (singleMedia.query) {\n              mediaList.push(singleMedia);\n            } else if (!mediaDefault) {\n              // Use the first media default.\n              mediaDefault = singleMedia;\n            }\n          }\n        });\n      } else {\n        {\n          // Real case of wrong config.\n          error('Illegal media option. Must be an array. Like { media: [ {...}, {...} ] }');\n        }\n      }\n    }\n\n    doPreprocess(baseOption);\n    each(timelineOptionsOnRoot, function (option) {\n      return doPreprocess(option);\n    });\n    each(mediaList, function (media) {\n      return doPreprocess(media.option);\n    });\n\n    function doPreprocess(option) {\n      each(optionPreprocessorFuncs, function (preProcess) {\n        preProcess(option, isNew);\n      });\n    }\n\n    return {\n      baseOption: baseOption,\n      timelineOptions: timelineOptionsOnRoot || [],\n      mediaDefault: mediaDefault,\n      mediaList: mediaList\n    };\n  }\n  /**\n   * @see <http://www.w3.org/TR/css3-mediaqueries/#media1>\n   * Support: width, height, aspectRatio\n   * Can use max or min as prefix.\n   */\n\n\n  function applyMediaQuery(query, ecWidth, ecHeight) {\n    var realMap = {\n      width: ecWidth,\n      height: ecHeight,\n      aspectratio: ecWidth / ecHeight // lowser case for convenientce.\n\n    };\n    var applicatable = true;\n    each(query, function (value, attr) {\n      var matched = attr.match(QUERY_REG);\n\n      if (!matched || !matched[1] || !matched[2]) {\n        return;\n      }\n\n      var operator = matched[1];\n      var realAttr = matched[2].toLowerCase();\n\n      if (!compare(realMap[realAttr], value, operator)) {\n        applicatable = false;\n      }\n    });\n    return applicatable;\n  }\n\n  function compare(real, expect, operator) {\n    if (operator === 'min') {\n      return real >= expect;\n    } else if (operator === 'max') {\n      return real <= expect;\n    } else {\n      // Equals\n      return real === expect;\n    }\n  }\n\n  function indicesEquals(indices1, indices2) {\n    // indices is always order by asc and has only finite number.\n    return indices1.join(',') === indices2.join(',');\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var each$2 = each;\n  var isObject$1 = isObject;\n  var POSSIBLE_STYLES = ['areaStyle', 'lineStyle', 'nodeStyle', 'linkStyle', 'chordStyle', 'label', 'labelLine'];\n\n  function compatEC2ItemStyle(opt) {\n    var itemStyleOpt = opt && opt.itemStyle;\n\n    if (!itemStyleOpt) {\n      return;\n    }\n\n    for (var i = 0, len = POSSIBLE_STYLES.length; i < len; i++) {\n      var styleName = POSSIBLE_STYLES[i];\n      var normalItemStyleOpt = itemStyleOpt.normal;\n      var emphasisItemStyleOpt = itemStyleOpt.emphasis;\n\n      if (normalItemStyleOpt && normalItemStyleOpt[styleName]) {\n        {\n          deprecateReplaceLog(\"itemStyle.normal.\" + styleName, styleName);\n        }\n        opt[styleName] = opt[styleName] || {};\n\n        if (!opt[styleName].normal) {\n          opt[styleName].normal = normalItemStyleOpt[styleName];\n        } else {\n          merge(opt[styleName].normal, normalItemStyleOpt[styleName]);\n        }\n\n        normalItemStyleOpt[styleName] = null;\n      }\n\n      if (emphasisItemStyleOpt && emphasisItemStyleOpt[styleName]) {\n        {\n          deprecateReplaceLog(\"itemStyle.emphasis.\" + styleName, \"emphasis.\" + styleName);\n        }\n        opt[styleName] = opt[styleName] || {};\n\n        if (!opt[styleName].emphasis) {\n          opt[styleName].emphasis = emphasisItemStyleOpt[styleName];\n        } else {\n          merge(opt[styleName].emphasis, emphasisItemStyleOpt[styleName]);\n        }\n\n        emphasisItemStyleOpt[styleName] = null;\n      }\n    }\n  }\n\n  function convertNormalEmphasis(opt, optType, useExtend) {\n    if (opt && opt[optType] && (opt[optType].normal || opt[optType].emphasis)) {\n      var normalOpt = opt[optType].normal;\n      var emphasisOpt = opt[optType].emphasis;\n\n      if (normalOpt) {\n        {\n          // eslint-disable-next-line max-len\n          deprecateLog(\"'normal' hierarchy in \" + optType + \" has been removed since 4.0. All style properties are configured in \" + optType + \" directly now.\");\n        } // Timeline controlStyle has other properties besides normal and emphasis\n\n        if (useExtend) {\n          opt[optType].normal = opt[optType].emphasis = null;\n          defaults(opt[optType], normalOpt);\n        } else {\n          opt[optType] = normalOpt;\n        }\n      }\n\n      if (emphasisOpt) {\n        {\n          deprecateLog(optType + \".emphasis has been changed to emphasis.\" + optType + \" since 4.0\");\n        }\n        opt.emphasis = opt.emphasis || {};\n        opt.emphasis[optType] = emphasisOpt; // Also compat the case user mix the style and focus together in ec3 style\n        // for example: { itemStyle: { normal: {}, emphasis: {focus, shadowBlur} } }\n\n        if (emphasisOpt.focus) {\n          opt.emphasis.focus = emphasisOpt.focus;\n        }\n\n        if (emphasisOpt.blurScope) {\n          opt.emphasis.blurScope = emphasisOpt.blurScope;\n        }\n      }\n    }\n  }\n\n  function removeEC3NormalStatus(opt) {\n    convertNormalEmphasis(opt, 'itemStyle');\n    convertNormalEmphasis(opt, 'lineStyle');\n    convertNormalEmphasis(opt, 'areaStyle');\n    convertNormalEmphasis(opt, 'label');\n    convertNormalEmphasis(opt, 'labelLine'); // treemap\n\n    convertNormalEmphasis(opt, 'upperLabel'); // graph\n\n    convertNormalEmphasis(opt, 'edgeLabel');\n  }\n\n  function compatTextStyle(opt, propName) {\n    // Check whether is not object (string\\null\\undefined ...)\n    var labelOptSingle = isObject$1(opt) && opt[propName];\n    var textStyle = isObject$1(labelOptSingle) && labelOptSingle.textStyle;\n\n    if (textStyle) {\n      {\n        // eslint-disable-next-line max-len\n        deprecateLog(\"textStyle hierarchy in \" + propName + \" has been removed since 4.0. All textStyle properties are configured in \" + propName + \" directly now.\");\n      }\n\n      for (var i = 0, len = TEXT_STYLE_OPTIONS.length; i < len; i++) {\n        var textPropName = TEXT_STYLE_OPTIONS[i];\n\n        if (textStyle.hasOwnProperty(textPropName)) {\n          labelOptSingle[textPropName] = textStyle[textPropName];\n        }\n      }\n    }\n  }\n\n  function compatEC3CommonStyles(opt) {\n    if (opt) {\n      removeEC3NormalStatus(opt);\n      compatTextStyle(opt, 'label');\n      opt.emphasis && compatTextStyle(opt.emphasis, 'label');\n    }\n  }\n\n  function processSeries(seriesOpt) {\n    if (!isObject$1(seriesOpt)) {\n      return;\n    }\n\n    compatEC2ItemStyle(seriesOpt);\n    removeEC3NormalStatus(seriesOpt);\n    compatTextStyle(seriesOpt, 'label'); // treemap\n\n    compatTextStyle(seriesOpt, 'upperLabel'); // graph\n\n    compatTextStyle(seriesOpt, 'edgeLabel');\n\n    if (seriesOpt.emphasis) {\n      compatTextStyle(seriesOpt.emphasis, 'label'); // treemap\n\n      compatTextStyle(seriesOpt.emphasis, 'upperLabel'); // graph\n\n      compatTextStyle(seriesOpt.emphasis, 'edgeLabel');\n    }\n\n    var markPoint = seriesOpt.markPoint;\n\n    if (markPoint) {\n      compatEC2ItemStyle(markPoint);\n      compatEC3CommonStyles(markPoint);\n    }\n\n    var markLine = seriesOpt.markLine;\n\n    if (markLine) {\n      compatEC2ItemStyle(markLine);\n      compatEC3CommonStyles(markLine);\n    }\n\n    var markArea = seriesOpt.markArea;\n\n    if (markArea) {\n      compatEC3CommonStyles(markArea);\n    }\n\n    var data = seriesOpt.data; // Break with ec3: if `setOption` again, there may be no `type` in option,\n    // then the backward compat based on option type will not be performed.\n\n    if (seriesOpt.type === 'graph') {\n      data = data || seriesOpt.nodes;\n      var edgeData = seriesOpt.links || seriesOpt.edges;\n\n      if (edgeData && !isTypedArray(edgeData)) {\n        for (var i = 0; i < edgeData.length; i++) {\n          compatEC3CommonStyles(edgeData[i]);\n        }\n      }\n\n      each(seriesOpt.categories, function (opt) {\n        removeEC3NormalStatus(opt);\n      });\n    }\n\n    if (data && !isTypedArray(data)) {\n      for (var i = 0; i < data.length; i++) {\n        compatEC3CommonStyles(data[i]);\n      }\n    } // mark point data\n\n\n    markPoint = seriesOpt.markPoint;\n\n    if (markPoint && markPoint.data) {\n      var mpData = markPoint.data;\n\n      for (var i = 0; i < mpData.length; i++) {\n        compatEC3CommonStyles(mpData[i]);\n      }\n    } // mark line data\n\n\n    markLine = seriesOpt.markLine;\n\n    if (markLine && markLine.data) {\n      var mlData = markLine.data;\n\n      for (var i = 0; i < mlData.length; i++) {\n        if (isArray(mlData[i])) {\n          compatEC3CommonStyles(mlData[i][0]);\n          compatEC3CommonStyles(mlData[i][1]);\n        } else {\n          compatEC3CommonStyles(mlData[i]);\n        }\n      }\n    } // Series\n\n\n    if (seriesOpt.type === 'gauge') {\n      compatTextStyle(seriesOpt, 'axisLabel');\n      compatTextStyle(seriesOpt, 'title');\n      compatTextStyle(seriesOpt, 'detail');\n    } else if (seriesOpt.type === 'treemap') {\n      convertNormalEmphasis(seriesOpt.breadcrumb, 'itemStyle');\n      each(seriesOpt.levels, function (opt) {\n        removeEC3NormalStatus(opt);\n      });\n    } else if (seriesOpt.type === 'tree') {\n      removeEC3NormalStatus(seriesOpt.leaves);\n    } // sunburst starts from ec4, so it does not need to compat levels.\n\n  }\n\n  function toArr(o) {\n    return isArray(o) ? o : o ? [o] : [];\n  }\n\n  function toObj(o) {\n    return (isArray(o) ? o[0] : o) || {};\n  }\n\n  function globalCompatStyle(option, isTheme) {\n    each$2(toArr(option.series), function (seriesOpt) {\n      isObject$1(seriesOpt) && processSeries(seriesOpt);\n    });\n    var axes = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'parallelAxis', 'radar'];\n    isTheme && axes.push('valueAxis', 'categoryAxis', 'logAxis', 'timeAxis');\n    each$2(axes, function (axisName) {\n      each$2(toArr(option[axisName]), function (axisOpt) {\n        if (axisOpt) {\n          compatTextStyle(axisOpt, 'axisLabel');\n          compatTextStyle(axisOpt.axisPointer, 'label');\n        }\n      });\n    });\n    each$2(toArr(option.parallel), function (parallelOpt) {\n      var parallelAxisDefault = parallelOpt && parallelOpt.parallelAxisDefault;\n      compatTextStyle(parallelAxisDefault, 'axisLabel');\n      compatTextStyle(parallelAxisDefault && parallelAxisDefault.axisPointer, 'label');\n    });\n    each$2(toArr(option.calendar), function (calendarOpt) {\n      convertNormalEmphasis(calendarOpt, 'itemStyle');\n      compatTextStyle(calendarOpt, 'dayLabel');\n      compatTextStyle(calendarOpt, 'monthLabel');\n      compatTextStyle(calendarOpt, 'yearLabel');\n    }); // radar.name.textStyle\n\n    each$2(toArr(option.radar), function (radarOpt) {\n      compatTextStyle(radarOpt, 'name'); // Use axisName instead of name because component has name property\n\n      if (radarOpt.name && radarOpt.axisName == null) {\n        radarOpt.axisName = radarOpt.name;\n        delete radarOpt.name;\n        {\n          deprecateLog('name property in radar component has been changed to axisName');\n        }\n      }\n\n      if (radarOpt.nameGap != null && radarOpt.axisNameGap == null) {\n        radarOpt.axisNameGap = radarOpt.nameGap;\n        delete radarOpt.nameGap;\n        {\n          deprecateLog('nameGap property in radar component has been changed to axisNameGap');\n        }\n      }\n\n      {\n        each$2(radarOpt.indicator, function (indicatorOpt) {\n          if (indicatorOpt.text) {\n            deprecateReplaceLog('text', 'name', 'radar.indicator');\n          }\n        });\n      }\n    });\n    each$2(toArr(option.geo), function (geoOpt) {\n      if (isObject$1(geoOpt)) {\n        compatEC3CommonStyles(geoOpt);\n        each$2(toArr(geoOpt.regions), function (regionObj) {\n          compatEC3CommonStyles(regionObj);\n        });\n      }\n    });\n    each$2(toArr(option.timeline), function (timelineOpt) {\n      compatEC3CommonStyles(timelineOpt);\n      convertNormalEmphasis(timelineOpt, 'label');\n      convertNormalEmphasis(timelineOpt, 'itemStyle');\n      convertNormalEmphasis(timelineOpt, 'controlStyle', true);\n      var data = timelineOpt.data;\n      isArray(data) && each(data, function (item) {\n        if (isObject(item)) {\n          convertNormalEmphasis(item, 'label');\n          convertNormalEmphasis(item, 'itemStyle');\n        }\n      });\n    });\n    each$2(toArr(option.toolbox), function (toolboxOpt) {\n      convertNormalEmphasis(toolboxOpt, 'iconStyle');\n      each$2(toolboxOpt.feature, function (featureOpt) {\n        convertNormalEmphasis(featureOpt, 'iconStyle');\n      });\n    });\n    compatTextStyle(toObj(option.axisPointer), 'label');\n    compatTextStyle(toObj(option.tooltip).axisPointer, 'label'); // Clean logs\n    // storedLogs = {};\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function get(opt, path) {\n    var pathArr = path.split(',');\n    var obj = opt;\n\n    for (var i = 0; i < pathArr.length; i++) {\n      obj = obj && obj[pathArr[i]];\n\n      if (obj == null) {\n        break;\n      }\n    }\n\n    return obj;\n  }\n\n  function set$1(opt, path, val, overwrite) {\n    var pathArr = path.split(',');\n    var obj = opt;\n    var key;\n    var i = 0;\n\n    for (; i < pathArr.length - 1; i++) {\n      key = pathArr[i];\n\n      if (obj[key] == null) {\n        obj[key] = {};\n      }\n\n      obj = obj[key];\n    }\n\n    if (overwrite || obj[pathArr[i]] == null) {\n      obj[pathArr[i]] = val;\n    }\n  }\n\n  function compatLayoutProperties(option) {\n    option && each(LAYOUT_PROPERTIES, function (prop) {\n      if (prop[0] in option && !(prop[1] in option)) {\n        option[prop[1]] = option[prop[0]];\n      }\n    });\n  }\n\n  var LAYOUT_PROPERTIES = [['x', 'left'], ['y', 'top'], ['x2', 'right'], ['y2', 'bottom']];\n  var COMPATITABLE_COMPONENTS = ['grid', 'geo', 'parallel', 'legend', 'toolbox', 'title', 'visualMap', 'dataZoom', 'timeline'];\n  var BAR_ITEM_STYLE_MAP = [['borderRadius', 'barBorderRadius'], ['borderColor', 'barBorderColor'], ['borderWidth', 'barBorderWidth']];\n\n  function compatBarItemStyle(option) {\n    var itemStyle = option && option.itemStyle;\n\n    if (itemStyle) {\n      for (var i = 0; i < BAR_ITEM_STYLE_MAP.length; i++) {\n        var oldName = BAR_ITEM_STYLE_MAP[i][1];\n        var newName = BAR_ITEM_STYLE_MAP[i][0];\n\n        if (itemStyle[oldName] != null) {\n          itemStyle[newName] = itemStyle[oldName];\n          {\n            deprecateReplaceLog(oldName, newName);\n          }\n        }\n      }\n    }\n  }\n\n  function compatPieLabel(option) {\n    if (!option) {\n      return;\n    }\n\n    if (option.alignTo === 'edge' && option.margin != null && option.edgeDistance == null) {\n      {\n        deprecateReplaceLog('label.margin', 'label.edgeDistance', 'pie');\n      }\n      option.edgeDistance = option.margin;\n    }\n  }\n\n  function compatSunburstState(option) {\n    if (!option) {\n      return;\n    }\n\n    if (option.downplay && !option.blur) {\n      option.blur = option.downplay;\n      {\n        deprecateReplaceLog('downplay', 'blur', 'sunburst');\n      }\n    }\n  }\n\n  function compatGraphFocus(option) {\n    if (!option) {\n      return;\n    }\n\n    if (option.focusNodeAdjacency != null) {\n      option.emphasis = option.emphasis || {};\n\n      if (option.emphasis.focus == null) {\n        {\n          deprecateReplaceLog('focusNodeAdjacency', 'emphasis: { focus: \\'adjacency\\'}', 'graph/sankey');\n        }\n        option.emphasis.focus = 'adjacency';\n      }\n    }\n  }\n\n  function traverseTree(data, cb) {\n    if (data) {\n      for (var i = 0; i < data.length; i++) {\n        cb(data[i]);\n        data[i] && traverseTree(data[i].children, cb);\n      }\n    }\n  }\n\n  function globalBackwardCompat(option, isTheme) {\n    globalCompatStyle(option, isTheme); // Make sure series array for model initialization.\n\n    option.series = normalizeToArray(option.series);\n    each(option.series, function (seriesOpt) {\n      if (!isObject(seriesOpt)) {\n        return;\n      }\n\n      var seriesType = seriesOpt.type;\n\n      if (seriesType === 'line') {\n        if (seriesOpt.clipOverflow != null) {\n          seriesOpt.clip = seriesOpt.clipOverflow;\n          {\n            deprecateReplaceLog('clipOverflow', 'clip', 'line');\n          }\n        }\n      } else if (seriesType === 'pie' || seriesType === 'gauge') {\n        if (seriesOpt.clockWise != null) {\n          seriesOpt.clockwise = seriesOpt.clockWise;\n          {\n            deprecateReplaceLog('clockWise', 'clockwise');\n          }\n        }\n\n        compatPieLabel(seriesOpt.label);\n        var data = seriesOpt.data;\n\n        if (data && !isTypedArray(data)) {\n          for (var i = 0; i < data.length; i++) {\n            compatPieLabel(data[i]);\n          }\n        }\n\n        if (seriesOpt.hoverOffset != null) {\n          seriesOpt.emphasis = seriesOpt.emphasis || {};\n\n          if (seriesOpt.emphasis.scaleSize = null) {\n            {\n              deprecateReplaceLog('hoverOffset', 'emphasis.scaleSize');\n            }\n            seriesOpt.emphasis.scaleSize = seriesOpt.hoverOffset;\n          }\n        }\n      } else if (seriesType === 'gauge') {\n        var pointerColor = get(seriesOpt, 'pointer.color');\n        pointerColor != null && set$1(seriesOpt, 'itemStyle.color', pointerColor);\n      } else if (seriesType === 'bar') {\n        compatBarItemStyle(seriesOpt);\n        compatBarItemStyle(seriesOpt.backgroundStyle);\n        compatBarItemStyle(seriesOpt.emphasis);\n        var data = seriesOpt.data;\n\n        if (data && !isTypedArray(data)) {\n          for (var i = 0; i < data.length; i++) {\n            if (typeof data[i] === 'object') {\n              compatBarItemStyle(data[i]);\n              compatBarItemStyle(data[i] && data[i].emphasis);\n            }\n          }\n        }\n      } else if (seriesType === 'sunburst') {\n        var highlightPolicy = seriesOpt.highlightPolicy;\n\n        if (highlightPolicy) {\n          seriesOpt.emphasis = seriesOpt.emphasis || {};\n\n          if (!seriesOpt.emphasis.focus) {\n            seriesOpt.emphasis.focus = highlightPolicy;\n            {\n              deprecateReplaceLog('highlightPolicy', 'emphasis.focus', 'sunburst');\n            }\n          }\n        }\n\n        compatSunburstState(seriesOpt);\n        traverseTree(seriesOpt.data, compatSunburstState);\n      } else if (seriesType === 'graph' || seriesType === 'sankey') {\n        compatGraphFocus(seriesOpt); // TODO nodes, edges?\n      } else if (seriesType === 'map') {\n        if (seriesOpt.mapType && !seriesOpt.map) {\n          {\n            deprecateReplaceLog('mapType', 'map', 'map');\n          }\n          seriesOpt.map = seriesOpt.mapType;\n        }\n\n        if (seriesOpt.mapLocation) {\n          {\n            deprecateLog('`mapLocation` is not used anymore.');\n          }\n          defaults(seriesOpt, seriesOpt.mapLocation);\n        }\n      }\n\n      if (seriesOpt.hoverAnimation != null) {\n        seriesOpt.emphasis = seriesOpt.emphasis || {};\n\n        if (seriesOpt.emphasis && seriesOpt.emphasis.scale == null) {\n          {\n            deprecateReplaceLog('hoverAnimation', 'emphasis.scale');\n          }\n          seriesOpt.emphasis.scale = seriesOpt.hoverAnimation;\n        }\n      }\n\n      compatLayoutProperties(seriesOpt);\n    }); // dataRange has changed to visualMap\n\n    if (option.dataRange) {\n      option.visualMap = option.dataRange;\n    }\n\n    each(COMPATITABLE_COMPONENTS, function (componentName) {\n      var options = option[componentName];\n\n      if (options) {\n        if (!isArray(options)) {\n          options = [options];\n        }\n\n        each(options, function (option) {\n          compatLayoutProperties(option);\n        });\n      }\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  //     data processing stage is blocked in stream.\n  //     See <module:echarts/stream/Scheduler#performDataProcessorTasks>\n  // (2) Only register once when import repeatedly.\n  //     Should be executed after series is filtered and before stack calculation.\n\n\n  function dataStack(ecModel) {\n    var stackInfoMap = createHashMap();\n    ecModel.eachSeries(function (seriesModel) {\n      var stack = seriesModel.get('stack'); // Compatible: when `stack` is set as '', do not stack.\n\n      if (stack) {\n        var stackInfoList = stackInfoMap.get(stack) || stackInfoMap.set(stack, []);\n        var data = seriesModel.getData();\n        var stackInfo = {\n          // Used for calculate axis extent automatically.\n          // TODO: Type getCalculationInfo return more specific type?\n          stackResultDimension: data.getCalculationInfo('stackResultDimension'),\n          stackedOverDimension: data.getCalculationInfo('stackedOverDimension'),\n          stackedDimension: data.getCalculationInfo('stackedDimension'),\n          stackedByDimension: data.getCalculationInfo('stackedByDimension'),\n          isStackedByIndex: data.getCalculationInfo('isStackedByIndex'),\n          data: data,\n          seriesModel: seriesModel\n        }; // If stacked on axis that do not support data stack.\n\n        if (!stackInfo.stackedDimension || !(stackInfo.isStackedByIndex || stackInfo.stackedByDimension)) {\n          return;\n        }\n\n        stackInfoList.length && data.setCalculationInfo('stackedOnSeries', stackInfoList[stackInfoList.length - 1].seriesModel);\n        stackInfoList.push(stackInfo);\n      }\n    });\n    stackInfoMap.each(calculateStack);\n  }\n\n  function calculateStack(stackInfoList) {\n    each(stackInfoList, function (targetStackInfo, idxInStack) {\n      var resultVal = [];\n      var resultNaN = [NaN, NaN];\n      var dims = [targetStackInfo.stackResultDimension, targetStackInfo.stackedOverDimension];\n      var targetData = targetStackInfo.data;\n      var isStackedByIndex = targetStackInfo.isStackedByIndex;\n      var stackStrategy = targetStackInfo.seriesModel.get('stackStrategy') || 'samesign'; // Should not write on raw data, because stack series model list changes\n      // depending on legend selection.\n\n      targetData.modify(dims, function (v0, v1, dataIndex) {\n        var sum = targetData.get(targetStackInfo.stackedDimension, dataIndex); // Consider `connectNulls` of line area, if value is NaN, stackedOver\n        // should also be NaN, to draw a appropriate belt area.\n\n        if (isNaN(sum)) {\n          return resultNaN;\n        }\n\n        var byValue;\n        var stackedDataRawIndex;\n\n        if (isStackedByIndex) {\n          stackedDataRawIndex = targetData.getRawIndex(dataIndex);\n        } else {\n          byValue = targetData.get(targetStackInfo.stackedByDimension, dataIndex);\n        } // If stackOver is NaN, chart view will render point on value start.\n\n\n        var stackedOver = NaN;\n\n        for (var j = idxInStack - 1; j >= 0; j--) {\n          var stackInfo = stackInfoList[j]; // Has been optimized by inverted indices on `stackedByDimension`.\n\n          if (!isStackedByIndex) {\n            stackedDataRawIndex = stackInfo.data.rawIndexOf(stackInfo.stackedByDimension, byValue);\n          }\n\n          if (stackedDataRawIndex >= 0) {\n            var val = stackInfo.data.getByRawIndex(stackInfo.stackResultDimension, stackedDataRawIndex); // Considering positive stack, negative stack and empty data\n\n            if (stackStrategy === 'all' // single stack group\n            || stackStrategy === 'positive' && val > 0 || stackStrategy === 'negative' && val < 0 || stackStrategy === 'samesign' && sum >= 0 && val > 0 // All positive stack\n            || stackStrategy === 'samesign' && sum <= 0 && val < 0 // All negative stack\n            ) {\n                // The sum has to be very small to be affected by the\n                // floating arithmetic problem. An incorrect result will probably\n                // cause axis min/max to be filtered incorrectly.\n                sum = addSafe(sum, val);\n                stackedOver = val;\n                break;\n              }\n          }\n        }\n\n        resultVal[0] = sum;\n        resultVal[1] = stackedOver;\n        return resultVal;\n      });\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // @inner\n\n\n  var SourceImpl =\n  /** @class */\n  function () {\n    function SourceImpl(fields) {\n      this.data = fields.data || (fields.sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS ? {} : []);\n      this.sourceFormat = fields.sourceFormat || SOURCE_FORMAT_UNKNOWN; // Visit config\n\n      this.seriesLayoutBy = fields.seriesLayoutBy || SERIES_LAYOUT_BY_COLUMN;\n      this.startIndex = fields.startIndex || 0;\n      this.dimensionsDetectedCount = fields.dimensionsDetectedCount;\n      this.metaRawOption = fields.metaRawOption;\n      var dimensionsDefine = this.dimensionsDefine = fields.dimensionsDefine;\n\n      if (dimensionsDefine) {\n        for (var i = 0; i < dimensionsDefine.length; i++) {\n          var dim = dimensionsDefine[i];\n\n          if (dim.type == null) {\n            if (guessOrdinal(this, i) === BE_ORDINAL.Must) {\n              dim.type = 'ordinal';\n            }\n          }\n        }\n      }\n    }\n\n    return SourceImpl;\n  }();\n\n  function isSourceInstance(val) {\n    return val instanceof SourceImpl;\n  }\n  /**\n   * Create a source from option.\n   * NOTE: Created source is immutable. Don't change any properties in it.\n   */\n\n\n  function createSource(sourceData, thisMetaRawOption, // can be null. If not provided, auto detect it from `sourceData`.\n  sourceFormat) {\n    sourceFormat = sourceFormat || detectSourceFormat(sourceData);\n    var seriesLayoutBy = thisMetaRawOption.seriesLayoutBy;\n    var determined = determineSourceDimensions(sourceData, sourceFormat, seriesLayoutBy, thisMetaRawOption.sourceHeader, thisMetaRawOption.dimensions);\n    var source = new SourceImpl({\n      data: sourceData,\n      sourceFormat: sourceFormat,\n      seriesLayoutBy: seriesLayoutBy,\n      dimensionsDefine: determined.dimensionsDefine,\n      startIndex: determined.startIndex,\n      dimensionsDetectedCount: determined.dimensionsDetectedCount,\n      metaRawOption: clone(thisMetaRawOption)\n    });\n    return source;\n  }\n  /**\n   * Wrap original series data for some compatibility cases.\n   */\n\n\n  function createSourceFromSeriesDataOption(data) {\n    return new SourceImpl({\n      data: data,\n      sourceFormat: isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL\n    });\n  }\n  /**\n   * Clone source but excludes source data.\n   */\n\n\n  function cloneSourceShallow(source) {\n    return new SourceImpl({\n      data: source.data,\n      sourceFormat: source.sourceFormat,\n      seriesLayoutBy: source.seriesLayoutBy,\n      dimensionsDefine: clone(source.dimensionsDefine),\n      startIndex: source.startIndex,\n      dimensionsDetectedCount: source.dimensionsDetectedCount\n    });\n  }\n  /**\n   * Note: An empty array will be detected as `SOURCE_FORMAT_ARRAY_ROWS`.\n   */\n\n\n  function detectSourceFormat(data) {\n    var sourceFormat = SOURCE_FORMAT_UNKNOWN;\n\n    if (isTypedArray(data)) {\n      sourceFormat = SOURCE_FORMAT_TYPED_ARRAY;\n    } else if (isArray(data)) {\n      // FIXME Whether tolerate null in top level array?\n      if (data.length === 0) {\n        sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n      }\n\n      for (var i = 0, len = data.length; i < len; i++) {\n        var item = data[i];\n\n        if (item == null) {\n          continue;\n        } else if (isArray(item)) {\n          sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n          break;\n        } else if (isObject(item)) {\n          sourceFormat = SOURCE_FORMAT_OBJECT_ROWS;\n          break;\n        }\n      }\n    } else if (isObject(data)) {\n      for (var key in data) {\n        if (hasOwn(data, key) && isArrayLike(data[key])) {\n          sourceFormat = SOURCE_FORMAT_KEYED_COLUMNS;\n          break;\n        }\n      }\n    }\n\n    return sourceFormat;\n  }\n  /**\n   * Determine the source definitions from data standalone dimensions definitions\n   * are not specified.\n   */\n\n\n  function determineSourceDimensions(data, sourceFormat, seriesLayoutBy, sourceHeader, // standalone raw dimensions definition, like:\n  // {\n  //     dimensions: ['aa', 'bb', { name: 'cc', type: 'time' }]\n  // }\n  // in `dataset` or `series`\n  dimensionsDefine) {\n    var dimensionsDetectedCount;\n    var startIndex; // PEDING: could data be null/undefined here?\n    // currently, if `dataset.source` not specified, error thrown.\n    // if `series.data` not specified, nothing rendered without error thrown.\n    // Should test these cases.\n\n    if (!data) {\n      return {\n        dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\n        startIndex: startIndex,\n        dimensionsDetectedCount: dimensionsDetectedCount\n      };\n    }\n\n    if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n      var dataArrayRows = data; // Rule: Most of the first line are string: it is header.\n      // Caution: consider a line with 5 string and 1 number,\n      // it still can not be sure it is a head, because the\n      // 5 string may be 5 values of category columns.\n\n      if (sourceHeader === 'auto' || sourceHeader == null) {\n        arrayRowsTravelFirst(function (val) {\n          // '-' is regarded as null/undefined.\n          if (val != null && val !== '-') {\n            if (isString(val)) {\n              startIndex == null && (startIndex = 1);\n            } else {\n              startIndex = 0;\n            }\n          } // 10 is an experience number, avoid long loop.\n\n        }, seriesLayoutBy, dataArrayRows, 10);\n      } else {\n        startIndex = isNumber(sourceHeader) ? sourceHeader : sourceHeader ? 1 : 0;\n      }\n\n      if (!dimensionsDefine && startIndex === 1) {\n        dimensionsDefine = [];\n        arrayRowsTravelFirst(function (val, index) {\n          dimensionsDefine[index] = val != null ? val + '' : '';\n        }, seriesLayoutBy, dataArrayRows, Infinity);\n      }\n\n      dimensionsDetectedCount = dimensionsDefine ? dimensionsDefine.length : seriesLayoutBy === SERIES_LAYOUT_BY_ROW ? dataArrayRows.length : dataArrayRows[0] ? dataArrayRows[0].length : null;\n    } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n      if (!dimensionsDefine) {\n        dimensionsDefine = objectRowsCollectDimensions(data);\n      }\n    } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n      if (!dimensionsDefine) {\n        dimensionsDefine = [];\n        each(data, function (colArr, key) {\n          dimensionsDefine.push(key);\n        });\n      }\n    } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n      var value0 = getDataItemValue(data[0]);\n      dimensionsDetectedCount = isArray(value0) && value0.length || 1;\n    } else if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n      {\n        assert(!!dimensionsDefine, 'dimensions must be given if data is TypedArray.');\n      }\n    }\n\n    return {\n      startIndex: startIndex,\n      dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\n      dimensionsDetectedCount: dimensionsDetectedCount\n    };\n  }\n\n  function objectRowsCollectDimensions(data) {\n    var firstIndex = 0;\n    var obj;\n\n    while (firstIndex < data.length && !(obj = data[firstIndex++])) {} // jshint ignore: line\n\n\n    if (obj) {\n      var dimensions_1 = [];\n      each(obj, function (value, key) {\n        dimensions_1.push(key);\n      });\n      return dimensions_1;\n    }\n  } // Consider dimensions defined like ['A', 'price', 'B', 'price', 'C', 'price'],\n  // which is reasonable. But dimension name is duplicated.\n  // Returns undefined or an array contains only object without null/undefiend or string.\n\n\n  function normalizeDimensionsOption(dimensionsDefine) {\n    if (!dimensionsDefine) {\n      // The meaning of null/undefined is different from empty array.\n      return;\n    }\n\n    var nameMap = createHashMap();\n    return map(dimensionsDefine, function (rawItem, index) {\n      rawItem = isObject(rawItem) ? rawItem : {\n        name: rawItem\n      }; // Other fields will be discarded.\n\n      var item = {\n        name: rawItem.name,\n        displayName: rawItem.displayName,\n        type: rawItem.type\n      }; // User can set null in dimensions.\n      // We dont auto specify name, othewise a given name may\n      // cause it be refered unexpectedly.\n\n      if (item.name == null) {\n        return item;\n      } // Also consider number form like 2012.\n\n\n      item.name += ''; // User may also specify displayName.\n      // displayName will always exists except user not\n      // specified or dim name is not specified or detected.\n      // (A auto generated dim name will not be used as\n      // displayName).\n\n      if (item.displayName == null) {\n        item.displayName = item.name;\n      }\n\n      var exist = nameMap.get(item.name);\n\n      if (!exist) {\n        nameMap.set(item.name, {\n          count: 1\n        });\n      } else {\n        item.name += '-' + exist.count++;\n      }\n\n      return item;\n    });\n  }\n\n  function arrayRowsTravelFirst(cb, seriesLayoutBy, data, maxLoop) {\n    if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n      for (var i = 0; i < data.length && i < maxLoop; i++) {\n        cb(data[i] ? data[i][0] : null, i);\n      }\n    } else {\n      var value0 = data[0] || [];\n\n      for (var i = 0; i < value0.length && i < maxLoop; i++) {\n        cb(value0[i], i);\n      }\n    }\n  }\n\n  function shouldRetrieveDataByName(source) {\n    var sourceFormat = source.sourceFormat;\n    return sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var _a;\n\n  var _b;\n\n  var _c; // TODO\n  // ??? refactor? check the outer usage of data provider.\n  // merge with defaultDimValueGetter?\n\n\n  var providerMethods;\n  var mountMethods;\n  /**\n   * If normal array used, mutable chunk size is supported.\n   * If typed array used, chunk size must be fixed.\n   */\n\n  var DefaultDataProvider =\n  /** @class */\n  function () {\n    function DefaultDataProvider(sourceParam, dimSize) {\n      // let source: Source;\n      var source = !isSourceInstance(sourceParam) ? createSourceFromSeriesDataOption(sourceParam) : sourceParam; // declare source is Source;\n\n      this._source = source;\n      var data = this._data = source.data; // Typed array. TODO IE10+?\n\n      if (source.sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n        {\n          if (dimSize == null) {\n            throw new Error('Typed array data must specify dimension size');\n          }\n        }\n        this._offset = 0;\n        this._dimSize = dimSize;\n        this._data = data;\n      }\n\n      mountMethods(this, data, source);\n    }\n\n    DefaultDataProvider.prototype.getSource = function () {\n      return this._source;\n    };\n\n    DefaultDataProvider.prototype.count = function () {\n      return 0;\n    };\n\n    DefaultDataProvider.prototype.getItem = function (idx, out) {\n      return;\n    };\n\n    DefaultDataProvider.prototype.appendData = function (newData) {};\n\n    DefaultDataProvider.prototype.clean = function () {};\n\n    DefaultDataProvider.protoInitialize = function () {\n      // PENDING: To avoid potential incompat (e.g., prototype\n      // is visited somewhere), still init them on prototype.\n      var proto = DefaultDataProvider.prototype;\n      proto.pure = false;\n      proto.persistent = true;\n    }();\n\n    DefaultDataProvider.internalField = function () {\n      var _a;\n\n      mountMethods = function (provider, data, source) {\n        var sourceFormat = source.sourceFormat;\n        var seriesLayoutBy = source.seriesLayoutBy;\n        var startIndex = source.startIndex;\n        var dimsDef = source.dimensionsDefine;\n        var methods = providerMethods[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n        {\n          assert(methods, 'Invalide sourceFormat: ' + sourceFormat);\n        }\n        extend(provider, methods);\n\n        if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n          provider.getItem = getItemForTypedArray;\n          provider.count = countForTypedArray;\n          provider.fillStorage = fillStorageForTypedArray;\n        } else {\n          var rawItemGetter = getRawSourceItemGetter(sourceFormat, seriesLayoutBy);\n          provider.getItem = bind(rawItemGetter, null, data, startIndex, dimsDef);\n          var rawCounter = getRawSourceDataCounter(sourceFormat, seriesLayoutBy);\n          provider.count = bind(rawCounter, null, data, startIndex, dimsDef);\n        }\n      };\n\n      var getItemForTypedArray = function (idx, out) {\n        idx = idx - this._offset;\n        out = out || [];\n        var data = this._data;\n        var dimSize = this._dimSize;\n        var offset = dimSize * idx;\n\n        for (var i = 0; i < dimSize; i++) {\n          out[i] = data[offset + i];\n        }\n\n        return out;\n      };\n\n      var fillStorageForTypedArray = function (start, end, storage, extent) {\n        var data = this._data;\n        var dimSize = this._dimSize;\n\n        for (var dim = 0; dim < dimSize; dim++) {\n          var dimExtent = extent[dim];\n          var min = dimExtent[0] == null ? Infinity : dimExtent[0];\n          var max = dimExtent[1] == null ? -Infinity : dimExtent[1];\n          var count = end - start;\n          var arr = storage[dim];\n\n          for (var i = 0; i < count; i++) {\n            // appendData with TypedArray will always do replace in provider.\n            var val = data[i * dimSize + dim];\n            arr[start + i] = val;\n            val < min && (min = val);\n            val > max && (max = val);\n          }\n\n          dimExtent[0] = min;\n          dimExtent[1] = max;\n        }\n      };\n\n      var countForTypedArray = function () {\n        return this._data ? this._data.length / this._dimSize : 0;\n      };\n\n      providerMethods = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = {\n        pure: true,\n        appendData: appendDataSimply\n      }, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = {\n        pure: true,\n        appendData: function () {\n          throw new Error('Do not support appendData when set seriesLayoutBy: \"row\".');\n        }\n      }, _a[SOURCE_FORMAT_OBJECT_ROWS] = {\n        pure: true,\n        appendData: appendDataSimply\n      }, _a[SOURCE_FORMAT_KEYED_COLUMNS] = {\n        pure: true,\n        appendData: function (newData) {\n          var data = this._data;\n          each(newData, function (newCol, key) {\n            var oldCol = data[key] || (data[key] = []);\n\n            for (var i = 0; i < (newCol || []).length; i++) {\n              oldCol.push(newCol[i]);\n            }\n          });\n        }\n      }, _a[SOURCE_FORMAT_ORIGINAL] = {\n        appendData: appendDataSimply\n      }, _a[SOURCE_FORMAT_TYPED_ARRAY] = {\n        persistent: false,\n        pure: true,\n        appendData: function (newData) {\n          {\n            assert(isTypedArray(newData), 'Added data must be TypedArray if data in initialization is TypedArray');\n          }\n          this._data = newData;\n        },\n        // Clean self if data is already used.\n        clean: function () {\n          // PENDING\n          this._offset += this.count();\n          this._data = null;\n        }\n      }, _a);\n\n      function appendDataSimply(newData) {\n        for (var i = 0; i < newData.length; i++) {\n          this._data.push(newData[i]);\n        }\n      }\n    }();\n\n    return DefaultDataProvider;\n  }();\n\n  var getItemSimply = function (rawData, startIndex, dimsDef, idx) {\n    return rawData[idx];\n  };\n\n  var rawSourceItemGetterMap = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef, idx) {\n    return rawData[idx + startIndex];\n  }, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef, idx, out) {\n    idx += startIndex;\n    var item = out || [];\n    var data = rawData;\n\n    for (var i = 0; i < data.length; i++) {\n      var row = data[i];\n      item[i] = row ? row[idx] : null;\n    }\n\n    return item;\n  }, _a[SOURCE_FORMAT_OBJECT_ROWS] = getItemSimply, _a[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef, idx, out) {\n    var item = out || [];\n\n    for (var i = 0; i < dimsDef.length; i++) {\n      var dimName = dimsDef[i].name;\n      {\n        if (dimName == null) {\n          throw new Error();\n        }\n      }\n      var col = rawData[dimName];\n      item[i] = col ? col[idx] : null;\n    }\n\n    return item;\n  }, _a[SOURCE_FORMAT_ORIGINAL] = getItemSimply, _a);\n\n  function getRawSourceItemGetter(sourceFormat, seriesLayoutBy) {\n    var method = rawSourceItemGetterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n    {\n      assert(method, 'Do not support get item on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\n    }\n    return method;\n  }\n\n  var countSimply = function (rawData, startIndex, dimsDef) {\n    return rawData.length;\n  };\n\n  var rawSourceDataCounterMap = (_b = {}, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef) {\n    return Math.max(0, rawData.length - startIndex);\n  }, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef) {\n    var row = rawData[0];\n    return row ? Math.max(0, row.length - startIndex) : 0;\n  }, _b[SOURCE_FORMAT_OBJECT_ROWS] = countSimply, _b[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef) {\n    var dimName = dimsDef[0].name;\n    {\n      if (dimName == null) {\n        throw new Error();\n      }\n    }\n    var col = rawData[dimName];\n    return col ? col.length : 0;\n  }, _b[SOURCE_FORMAT_ORIGINAL] = countSimply, _b);\n\n  function getRawSourceDataCounter(sourceFormat, seriesLayoutBy) {\n    var method = rawSourceDataCounterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n    {\n      assert(method, 'Do not suppport count on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\n    }\n    return method;\n  }\n\n  var getRawValueSimply = function (dataItem, dimIndex, property) {\n    return dataItem[dimIndex];\n  };\n\n  var rawSourceValueGetterMap = (_c = {}, _c[SOURCE_FORMAT_ARRAY_ROWS] = getRawValueSimply, _c[SOURCE_FORMAT_OBJECT_ROWS] = function (dataItem, dimIndex, property) {\n    return dataItem[property];\n  }, _c[SOURCE_FORMAT_KEYED_COLUMNS] = getRawValueSimply, _c[SOURCE_FORMAT_ORIGINAL] = function (dataItem, dimIndex, property) {\n    // FIXME: In some case (markpoint in geo (geo-map.html)),\n    // dataItem is {coord: [...]}\n    var value = getDataItemValue(dataItem);\n    return !(value instanceof Array) ? value : value[dimIndex];\n  }, _c[SOURCE_FORMAT_TYPED_ARRAY] = getRawValueSimply, _c);\n\n  function getRawSourceValueGetter(sourceFormat) {\n    var method = rawSourceValueGetterMap[sourceFormat];\n    {\n      assert(method, 'Do not suppport get value on \"' + sourceFormat + '\".');\n    }\n    return method;\n  }\n\n  function getMethodMapKey(sourceFormat, seriesLayoutBy) {\n    return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS ? sourceFormat + '_' + seriesLayoutBy : sourceFormat;\n  } // ??? FIXME can these logic be more neat: getRawValue, getRawDataItem,\n  // Consider persistent.\n  // Caution: why use raw value to display on label or tooltip?\n  // A reason is to avoid format. For example time value we do not know\n  // how to format is expected. More over, if stack is used, calculated\n  // value may be 0.91000000001, which have brings trouble to display.\n  // TODO: consider how to treat null/undefined/NaN when display?\n\n\n  function retrieveRawValue(data, dataIndex, // If dimIndex is null/undefined, return OptionDataItem.\n  // Otherwise, return OptionDataValue.\n  dim) {\n    if (!data) {\n      return;\n    } // Consider data may be not persistent.\n\n\n    var dataItem = data.getRawDataItem(dataIndex);\n\n    if (dataItem == null) {\n      return;\n    }\n\n    var store = data.getStore();\n    var sourceFormat = store.getSource().sourceFormat;\n\n    if (dim != null) {\n      var dimIndex = data.getDimensionIndex(dim);\n      var property = store.getDimensionProperty(dimIndex);\n      return getRawSourceValueGetter(sourceFormat)(dataItem, dimIndex, property);\n    } else {\n      var result = dataItem;\n\n      if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n        result = getDataItemValue(dataItem);\n      }\n\n      return result;\n    }\n  }\n  /**\n   * Compatible with some cases (in pie, map) like:\n   * data: [{name: 'xx', value: 5, selected: true}, ...]\n   * where only sourceFormat is 'original' and 'objectRows' supported.\n   *\n   * // TODO\n   * Supported detail options in data item when using 'arrayRows'.\n   *\n   * @param data\n   * @param dataIndex\n   * @param attr like 'selected'\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var DIMENSION_LABEL_REG = /\\{@(.+?)\\}/g;\n\n  var DataFormatMixin =\n  /** @class */\n  function () {\n    function DataFormatMixin() {}\n    /**\n     * Get params for formatter\n     */\n\n\n    DataFormatMixin.prototype.getDataParams = function (dataIndex, dataType) {\n      var data = this.getData(dataType);\n      var rawValue = this.getRawValue(dataIndex, dataType);\n      var rawDataIndex = data.getRawIndex(dataIndex);\n      var name = data.getName(dataIndex);\n      var itemOpt = data.getRawDataItem(dataIndex);\n      var style = data.getItemVisual(dataIndex, 'style');\n      var color = style && style[data.getItemVisual(dataIndex, 'drawType') || 'fill'];\n      var borderColor = style && style.stroke;\n      var mainType = this.mainType;\n      var isSeries = mainType === 'series';\n      var userOutput = data.userOutput && data.userOutput.get();\n      return {\n        componentType: mainType,\n        componentSubType: this.subType,\n        componentIndex: this.componentIndex,\n        seriesType: isSeries ? this.subType : null,\n        seriesIndex: this.seriesIndex,\n        seriesId: isSeries ? this.id : null,\n        seriesName: isSeries ? this.name : null,\n        name: name,\n        dataIndex: rawDataIndex,\n        data: itemOpt,\n        dataType: dataType,\n        value: rawValue,\n        color: color,\n        borderColor: borderColor,\n        dimensionNames: userOutput ? userOutput.fullDimensions : null,\n        encode: userOutput ? userOutput.encode : null,\n        // Param name list for mapping `a`, `b`, `c`, `d`, `e`\n        $vars: ['seriesName', 'name', 'value']\n      };\n    };\n    /**\n     * Format label\n     * @param dataIndex\n     * @param status 'normal' by default\n     * @param dataType\n     * @param labelDimIndex Only used in some chart that\n     *        use formatter in different dimensions, like radar.\n     * @param formatter Formatter given outside.\n     * @return return null/undefined if no formatter\n     */\n\n\n    DataFormatMixin.prototype.getFormattedLabel = function (dataIndex, status, dataType, labelDimIndex, formatter, extendParams) {\n      status = status || 'normal';\n      var data = this.getData(dataType);\n      var params = this.getDataParams(dataIndex, dataType);\n\n      if (extendParams) {\n        params.value = extendParams.interpolatedValue;\n      }\n\n      if (labelDimIndex != null && isArray(params.value)) {\n        params.value = params.value[labelDimIndex];\n      }\n\n      if (!formatter) {\n        var itemModel = data.getItemModel(dataIndex); // @ts-ignore\n\n        formatter = itemModel.get(status === 'normal' ? ['label', 'formatter'] : [status, 'label', 'formatter']);\n      }\n\n      if (isFunction(formatter)) {\n        params.status = status;\n        params.dimensionIndex = labelDimIndex;\n        return formatter(params);\n      } else if (isString(formatter)) {\n        var str = formatTpl(formatter, params); // Support 'aaa{@[3]}bbb{@product}ccc'.\n        // Do not support '}' in dim name util have to.\n\n        return str.replace(DIMENSION_LABEL_REG, function (origin, dimStr) {\n          var len = dimStr.length;\n          var dimLoose = dimStr;\n\n          if (dimLoose.charAt(0) === '[' && dimLoose.charAt(len - 1) === ']') {\n            dimLoose = +dimLoose.slice(1, len - 1); // Also support: '[]' => 0\n\n            {\n              if (isNaN(dimLoose)) {\n                error(\"Invalide label formatter: @\" + dimStr + \", only support @[0], @[1], @[2], ...\");\n              }\n            }\n          }\n\n          var val = retrieveRawValue(data, dataIndex, dimLoose);\n\n          if (extendParams && isArray(extendParams.interpolatedValue)) {\n            var dimIndex = data.getDimensionIndex(dimLoose);\n\n            if (dimIndex >= 0) {\n              val = extendParams.interpolatedValue[dimIndex];\n            }\n          }\n\n          return val != null ? val + '' : '';\n        });\n      }\n    };\n    /**\n     * Get raw value in option\n     */\n\n\n    DataFormatMixin.prototype.getRawValue = function (idx, dataType) {\n      return retrieveRawValue(this.getData(dataType), idx);\n    };\n    /**\n     * Should be implemented.\n     * @param {number} dataIndex\n     * @param {boolean} [multipleSeries=false]\n     * @param {string} [dataType]\n     */\n\n\n    DataFormatMixin.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n      // Empty function\n      return;\n    };\n\n    return DataFormatMixin;\n  }(); // PENDING: previously we accept this type when calling `formatTooltip`,\n  // but guess little chance has been used outside. Do we need to backward\n  // compat it?\n  // type TooltipFormatResultLegacyObject = {\n  //     // `html` means the markup language text, either in 'html' or 'richText'.\n  //     // The name `html` is not appropriate becuase in 'richText' it is not a HTML\n  //     // string. But still support it for backward compat.\n  //     html: string;\n  //     markers: Dictionary<ColorString>;\n  // };\n\n  /**\n   * For backward compat, normalize the return from `formatTooltip`.\n   */\n\n\n  function normalizeTooltipFormatResult(result) {\n    var markupText; // let markers: Dictionary<ColorString>;\n\n    var markupFragment;\n\n    if (isObject(result)) {\n      if (result.type) {\n        markupFragment = result;\n      } else {\n        {\n          console.warn('The return type of `formatTooltip` is not supported: ' + makePrintable(result));\n        }\n      } // else {\n      //     markupText = (result as TooltipFormatResultLegacyObject).html;\n      //     markers = (result as TooltipFormatResultLegacyObject).markers;\n      //     if (markersExisting) {\n      //         markers = zrUtil.merge(markersExisting, markers);\n      //     }\n      // }\n\n    } else {\n      markupText = result;\n    }\n\n    return {\n      text: markupText,\n      // markers: markers || markersExisting,\n      frag: markupFragment\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * @param {Object} define\n   * @return See the return of `createTask`.\n   */\n\n\n  function createTask(define) {\n    return new Task(define);\n  }\n\n  var Task =\n  /** @class */\n  function () {\n    function Task(define) {\n      define = define || {};\n      this._reset = define.reset;\n      this._plan = define.plan;\n      this._count = define.count;\n      this._onDirty = define.onDirty;\n      this._dirty = true;\n    }\n    /**\n     * @param step Specified step.\n     * @param skip Skip customer perform call.\n     * @param modBy Sampling window size.\n     * @param modDataCount Sampling count.\n     * @return whether unfinished.\n     */\n\n\n    Task.prototype.perform = function (performArgs) {\n      var upTask = this._upstream;\n      var skip = performArgs && performArgs.skip; // TODO some refactor.\n      // Pull data. Must pull data each time, because context.data\n      // may be updated by Series.setData.\n\n      if (this._dirty && upTask) {\n        var context = this.context;\n        context.data = context.outputData = upTask.context.outputData;\n      }\n\n      if (this.__pipeline) {\n        this.__pipeline.currentTask = this;\n      }\n\n      var planResult;\n\n      if (this._plan && !skip) {\n        planResult = this._plan(this.context);\n      } // Support sharding by mod, which changes the render sequence and makes the rendered graphic\n      // elements uniformed distributed when progress, especially when moving or zooming.\n\n\n      var lastModBy = normalizeModBy(this._modBy);\n      var lastModDataCount = this._modDataCount || 0;\n      var modBy = normalizeModBy(performArgs && performArgs.modBy);\n      var modDataCount = performArgs && performArgs.modDataCount || 0;\n\n      if (lastModBy !== modBy || lastModDataCount !== modDataCount) {\n        planResult = 'reset';\n      }\n\n      function normalizeModBy(val) {\n        !(val >= 1) && (val = 1); // jshint ignore:line\n\n        return val;\n      }\n\n      var forceFirstProgress;\n\n      if (this._dirty || planResult === 'reset') {\n        this._dirty = false;\n        forceFirstProgress = this._doReset(skip);\n      }\n\n      this._modBy = modBy;\n      this._modDataCount = modDataCount;\n      var step = performArgs && performArgs.step;\n\n      if (upTask) {\n        {\n          assert(upTask._outputDueEnd != null);\n        }\n        this._dueEnd = upTask._outputDueEnd;\n      } // DataTask or overallTask\n      else {\n          {\n            assert(!this._progress || this._count);\n          }\n          this._dueEnd = this._count ? this._count(this.context) : Infinity;\n        } // Note: Stubs, that its host overall task let it has progress, has progress.\n      // If no progress, pass index from upstream to downstream each time plan called.\n\n\n      if (this._progress) {\n        var start = this._dueIndex;\n        var end = Math.min(step != null ? this._dueIndex + step : Infinity, this._dueEnd);\n\n        if (!skip && (forceFirstProgress || start < end)) {\n          var progress = this._progress;\n\n          if (isArray(progress)) {\n            for (var i = 0; i < progress.length; i++) {\n              this._doProgress(progress[i], start, end, modBy, modDataCount);\n            }\n          } else {\n            this._doProgress(progress, start, end, modBy, modDataCount);\n          }\n        }\n\n        this._dueIndex = end; // If no `outputDueEnd`, assume that output data and\n        // input data is the same, so use `dueIndex` as `outputDueEnd`.\n\n        var outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : end;\n        {\n          // ??? Can not rollback.\n          assert(outputDueEnd >= this._outputDueEnd);\n        }\n        this._outputDueEnd = outputDueEnd;\n      } else {\n        // (1) Some overall task has no progress.\n        // (2) Stubs, that its host overall task do not let it has progress, has no progress.\n        // This should always be performed so it can be passed to downstream.\n        this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : this._dueEnd;\n      }\n\n      return this.unfinished();\n    };\n\n    Task.prototype.dirty = function () {\n      this._dirty = true;\n      this._onDirty && this._onDirty(this.context);\n    };\n\n    Task.prototype._doProgress = function (progress, start, end, modBy, modDataCount) {\n      iterator.reset(start, end, modBy, modDataCount);\n      this._callingProgress = progress;\n\n      this._callingProgress({\n        start: start,\n        end: end,\n        count: end - start,\n        next: iterator.next\n      }, this.context);\n    };\n\n    Task.prototype._doReset = function (skip) {\n      this._dueIndex = this._outputDueEnd = this._dueEnd = 0;\n      this._settedOutputEnd = null;\n      var progress;\n      var forceFirstProgress;\n\n      if (!skip && this._reset) {\n        progress = this._reset(this.context);\n\n        if (progress && progress.progress) {\n          forceFirstProgress = progress.forceFirstProgress;\n          progress = progress.progress;\n        } // To simplify no progress checking, array must has item.\n\n\n        if (isArray(progress) && !progress.length) {\n          progress = null;\n        }\n      }\n\n      this._progress = progress;\n      this._modBy = this._modDataCount = null;\n      var downstream = this._downstream;\n      downstream && downstream.dirty();\n      return forceFirstProgress;\n    };\n\n    Task.prototype.unfinished = function () {\n      return this._progress && this._dueIndex < this._dueEnd;\n    };\n    /**\n     * @param downTask The downstream task.\n     * @return The downstream task.\n     */\n\n\n    Task.prototype.pipe = function (downTask) {\n      {\n        assert(downTask && !downTask._disposed && downTask !== this);\n      } // If already downstream, do not dirty downTask.\n\n      if (this._downstream !== downTask || this._dirty) {\n        this._downstream = downTask;\n        downTask._upstream = this;\n        downTask.dirty();\n      }\n    };\n\n    Task.prototype.dispose = function () {\n      if (this._disposed) {\n        return;\n      }\n\n      this._upstream && (this._upstream._downstream = null);\n      this._downstream && (this._downstream._upstream = null);\n      this._dirty = false;\n      this._disposed = true;\n    };\n\n    Task.prototype.getUpstream = function () {\n      return this._upstream;\n    };\n\n    Task.prototype.getDownstream = function () {\n      return this._downstream;\n    };\n\n    Task.prototype.setOutputEnd = function (end) {\n      // This only happend in dataTask, dataZoom, map, currently.\n      // where dataZoom do not set end each time, but only set\n      // when reset. So we should record the setted end, in case\n      // that the stub of dataZoom perform again and earse the\n      // setted end by upstream.\n      this._outputDueEnd = this._settedOutputEnd = end;\n    };\n\n    return Task;\n  }();\n\n  var iterator = function () {\n    var end;\n    var current;\n    var modBy;\n    var modDataCount;\n    var winCount;\n    var it = {\n      reset: function (s, e, sStep, sCount) {\n        current = s;\n        end = e;\n        modBy = sStep;\n        modDataCount = sCount;\n        winCount = Math.ceil(modDataCount / modBy);\n        it.next = modBy > 1 && modDataCount > 0 ? modNext : sequentialNext;\n      }\n    };\n    return it;\n\n    function sequentialNext() {\n      return current < end ? current++ : null;\n    }\n\n    function modNext() {\n      var dataIndex = current % winCount * modBy + Math.ceil(current / winCount);\n      var result = current >= end ? null : dataIndex < modDataCount ? dataIndex // If modDataCount is smaller than data.count() (consider `appendData` case),\n      // Use normal linear rendering mode.\n      : current;\n      current++;\n      return result;\n    }\n  }(); ///////////////////////////////////////////////////////////\n  // For stream debug (Should be commented out after used!)\n  // @usage: printTask(this, 'begin');\n  // @usage: printTask(this, null, {someExtraProp});\n  // @usage: Use `__idxInPipeline` as conditional breakpiont.\n  //\n  // window.printTask = function (task: any, prefix: string, extra: { [key: string]: unknown }): void {\n  //     window.ecTaskUID == null && (window.ecTaskUID = 0);\n  //     task.uidDebug == null && (task.uidDebug = `task_${window.ecTaskUID++}`);\n  //     task.agent && task.agent.uidDebug == null && (task.agent.uidDebug = `task_${window.ecTaskUID++}`);\n  //     let props = [];\n  //     if (task.__pipeline) {\n  //         let val = `${task.__idxInPipeline}/${task.__pipeline.tail.__idxInPipeline} ${task.agent ? '(stub)' : ''}`;\n  //         props.push({text: '__idxInPipeline/total', value: val});\n  //     } else {\n  //         let stubCount = 0;\n  //         task.agentStubMap.each(() => stubCount++);\n  //         props.push({text: 'idx', value: `overall (stubs: ${stubCount})`});\n  //     }\n  //     props.push({text: 'uid', value: task.uidDebug});\n  //     if (task.__pipeline) {\n  //         props.push({text: 'pipelineId', value: task.__pipeline.id});\n  //         task.agent && props.push(\n  //             {text: 'stubFor', value: task.agent.uidDebug}\n  //         );\n  //     }\n  //     props.push(\n  //         {text: 'dirty', value: task._dirty},\n  //         {text: 'dueIndex', value: task._dueIndex},\n  //         {text: 'dueEnd', value: task._dueEnd},\n  //         {text: 'outputDueEnd', value: task._outputDueEnd}\n  //     );\n  //     if (extra) {\n  //         Object.keys(extra).forEach(key => {\n  //             props.push({text: key, value: extra[key]});\n  //         });\n  //     }\n  //     let args = ['color: blue'];\n  //     let msg = `%c[${prefix || 'T'}] %c` + props.map(item => (\n  //         args.push('color: green', 'color: red'),\n  //         `${item.text}: %c${item.value}`\n  //     )).join('%c, ');\n  //     console.log.apply(console, [msg].concat(args));\n  //     // console.log(this);\n  // };\n  // window.printPipeline = function (task: any, prefix: string) {\n  //     const pipeline = task.__pipeline;\n  //     let currTask = pipeline.head;\n  //     while (currTask) {\n  //         window.printTask(currTask, prefix);\n  //         currTask = currTask._downstream;\n  //     }\n  // };\n  // window.showChain = function (chainHeadTask) {\n  //     var chain = [];\n  //     var task = chainHeadTask;\n  //     while (task) {\n  //         chain.push({\n  //             task: task,\n  //             up: task._upstream,\n  //             down: task._downstream,\n  //             idxInPipeline: task.__idxInPipeline\n  //         });\n  //         task = task._downstream;\n  //     }\n  //     return chain;\n  // };\n  // window.findTaskInChain = function (task, chainHeadTask) {\n  //     let chain = window.showChain(chainHeadTask);\n  //     let result = [];\n  //     for (let i = 0; i < chain.length; i++) {\n  //         let chainItem = chain[i];\n  //         if (chainItem.task === task) {\n  //             result.push(i);\n  //         }\n  //     }\n  //     return result;\n  // };\n  // window.printChainAEachInChainB = function (chainHeadTaskA, chainHeadTaskB) {\n  //     let chainA = window.showChain(chainHeadTaskA);\n  //     for (let i = 0; i < chainA.length; i++) {\n  //         console.log('chainAIdx:', i, 'inChainB:', window.findTaskInChain(chainA[i].task, chainHeadTaskB));\n  //     }\n  // };\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Convert raw the value in to inner value in List.\n   *\n   * [Performance sensitive]\n   *\n   * [Caution]: this is the key logic of user value parser.\n   * For backward compatibiliy, do not modify it until have to!\n   */\n\n\n  function parseDataValue(value, // For high performance, do not omit the second param.\n  opt) {\n    // Performance sensitive.\n    var dimType = opt && opt.type;\n\n    if (dimType === 'ordinal') {\n      // If given value is a category string\n      return value;\n    }\n\n    if (dimType === 'time' // spead up when using timestamp\n    && !isNumber(value) && value != null && value !== '-') {\n      value = +parseDate(value);\n    } // dimType defaults 'number'.\n    // If dimType is not ordinal and value is null or undefined or NaN or '-',\n    // parse to NaN.\n    // number-like string (like ' 123 ') can be converted to a number.\n    // where null/undefined or other string will be converted to NaN.\n\n\n    return value == null || value === '' ? NaN // If string (like '-'), using '+' parse to NaN\n    // If object, also parse to NaN\n    : +value;\n  }\n\n  var valueParserMap = createHashMap({\n    'number': function (val) {\n      // Do not use `numericToNumber` here. We have by defualt `numericToNumber`.\n      // Here the number parser can have loose rule:\n      // enable to cut suffix: \"120px\" => 120, \"14%\" => 14.\n      return parseFloat(val);\n    },\n    'time': function (val) {\n      // return timestamp.\n      return +parseDate(val);\n    },\n    'trim': function (val) {\n      return isString(val) ? trim(val) : val;\n    }\n  });\n  var ORDER_COMPARISON_OP_MAP = {\n    lt: function (lval, rval) {\n      return lval < rval;\n    },\n    lte: function (lval, rval) {\n      return lval <= rval;\n    },\n    gt: function (lval, rval) {\n      return lval > rval;\n    },\n    gte: function (lval, rval) {\n      return lval >= rval;\n    }\n  };\n\n  var FilterOrderComparator =\n  /** @class */\n  function () {\n    function FilterOrderComparator(op, rval) {\n      if (!isNumber(rval)) {\n        var errMsg = '';\n        {\n          errMsg = 'rvalue of \"<\", \">\", \"<=\", \">=\" can only be number in filter.';\n        }\n        throwError(errMsg);\n      }\n\n      this._opFn = ORDER_COMPARISON_OP_MAP[op];\n      this._rvalFloat = numericToNumber(rval);\n    } // Performance sensitive.\n\n\n    FilterOrderComparator.prototype.evaluate = function (lval) {\n      // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\n      return isNumber(lval) ? this._opFn(lval, this._rvalFloat) : this._opFn(numericToNumber(lval), this._rvalFloat);\n    };\n\n    return FilterOrderComparator;\n  }();\n\n  var SortOrderComparator =\n  /** @class */\n  function () {\n    /**\n     * @param order by defualt: 'asc'\n     * @param incomparable by defualt: Always on the tail.\n     *        That is, if 'asc' => 'max', if 'desc' => 'min'\n     *        See the definition of \"incomparable\" in [SORT_COMPARISON_RULE]\n     */\n    function SortOrderComparator(order, incomparable) {\n      var isDesc = order === 'desc';\n      this._resultLT = isDesc ? 1 : -1;\n\n      if (incomparable == null) {\n        incomparable = isDesc ? 'min' : 'max';\n      }\n\n      this._incomparable = incomparable === 'min' ? -Infinity : Infinity;\n    } // See [SORT_COMPARISON_RULE].\n    // Performance sensitive.\n\n\n    SortOrderComparator.prototype.evaluate = function (lval, rval) {\n      // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\n      var lvalFloat = isNumber(lval) ? lval : numericToNumber(lval);\n      var rvalFloat = isNumber(rval) ? rval : numericToNumber(rval);\n      var lvalNotNumeric = isNaN(lvalFloat);\n      var rvalNotNumeric = isNaN(rvalFloat);\n\n      if (lvalNotNumeric) {\n        lvalFloat = this._incomparable;\n      }\n\n      if (rvalNotNumeric) {\n        rvalFloat = this._incomparable;\n      }\n\n      if (lvalNotNumeric && rvalNotNumeric) {\n        var lvalIsStr = isString(lval);\n        var rvalIsStr = isString(rval);\n\n        if (lvalIsStr) {\n          lvalFloat = rvalIsStr ? lval : 0;\n        }\n\n        if (rvalIsStr) {\n          rvalFloat = lvalIsStr ? rval : 0;\n        }\n      }\n\n      return lvalFloat < rvalFloat ? this._resultLT : lvalFloat > rvalFloat ? -this._resultLT : 0;\n    };\n\n    return SortOrderComparator;\n  }();\n\n  var FilterEqualityComparator =\n  /** @class */\n  function () {\n    function FilterEqualityComparator(isEq, rval) {\n      this._rval = rval;\n      this._isEQ = isEq;\n      this._rvalTypeof = typeof rval;\n      this._rvalFloat = numericToNumber(rval);\n    } // Performance sensitive.\n\n\n    FilterEqualityComparator.prototype.evaluate = function (lval) {\n      var eqResult = lval === this._rval;\n\n      if (!eqResult) {\n        var lvalTypeof = typeof lval;\n\n        if (lvalTypeof !== this._rvalTypeof && (lvalTypeof === 'number' || this._rvalTypeof === 'number')) {\n          eqResult = numericToNumber(lval) === this._rvalFloat;\n        }\n      }\n\n      return this._isEQ ? eqResult : !eqResult;\n    };\n\n    return FilterEqualityComparator;\n  }();\n  /**\n   * [FILTER_COMPARISON_RULE]\n   * `lt`|`lte`|`gt`|`gte`:\n   * + rval must be a number. And lval will be converted to number (`numericToNumber`) to compare.\n   * `eq`:\n   * + If same type, compare with `===`.\n   * + If there is one number, convert to number (`numericToNumber`) to compare.\n   * + Else return `false`.\n   * `ne`:\n   * + Not `eq`.\n   *\n   *\n   * [SORT_COMPARISON_RULE]\n   * All the values are grouped into three categories:\n   * + \"numeric\" (number and numeric string)\n   * + \"non-numeric-string\" (string that excluding numeric string)\n   * + \"others\"\n   * \"numeric\" vs \"numeric\": values are ordered by number order.\n   * \"non-numeric-string\" vs \"non-numeric-string\": values are ordered by ES spec (#sec-abstract-relational-comparison).\n   * \"others\" vs \"others\": do not change order (always return 0).\n   * \"numeric\" vs \"non-numeric-string\": \"non-numeric-string\" is treated as \"incomparable\".\n   * \"number\" vs \"others\": \"others\" is treated as \"incomparable\".\n   * \"non-numeric-string\" vs \"others\": \"others\" is treated as \"incomparable\".\n   * \"incomparable\" will be seen as -Infinity or Infinity (depends on the settings).\n   * MEMO:\n   *   non-numeric string sort make sence when need to put the items with the same tag together.\n   *   But if we support string sort, we still need to avoid the misleading like `'2' > '12'`,\n   *   So we treat \"numeric-string\" sorted by number order rather than string comparison.\n   *\n   *\n   * [CHECK_LIST_OF_THE_RULE_DESIGN]\n   * + Do not support string comparison until required. And also need to\n   *   void the misleading of \"2\" > \"12\".\n   * + Should avoid the misleading case:\n   *   `\" 22 \" gte \"22\"` is `true` but `\" 22 \" eq \"22\"` is `false`.\n   * + JS bad case should be avoided: null <= 0, [] <= 0, ' ' <= 0, ...\n   * + Only \"numeric\" can be converted to comparable number, otherwise converted to NaN.\n   *   See `util/number.ts#numericToNumber`.\n   *\n   * @return If `op` is not `RelationalOperator`, return null;\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * TODO: disable writable.\n   * This structure will be exposed to users.\n   */\n\n\n  var ExternalSource =\n  /** @class */\n  function () {\n    function ExternalSource() {}\n\n    ExternalSource.prototype.getRawData = function () {\n      // Only built-in transform available.\n      throw new Error('not supported');\n    };\n\n    ExternalSource.prototype.getRawDataItem = function (dataIndex) {\n      // Only built-in transform available.\n      throw new Error('not supported');\n    };\n\n    ExternalSource.prototype.cloneRawData = function () {\n      return;\n    };\n    /**\n     * @return If dimension not found, return null/undefined.\n     */\n\n\n    ExternalSource.prototype.getDimensionInfo = function (dim) {\n      return;\n    };\n    /**\n     * dimensions defined if and only if either:\n     * (a) dataset.dimensions are declared.\n     * (b) dataset data include dimensions definitions in data (detected or via specified `sourceHeader`).\n     * If dimensions are defined, `dimensionInfoAll` is corresponding to\n     * the defined dimensions.\n     * Otherwise, `dimensionInfoAll` is determined by data columns.\n     * @return Always return an array (even empty array).\n     */\n\n\n    ExternalSource.prototype.cloneAllDimensionInfo = function () {\n      return;\n    };\n\n    ExternalSource.prototype.count = function () {\n      return;\n    };\n    /**\n     * Only support by dimension index.\n     * No need to support by dimension name in transform function,\n     * becuase transform function is not case-specific, no need to use name literally.\n     */\n\n\n    ExternalSource.prototype.retrieveValue = function (dataIndex, dimIndex) {\n      return;\n    };\n\n    ExternalSource.prototype.retrieveValueFromItem = function (dataItem, dimIndex) {\n      return;\n    };\n\n    ExternalSource.prototype.convertValue = function (rawVal, dimInfo) {\n      return parseDataValue(rawVal, dimInfo);\n    };\n\n    return ExternalSource;\n  }();\n\n  function createExternalSource(internalSource, externalTransform) {\n    var extSource = new ExternalSource();\n    var data = internalSource.data;\n    var sourceFormat = extSource.sourceFormat = internalSource.sourceFormat;\n    var sourceHeaderCount = internalSource.startIndex;\n    var errMsg = '';\n\n    if (internalSource.seriesLayoutBy !== SERIES_LAYOUT_BY_COLUMN) {\n      // For the logic simplicity in transformer, only 'culumn' is\n      // supported in data transform. Otherwise, the `dimensionsDefine`\n      // might be detected by 'row', which probably confuses users.\n      {\n        errMsg = '`seriesLayoutBy` of upstream dataset can only be \"column\" in data transform.';\n      }\n      throwError(errMsg);\n    } // [MEMO]\n    // Create a new dimensions structure for exposing.\n    // Do not expose all dimension info to users directly.\n    // Becuase the dimension is probably auto detected from data and not might reliable.\n    // Should not lead the transformers to think that is relialbe and return it.\n    // See [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\n\n\n    var dimensions = [];\n    var dimsByName = {};\n    var dimsDef = internalSource.dimensionsDefine;\n\n    if (dimsDef) {\n      each(dimsDef, function (dimDef, idx) {\n        var name = dimDef.name;\n        var dimDefExt = {\n          index: idx,\n          name: name,\n          displayName: dimDef.displayName\n        };\n        dimensions.push(dimDefExt); // Users probably not sepcify dimension name. For simplicity, data transform\n        // do not generate dimension name.\n\n        if (name != null) {\n          // Dimension name should not be duplicated.\n          // For simplicity, data transform forbid name duplication, do not generate\n          // new name like module `completeDimensions.ts` did, but just tell users.\n          var errMsg_1 = '';\n\n          if (hasOwn(dimsByName, name)) {\n            {\n              errMsg_1 = 'dimension name \"' + name + '\" duplicated.';\n            }\n            throwError(errMsg_1);\n          }\n\n          dimsByName[name] = dimDefExt;\n        }\n      });\n    } // If dimension definitions are not defined and can not be detected.\n    // e.g., pure data `[[11, 22], ...]`.\n    else {\n        for (var i = 0; i < internalSource.dimensionsDetectedCount || 0; i++) {\n          // Do not generete name or anything others. The consequence process in\n          // `transform` or `series` probably have there own name generation strategry.\n          dimensions.push({\n            index: i\n          });\n        }\n      } // Implement public methods:\n\n\n    var rawItemGetter = getRawSourceItemGetter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\n\n    if (externalTransform.__isBuiltIn) {\n      extSource.getRawDataItem = function (dataIndex) {\n        return rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\n      };\n\n      extSource.getRawData = bind(getRawData, null, internalSource);\n    }\n\n    extSource.cloneRawData = bind(cloneRawData, null, internalSource);\n    var rawCounter = getRawSourceDataCounter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\n    extSource.count = bind(rawCounter, null, data, sourceHeaderCount, dimensions);\n    var rawValueGetter = getRawSourceValueGetter(sourceFormat);\n\n    extSource.retrieveValue = function (dataIndex, dimIndex) {\n      var rawItem = rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\n      return retrieveValueFromItem(rawItem, dimIndex);\n    };\n\n    var retrieveValueFromItem = extSource.retrieveValueFromItem = function (dataItem, dimIndex) {\n      if (dataItem == null) {\n        return;\n      }\n\n      var dimDef = dimensions[dimIndex]; // When `dimIndex` is `null`, `rawValueGetter` return the whole item.\n\n      if (dimDef) {\n        return rawValueGetter(dataItem, dimIndex, dimDef.name);\n      }\n    };\n\n    extSource.getDimensionInfo = bind(getDimensionInfo, null, dimensions, dimsByName);\n    extSource.cloneAllDimensionInfo = bind(cloneAllDimensionInfo, null, dimensions);\n    return extSource;\n  }\n\n  function getRawData(upstream) {\n    var sourceFormat = upstream.sourceFormat;\n\n    if (!isSupportedSourceFormat(sourceFormat)) {\n      var errMsg = '';\n      {\n        errMsg = '`getRawData` is not supported in source format ' + sourceFormat;\n      }\n      throwError(errMsg);\n    }\n\n    return upstream.data;\n  }\n\n  function cloneRawData(upstream) {\n    var sourceFormat = upstream.sourceFormat;\n    var data = upstream.data;\n\n    if (!isSupportedSourceFormat(sourceFormat)) {\n      var errMsg = '';\n      {\n        errMsg = '`cloneRawData` is not supported in source format ' + sourceFormat;\n      }\n      throwError(errMsg);\n    }\n\n    if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n      var result = [];\n\n      for (var i = 0, len = data.length; i < len; i++) {\n        // Not strictly clone for performance\n        result.push(data[i].slice());\n      }\n\n      return result;\n    } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n      var result = [];\n\n      for (var i = 0, len = data.length; i < len; i++) {\n        // Not strictly clone for performance\n        result.push(extend({}, data[i]));\n      }\n\n      return result;\n    }\n  }\n\n  function getDimensionInfo(dimensions, dimsByName, dim) {\n    if (dim == null) {\n      return;\n    } // Keep the same logic as `List::getDimension` did.\n\n\n    if (isNumber(dim) // If being a number-like string but not being defined a dimension name.\n    || !isNaN(dim) && !hasOwn(dimsByName, dim)) {\n      return dimensions[dim];\n    } else if (hasOwn(dimsByName, dim)) {\n      return dimsByName[dim];\n    }\n  }\n\n  function cloneAllDimensionInfo(dimensions) {\n    return clone(dimensions);\n  }\n\n  var externalTransformMap = createHashMap();\n\n  function registerExternalTransform(externalTransform) {\n    externalTransform = clone(externalTransform);\n    var type = externalTransform.type;\n    var errMsg = '';\n\n    if (!type) {\n      {\n        errMsg = 'Must have a `type` when `registerTransform`.';\n      }\n      throwError(errMsg);\n    }\n\n    var typeParsed = type.split(':');\n\n    if (typeParsed.length !== 2) {\n      {\n        errMsg = 'Name must include namespace like \"ns:regression\".';\n      }\n      throwError(errMsg);\n    } // Namespace 'echarts:xxx' is official namespace, where the transforms should\n    // be called directly via 'xxx' rather than 'echarts:xxx'.\n\n\n    var isBuiltIn = false;\n\n    if (typeParsed[0] === 'echarts') {\n      type = typeParsed[1];\n      isBuiltIn = true;\n    }\n\n    externalTransform.__isBuiltIn = isBuiltIn;\n    externalTransformMap.set(type, externalTransform);\n  }\n\n  function applyDataTransform(rawTransOption, sourceList, infoForPrint) {\n    var pipedTransOption = normalizeToArray(rawTransOption);\n    var pipeLen = pipedTransOption.length;\n    var errMsg = '';\n\n    if (!pipeLen) {\n      {\n        errMsg = 'If `transform` declared, it should at least contain one transform.';\n      }\n      throwError(errMsg);\n    }\n\n    for (var i = 0, len = pipeLen; i < len; i++) {\n      var transOption = pipedTransOption[i];\n      sourceList = applySingleDataTransform(transOption, sourceList, infoForPrint, pipeLen === 1 ? null : i); // piped transform only support single input, except the fist one.\n      // piped transform only support single output, except the last one.\n\n      if (i !== len - 1) {\n        sourceList.length = Math.max(sourceList.length, 1);\n      }\n    }\n\n    return sourceList;\n  }\n\n  function applySingleDataTransform(transOption, upSourceList, infoForPrint, // If `pipeIndex` is null/undefined, no piped transform.\n  pipeIndex) {\n    var errMsg = '';\n\n    if (!upSourceList.length) {\n      {\n        errMsg = 'Must have at least one upstream dataset.';\n      }\n      throwError(errMsg);\n    }\n\n    if (!isObject(transOption)) {\n      {\n        errMsg = 'transform declaration must be an object rather than ' + typeof transOption + '.';\n      }\n      throwError(errMsg);\n    }\n\n    var transType = transOption.type;\n    var externalTransform = externalTransformMap.get(transType);\n\n    if (!externalTransform) {\n      {\n        errMsg = 'Can not find transform on type \"' + transType + '\".';\n      }\n      throwError(errMsg);\n    } // Prepare source\n\n\n    var extUpSourceList = map(upSourceList, function (upSource) {\n      return createExternalSource(upSource, externalTransform);\n    });\n    var resultList = normalizeToArray(externalTransform.transform({\n      upstream: extUpSourceList[0],\n      upstreamList: extUpSourceList,\n      config: clone(transOption.config)\n    }));\n    {\n      if (transOption.print) {\n        var printStrArr = map(resultList, function (extSource) {\n          var pipeIndexStr = pipeIndex != null ? ' === pipe index: ' + pipeIndex : '';\n          return ['=== dataset index: ' + infoForPrint.datasetIndex + pipeIndexStr + ' ===', '- transform result data:', makePrintable(extSource.data), '- transform result dimensions:', makePrintable(extSource.dimensions)].join('\\n');\n        }).join('\\n');\n        log(printStrArr);\n      }\n    }\n    return map(resultList, function (result, resultIndex) {\n      var errMsg = '';\n\n      if (!isObject(result)) {\n        {\n          errMsg = 'A transform should not return some empty results.';\n        }\n        throwError(errMsg);\n      }\n\n      if (!result.data) {\n        {\n          errMsg = 'Transform result data should be not be null or undefined';\n        }\n        throwError(errMsg);\n      }\n\n      var sourceFormat = detectSourceFormat(result.data);\n\n      if (!isSupportedSourceFormat(sourceFormat)) {\n        {\n          errMsg = 'Transform result data should be array rows or object rows.';\n        }\n        throwError(errMsg);\n      }\n\n      var resultMetaRawOption;\n      var firstUpSource = upSourceList[0];\n      /**\n       * Intuitively, the end users known the content of the original `dataset.source`,\n       * calucating the transform result in mind.\n       * Suppose the original `dataset.source` is:\n       * ```js\n       * [\n       *     ['product', '2012', '2013', '2014', '2015'],\n       *     ['AAA', 41.1, 30.4, 65.1, 53.3],\n       *     ['BBB', 86.5, 92.1, 85.7, 83.1],\n       *     ['CCC', 24.1, 67.2, 79.5, 86.4]\n       * ]\n       * ```\n       * The dimension info have to be detected from the source data.\n       * Some of the transformers (like filter, sort) will follow the dimension info\n       * of upstream, while others use new dimensions (like aggregate).\n       * Transformer can output a field `dimensions` to define the its own output dimensions.\n       * We also allow transformers to ignore the output `dimensions` field, and\n       * inherit the upstream dimensions definition. It can reduce the burden of handling\n       * dimensions in transformers.\n       *\n       * See also [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\n       */\n\n      if (firstUpSource && resultIndex === 0 // If transformer returns `dimensions`, it means that the transformer has different\n      // dimensions definitions. We do not inherit anything from upstream.\n      && !result.dimensions) {\n        var startIndex = firstUpSource.startIndex; // We copy the header of upstream to the result becuase:\n        // (1) The returned data always does not contain header line and can not be used\n        // as dimension-detection. In this case we can not use \"detected dimensions\" of\n        // upstream directly, because it might be detected based on different `seriesLayoutBy`.\n        // (2) We should support that the series read the upstream source in `seriesLayoutBy: 'row'`.\n        // So the original detected header should be add to the result, otherwise they can not be read.\n\n        if (startIndex) {\n          result.data = firstUpSource.data.slice(0, startIndex).concat(result.data);\n        }\n\n        resultMetaRawOption = {\n          seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n          sourceHeader: startIndex,\n          dimensions: firstUpSource.metaRawOption.dimensions\n        };\n      } else {\n        resultMetaRawOption = {\n          seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n          sourceHeader: 0,\n          dimensions: result.dimensions\n        };\n      }\n\n      return createSource(result.data, resultMetaRawOption, null);\n    });\n  }\n\n  function isSupportedSourceFormat(sourceFormat) {\n    return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS || sourceFormat === SOURCE_FORMAT_OBJECT_ROWS;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var UNDEFINED = 'undefined';\n  /* global Float64Array, Int32Array, Uint32Array, Uint16Array */\n  // Caution: MUST not use `new CtorUint32Array(arr, 0, len)`, because the Ctor of array is\n  // different from the Ctor of typed array.\n\n  var CtorUint32Array = typeof Uint32Array === UNDEFINED ? Array : Uint32Array;\n  var CtorUint16Array = typeof Uint16Array === UNDEFINED ? Array : Uint16Array;\n  var CtorInt32Array = typeof Int32Array === UNDEFINED ? Array : Int32Array;\n  var CtorFloat64Array = typeof Float64Array === UNDEFINED ? Array : Float64Array;\n  /**\n   * Multi dimensional data store\n   */\n\n  var dataCtors = {\n    'float': CtorFloat64Array,\n    'int': CtorInt32Array,\n    // Ordinal data type can be string or int\n    'ordinal': Array,\n    'number': Array,\n    'time': CtorFloat64Array\n  };\n  var defaultDimValueGetters;\n\n  function getIndicesCtor(rawCount) {\n    // The possible max value in this._indicies is always this._rawCount despite of filtering.\n    return rawCount > 65535 ? CtorUint32Array : CtorUint16Array;\n  }\n\n  function getInitialExtent() {\n    return [Infinity, -Infinity];\n  }\n\n  function cloneChunk(originalChunk) {\n    var Ctor = originalChunk.constructor; // Only shallow clone is enough when Array.\n\n    return Ctor === Array ? originalChunk.slice() : new Ctor(originalChunk);\n  }\n\n  function prepareStore(store, dimIdx, dimType, end, append) {\n    var DataCtor = dataCtors[dimType || 'float'];\n\n    if (append) {\n      var oldStore = store[dimIdx];\n      var oldLen = oldStore && oldStore.length;\n\n      if (!(oldLen === end)) {\n        var newStore = new DataCtor(end); // The cost of the copy is probably inconsiderable\n        // within the initial chunkSize.\n\n        for (var j = 0; j < oldLen; j++) {\n          newStore[j] = oldStore[j];\n        }\n\n        store[dimIdx] = newStore;\n      }\n    } else {\n      store[dimIdx] = new DataCtor(end);\n    }\n  }\n  /**\n   * Basically, DataStore API keep immutable.\n   */\n\n\n  var DataStore =\n  /** @class */\n  function () {\n    function DataStore() {\n      this._chunks = []; // It will not be calculated util needed.\n\n      this._rawExtent = [];\n      this._extent = [];\n      this._count = 0;\n      this._rawCount = 0;\n      this._calcDimNameToIdx = createHashMap();\n    }\n    /**\n     * Initialize from data\n     */\n\n\n    DataStore.prototype.initData = function (provider, inputDimensions, dimValueGetter) {\n      {\n        assert(isFunction(provider.getItem) && isFunction(provider.count), 'Invalid data provider.');\n      }\n      this._provider = provider; // Clear\n\n      this._chunks = [];\n      this._indices = null;\n      this.getRawIndex = this._getRawIdxIdentity;\n      var source = provider.getSource();\n      var defaultGetter = this.defaultDimValueGetter = defaultDimValueGetters[source.sourceFormat]; // Default dim value getter\n\n      this._dimValueGetter = dimValueGetter || defaultGetter; // Reset raw extent.\n\n      this._rawExtent = [];\n      var willRetrieveDataByName = shouldRetrieveDataByName(source);\n      this._dimensions = map(inputDimensions, function (dim) {\n        {\n          if (willRetrieveDataByName) {\n            assert(dim.property != null);\n          }\n        }\n        return {\n          // Only pick these two props. Not leak other properties like orderMeta.\n          type: dim.type,\n          property: dim.property\n        };\n      });\n\n      this._initDataFromProvider(0, provider.count());\n    };\n\n    DataStore.prototype.getProvider = function () {\n      return this._provider;\n    };\n    /**\n     * Caution: even when a `source` instance owned by a series, the created data store\n     * may still be shared by different sereis (the source hash does not use all `source`\n     * props, see `sourceManager`). In this case, the `source` props that are not used in\n     * hash (like `source.dimensionDefine`) probably only belongs to a certain series and\n     * thus should not be fetch here.\n     */\n\n\n    DataStore.prototype.getSource = function () {\n      return this._provider.getSource();\n    };\n    /**\n     * @caution Only used in dataStack.\n     */\n\n\n    DataStore.prototype.ensureCalculationDimension = function (dimName, type) {\n      var calcDimNameToIdx = this._calcDimNameToIdx;\n      var dimensions = this._dimensions;\n      var calcDimIdx = calcDimNameToIdx.get(dimName);\n\n      if (calcDimIdx != null) {\n        if (dimensions[calcDimIdx].type === type) {\n          return calcDimIdx;\n        }\n      } else {\n        calcDimIdx = dimensions.length;\n      }\n\n      dimensions[calcDimIdx] = {\n        type: type\n      };\n      calcDimNameToIdx.set(dimName, calcDimIdx);\n      this._chunks[calcDimIdx] = new dataCtors[type || 'float'](this._rawCount);\n      this._rawExtent[calcDimIdx] = getInitialExtent();\n      return calcDimIdx;\n    };\n\n    DataStore.prototype.collectOrdinalMeta = function (dimIdx, ordinalMeta) {\n      var chunk = this._chunks[dimIdx];\n      var dim = this._dimensions[dimIdx];\n      var rawExtents = this._rawExtent;\n      var offset = dim.ordinalOffset || 0;\n      var len = chunk.length;\n\n      if (offset === 0) {\n        // We need to reset the rawExtent if collect is from start.\n        // Because this dimension may be guessed as number and calcuating a wrong extent.\n        rawExtents[dimIdx] = getInitialExtent();\n      }\n\n      var dimRawExtent = rawExtents[dimIdx]; // Parse from previous data offset. len may be changed after appendData\n\n      for (var i = offset; i < len; i++) {\n        var val = chunk[i] = ordinalMeta.parseAndCollect(chunk[i]);\n\n        if (!isNaN(val)) {\n          dimRawExtent[0] = Math.min(val, dimRawExtent[0]);\n          dimRawExtent[1] = Math.max(val, dimRawExtent[1]);\n        }\n      }\n\n      dim.ordinalMeta = ordinalMeta;\n      dim.ordinalOffset = len;\n      dim.type = 'ordinal'; // Force to be ordinal\n    };\n\n    DataStore.prototype.getOrdinalMeta = function (dimIdx) {\n      var dimInfo = this._dimensions[dimIdx];\n      var ordinalMeta = dimInfo.ordinalMeta;\n      return ordinalMeta;\n    };\n\n    DataStore.prototype.getDimensionProperty = function (dimIndex) {\n      var item = this._dimensions[dimIndex];\n      return item && item.property;\n    };\n    /**\n     * Caution: Can be only called on raw data (before `this._indices` created).\n     */\n\n\n    DataStore.prototype.appendData = function (data) {\n      {\n        assert(!this._indices, 'appendData can only be called on raw data.');\n      }\n      var provider = this._provider;\n      var start = this.count();\n      provider.appendData(data);\n      var end = provider.count();\n\n      if (!provider.persistent) {\n        end += start;\n      }\n\n      if (start < end) {\n        this._initDataFromProvider(start, end, true);\n      }\n\n      return [start, end];\n    };\n\n    DataStore.prototype.appendValues = function (values, minFillLen) {\n      var chunks = this._chunks;\n      var dimensions = this._dimensions;\n      var dimLen = dimensions.length;\n      var rawExtent = this._rawExtent;\n      var start = this.count();\n      var end = start + Math.max(values.length, minFillLen || 0);\n\n      for (var i = 0; i < dimLen; i++) {\n        var dim = dimensions[i];\n        prepareStore(chunks, i, dim.type, end, true);\n      }\n\n      var emptyDataItem = [];\n\n      for (var idx = start; idx < end; idx++) {\n        var sourceIdx = idx - start; // Store the data by dimensions\n\n        for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\n          var dim = dimensions[dimIdx];\n          var val = defaultDimValueGetters.arrayRows.call(this, values[sourceIdx] || emptyDataItem, dim.property, sourceIdx, dimIdx);\n          chunks[dimIdx][idx] = val;\n          var dimRawExtent = rawExtent[dimIdx];\n          val < dimRawExtent[0] && (dimRawExtent[0] = val);\n          val > dimRawExtent[1] && (dimRawExtent[1] = val);\n        }\n      }\n\n      this._rawCount = this._count = end;\n      return {\n        start: start,\n        end: end\n      };\n    };\n\n    DataStore.prototype._initDataFromProvider = function (start, end, append) {\n      var provider = this._provider;\n      var chunks = this._chunks;\n      var dimensions = this._dimensions;\n      var dimLen = dimensions.length;\n      var rawExtent = this._rawExtent;\n      var dimNames = map(dimensions, function (dim) {\n        return dim.property;\n      });\n\n      for (var i = 0; i < dimLen; i++) {\n        var dim = dimensions[i];\n\n        if (!rawExtent[i]) {\n          rawExtent[i] = getInitialExtent();\n        }\n\n        prepareStore(chunks, i, dim.type, end, append);\n      }\n\n      if (provider.fillStorage) {\n        provider.fillStorage(start, end, chunks, rawExtent);\n      } else {\n        var dataItem = [];\n\n        for (var idx = start; idx < end; idx++) {\n          // NOTICE: Try not to write things into dataItem\n          dataItem = provider.getItem(idx, dataItem); // Each data item is value\n          // [1, 2]\n          // 2\n          // Bar chart, line chart which uses category axis\n          // only gives the 'y' value. 'x' value is the indices of category\n          // Use a tempValue to normalize the value to be a (x, y) value\n          // Store the data by dimensions\n\n          for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\n            var dimStorage = chunks[dimIdx]; // PENDING NULL is empty or zero\n\n            var val = this._dimValueGetter(dataItem, dimNames[dimIdx], idx, dimIdx);\n\n            dimStorage[idx] = val;\n            var dimRawExtent = rawExtent[dimIdx];\n            val < dimRawExtent[0] && (dimRawExtent[0] = val);\n            val > dimRawExtent[1] && (dimRawExtent[1] = val);\n          }\n        }\n      }\n\n      if (!provider.persistent && provider.clean) {\n        // Clean unused data if data source is typed array.\n        provider.clean();\n      }\n\n      this._rawCount = this._count = end; // Reset data extent\n\n      this._extent = [];\n    };\n\n    DataStore.prototype.count = function () {\n      return this._count;\n    };\n    /**\n     * Get value. Return NaN if idx is out of range.\n     */\n\n\n    DataStore.prototype.get = function (dim, idx) {\n      if (!(idx >= 0 && idx < this._count)) {\n        return NaN;\n      }\n\n      var dimStore = this._chunks[dim];\n      return dimStore ? dimStore[this.getRawIndex(idx)] : NaN;\n    };\n\n    DataStore.prototype.getValues = function (dimensions, idx) {\n      var values = [];\n      var dimArr = [];\n\n      if (idx == null) {\n        idx = dimensions; // TODO get all from store?\n\n        dimensions = []; // All dimensions\n\n        for (var i = 0; i < this._dimensions.length; i++) {\n          dimArr.push(i);\n        }\n      } else {\n        dimArr = dimensions;\n      }\n\n      for (var i = 0, len = dimArr.length; i < len; i++) {\n        values.push(this.get(dimArr[i], idx));\n      }\n\n      return values;\n    };\n    /**\n     * @param dim concrete dim\n     */\n\n\n    DataStore.prototype.getByRawIndex = function (dim, rawIdx) {\n      if (!(rawIdx >= 0 && rawIdx < this._rawCount)) {\n        return NaN;\n      }\n\n      var dimStore = this._chunks[dim];\n      return dimStore ? dimStore[rawIdx] : NaN;\n    };\n    /**\n     * Get sum of data in one dimension\n     */\n\n\n    DataStore.prototype.getSum = function (dim) {\n      var dimData = this._chunks[dim];\n      var sum = 0;\n\n      if (dimData) {\n        for (var i = 0, len = this.count(); i < len; i++) {\n          var value = this.get(dim, i);\n\n          if (!isNaN(value)) {\n            sum += value;\n          }\n        }\n      }\n\n      return sum;\n    };\n    /**\n     * Get median of data in one dimension\n     */\n\n\n    DataStore.prototype.getMedian = function (dim) {\n      var dimDataArray = []; // map all data of one dimension\n\n      this.each([dim], function (val) {\n        if (!isNaN(val)) {\n          dimDataArray.push(val);\n        }\n      }); // TODO\n      // Use quick select?\n\n      var sortedDimDataArray = dimDataArray.sort(function (a, b) {\n        return a - b;\n      });\n      var len = this.count(); // calculate median\n\n      return len === 0 ? 0 : len % 2 === 1 ? sortedDimDataArray[(len - 1) / 2] : (sortedDimDataArray[len / 2] + sortedDimDataArray[len / 2 - 1]) / 2;\n    };\n    /**\n     * Retreive the index with given raw data index\n     */\n\n\n    DataStore.prototype.indexOfRawIndex = function (rawIndex) {\n      if (rawIndex >= this._rawCount || rawIndex < 0) {\n        return -1;\n      }\n\n      if (!this._indices) {\n        return rawIndex;\n      } // Indices are ascending\n\n\n      var indices = this._indices; // If rawIndex === dataIndex\n\n      var rawDataIndex = indices[rawIndex];\n\n      if (rawDataIndex != null && rawDataIndex < this._count && rawDataIndex === rawIndex) {\n        return rawIndex;\n      }\n\n      var left = 0;\n      var right = this._count - 1;\n\n      while (left <= right) {\n        var mid = (left + right) / 2 | 0;\n\n        if (indices[mid] < rawIndex) {\n          left = mid + 1;\n        } else if (indices[mid] > rawIndex) {\n          right = mid - 1;\n        } else {\n          return mid;\n        }\n      }\n\n      return -1;\n    };\n    /**\n     * Retreive the index of nearest value\n     * @param dim\n     * @param value\n     * @param [maxDistance=Infinity]\n     * @return If and only if multiple indices has\n     *         the same value, they are put to the result.\n     */\n\n\n    DataStore.prototype.indicesOfNearest = function (dim, value, maxDistance) {\n      var chunks = this._chunks;\n      var dimData = chunks[dim];\n      var nearestIndices = [];\n\n      if (!dimData) {\n        return nearestIndices;\n      }\n\n      if (maxDistance == null) {\n        maxDistance = Infinity;\n      }\n\n      var minDist = Infinity;\n      var minDiff = -1;\n      var nearestIndicesLen = 0; // Check the test case of `test/ut/spec/data/SeriesData.js`.\n\n      for (var i = 0, len = this.count(); i < len; i++) {\n        var dataIndex = this.getRawIndex(i);\n        var diff = value - dimData[dataIndex];\n        var dist = Math.abs(diff);\n\n        if (dist <= maxDistance) {\n          // When the `value` is at the middle of `this.get(dim, i)` and `this.get(dim, i+1)`,\n          // we'd better not push both of them to `nearestIndices`, otherwise it is easy to\n          // get more than one item in `nearestIndices` (more specifically, in `tooltip`).\n          // So we chose the one that `diff >= 0` in this csae.\n          // But if `this.get(dim, i)` and `this.get(dim, j)` get the same value, both of them\n          // should be push to `nearestIndices`.\n          if (dist < minDist || dist === minDist && diff >= 0 && minDiff < 0) {\n            minDist = dist;\n            minDiff = diff;\n            nearestIndicesLen = 0;\n          }\n\n          if (diff === minDiff) {\n            nearestIndices[nearestIndicesLen++] = i;\n          }\n        }\n      }\n\n      nearestIndices.length = nearestIndicesLen;\n      return nearestIndices;\n    };\n\n    DataStore.prototype.getIndices = function () {\n      var newIndices;\n      var indices = this._indices;\n\n      if (indices) {\n        var Ctor = indices.constructor;\n        var thisCount = this._count; // `new Array(a, b, c)` is different from `new Uint32Array(a, b, c)`.\n\n        if (Ctor === Array) {\n          newIndices = new Ctor(thisCount);\n\n          for (var i = 0; i < thisCount; i++) {\n            newIndices[i] = indices[i];\n          }\n        } else {\n          newIndices = new Ctor(indices.buffer, 0, thisCount);\n        }\n      } else {\n        var Ctor = getIndicesCtor(this._rawCount);\n        newIndices = new Ctor(this.count());\n\n        for (var i = 0; i < newIndices.length; i++) {\n          newIndices[i] = i;\n        }\n      }\n\n      return newIndices;\n    };\n    /**\n     * Data filter.\n     */\n\n\n    DataStore.prototype.filter = function (dims, cb) {\n      if (!this._count) {\n        return this;\n      }\n\n      var newStore = this.clone();\n      var count = newStore.count();\n      var Ctor = getIndicesCtor(newStore._rawCount);\n      var newIndices = new Ctor(count);\n      var value = [];\n      var dimSize = dims.length;\n      var offset = 0;\n      var dim0 = dims[0];\n      var chunks = newStore._chunks;\n\n      for (var i = 0; i < count; i++) {\n        var keep = void 0;\n        var rawIdx = newStore.getRawIndex(i); // Simple optimization\n\n        if (dimSize === 0) {\n          keep = cb(i);\n        } else if (dimSize === 1) {\n          var val = chunks[dim0][rawIdx];\n          keep = cb(val, i);\n        } else {\n          var k = 0;\n\n          for (; k < dimSize; k++) {\n            value[k] = chunks[dims[k]][rawIdx];\n          }\n\n          value[k] = i;\n          keep = cb.apply(null, value);\n        }\n\n        if (keep) {\n          newIndices[offset++] = rawIdx;\n        }\n      } // Set indices after filtered.\n\n\n      if (offset < count) {\n        newStore._indices = newIndices;\n      }\n\n      newStore._count = offset; // Reset data extent\n\n      newStore._extent = [];\n\n      newStore._updateGetRawIdx();\n\n      return newStore;\n    };\n    /**\n     * Select data in range. (For optimization of filter)\n     * (Manually inline code, support 5 million data filtering in data zoom.)\n     */\n\n\n    DataStore.prototype.selectRange = function (range) {\n      var newStore = this.clone();\n      var len = newStore._count;\n\n      if (!len) {\n        return this;\n      }\n\n      var dims = keys(range);\n      var dimSize = dims.length;\n\n      if (!dimSize) {\n        return this;\n      }\n\n      var originalCount = newStore.count();\n      var Ctor = getIndicesCtor(newStore._rawCount);\n      var newIndices = new Ctor(originalCount);\n      var offset = 0;\n      var dim0 = dims[0];\n      var min = range[dim0][0];\n      var max = range[dim0][1];\n      var storeArr = newStore._chunks;\n      var quickFinished = false;\n\n      if (!newStore._indices) {\n        // Extreme optimization for common case. About 2x faster in chrome.\n        var idx = 0;\n\n        if (dimSize === 1) {\n          var dimStorage = storeArr[dims[0]];\n\n          for (var i = 0; i < len; i++) {\n            var val = dimStorage[i]; // NaN will not be filtered. Consider the case, in line chart, empty\n            // value indicates the line should be broken. But for the case like\n            // scatter plot, a data item with empty value will not be rendered,\n            // but the axis extent may be effected if some other dim of the data\n            // item has value. Fortunately it is not a significant negative effect.\n\n            if (val >= min && val <= max || isNaN(val)) {\n              newIndices[offset++] = idx;\n            }\n\n            idx++;\n          }\n\n          quickFinished = true;\n        } else if (dimSize === 2) {\n          var dimStorage = storeArr[dims[0]];\n          var dimStorage2 = storeArr[dims[1]];\n          var min2 = range[dims[1]][0];\n          var max2 = range[dims[1]][1];\n\n          for (var i = 0; i < len; i++) {\n            var val = dimStorage[i];\n            var val2 = dimStorage2[i]; // Do not filter NaN, see comment above.\n\n            if ((val >= min && val <= max || isNaN(val)) && (val2 >= min2 && val2 <= max2 || isNaN(val2))) {\n              newIndices[offset++] = idx;\n            }\n\n            idx++;\n          }\n\n          quickFinished = true;\n        }\n      }\n\n      if (!quickFinished) {\n        if (dimSize === 1) {\n          for (var i = 0; i < originalCount; i++) {\n            var rawIndex = newStore.getRawIndex(i);\n            var val = storeArr[dims[0]][rawIndex]; // Do not filter NaN, see comment above.\n\n            if (val >= min && val <= max || isNaN(val)) {\n              newIndices[offset++] = rawIndex;\n            }\n          }\n        } else {\n          for (var i = 0; i < originalCount; i++) {\n            var keep = true;\n            var rawIndex = newStore.getRawIndex(i);\n\n            for (var k = 0; k < dimSize; k++) {\n              var dimk = dims[k];\n              var val = storeArr[dimk][rawIndex]; // Do not filter NaN, see comment above.\n\n              if (val < range[dimk][0] || val > range[dimk][1]) {\n                keep = false;\n              }\n            }\n\n            if (keep) {\n              newIndices[offset++] = newStore.getRawIndex(i);\n            }\n          }\n        }\n      } // Set indices after filtered.\n\n\n      if (offset < originalCount) {\n        newStore._indices = newIndices;\n      }\n\n      newStore._count = offset; // Reset data extent\n\n      newStore._extent = [];\n\n      newStore._updateGetRawIdx();\n\n      return newStore;\n    }; // /**\n    //  * Data mapping to a plain array\n    //  */\n    // mapArray(dims: DimensionIndex[], cb: MapArrayCb): any[] {\n    //     const result: any[] = [];\n    //     this.each(dims, function () {\n    //         result.push(cb && (cb as MapArrayCb).apply(null, arguments));\n    //     });\n    //     return result;\n    // }\n\n    /**\n     * Data mapping to a new List with given dimensions\n     */\n\n\n    DataStore.prototype.map = function (dims, cb) {\n      // TODO only clone picked chunks.\n      var target = this.clone(dims);\n\n      this._updateDims(target, dims, cb);\n\n      return target;\n    };\n    /**\n     * @caution Danger!! Only used in dataStack.\n     */\n\n\n    DataStore.prototype.modify = function (dims, cb) {\n      this._updateDims(this, dims, cb);\n    };\n\n    DataStore.prototype._updateDims = function (target, dims, cb) {\n      var targetChunks = target._chunks;\n      var tmpRetValue = [];\n      var dimSize = dims.length;\n      var dataCount = target.count();\n      var values = [];\n      var rawExtent = target._rawExtent;\n\n      for (var i = 0; i < dims.length; i++) {\n        rawExtent[dims[i]] = getInitialExtent();\n      }\n\n      for (var dataIndex = 0; dataIndex < dataCount; dataIndex++) {\n        var rawIndex = target.getRawIndex(dataIndex);\n\n        for (var k = 0; k < dimSize; k++) {\n          values[k] = targetChunks[dims[k]][rawIndex];\n        }\n\n        values[dimSize] = dataIndex;\n        var retValue = cb && cb.apply(null, values);\n\n        if (retValue != null) {\n          // a number or string (in oridinal dimension)?\n          if (typeof retValue !== 'object') {\n            tmpRetValue[0] = retValue;\n            retValue = tmpRetValue;\n          }\n\n          for (var i = 0; i < retValue.length; i++) {\n            var dim = dims[i];\n            var val = retValue[i];\n            var rawExtentOnDim = rawExtent[dim];\n            var dimStore = targetChunks[dim];\n\n            if (dimStore) {\n              dimStore[rawIndex] = val;\n            }\n\n            if (val < rawExtentOnDim[0]) {\n              rawExtentOnDim[0] = val;\n            }\n\n            if (val > rawExtentOnDim[1]) {\n              rawExtentOnDim[1] = val;\n            }\n          }\n        }\n      }\n    };\n    /**\n     * Large data down sampling using largest-triangle-three-buckets\n     * @param {string} valueDimension\n     * @param {number} targetCount\n     */\n\n\n    DataStore.prototype.lttbDownSample = function (valueDimension, rate) {\n      var target = this.clone([valueDimension], true);\n      var targetStorage = target._chunks;\n      var dimStore = targetStorage[valueDimension];\n      var len = this.count();\n      var sampledIndex = 0;\n      var frameSize = Math.floor(1 / rate);\n      var currentRawIndex = this.getRawIndex(0);\n      var maxArea;\n      var area;\n      var nextRawIndex;\n      var newIndices = new (getIndicesCtor(this._rawCount))(Math.min((Math.ceil(len / frameSize) + 2) * 2, len)); // First frame use the first data.\n\n      newIndices[sampledIndex++] = currentRawIndex;\n\n      for (var i = 1; i < len - 1; i += frameSize) {\n        var nextFrameStart = Math.min(i + frameSize, len - 1);\n        var nextFrameEnd = Math.min(i + frameSize * 2, len);\n        var avgX = (nextFrameEnd + nextFrameStart) / 2;\n        var avgY = 0;\n\n        for (var idx = nextFrameStart; idx < nextFrameEnd; idx++) {\n          var rawIndex = this.getRawIndex(idx);\n          var y = dimStore[rawIndex];\n\n          if (isNaN(y)) {\n            continue;\n          }\n\n          avgY += y;\n        }\n\n        avgY /= nextFrameEnd - nextFrameStart;\n        var frameStart = i;\n        var frameEnd = Math.min(i + frameSize, len);\n        var pointAX = i - 1;\n        var pointAY = dimStore[currentRawIndex];\n        maxArea = -1;\n        nextRawIndex = frameStart;\n        var firstNaNIndex = -1;\n        var countNaN = 0; // Find a point from current frame that construct a triangel with largest area with previous selected point\n        // And the average of next frame.\n\n        for (var idx = frameStart; idx < frameEnd; idx++) {\n          var rawIndex = this.getRawIndex(idx);\n          var y = dimStore[rawIndex];\n\n          if (isNaN(y)) {\n            countNaN++;\n\n            if (firstNaNIndex < 0) {\n              firstNaNIndex = rawIndex;\n            }\n\n            continue;\n          } // Calculate triangle area over three buckets\n\n\n          area = Math.abs((pointAX - avgX) * (y - pointAY) - (pointAX - idx) * (avgY - pointAY));\n\n          if (area > maxArea) {\n            maxArea = area;\n            nextRawIndex = rawIndex; // Next a is this b\n          }\n        }\n\n        if (countNaN > 0 && countNaN < frameEnd - frameStart) {\n          // Append first NaN point in every bucket.\n          // It is necessary to ensure the correct order of indices.\n          newIndices[sampledIndex++] = Math.min(firstNaNIndex, nextRawIndex);\n          nextRawIndex = Math.max(firstNaNIndex, nextRawIndex);\n        }\n\n        newIndices[sampledIndex++] = nextRawIndex;\n        currentRawIndex = nextRawIndex; // This a is the next a (chosen b)\n      } // First frame use the last data.\n\n\n      newIndices[sampledIndex++] = this.getRawIndex(len - 1);\n      target._count = sampledIndex;\n      target._indices = newIndices;\n      target.getRawIndex = this._getRawIdx;\n      return target;\n    };\n    /**\n     * Large data down sampling on given dimension\n     * @param sampleIndex Sample index for name and id\n     */\n\n\n    DataStore.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n      var target = this.clone([dimension], true);\n      var targetStorage = target._chunks;\n      var frameValues = [];\n      var frameSize = Math.floor(1 / rate);\n      var dimStore = targetStorage[dimension];\n      var len = this.count();\n      var rawExtentOnDim = target._rawExtent[dimension] = getInitialExtent();\n      var newIndices = new (getIndicesCtor(this._rawCount))(Math.ceil(len / frameSize));\n      var offset = 0;\n\n      for (var i = 0; i < len; i += frameSize) {\n        // Last frame\n        if (frameSize > len - i) {\n          frameSize = len - i;\n          frameValues.length = frameSize;\n        }\n\n        for (var k = 0; k < frameSize; k++) {\n          var dataIdx = this.getRawIndex(i + k);\n          frameValues[k] = dimStore[dataIdx];\n        }\n\n        var value = sampleValue(frameValues);\n        var sampleFrameIdx = this.getRawIndex(Math.min(i + sampleIndex(frameValues, value) || 0, len - 1)); // Only write value on the filtered data\n\n        dimStore[sampleFrameIdx] = value;\n\n        if (value < rawExtentOnDim[0]) {\n          rawExtentOnDim[0] = value;\n        }\n\n        if (value > rawExtentOnDim[1]) {\n          rawExtentOnDim[1] = value;\n        }\n\n        newIndices[offset++] = sampleFrameIdx;\n      }\n\n      target._count = offset;\n      target._indices = newIndices;\n\n      target._updateGetRawIdx();\n\n      return target;\n    };\n    /**\n     * Data iteration\n     * @param ctx default this\n     * @example\n     *  list.each('x', function (x, idx) {});\n     *  list.each(['x', 'y'], function (x, y, idx) {});\n     *  list.each(function (idx) {})\n     */\n\n\n    DataStore.prototype.each = function (dims, cb) {\n      if (!this._count) {\n        return;\n      }\n\n      var dimSize = dims.length;\n      var chunks = this._chunks;\n\n      for (var i = 0, len = this.count(); i < len; i++) {\n        var rawIdx = this.getRawIndex(i); // Simple optimization\n\n        switch (dimSize) {\n          case 0:\n            cb(i);\n            break;\n\n          case 1:\n            cb(chunks[dims[0]][rawIdx], i);\n            break;\n\n          case 2:\n            cb(chunks[dims[0]][rawIdx], chunks[dims[1]][rawIdx], i);\n            break;\n\n          default:\n            var k = 0;\n            var value = [];\n\n            for (; k < dimSize; k++) {\n              value[k] = chunks[dims[k]][rawIdx];\n            } // Index\n\n\n            value[k] = i;\n            cb.apply(null, value);\n        }\n      }\n    };\n    /**\n     * Get extent of data in one dimension\n     */\n\n\n    DataStore.prototype.getDataExtent = function (dim) {\n      // Make sure use concrete dim as cache name.\n      var dimData = this._chunks[dim];\n      var initialExtent = getInitialExtent();\n\n      if (!dimData) {\n        return initialExtent;\n      } // Make more strict checkings to ensure hitting cache.\n\n\n      var currEnd = this.count(); // Consider the most cases when using data zoom, `getDataExtent`\n      // happened before filtering. We cache raw extent, which is not\n      // necessary to be cleared and recalculated when restore data.\n\n      var useRaw = !this._indices;\n      var dimExtent;\n\n      if (useRaw) {\n        return this._rawExtent[dim].slice();\n      }\n\n      dimExtent = this._extent[dim];\n\n      if (dimExtent) {\n        return dimExtent.slice();\n      }\n\n      dimExtent = initialExtent;\n      var min = dimExtent[0];\n      var max = dimExtent[1];\n\n      for (var i = 0; i < currEnd; i++) {\n        var rawIdx = this.getRawIndex(i);\n        var value = dimData[rawIdx];\n        value < min && (min = value);\n        value > max && (max = value);\n      }\n\n      dimExtent = [min, max];\n      this._extent[dim] = dimExtent;\n      return dimExtent;\n    };\n    /**\n     * Get raw data item\n     */\n\n\n    DataStore.prototype.getRawDataItem = function (idx) {\n      var rawIdx = this.getRawIndex(idx);\n\n      if (!this._provider.persistent) {\n        var val = [];\n        var chunks = this._chunks;\n\n        for (var i = 0; i < chunks.length; i++) {\n          val.push(chunks[i][rawIdx]);\n        }\n\n        return val;\n      } else {\n        return this._provider.getItem(rawIdx);\n      }\n    };\n    /**\n     * Clone shallow.\n     *\n     * @param clonedDims Determine which dims to clone. Will share the data if not specified.\n     */\n\n\n    DataStore.prototype.clone = function (clonedDims, ignoreIndices) {\n      var target = new DataStore();\n      var chunks = this._chunks;\n      var clonedDimsMap = clonedDims && reduce(clonedDims, function (obj, dimIdx) {\n        obj[dimIdx] = true;\n        return obj;\n      }, {});\n\n      if (clonedDimsMap) {\n        for (var i = 0; i < chunks.length; i++) {\n          // Not clone if dim is not picked.\n          target._chunks[i] = !clonedDimsMap[i] ? chunks[i] : cloneChunk(chunks[i]);\n        }\n      } else {\n        target._chunks = chunks;\n      }\n\n      this._copyCommonProps(target);\n\n      if (!ignoreIndices) {\n        target._indices = this._cloneIndices();\n      }\n\n      target._updateGetRawIdx();\n\n      return target;\n    };\n\n    DataStore.prototype._copyCommonProps = function (target) {\n      target._count = this._count;\n      target._rawCount = this._rawCount;\n      target._provider = this._provider;\n      target._dimensions = this._dimensions;\n      target._extent = clone(this._extent);\n      target._rawExtent = clone(this._rawExtent);\n    };\n\n    DataStore.prototype._cloneIndices = function () {\n      if (this._indices) {\n        var Ctor = this._indices.constructor;\n        var indices = void 0;\n\n        if (Ctor === Array) {\n          var thisCount = this._indices.length;\n          indices = new Ctor(thisCount);\n\n          for (var i = 0; i < thisCount; i++) {\n            indices[i] = this._indices[i];\n          }\n        } else {\n          indices = new Ctor(this._indices);\n        }\n\n        return indices;\n      }\n\n      return null;\n    };\n\n    DataStore.prototype._getRawIdxIdentity = function (idx) {\n      return idx;\n    };\n\n    DataStore.prototype._getRawIdx = function (idx) {\n      if (idx < this._count && idx >= 0) {\n        return this._indices[idx];\n      }\n\n      return -1;\n    };\n\n    DataStore.prototype._updateGetRawIdx = function () {\n      this.getRawIndex = this._indices ? this._getRawIdx : this._getRawIdxIdentity;\n    };\n\n    DataStore.internalField = function () {\n      function getDimValueSimply(dataItem, property, dataIndex, dimIndex) {\n        return parseDataValue(dataItem[dimIndex], this._dimensions[dimIndex]);\n      }\n\n      defaultDimValueGetters = {\n        arrayRows: getDimValueSimply,\n        objectRows: function (dataItem, property, dataIndex, dimIndex) {\n          return parseDataValue(dataItem[property], this._dimensions[dimIndex]);\n        },\n        keyedColumns: getDimValueSimply,\n        original: function (dataItem, property, dataIndex, dimIndex) {\n          // Performance sensitive, do not use modelUtil.getDataItemValue.\n          // If dataItem is an plain object with no value field, the let `value`\n          // will be assigned with the object, but it will be tread correctly\n          // in the `convertValue`.\n          var value = dataItem && (dataItem.value == null ? dataItem : dataItem.value);\n          return parseDataValue(value instanceof Array ? value[dimIndex] // If value is a single number or something else not array.\n          : value, this._dimensions[dimIndex]);\n        },\n        typedArray: function (dataItem, property, dataIndex, dimIndex) {\n          return dataItem[dimIndex];\n        }\n      };\n    }();\n\n    return DataStore;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * [REQUIREMENT_MEMO]:\n   * (0) `metaRawOption` means `dimensions`/`sourceHeader`/`seriesLayoutBy` in raw option.\n   * (1) Keep support the feature: `metaRawOption` can be specified both on `series` and\n   * `root-dataset`. Them on `series` has higher priority.\n   * (2) Do not support to set `metaRawOption` on a `non-root-dataset`, because it might\n   * confuse users: whether those props indicate how to visit the upstream source or visit\n   * the transform result source, and some transforms has nothing to do with these props,\n   * and some transforms might have multiple upstream.\n   * (3) Transforms should specify `metaRawOption` in each output, just like they can be\n   * declared in `root-dataset`.\n   * (4) At present only support visit source in `SERIES_LAYOUT_BY_COLUMN` in transforms.\n   * That is for reducing complexity in transfroms.\n   * PENDING: Whether to provide transposition transform?\n   *\n   * [IMPLEMENTAION_MEMO]:\n   * \"sourceVisitConfig\" are calculated from `metaRawOption` and `data`.\n   * They will not be calculated until `source` is about to be visited (to prevent from\n   * duplicate calcuation). `source` is visited only in series and input to transforms.\n   *\n   * [DIMENSION_INHERIT_RULE]:\n   * By default the dimensions are inherited from ancestors, unless a transform return\n   * a new dimensions definition.\n   * Consider the case:\n   * ```js\n   * dataset: [{\n   *     source: [ ['Product', 'Sales', 'Prise'], ['Cookies', 321, 44.21], ...]\n   * }, {\n   *     transform: { type: 'filter', ... }\n   * }]\n   * dataset: [{\n   *     dimension: ['Product', 'Sales', 'Prise'],\n   *     source: [ ['Cookies', 321, 44.21], ...]\n   * }, {\n   *     transform: { type: 'filter', ... }\n   * }]\n   * ```\n   * The two types of option should have the same behavior after transform.\n   *\n   *\n   * [SCENARIO]:\n   * (1) Provide source data directly:\n   * ```js\n   * series: {\n   *     encode: {...},\n   *     dimensions: [...]\n   *     seriesLayoutBy: 'row',\n   *     data: [[...]]\n   * }\n   * ```\n   * (2) Series refer to dataset.\n   * ```js\n   * series: [{\n   *     encode: {...}\n   *     // Ignore datasetIndex means `datasetIndex: 0`\n   *     // and the dimensions defination in dataset is used\n   * }, {\n   *     encode: {...},\n   *     seriesLayoutBy: 'column',\n   *     datasetIndex: 1\n   * }]\n   * ```\n   * (3) dataset transform\n   * ```js\n   * dataset: [{\n   *     source: [...]\n   * }, {\n   *     source: [...]\n   * }, {\n   *     // By default from 0.\n   *     transform: { type: 'filter', config: {...} }\n   * }, {\n   *     // Piped.\n   *     transform: [\n   *         { type: 'filter', config: {...} },\n   *         { type: 'sort', config: {...} }\n   *     ]\n   * }, {\n   *     id: 'regressionData',\n   *     fromDatasetIndex: 1,\n   *     // Third-party transform\n   *     transform: { type: 'ecStat:regression', config: {...} }\n   * }, {\n   *     // retrieve the extra result.\n   *     id: 'regressionFormula',\n   *     fromDatasetId: 'regressionData',\n   *     fromTransformResult: 1\n   * }]\n   * ```\n   */\n\n\n  var SourceManager =\n  /** @class */\n  function () {\n    function SourceManager(sourceHost) {\n      // Cached source. Do not repeat calculating if not dirty.\n      this._sourceList = [];\n      this._storeList = []; // version sign of each upstream source manager.\n\n      this._upstreamSignList = [];\n      this._versionSignBase = 0;\n      this._dirty = true;\n      this._sourceHost = sourceHost;\n    }\n    /**\n     * Mark dirty.\n     */\n\n\n    SourceManager.prototype.dirty = function () {\n      this._setLocalSource([], []);\n\n      this._storeList = [];\n      this._dirty = true;\n    };\n\n    SourceManager.prototype._setLocalSource = function (sourceList, upstreamSignList) {\n      this._sourceList = sourceList;\n      this._upstreamSignList = upstreamSignList;\n      this._versionSignBase++;\n\n      if (this._versionSignBase > 9e10) {\n        this._versionSignBase = 0;\n      }\n    };\n    /**\n     * For detecting whether the upstream source is dirty, so that\n     * the local cached source (in `_sourceList`) should be discarded.\n     */\n\n\n    SourceManager.prototype._getVersionSign = function () {\n      return this._sourceHost.uid + '_' + this._versionSignBase;\n    };\n    /**\n     * Always return a source instance. Otherwise throw error.\n     */\n\n\n    SourceManager.prototype.prepareSource = function () {\n      // For the case that call `setOption` multiple time but no data changed,\n      // cache the result source to prevent from repeating transform.\n      if (this._isDirty()) {\n        this._createSource();\n\n        this._dirty = false;\n      }\n    };\n\n    SourceManager.prototype._createSource = function () {\n      this._setLocalSource([], []);\n\n      var sourceHost = this._sourceHost;\n\n      var upSourceMgrList = this._getUpstreamSourceManagers();\n\n      var hasUpstream = !!upSourceMgrList.length;\n      var resultSourceList;\n      var upstreamSignList;\n\n      if (isSeries(sourceHost)) {\n        var seriesModel = sourceHost;\n        var data = void 0;\n        var sourceFormat = void 0;\n        var upSource = void 0; // Has upstream dataset\n\n        if (hasUpstream) {\n          var upSourceMgr = upSourceMgrList[0];\n          upSourceMgr.prepareSource();\n          upSource = upSourceMgr.getSource();\n          data = upSource.data;\n          sourceFormat = upSource.sourceFormat;\n          upstreamSignList = [upSourceMgr._getVersionSign()];\n        } // Series data is from own.\n        else {\n            data = seriesModel.get('data', true);\n            sourceFormat = isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL;\n            upstreamSignList = [];\n          } // See [REQUIREMENT_MEMO], merge settings on series and parent dataset if it is root.\n\n\n        var newMetaRawOption = this._getSourceMetaRawOption() || {};\n        var upMetaRawOption = upSource && upSource.metaRawOption || {};\n        var seriesLayoutBy = retrieve2(newMetaRawOption.seriesLayoutBy, upMetaRawOption.seriesLayoutBy) || null;\n        var sourceHeader = retrieve2(newMetaRawOption.sourceHeader, upMetaRawOption.sourceHeader); // Note here we should not use `upSource.dimensionsDefine`. Consider the case:\n        // `upSource.dimensionsDefine` is detected by `seriesLayoutBy: 'column'`,\n        // but series need `seriesLayoutBy: 'row'`.\n\n        var dimensions = retrieve2(newMetaRawOption.dimensions, upMetaRawOption.dimensions); // We share source with dataset as much as possible\n        // to avoid extra memroy cost of high dimensional data.\n\n        var needsCreateSource = seriesLayoutBy !== upMetaRawOption.seriesLayoutBy || !!sourceHeader !== !!upMetaRawOption.sourceHeader || dimensions;\n        resultSourceList = needsCreateSource ? [createSource(data, {\n          seriesLayoutBy: seriesLayoutBy,\n          sourceHeader: sourceHeader,\n          dimensions: dimensions\n        }, sourceFormat)] : [];\n      } else {\n        var datasetModel = sourceHost; // Has upstream dataset.\n\n        if (hasUpstream) {\n          var result = this._applyTransform(upSourceMgrList);\n\n          resultSourceList = result.sourceList;\n          upstreamSignList = result.upstreamSignList;\n        } // Is root dataset.\n        else {\n            var sourceData = datasetModel.get('source', true);\n            resultSourceList = [createSource(sourceData, this._getSourceMetaRawOption(), null)];\n            upstreamSignList = [];\n          }\n      }\n\n      {\n        assert(resultSourceList && upstreamSignList);\n      }\n\n      this._setLocalSource(resultSourceList, upstreamSignList);\n    };\n\n    SourceManager.prototype._applyTransform = function (upMgrList) {\n      var datasetModel = this._sourceHost;\n      var transformOption = datasetModel.get('transform', true);\n      var fromTransformResult = datasetModel.get('fromTransformResult', true);\n      {\n        assert(fromTransformResult != null || transformOption != null);\n      }\n\n      if (fromTransformResult != null) {\n        var errMsg = '';\n\n        if (upMgrList.length !== 1) {\n          {\n            errMsg = 'When using `fromTransformResult`, there should be only one upstream dataset';\n          }\n          doThrow(errMsg);\n        }\n      }\n\n      var sourceList;\n      var upSourceList = [];\n      var upstreamSignList = [];\n      each(upMgrList, function (upMgr) {\n        upMgr.prepareSource();\n        var upSource = upMgr.getSource(fromTransformResult || 0);\n        var errMsg = '';\n\n        if (fromTransformResult != null && !upSource) {\n          {\n            errMsg = 'Can not retrieve result by `fromTransformResult`: ' + fromTransformResult;\n          }\n          doThrow(errMsg);\n        }\n\n        upSourceList.push(upSource);\n        upstreamSignList.push(upMgr._getVersionSign());\n      });\n\n      if (transformOption) {\n        sourceList = applyDataTransform(transformOption, upSourceList, {\n          datasetIndex: datasetModel.componentIndex\n        });\n      } else if (fromTransformResult != null) {\n        sourceList = [cloneSourceShallow(upSourceList[0])];\n      }\n\n      return {\n        sourceList: sourceList,\n        upstreamSignList: upstreamSignList\n      };\n    };\n\n    SourceManager.prototype._isDirty = function () {\n      if (this._dirty) {\n        return true;\n      } // All sourceList is from the some upsteam.\n\n\n      var upSourceMgrList = this._getUpstreamSourceManagers();\n\n      for (var i = 0; i < upSourceMgrList.length; i++) {\n        var upSrcMgr = upSourceMgrList[i];\n\n        if ( // Consider the case that there is ancestor diry, call it recursively.\n        // The performance is probably not an issue because usually the chain is not long.\n        upSrcMgr._isDirty() || this._upstreamSignList[i] !== upSrcMgr._getVersionSign()) {\n          return true;\n        }\n      }\n    };\n    /**\n     * @param sourceIndex By defualt 0, means \"main source\".\n     *                    Most cases there is only one source.\n     */\n\n\n    SourceManager.prototype.getSource = function (sourceIndex) {\n      sourceIndex = sourceIndex || 0;\n      var source = this._sourceList[sourceIndex];\n\n      if (!source) {\n        // Series may share source instance with dataset.\n        var upSourceMgrList = this._getUpstreamSourceManagers();\n\n        return upSourceMgrList[0] && upSourceMgrList[0].getSource(sourceIndex);\n      }\n\n      return source;\n    };\n    /**\n     *\n     * Get a data store which can be shared across series.\n     * Only available for series.\n     *\n     * @param seriesDimRequest Dimensions that are generated in series.\n     *        Should have been sorted by `storeDimIndex` asc.\n     */\n\n\n    SourceManager.prototype.getSharedDataStore = function (seriesDimRequest) {\n      {\n        assert(isSeries(this._sourceHost), 'Can only call getDataStore on series source manager.');\n      }\n      var schema = seriesDimRequest.makeStoreSchema();\n      return this._innerGetDataStore(schema.dimensions, seriesDimRequest.source, schema.hash);\n    };\n\n    SourceManager.prototype._innerGetDataStore = function (storeDims, seriesSource, sourceReadKey) {\n      // TODO Can use other sourceIndex?\n      var sourceIndex = 0;\n      var storeList = this._storeList;\n      var cachedStoreMap = storeList[sourceIndex];\n\n      if (!cachedStoreMap) {\n        cachedStoreMap = storeList[sourceIndex] = {};\n      }\n\n      var cachedStore = cachedStoreMap[sourceReadKey];\n\n      if (!cachedStore) {\n        var upSourceMgr = this._getUpstreamSourceManagers()[0];\n\n        if (isSeries(this._sourceHost) && upSourceMgr) {\n          cachedStore = upSourceMgr._innerGetDataStore(storeDims, seriesSource, sourceReadKey);\n        } else {\n          cachedStore = new DataStore(); // Always create store from source of series.\n\n          cachedStore.initData(new DefaultDataProvider(seriesSource, storeDims.length), storeDims);\n        }\n\n        cachedStoreMap[sourceReadKey] = cachedStore;\n      }\n\n      return cachedStore;\n    };\n    /**\n     * PEDING: Is it fast enough?\n     * If no upstream, return empty array.\n     */\n\n\n    SourceManager.prototype._getUpstreamSourceManagers = function () {\n      // Always get the relationship from the raw option.\n      // Do not cache the link of the dependency graph, so that\n      // no need to update them when change happen.\n      var sourceHost = this._sourceHost;\n\n      if (isSeries(sourceHost)) {\n        var datasetModel = querySeriesUpstreamDatasetModel(sourceHost);\n        return !datasetModel ? [] : [datasetModel.getSourceManager()];\n      } else {\n        return map(queryDatasetUpstreamDatasetModels(sourceHost), function (datasetModel) {\n          return datasetModel.getSourceManager();\n        });\n      }\n    };\n\n    SourceManager.prototype._getSourceMetaRawOption = function () {\n      var sourceHost = this._sourceHost;\n      var seriesLayoutBy;\n      var sourceHeader;\n      var dimensions;\n\n      if (isSeries(sourceHost)) {\n        seriesLayoutBy = sourceHost.get('seriesLayoutBy', true);\n        sourceHeader = sourceHost.get('sourceHeader', true);\n        dimensions = sourceHost.get('dimensions', true);\n      } // See [REQUIREMENT_MEMO], `non-root-dataset` do not support them.\n      else if (!this._getUpstreamSourceManagers().length) {\n          var model = sourceHost;\n          seriesLayoutBy = model.get('seriesLayoutBy', true);\n          sourceHeader = model.get('sourceHeader', true);\n          dimensions = model.get('dimensions', true);\n        }\n\n      return {\n        seriesLayoutBy: seriesLayoutBy,\n        sourceHeader: sourceHeader,\n        dimensions: dimensions\n      };\n    };\n\n    return SourceManager;\n  }(); // disable the transform merge, but do not disable transfrom clone from rawOption.\n\n\n  function disableTransformOptionMerge(datasetModel) {\n    var transformOption = datasetModel.option.transform;\n    transformOption && setAsPrimitive(datasetModel.option.transform);\n  }\n\n  function isSeries(sourceHost) {\n    // Avoid circular dependency with Series.ts\n    return sourceHost.mainType === 'series';\n  }\n\n  function doThrow(errMsg) {\n    throw new Error(errMsg);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var TOOLTIP_LINE_HEIGHT_CSS = 'line-height:1'; // TODO: more textStyle option\n\n  function getTooltipTextStyle(textStyle, renderMode) {\n    var nameFontColor = textStyle.color || '#6e7079';\n    var nameFontSize = textStyle.fontSize || 12;\n    var nameFontWeight = textStyle.fontWeight || '400';\n    var valueFontColor = textStyle.color || '#464646';\n    var valueFontSize = textStyle.fontSize || 14;\n    var valueFontWeight = textStyle.fontWeight || '900';\n\n    if (renderMode === 'html') {\n      // `textStyle` is probably from user input, should be encoded to reduce security risk.\n      return {\n        // eslint-disable-next-line max-len\n        nameStyle: \"font-size:\" + encodeHTML(nameFontSize + '') + \"px;color:\" + encodeHTML(nameFontColor) + \";font-weight:\" + encodeHTML(nameFontWeight + ''),\n        // eslint-disable-next-line max-len\n        valueStyle: \"font-size:\" + encodeHTML(valueFontSize + '') + \"px;color:\" + encodeHTML(valueFontColor) + \";font-weight:\" + encodeHTML(valueFontWeight + '')\n      };\n    } else {\n      return {\n        nameStyle: {\n          fontSize: nameFontSize,\n          fill: nameFontColor,\n          fontWeight: nameFontWeight\n        },\n        valueStyle: {\n          fontSize: valueFontSize,\n          fill: valueFontColor,\n          fontWeight: valueFontWeight\n        }\n      };\n    }\n  } // See `TooltipMarkupLayoutIntent['innerGapLevel']`.\n  // (value from UI design)\n\n\n  var HTML_GAPS = [0, 10, 20, 30];\n  var RICH_TEXT_GAPS = ['', '\\n', '\\n\\n', '\\n\\n\\n']; // eslint-disable-next-line max-len\n\n  function createTooltipMarkup(type, option) {\n    option.type = type;\n    return option;\n  }\n\n  function isSectionFragment(frag) {\n    return frag.type === 'section';\n  }\n\n  function getBuilder(frag) {\n    return isSectionFragment(frag) ? buildSection : buildNameValue;\n  }\n\n  function getBlockGapLevel(frag) {\n    if (isSectionFragment(frag)) {\n      var gapLevel_1 = 0;\n      var subBlockLen = frag.blocks.length;\n      var hasInnerGap_1 = subBlockLen > 1 || subBlockLen > 0 && !frag.noHeader;\n      each(frag.blocks, function (subBlock) {\n        var subGapLevel = getBlockGapLevel(subBlock); // If the some of the sub-blocks have some gaps (like 10px) inside, this block\n        // should use a larger gap (like 20px) to distinguish those sub-blocks.\n\n        if (subGapLevel >= gapLevel_1) {\n          gapLevel_1 = subGapLevel + +(hasInnerGap_1 && ( // 0 always can not be readable gap level.\n          !subGapLevel // If no header, always keep the sub gap level. Otherwise\n          // look weird in case `multipleSeries`.\n          || isSectionFragment(subBlock) && !subBlock.noHeader));\n        }\n      });\n      return gapLevel_1;\n    }\n\n    return 0;\n  }\n\n  function buildSection(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n    var noHeader = fragment.noHeader;\n    var gaps = getGap(getBlockGapLevel(fragment));\n    var subMarkupTextList = [];\n    var subBlocks = fragment.blocks || [];\n    assert(!subBlocks || isArray(subBlocks));\n    subBlocks = subBlocks || [];\n    var orderMode = ctx.orderMode;\n\n    if (fragment.sortBlocks && orderMode) {\n      subBlocks = subBlocks.slice();\n      var orderMap = {\n        valueAsc: 'asc',\n        valueDesc: 'desc'\n      };\n\n      if (hasOwn(orderMap, orderMode)) {\n        var comparator_1 = new SortOrderComparator(orderMap[orderMode], null);\n        subBlocks.sort(function (a, b) {\n          return comparator_1.evaluate(a.sortParam, b.sortParam);\n        });\n      } // FIXME 'seriesDesc' necessary?\n      else if (orderMode === 'seriesDesc') {\n          subBlocks.reverse();\n        }\n    }\n\n    each(subBlocks, function (subBlock, idx) {\n      var valueFormatter = fragment.valueFormatter;\n      var subMarkupText = getBuilder(subBlock)( // Inherit valueFormatter\n      valueFormatter ? extend(extend({}, ctx), {\n        valueFormatter: valueFormatter\n      }) : ctx, subBlock, idx > 0 ? gaps.html : 0, toolTipTextStyle);\n      subMarkupText != null && subMarkupTextList.push(subMarkupText);\n    });\n    var subMarkupText = ctx.renderMode === 'richText' ? subMarkupTextList.join(gaps.richText) : wrapBlockHTML(subMarkupTextList.join(''), noHeader ? topMarginForOuterGap : gaps.html);\n\n    if (noHeader) {\n      return subMarkupText;\n    }\n\n    var displayableHeader = makeValueReadable(fragment.header, 'ordinal', ctx.useUTC);\n    var nameStyle = getTooltipTextStyle(toolTipTextStyle, ctx.renderMode).nameStyle;\n\n    if (ctx.renderMode === 'richText') {\n      return wrapInlineNameRichText(ctx, displayableHeader, nameStyle) + gaps.richText + subMarkupText;\n    } else {\n      return wrapBlockHTML(\"<div style=\\\"\" + nameStyle + \";\" + TOOLTIP_LINE_HEIGHT_CSS + \";\\\">\" + encodeHTML(displayableHeader) + '</div>' + subMarkupText, topMarginForOuterGap);\n    }\n  }\n\n  function buildNameValue(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n    var renderMode = ctx.renderMode;\n    var noName = fragment.noName;\n    var noValue = fragment.noValue;\n    var noMarker = !fragment.markerType;\n    var name = fragment.name;\n    var useUTC = ctx.useUTC;\n\n    var valueFormatter = fragment.valueFormatter || ctx.valueFormatter || function (value) {\n      value = isArray(value) ? value : [value];\n      return map(value, function (val, idx) {\n        return makeValueReadable(val, isArray(valueTypeOption) ? valueTypeOption[idx] : valueTypeOption, useUTC);\n      });\n    };\n\n    if (noName && noValue) {\n      return;\n    }\n\n    var markerStr = noMarker ? '' : ctx.markupStyleCreator.makeTooltipMarker(fragment.markerType, fragment.markerColor || '#333', renderMode);\n    var readableName = noName ? '' : makeValueReadable(name, 'ordinal', useUTC);\n    var valueTypeOption = fragment.valueType;\n    var readableValueList = noValue ? [] : valueFormatter(fragment.value);\n    var valueAlignRight = !noMarker || !noName; // It little weird if only value next to marker but far from marker.\n\n    var valueCloseToMarker = !noMarker && noName;\n\n    var _a = getTooltipTextStyle(toolTipTextStyle, renderMode),\n        nameStyle = _a.nameStyle,\n        valueStyle = _a.valueStyle;\n\n    return renderMode === 'richText' ? (noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameRichText(ctx, readableName, nameStyle)) // Value has commas inside, so use ' ' as delimiter for multiple values.\n    + (noValue ? '' : wrapInlineValueRichText(ctx, readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)) : wrapBlockHTML((noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameHTML(readableName, !noMarker, nameStyle)) + (noValue ? '' : wrapInlineValueHTML(readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)), topMarginForOuterGap);\n  }\n  /**\n   * @return markupText. null/undefined means no content.\n   */\n\n\n  function buildTooltipMarkup(fragment, markupStyleCreator, renderMode, orderMode, useUTC, toolTipTextStyle) {\n    if (!fragment) {\n      return;\n    }\n\n    var builder = getBuilder(fragment);\n    var ctx = {\n      useUTC: useUTC,\n      renderMode: renderMode,\n      orderMode: orderMode,\n      markupStyleCreator: markupStyleCreator,\n      valueFormatter: fragment.valueFormatter\n    };\n    return builder(ctx, fragment, 0, toolTipTextStyle);\n  }\n\n  function getGap(gapLevel) {\n    return {\n      html: HTML_GAPS[gapLevel],\n      richText: RICH_TEXT_GAPS[gapLevel]\n    };\n  }\n\n  function wrapBlockHTML(encodedContent, topGap) {\n    var clearfix = '<div style=\"clear:both\"></div>';\n    var marginCSS = \"margin: \" + topGap + \"px 0 0\";\n    return \"<div style=\\\"\" + marginCSS + \";\" + TOOLTIP_LINE_HEIGHT_CSS + \";\\\">\" + encodedContent + clearfix + '</div>';\n  }\n\n  function wrapInlineNameHTML(name, leftHasMarker, style) {\n    var marginCss = leftHasMarker ? 'margin-left:2px' : '';\n    return \"<span style=\\\"\" + style + \";\" + marginCss + \"\\\">\" + encodeHTML(name) + '</span>';\n  }\n\n  function wrapInlineValueHTML(valueList, alignRight, valueCloseToMarker, style) {\n    // Do not too close to marker, considering there are multiple values separated by spaces.\n    var paddingStr = valueCloseToMarker ? '10px' : '20px';\n    var alignCSS = alignRight ? \"float:right;margin-left:\" + paddingStr : '';\n    valueList = isArray(valueList) ? valueList : [valueList];\n    return \"<span style=\\\"\" + alignCSS + \";\" + style + \"\\\">\" // Value has commas inside, so use '  ' as delimiter for multiple values.\n    + map(valueList, function (value) {\n      return encodeHTML(value);\n    }).join('&nbsp;&nbsp;') + '</span>';\n  }\n\n  function wrapInlineNameRichText(ctx, name, style) {\n    return ctx.markupStyleCreator.wrapRichTextStyle(name, style);\n  }\n\n  function wrapInlineValueRichText(ctx, values, alignRight, valueCloseToMarker, style) {\n    var styles = [style];\n    var paddingLeft = valueCloseToMarker ? 10 : 20;\n    alignRight && styles.push({\n      padding: [0, 0, 0, paddingLeft],\n      align: 'right'\n    }); // Value has commas inside, so use '  ' as delimiter for multiple values.\n\n    return ctx.markupStyleCreator.wrapRichTextStyle(isArray(values) ? values.join('  ') : values, styles);\n  }\n\n  function retrieveVisualColorForTooltipMarker(series, dataIndex) {\n    var style = series.getData().getItemVisual(dataIndex, 'style');\n    var color = style[series.visualDrawType];\n    return convertToColorString(color);\n  }\n\n  function getPaddingFromTooltipModel(model, renderMode) {\n    var padding = model.get('padding');\n    return padding != null ? padding // We give slightly different to look pretty.\n    : renderMode === 'richText' ? [8, 10] : 10;\n  }\n  /**\n   * The major feature is generate styles for `renderMode: 'richText'`.\n   * But it also serves `renderMode: 'html'` to provide\n   * \"renderMode-independent\" API.\n   */\n\n\n  var TooltipMarkupStyleCreator =\n  /** @class */\n  function () {\n    function TooltipMarkupStyleCreator() {\n      this.richTextStyles = {}; // Notice that \"generate a style name\" usuall happens repeatly when mouse moving and\n      // displaying a tooltip. So we put the `_nextStyleNameId` as a member of each creator\n      // rather than static shared by all creators (which will cause it increase to fast).\n\n      this._nextStyleNameId = getRandomIdBase();\n    }\n\n    TooltipMarkupStyleCreator.prototype._generateStyleName = function () {\n      return '__EC_aUTo_' + this._nextStyleNameId++;\n    };\n\n    TooltipMarkupStyleCreator.prototype.makeTooltipMarker = function (markerType, colorStr, renderMode) {\n      var markerId = renderMode === 'richText' ? this._generateStyleName() : null;\n      var marker = getTooltipMarker({\n        color: colorStr,\n        type: markerType,\n        renderMode: renderMode,\n        markerId: markerId\n      });\n\n      if (isString(marker)) {\n        return marker;\n      } else {\n        {\n          assert(markerId);\n        }\n        this.richTextStyles[markerId] = marker.style;\n        return marker.content;\n      }\n    };\n    /**\n     * @usage\n     * ```ts\n     * const styledText = markupStyleCreator.wrapRichTextStyle([\n     *     // The styles will be auto merged.\n     *     {\n     *         fontSize: 12,\n     *         color: 'blue'\n     *     },\n     *     {\n     *         padding: 20\n     *     }\n     * ]);\n     * ```\n     */\n\n\n    TooltipMarkupStyleCreator.prototype.wrapRichTextStyle = function (text, styles) {\n      var finalStl = {};\n\n      if (isArray(styles)) {\n        each(styles, function (stl) {\n          return extend(finalStl, stl);\n        });\n      } else {\n        extend(finalStl, styles);\n      }\n\n      var styleName = this._generateStyleName();\n\n      this.richTextStyles[styleName] = finalStl;\n      return \"{\" + styleName + \"|\" + text + \"}\";\n    };\n\n    return TooltipMarkupStyleCreator;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function defaultSeriesFormatTooltip(opt) {\n    var series = opt.series;\n    var dataIndex = opt.dataIndex;\n    var multipleSeries = opt.multipleSeries;\n    var data = series.getData();\n    var tooltipDims = data.mapDimensionsAll('defaultedTooltip');\n    var tooltipDimLen = tooltipDims.length;\n    var value = series.getRawValue(dataIndex);\n    var isValueArr = isArray(value);\n    var markerColor = retrieveVisualColorForTooltipMarker(series, dataIndex); // Complicated rule for pretty tooltip.\n\n    var inlineValue;\n    var inlineValueType;\n    var subBlocks;\n    var sortParam;\n\n    if (tooltipDimLen > 1 || isValueArr && !tooltipDimLen) {\n      var formatArrResult = formatTooltipArrayValue(value, series, dataIndex, tooltipDims, markerColor);\n      inlineValue = formatArrResult.inlineValues;\n      inlineValueType = formatArrResult.inlineValueTypes;\n      subBlocks = formatArrResult.blocks; // Only support tooltip sort by the first inline value. It's enough in most cases.\n\n      sortParam = formatArrResult.inlineValues[0];\n    } else if (tooltipDimLen) {\n      var dimInfo = data.getDimensionInfo(tooltipDims[0]);\n      sortParam = inlineValue = retrieveRawValue(data, dataIndex, tooltipDims[0]);\n      inlineValueType = dimInfo.type;\n    } else {\n      sortParam = inlineValue = isValueArr ? value[0] : value;\n    } // Do not show generated series name. It might not be readable.\n\n\n    var seriesNameSpecified = isNameSpecified(series);\n    var seriesName = seriesNameSpecified && series.name || '';\n    var itemName = data.getName(dataIndex);\n    var inlineName = multipleSeries ? seriesName : itemName;\n    return createTooltipMarkup('section', {\n      header: seriesName,\n      // When series name not specified, do not show a header line with only '-'.\n      // This case alway happen in tooltip.trigger: 'item'.\n      noHeader: multipleSeries || !seriesNameSpecified,\n      sortParam: sortParam,\n      blocks: [createTooltipMarkup('nameValue', {\n        markerType: 'item',\n        markerColor: markerColor,\n        // Do not mix display seriesName and itemName in one tooltip,\n        // which might confuses users.\n        name: inlineName,\n        // name dimension might be auto assigned, where the name might\n        // be not readable. So we check trim here.\n        noName: !trim(inlineName),\n        value: inlineValue,\n        valueType: inlineValueType\n      })].concat(subBlocks || [])\n    });\n  }\n\n  function formatTooltipArrayValue(value, series, dataIndex, tooltipDims, colorStr) {\n    // check: category-no-encode-has-axis-data in dataset.html\n    var data = series.getData();\n    var isValueMultipleLine = reduce(value, function (isValueMultipleLine, val, idx) {\n      var dimItem = data.getDimensionInfo(idx);\n      return isValueMultipleLine = isValueMultipleLine || dimItem && dimItem.tooltip !== false && dimItem.displayName != null;\n    }, false);\n    var inlineValues = [];\n    var inlineValueTypes = [];\n    var blocks = [];\n    tooltipDims.length ? each(tooltipDims, function (dim) {\n      setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\n    }) // By default, all dims is used on tooltip.\n    : each(value, setEachItem);\n\n    function setEachItem(val, dim) {\n      var dimInfo = data.getDimensionInfo(dim); // If `dimInfo.tooltip` is not set, show tooltip.\n\n      if (!dimInfo || dimInfo.otherDims.tooltip === false) {\n        return;\n      }\n\n      if (isValueMultipleLine) {\n        blocks.push(createTooltipMarkup('nameValue', {\n          markerType: 'subItem',\n          markerColor: colorStr,\n          name: dimInfo.displayName,\n          value: val,\n          valueType: dimInfo.type\n        }));\n      } else {\n        inlineValues.push(val);\n        inlineValueTypes.push(dimInfo.type);\n      }\n    }\n\n    return {\n      inlineValues: inlineValues,\n      inlineValueTypes: inlineValueTypes,\n      blocks: blocks\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var inner$1 = makeInner();\n\n  function getSelectionKey(data, dataIndex) {\n    return data.getName(dataIndex) || data.getId(dataIndex);\n  }\n\n  var SERIES_UNIVERSAL_TRANSITION_PROP = '__universalTransitionEnabled';\n\n  var SeriesModel =\n  /** @class */\n  function (_super) {\n    __extends(SeriesModel, _super);\n\n    function SeriesModel() {\n      // [Caution]: Becuase this class or desecendants can be used as `XXX.extend(subProto)`,\n      // the class members must not be initialized in constructor or declaration place.\n      // Otherwise there is bad case:\n      //   class A {xxx = 1;}\n      //   enableClassExtend(A);\n      //   class B extends A {}\n      //   var C = B.extend({xxx: 5});\n      //   var c = new C();\n      //   console.log(c.xxx); // expect 5 but always 1.\n      var _this = _super !== null && _super.apply(this, arguments) || this; // ---------------------------------------\n      // Props about data selection\n      // ---------------------------------------\n\n\n      _this._selectedDataIndicesMap = {};\n      return _this;\n    }\n\n    SeriesModel.prototype.init = function (option, parentModel, ecModel) {\n      this.seriesIndex = this.componentIndex;\n      this.dataTask = createTask({\n        count: dataTaskCount,\n        reset: dataTaskReset\n      });\n      this.dataTask.context = {\n        model: this\n      };\n      this.mergeDefaultAndTheme(option, ecModel);\n      var sourceManager = inner$1(this).sourceManager = new SourceManager(this);\n      sourceManager.prepareSource();\n      var data = this.getInitialData(option, ecModel);\n      wrapData(data, this);\n      this.dataTask.context.data = data;\n      {\n        assert(data, 'getInitialData returned invalid data.');\n      }\n      inner$1(this).dataBeforeProcessed = data; // If we reverse the order (make data firstly, and then make\n      // dataBeforeProcessed by cloneShallow), cloneShallow will\n      // cause data.graph.data !== data when using\n      // module:echarts/data/Graph or module:echarts/data/Tree.\n      // See module:echarts/data/helper/linkSeriesData\n      // Theoretically, it is unreasonable to call `seriesModel.getData()` in the model\n      // init or merge stage, because the data can be restored. So we do not `restoreData`\n      // and `setData` here, which forbids calling `seriesModel.getData()` in this stage.\n      // Call `seriesModel.getRawData()` instead.\n      // this.restoreData();\n\n      autoSeriesName(this);\n\n      this._initSelectedMapFromData(data);\n    };\n    /**\n     * Util for merge default and theme to option\n     */\n\n\n    SeriesModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n      var layoutMode = fetchLayoutMode(this);\n      var inputPositionParams = layoutMode ? getLayoutParams(option) : {}; // Backward compat: using subType on theme.\n      // But if name duplicate between series subType\n      // (for example: parallel) add component mainType,\n      // add suffix 'Series'.\n\n      var themeSubType = this.subType;\n\n      if (ComponentModel.hasClass(themeSubType)) {\n        themeSubType += 'Series';\n      }\n\n      merge(option, ecModel.getTheme().get(this.subType));\n      merge(option, this.getDefaultOption()); // Default label emphasis `show`\n\n      defaultEmphasis(option, 'label', ['show']);\n      this.fillDataTextStyle(option.data);\n\n      if (layoutMode) {\n        mergeLayoutParam(option, inputPositionParams, layoutMode);\n      }\n    };\n\n    SeriesModel.prototype.mergeOption = function (newSeriesOption, ecModel) {\n      // this.settingTask.dirty();\n      newSeriesOption = merge(this.option, newSeriesOption, true);\n      this.fillDataTextStyle(newSeriesOption.data);\n      var layoutMode = fetchLayoutMode(this);\n\n      if (layoutMode) {\n        mergeLayoutParam(this.option, newSeriesOption, layoutMode);\n      }\n\n      var sourceManager = inner$1(this).sourceManager;\n      sourceManager.dirty();\n      sourceManager.prepareSource();\n      var data = this.getInitialData(newSeriesOption, ecModel);\n      wrapData(data, this);\n      this.dataTask.dirty();\n      this.dataTask.context.data = data;\n      inner$1(this).dataBeforeProcessed = data;\n      autoSeriesName(this);\n\n      this._initSelectedMapFromData(data);\n    };\n\n    SeriesModel.prototype.fillDataTextStyle = function (data) {\n      // Default data label emphasis `show`\n      // FIXME Tree structure data ?\n      // FIXME Performance ?\n      if (data && !isTypedArray(data)) {\n        var props = ['show'];\n\n        for (var i = 0; i < data.length; i++) {\n          if (data[i] && data[i].label) {\n            defaultEmphasis(data[i], 'label', props);\n          }\n        }\n      }\n    };\n    /**\n     * Init a data structure from data related option in series\n     * Must be overriden.\n     */\n\n\n    SeriesModel.prototype.getInitialData = function (option, ecModel) {\n      return;\n    };\n    /**\n     * Append data to list\n     */\n\n\n    SeriesModel.prototype.appendData = function (params) {\n      // FIXME ???\n      // (1) If data from dataset, forbidden append.\n      // (2) support append data of dataset.\n      var data = this.getRawData();\n      data.appendData(params.data);\n    };\n    /**\n     * Consider some method like `filter`, `map` need make new data,\n     * We should make sure that `seriesModel.getData()` get correct\n     * data in the stream procedure. So we fetch data from upstream\n     * each time `task.perform` called.\n     */\n\n\n    SeriesModel.prototype.getData = function (dataType) {\n      var task = getCurrentTask(this);\n\n      if (task) {\n        var data = task.context.data;\n        return dataType == null ? data : data.getLinkedData(dataType);\n      } else {\n        // When series is not alive (that may happen when click toolbox\n        // restore or setOption with not merge mode), series data may\n        // be still need to judge animation or something when graphic\n        // elements want to know whether fade out.\n        return inner$1(this).data;\n      }\n    };\n\n    SeriesModel.prototype.getAllData = function () {\n      var mainData = this.getData();\n      return mainData && mainData.getLinkedDataAll ? mainData.getLinkedDataAll() : [{\n        data: mainData\n      }];\n    };\n\n    SeriesModel.prototype.setData = function (data) {\n      var task = getCurrentTask(this);\n\n      if (task) {\n        var context = task.context; // Consider case: filter, data sample.\n        // FIXME:TS never used, so comment it\n        // if (context.data !== data && task.modifyOutputEnd) {\n        //     task.setOutputEnd(data.count());\n        // }\n\n        context.outputData = data; // Caution: setData should update context.data,\n        // Because getData may be called multiply in a\n        // single stage and expect to get the data just\n        // set. (For example, AxisProxy, x y both call\n        // getData and setDate sequentially).\n        // So the context.data should be fetched from\n        // upstream each time when a stage starts to be\n        // performed.\n\n        if (task !== this.dataTask) {\n          context.data = data;\n        }\n      }\n\n      inner$1(this).data = data;\n    };\n\n    SeriesModel.prototype.getEncode = function () {\n      var encode = this.get('encode', true);\n\n      if (encode) {\n        return createHashMap(encode);\n      }\n    };\n\n    SeriesModel.prototype.getSourceManager = function () {\n      return inner$1(this).sourceManager;\n    };\n\n    SeriesModel.prototype.getSource = function () {\n      return this.getSourceManager().getSource();\n    };\n    /**\n     * Get data before processed\n     */\n\n\n    SeriesModel.prototype.getRawData = function () {\n      return inner$1(this).dataBeforeProcessed;\n    };\n\n    SeriesModel.prototype.getColorBy = function () {\n      var colorBy = this.get('colorBy');\n      return colorBy || 'series';\n    };\n\n    SeriesModel.prototype.isColorBySeries = function () {\n      return this.getColorBy() === 'series';\n    };\n    /**\n     * Get base axis if has coordinate system and has axis.\n     * By default use coordSys.getBaseAxis();\n     * Can be overrided for some chart.\n     * @return {type} description\n     */\n\n\n    SeriesModel.prototype.getBaseAxis = function () {\n      var coordSys = this.coordinateSystem; // @ts-ignore\n\n      return coordSys && coordSys.getBaseAxis && coordSys.getBaseAxis();\n    };\n    /**\n     * Default tooltip formatter\n     *\n     * @param dataIndex\n     * @param multipleSeries\n     * @param dataType\n     * @param renderMode valid values: 'html'(by default) and 'richText'.\n     *        'html' is used for rendering tooltip in extra DOM form, and the result\n     *        string is used as DOM HTML content.\n     *        'richText' is used for rendering tooltip in rich text form, for those where\n     *        DOM operation is not supported.\n     * @return formatted tooltip with `html` and `markers`\n     *        Notice: The override method can also return string\n     */\n\n\n    SeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n      return defaultSeriesFormatTooltip({\n        series: this,\n        dataIndex: dataIndex,\n        multipleSeries: multipleSeries\n      });\n    };\n\n    SeriesModel.prototype.isAnimationEnabled = function () {\n      var ecModel = this.ecModel; // Disable animation if using echarts in node but not give ssr flag.\n      // In ssr mode, renderToString will generate svg with css animation.\n\n      if (env.node && !(ecModel && ecModel.ssr)) {\n        return false;\n      }\n\n      var animationEnabled = this.getShallow('animation');\n\n      if (animationEnabled) {\n        if (this.getData().count() > this.getShallow('animationThreshold')) {\n          animationEnabled = false;\n        }\n      }\n\n      return !!animationEnabled;\n    };\n\n    SeriesModel.prototype.restoreData = function () {\n      this.dataTask.dirty();\n    };\n\n    SeriesModel.prototype.getColorFromPalette = function (name, scope, requestColorNum) {\n      var ecModel = this.ecModel; // PENDING\n\n      var color = PaletteMixin.prototype.getColorFromPalette.call(this, name, scope, requestColorNum);\n\n      if (!color) {\n        color = ecModel.getColorFromPalette(name, scope, requestColorNum);\n      }\n\n      return color;\n    };\n    /**\n     * Use `data.mapDimensionsAll(coordDim)` instead.\n     * @deprecated\n     */\n\n\n    SeriesModel.prototype.coordDimToDataDim = function (coordDim) {\n      return this.getRawData().mapDimensionsAll(coordDim);\n    };\n    /**\n     * Get progressive rendering count each step\n     */\n\n\n    SeriesModel.prototype.getProgressive = function () {\n      return this.get('progressive');\n    };\n    /**\n     * Get progressive rendering count each step\n     */\n\n\n    SeriesModel.prototype.getProgressiveThreshold = function () {\n      return this.get('progressiveThreshold');\n    }; // PENGING If selectedMode is null ?\n\n\n    SeriesModel.prototype.select = function (innerDataIndices, dataType) {\n      this._innerSelect(this.getData(dataType), innerDataIndices);\n    };\n\n    SeriesModel.prototype.unselect = function (innerDataIndices, dataType) {\n      var selectedMap = this.option.selectedMap;\n\n      if (!selectedMap) {\n        return;\n      }\n\n      var selectedMode = this.option.selectedMode;\n      var data = this.getData(dataType);\n\n      if (selectedMode === 'series' || selectedMap === 'all') {\n        this.option.selectedMap = {};\n        this._selectedDataIndicesMap = {};\n        return;\n      }\n\n      for (var i = 0; i < innerDataIndices.length; i++) {\n        var dataIndex = innerDataIndices[i];\n        var nameOrId = getSelectionKey(data, dataIndex);\n        selectedMap[nameOrId] = false;\n        this._selectedDataIndicesMap[nameOrId] = -1;\n      }\n    };\n\n    SeriesModel.prototype.toggleSelect = function (innerDataIndices, dataType) {\n      var tmpArr = [];\n\n      for (var i = 0; i < innerDataIndices.length; i++) {\n        tmpArr[0] = innerDataIndices[i];\n        this.isSelected(innerDataIndices[i], dataType) ? this.unselect(tmpArr, dataType) : this.select(tmpArr, dataType);\n      }\n    };\n\n    SeriesModel.prototype.getSelectedDataIndices = function () {\n      if (this.option.selectedMap === 'all') {\n        return [].slice.call(this.getData().getIndices());\n      }\n\n      var selectedDataIndicesMap = this._selectedDataIndicesMap;\n      var nameOrIds = keys(selectedDataIndicesMap);\n      var dataIndices = [];\n\n      for (var i = 0; i < nameOrIds.length; i++) {\n        var dataIndex = selectedDataIndicesMap[nameOrIds[i]];\n\n        if (dataIndex >= 0) {\n          dataIndices.push(dataIndex);\n        }\n      }\n\n      return dataIndices;\n    };\n\n    SeriesModel.prototype.isSelected = function (dataIndex, dataType) {\n      var selectedMap = this.option.selectedMap;\n\n      if (!selectedMap) {\n        return false;\n      }\n\n      var data = this.getData(dataType);\n      return (selectedMap === 'all' || selectedMap[getSelectionKey(data, dataIndex)]) && !data.getItemModel(dataIndex).get(['select', 'disabled']);\n    };\n\n    SeriesModel.prototype.isUniversalTransitionEnabled = function () {\n      if (this[SERIES_UNIVERSAL_TRANSITION_PROP]) {\n        return true;\n      }\n\n      var universalTransitionOpt = this.option.universalTransition; // Quick reject\n\n      if (!universalTransitionOpt) {\n        return false;\n      }\n\n      if (universalTransitionOpt === true) {\n        return true;\n      } // Can be simply 'universalTransition: true'\n\n\n      return universalTransitionOpt && universalTransitionOpt.enabled;\n    };\n\n    SeriesModel.prototype._innerSelect = function (data, innerDataIndices) {\n      var _a, _b;\n\n      var option = this.option;\n      var selectedMode = option.selectedMode;\n      var len = innerDataIndices.length;\n\n      if (!selectedMode || !len) {\n        return;\n      }\n\n      if (selectedMode === 'series') {\n        option.selectedMap = 'all';\n      } else if (selectedMode === 'multiple') {\n        if (!isObject(option.selectedMap)) {\n          option.selectedMap = {};\n        }\n\n        var selectedMap = option.selectedMap;\n\n        for (var i = 0; i < len; i++) {\n          var dataIndex = innerDataIndices[i]; // TODO diffrent types of data share same object.\n\n          var nameOrId = getSelectionKey(data, dataIndex);\n          selectedMap[nameOrId] = true;\n          this._selectedDataIndicesMap[nameOrId] = data.getRawIndex(dataIndex);\n        }\n      } else if (selectedMode === 'single' || selectedMode === true) {\n        var lastDataIndex = innerDataIndices[len - 1];\n        var nameOrId = getSelectionKey(data, lastDataIndex);\n        option.selectedMap = (_a = {}, _a[nameOrId] = true, _a);\n        this._selectedDataIndicesMap = (_b = {}, _b[nameOrId] = data.getRawIndex(lastDataIndex), _b);\n      }\n    };\n\n    SeriesModel.prototype._initSelectedMapFromData = function (data) {\n      // Ignore select info in data if selectedMap exists.\n      // NOTE It's only for legacy usage. edge data is not supported.\n      if (this.option.selectedMap) {\n        return;\n      }\n\n      var dataIndices = [];\n\n      if (data.hasItemOption) {\n        data.each(function (idx) {\n          var rawItem = data.getRawDataItem(idx);\n\n          if (rawItem && rawItem.selected) {\n            dataIndices.push(idx);\n          }\n        });\n      }\n\n      if (dataIndices.length > 0) {\n        this._innerSelect(data, dataIndices);\n      }\n    }; // /**\n    //  * @see {module:echarts/stream/Scheduler}\n    //  */\n    // abstract pipeTask: null\n\n\n    SeriesModel.registerClass = function (clz) {\n      return ComponentModel.registerClass(clz);\n    };\n\n    SeriesModel.protoInitialize = function () {\n      var proto = SeriesModel.prototype;\n      proto.type = 'series.__base__';\n      proto.seriesIndex = 0;\n      proto.ignoreStyleOnData = false;\n      proto.hasSymbolVisual = false;\n      proto.defaultSymbol = 'circle'; // Make sure the values can be accessed!\n\n      proto.visualStyleAccessPath = 'itemStyle';\n      proto.visualDrawType = 'fill';\n    }();\n\n    return SeriesModel;\n  }(ComponentModel);\n\n  mixin(SeriesModel, DataFormatMixin);\n  mixin(SeriesModel, PaletteMixin);\n  mountExtend(SeriesModel, ComponentModel);\n  /**\n   * MUST be called after `prepareSource` called\n   * Here we need to make auto series, especially for auto legend. But we\n   * do not modify series.name in option to avoid side effects.\n   */\n\n  function autoSeriesName(seriesModel) {\n    // User specified name has higher priority, otherwise it may cause\n    // series can not be queried unexpectedly.\n    var name = seriesModel.name;\n\n    if (!isNameSpecified(seriesModel)) {\n      seriesModel.name = getSeriesAutoName(seriesModel) || name;\n    }\n  }\n\n  function getSeriesAutoName(seriesModel) {\n    var data = seriesModel.getRawData();\n    var dataDims = data.mapDimensionsAll('seriesName');\n    var nameArr = [];\n    each(dataDims, function (dataDim) {\n      var dimInfo = data.getDimensionInfo(dataDim);\n      dimInfo.displayName && nameArr.push(dimInfo.displayName);\n    });\n    return nameArr.join(' ');\n  }\n\n  function dataTaskCount(context) {\n    return context.model.getRawData().count();\n  }\n\n  function dataTaskReset(context) {\n    var seriesModel = context.model;\n    seriesModel.setData(seriesModel.getRawData().cloneShallow());\n    return dataTaskProgress;\n  }\n\n  function dataTaskProgress(param, context) {\n    // Avoid repead cloneShallow when data just created in reset.\n    if (context.outputData && param.end > context.outputData.count()) {\n      context.model.getRawData().cloneShallow(context.outputData);\n    }\n  } // TODO refactor\n\n\n  function wrapData(data, seriesModel) {\n    each(concatArray(data.CHANGABLE_METHODS, data.DOWNSAMPLE_METHODS), function (methodName) {\n      data.wrapMethod(methodName, curry(onDataChange, seriesModel));\n    });\n  }\n\n  function onDataChange(seriesModel, newList) {\n    var task = getCurrentTask(seriesModel);\n\n    if (task) {\n      // Consider case: filter, selectRange\n      task.setOutputEnd((newList || this).count());\n    }\n\n    return newList;\n  }\n\n  function getCurrentTask(seriesModel) {\n    var scheduler = (seriesModel.ecModel || {}).scheduler;\n    var pipeline = scheduler && scheduler.getPipeline(seriesModel.uid);\n\n    if (pipeline) {\n      // When pipline finished, the currrentTask keep the last\n      // task (renderTask).\n      var task = pipeline.currentTask;\n\n      if (task) {\n        var agentStubMap = task.agentStubMap;\n\n        if (agentStubMap) {\n          task = agentStubMap.get(seriesModel.uid);\n        }\n      }\n\n      return task;\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var ComponentView =\n  /** @class */\n  function () {\n    function ComponentView() {\n      this.group = new Group();\n      this.uid = getUID('viewComponent');\n    }\n\n    ComponentView.prototype.init = function (ecModel, api) {};\n\n    ComponentView.prototype.render = function (model, ecModel, api, payload) {};\n\n    ComponentView.prototype.dispose = function (ecModel, api) {};\n\n    ComponentView.prototype.updateView = function (model, ecModel, api, payload) {// Do nothing;\n    };\n\n    ComponentView.prototype.updateLayout = function (model, ecModel, api, payload) {// Do nothing;\n    };\n\n    ComponentView.prototype.updateVisual = function (model, ecModel, api, payload) {// Do nothing;\n    };\n    /**\n     * Hook for toggle blur target series.\n     * Can be used in marker for blur or leave blur the markers\n     */\n\n\n    ComponentView.prototype.toggleBlurSeries = function (seriesModels, isBlur, ecModel) {// Do nothing;\n    };\n    /**\n     * Traverse the new rendered elements.\n     *\n     * It will traverse the new added element in progressive rendering.\n     * And traverse all in normal rendering.\n     */\n\n\n    ComponentView.prototype.eachRendered = function (cb) {\n      var group = this.group;\n\n      if (group) {\n        group.traverse(cb);\n      }\n    };\n\n    return ComponentView;\n  }();\n\n  enableClassExtend(ComponentView);\n  enableClassManagement(ComponentView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * @return {string} If large mode changed, return string 'reset';\n   */\n\n  function createRenderPlanner() {\n    var inner = makeInner();\n    return function (seriesModel) {\n      var fields = inner(seriesModel);\n      var pipelineContext = seriesModel.pipelineContext;\n      var originalLarge = !!fields.large;\n      var originalProgressive = !!fields.progressiveRender; // FIXME: if the planner works on a filtered series, `pipelineContext` does not\n      // exists. See #11611 . Probably we need to modify this structure, see the comment\n      // on `performRawSeries` in `Schedular.js`.\n\n      var large = fields.large = !!(pipelineContext && pipelineContext.large);\n      var progressive = fields.progressiveRender = !!(pipelineContext && pipelineContext.progressiveRender);\n      return !!(originalLarge !== large || originalProgressive !== progressive) && 'reset';\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var inner$2 = makeInner();\n  var renderPlanner = createRenderPlanner();\n\n  var ChartView =\n  /** @class */\n  function () {\n    function ChartView() {\n      this.group = new Group();\n      this.uid = getUID('viewChart');\n      this.renderTask = createTask({\n        plan: renderTaskPlan,\n        reset: renderTaskReset\n      });\n      this.renderTask.context = {\n        view: this\n      };\n    }\n\n    ChartView.prototype.init = function (ecModel, api) {};\n\n    ChartView.prototype.render = function (seriesModel, ecModel, api, payload) {\n      {\n        throw new Error('render method must been implemented');\n      }\n    };\n    /**\n     * Highlight series or specified data item.\n     */\n\n\n    ChartView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n      var data = seriesModel.getData(payload && payload.dataType);\n\n      if (!data) {\n        {\n          error(\"Unknown dataType \" + payload.dataType);\n        }\n        return;\n      }\n\n      toggleHighlight(data, payload, 'emphasis');\n    };\n    /**\n     * Downplay series or specified data item.\n     */\n\n\n    ChartView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n      var data = seriesModel.getData(payload && payload.dataType);\n\n      if (!data) {\n        {\n          error(\"Unknown dataType \" + payload.dataType);\n        }\n        return;\n      }\n\n      toggleHighlight(data, payload, 'normal');\n    };\n    /**\n     * Remove self.\n     */\n\n\n    ChartView.prototype.remove = function (ecModel, api) {\n      this.group.removeAll();\n    };\n    /**\n     * Dispose self.\n     */\n\n\n    ChartView.prototype.dispose = function (ecModel, api) {};\n\n    ChartView.prototype.updateView = function (seriesModel, ecModel, api, payload) {\n      this.render(seriesModel, ecModel, api, payload);\n    }; // FIXME never used?\n\n\n    ChartView.prototype.updateLayout = function (seriesModel, ecModel, api, payload) {\n      this.render(seriesModel, ecModel, api, payload);\n    }; // FIXME never used?\n\n\n    ChartView.prototype.updateVisual = function (seriesModel, ecModel, api, payload) {\n      this.render(seriesModel, ecModel, api, payload);\n    };\n    /**\n     * Traverse the new rendered elements.\n     *\n     * It will traverse the new added element in progressive rendering.\n     * And traverse all in normal rendering.\n     */\n\n\n    ChartView.prototype.eachRendered = function (cb) {\n      traverseElements(this.group, cb);\n    };\n\n    ChartView.markUpdateMethod = function (payload, methodName) {\n      inner$2(payload).updateMethod = methodName;\n    };\n\n    ChartView.protoInitialize = function () {\n      var proto = ChartView.prototype;\n      proto.type = 'chart';\n    }();\n\n    return ChartView;\n  }();\n  /**\n   * Set state of single element\n   */\n\n\n  function elSetState(el, state, highlightDigit) {\n    if (el && isHighDownDispatcher(el)) {\n      (state === 'emphasis' ? enterEmphasis : leaveEmphasis)(el, highlightDigit);\n    }\n  }\n\n  function toggleHighlight(data, payload, state) {\n    var dataIndex = queryDataIndex(data, payload);\n    var highlightDigit = payload && payload.highlightKey != null ? getHighlightDigit(payload.highlightKey) : null;\n\n    if (dataIndex != null) {\n      each(normalizeToArray(dataIndex), function (dataIdx) {\n        elSetState(data.getItemGraphicEl(dataIdx), state, highlightDigit);\n      });\n    } else {\n      data.eachItemGraphicEl(function (el) {\n        elSetState(el, state, highlightDigit);\n      });\n    }\n  }\n\n  enableClassExtend(ChartView, ['dispose']);\n  enableClassManagement(ChartView);\n\n  function renderTaskPlan(context) {\n    return renderPlanner(context.model);\n  }\n\n  function renderTaskReset(context) {\n    var seriesModel = context.model;\n    var ecModel = context.ecModel;\n    var api = context.api;\n    var payload = context.payload; // FIXME: remove updateView updateVisual\n\n    var progressiveRender = seriesModel.pipelineContext.progressiveRender;\n    var view = context.view;\n    var updateMethod = payload && inner$2(payload).updateMethod;\n    var methodName = progressiveRender ? 'incrementalPrepareRender' : updateMethod && view[updateMethod] ? updateMethod // `appendData` is also supported when data amount\n    // is less than progressive threshold.\n    : 'render';\n\n    if (methodName !== 'render') {\n      view[methodName](seriesModel, ecModel, api, payload);\n    }\n\n    return progressMethodMap[methodName];\n  }\n\n  var progressMethodMap = {\n    incrementalPrepareRender: {\n      progress: function (params, context) {\n        context.view.incrementalRender(params, context.model, context.ecModel, context.api, context.payload);\n      }\n    },\n    render: {\n      // Put view.render in `progress` to support appendData. But in this case\n      // view.render should not be called in reset, otherwise it will be called\n      // twise. Use `forceFirstProgress` to make sure that view.render is called\n      // in any cases.\n      forceFirstProgress: true,\n      progress: function (params, context) {\n        context.view.render(context.model, context.ecModel, context.api, context.payload);\n      }\n    }\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var ORIGIN_METHOD = '\\0__throttleOriginMethod';\n  var RATE = '\\0__throttleRate';\n  var THROTTLE_TYPE = '\\0__throttleType';\n  /**\n   * @public\n   * @param {(Function)} fn\n   * @param {number} [delay=0] Unit: ms.\n   * @param {boolean} [debounce=false]\n   *        true: If call interval less than `delay`, only the last call works.\n   *        false: If call interval less than `delay, call works on fixed rate.\n   * @return {(Function)} throttled fn.\n   */\n\n  function throttle(fn, delay, debounce) {\n    var currCall;\n    var lastCall = 0;\n    var lastExec = 0;\n    var timer = null;\n    var diff;\n    var scope;\n    var args;\n    var debounceNextCall;\n    delay = delay || 0;\n\n    function exec() {\n      lastExec = new Date().getTime();\n      timer = null;\n      fn.apply(scope, args || []);\n    }\n\n    var cb = function () {\n      var cbArgs = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        cbArgs[_i] = arguments[_i];\n      }\n\n      currCall = new Date().getTime();\n      scope = this;\n      args = cbArgs;\n      var thisDelay = debounceNextCall || delay;\n      var thisDebounce = debounceNextCall || debounce;\n      debounceNextCall = null;\n      diff = currCall - (thisDebounce ? lastCall : lastExec) - thisDelay;\n      clearTimeout(timer); // Here we should make sure that: the `exec` SHOULD NOT be called later\n      // than a new call of `cb`, that is, preserving the command order. Consider\n      // calculating \"scale rate\" when roaming as an example. When a call of `cb`\n      // happens, either the `exec` is called dierectly, or the call is delayed.\n      // But the delayed call should never be later than next call of `cb`. Under\n      // this assurance, we can simply update view state each time `dispatchAction`\n      // triggered by user roaming, but not need to add extra code to avoid the\n      // state being \"rolled-back\".\n\n      if (thisDebounce) {\n        timer = setTimeout(exec, thisDelay);\n      } else {\n        if (diff >= 0) {\n          exec();\n        } else {\n          timer = setTimeout(exec, -diff);\n        }\n      }\n\n      lastCall = currCall;\n    };\n    /**\n     * Clear throttle.\n     * @public\n     */\n\n\n    cb.clear = function () {\n      if (timer) {\n        clearTimeout(timer);\n        timer = null;\n      }\n    };\n    /**\n     * Enable debounce once.\n     */\n\n\n    cb.debounceNextCall = function (debounceDelay) {\n      debounceNextCall = debounceDelay;\n    };\n\n    return cb;\n  }\n  /**\n   * Create throttle method or update throttle rate.\n   *\n   * @example\n   * ComponentView.prototype.render = function () {\n   *     ...\n   *     throttle.createOrUpdate(\n   *         this,\n   *         '_dispatchAction',\n   *         this.model.get('throttle'),\n   *         'fixRate'\n   *     );\n   * };\n   * ComponentView.prototype.remove = function () {\n   *     throttle.clear(this, '_dispatchAction');\n   * };\n   * ComponentView.prototype.dispose = function () {\n   *     throttle.clear(this, '_dispatchAction');\n   * };\n   *\n   */\n\n\n  function createOrUpdate(obj, fnAttr, rate, throttleType) {\n    var fn = obj[fnAttr];\n\n    if (!fn) {\n      return;\n    }\n\n    var originFn = fn[ORIGIN_METHOD] || fn;\n    var lastThrottleType = fn[THROTTLE_TYPE];\n    var lastRate = fn[RATE];\n\n    if (lastRate !== rate || lastThrottleType !== throttleType) {\n      if (rate == null || !throttleType) {\n        return obj[fnAttr] = originFn;\n      }\n\n      fn = obj[fnAttr] = throttle(originFn, rate, throttleType === 'debounce');\n      fn[ORIGIN_METHOD] = originFn;\n      fn[THROTTLE_TYPE] = throttleType;\n      fn[RATE] = rate;\n    }\n\n    return fn;\n  }\n  /**\n   * Clear throttle. Example see throttle.createOrUpdate.\n   */\n\n\n  function clear(obj, fnAttr) {\n    var fn = obj[fnAttr];\n\n    if (fn && fn[ORIGIN_METHOD]) {\n      // Clear throttle\n      fn.clear && fn.clear();\n      obj[fnAttr] = fn[ORIGIN_METHOD];\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var inner$3 = makeInner();\n  var defaultStyleMappers = {\n    itemStyle: makeStyleMapper(ITEM_STYLE_KEY_MAP, true),\n    lineStyle: makeStyleMapper(LINE_STYLE_KEY_MAP, true)\n  };\n  var defaultColorKey = {\n    lineStyle: 'stroke',\n    itemStyle: 'fill'\n  };\n\n  function getStyleMapper(seriesModel, stylePath) {\n    var styleMapper = seriesModel.visualStyleMapper || defaultStyleMappers[stylePath];\n\n    if (!styleMapper) {\n      console.warn(\"Unkown style type '\" + stylePath + \"'.\");\n      return defaultStyleMappers.itemStyle;\n    }\n\n    return styleMapper;\n  }\n\n  function getDefaultColorKey(seriesModel, stylePath) {\n    // return defaultColorKey[stylePath] ||\n    var colorKey = seriesModel.visualDrawType || defaultColorKey[stylePath];\n\n    if (!colorKey) {\n      console.warn(\"Unkown style type '\" + stylePath + \"'.\");\n      return 'fill';\n    }\n\n    return colorKey;\n  }\n\n  var seriesStyleTask = {\n    createOnAllSeries: true,\n    performRawSeries: true,\n    reset: function (seriesModel, ecModel) {\n      var data = seriesModel.getData();\n      var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle'; // Set in itemStyle\n\n      var styleModel = seriesModel.getModel(stylePath);\n      var getStyle = getStyleMapper(seriesModel, stylePath);\n      var globalStyle = getStyle(styleModel);\n      var decalOption = styleModel.getShallow('decal');\n\n      if (decalOption) {\n        data.setVisual('decal', decalOption);\n        decalOption.dirty = true;\n      } // TODO\n\n\n      var colorKey = getDefaultColorKey(seriesModel, stylePath);\n      var color = globalStyle[colorKey]; // TODO style callback\n\n      var colorCallback = isFunction(color) ? color : null;\n      var hasAutoColor = globalStyle.fill === 'auto' || globalStyle.stroke === 'auto'; // Get from color palette by default.\n\n      if (!globalStyle[colorKey] || colorCallback || hasAutoColor) {\n        // Note: if some series has color specified (e.g., by itemStyle.color), we DO NOT\n        // make it effect palette. Bacause some scenarios users need to make some series\n        // transparent or as background, which should better not effect the palette.\n        var colorPalette = seriesModel.getColorFromPalette( // TODO series count changed.\n        seriesModel.name, null, ecModel.getSeriesCount());\n\n        if (!globalStyle[colorKey]) {\n          globalStyle[colorKey] = colorPalette;\n          data.setVisual('colorFromPalette', true);\n        }\n\n        globalStyle.fill = globalStyle.fill === 'auto' || isFunction(globalStyle.fill) ? colorPalette : globalStyle.fill;\n        globalStyle.stroke = globalStyle.stroke === 'auto' || isFunction(globalStyle.stroke) ? colorPalette : globalStyle.stroke;\n      }\n\n      data.setVisual('style', globalStyle);\n      data.setVisual('drawType', colorKey); // Only visible series has each data be visual encoded\n\n      if (!ecModel.isSeriesFiltered(seriesModel) && colorCallback) {\n        data.setVisual('colorFromPalette', false);\n        return {\n          dataEach: function (data, idx) {\n            var dataParams = seriesModel.getDataParams(idx);\n            var itemStyle = extend({}, globalStyle);\n            itemStyle[colorKey] = colorCallback(dataParams);\n            data.setItemVisual(idx, 'style', itemStyle);\n          }\n        };\n      }\n    }\n  };\n  var sharedModel = new Model();\n  var dataStyleTask = {\n    createOnAllSeries: true,\n    performRawSeries: true,\n    reset: function (seriesModel, ecModel) {\n      if (seriesModel.ignoreStyleOnData || ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle'; // Set in itemStyle\n\n      var getStyle = getStyleMapper(seriesModel, stylePath);\n      var colorKey = data.getVisual('drawType');\n      return {\n        dataEach: data.hasItemOption ? function (data, idx) {\n          // Not use getItemModel for performance considuration\n          var rawItem = data.getRawDataItem(idx);\n\n          if (rawItem && rawItem[stylePath]) {\n            sharedModel.option = rawItem[stylePath];\n            var style = getStyle(sharedModel);\n            var existsStyle = data.ensureUniqueItemVisual(idx, 'style');\n            extend(existsStyle, style);\n\n            if (sharedModel.option.decal) {\n              data.setItemVisual(idx, 'decal', sharedModel.option.decal);\n              sharedModel.option.decal.dirty = true;\n            }\n\n            if (colorKey in style) {\n              data.setItemVisual(idx, 'colorFromPalette', false);\n            }\n          }\n        } : null\n      };\n    }\n  }; // Pick color from palette for the data which has not been set with color yet.\n  // Note: do not support stream rendering. No such cases yet.\n\n  var dataColorPaletteTask = {\n    performRawSeries: true,\n    overallReset: function (ecModel) {\n      // Each type of series use one scope.\n      // Pie and funnel are using diferrent scopes\n      var paletteScopeGroupByType = createHashMap();\n      ecModel.eachSeries(function (seriesModel) {\n        var colorBy = seriesModel.getColorBy();\n\n        if (seriesModel.isColorBySeries()) {\n          return;\n        }\n\n        var key = seriesModel.type + '-' + colorBy;\n        var colorScope = paletteScopeGroupByType.get(key);\n\n        if (!colorScope) {\n          colorScope = {};\n          paletteScopeGroupByType.set(key, colorScope);\n        }\n\n        inner$3(seriesModel).scope = colorScope;\n      });\n      ecModel.eachSeries(function (seriesModel) {\n        if (seriesModel.isColorBySeries() || ecModel.isSeriesFiltered(seriesModel)) {\n          return;\n        }\n\n        var dataAll = seriesModel.getRawData();\n        var idxMap = {};\n        var data = seriesModel.getData();\n        var colorScope = inner$3(seriesModel).scope;\n        var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\n        var colorKey = getDefaultColorKey(seriesModel, stylePath);\n        data.each(function (idx) {\n          var rawIdx = data.getRawIndex(idx);\n          idxMap[rawIdx] = idx;\n        }); // Iterate on data before filtered. To make sure color from palette can be\n        // Consistent when toggling legend.\n\n        dataAll.each(function (rawIdx) {\n          var idx = idxMap[rawIdx];\n          var fromPalette = data.getItemVisual(idx, 'colorFromPalette'); // Get color from palette for each data only when the color is inherited from series color, which is\n          // also picked from color palette. So following situation is not in the case:\n          // 1. series.itemStyle.color is set\n          // 2. color is encoded by visualMap\n\n          if (fromPalette) {\n            var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\n            var name_1 = dataAll.getName(rawIdx) || rawIdx + '';\n            var dataCount = dataAll.count();\n            itemStyle[colorKey] = seriesModel.getColorFromPalette(name_1, colorScope, dataCount);\n          }\n        });\n      });\n    }\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var PI$3 = Math.PI;\n  /**\n   * @param {module:echarts/ExtensionAPI} api\n   * @param {Object} [opts]\n   * @param {string} [opts.text]\n   * @param {string} [opts.color]\n   * @param {string} [opts.textColor]\n   * @return {module:zrender/Element}\n   */\n\n  function defaultLoading(api, opts) {\n    opts = opts || {};\n    defaults(opts, {\n      text: 'loading',\n      textColor: '#000',\n      fontSize: 12,\n      fontWeight: 'normal',\n      fontStyle: 'normal',\n      fontFamily: 'sans-serif',\n      maskColor: 'rgba(255, 255, 255, 0.8)',\n      showSpinner: true,\n      color: '#5470c6',\n      spinnerRadius: 10,\n      lineWidth: 5,\n      zlevel: 0\n    });\n    var group = new Group();\n    var mask = new Rect({\n      style: {\n        fill: opts.maskColor\n      },\n      zlevel: opts.zlevel,\n      z: 10000\n    });\n    group.add(mask);\n    var textContent = new ZRText({\n      style: {\n        text: opts.text,\n        fill: opts.textColor,\n        fontSize: opts.fontSize,\n        fontWeight: opts.fontWeight,\n        fontStyle: opts.fontStyle,\n        fontFamily: opts.fontFamily\n      },\n      zlevel: opts.zlevel,\n      z: 10001\n    });\n    var labelRect = new Rect({\n      style: {\n        fill: 'none'\n      },\n      textContent: textContent,\n      textConfig: {\n        position: 'right',\n        distance: 10\n      },\n      zlevel: opts.zlevel,\n      z: 10001\n    });\n    group.add(labelRect);\n    var arc;\n\n    if (opts.showSpinner) {\n      arc = new Arc({\n        shape: {\n          startAngle: -PI$3 / 2,\n          endAngle: -PI$3 / 2 + 0.1,\n          r: opts.spinnerRadius\n        },\n        style: {\n          stroke: opts.color,\n          lineCap: 'round',\n          lineWidth: opts.lineWidth\n        },\n        zlevel: opts.zlevel,\n        z: 10001\n      });\n      arc.animateShape(true).when(1000, {\n        endAngle: PI$3 * 3 / 2\n      }).start('circularInOut');\n      arc.animateShape(true).when(1000, {\n        startAngle: PI$3 * 3 / 2\n      }).delay(300).start('circularInOut');\n      group.add(arc);\n    } // Inject resize\n\n\n    group.resize = function () {\n      var textWidth = textContent.getBoundingRect().width;\n      var r = opts.showSpinner ? opts.spinnerRadius : 0; // cx = (containerWidth - arcDiameter - textDistance - textWidth) / 2\n      // textDistance needs to be calculated when both animation and text exist\n\n      var cx = (api.getWidth() - r * 2 - (opts.showSpinner && textWidth ? 10 : 0) - textWidth) / 2 - (opts.showSpinner && textWidth ? 0 : 5 + textWidth / 2) // only show the text\n      + (opts.showSpinner ? 0 : textWidth / 2) // only show the spinner\n      + (textWidth ? 0 : r);\n      var cy = api.getHeight() / 2;\n      opts.showSpinner && arc.setShape({\n        cx: cx,\n        cy: cy\n      });\n      labelRect.setShape({\n        x: cx - r,\n        y: cy - r,\n        width: r * 2,\n        height: r * 2\n      });\n      mask.setShape({\n        x: 0,\n        y: 0,\n        width: api.getWidth(),\n        height: api.getHeight()\n      });\n    };\n\n    group.resize();\n    return group;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var Scheduler =\n  /** @class */\n  function () {\n    function Scheduler(ecInstance, api, dataProcessorHandlers, visualHandlers) {\n      // key: handlerUID\n      this._stageTaskMap = createHashMap();\n      this.ecInstance = ecInstance;\n      this.api = api; // Fix current processors in case that in some rear cases that\n      // processors might be registered after echarts instance created.\n      // Register processors incrementally for a echarts instance is\n      // not supported by this stream architecture.\n\n      dataProcessorHandlers = this._dataProcessorHandlers = dataProcessorHandlers.slice();\n      visualHandlers = this._visualHandlers = visualHandlers.slice();\n      this._allHandlers = dataProcessorHandlers.concat(visualHandlers);\n    }\n\n    Scheduler.prototype.restoreData = function (ecModel, payload) {\n      // TODO: Only restore needed series and components, but not all components.\n      // Currently `restoreData` of all of the series and component will be called.\n      // But some independent components like `title`, `legend`, `graphic`, `toolbox`,\n      // `tooltip`, `axisPointer`, etc, do not need series refresh when `setOption`,\n      // and some components like coordinate system, axes, dataZoom, visualMap only\n      // need their target series refresh.\n      // (1) If we are implementing this feature some day, we should consider these cases:\n      // if a data processor depends on a component (e.g., dataZoomProcessor depends\n      // on the settings of `dataZoom`), it should be re-performed if the component\n      // is modified by `setOption`.\n      // (2) If a processor depends on sevral series, speicified by its `getTargetSeries`,\n      // it should be re-performed when the result array of `getTargetSeries` changed.\n      // We use `dependencies` to cover these issues.\n      // (3) How to update target series when coordinate system related components modified.\n      // TODO: simply the dirty mechanism? Check whether only the case here can set tasks dirty,\n      // and this case all of the tasks will be set as dirty.\n      ecModel.restoreData(payload); // Theoretically an overall task not only depends on each of its target series, but also\n      // depends on all of the series.\n      // The overall task is not in pipeline, and `ecModel.restoreData` only set pipeline tasks\n      // dirty. If `getTargetSeries` of an overall task returns nothing, we should also ensure\n      // that the overall task is set as dirty and to be performed, otherwise it probably cause\n      // state chaos. So we have to set dirty of all of the overall tasks manually, otherwise it\n      // probably cause state chaos (consider `dataZoomProcessor`).\n\n      this._stageTaskMap.each(function (taskRecord) {\n        var overallTask = taskRecord.overallTask;\n        overallTask && overallTask.dirty();\n      });\n    }; // If seriesModel provided, incremental threshold is check by series data.\n\n\n    Scheduler.prototype.getPerformArgs = function (task, isBlock) {\n      // For overall task\n      if (!task.__pipeline) {\n        return;\n      }\n\n      var pipeline = this._pipelineMap.get(task.__pipeline.id);\n\n      var pCtx = pipeline.context;\n      var incremental = !isBlock && pipeline.progressiveEnabled && (!pCtx || pCtx.progressiveRender) && task.__idxInPipeline > pipeline.blockIndex;\n      var step = incremental ? pipeline.step : null;\n      var modDataCount = pCtx && pCtx.modDataCount;\n      var modBy = modDataCount != null ? Math.ceil(modDataCount / step) : null;\n      return {\n        step: step,\n        modBy: modBy,\n        modDataCount: modDataCount\n      };\n    };\n\n    Scheduler.prototype.getPipeline = function (pipelineId) {\n      return this._pipelineMap.get(pipelineId);\n    };\n    /**\n     * Current, progressive rendering starts from visual and layout.\n     * Always detect render mode in the same stage, avoiding that incorrect\n     * detection caused by data filtering.\n     * Caution:\n     * `updateStreamModes` use `seriesModel.getData()`.\n     */\n\n\n    Scheduler.prototype.updateStreamModes = function (seriesModel, view) {\n      var pipeline = this._pipelineMap.get(seriesModel.uid);\n\n      var data = seriesModel.getData();\n      var dataLen = data.count(); // `progressiveRender` means that can render progressively in each\n      // animation frame. Note that some types of series do not provide\n      // `view.incrementalPrepareRender` but support `chart.appendData`. We\n      // use the term `incremental` but not `progressive` to describe the\n      // case that `chart.appendData`.\n\n      var progressiveRender = pipeline.progressiveEnabled && view.incrementalPrepareRender && dataLen >= pipeline.threshold;\n      var large = seriesModel.get('large') && dataLen >= seriesModel.get('largeThreshold'); // TODO: modDataCount should not updated if `appendData`, otherwise cause whole repaint.\n      // see `test/candlestick-large3.html`\n\n      var modDataCount = seriesModel.get('progressiveChunkMode') === 'mod' ? dataLen : null;\n      seriesModel.pipelineContext = pipeline.context = {\n        progressiveRender: progressiveRender,\n        modDataCount: modDataCount,\n        large: large\n      };\n    };\n\n    Scheduler.prototype.restorePipelines = function (ecModel) {\n      var scheduler = this;\n      var pipelineMap = scheduler._pipelineMap = createHashMap();\n      ecModel.eachSeries(function (seriesModel) {\n        var progressive = seriesModel.getProgressive();\n        var pipelineId = seriesModel.uid;\n        pipelineMap.set(pipelineId, {\n          id: pipelineId,\n          head: null,\n          tail: null,\n          threshold: seriesModel.getProgressiveThreshold(),\n          progressiveEnabled: progressive && !(seriesModel.preventIncremental && seriesModel.preventIncremental()),\n          blockIndex: -1,\n          step: Math.round(progressive || 700),\n          count: 0\n        });\n\n        scheduler._pipe(seriesModel, seriesModel.dataTask);\n      });\n    };\n\n    Scheduler.prototype.prepareStageTasks = function () {\n      var stageTaskMap = this._stageTaskMap;\n      var ecModel = this.api.getModel();\n      var api = this.api;\n      each(this._allHandlers, function (handler) {\n        var record = stageTaskMap.get(handler.uid) || stageTaskMap.set(handler.uid, {});\n        var errMsg = '';\n        {\n          // Currently do not need to support to sepecify them both.\n          errMsg = '\"reset\" and \"overallReset\" must not be both specified.';\n        }\n        assert(!(handler.reset && handler.overallReset), errMsg);\n        handler.reset && this._createSeriesStageTask(handler, record, ecModel, api);\n        handler.overallReset && this._createOverallStageTask(handler, record, ecModel, api);\n      }, this);\n    };\n\n    Scheduler.prototype.prepareView = function (view, model, ecModel, api) {\n      var renderTask = view.renderTask;\n      var context = renderTask.context;\n      context.model = model;\n      context.ecModel = ecModel;\n      context.api = api;\n      renderTask.__block = !view.incrementalPrepareRender;\n\n      this._pipe(model, renderTask);\n    };\n\n    Scheduler.prototype.performDataProcessorTasks = function (ecModel, payload) {\n      // If we do not use `block` here, it should be considered when to update modes.\n      this._performStageTasks(this._dataProcessorHandlers, ecModel, payload, {\n        block: true\n      });\n    };\n\n    Scheduler.prototype.performVisualTasks = function (ecModel, payload, opt) {\n      this._performStageTasks(this._visualHandlers, ecModel, payload, opt);\n    };\n\n    Scheduler.prototype._performStageTasks = function (stageHandlers, ecModel, payload, opt) {\n      opt = opt || {};\n      var unfinished = false;\n      var scheduler = this;\n      each(stageHandlers, function (stageHandler, idx) {\n        if (opt.visualType && opt.visualType !== stageHandler.visualType) {\n          return;\n        }\n\n        var stageHandlerRecord = scheduler._stageTaskMap.get(stageHandler.uid);\n\n        var seriesTaskMap = stageHandlerRecord.seriesTaskMap;\n        var overallTask = stageHandlerRecord.overallTask;\n\n        if (overallTask) {\n          var overallNeedDirty_1;\n          var agentStubMap = overallTask.agentStubMap;\n          agentStubMap.each(function (stub) {\n            if (needSetDirty(opt, stub)) {\n              stub.dirty();\n              overallNeedDirty_1 = true;\n            }\n          });\n          overallNeedDirty_1 && overallTask.dirty();\n          scheduler.updatePayload(overallTask, payload);\n          var performArgs_1 = scheduler.getPerformArgs(overallTask, opt.block); // Execute stubs firstly, which may set the overall task dirty,\n          // then execute the overall task. And stub will call seriesModel.setData,\n          // which ensures that in the overallTask seriesModel.getData() will not\n          // return incorrect data.\n\n          agentStubMap.each(function (stub) {\n            stub.perform(performArgs_1);\n          });\n\n          if (overallTask.perform(performArgs_1)) {\n            unfinished = true;\n          }\n        } else if (seriesTaskMap) {\n          seriesTaskMap.each(function (task, pipelineId) {\n            if (needSetDirty(opt, task)) {\n              task.dirty();\n            }\n\n            var performArgs = scheduler.getPerformArgs(task, opt.block); // FIXME\n            // if intending to decalare `performRawSeries` in handlers, only\n            // stream-independent (specifically, data item independent) operations can be\n            // performed. Because is a series is filtered, most of the tasks will not\n            // be performed. A stream-dependent operation probably cause wrong biz logic.\n            // Perhaps we should not provide a separate callback for this case instead\n            // of providing the config `performRawSeries`. The stream-dependent operaions\n            // and stream-independent operations should better not be mixed.\n\n            performArgs.skip = !stageHandler.performRawSeries && ecModel.isSeriesFiltered(task.context.model);\n            scheduler.updatePayload(task, payload);\n\n            if (task.perform(performArgs)) {\n              unfinished = true;\n            }\n          });\n        }\n      });\n\n      function needSetDirty(opt, task) {\n        return opt.setDirty && (!opt.dirtyMap || opt.dirtyMap.get(task.__pipeline.id));\n      }\n\n      this.unfinished = unfinished || this.unfinished;\n    };\n\n    Scheduler.prototype.performSeriesTasks = function (ecModel) {\n      var unfinished;\n      ecModel.eachSeries(function (seriesModel) {\n        // Progress to the end for dataInit and dataRestore.\n        unfinished = seriesModel.dataTask.perform() || unfinished;\n      });\n      this.unfinished = unfinished || this.unfinished;\n    };\n\n    Scheduler.prototype.plan = function () {\n      // Travel pipelines, check block.\n      this._pipelineMap.each(function (pipeline) {\n        var task = pipeline.tail;\n\n        do {\n          if (task.__block) {\n            pipeline.blockIndex = task.__idxInPipeline;\n            break;\n          }\n\n          task = task.getUpstream();\n        } while (task);\n      });\n    };\n\n    Scheduler.prototype.updatePayload = function (task, payload) {\n      payload !== 'remain' && (task.context.payload = payload);\n    };\n\n    Scheduler.prototype._createSeriesStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\n      var scheduler = this;\n      var oldSeriesTaskMap = stageHandlerRecord.seriesTaskMap; // The count of stages are totally about only several dozen, so\n      // do not need to reuse the map.\n\n      var newSeriesTaskMap = stageHandlerRecord.seriesTaskMap = createHashMap();\n      var seriesType = stageHandler.seriesType;\n      var getTargetSeries = stageHandler.getTargetSeries; // If a stageHandler should cover all series, `createOnAllSeries` should be declared mandatorily,\n      // to avoid some typo or abuse. Otherwise if an extension do not specify a `seriesType`,\n      // it works but it may cause other irrelevant charts blocked.\n\n      if (stageHandler.createOnAllSeries) {\n        ecModel.eachRawSeries(create);\n      } else if (seriesType) {\n        ecModel.eachRawSeriesByType(seriesType, create);\n      } else if (getTargetSeries) {\n        getTargetSeries(ecModel, api).each(create);\n      }\n\n      function create(seriesModel) {\n        var pipelineId = seriesModel.uid; // Init tasks for each seriesModel only once.\n        // Reuse original task instance.\n\n        var task = newSeriesTaskMap.set(pipelineId, oldSeriesTaskMap && oldSeriesTaskMap.get(pipelineId) || createTask({\n          plan: seriesTaskPlan,\n          reset: seriesTaskReset,\n          count: seriesTaskCount\n        }));\n        task.context = {\n          model: seriesModel,\n          ecModel: ecModel,\n          api: api,\n          // PENDING: `useClearVisual` not used?\n          useClearVisual: stageHandler.isVisual && !stageHandler.isLayout,\n          plan: stageHandler.plan,\n          reset: stageHandler.reset,\n          scheduler: scheduler\n        };\n\n        scheduler._pipe(seriesModel, task);\n      }\n    };\n\n    Scheduler.prototype._createOverallStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\n      var scheduler = this;\n      var overallTask = stageHandlerRecord.overallTask = stageHandlerRecord.overallTask // For overall task, the function only be called on reset stage.\n      || createTask({\n        reset: overallTaskReset\n      });\n      overallTask.context = {\n        ecModel: ecModel,\n        api: api,\n        overallReset: stageHandler.overallReset,\n        scheduler: scheduler\n      };\n      var oldAgentStubMap = overallTask.agentStubMap; // The count of stages are totally about only several dozen, so\n      // do not need to reuse the map.\n\n      var newAgentStubMap = overallTask.agentStubMap = createHashMap();\n      var seriesType = stageHandler.seriesType;\n      var getTargetSeries = stageHandler.getTargetSeries;\n      var overallProgress = true;\n      var shouldOverallTaskDirty = false; // FIXME:TS never used, so comment it\n      // let modifyOutputEnd = stageHandler.modifyOutputEnd;\n      // An overall task with seriesType detected or has `getTargetSeries`, we add\n      // stub in each pipelines, it will set the overall task dirty when the pipeline\n      // progress. Moreover, to avoid call the overall task each frame (too frequent),\n      // we set the pipeline block.\n\n      var errMsg = '';\n      {\n        errMsg = '\"createOnAllSeries\" do not supported for \"overallReset\", ' + 'becuase it will block all streams.';\n      }\n      assert(!stageHandler.createOnAllSeries, errMsg);\n\n      if (seriesType) {\n        ecModel.eachRawSeriesByType(seriesType, createStub);\n      } else if (getTargetSeries) {\n        getTargetSeries(ecModel, api).each(createStub);\n      } // Otherwise, (usually it is legancy case), the overall task will only be\n      // executed when upstream dirty. Otherwise the progressive rendering of all\n      // pipelines will be disabled unexpectedly. But it still needs stubs to receive\n      // dirty info from upsteam.\n      else {\n          overallProgress = false;\n          each(ecModel.getSeries(), createStub);\n        }\n\n      function createStub(seriesModel) {\n        var pipelineId = seriesModel.uid;\n        var stub = newAgentStubMap.set(pipelineId, oldAgentStubMap && oldAgentStubMap.get(pipelineId) || ( // When the result of `getTargetSeries` changed, the overallTask\n        // should be set as dirty and re-performed.\n        shouldOverallTaskDirty = true, createTask({\n          reset: stubReset,\n          onDirty: stubOnDirty\n        })));\n        stub.context = {\n          model: seriesModel,\n          overallProgress: overallProgress // FIXME:TS never used, so comment it\n          // modifyOutputEnd: modifyOutputEnd\n\n        };\n        stub.agent = overallTask;\n        stub.__block = overallProgress;\n\n        scheduler._pipe(seriesModel, stub);\n      }\n\n      if (shouldOverallTaskDirty) {\n        overallTask.dirty();\n      }\n    };\n\n    Scheduler.prototype._pipe = function (seriesModel, task) {\n      var pipelineId = seriesModel.uid;\n\n      var pipeline = this._pipelineMap.get(pipelineId);\n\n      !pipeline.head && (pipeline.head = task);\n      pipeline.tail && pipeline.tail.pipe(task);\n      pipeline.tail = task;\n      task.__idxInPipeline = pipeline.count++;\n      task.__pipeline = pipeline;\n    };\n\n    Scheduler.wrapStageHandler = function (stageHandler, visualType) {\n      if (isFunction(stageHandler)) {\n        stageHandler = {\n          overallReset: stageHandler,\n          seriesType: detectSeriseType(stageHandler)\n        };\n      }\n\n      stageHandler.uid = getUID('stageHandler');\n      visualType && (stageHandler.visualType = visualType);\n      return stageHandler;\n    };\n\n    return Scheduler;\n  }();\n\n  function overallTaskReset(context) {\n    context.overallReset(context.ecModel, context.api, context.payload);\n  }\n\n  function stubReset(context) {\n    return context.overallProgress && stubProgress;\n  }\n\n  function stubProgress() {\n    this.agent.dirty();\n    this.getDownstream().dirty();\n  }\n\n  function stubOnDirty() {\n    this.agent && this.agent.dirty();\n  }\n\n  function seriesTaskPlan(context) {\n    return context.plan ? context.plan(context.model, context.ecModel, context.api, context.payload) : null;\n  }\n\n  function seriesTaskReset(context) {\n    if (context.useClearVisual) {\n      context.data.clearAllVisual();\n    }\n\n    var resetDefines = context.resetDefines = normalizeToArray(context.reset(context.model, context.ecModel, context.api, context.payload));\n    return resetDefines.length > 1 ? map(resetDefines, function (v, idx) {\n      return makeSeriesTaskProgress(idx);\n    }) : singleSeriesTaskProgress;\n  }\n\n  var singleSeriesTaskProgress = makeSeriesTaskProgress(0);\n\n  function makeSeriesTaskProgress(resetDefineIdx) {\n    return function (params, context) {\n      var data = context.data;\n      var resetDefine = context.resetDefines[resetDefineIdx];\n\n      if (resetDefine && resetDefine.dataEach) {\n        for (var i = params.start; i < params.end; i++) {\n          resetDefine.dataEach(data, i);\n        }\n      } else if (resetDefine && resetDefine.progress) {\n        resetDefine.progress(params, data);\n      }\n    };\n  }\n\n  function seriesTaskCount(context) {\n    return context.data.count();\n  }\n  /**\n   * Only some legacy stage handlers (usually in echarts extensions) are pure function.\n   * To ensure that they can work normally, they should work in block mode, that is,\n   * they should not be started util the previous tasks finished. So they cause the\n   * progressive rendering disabled. We try to detect the series type, to narrow down\n   * the block range to only the series type they concern, but not all series.\n   */\n\n\n  function detectSeriseType(legacyFunc) {\n    seriesType = null;\n\n    try {\n      // Assume there is no async when calling `eachSeriesByType`.\n      legacyFunc(ecModelMock, apiMock);\n    } catch (e) {}\n\n    return seriesType;\n  }\n\n  var ecModelMock = {};\n  var apiMock = {};\n  var seriesType;\n  mockMethods(ecModelMock, GlobalModel);\n  mockMethods(apiMock, ExtensionAPI);\n\n  ecModelMock.eachSeriesByType = ecModelMock.eachRawSeriesByType = function (type) {\n    seriesType = type;\n  };\n\n  ecModelMock.eachComponent = function (cond) {\n    if (cond.mainType === 'series' && cond.subType) {\n      seriesType = cond.subType;\n    }\n  };\n\n  function mockMethods(target, Clz) {\n    /* eslint-disable */\n    for (var name_1 in Clz.prototype) {\n      // Do not use hasOwnProperty\n      target[name_1] = noop;\n    }\n    \n\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var colorAll = ['#37A2DA', '#32C5E9', '#67E0E3', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#E062AE', '#E690D1', '#e7bcf3', '#9d96f5', '#8378EA', '#96BFFF'];\n  var lightTheme = {\n    color: colorAll,\n    colorLayer: [['#37A2DA', '#ffd85c', '#fd7b5f'], ['#37A2DA', '#67E0E3', '#FFDB5C', '#ff9f7f', '#E062AE', '#9d96f5'], ['#37A2DA', '#32C5E9', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#e7bcf3', '#8378EA', '#96BFFF'], colorAll]\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var contrastColor = '#B9B8CE';\n  var backgroundColor = '#100C2A';\n\n  var axisCommon = function () {\n    return {\n      axisLine: {\n        lineStyle: {\n          color: contrastColor\n        }\n      },\n      splitLine: {\n        lineStyle: {\n          color: '#484753'\n        }\n      },\n      splitArea: {\n        areaStyle: {\n          color: ['rgba(255,255,255,0.02)', 'rgba(255,255,255,0.05)']\n        }\n      },\n      minorSplitLine: {\n        lineStyle: {\n          color: '#20203B'\n        }\n      }\n    };\n  };\n\n  var colorPalette = ['#4992ff', '#7cffb2', '#fddd60', '#ff6e76', '#58d9f9', '#05c091', '#ff8a45', '#8d48e3', '#dd79ff'];\n  var theme = {\n    darkMode: true,\n    color: colorPalette,\n    backgroundColor: backgroundColor,\n    axisPointer: {\n      lineStyle: {\n        color: '#817f91'\n      },\n      crossStyle: {\n        color: '#817f91'\n      },\n      label: {\n        // TODO Contrast of label backgorundColor\n        color: '#fff'\n      }\n    },\n    legend: {\n      textStyle: {\n        color: contrastColor\n      }\n    },\n    textStyle: {\n      color: contrastColor\n    },\n    title: {\n      textStyle: {\n        color: '#EEF1FA'\n      },\n      subtextStyle: {\n        color: '#B9B8CE'\n      }\n    },\n    toolbox: {\n      iconStyle: {\n        borderColor: contrastColor\n      }\n    },\n    dataZoom: {\n      borderColor: '#71708A',\n      textStyle: {\n        color: contrastColor\n      },\n      brushStyle: {\n        color: 'rgba(135,163,206,0.3)'\n      },\n      handleStyle: {\n        color: '#353450',\n        borderColor: '#C5CBE3'\n      },\n      moveHandleStyle: {\n        color: '#B0B6C3',\n        opacity: 0.3\n      },\n      fillerColor: 'rgba(135,163,206,0.2)',\n      emphasis: {\n        handleStyle: {\n          borderColor: '#91B7F2',\n          color: '#4D587D'\n        },\n        moveHandleStyle: {\n          color: '#636D9A',\n          opacity: 0.7\n        }\n      },\n      dataBackground: {\n        lineStyle: {\n          color: '#71708A',\n          width: 1\n        },\n        areaStyle: {\n          color: '#71708A'\n        }\n      },\n      selectedDataBackground: {\n        lineStyle: {\n          color: '#87A3CE'\n        },\n        areaStyle: {\n          color: '#87A3CE'\n        }\n      }\n    },\n    visualMap: {\n      textStyle: {\n        color: contrastColor\n      }\n    },\n    timeline: {\n      lineStyle: {\n        color: contrastColor\n      },\n      label: {\n        color: contrastColor\n      },\n      controlStyle: {\n        color: contrastColor,\n        borderColor: contrastColor\n      }\n    },\n    calendar: {\n      itemStyle: {\n        color: backgroundColor\n      },\n      dayLabel: {\n        color: contrastColor\n      },\n      monthLabel: {\n        color: contrastColor\n      },\n      yearLabel: {\n        color: contrastColor\n      }\n    },\n    timeAxis: axisCommon(),\n    logAxis: axisCommon(),\n    valueAxis: axisCommon(),\n    categoryAxis: axisCommon(),\n    line: {\n      symbol: 'circle'\n    },\n    graph: {\n      color: colorPalette\n    },\n    gauge: {\n      title: {\n        color: contrastColor\n      },\n      axisLine: {\n        lineStyle: {\n          color: [[1, 'rgba(207,212,219,0.2)']]\n        }\n      },\n      axisLabel: {\n        color: contrastColor\n      },\n      detail: {\n        color: '#EEF1FA'\n      }\n    },\n    candlestick: {\n      itemStyle: {\n        color: '#f64e56',\n        color0: '#54ea92',\n        borderColor: '#f64e56',\n        borderColor0: '#54ea92' // borderColor: '#ca2824',\n        // borderColor0: '#09a443'\n\n      }\n    }\n  };\n  theme.categoryAxis.splitLine.show = false;\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Usage of query:\n   * `chart.on('click', query, handler);`\n   * The `query` can be:\n   * + The component type query string, only `mainType` or `mainType.subType`,\n   *   like: 'xAxis', 'series', 'xAxis.category' or 'series.line'.\n   * + The component query object, like:\n   *   `{seriesIndex: 2}`, `{seriesName: 'xx'}`, `{seriesId: 'some'}`,\n   *   `{xAxisIndex: 2}`, `{xAxisName: 'xx'}`, `{xAxisId: 'some'}`.\n   * + The data query object, like:\n   *   `{dataIndex: 123}`, `{dataType: 'link'}`, `{name: 'some'}`.\n   * + The other query object (cmponent customized query), like:\n   *   `{element: 'some'}` (only available in custom series).\n   *\n   * Caveat: If a prop in the `query` object is `null/undefined`, it is the\n   * same as there is no such prop in the `query` object.\n   */\n\n  var ECEventProcessor =\n  /** @class */\n  function () {\n    function ECEventProcessor() {}\n\n    ECEventProcessor.prototype.normalizeQuery = function (query) {\n      var cptQuery = {};\n      var dataQuery = {};\n      var otherQuery = {}; // `query` is `mainType` or `mainType.subType` of component.\n\n      if (isString(query)) {\n        var condCptType = parseClassType(query); // `.main` and `.sub` may be ''.\n\n        cptQuery.mainType = condCptType.main || null;\n        cptQuery.subType = condCptType.sub || null;\n      } // `query` is an object, convert to {mainType, index, name, id}.\n      else {\n          // `xxxIndex`, `xxxName`, `xxxId`, `name`, `dataIndex`, `dataType` is reserved,\n          // can not be used in `compomentModel.filterForExposedEvent`.\n          var suffixes_1 = ['Index', 'Name', 'Id'];\n          var dataKeys_1 = {\n            name: 1,\n            dataIndex: 1,\n            dataType: 1\n          };\n          each(query, function (val, key) {\n            var reserved = false;\n\n            for (var i = 0; i < suffixes_1.length; i++) {\n              var propSuffix = suffixes_1[i];\n              var suffixPos = key.lastIndexOf(propSuffix);\n\n              if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {\n                var mainType = key.slice(0, suffixPos); // Consider `dataIndex`.\n\n                if (mainType !== 'data') {\n                  cptQuery.mainType = mainType;\n                  cptQuery[propSuffix.toLowerCase()] = val;\n                  reserved = true;\n                }\n              }\n            }\n\n            if (dataKeys_1.hasOwnProperty(key)) {\n              dataQuery[key] = val;\n              reserved = true;\n            }\n\n            if (!reserved) {\n              otherQuery[key] = val;\n            }\n          });\n        }\n\n      return {\n        cptQuery: cptQuery,\n        dataQuery: dataQuery,\n        otherQuery: otherQuery\n      };\n    };\n\n    ECEventProcessor.prototype.filter = function (eventType, query) {\n      // They should be assigned before each trigger call.\n      var eventInfo = this.eventInfo;\n\n      if (!eventInfo) {\n        return true;\n      }\n\n      var targetEl = eventInfo.targetEl;\n      var packedEvent = eventInfo.packedEvent;\n      var model = eventInfo.model;\n      var view = eventInfo.view; // For event like 'globalout'.\n\n      if (!model || !view) {\n        return true;\n      }\n\n      var cptQuery = query.cptQuery;\n      var dataQuery = query.dataQuery;\n      return check(cptQuery, model, 'mainType') && check(cptQuery, model, 'subType') && check(cptQuery, model, 'index', 'componentIndex') && check(cptQuery, model, 'name') && check(cptQuery, model, 'id') && check(dataQuery, packedEvent, 'name') && check(dataQuery, packedEvent, 'dataIndex') && check(dataQuery, packedEvent, 'dataType') && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));\n\n      function check(query, host, prop, propOnHost) {\n        return query[prop] == null || host[propOnHost || prop] === query[prop];\n      }\n    };\n\n    ECEventProcessor.prototype.afterTrigger = function () {\n      // Make sure the eventInfo wont be used in next trigger.\n      this.eventInfo = null;\n    };\n\n    return ECEventProcessor;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var SYMBOL_PROPS_WITH_CB = ['symbol', 'symbolSize', 'symbolRotate', 'symbolOffset'];\n  var SYMBOL_PROPS = SYMBOL_PROPS_WITH_CB.concat(['symbolKeepAspect']); // Encoding visual for all series include which is filtered for legend drawing\n\n  var seriesSymbolTask = {\n    createOnAllSeries: true,\n    // For legend.\n    performRawSeries: true,\n    reset: function (seriesModel, ecModel) {\n      var data = seriesModel.getData();\n\n      if (seriesModel.legendIcon) {\n        data.setVisual('legendIcon', seriesModel.legendIcon);\n      }\n\n      if (!seriesModel.hasSymbolVisual) {\n        return;\n      }\n\n      var symbolOptions = {};\n      var symbolOptionsCb = {};\n      var hasCallback = false;\n\n      for (var i = 0; i < SYMBOL_PROPS_WITH_CB.length; i++) {\n        var symbolPropName = SYMBOL_PROPS_WITH_CB[i];\n        var val = seriesModel.get(symbolPropName);\n\n        if (isFunction(val)) {\n          hasCallback = true;\n          symbolOptionsCb[symbolPropName] = val;\n        } else {\n          symbolOptions[symbolPropName] = val;\n        }\n      }\n\n      symbolOptions.symbol = symbolOptions.symbol || seriesModel.defaultSymbol;\n      data.setVisual(extend({\n        legendIcon: seriesModel.legendIcon || symbolOptions.symbol,\n        symbolKeepAspect: seriesModel.get('symbolKeepAspect')\n      }, symbolOptions)); // Only visible series has each data be visual encoded\n\n      if (ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      var symbolPropsCb = keys(symbolOptionsCb);\n\n      function dataEach(data, idx) {\n        var rawValue = seriesModel.getRawValue(idx);\n        var params = seriesModel.getDataParams(idx);\n\n        for (var i = 0; i < symbolPropsCb.length; i++) {\n          var symbolPropName = symbolPropsCb[i];\n          data.setItemVisual(idx, symbolPropName, symbolOptionsCb[symbolPropName](rawValue, params));\n        }\n      }\n\n      return {\n        dataEach: hasCallback ? dataEach : null\n      };\n    }\n  };\n  var dataSymbolTask = {\n    createOnAllSeries: true,\n    // For legend.\n    performRawSeries: true,\n    reset: function (seriesModel, ecModel) {\n      if (!seriesModel.hasSymbolVisual) {\n        return;\n      } // Only visible series has each data be visual encoded\n\n\n      if (ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n\n      function dataEach(data, idx) {\n        var itemModel = data.getItemModel(idx);\n\n        for (var i = 0; i < SYMBOL_PROPS.length; i++) {\n          var symbolPropName = SYMBOL_PROPS[i];\n          var val = itemModel.getShallow(symbolPropName, true);\n\n          if (val != null) {\n            data.setItemVisual(idx, symbolPropName, val);\n          }\n        }\n      }\n\n      return {\n        dataEach: data.hasItemOption ? dataEach : null\n      };\n    }\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  function getItemVisualFromData(data, dataIndex, key) {\n    switch (key) {\n      case 'color':\n        var style = data.getItemVisual(dataIndex, 'style');\n        return style[data.getVisual('drawType')];\n\n      case 'opacity':\n        return data.getItemVisual(dataIndex, 'style').opacity;\n\n      case 'symbol':\n      case 'symbolSize':\n      case 'liftZ':\n        return data.getItemVisual(dataIndex, key);\n\n      default:\n        {\n          console.warn(\"Unknown visual type \" + key);\n        }\n    }\n  }\n\n  function getVisualFromData(data, key) {\n    switch (key) {\n      case 'color':\n        var style = data.getVisual('style');\n        return style[data.getVisual('drawType')];\n\n      case 'opacity':\n        return data.getVisual('style').opacity;\n\n      case 'symbol':\n      case 'symbolSize':\n      case 'liftZ':\n        return data.getVisual(key);\n\n      default:\n        {\n          console.warn(\"Unknown visual type \" + key);\n        }\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // Inlucdes: pieSelect, pieUnSelect, pieToggleSelect, mapSelect, mapUnSelect, mapToggleSelect\n\n\n  function createLegacyDataSelectAction(seriesType, ecRegisterAction) {\n    function getSeriesIndices(ecModel, payload) {\n      var seriesIndices = [];\n      ecModel.eachComponent({\n        mainType: 'series',\n        subType: seriesType,\n        query: payload\n      }, function (seriesModel) {\n        seriesIndices.push(seriesModel.seriesIndex);\n      });\n      return seriesIndices;\n    }\n\n    each([[seriesType + 'ToggleSelect', 'toggleSelect'], [seriesType + 'Select', 'select'], [seriesType + 'UnSelect', 'unselect']], function (eventsMap) {\n      ecRegisterAction(eventsMap[0], function (payload, ecModel, api) {\n        payload = extend({}, payload);\n        {\n          deprecateReplaceLog(payload.type, eventsMap[1]);\n        }\n        api.dispatchAction(extend(payload, {\n          type: eventsMap[1],\n          seriesIndex: getSeriesIndices(ecModel, payload)\n        }));\n      });\n    });\n  }\n\n  function handleSeriesLegacySelectEvents(type, eventPostfix, ecIns, ecModel, payload) {\n    var legacyEventName = type + eventPostfix;\n\n    if (!ecIns.isSilent(legacyEventName)) {\n      {\n        deprecateLog(\"event \" + legacyEventName + \" is deprecated.\");\n      }\n      ecModel.eachComponent({\n        mainType: 'series',\n        subType: 'pie'\n      }, function (seriesModel) {\n        var seriesIndex = seriesModel.seriesIndex;\n        var selectedMap = seriesModel.option.selectedMap;\n        var selected = payload.selected;\n\n        for (var i = 0; i < selected.length; i++) {\n          if (selected[i].seriesIndex === seriesIndex) {\n            var data = seriesModel.getData();\n            var dataIndex = queryDataIndex(data, payload.fromActionPayload);\n            ecIns.trigger(legacyEventName, {\n              type: legacyEventName,\n              seriesId: seriesModel.id,\n              name: isArray(dataIndex) ? data.getName(dataIndex[0]) : data.getName(dataIndex),\n              selected: isString(selectedMap) ? selectedMap : extend({}, selectedMap)\n            });\n          }\n        }\n      });\n    }\n  }\n\n  function handleLegacySelectEvents(messageCenter, ecIns, api) {\n    messageCenter.on('selectchanged', function (params) {\n      var ecModel = api.getModel();\n\n      if (params.isFromClick) {\n        handleSeriesLegacySelectEvents('map', 'selectchanged', ecIns, ecModel, params);\n        handleSeriesLegacySelectEvents('pie', 'selectchanged', ecIns, ecModel, params);\n      } else if (params.fromAction === 'select') {\n        handleSeriesLegacySelectEvents('map', 'selected', ecIns, ecModel, params);\n        handleSeriesLegacySelectEvents('pie', 'selected', ecIns, ecModel, params);\n      } else if (params.fromAction === 'unselect') {\n        handleSeriesLegacySelectEvents('map', 'unselected', ecIns, ecModel, params);\n        handleSeriesLegacySelectEvents('pie', 'unselected', ecIns, ecModel, params);\n      }\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function findEventDispatcher(target, det, returnFirstMatch) {\n    var found;\n\n    while (target) {\n      if (det(target)) {\n        found = target;\n\n        if (returnFirstMatch) {\n          break;\n        }\n      }\n\n      target = target.__hostTarget || target.parent;\n    }\n\n    return found;\n  }\n\n  var wmUniqueIndex = Math.round(Math.random() * 9);\n  var supportDefineProperty = typeof Object.defineProperty === 'function';\n\n  var WeakMap = function () {\n    function WeakMap() {\n      this._id = '__ec_inner_' + wmUniqueIndex++;\n    }\n\n    WeakMap.prototype.get = function (key) {\n      return this._guard(key)[this._id];\n    };\n\n    WeakMap.prototype.set = function (key, value) {\n      var target = this._guard(key);\n\n      if (supportDefineProperty) {\n        Object.defineProperty(target, this._id, {\n          value: value,\n          enumerable: false,\n          configurable: true\n        });\n      } else {\n        target[this._id] = value;\n      }\n\n      return this;\n    };\n\n    WeakMap.prototype[\"delete\"] = function (key) {\n      if (this.has(key)) {\n        delete this._guard(key)[this._id];\n        return true;\n      }\n\n      return false;\n    };\n\n    WeakMap.prototype.has = function (key) {\n      return !!this._guard(key)[this._id];\n    };\n\n    WeakMap.prototype._guard = function (key) {\n      if (key !== Object(key)) {\n        throw TypeError('Value of WeakMap is not a non-null object.');\n      }\n\n      return key;\n    };\n\n    return WeakMap;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // Symbol factory\n\n  /**\n   * Triangle shape\n   * @inner\n   */\n\n\n  var Triangle = Path.extend({\n    type: 'triangle',\n    shape: {\n      cx: 0,\n      cy: 0,\n      width: 0,\n      height: 0\n    },\n    buildPath: function (path, shape) {\n      var cx = shape.cx;\n      var cy = shape.cy;\n      var width = shape.width / 2;\n      var height = shape.height / 2;\n      path.moveTo(cx, cy - height);\n      path.lineTo(cx + width, cy + height);\n      path.lineTo(cx - width, cy + height);\n      path.closePath();\n    }\n  });\n  /**\n   * Diamond shape\n   * @inner\n   */\n\n  var Diamond = Path.extend({\n    type: 'diamond',\n    shape: {\n      cx: 0,\n      cy: 0,\n      width: 0,\n      height: 0\n    },\n    buildPath: function (path, shape) {\n      var cx = shape.cx;\n      var cy = shape.cy;\n      var width = shape.width / 2;\n      var height = shape.height / 2;\n      path.moveTo(cx, cy - height);\n      path.lineTo(cx + width, cy);\n      path.lineTo(cx, cy + height);\n      path.lineTo(cx - width, cy);\n      path.closePath();\n    }\n  });\n  /**\n   * Pin shape\n   * @inner\n   */\n\n  var Pin = Path.extend({\n    type: 'pin',\n    shape: {\n      // x, y on the cusp\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    },\n    buildPath: function (path, shape) {\n      var x = shape.x;\n      var y = shape.y;\n      var w = shape.width / 5 * 3; // Height must be larger than width\n\n      var h = Math.max(w, shape.height);\n      var r = w / 2; // Dist on y with tangent point and circle center\n\n      var dy = r * r / (h - r);\n      var cy = y - h + r + dy;\n      var angle = Math.asin(dy / r); // Dist on x with tangent point and circle center\n\n      var dx = Math.cos(angle) * r;\n      var tanX = Math.sin(angle);\n      var tanY = Math.cos(angle);\n      var cpLen = r * 0.6;\n      var cpLen2 = r * 0.7;\n      path.moveTo(x - dx, cy + dy);\n      path.arc(x, cy, r, Math.PI - angle, Math.PI * 2 + angle);\n      path.bezierCurveTo(x + dx - tanX * cpLen, cy + dy + tanY * cpLen, x, y - cpLen2, x, y);\n      path.bezierCurveTo(x, y - cpLen2, x - dx + tanX * cpLen, cy + dy + tanY * cpLen, x - dx, cy + dy);\n      path.closePath();\n    }\n  });\n  /**\n   * Arrow shape\n   * @inner\n   */\n\n  var Arrow = Path.extend({\n    type: 'arrow',\n    shape: {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    },\n    buildPath: function (ctx, shape) {\n      var height = shape.height;\n      var width = shape.width;\n      var x = shape.x;\n      var y = shape.y;\n      var dx = width / 3 * 2;\n      ctx.moveTo(x, y);\n      ctx.lineTo(x + dx, y + height);\n      ctx.lineTo(x, y + height / 4 * 3);\n      ctx.lineTo(x - dx, y + height);\n      ctx.lineTo(x, y);\n      ctx.closePath();\n    }\n  });\n  /**\n   * Map of path contructors\n   */\n  // TODO Use function to build symbol path.\n\n  var symbolCtors = {\n    line: Line,\n    rect: Rect,\n    roundRect: Rect,\n    square: Rect,\n    circle: Circle,\n    diamond: Diamond,\n    pin: Pin,\n    arrow: Arrow,\n    triangle: Triangle\n  };\n  var symbolShapeMakers = {\n    line: function (x, y, w, h, shape) {\n      shape.x1 = x;\n      shape.y1 = y + h / 2;\n      shape.x2 = x + w;\n      shape.y2 = y + h / 2;\n    },\n    rect: function (x, y, w, h, shape) {\n      shape.x = x;\n      shape.y = y;\n      shape.width = w;\n      shape.height = h;\n    },\n    roundRect: function (x, y, w, h, shape) {\n      shape.x = x;\n      shape.y = y;\n      shape.width = w;\n      shape.height = h;\n      shape.r = Math.min(w, h) / 4;\n    },\n    square: function (x, y, w, h, shape) {\n      var size = Math.min(w, h);\n      shape.x = x;\n      shape.y = y;\n      shape.width = size;\n      shape.height = size;\n    },\n    circle: function (x, y, w, h, shape) {\n      // Put circle in the center of square\n      shape.cx = x + w / 2;\n      shape.cy = y + h / 2;\n      shape.r = Math.min(w, h) / 2;\n    },\n    diamond: function (x, y, w, h, shape) {\n      shape.cx = x + w / 2;\n      shape.cy = y + h / 2;\n      shape.width = w;\n      shape.height = h;\n    },\n    pin: function (x, y, w, h, shape) {\n      shape.x = x + w / 2;\n      shape.y = y + h / 2;\n      shape.width = w;\n      shape.height = h;\n    },\n    arrow: function (x, y, w, h, shape) {\n      shape.x = x + w / 2;\n      shape.y = y + h / 2;\n      shape.width = w;\n      shape.height = h;\n    },\n    triangle: function (x, y, w, h, shape) {\n      shape.cx = x + w / 2;\n      shape.cy = y + h / 2;\n      shape.width = w;\n      shape.height = h;\n    }\n  };\n  var symbolBuildProxies = {};\n  each(symbolCtors, function (Ctor, name) {\n    symbolBuildProxies[name] = new Ctor();\n  });\n  var SymbolClz = Path.extend({\n    type: 'symbol',\n    shape: {\n      symbolType: '',\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    },\n    calculateTextPosition: function (out, config, rect) {\n      var res = calculateTextPosition(out, config, rect);\n      var shape = this.shape;\n\n      if (shape && shape.symbolType === 'pin' && config.position === 'inside') {\n        res.y = rect.y + rect.height * 0.4;\n      }\n\n      return res;\n    },\n    buildPath: function (ctx, shape, inBundle) {\n      var symbolType = shape.symbolType;\n\n      if (symbolType !== 'none') {\n        var proxySymbol = symbolBuildProxies[symbolType];\n\n        if (!proxySymbol) {\n          // Default rect\n          symbolType = 'rect';\n          proxySymbol = symbolBuildProxies[symbolType];\n        }\n\n        symbolShapeMakers[symbolType](shape.x, shape.y, shape.width, shape.height, proxySymbol.shape);\n        proxySymbol.buildPath(ctx, proxySymbol.shape, inBundle);\n      }\n    }\n  }); // Provide setColor helper method to avoid determine if set the fill or stroke outside\n\n  function symbolPathSetColor(color, innerColor) {\n    if (this.type !== 'image') {\n      var symbolStyle = this.style;\n\n      if (this.__isEmptyBrush) {\n        symbolStyle.stroke = color;\n        symbolStyle.fill = innerColor || '#fff'; // TODO Same width with lineStyle in LineView\n\n        symbolStyle.lineWidth = 2;\n      } else if (this.shape.symbolType === 'line') {\n        symbolStyle.stroke = color;\n      } else {\n        symbolStyle.fill = color;\n      }\n\n      this.markRedraw();\n    }\n  }\n  /**\n   * Create a symbol element with given symbol configuration: shape, x, y, width, height, color\n   */\n\n\n  function createSymbol(symbolType, x, y, w, h, color, // whether to keep the ratio of w/h,\n  keepAspect) {\n    // TODO Support image object, DynamicImage.\n    var isEmpty = symbolType.indexOf('empty') === 0;\n\n    if (isEmpty) {\n      symbolType = symbolType.substr(5, 1).toLowerCase() + symbolType.substr(6);\n    }\n\n    var symbolPath;\n\n    if (symbolType.indexOf('image://') === 0) {\n      symbolPath = makeImage(symbolType.slice(8), new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n    } else if (symbolType.indexOf('path://') === 0) {\n      symbolPath = makePath(symbolType.slice(7), {}, new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n    } else {\n      symbolPath = new SymbolClz({\n        shape: {\n          symbolType: symbolType,\n          x: x,\n          y: y,\n          width: w,\n          height: h\n        }\n      });\n    }\n\n    symbolPath.__isEmptyBrush = isEmpty; // TODO Should deprecate setColor\n\n    symbolPath.setColor = symbolPathSetColor;\n\n    if (color) {\n      symbolPath.setColor(color);\n    }\n\n    return symbolPath;\n  }\n\n  function normalizeSymbolSize(symbolSize) {\n    if (!isArray(symbolSize)) {\n      symbolSize = [+symbolSize, +symbolSize];\n    }\n\n    return [symbolSize[0] || 0, symbolSize[1] || 0];\n  }\n\n  function normalizeSymbolOffset(symbolOffset, symbolSize) {\n    if (symbolOffset == null) {\n      return;\n    }\n\n    if (!isArray(symbolOffset)) {\n      symbolOffset = [symbolOffset, symbolOffset];\n    }\n\n    return [parsePercent$1(symbolOffset[0], symbolSize[0]) || 0, parsePercent$1(retrieve2(symbolOffset[1], symbolOffset[0]), symbolSize[1]) || 0];\n  }\n\n  function isSafeNum(num) {\n    return isFinite(num);\n  }\n\n  function createLinearGradient(ctx, obj, rect) {\n    var x = obj.x == null ? 0 : obj.x;\n    var x2 = obj.x2 == null ? 1 : obj.x2;\n    var y = obj.y == null ? 0 : obj.y;\n    var y2 = obj.y2 == null ? 0 : obj.y2;\n\n    if (!obj.global) {\n      x = x * rect.width + rect.x;\n      x2 = x2 * rect.width + rect.x;\n      y = y * rect.height + rect.y;\n      y2 = y2 * rect.height + rect.y;\n    }\n\n    x = isSafeNum(x) ? x : 0;\n    x2 = isSafeNum(x2) ? x2 : 1;\n    y = isSafeNum(y) ? y : 0;\n    y2 = isSafeNum(y2) ? y2 : 0;\n    var canvasGradient = ctx.createLinearGradient(x, y, x2, y2);\n    return canvasGradient;\n  }\n\n  function createRadialGradient(ctx, obj, rect) {\n    var width = rect.width;\n    var height = rect.height;\n    var min = Math.min(width, height);\n    var x = obj.x == null ? 0.5 : obj.x;\n    var y = obj.y == null ? 0.5 : obj.y;\n    var r = obj.r == null ? 0.5 : obj.r;\n\n    if (!obj.global) {\n      x = x * width + rect.x;\n      y = y * height + rect.y;\n      r = r * min;\n    }\n\n    x = isSafeNum(x) ? x : 0.5;\n    y = isSafeNum(y) ? y : 0.5;\n    r = r >= 0 && isSafeNum(r) ? r : 0.5;\n    var canvasGradient = ctx.createRadialGradient(x, y, 0, x, y, r);\n    return canvasGradient;\n  }\n\n  function getCanvasGradient(ctx, obj, rect) {\n    var canvasGradient = obj.type === 'radial' ? createRadialGradient(ctx, obj, rect) : createLinearGradient(ctx, obj, rect);\n    var colorStops = obj.colorStops;\n\n    for (var i = 0; i < colorStops.length; i++) {\n      canvasGradient.addColorStop(colorStops[i].offset, colorStops[i].color);\n    }\n\n    return canvasGradient;\n  }\n\n  function isClipPathChanged(clipPaths, prevClipPaths) {\n    if (clipPaths === prevClipPaths || !clipPaths && !prevClipPaths) {\n      return false;\n    }\n\n    if (!clipPaths || !prevClipPaths || clipPaths.length !== prevClipPaths.length) {\n      return true;\n    }\n\n    for (var i = 0; i < clipPaths.length; i++) {\n      if (clipPaths[i] !== prevClipPaths[i]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function parseInt10(val) {\n    return parseInt(val, 10);\n  }\n\n  function getSize(root, whIdx, opts) {\n    var wh = ['width', 'height'][whIdx];\n    var cwh = ['clientWidth', 'clientHeight'][whIdx];\n    var plt = ['paddingLeft', 'paddingTop'][whIdx];\n    var prb = ['paddingRight', 'paddingBottom'][whIdx];\n\n    if (opts[wh] != null && opts[wh] !== 'auto') {\n      return parseFloat(opts[wh]);\n    }\n\n    var stl = document.defaultView.getComputedStyle(root);\n    return (root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh])) - (parseInt10(stl[plt]) || 0) - (parseInt10(stl[prb]) || 0) | 0;\n  }\n\n  function normalizeLineDash(lineType, lineWidth) {\n    if (!lineType || lineType === 'solid' || !(lineWidth > 0)) {\n      return null;\n    }\n\n    return lineType === 'dashed' ? [4 * lineWidth, 2 * lineWidth] : lineType === 'dotted' ? [lineWidth] : isNumber(lineType) ? [lineType] : isArray(lineType) ? lineType : null;\n  }\n\n  function getLineDash(el) {\n    var style = el.style;\n    var lineDash = style.lineDash && style.lineWidth > 0 && normalizeLineDash(style.lineDash, style.lineWidth);\n    var lineDashOffset = style.lineDashOffset;\n\n    if (lineDash) {\n      var lineScale_1 = style.strokeNoScale && el.getLineScale ? el.getLineScale() : 1;\n\n      if (lineScale_1 && lineScale_1 !== 1) {\n        lineDash = map(lineDash, function (rawVal) {\n          return rawVal / lineScale_1;\n        });\n        lineDashOffset /= lineScale_1;\n      }\n    }\n\n    return [lineDash, lineDashOffset];\n  }\n\n  var pathProxyForDraw = new PathProxy(true);\n\n  function styleHasStroke(style) {\n    var stroke = style.stroke;\n    return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n  }\n\n  function isValidStrokeFillStyle(strokeOrFill) {\n    return typeof strokeOrFill === 'string' && strokeOrFill !== 'none';\n  }\n\n  function styleHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== 'none';\n  }\n\n  function doFillPath(ctx, style) {\n    if (style.fillOpacity != null && style.fillOpacity !== 1) {\n      var originalGlobalAlpha = ctx.globalAlpha;\n      ctx.globalAlpha = style.fillOpacity * style.opacity;\n      ctx.fill();\n      ctx.globalAlpha = originalGlobalAlpha;\n    } else {\n      ctx.fill();\n    }\n  }\n\n  function doStrokePath(ctx, style) {\n    if (style.strokeOpacity != null && style.strokeOpacity !== 1) {\n      var originalGlobalAlpha = ctx.globalAlpha;\n      ctx.globalAlpha = style.strokeOpacity * style.opacity;\n      ctx.stroke();\n      ctx.globalAlpha = originalGlobalAlpha;\n    } else {\n      ctx.stroke();\n    }\n  }\n\n  function createCanvasPattern(ctx, pattern, el) {\n    var image = createOrUpdateImage(pattern.image, pattern.__image, el);\n\n    if (isImageReady(image)) {\n      var canvasPattern = ctx.createPattern(image, pattern.repeat || 'repeat');\n\n      if (typeof DOMMatrix === 'function' && canvasPattern && canvasPattern.setTransform) {\n        var matrix = new DOMMatrix();\n        matrix.translateSelf(pattern.x || 0, pattern.y || 0);\n        matrix.rotateSelf(0, 0, (pattern.rotation || 0) * RADIAN_TO_DEGREE);\n        matrix.scaleSelf(pattern.scaleX || 1, pattern.scaleY || 1);\n        canvasPattern.setTransform(matrix);\n      }\n\n      return canvasPattern;\n    }\n  }\n\n  function brushPath(ctx, el, style, inBatch) {\n    var _a;\n\n    var hasStroke = styleHasStroke(style);\n    var hasFill = styleHasFill(style);\n    var strokePercent = style.strokePercent;\n    var strokePart = strokePercent < 1;\n    var firstDraw = !el.path;\n\n    if ((!el.silent || strokePart) && firstDraw) {\n      el.createPathProxy();\n    }\n\n    var path = el.path || pathProxyForDraw;\n    var dirtyFlag = el.__dirty;\n\n    if (!inBatch) {\n      var fill = style.fill;\n      var stroke = style.stroke;\n      var hasFillGradient = hasFill && !!fill.colorStops;\n      var hasStrokeGradient = hasStroke && !!stroke.colorStops;\n      var hasFillPattern = hasFill && !!fill.image;\n      var hasStrokePattern = hasStroke && !!stroke.image;\n      var fillGradient = void 0;\n      var strokeGradient = void 0;\n      var fillPattern = void 0;\n      var strokePattern = void 0;\n      var rect = void 0;\n\n      if (hasFillGradient || hasStrokeGradient) {\n        rect = el.getBoundingRect();\n      }\n\n      if (hasFillGradient) {\n        fillGradient = dirtyFlag ? getCanvasGradient(ctx, fill, rect) : el.__canvasFillGradient;\n        el.__canvasFillGradient = fillGradient;\n      }\n\n      if (hasStrokeGradient) {\n        strokeGradient = dirtyFlag ? getCanvasGradient(ctx, stroke, rect) : el.__canvasStrokeGradient;\n        el.__canvasStrokeGradient = strokeGradient;\n      }\n\n      if (hasFillPattern) {\n        fillPattern = dirtyFlag || !el.__canvasFillPattern ? createCanvasPattern(ctx, fill, el) : el.__canvasFillPattern;\n        el.__canvasFillPattern = fillPattern;\n      }\n\n      if (hasStrokePattern) {\n        strokePattern = dirtyFlag || !el.__canvasStrokePattern ? createCanvasPattern(ctx, stroke, el) : el.__canvasStrokePattern;\n        el.__canvasStrokePattern = fillPattern;\n      }\n\n      if (hasFillGradient) {\n        ctx.fillStyle = fillGradient;\n      } else if (hasFillPattern) {\n        if (fillPattern) {\n          ctx.fillStyle = fillPattern;\n        } else {\n          hasFill = false;\n        }\n      }\n\n      if (hasStrokeGradient) {\n        ctx.strokeStyle = strokeGradient;\n      } else if (hasStrokePattern) {\n        if (strokePattern) {\n          ctx.strokeStyle = strokePattern;\n        } else {\n          hasStroke = false;\n        }\n      }\n    }\n\n    var scale = el.getGlobalScale();\n    path.setScale(scale[0], scale[1], el.segmentIgnoreThreshold);\n    var lineDash;\n    var lineDashOffset;\n\n    if (ctx.setLineDash && style.lineDash) {\n      _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n    }\n\n    var needsRebuild = true;\n\n    if (firstDraw || dirtyFlag & SHAPE_CHANGED_BIT) {\n      path.setDPR(ctx.dpr);\n\n      if (strokePart) {\n        path.setContext(null);\n      } else {\n        path.setContext(ctx);\n        needsRebuild = false;\n      }\n\n      path.reset();\n      el.buildPath(path, el.shape, inBatch);\n      path.toStatic();\n      el.pathUpdated();\n    }\n\n    if (needsRebuild) {\n      path.rebuildPath(ctx, strokePart ? strokePercent : 1);\n    }\n\n    if (lineDash) {\n      ctx.setLineDash(lineDash);\n      ctx.lineDashOffset = lineDashOffset;\n    }\n\n    if (!inBatch) {\n      if (style.strokeFirst) {\n        if (hasStroke) {\n          doStrokePath(ctx, style);\n        }\n\n        if (hasFill) {\n          doFillPath(ctx, style);\n        }\n      } else {\n        if (hasFill) {\n          doFillPath(ctx, style);\n        }\n\n        if (hasStroke) {\n          doStrokePath(ctx, style);\n        }\n      }\n    }\n\n    if (lineDash) {\n      ctx.setLineDash([]);\n    }\n  }\n\n  function brushImage(ctx, el, style) {\n    var image = el.__image = createOrUpdateImage(style.image, el.__image, el, el.onload);\n\n    if (!image || !isImageReady(image)) {\n      return;\n    }\n\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = el.getWidth();\n    var height = el.getHeight();\n    var aspect = image.width / image.height;\n\n    if (width == null && height != null) {\n      width = height * aspect;\n    } else if (height == null && width != null) {\n      height = width / aspect;\n    } else if (width == null && height == null) {\n      width = image.width;\n      height = image.height;\n    }\n\n    if (style.sWidth && style.sHeight) {\n      var sx = style.sx || 0;\n      var sy = style.sy || 0;\n      ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    } else if (style.sx && style.sy) {\n      var sx = style.sx;\n      var sy = style.sy;\n      var sWidth = width - sx;\n      var sHeight = height - sy;\n      ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    } else {\n      ctx.drawImage(image, x, y, width, height);\n    }\n  }\n\n  function brushText(ctx, el, style) {\n    var _a;\n\n    var text = style.text;\n    text != null && (text += '');\n\n    if (text) {\n      ctx.font = style.font || DEFAULT_FONT;\n      ctx.textAlign = style.textAlign;\n      ctx.textBaseline = style.textBaseline;\n      var lineDash = void 0;\n      var lineDashOffset = void 0;\n\n      if (ctx.setLineDash && style.lineDash) {\n        _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n      }\n\n      if (lineDash) {\n        ctx.setLineDash(lineDash);\n        ctx.lineDashOffset = lineDashOffset;\n      }\n\n      if (style.strokeFirst) {\n        if (styleHasStroke(style)) {\n          ctx.strokeText(text, style.x, style.y);\n        }\n\n        if (styleHasFill(style)) {\n          ctx.fillText(text, style.x, style.y);\n        }\n      } else {\n        if (styleHasFill(style)) {\n          ctx.fillText(text, style.x, style.y);\n        }\n\n        if (styleHasStroke(style)) {\n          ctx.strokeText(text, style.x, style.y);\n        }\n      }\n\n      if (lineDash) {\n        ctx.setLineDash([]);\n      }\n    }\n  }\n\n  var SHADOW_NUMBER_PROPS = ['shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n  var STROKE_PROPS = [['lineCap', 'butt'], ['lineJoin', 'miter'], ['miterLimit', 10]];\n\n  function bindCommonProps(ctx, style, prevStyle, forceSetAll, scope) {\n    var styleChanged = false;\n\n    if (!forceSetAll) {\n      prevStyle = prevStyle || {};\n\n      if (style === prevStyle) {\n        return false;\n      }\n    }\n\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n      flushPathDrawn(ctx, scope);\n      styleChanged = true;\n      var opacity = Math.max(Math.min(style.opacity, 1), 0);\n      ctx.globalAlpha = isNaN(opacity) ? DEFAULT_COMMON_STYLE.opacity : opacity;\n    }\n\n    if (forceSetAll || style.blend !== prevStyle.blend) {\n      if (!styleChanged) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n      }\n\n      ctx.globalCompositeOperation = style.blend || DEFAULT_COMMON_STYLE.blend;\n    }\n\n    for (var i = 0; i < SHADOW_NUMBER_PROPS.length; i++) {\n      var propName = SHADOW_NUMBER_PROPS[i];\n\n      if (forceSetAll || style[propName] !== prevStyle[propName]) {\n        if (!styleChanged) {\n          flushPathDrawn(ctx, scope);\n          styleChanged = true;\n        }\n\n        ctx[propName] = ctx.dpr * (style[propName] || 0);\n      }\n    }\n\n    if (forceSetAll || style.shadowColor !== prevStyle.shadowColor) {\n      if (!styleChanged) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n      }\n\n      ctx.shadowColor = style.shadowColor || DEFAULT_COMMON_STYLE.shadowColor;\n    }\n\n    return styleChanged;\n  }\n\n  function bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetAll, scope) {\n    var style = getStyle(el, scope.inHover);\n    var prevStyle = forceSetAll ? null : prevEl && getStyle(prevEl, scope.inHover) || {};\n\n    if (style === prevStyle) {\n      return false;\n    }\n\n    var styleChanged = bindCommonProps(ctx, style, prevStyle, forceSetAll, scope);\n\n    if (forceSetAll || style.fill !== prevStyle.fill) {\n      if (!styleChanged) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n      }\n\n      isValidStrokeFillStyle(style.fill) && (ctx.fillStyle = style.fill);\n    }\n\n    if (forceSetAll || style.stroke !== prevStyle.stroke) {\n      if (!styleChanged) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n      }\n\n      isValidStrokeFillStyle(style.stroke) && (ctx.strokeStyle = style.stroke);\n    }\n\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n      if (!styleChanged) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n      }\n\n      ctx.globalAlpha = style.opacity == null ? 1 : style.opacity;\n    }\n\n    if (el.hasStroke()) {\n      var lineWidth = style.lineWidth;\n      var newLineWidth = lineWidth / (style.strokeNoScale && el.getLineScale ? el.getLineScale() : 1);\n\n      if (ctx.lineWidth !== newLineWidth) {\n        if (!styleChanged) {\n          flushPathDrawn(ctx, scope);\n          styleChanged = true;\n        }\n\n        ctx.lineWidth = newLineWidth;\n      }\n    }\n\n    for (var i = 0; i < STROKE_PROPS.length; i++) {\n      var prop = STROKE_PROPS[i];\n      var propName = prop[0];\n\n      if (forceSetAll || style[propName] !== prevStyle[propName]) {\n        if (!styleChanged) {\n          flushPathDrawn(ctx, scope);\n          styleChanged = true;\n        }\n\n        ctx[propName] = style[propName] || prop[1];\n      }\n    }\n\n    return styleChanged;\n  }\n\n  function bindImageStyle(ctx, el, prevEl, forceSetAll, scope) {\n    return bindCommonProps(ctx, getStyle(el, scope.inHover), prevEl && getStyle(prevEl, scope.inHover), forceSetAll, scope);\n  }\n\n  function setContextTransform(ctx, el) {\n    var m = el.transform;\n    var dpr = ctx.dpr || 1;\n\n    if (m) {\n      ctx.setTransform(dpr * m[0], dpr * m[1], dpr * m[2], dpr * m[3], dpr * m[4], dpr * m[5]);\n    } else {\n      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n    }\n  }\n\n  function updateClipStatus(clipPaths, ctx, scope) {\n    var allClipped = false;\n\n    for (var i = 0; i < clipPaths.length; i++) {\n      var clipPath = clipPaths[i];\n      allClipped = allClipped || clipPath.isZeroArea();\n      setContextTransform(ctx, clipPath);\n      ctx.beginPath();\n      clipPath.buildPath(ctx, clipPath.shape);\n      ctx.clip();\n    }\n\n    scope.allClipped = allClipped;\n  }\n\n  function isTransformChanged(m0, m1) {\n    if (m0 && m1) {\n      return m0[0] !== m1[0] || m0[1] !== m1[1] || m0[2] !== m1[2] || m0[3] !== m1[3] || m0[4] !== m1[4] || m0[5] !== m1[5];\n    } else if (!m0 && !m1) {\n      return false;\n    }\n\n    return true;\n  }\n\n  var DRAW_TYPE_PATH = 1;\n  var DRAW_TYPE_IMAGE = 2;\n  var DRAW_TYPE_TEXT = 3;\n  var DRAW_TYPE_INCREMENTAL = 4;\n\n  function canPathBatch(style) {\n    var hasFill = styleHasFill(style);\n    var hasStroke = styleHasStroke(style);\n    return !(style.lineDash || !(+hasFill ^ +hasStroke) || hasFill && typeof style.fill !== 'string' || hasStroke && typeof style.stroke !== 'string' || style.strokePercent < 1 || style.strokeOpacity < 1 || style.fillOpacity < 1);\n  }\n\n  function flushPathDrawn(ctx, scope) {\n    scope.batchFill && ctx.fill();\n    scope.batchStroke && ctx.stroke();\n    scope.batchFill = '';\n    scope.batchStroke = '';\n  }\n\n  function getStyle(el, inHover) {\n    return inHover ? el.__hoverStyle || el.style : el.style;\n  }\n\n  function brushSingle(ctx, el) {\n    brush(ctx, el, {\n      inHover: false,\n      viewWidth: 0,\n      viewHeight: 0\n    }, true);\n  }\n\n  function brush(ctx, el, scope, isLast) {\n    var m = el.transform;\n\n    if (!el.shouldBePainted(scope.viewWidth, scope.viewHeight, false, false)) {\n      el.__dirty &= ~REDRAW_BIT;\n      el.__isRendered = false;\n      return;\n    }\n\n    var clipPaths = el.__clipPaths;\n    var prevElClipPaths = scope.prevElClipPaths;\n    var forceSetTransform = false;\n    var forceSetStyle = false;\n\n    if (!prevElClipPaths || isClipPathChanged(clipPaths, prevElClipPaths)) {\n      if (prevElClipPaths && prevElClipPaths.length) {\n        flushPathDrawn(ctx, scope);\n        ctx.restore();\n        forceSetStyle = forceSetTransform = true;\n        scope.prevElClipPaths = null;\n        scope.allClipped = false;\n        scope.prevEl = null;\n      }\n\n      if (clipPaths && clipPaths.length) {\n        flushPathDrawn(ctx, scope);\n        ctx.save();\n        updateClipStatus(clipPaths, ctx, scope);\n        forceSetTransform = true;\n      }\n\n      scope.prevElClipPaths = clipPaths;\n    }\n\n    if (scope.allClipped) {\n      el.__isRendered = false;\n      return;\n    }\n\n    el.beforeBrush && el.beforeBrush();\n    el.innerBeforeBrush();\n    var prevEl = scope.prevEl;\n\n    if (!prevEl) {\n      forceSetStyle = forceSetTransform = true;\n    }\n\n    var canBatchPath = el instanceof Path && el.autoBatch && canPathBatch(el.style);\n\n    if (forceSetTransform || isTransformChanged(m, prevEl.transform)) {\n      flushPathDrawn(ctx, scope);\n      setContextTransform(ctx, el);\n    } else if (!canBatchPath) {\n      flushPathDrawn(ctx, scope);\n    }\n\n    var style = getStyle(el, scope.inHover);\n\n    if (el instanceof Path) {\n      if (scope.lastDrawType !== DRAW_TYPE_PATH) {\n        forceSetStyle = true;\n        scope.lastDrawType = DRAW_TYPE_PATH;\n      }\n\n      bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n\n      if (!canBatchPath || !scope.batchFill && !scope.batchStroke) {\n        ctx.beginPath();\n      }\n\n      brushPath(ctx, el, style, canBatchPath);\n\n      if (canBatchPath) {\n        scope.batchFill = style.fill || '';\n        scope.batchStroke = style.stroke || '';\n      }\n    } else {\n      if (el instanceof TSpan) {\n        if (scope.lastDrawType !== DRAW_TYPE_TEXT) {\n          forceSetStyle = true;\n          scope.lastDrawType = DRAW_TYPE_TEXT;\n        }\n\n        bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n        brushText(ctx, el, style);\n      } else if (el instanceof ZRImage) {\n        if (scope.lastDrawType !== DRAW_TYPE_IMAGE) {\n          forceSetStyle = true;\n          scope.lastDrawType = DRAW_TYPE_IMAGE;\n        }\n\n        bindImageStyle(ctx, el, prevEl, forceSetStyle, scope);\n        brushImage(ctx, el, style);\n      } else if (el.getTemporalDisplayables) {\n        if (scope.lastDrawType !== DRAW_TYPE_INCREMENTAL) {\n          forceSetStyle = true;\n          scope.lastDrawType = DRAW_TYPE_INCREMENTAL;\n        }\n\n        brushIncremental(ctx, el, scope);\n      }\n    }\n\n    if (canBatchPath && isLast) {\n      flushPathDrawn(ctx, scope);\n    }\n\n    el.innerAfterBrush();\n    el.afterBrush && el.afterBrush();\n    scope.prevEl = el;\n    el.__dirty = 0;\n    el.__isRendered = true;\n  }\n\n  function brushIncremental(ctx, el, scope) {\n    var displayables = el.getDisplayables();\n    var temporalDisplayables = el.getTemporalDisplayables();\n    ctx.save();\n    var innerScope = {\n      prevElClipPaths: null,\n      prevEl: null,\n      allClipped: false,\n      viewWidth: scope.viewWidth,\n      viewHeight: scope.viewHeight,\n      inHover: scope.inHover\n    };\n    var i;\n    var len;\n\n    for (i = el.getCursor(), len = displayables.length; i < len; i++) {\n      var displayable = displayables[i];\n      displayable.beforeBrush && displayable.beforeBrush();\n      displayable.innerBeforeBrush();\n      brush(ctx, displayable, innerScope, i === len - 1);\n      displayable.innerAfterBrush();\n      displayable.afterBrush && displayable.afterBrush();\n      innerScope.prevEl = displayable;\n    }\n\n    for (var i_1 = 0, len_1 = temporalDisplayables.length; i_1 < len_1; i_1++) {\n      var displayable = temporalDisplayables[i_1];\n      displayable.beforeBrush && displayable.beforeBrush();\n      displayable.innerBeforeBrush();\n      brush(ctx, displayable, innerScope, i_1 === len_1 - 1);\n      displayable.innerAfterBrush();\n      displayable.afterBrush && displayable.afterBrush();\n      innerScope.prevEl = displayable;\n    }\n\n    el.clearTemporalDisplayables();\n    el.notClear = true;\n    ctx.restore();\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var decalMap = new WeakMap();\n  var decalCache = new LRU(100);\n  var decalKeys = ['symbol', 'symbolSize', 'symbolKeepAspect', 'color', 'backgroundColor', 'dashArrayX', 'dashArrayY', 'maxTileWidth', 'maxTileHeight'];\n  /**\n   * Create or update pattern image from decal options\n   *\n   * @param {InnerDecalObject | 'none'} decalObject decal options, 'none' if no decal\n   * @return {Pattern} pattern with generated image, null if no decal\n   */\n\n  function createOrUpdatePatternFromDecal(decalObject, api) {\n    if (decalObject === 'none') {\n      return null;\n    }\n\n    var dpr = api.getDevicePixelRatio();\n    var zr = api.getZr();\n    var isSVG = zr.painter.type === 'svg';\n\n    if (decalObject.dirty) {\n      decalMap[\"delete\"](decalObject);\n    }\n\n    var oldPattern = decalMap.get(decalObject);\n\n    if (oldPattern) {\n      return oldPattern;\n    }\n\n    var decalOpt = defaults(decalObject, {\n      symbol: 'rect',\n      symbolSize: 1,\n      symbolKeepAspect: true,\n      color: 'rgba(0, 0, 0, 0.2)',\n      backgroundColor: null,\n      dashArrayX: 5,\n      dashArrayY: 5,\n      rotation: 0,\n      maxTileWidth: 512,\n      maxTileHeight: 512\n    });\n\n    if (decalOpt.backgroundColor === 'none') {\n      decalOpt.backgroundColor = null;\n    }\n\n    var pattern = {\n      repeat: 'repeat'\n    };\n    setPatternnSource(pattern);\n    pattern.rotation = decalOpt.rotation;\n    pattern.scaleX = pattern.scaleY = isSVG ? 1 : 1 / dpr;\n    decalMap.set(decalObject, pattern);\n    decalObject.dirty = false;\n    return pattern;\n\n    function setPatternnSource(pattern) {\n      var keys$$1 = [dpr];\n      var isValidKey = true;\n\n      for (var i = 0; i < decalKeys.length; ++i) {\n        var value = decalOpt[decalKeys[i]];\n\n        if (value != null && !isArray(value) && !isString(value) && !isNumber(value) && typeof value !== 'boolean') {\n          isValidKey = false;\n          break;\n        }\n\n        keys$$1.push(value);\n      }\n\n      var cacheKey;\n\n      if (isValidKey) {\n        cacheKey = keys$$1.join(',') + (isSVG ? '-svg' : '');\n        var cache = decalCache.get(cacheKey);\n\n        if (cache) {\n          isSVG ? pattern.svgElement = cache : pattern.image = cache;\n        }\n      }\n\n      var dashArrayX = normalizeDashArrayX(decalOpt.dashArrayX);\n      var dashArrayY = normalizeDashArrayY(decalOpt.dashArrayY);\n      var symbolArray = normalizeSymbolArray(decalOpt.symbol);\n      var lineBlockLengthsX = getLineBlockLengthX(dashArrayX);\n      var lineBlockLengthY = getLineBlockLengthY(dashArrayY);\n      var canvas = !isSVG && platformApi.createCanvas();\n      var svgRoot = isSVG && {\n        tag: 'g',\n        attrs: {},\n        key: 'dcl',\n        children: []\n      };\n      var pSize = getPatternSize();\n      var ctx;\n\n      if (canvas) {\n        canvas.width = pSize.width * dpr;\n        canvas.height = pSize.height * dpr;\n        ctx = canvas.getContext('2d');\n      }\n\n      brushDecal();\n\n      if (isValidKey) {\n        decalCache.put(cacheKey, canvas || svgRoot);\n      }\n\n      pattern.image = canvas;\n      pattern.svgElement = svgRoot;\n      pattern.svgWidth = pSize.width;\n      pattern.svgHeight = pSize.height;\n      /**\n       * Get minumum length that can make a repeatable pattern.\n       *\n       * @return {Object} pattern width and height\n       */\n\n      function getPatternSize() {\n        /**\n         * For example, if dash is [[3, 2], [2, 1]] for X, it looks like\n         * |---  ---  ---  ---  --- ...\n         * |-- -- -- -- -- -- -- -- ...\n         * |---  ---  ---  ---  --- ...\n         * |-- -- -- -- -- -- -- -- ...\n         * So the minumum length of X is 15,\n         * which is the least common multiple of `3 + 2` and `2 + 1`\n         * |---  ---  ---  |---  --- ...\n         * |-- -- -- -- -- |-- -- -- ...\n         */\n        var width = 1;\n\n        for (var i = 0, xlen = lineBlockLengthsX.length; i < xlen; ++i) {\n          width = getLeastCommonMultiple(width, lineBlockLengthsX[i]);\n        }\n\n        var symbolRepeats = 1;\n\n        for (var i = 0, xlen = symbolArray.length; i < xlen; ++i) {\n          symbolRepeats = getLeastCommonMultiple(symbolRepeats, symbolArray[i].length);\n        }\n\n        width *= symbolRepeats;\n        var height = lineBlockLengthY * lineBlockLengthsX.length * symbolArray.length;\n        {\n          var warn = function (attrName) {\n            /* eslint-disable-next-line */\n            console.warn(\"Calculated decal size is greater than \" + attrName + \" due to decal option settings so \" + attrName + \" is used for the decal size. Please consider changing the decal option to make a smaller decal or set \" + attrName + \" to be larger to avoid incontinuity.\");\n          };\n\n          if (width > decalOpt.maxTileWidth) {\n            warn('maxTileWidth');\n          }\n\n          if (height > decalOpt.maxTileHeight) {\n            warn('maxTileHeight');\n          }\n        }\n        return {\n          width: Math.max(1, Math.min(width, decalOpt.maxTileWidth)),\n          height: Math.max(1, Math.min(height, decalOpt.maxTileHeight))\n        };\n      }\n\n      function brushDecal() {\n        if (ctx) {\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n          if (decalOpt.backgroundColor) {\n            ctx.fillStyle = decalOpt.backgroundColor;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n          }\n        }\n\n        var ySum = 0;\n\n        for (var i = 0; i < dashArrayY.length; ++i) {\n          ySum += dashArrayY[i];\n        }\n\n        if (ySum <= 0) {\n          // dashArrayY is 0, draw nothing\n          return;\n        }\n\n        var y = -lineBlockLengthY;\n        var yId = 0;\n        var yIdTotal = 0;\n        var xId0 = 0;\n\n        while (y < pSize.height) {\n          if (yId % 2 === 0) {\n            var symbolYId = yIdTotal / 2 % symbolArray.length;\n            var x = 0;\n            var xId1 = 0;\n            var xId1Total = 0;\n\n            while (x < pSize.width * 2) {\n              var xSum = 0;\n\n              for (var i = 0; i < dashArrayX[xId0].length; ++i) {\n                xSum += dashArrayX[xId0][i];\n              }\n\n              if (xSum <= 0) {\n                // Skip empty line\n                break;\n              } // E.g., [15, 5, 20, 5] draws only for 15 and 20\n\n\n              if (xId1 % 2 === 0) {\n                var size = (1 - decalOpt.symbolSize) * 0.5;\n                var left = x + dashArrayX[xId0][xId1] * size;\n                var top_1 = y + dashArrayY[yId] * size;\n                var width = dashArrayX[xId0][xId1] * decalOpt.symbolSize;\n                var height = dashArrayY[yId] * decalOpt.symbolSize;\n                var symbolXId = xId1Total / 2 % symbolArray[symbolYId].length;\n                brushSymbol(left, top_1, width, height, symbolArray[symbolYId][symbolXId]);\n              }\n\n              x += dashArrayX[xId0][xId1];\n              ++xId1Total;\n              ++xId1;\n\n              if (xId1 === dashArrayX[xId0].length) {\n                xId1 = 0;\n              }\n            }\n\n            ++xId0;\n\n            if (xId0 === dashArrayX.length) {\n              xId0 = 0;\n            }\n          }\n\n          y += dashArrayY[yId];\n          ++yIdTotal;\n          ++yId;\n\n          if (yId === dashArrayY.length) {\n            yId = 0;\n          }\n        }\n\n        function brushSymbol(x, y, width, height, symbolType) {\n          var scale = isSVG ? 1 : dpr;\n          var symbol = createSymbol(symbolType, x * scale, y * scale, width * scale, height * scale, decalOpt.color, decalOpt.symbolKeepAspect);\n\n          if (isSVG) {\n            var symbolVNode = zr.painter.renderOneToVNode(symbol);\n\n            if (symbolVNode) {\n              svgRoot.children.push(symbolVNode);\n            }\n          } else {\n            // Paint to canvas for all other renderers.\n            brushSingle(ctx, symbol);\n          }\n        }\n      }\n    }\n  }\n  /**\n   * Convert symbol array into normalized array\n   *\n   * @param {string | (string | string[])[]} symbol symbol input\n   * @return {string[][]} normolized symbol array\n   */\n\n\n  function normalizeSymbolArray(symbol) {\n    if (!symbol || symbol.length === 0) {\n      return [['rect']];\n    }\n\n    if (isString(symbol)) {\n      return [[symbol]];\n    }\n\n    var isAllString = true;\n\n    for (var i = 0; i < symbol.length; ++i) {\n      if (!isString(symbol[i])) {\n        isAllString = false;\n        break;\n      }\n    }\n\n    if (isAllString) {\n      return normalizeSymbolArray([symbol]);\n    }\n\n    var result = [];\n\n    for (var i = 0; i < symbol.length; ++i) {\n      if (isString(symbol[i])) {\n        result.push([symbol[i]]);\n      } else {\n        result.push(symbol[i]);\n      }\n    }\n\n    return result;\n  }\n  /**\n   * Convert dash input into dashArray\n   *\n   * @param {DecalDashArrayX} dash dash input\n   * @return {number[][]} normolized dash array\n   */\n\n\n  function normalizeDashArrayX(dash) {\n    if (!dash || dash.length === 0) {\n      return [[0, 0]];\n    }\n\n    if (isNumber(dash)) {\n      var dashValue = Math.ceil(dash);\n      return [[dashValue, dashValue]];\n    }\n    /**\n     * [20, 5] should be normalized into [[20, 5]],\n     * while [20, [5, 10]] should be normalized into [[20, 20], [5, 10]]\n     */\n\n\n    var isAllNumber = true;\n\n    for (var i = 0; i < dash.length; ++i) {\n      if (!isNumber(dash[i])) {\n        isAllNumber = false;\n        break;\n      }\n    }\n\n    if (isAllNumber) {\n      return normalizeDashArrayX([dash]);\n    }\n\n    var result = [];\n\n    for (var i = 0; i < dash.length; ++i) {\n      if (isNumber(dash[i])) {\n        var dashValue = Math.ceil(dash[i]);\n        result.push([dashValue, dashValue]);\n      } else {\n        var dashValue = map(dash[i], function (n) {\n          return Math.ceil(n);\n        });\n\n        if (dashValue.length % 2 === 1) {\n          // [4, 2, 1] means |----  -    -- |----  -    -- |\n          // so normalize it to be [4, 2, 1, 4, 2, 1]\n          result.push(dashValue.concat(dashValue));\n        } else {\n          result.push(dashValue);\n        }\n      }\n    }\n\n    return result;\n  }\n  /**\n   * Convert dash input into dashArray\n   *\n   * @param {DecalDashArrayY} dash dash input\n   * @return {number[]} normolized dash array\n   */\n\n\n  function normalizeDashArrayY(dash) {\n    if (!dash || typeof dash === 'object' && dash.length === 0) {\n      return [0, 0];\n    }\n\n    if (isNumber(dash)) {\n      var dashValue_1 = Math.ceil(dash);\n      return [dashValue_1, dashValue_1];\n    }\n\n    var dashValue = map(dash, function (n) {\n      return Math.ceil(n);\n    });\n    return dash.length % 2 ? dashValue.concat(dashValue) : dashValue;\n  }\n  /**\n   * Get block length of each line. A block is the length of dash line and space.\n   * For example, a line with [4, 1] has a dash line of 4 and a space of 1 after\n   * that, so the block length of this line is 5.\n   *\n   * @param {number[][]} dash dash arrary of X or Y\n   * @return {number[]} block length of each line\n   */\n\n\n  function getLineBlockLengthX(dash) {\n    return map(dash, function (line) {\n      return getLineBlockLengthY(line);\n    });\n  }\n\n  function getLineBlockLengthY(dash) {\n    var blockLength = 0;\n\n    for (var i = 0; i < dash.length; ++i) {\n      blockLength += dash[i];\n    }\n\n    if (dash.length % 2 === 1) {\n      // [4, 2, 1] means |----  -    -- |----  -    -- |\n      // So total length is (4 + 2 + 1) * 2\n      return blockLength * 2;\n    }\n\n    return blockLength;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function decalVisual(ecModel, api) {\n    ecModel.eachRawSeries(function (seriesModel) {\n      if (ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n\n      if (data.hasItemVisual()) {\n        data.each(function (idx) {\n          var decal = data.getItemVisual(idx, 'decal');\n\n          if (decal) {\n            var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\n            itemStyle.decal = createOrUpdatePatternFromDecal(decal, api);\n          }\n        });\n      }\n\n      var decal = data.getVisual('decal');\n\n      if (decal) {\n        var style = data.getVisual('style');\n        style.decal = createOrUpdatePatternFromDecal(decal, api);\n      }\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var lifecycle = new Eventful();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // The implentations will be registered when installing the component.\n  // Avoid these code being bundled to the core module.\n\n  var implsStore = {}; // TODO Type\n\n  function registerImpl(name, impl) {\n    {\n      if (implsStore[name]) {\n        error(\"Already has an implementation of \" + name + \".\");\n      }\n    }\n    implsStore[name] = impl;\n  }\n\n  function getImpl(name) {\n    {\n      if (!implsStore[name]) {\n        error(\"Implementation of \" + name + \" doesn't exists.\");\n      }\n    }\n    return implsStore[name];\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var hasWindow = typeof window !== 'undefined';\n  var version = '5.3.3';\n  var dependencies = {\n    zrender: '5.3.2'\n  };\n  var TEST_FRAME_REMAIN_TIME = 1;\n  var PRIORITY_PROCESSOR_SERIES_FILTER = 800; // Some data processors depends on the stack result dimension (to calculate data extent).\n  // So data stack stage should be in front of data processing stage.\n\n  var PRIORITY_PROCESSOR_DATASTACK = 900; // \"Data filter\" will block the stream, so it should be\n  // put at the begining of data processing.\n\n  var PRIORITY_PROCESSOR_FILTER = 1000;\n  var PRIORITY_PROCESSOR_DEFAULT = 2000;\n  var PRIORITY_PROCESSOR_STATISTIC = 5000;\n  var PRIORITY_VISUAL_LAYOUT = 1000;\n  var PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\n  var PRIORITY_VISUAL_GLOBAL = 2000;\n  var PRIORITY_VISUAL_CHART = 3000;\n  var PRIORITY_VISUAL_COMPONENT = 4000; // Visual property in data. Greater than `PRIORITY_VISUAL_COMPONENT` to enable to\n  // overwrite the viusal result of component (like `visualMap`)\n  // using data item specific setting (like itemStyle.xxx on data item)\n\n  var PRIORITY_VISUAL_CHART_DATA_CUSTOM = 4500; // Greater than `PRIORITY_VISUAL_CHART_DATA_CUSTOM` to enable to layout based on\n  // visual result like `symbolSize`.\n\n  var PRIORITY_VISUAL_POST_CHART_LAYOUT = 4600;\n  var PRIORITY_VISUAL_BRUSH = 5000;\n  var PRIORITY_VISUAL_ARIA = 6000;\n  var PRIORITY_VISUAL_DECAL = 7000;\n  var PRIORITY = {\n    PROCESSOR: {\n      FILTER: PRIORITY_PROCESSOR_FILTER,\n      SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\n      STATISTIC: PRIORITY_PROCESSOR_STATISTIC\n    },\n    VISUAL: {\n      LAYOUT: PRIORITY_VISUAL_LAYOUT,\n      PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\n      GLOBAL: PRIORITY_VISUAL_GLOBAL,\n      CHART: PRIORITY_VISUAL_CHART,\n      POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\n      COMPONENT: PRIORITY_VISUAL_COMPONENT,\n      BRUSH: PRIORITY_VISUAL_BRUSH,\n      CHART_ITEM: PRIORITY_VISUAL_CHART_DATA_CUSTOM,\n      ARIA: PRIORITY_VISUAL_ARIA,\n      DECAL: PRIORITY_VISUAL_DECAL\n    }\n  }; // Main process have three entries: `setOption`, `dispatchAction` and `resize`,\n  // where they must not be invoked nestedly, except the only case: invoke\n  // dispatchAction with updateMethod \"none\" in main process.\n  // This flag is used to carry out this rule.\n  // All events will be triggered out side main process (i.e. when !this[IN_MAIN_PROCESS]).\n\n  var IN_MAIN_PROCESS_KEY = '__flagInMainProcess';\n  var PENDING_UPDATE = '__pendingUpdate';\n  var STATUS_NEEDS_UPDATE_KEY = '__needsUpdateStatus';\n  var ACTION_REG = /^[a-zA-Z0-9_]+$/;\n  var CONNECT_STATUS_KEY = '__connectUpdateStatus';\n  var CONNECT_STATUS_PENDING = 0;\n  var CONNECT_STATUS_UPDATING = 1;\n  var CONNECT_STATUS_UPDATED = 2;\n\n  function createRegisterEventWithLowercaseECharts(method) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      if (this.isDisposed()) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      return toLowercaseNameAndCallEventful(this, method, args);\n    };\n  }\n\n  function createRegisterEventWithLowercaseMessageCenter(method) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return toLowercaseNameAndCallEventful(this, method, args);\n    };\n  }\n\n  function toLowercaseNameAndCallEventful(host, method, args) {\n    // `args[0]` is event name. Event name is all lowercase.\n    args[0] = args[0] && args[0].toLowerCase();\n    return Eventful.prototype[method].apply(host, args);\n  }\n\n  var MessageCenter =\n  /** @class */\n  function (_super) {\n    __extends(MessageCenter, _super);\n\n    function MessageCenter() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    return MessageCenter;\n  }(Eventful);\n\n  var messageCenterProto = MessageCenter.prototype;\n  messageCenterProto.on = createRegisterEventWithLowercaseMessageCenter('on');\n  messageCenterProto.off = createRegisterEventWithLowercaseMessageCenter('off'); // ---------------------------------------\n  // Internal method names for class ECharts\n  // ---------------------------------------\n\n  var prepare;\n  var prepareView;\n  var updateDirectly;\n  var updateMethods;\n  var doConvertPixel;\n  var updateStreamModes;\n  var doDispatchAction;\n  var flushPendingActions;\n  var triggerUpdatedEvent;\n  var bindRenderedEvent;\n  var bindMouseEvent;\n  var render;\n  var renderComponents;\n  var renderSeries;\n  var createExtensionAPI;\n  var enableConnect;\n  var markStatusToUpdate;\n  var applyChangedStates;\n\n  var ECharts =\n  /** @class */\n  function (_super) {\n    __extends(ECharts, _super);\n\n    function ECharts(dom, // Theme name or themeOption.\n    theme$$1, opts) {\n      var _this = _super.call(this, new ECEventProcessor()) || this;\n\n      _this._chartsViews = [];\n      _this._chartsMap = {};\n      _this._componentsViews = [];\n      _this._componentsMap = {}; // Can't dispatch action during rendering procedure\n\n      _this._pendingActions = [];\n      opts = opts || {}; // Get theme by name\n\n      if (isString(theme$$1)) {\n        theme$$1 = themeStorage[theme$$1];\n      }\n\n      _this._dom = dom;\n      var defaultRenderer = 'canvas';\n      var defaultUseDirtyRect = false;\n      {\n        var root =\n        /* eslint-disable-next-line */\n        hasWindow ? window : global;\n        defaultRenderer = root.__ECHARTS__DEFAULT__RENDERER__ || defaultRenderer;\n        var devUseDirtyRect = root.__ECHARTS__DEFAULT__USE_DIRTY_RECT__;\n        defaultUseDirtyRect = devUseDirtyRect == null ? defaultUseDirtyRect : devUseDirtyRect;\n      }\n      var zr = _this._zr = init$1(dom, {\n        renderer: opts.renderer || defaultRenderer,\n        devicePixelRatio: opts.devicePixelRatio,\n        width: opts.width,\n        height: opts.height,\n        ssr: opts.ssr,\n        useDirtyRect: opts.useDirtyRect == null ? defaultUseDirtyRect : opts.useDirtyRect\n      });\n      _this._ssr = opts.ssr; // Expect 60 fps.\n\n      _this._throttledZrFlush = throttle(bind(zr.flush, zr), 17);\n      theme$$1 = clone(theme$$1);\n      theme$$1 && globalBackwardCompat(theme$$1, true);\n      _this._theme = theme$$1;\n      _this._locale = createLocaleObject(opts.locale || SYSTEM_LANG);\n      _this._coordSysMgr = new CoordinateSystemManager();\n      var api = _this._api = createExtensionAPI(_this); // Sort on demand\n\n      function prioritySortFunc(a, b) {\n        return a.__prio - b.__prio;\n      }\n\n      sort(visualFuncs, prioritySortFunc);\n      sort(dataProcessorFuncs, prioritySortFunc);\n      _this._scheduler = new Scheduler(_this, api, dataProcessorFuncs, visualFuncs);\n      _this._messageCenter = new MessageCenter(); // Init mouse events\n\n      _this._initEvents(); // In case some people write `window.onresize = chart.resize`\n\n\n      _this.resize = bind(_this.resize, _this);\n      zr.animation.on('frame', _this._onframe, _this);\n      bindRenderedEvent(zr, _this);\n      bindMouseEvent(zr, _this); // ECharts instance can be used as value.\n\n      setAsPrimitive(_this);\n      return _this;\n    }\n\n    ECharts.prototype._onframe = function () {\n      if (this._disposed) {\n        return;\n      }\n\n      applyChangedStates(this);\n      var scheduler = this._scheduler; // Lazy update\n\n      if (this[PENDING_UPDATE]) {\n        var silent = this[PENDING_UPDATE].silent;\n        this[IN_MAIN_PROCESS_KEY] = true;\n\n        try {\n          prepare(this);\n          updateMethods.update.call(this, null, this[PENDING_UPDATE].updateParams);\n        } catch (e) {\n          this[IN_MAIN_PROCESS_KEY] = false;\n          this[PENDING_UPDATE] = null;\n          throw e;\n        } // At present, in each frame, zrender performs:\n        //   (1) animation step forward.\n        //   (2) trigger('frame') (where this `_onframe` is called)\n        //   (3) zrender flush (render).\n        // If we do nothing here, since we use `setToFinal: true`, the step (3) above\n        // will render the final state of the elements before the real animation started.\n\n\n        this._zr.flush();\n\n        this[IN_MAIN_PROCESS_KEY] = false;\n        this[PENDING_UPDATE] = null;\n        flushPendingActions.call(this, silent);\n        triggerUpdatedEvent.call(this, silent);\n      } // Avoid do both lazy update and progress in one frame.\n      else if (scheduler.unfinished) {\n          // Stream progress.\n          var remainTime = TEST_FRAME_REMAIN_TIME;\n          var ecModel = this._model;\n          var api = this._api;\n          scheduler.unfinished = false;\n\n          do {\n            var startTime = +new Date();\n            scheduler.performSeriesTasks(ecModel); // Currently dataProcessorFuncs do not check threshold.\n\n            scheduler.performDataProcessorTasks(ecModel);\n            updateStreamModes(this, ecModel); // Do not update coordinate system here. Because that coord system update in\n            // each frame is not a good user experience. So we follow the rule that\n            // the extent of the coordinate system is determin in the first frame (the\n            // frame is executed immedietely after task reset.\n            // this._coordSysMgr.update(ecModel, api);\n            // console.log('--- ec frame visual ---', remainTime);\n\n            scheduler.performVisualTasks(ecModel);\n            renderSeries(this, this._model, api, 'remain', {});\n            remainTime -= +new Date() - startTime;\n          } while (remainTime > 0 && scheduler.unfinished); // Call flush explicitly for trigger finished event.\n\n\n          if (!scheduler.unfinished) {\n            this._zr.flush();\n          } // Else, zr flushing be ensue within the same frame,\n          // because zr flushing is after onframe event.\n\n        }\n    };\n\n    ECharts.prototype.getDom = function () {\n      return this._dom;\n    };\n\n    ECharts.prototype.getId = function () {\n      return this.id;\n    };\n\n    ECharts.prototype.getZr = function () {\n      return this._zr;\n    };\n\n    ECharts.prototype.isSSR = function () {\n      return this._ssr;\n    };\n    /* eslint-disable-next-line */\n\n\n    ECharts.prototype.setOption = function (option, notMerge, lazyUpdate) {\n      if (this[IN_MAIN_PROCESS_KEY]) {\n        {\n          error('`setOption` should not be called during main process.');\n        }\n        return;\n      }\n\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      var silent;\n      var replaceMerge;\n      var transitionOpt;\n\n      if (isObject(notMerge)) {\n        lazyUpdate = notMerge.lazyUpdate;\n        silent = notMerge.silent;\n        replaceMerge = notMerge.replaceMerge;\n        transitionOpt = notMerge.transition;\n        notMerge = notMerge.notMerge;\n      }\n\n      this[IN_MAIN_PROCESS_KEY] = true;\n\n      if (!this._model || notMerge) {\n        var optionManager = new OptionManager(this._api);\n        var theme$$1 = this._theme;\n        var ecModel = this._model = new GlobalModel();\n        ecModel.scheduler = this._scheduler;\n        ecModel.ssr = this._ssr;\n        ecModel.init(null, null, null, theme$$1, this._locale, optionManager);\n      }\n\n      this._model.setOption(option, {\n        replaceMerge: replaceMerge\n      }, optionPreprocessorFuncs);\n\n      var updateParams = {\n        seriesTransition: transitionOpt,\n        optionChanged: true\n      };\n\n      if (lazyUpdate) {\n        this[PENDING_UPDATE] = {\n          silent: silent,\n          updateParams: updateParams\n        };\n        this[IN_MAIN_PROCESS_KEY] = false; // `setOption(option, {lazyMode: true})` may be called when zrender has been slept.\n        // It should wake it up to make sure zrender start to render at the next frame.\n\n        this.getZr().wakeUp();\n      } else {\n        try {\n          prepare(this);\n          updateMethods.update.call(this, null, updateParams);\n        } catch (e) {\n          this[PENDING_UPDATE] = null;\n          this[IN_MAIN_PROCESS_KEY] = false;\n          throw e;\n        } // Ensure zr refresh sychronously, and then pixel in canvas can be\n        // fetched after `setOption`.\n\n\n        if (!this._ssr) {\n          // not use flush when using ssr mode.\n          this._zr.flush();\n        }\n\n        this[PENDING_UPDATE] = null;\n        this[IN_MAIN_PROCESS_KEY] = false;\n        flushPendingActions.call(this, silent);\n        triggerUpdatedEvent.call(this, silent);\n      }\n    };\n    /**\n     * @deprecated\n     */\n\n\n    ECharts.prototype.setTheme = function () {\n      deprecateLog('ECharts#setTheme() is DEPRECATED in ECharts 3.0');\n    }; // We don't want developers to use getModel directly.\n\n\n    ECharts.prototype.getModel = function () {\n      return this._model;\n    };\n\n    ECharts.prototype.getOption = function () {\n      return this._model && this._model.getOption();\n    };\n\n    ECharts.prototype.getWidth = function () {\n      return this._zr.getWidth();\n    };\n\n    ECharts.prototype.getHeight = function () {\n      return this._zr.getHeight();\n    };\n\n    ECharts.prototype.getDevicePixelRatio = function () {\n      return this._zr.painter.dpr\n      /* eslint-disable-next-line */\n      || hasWindow && window.devicePixelRatio || 1;\n    };\n    /**\n     * Get canvas which has all thing rendered\n     * @deprecated Use renderToCanvas instead.\n     */\n\n\n    ECharts.prototype.getRenderedCanvas = function (opts) {\n      {\n        deprecateReplaceLog('getRenderedCanvas', 'renderToCanvas');\n      }\n      return this.renderToCanvas(opts);\n    };\n\n    ECharts.prototype.renderToCanvas = function (opts) {\n      opts = opts || {};\n      var painter = this._zr.painter;\n      {\n        if (painter.type !== 'canvas') {\n          throw new Error('renderToCanvas can only be used in the canvas renderer.');\n        }\n      }\n      return painter.getRenderedCanvas({\n        backgroundColor: opts.backgroundColor || this._model.get('backgroundColor'),\n        pixelRatio: opts.pixelRatio || this.getDevicePixelRatio()\n      });\n    };\n\n    ECharts.prototype.renderToSVGString = function (opts) {\n      opts = opts || {};\n      var painter = this._zr.painter;\n      {\n        if (painter.type !== 'svg') {\n          throw new Error('renderToSVGString can only be used in the svg renderer.');\n        }\n      }\n      return painter.renderToString({\n        useViewBox: opts.useViewBox\n      });\n    };\n    /**\n     * Get svg data url\n     */\n\n\n    ECharts.prototype.getSvgDataURL = function () {\n      if (!env.svgSupported) {\n        return;\n      }\n\n      var zr = this._zr;\n      var list = zr.storage.getDisplayList(); // Stop animations\n\n      each(list, function (el) {\n        el.stopAnimation(null, true);\n      });\n      return zr.painter.toDataURL();\n    };\n\n    ECharts.prototype.getDataURL = function (opts) {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      opts = opts || {};\n      var excludeComponents = opts.excludeComponents;\n      var ecModel = this._model;\n      var excludesComponentViews = [];\n      var self = this;\n      each(excludeComponents, function (componentType) {\n        ecModel.eachComponent({\n          mainType: componentType\n        }, function (component) {\n          var view = self._componentsMap[component.__viewId];\n\n          if (!view.group.ignore) {\n            excludesComponentViews.push(view);\n            view.group.ignore = true;\n          }\n        });\n      });\n      var url = this._zr.painter.getType() === 'svg' ? this.getSvgDataURL() : this.renderToCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\n      each(excludesComponentViews, function (view) {\n        view.group.ignore = false;\n      });\n      return url;\n    };\n\n    ECharts.prototype.getConnectedDataURL = function (opts) {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      var isSvg = opts.type === 'svg';\n      var groupId = this.group;\n      var mathMin = Math.min;\n      var mathMax = Math.max;\n      var MAX_NUMBER = Infinity;\n\n      if (connectedGroups[groupId]) {\n        var left_1 = MAX_NUMBER;\n        var top_1 = MAX_NUMBER;\n        var right_1 = -MAX_NUMBER;\n        var bottom_1 = -MAX_NUMBER;\n        var canvasList_1 = [];\n        var dpr_1 = opts && opts.pixelRatio || this.getDevicePixelRatio();\n        each(instances, function (chart, id) {\n          if (chart.group === groupId) {\n            var canvas = isSvg ? chart.getZr().painter.getSvgDom().innerHTML : chart.renderToCanvas(clone(opts));\n            var boundingRect = chart.getDom().getBoundingClientRect();\n            left_1 = mathMin(boundingRect.left, left_1);\n            top_1 = mathMin(boundingRect.top, top_1);\n            right_1 = mathMax(boundingRect.right, right_1);\n            bottom_1 = mathMax(boundingRect.bottom, bottom_1);\n            canvasList_1.push({\n              dom: canvas,\n              left: boundingRect.left,\n              top: boundingRect.top\n            });\n          }\n        });\n        left_1 *= dpr_1;\n        top_1 *= dpr_1;\n        right_1 *= dpr_1;\n        bottom_1 *= dpr_1;\n        var width = right_1 - left_1;\n        var height = bottom_1 - top_1;\n        var targetCanvas = platformApi.createCanvas();\n        var zr_1 = init$1(targetCanvas, {\n          renderer: isSvg ? 'svg' : 'canvas'\n        });\n        zr_1.resize({\n          width: width,\n          height: height\n        });\n\n        if (isSvg) {\n          var content_1 = '';\n          each(canvasList_1, function (item) {\n            var x = item.left - left_1;\n            var y = item.top - top_1;\n            content_1 += '<g transform=\"translate(' + x + ',' + y + ')\">' + item.dom + '</g>';\n          });\n          zr_1.painter.getSvgRoot().innerHTML = content_1;\n\n          if (opts.connectedBackgroundColor) {\n            zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor);\n          }\n\n          zr_1.refreshImmediately();\n          return zr_1.painter.toDataURL();\n        } else {\n          // Background between the charts\n          if (opts.connectedBackgroundColor) {\n            zr_1.add(new Rect({\n              shape: {\n                x: 0,\n                y: 0,\n                width: width,\n                height: height\n              },\n              style: {\n                fill: opts.connectedBackgroundColor\n              }\n            }));\n          }\n\n          each(canvasList_1, function (item) {\n            var img = new ZRImage({\n              style: {\n                x: item.left * dpr_1 - left_1,\n                y: item.top * dpr_1 - top_1,\n                image: item.dom\n              }\n            });\n            zr_1.add(img);\n          });\n          zr_1.refreshImmediately();\n          return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\n        }\n      } else {\n        return this.getDataURL(opts);\n      }\n    };\n\n    ECharts.prototype.convertToPixel = function (finder, value) {\n      return doConvertPixel(this, 'convertToPixel', finder, value);\n    };\n\n    ECharts.prototype.convertFromPixel = function (finder, value) {\n      return doConvertPixel(this, 'convertFromPixel', finder, value);\n    };\n    /**\n     * Is the specified coordinate systems or components contain the given pixel point.\n     * @param {Array|number} value\n     * @return {boolean} result\n     */\n\n\n    ECharts.prototype.containPixel = function (finder, value) {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      var ecModel = this._model;\n      var result;\n      var findResult = parseFinder(ecModel, finder);\n      each(findResult, function (models, key) {\n        key.indexOf('Models') >= 0 && each(models, function (model) {\n          var coordSys = model.coordinateSystem;\n\n          if (coordSys && coordSys.containPoint) {\n            result = result || !!coordSys.containPoint(value);\n          } else if (key === 'seriesModels') {\n            var view = this._chartsMap[model.__viewId];\n\n            if (view && view.containPoint) {\n              result = result || view.containPoint(value, model);\n            } else {\n              {\n                console.warn(key + ': ' + (view ? 'The found component do not support containPoint.' : 'No view mapping to the found component.'));\n              }\n            }\n          } else {\n            {\n              console.warn(key + ': containPoint is not supported');\n            }\n          }\n        }, this);\n      }, this);\n      return !!result;\n    };\n    /**\n     * Get visual from series or data.\n     * @param finder\n     *        If string, e.g., 'series', means {seriesIndex: 0}.\n     *        If Object, could contain some of these properties below:\n     *        {\n     *            seriesIndex / seriesId / seriesName,\n     *            dataIndex / dataIndexInside\n     *        }\n     *        If dataIndex is not specified, series visual will be fetched,\n     *        but not data item visual.\n     *        If all of seriesIndex, seriesId, seriesName are not specified,\n     *        visual will be fetched from first series.\n     * @param visualType 'color', 'symbol', 'symbolSize'\n     */\n\n\n    ECharts.prototype.getVisual = function (finder, visualType) {\n      var ecModel = this._model;\n      var parsedFinder = parseFinder(ecModel, finder, {\n        defaultMainType: 'series'\n      });\n      var seriesModel = parsedFinder.seriesModel;\n      {\n        if (!seriesModel) {\n          console.warn('There is no specified seires model');\n        }\n      }\n      var data = seriesModel.getData();\n      var dataIndexInside = parsedFinder.hasOwnProperty('dataIndexInside') ? parsedFinder.dataIndexInside : parsedFinder.hasOwnProperty('dataIndex') ? data.indexOfRawIndex(parsedFinder.dataIndex) : null;\n      return dataIndexInside != null ? getItemVisualFromData(data, dataIndexInside, visualType) : getVisualFromData(data, visualType);\n    };\n    /**\n     * Get view of corresponding component model\n     */\n\n\n    ECharts.prototype.getViewOfComponentModel = function (componentModel) {\n      return this._componentsMap[componentModel.__viewId];\n    };\n    /**\n     * Get view of corresponding series model\n     */\n\n\n    ECharts.prototype.getViewOfSeriesModel = function (seriesModel) {\n      return this._chartsMap[seriesModel.__viewId];\n    };\n\n    ECharts.prototype._initEvents = function () {\n      var _this = this;\n\n      each(MOUSE_EVENT_NAMES, function (eveName) {\n        var handler = function (e) {\n          var ecModel = _this.getModel();\n\n          var el = e.target;\n          var params;\n          var isGlobalOut = eveName === 'globalout'; // no e.target when 'globalout'.\n\n          if (isGlobalOut) {\n            params = {};\n          } else {\n            el && findEventDispatcher(el, function (parent) {\n              var ecData = getECData(parent);\n\n              if (ecData && ecData.dataIndex != null) {\n                var dataModel = ecData.dataModel || ecModel.getSeriesByIndex(ecData.seriesIndex);\n                params = dataModel && dataModel.getDataParams(ecData.dataIndex, ecData.dataType) || {};\n                return true;\n              } // If element has custom eventData of components\n              else if (ecData.eventData) {\n                  params = extend({}, ecData.eventData);\n                  return true;\n                }\n            }, true);\n          } // Contract: if params prepared in mouse event,\n          // these properties must be specified:\n          // {\n          //    componentType: string (component main type)\n          //    componentIndex: number\n          // }\n          // Otherwise event query can not work.\n\n\n          if (params) {\n            var componentType = params.componentType;\n            var componentIndex = params.componentIndex; // Special handling for historic reason: when trigger by\n            // markLine/markPoint/markArea, the componentType is\n            // 'markLine'/'markPoint'/'markArea', but we should better\n            // enable them to be queried by seriesIndex, since their\n            // option is set in each series.\n\n            if (componentType === 'markLine' || componentType === 'markPoint' || componentType === 'markArea') {\n              componentType = 'series';\n              componentIndex = params.seriesIndex;\n            }\n\n            var model = componentType && componentIndex != null && ecModel.getComponent(componentType, componentIndex);\n            var view = model && _this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\n            {\n              // `event.componentType` and `event[componentTpype + 'Index']` must not\n              // be missed, otherwise there is no way to distinguish source component.\n              // See `dataFormat.getDataParams`.\n              if (!isGlobalOut && !(model && view)) {\n                console.warn('model or view can not be found by params');\n              }\n            }\n            params.event = e;\n            params.type = eveName;\n            _this._$eventProcessor.eventInfo = {\n              targetEl: el,\n              packedEvent: params,\n              model: model,\n              view: view\n            };\n\n            _this.trigger(eveName, params);\n          }\n        }; // Consider that some component (like tooltip, brush, ...)\n        // register zr event handler, but user event handler might\n        // do anything, such as call `setOption` or `dispatchAction`,\n        // which probably update any of the content and probably\n        // cause problem if it is called previous other inner handlers.\n\n\n        handler.zrEventfulCallAtLast = true;\n\n        _this._zr.on(eveName, handler, _this);\n      });\n      each(eventActionMap, function (actionType, eventType) {\n        _this._messageCenter.on(eventType, function (event) {\n          this.trigger(eventType, event);\n        }, _this);\n      }); // Extra events\n      // TODO register?\n\n      each(['selectchanged'], function (eventType) {\n        _this._messageCenter.on(eventType, function (event) {\n          this.trigger(eventType, event);\n        }, _this);\n      });\n      handleLegacySelectEvents(this._messageCenter, this, this._api);\n    };\n\n    ECharts.prototype.isDisposed = function () {\n      return this._disposed;\n    };\n\n    ECharts.prototype.clear = function () {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      this.setOption({\n        series: []\n      }, true);\n    };\n\n    ECharts.prototype.dispose = function () {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      this._disposed = true;\n      var dom = this.getDom();\n\n      if (dom) {\n        setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\n      }\n\n      var chart = this;\n      var api = chart._api;\n      var ecModel = chart._model;\n      each(chart._componentsViews, function (component) {\n        component.dispose(ecModel, api);\n      });\n      each(chart._chartsViews, function (chart) {\n        chart.dispose(ecModel, api);\n      }); // Dispose after all views disposed\n\n      chart._zr.dispose(); // Set properties to null.\n      // To reduce the memory cost in case the top code still holds this instance unexpectedly.\n\n\n      chart._dom = chart._model = chart._chartsMap = chart._componentsMap = chart._chartsViews = chart._componentsViews = chart._scheduler = chart._api = chart._zr = chart._throttledZrFlush = chart._theme = chart._coordSysMgr = chart._messageCenter = null;\n      delete instances[chart.id];\n    };\n    /**\n     * Resize the chart\n     */\n\n\n    ECharts.prototype.resize = function (opts) {\n      if (this[IN_MAIN_PROCESS_KEY]) {\n        {\n          error('`resize` should not be called during main process.');\n        }\n        return;\n      }\n\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      this._zr.resize(opts);\n\n      var ecModel = this._model; // Resize loading effect\n\n      this._loadingFX && this._loadingFX.resize();\n\n      if (!ecModel) {\n        return;\n      }\n\n      var needPrepare = ecModel.resetOption('media');\n      var silent = opts && opts.silent; // There is some real cases that:\n      // chart.setOption(option, { lazyUpdate: true });\n      // chart.resize();\n\n      if (this[PENDING_UPDATE]) {\n        if (silent == null) {\n          silent = this[PENDING_UPDATE].silent;\n        }\n\n        needPrepare = true;\n        this[PENDING_UPDATE] = null;\n      }\n\n      this[IN_MAIN_PROCESS_KEY] = true;\n\n      try {\n        needPrepare && prepare(this);\n        updateMethods.update.call(this, {\n          type: 'resize',\n          animation: extend({\n            // Disable animation\n            duration: 0\n          }, opts && opts.animation)\n        });\n      } catch (e) {\n        this[IN_MAIN_PROCESS_KEY] = false;\n        throw e;\n      }\n\n      this[IN_MAIN_PROCESS_KEY] = false;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    };\n\n    ECharts.prototype.showLoading = function (name, cfg) {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      if (isObject(name)) {\n        cfg = name;\n        name = '';\n      }\n\n      name = name || 'default';\n      this.hideLoading();\n\n      if (!loadingEffects[name]) {\n        {\n          console.warn('Loading effects ' + name + ' not exists.');\n        }\n        return;\n      }\n\n      var el = loadingEffects[name](this._api, cfg);\n      var zr = this._zr;\n      this._loadingFX = el;\n      zr.add(el);\n    };\n    /**\n     * Hide loading effect\n     */\n\n\n    ECharts.prototype.hideLoading = function () {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      this._loadingFX && this._zr.remove(this._loadingFX);\n      this._loadingFX = null;\n    };\n\n    ECharts.prototype.makeActionFromEvent = function (eventObj) {\n      var payload = extend({}, eventObj);\n      payload.type = eventActionMap[eventObj.type];\n      return payload;\n    };\n    /**\n     * @param opt If pass boolean, means opt.silent\n     * @param opt.silent Default `false`. Whether trigger events.\n     * @param opt.flush Default `undefined`.\n     *        true: Flush immediately, and then pixel in canvas can be fetched\n     *            immediately. Caution: it might affect performance.\n     *        false: Not flush.\n     *        undefined: Auto decide whether perform flush.\n     */\n\n\n    ECharts.prototype.dispatchAction = function (payload, opt) {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      if (!isObject(opt)) {\n        opt = {\n          silent: !!opt\n        };\n      }\n\n      if (!actions[payload.type]) {\n        return;\n      } // Avoid dispatch action before setOption. Especially in `connect`.\n\n\n      if (!this._model) {\n        return;\n      } // May dispatchAction in rendering procedure\n\n\n      if (this[IN_MAIN_PROCESS_KEY]) {\n        this._pendingActions.push(payload);\n\n        return;\n      }\n\n      var silent = opt.silent;\n      doDispatchAction.call(this, payload, silent);\n      var flush = opt.flush;\n\n      if (flush) {\n        this._zr.flush();\n      } else if (flush !== false && env.browser.weChat) {\n        // In WeChat embeded browser, `requestAnimationFrame` and `setInterval`\n        // hang when sliding page (on touch event), which cause that zr does not\n        // refresh util user interaction finished, which is not expected.\n        // But `dispatchAction` may be called too frequently when pan on touch\n        // screen, which impacts performance if do not throttle them.\n        this._throttledZrFlush();\n      }\n\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    };\n\n    ECharts.prototype.updateLabelLayout = function () {\n      lifecycle.trigger('series:layoutlabels', this._model, this._api, {\n        // Not adding series labels.\n        // TODO\n        updatedSeries: []\n      });\n    };\n\n    ECharts.prototype.appendData = function (params) {\n      if (this._disposed) {\n        disposedWarning(this.id);\n        return;\n      }\n\n      var seriesIndex = params.seriesIndex;\n      var ecModel = this.getModel();\n      var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n      {\n        assert(params.data && seriesModel);\n      }\n      seriesModel.appendData(params); // Note: `appendData` does not support that update extent of coordinate\n      // system, util some scenario require that. In the expected usage of\n      // `appendData`, the initial extent of coordinate system should better\n      // be fixed by axis `min`/`max` setting or initial data, otherwise if\n      // the extent changed while `appendData`, the location of the painted\n      // graphic elements have to be changed, which make the usage of\n      // `appendData` meaningless.\n\n      this._scheduler.unfinished = true;\n      this.getZr().wakeUp();\n    }; // A work around for no `internal` modifier in ts yet but\n    // need to strictly hide private methods to JS users.\n\n\n    ECharts.internalField = function () {\n      prepare = function (ecIns) {\n        var scheduler = ecIns._scheduler;\n        scheduler.restorePipelines(ecIns._model);\n        scheduler.prepareStageTasks();\n        prepareView(ecIns, true);\n        prepareView(ecIns, false);\n        scheduler.plan();\n      };\n      /**\n       * Prepare view instances of charts and components\n       */\n\n\n      prepareView = function (ecIns, isComponent) {\n        var ecModel = ecIns._model;\n        var scheduler = ecIns._scheduler;\n        var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\n        var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\n        var zr = ecIns._zr;\n        var api = ecIns._api;\n\n        for (var i = 0; i < viewList.length; i++) {\n          viewList[i].__alive = false;\n        }\n\n        isComponent ? ecModel.eachComponent(function (componentType, model) {\n          componentType !== 'series' && doPrepare(model);\n        }) : ecModel.eachSeries(doPrepare);\n\n        function doPrepare(model) {\n          // By defaut view will be reused if possible for the case that `setOption` with \"notMerge\"\n          // mode and need to enable transition animation. (Usually, when they have the same id, or\n          // especially no id but have the same type & name & index. See the `model.id` generation\n          // rule in `makeIdAndName` and `viewId` generation rule here).\n          // But in `replaceMerge` mode, this feature should be able to disabled when it is clear that\n          // the new model has nothing to do with the old model.\n          var requireNewView = model.__requireNewView; // This command should not work twice.\n\n          model.__requireNewView = false; // Consider: id same and type changed.\n\n          var viewId = '_ec_' + model.id + '_' + model.type;\n          var view = !requireNewView && viewMap[viewId];\n\n          if (!view) {\n            var classType = parseClassType(model.type);\n            var Clazz = isComponent ? ComponentView.getClass(classType.main, classType.sub) : // FIXME:TS\n            // (ChartView as ChartViewConstructor).getClass('series', classType.sub)\n            // For backward compat, still support a chart type declared as only subType\n            // like \"liquidfill\", but recommend \"series.liquidfill\"\n            // But need a base class to make a type series.\n            ChartView.getClass(classType.sub);\n            {\n              assert(Clazz, classType.sub + ' does not exist.');\n            }\n            view = new Clazz();\n            view.init(ecModel, api);\n            viewMap[viewId] = view;\n            viewList.push(view);\n            zr.add(view.group);\n          }\n\n          model.__viewId = view.__id = viewId;\n          view.__alive = true;\n          view.__model = model;\n          view.group.__ecComponentInfo = {\n            mainType: model.mainType,\n            index: model.componentIndex\n          };\n          !isComponent && scheduler.prepareView(view, model, ecModel, api);\n        }\n\n        for (var i = 0; i < viewList.length;) {\n          var view = viewList[i];\n\n          if (!view.__alive) {\n            !isComponent && view.renderTask.dispose();\n            zr.remove(view.group);\n            view.dispose(ecModel, api);\n            viewList.splice(i, 1);\n\n            if (viewMap[view.__id] === view) {\n              delete viewMap[view.__id];\n            }\n\n            view.__id = view.group.__ecComponentInfo = null;\n          } else {\n            i++;\n          }\n        }\n      };\n\n      updateDirectly = function (ecIns, method, payload, mainType, subType) {\n        var ecModel = ecIns._model;\n        ecModel.setUpdatePayload(payload); // broadcast\n\n        if (!mainType) {\n          // FIXME\n          // Chart will not be update directly here, except set dirty.\n          // But there is no such scenario now.\n          each([].concat(ecIns._componentsViews).concat(ecIns._chartsViews), callView);\n          return;\n        }\n\n        var query = {};\n        query[mainType + 'Id'] = payload[mainType + 'Id'];\n        query[mainType + 'Index'] = payload[mainType + 'Index'];\n        query[mainType + 'Name'] = payload[mainType + 'Name'];\n        var condition = {\n          mainType: mainType,\n          query: query\n        };\n        subType && (condition.subType = subType); // subType may be '' by parseClassType;\n\n        var excludeSeriesId = payload.excludeSeriesId;\n        var excludeSeriesIdMap;\n\n        if (excludeSeriesId != null) {\n          excludeSeriesIdMap = createHashMap();\n          each(normalizeToArray(excludeSeriesId), function (id) {\n            var modelId = convertOptionIdName(id, null);\n\n            if (modelId != null) {\n              excludeSeriesIdMap.set(modelId, true);\n            }\n          });\n        } // If dispatchAction before setOption, do nothing.\n\n\n        ecModel && ecModel.eachComponent(condition, function (model) {\n          var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) !== null;\n\n          if (isExcluded) {\n            return;\n          }\n\n          if (isHighDownPayload(payload)) {\n            if (model instanceof SeriesModel) {\n              if (payload.type === HIGHLIGHT_ACTION_TYPE && !payload.notBlur && !model.get(['emphasis', 'disabled'])) {\n                blurSeriesFromHighlightPayload(model, payload, ecIns._api);\n              }\n            } else {\n              var _a = findComponentHighDownDispatchers(model.mainType, model.componentIndex, payload.name, ecIns._api),\n                  focusSelf = _a.focusSelf,\n                  dispatchers = _a.dispatchers;\n\n              if (payload.type === HIGHLIGHT_ACTION_TYPE && focusSelf && !payload.notBlur) {\n                blurComponent(model.mainType, model.componentIndex, ecIns._api);\n              } // PENDING:\n              // Whether to put this \"enter emphasis\" code in `ComponentView`,\n              // which will be the same as `ChartView` but might be not necessary\n              // and will be far from this logic.\n\n\n              if (dispatchers) {\n                each(dispatchers, function (dispatcher) {\n                  payload.type === HIGHLIGHT_ACTION_TYPE ? enterEmphasis(dispatcher) : leaveEmphasis(dispatcher);\n                });\n              }\n            }\n          } else if (isSelectChangePayload(payload)) {\n            // TODO geo\n            if (model instanceof SeriesModel) {\n              toggleSelectionFromPayload(model, payload, ecIns._api);\n              updateSeriesElementSelection(model);\n              markStatusToUpdate(ecIns);\n            }\n          }\n        }, ecIns);\n        ecModel && ecModel.eachComponent(condition, function (model) {\n          var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) !== null;\n\n          if (isExcluded) {\n            return;\n          }\n\n          callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\n        }, ecIns);\n\n        function callView(view) {\n          view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\n        }\n      };\n\n      updateMethods = {\n        prepareAndUpdate: function (payload) {\n          prepare(this);\n          updateMethods.update.call(this, payload, {\n            // Needs to mark option changed if newOption is given.\n            // It's from MagicType.\n            // TODO If use a separate flag optionChanged in payload?\n            optionChanged: payload.newOption != null\n          });\n        },\n        update: function (payload, updateParams) {\n          var ecModel = this._model;\n          var api = this._api;\n          var zr = this._zr;\n          var coordSysMgr = this._coordSysMgr;\n          var scheduler = this._scheduler; // update before setOption\n\n          if (!ecModel) {\n            return;\n          }\n\n          ecModel.setUpdatePayload(payload);\n          scheduler.restoreData(ecModel, payload);\n          scheduler.performSeriesTasks(ecModel); // TODO\n          // Save total ecModel here for undo/redo (after restoring data and before processing data).\n          // Undo (restoration of total ecModel) can be carried out in 'action' or outside API call.\n          // Create new coordinate system each update\n          // In LineView may save the old coordinate system and use it to get the orignal point\n\n          coordSysMgr.create(ecModel, api);\n          scheduler.performDataProcessorTasks(ecModel, payload); // Current stream render is not supported in data process. So we can update\n          // stream modes after data processing, where the filtered data is used to\n          // deteming whether use progressive rendering.\n\n          updateStreamModes(this, ecModel); // We update stream modes before coordinate system updated, then the modes info\n          // can be fetched when coord sys updating (consider the barGrid extent fix). But\n          // the drawback is the full coord info can not be fetched. Fortunately this full\n          // coord is not requied in stream mode updater currently.\n\n          coordSysMgr.update(ecModel, api);\n          clearColorPalette(ecModel);\n          scheduler.performVisualTasks(ecModel, payload);\n          render(this, ecModel, api, payload, updateParams); // Set background\n\n          var backgroundColor = ecModel.get('backgroundColor') || 'transparent';\n          var darkMode = ecModel.get('darkMode');\n          zr.setBackgroundColor(backgroundColor); // Force set dark mode.\n\n          if (darkMode != null && darkMode !== 'auto') {\n            zr.setDarkMode(darkMode);\n          }\n\n          lifecycle.trigger('afterupdate', ecModel, api);\n        },\n        updateTransform: function (payload) {\n          var _this = this;\n\n          var ecModel = this._model;\n          var api = this._api; // update before setOption\n\n          if (!ecModel) {\n            return;\n          }\n\n          ecModel.setUpdatePayload(payload); // ChartView.markUpdateMethod(payload, 'updateTransform');\n\n          var componentDirtyList = [];\n          ecModel.eachComponent(function (componentType, componentModel) {\n            if (componentType === 'series') {\n              return;\n            }\n\n            var componentView = _this.getViewOfComponentModel(componentModel);\n\n            if (componentView && componentView.__alive) {\n              if (componentView.updateTransform) {\n                var result = componentView.updateTransform(componentModel, ecModel, api, payload);\n                result && result.update && componentDirtyList.push(componentView);\n              } else {\n                componentDirtyList.push(componentView);\n              }\n            }\n          });\n          var seriesDirtyMap = createHashMap();\n          ecModel.eachSeries(function (seriesModel) {\n            var chartView = _this._chartsMap[seriesModel.__viewId];\n\n            if (chartView.updateTransform) {\n              var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\n              result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\n            } else {\n              seriesDirtyMap.set(seriesModel.uid, 1);\n            }\n          });\n          clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n          // this._scheduler.performVisualTasks(ecModel, payload, 'layout', true);\n\n          this._scheduler.performVisualTasks(ecModel, payload, {\n            setDirty: true,\n            dirtyMap: seriesDirtyMap\n          }); // Currently, not call render of components. Geo render cost a lot.\n          // renderComponents(ecIns, ecModel, api, payload, componentDirtyList);\n\n\n          renderSeries(this, ecModel, api, payload, {}, seriesDirtyMap);\n          lifecycle.trigger('afterupdate', ecModel, api);\n        },\n        updateView: function (payload) {\n          var ecModel = this._model; // update before setOption\n\n          if (!ecModel) {\n            return;\n          }\n\n          ecModel.setUpdatePayload(payload);\n          ChartView.markUpdateMethod(payload, 'updateView');\n          clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n\n          this._scheduler.performVisualTasks(ecModel, payload, {\n            setDirty: true\n          });\n\n          render(this, ecModel, this._api, payload, {});\n          lifecycle.trigger('afterupdate', ecModel, this._api);\n        },\n        updateVisual: function (payload) {\n          // updateMethods.update.call(this, payload);\n          var _this = this;\n\n          var ecModel = this._model; // update before setOption\n\n          if (!ecModel) {\n            return;\n          }\n\n          ecModel.setUpdatePayload(payload); // clear all visual\n\n          ecModel.eachSeries(function (seriesModel) {\n            seriesModel.getData().clearAllVisual();\n          }); // Perform visual\n\n          ChartView.markUpdateMethod(payload, 'updateVisual');\n          clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n\n          this._scheduler.performVisualTasks(ecModel, payload, {\n            visualType: 'visual',\n            setDirty: true\n          });\n\n          ecModel.eachComponent(function (componentType, componentModel) {\n            if (componentType !== 'series') {\n              var componentView = _this.getViewOfComponentModel(componentModel);\n\n              componentView && componentView.__alive && componentView.updateVisual(componentModel, ecModel, _this._api, payload);\n            }\n          });\n          ecModel.eachSeries(function (seriesModel) {\n            var chartView = _this._chartsMap[seriesModel.__viewId];\n            chartView.updateVisual(seriesModel, ecModel, _this._api, payload);\n          });\n          lifecycle.trigger('afterupdate', ecModel, this._api);\n        },\n        updateLayout: function (payload) {\n          updateMethods.update.call(this, payload);\n        }\n      };\n\n      doConvertPixel = function (ecIns, methodName, finder, value) {\n        if (ecIns._disposed) {\n          disposedWarning(ecIns.id);\n          return;\n        }\n\n        var ecModel = ecIns._model;\n\n        var coordSysList = ecIns._coordSysMgr.getCoordinateSystems();\n\n        var result;\n        var parsedFinder = parseFinder(ecModel, finder);\n\n        for (var i = 0; i < coordSysList.length; i++) {\n          var coordSys = coordSysList[i];\n\n          if (coordSys[methodName] && (result = coordSys[methodName](ecModel, parsedFinder, value)) != null) {\n            return result;\n          }\n        }\n\n        {\n          console.warn('No coordinate system that supports ' + methodName + ' found by the given finder.');\n        }\n      };\n\n      updateStreamModes = function (ecIns, ecModel) {\n        var chartsMap = ecIns._chartsMap;\n        var scheduler = ecIns._scheduler;\n        ecModel.eachSeries(function (seriesModel) {\n          scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\n        });\n      };\n\n      doDispatchAction = function (payload, silent) {\n        var _this = this;\n\n        var ecModel = this.getModel();\n        var payloadType = payload.type;\n        var escapeConnect = payload.escapeConnect;\n        var actionWrap = actions[payloadType];\n        var actionInfo = actionWrap.actionInfo;\n        var cptTypeTmp = (actionInfo.update || 'update').split(':');\n        var updateMethod = cptTypeTmp.pop();\n        var cptType = cptTypeTmp[0] != null && parseClassType(cptTypeTmp[0]);\n        this[IN_MAIN_PROCESS_KEY] = true;\n        var payloads = [payload];\n        var batched = false; // Batch action\n\n        if (payload.batch) {\n          batched = true;\n          payloads = map(payload.batch, function (item) {\n            item = defaults(extend({}, item), payload);\n            item.batch = null;\n            return item;\n          });\n        }\n\n        var eventObjBatch = [];\n        var eventObj;\n        var isSelectChange = isSelectChangePayload(payload);\n        var isHighDown = isHighDownPayload(payload); // Only leave blur once if there are multiple batches.\n\n        if (isHighDown) {\n          allLeaveBlur(this._api);\n        }\n\n        each(payloads, function (batchItem) {\n          // Action can specify the event by return it.\n          eventObj = actionWrap.action(batchItem, _this._model, _this._api); // Emit event outside\n\n          eventObj = eventObj || extend({}, batchItem); // Convert type to eventType\n\n          eventObj.type = actionInfo.event || eventObj.type;\n          eventObjBatch.push(eventObj); // light update does not perform data process, layout and visual.\n\n          if (isHighDown) {\n            var _a = preParseFinder(payload),\n                queryOptionMap = _a.queryOptionMap,\n                mainTypeSpecified = _a.mainTypeSpecified;\n\n            var componentMainType = mainTypeSpecified ? queryOptionMap.keys()[0] : 'series';\n            updateDirectly(_this, updateMethod, batchItem, componentMainType);\n            markStatusToUpdate(_this);\n          } else if (isSelectChange) {\n            // At present `dispatchAction({ type: 'select', ... })` is not supported on components.\n            // geo still use 'geoselect'.\n            updateDirectly(_this, updateMethod, batchItem, 'series');\n            markStatusToUpdate(_this);\n          } else if (cptType) {\n            updateDirectly(_this, updateMethod, batchItem, cptType.main, cptType.sub);\n          }\n        });\n\n        if (updateMethod !== 'none' && !isHighDown && !isSelectChange && !cptType) {\n          try {\n            // Still dirty\n            if (this[PENDING_UPDATE]) {\n              prepare(this);\n              updateMethods.update.call(this, payload);\n              this[PENDING_UPDATE] = null;\n            } else {\n              updateMethods[updateMethod].call(this, payload);\n            }\n          } catch (e) {\n            this[IN_MAIN_PROCESS_KEY] = false;\n            throw e;\n          }\n        } // Follow the rule of action batch\n\n\n        if (batched) {\n          eventObj = {\n            type: actionInfo.event || payloadType,\n            escapeConnect: escapeConnect,\n            batch: eventObjBatch\n          };\n        } else {\n          eventObj = eventObjBatch[0];\n        }\n\n        this[IN_MAIN_PROCESS_KEY] = false;\n\n        if (!silent) {\n          var messageCenter = this._messageCenter;\n          messageCenter.trigger(eventObj.type, eventObj); // Extra triggered 'selectchanged' event\n\n          if (isSelectChange) {\n            var newObj = {\n              type: 'selectchanged',\n              escapeConnect: escapeConnect,\n              selected: getAllSelectedIndices(ecModel),\n              isFromClick: payload.isFromClick || false,\n              fromAction: payload.type,\n              fromActionPayload: payload\n            };\n            messageCenter.trigger(newObj.type, newObj);\n          }\n        }\n      };\n\n      flushPendingActions = function (silent) {\n        var pendingActions = this._pendingActions;\n\n        while (pendingActions.length) {\n          var payload = pendingActions.shift();\n          doDispatchAction.call(this, payload, silent);\n        }\n      };\n\n      triggerUpdatedEvent = function (silent) {\n        !silent && this.trigger('updated');\n      };\n      /**\n       * Event `rendered` is triggered when zr\n       * rendered. It is useful for realtime\n       * snapshot (reflect animation).\n       *\n       * Event `finished` is triggered when:\n       * (1) zrender rendering finished.\n       * (2) initial animation finished.\n       * (3) progressive rendering finished.\n       * (4) no pending action.\n       * (5) no delayed setOption needs to be processed.\n       */\n\n\n      bindRenderedEvent = function (zr, ecIns) {\n        zr.on('rendered', function (params) {\n          ecIns.trigger('rendered', params); // The `finished` event should not be triggered repeatly,\n          // so it should only be triggered when rendering indeed happend\n          // in zrender. (Consider the case that dipatchAction is keep\n          // triggering when mouse move).\n\n          if ( // Although zr is dirty if initial animation is not finished\n          // and this checking is called on frame, we also check\n          // animation finished for robustness.\n          zr.animation.isFinished() && !ecIns[PENDING_UPDATE] && !ecIns._scheduler.unfinished && !ecIns._pendingActions.length) {\n            ecIns.trigger('finished');\n          }\n        });\n      };\n\n      bindMouseEvent = function (zr, ecIns) {\n        zr.on('mouseover', function (e) {\n          var el = e.target;\n          var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n\n          if (dispatcher) {\n            handleGlobalMouseOverForHighDown(dispatcher, e, ecIns._api);\n            markStatusToUpdate(ecIns);\n          }\n        }).on('mouseout', function (e) {\n          var el = e.target;\n          var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n\n          if (dispatcher) {\n            handleGlobalMouseOutForHighDown(dispatcher, e, ecIns._api);\n            markStatusToUpdate(ecIns);\n          }\n        }).on('click', function (e) {\n          var el = e.target;\n          var dispatcher = findEventDispatcher(el, function (target) {\n            return getECData(target).dataIndex != null;\n          }, true);\n\n          if (dispatcher) {\n            var actionType = dispatcher.selected ? 'unselect' : 'select';\n            var ecData = getECData(dispatcher);\n\n            ecIns._api.dispatchAction({\n              type: actionType,\n              dataType: ecData.dataType,\n              dataIndexInside: ecData.dataIndex,\n              seriesIndex: ecData.seriesIndex,\n              isFromClick: true\n            });\n          }\n        });\n      };\n\n      function clearColorPalette(ecModel) {\n        ecModel.clearColorPalette();\n        ecModel.eachSeries(function (seriesModel) {\n          seriesModel.clearColorPalette();\n        });\n      } // Allocate zlevels for series and components\n\n\n      function allocateZlevels(ecModel) {\n        var componentZLevels = [];\n        var seriesZLevels = [];\n        var hasSeperateZLevel = false;\n        ecModel.eachComponent(function (componentType, componentModel) {\n          var zlevel = componentModel.get('zlevel') || 0;\n          var z = componentModel.get('z') || 0;\n          var zlevelKey = componentModel.getZLevelKey();\n          hasSeperateZLevel = hasSeperateZLevel || !!zlevelKey;\n          (componentType === 'series' ? seriesZLevels : componentZLevels).push({\n            zlevel: zlevel,\n            z: z,\n            idx: componentModel.componentIndex,\n            type: componentType,\n            key: zlevelKey\n          });\n        });\n\n        if (hasSeperateZLevel) {\n          // Series after component\n          var zLevels = componentZLevels.concat(seriesZLevels);\n          var lastSeriesZLevel_1;\n          var lastSeriesKey_1;\n          sort(zLevels, function (a, b) {\n            if (a.zlevel === b.zlevel) {\n              return a.z - b.z;\n            }\n\n            return a.zlevel - b.zlevel;\n          });\n          each(zLevels, function (item) {\n            var componentModel = ecModel.getComponent(item.type, item.idx);\n            var zlevel = item.zlevel;\n            var key = item.key;\n\n            if (lastSeriesZLevel_1 != null) {\n              zlevel = Math.max(lastSeriesZLevel_1, zlevel);\n            }\n\n            if (key) {\n              if (zlevel === lastSeriesZLevel_1 && key !== lastSeriesKey_1) {\n                zlevel++;\n              }\n\n              lastSeriesKey_1 = key;\n            } else if (lastSeriesKey_1) {\n              if (zlevel === lastSeriesZLevel_1) {\n                zlevel++;\n              }\n\n              lastSeriesKey_1 = '';\n            }\n\n            lastSeriesZLevel_1 = zlevel;\n            componentModel.setZLevel(zlevel);\n          });\n        }\n      }\n\n      render = function (ecIns, ecModel, api, payload, updateParams) {\n        allocateZlevels(ecModel);\n        renderComponents(ecIns, ecModel, api, payload, updateParams);\n        each(ecIns._chartsViews, function (chart) {\n          chart.__alive = false;\n        });\n        renderSeries(ecIns, ecModel, api, payload, updateParams); // Remove groups of unrendered charts\n\n        each(ecIns._chartsViews, function (chart) {\n          if (!chart.__alive) {\n            chart.remove(ecModel, api);\n          }\n        });\n      };\n\n      renderComponents = function (ecIns, ecModel, api, payload, updateParams, dirtyList) {\n        each(dirtyList || ecIns._componentsViews, function (componentView) {\n          var componentModel = componentView.__model;\n          clearStates$$1(componentModel, componentView);\n          componentView.render(componentModel, ecModel, api, payload);\n          updateZ(componentModel, componentView);\n          updateStates(componentModel, componentView);\n        });\n      };\n      /**\n       * Render each chart and component\n       */\n\n\n      renderSeries = function (ecIns, ecModel, api, payload, updateParams, dirtyMap) {\n        // Render all charts\n        var scheduler = ecIns._scheduler;\n        updateParams = extend(updateParams || {}, {\n          updatedSeries: ecModel.getSeries()\n        }); // TODO progressive?\n\n        lifecycle.trigger('series:beforeupdate', ecModel, api, updateParams);\n        var unfinished = false;\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = ecIns._chartsMap[seriesModel.__viewId];\n          chartView.__alive = true;\n          var renderTask = chartView.renderTask;\n          scheduler.updatePayload(renderTask, payload); // TODO states on marker.\n\n          clearStates$$1(seriesModel, chartView);\n\n          if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\n            renderTask.dirty();\n          }\n\n          if (renderTask.perform(scheduler.getPerformArgs(renderTask))) {\n            unfinished = true;\n          }\n\n          chartView.group.silent = !!seriesModel.get('silent'); // Should not call markRedraw on group, because it will disable zrender\n          // increamental render (alway render from the __startIndex each frame)\n          // chartView.group.markRedraw();\n\n          updateBlend(seriesModel, chartView);\n          updateSeriesElementSelection(seriesModel);\n        });\n        scheduler.unfinished = unfinished || scheduler.unfinished;\n        lifecycle.trigger('series:layoutlabels', ecModel, api, updateParams); // transition after label is layouted.\n\n        lifecycle.trigger('series:transition', ecModel, api, updateParams);\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = ecIns._chartsMap[seriesModel.__viewId]; // Update Z after labels updated. Before applying states.\n\n          updateZ(seriesModel, chartView); // NOTE: Update states after label is updated.\n          // label should be in normal status when layouting.\n\n          updateStates(seriesModel, chartView);\n        }); // If use hover layer\n\n        updateHoverLayerStatus(ecIns, ecModel);\n        lifecycle.trigger('series:afterupdate', ecModel, api, updateParams);\n      };\n\n      markStatusToUpdate = function (ecIns) {\n        ecIns[STATUS_NEEDS_UPDATE_KEY] = true; // Wake up zrender if it's sleep. Let it update states in the next frame.\n\n        ecIns.getZr().wakeUp();\n      };\n\n      applyChangedStates = function (ecIns) {\n        if (!ecIns[STATUS_NEEDS_UPDATE_KEY]) {\n          return;\n        }\n\n        ecIns.getZr().storage.traverse(function (el) {\n          // Not applied on removed elements, it may still in fading.\n          if (isElementRemoved(el)) {\n            return;\n          }\n\n          applyElementStates(el);\n        });\n        ecIns[STATUS_NEEDS_UPDATE_KEY] = false;\n      };\n\n      function applyElementStates(el) {\n        var newStates = [];\n        var oldStates = el.currentStates; // Keep other states.\n\n        for (var i = 0; i < oldStates.length; i++) {\n          var stateName = oldStates[i];\n\n          if (!(stateName === 'emphasis' || stateName === 'blur' || stateName === 'select')) {\n            newStates.push(stateName);\n          }\n        } // Only use states when it's exists.\n\n\n        if (el.selected && el.states.select) {\n          newStates.push('select');\n        }\n\n        if (el.hoverState === HOVER_STATE_EMPHASIS && el.states.emphasis) {\n          newStates.push('emphasis');\n        } else if (el.hoverState === HOVER_STATE_BLUR && el.states.blur) {\n          newStates.push('blur');\n        }\n\n        el.useStates(newStates);\n      }\n\n      function updateHoverLayerStatus(ecIns, ecModel) {\n        var zr = ecIns._zr;\n        var storage = zr.storage;\n        var elCount = 0;\n        storage.traverse(function (el) {\n          if (!el.isGroup) {\n            elCount++;\n          }\n        });\n\n        if (elCount > ecModel.get('hoverLayerThreshold') && !env.node && !env.worker) {\n          ecModel.eachSeries(function (seriesModel) {\n            if (seriesModel.preventUsingHoverLayer) {\n              return;\n            }\n\n            var chartView = ecIns._chartsMap[seriesModel.__viewId];\n\n            if (chartView.__alive) {\n              chartView.eachRendered(function (el) {\n                if (el.states.emphasis) {\n                  el.states.emphasis.hoverLayer = true;\n                }\n              });\n            }\n          });\n        }\n      }\n      /**\n       * Update chart and blend.\n       */\n\n\n      function updateBlend(seriesModel, chartView) {\n        var blendMode = seriesModel.get('blendMode') || null;\n        chartView.eachRendered(function (el) {\n          // FIXME marker and other components\n          if (!el.isGroup) {\n            // DONT mark the element dirty. In case element is incremental and don't wan't to rerender.\n            el.style.blend = blendMode;\n          }\n        });\n      }\n\n      function updateZ(model, view) {\n        if (model.preventAutoZ) {\n          return;\n        }\n\n        var z = model.get('z') || 0;\n        var zlevel = model.get('zlevel') || 0; // Set z and zlevel\n\n        view.eachRendered(function (el) {\n          doUpdateZ(el, z, zlevel, -Infinity); // Don't traverse the children because it has been traversed in _updateZ.\n\n          return true;\n        });\n      }\n\n      function doUpdateZ(el, z, zlevel, maxZ2) {\n        // Group may also have textContent\n        var label = el.getTextContent();\n        var labelLine = el.getTextGuideLine();\n        var isGroup = el.isGroup;\n\n        if (isGroup) {\n          // set z & zlevel of children elements of Group\n          var children = el.childrenRef();\n\n          for (var i = 0; i < children.length; i++) {\n            maxZ2 = Math.max(doUpdateZ(children[i], z, zlevel, maxZ2), maxZ2);\n          }\n        } else {\n          // not Group\n          el.z = z;\n          el.zlevel = zlevel;\n          maxZ2 = Math.max(el.z2, maxZ2);\n        } // always set z and zlevel if label/labelLine exists\n\n\n        if (label) {\n          label.z = z;\n          label.zlevel = zlevel; // lift z2 of text content\n          // TODO if el.emphasis.z2 is spcefied, what about textContent.\n\n          isFinite(maxZ2) && (label.z2 = maxZ2 + 2);\n        }\n\n        if (labelLine) {\n          var textGuideLineConfig = el.textGuideLineConfig;\n          labelLine.z = z;\n          labelLine.zlevel = zlevel;\n          isFinite(maxZ2) && (labelLine.z2 = maxZ2 + (textGuideLineConfig && textGuideLineConfig.showAbove ? 1 : -1));\n        }\n\n        return maxZ2;\n      } // Clear states without animation.\n      // TODO States on component.\n\n\n      function clearStates$$1(model, view) {\n        view.eachRendered(function (el) {\n          // Not applied on removed elements, it may still in fading.\n          if (isElementRemoved(el)) {\n            return;\n          }\n\n          var textContent = el.getTextContent();\n          var textGuide = el.getTextGuideLine();\n\n          if (el.stateTransition) {\n            el.stateTransition = null;\n          }\n\n          if (textContent && textContent.stateTransition) {\n            textContent.stateTransition = null;\n          }\n\n          if (textGuide && textGuide.stateTransition) {\n            textGuide.stateTransition = null;\n          } // TODO If el is incremental.\n\n\n          if (el.hasState()) {\n            el.prevStates = el.currentStates;\n            el.clearStates();\n          } else if (el.prevStates) {\n            el.prevStates = null;\n          }\n        });\n      }\n\n      function updateStates(model, view) {\n        var stateAnimationModel = model.getModel('stateAnimation');\n        var enableAnimation = model.isAnimationEnabled();\n        var duration = stateAnimationModel.get('duration');\n        var stateTransition = duration > 0 ? {\n          duration: duration,\n          delay: stateAnimationModel.get('delay'),\n          easing: stateAnimationModel.get('easing') // additive: stateAnimationModel.get('additive')\n\n        } : null;\n        view.eachRendered(function (el) {\n          if (el.states && el.states.emphasis) {\n            // Not applied on removed elements, it may still in fading.\n            if (isElementRemoved(el)) {\n              return;\n            }\n\n            if (el instanceof Path) {\n              savePathStates(el);\n            } // Only updated on changed element. In case element is incremental and don't wan't to rerender.\n            // TODO, a more proper way?\n\n\n            if (el.__dirty) {\n              var prevStates = el.prevStates; // Restore states without animation\n\n              if (prevStates) {\n                el.useStates(prevStates);\n              }\n            } // Update state transition and enable animation again.\n\n\n            if (enableAnimation) {\n              el.stateTransition = stateTransition;\n              var textContent = el.getTextContent();\n              var textGuide = el.getTextGuideLine(); // TODO Is it necessary to animate label?\n\n              if (textContent) {\n                textContent.stateTransition = stateTransition;\n              }\n\n              if (textGuide) {\n                textGuide.stateTransition = stateTransition;\n              }\n            } // The use higlighted and selected flag to toggle states.\n\n\n            if (el.__dirty) {\n              applyElementStates(el);\n            }\n          }\n        });\n      }\n\n      createExtensionAPI = function (ecIns) {\n        return new (\n        /** @class */\n        function (_super) {\n          __extends(class_1, _super);\n\n          function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n          }\n\n          class_1.prototype.getCoordinateSystems = function () {\n            return ecIns._coordSysMgr.getCoordinateSystems();\n          };\n\n          class_1.prototype.getComponentByElement = function (el) {\n            while (el) {\n              var modelInfo = el.__ecComponentInfo;\n\n              if (modelInfo != null) {\n                return ecIns._model.getComponent(modelInfo.mainType, modelInfo.index);\n              }\n\n              el = el.parent;\n            }\n          };\n\n          class_1.prototype.enterEmphasis = function (el, highlightDigit) {\n            enterEmphasis(el, highlightDigit);\n            markStatusToUpdate(ecIns);\n          };\n\n          class_1.prototype.leaveEmphasis = function (el, highlightDigit) {\n            leaveEmphasis(el, highlightDigit);\n            markStatusToUpdate(ecIns);\n          };\n\n          class_1.prototype.enterBlur = function (el) {\n            enterBlur(el);\n            markStatusToUpdate(ecIns);\n          };\n\n          class_1.prototype.leaveBlur = function (el) {\n            leaveBlur(el);\n            markStatusToUpdate(ecIns);\n          };\n\n          class_1.prototype.enterSelect = function (el) {\n            enterSelect(el);\n            markStatusToUpdate(ecIns);\n          };\n\n          class_1.prototype.leaveSelect = function (el) {\n            leaveSelect(el);\n            markStatusToUpdate(ecIns);\n          };\n\n          class_1.prototype.getModel = function () {\n            return ecIns.getModel();\n          };\n\n          class_1.prototype.getViewOfComponentModel = function (componentModel) {\n            return ecIns.getViewOfComponentModel(componentModel);\n          };\n\n          class_1.prototype.getViewOfSeriesModel = function (seriesModel) {\n            return ecIns.getViewOfSeriesModel(seriesModel);\n          };\n\n          return class_1;\n        }(ExtensionAPI))(ecIns);\n      };\n\n      enableConnect = function (chart) {\n        function updateConnectedChartsStatus(charts, status) {\n          for (var i = 0; i < charts.length; i++) {\n            var otherChart = charts[i];\n            otherChart[CONNECT_STATUS_KEY] = status;\n          }\n        }\n\n        each(eventActionMap, function (actionType, eventType) {\n          chart._messageCenter.on(eventType, function (event) {\n            if (connectedGroups[chart.group] && chart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_PENDING) {\n              if (event && event.escapeConnect) {\n                return;\n              }\n\n              var action_1 = chart.makeActionFromEvent(event);\n              var otherCharts_1 = [];\n              each(instances, function (otherChart) {\n                if (otherChart !== chart && otherChart.group === chart.group) {\n                  otherCharts_1.push(otherChart);\n                }\n              });\n              updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_PENDING);\n              each(otherCharts_1, function (otherChart) {\n                if (otherChart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_UPDATING) {\n                  otherChart.dispatchAction(action_1);\n                }\n              });\n              updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_UPDATED);\n            }\n          });\n        });\n      };\n    }();\n\n    return ECharts;\n  }(Eventful);\n\n  var echartsProto = ECharts.prototype;\n  echartsProto.on = createRegisterEventWithLowercaseECharts('on');\n  echartsProto.off = createRegisterEventWithLowercaseECharts('off');\n  /**\n   * @deprecated\n   */\n  // @ts-ignore\n\n  echartsProto.one = function (eventName, cb, ctx) {\n    var self = this;\n    deprecateLog('ECharts#one is deprecated.');\n\n    function wrapped() {\n      var args2 = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args2[_i] = arguments[_i];\n      }\n\n      cb && cb.apply && cb.apply(this, args2); // @ts-ignore\n\n      self.off(eventName, wrapped);\n    } // @ts-ignore\n\n\n    this.on.call(this, eventName, wrapped, ctx);\n  };\n\n  var MOUSE_EVENT_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu'];\n\n  function disposedWarning(id) {\n    {\n      console.warn('Instance ' + id + ' has been disposed');\n    }\n  }\n\n  var actions = {};\n  /**\n   * Map eventType to actionType\n   */\n\n  var eventActionMap = {};\n  var dataProcessorFuncs = [];\n  var optionPreprocessorFuncs = [];\n  var visualFuncs = [];\n  var themeStorage = {};\n  var loadingEffects = {};\n  var instances = {};\n  var connectedGroups = {};\n  var idBase = +new Date() - 0;\n  var groupIdBase = +new Date() - 0;\n  var DOM_ATTRIBUTE_KEY = '_echarts_instance_';\n  /**\n   * @param opts.devicePixelRatio Use window.devicePixelRatio by default\n   * @param opts.renderer Can choose 'canvas' or 'svg' to render the chart.\n   * @param opts.width Use clientWidth of the input `dom` by default.\n   *        Can be 'auto' (the same as null/undefined)\n   * @param opts.height Use clientHeight of the input `dom` by default.\n   *        Can be 'auto' (the same as null/undefined)\n   * @param opts.locale Specify the locale.\n   * @param opts.useDirtyRect Enable dirty rectangle rendering or not.\n   */\n\n  function init(dom, theme$$1, opts) {\n    var isClient = !(opts && opts.ssr);\n\n    if (isClient) {\n      {\n        if (!dom) {\n          throw new Error('Initialize failed: invalid dom.');\n        }\n      }\n      var existInstance = getInstanceByDom(dom);\n\n      if (existInstance) {\n        {\n          console.warn('There is a chart instance already initialized on the dom.');\n        }\n        return existInstance;\n      }\n\n      {\n        if (isDom(dom) && dom.nodeName.toUpperCase() !== 'CANVAS' && (!dom.clientWidth && (!opts || opts.width == null) || !dom.clientHeight && (!opts || opts.height == null))) {\n          console.warn('Can\\'t get DOM width or height. Please check ' + 'dom.clientWidth and dom.clientHeight. They should not be 0.' + 'For example, you may need to call this in the callback ' + 'of window.onload.');\n        }\n      }\n    }\n\n    var chart = new ECharts(dom, theme$$1, opts);\n    chart.id = 'ec_' + idBase++;\n    instances[chart.id] = chart;\n    isClient && setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\n    enableConnect(chart);\n    lifecycle.trigger('afterinit', chart);\n    return chart;\n  }\n  /**\n   * @usage\n   * (A)\n   * ```js\n   * let chart1 = echarts.init(dom1);\n   * let chart2 = echarts.init(dom2);\n   * chart1.group = 'xxx';\n   * chart2.group = 'xxx';\n   * echarts.connect('xxx');\n   * ```\n   * (B)\n   * ```js\n   * let chart1 = echarts.init(dom1);\n   * let chart2 = echarts.init(dom2);\n   * echarts.connect('xxx', [chart1, chart2]);\n   * ```\n   */\n\n\n  function connect(groupId) {\n    // Is array of charts\n    if (isArray(groupId)) {\n      var charts = groupId;\n      groupId = null; // If any chart has group\n\n      each(charts, function (chart) {\n        if (chart.group != null) {\n          groupId = chart.group;\n        }\n      });\n      groupId = groupId || 'g_' + groupIdBase++;\n      each(charts, function (chart) {\n        chart.group = groupId;\n      });\n    }\n\n    connectedGroups[groupId] = true;\n    return groupId;\n  }\n  /**\n   * @deprecated\n   */\n\n\n  function disConnect(groupId) {\n    connectedGroups[groupId] = false;\n  }\n  /**\n   * Alias and backword compat\n   */\n\n\n  var disconnect = disConnect;\n  /**\n   * Dispose a chart instance\n   */\n\n  function dispose(chart) {\n    if (isString(chart)) {\n      chart = instances[chart];\n    } else if (!(chart instanceof ECharts)) {\n      // Try to treat as dom\n      chart = getInstanceByDom(chart);\n    }\n\n    if (chart instanceof ECharts && !chart.isDisposed()) {\n      chart.dispose();\n    }\n  }\n\n  function getInstanceByDom(dom) {\n    return instances[getAttribute(dom, DOM_ATTRIBUTE_KEY)];\n  }\n\n  function getInstanceById(key) {\n    return instances[key];\n  }\n  /**\n   * Register theme\n   */\n\n\n  function registerTheme(name, theme$$1) {\n    themeStorage[name] = theme$$1;\n  }\n  /**\n   * Register option preprocessor\n   */\n\n\n  function registerPreprocessor(preprocessorFunc) {\n    if (indexOf(optionPreprocessorFuncs, preprocessorFunc) < 0) {\n      optionPreprocessorFuncs.push(preprocessorFunc);\n    }\n  }\n\n  function registerProcessor(priority, processor) {\n    normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_DEFAULT);\n  }\n  /**\n   * Register postIniter\n   * @param {Function} postInitFunc\n   */\n\n\n  function registerPostInit(postInitFunc) {\n    registerUpdateLifecycle('afterinit', postInitFunc);\n  }\n  /**\n   * Register postUpdater\n   * @param {Function} postUpdateFunc\n   */\n\n\n  function registerPostUpdate(postUpdateFunc) {\n    registerUpdateLifecycle('afterupdate', postUpdateFunc);\n  }\n\n  function registerUpdateLifecycle(name, cb) {\n    lifecycle.on(name, cb);\n  }\n\n  function registerAction(actionInfo, eventName, action) {\n    if (isFunction(eventName)) {\n      action = eventName;\n      eventName = '';\n    }\n\n    var actionType = isObject(actionInfo) ? actionInfo.type : [actionInfo, actionInfo = {\n      event: eventName\n    }][0]; // Event name is all lowercase\n\n    actionInfo.event = (actionInfo.event || actionType).toLowerCase();\n    eventName = actionInfo.event;\n\n    if (eventActionMap[eventName]) {\n      // Already registered.\n      return;\n    } // Validate action type and event name.\n\n\n    assert(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));\n\n    if (!actions[actionType]) {\n      actions[actionType] = {\n        action: action,\n        actionInfo: actionInfo\n      };\n    }\n\n    eventActionMap[eventName] = actionType;\n  }\n\n  function registerCoordinateSystem(type, coordSysCreator) {\n    CoordinateSystemManager.register(type, coordSysCreator);\n  }\n  /**\n   * Get dimensions of specified coordinate system.\n   * @param {string} type\n   * @return {Array.<string|Object>}\n   */\n\n\n  function getCoordinateSystemDimensions(type) {\n    var coordSysCreator = CoordinateSystemManager.get(type);\n\n    if (coordSysCreator) {\n      return coordSysCreator.getDimensionsInfo ? coordSysCreator.getDimensionsInfo() : coordSysCreator.dimensions.slice();\n    }\n  }\n\n  function registerLayout(priority, layoutTask) {\n    normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\n  }\n\n  function registerVisual(priority, visualTask) {\n    normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\n  }\n\n  var registeredTasks = [];\n\n  function normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\n    if (isFunction(priority) || isObject(priority)) {\n      fn = priority;\n      priority = defaultPriority;\n    }\n\n    {\n      if (isNaN(priority) || priority == null) {\n        throw new Error('Illegal priority');\n      } // Check duplicate\n\n\n      each(targetList, function (wrap) {\n        assert(wrap.__raw !== fn);\n      });\n    } // Already registered\n\n    if (indexOf(registeredTasks, fn) >= 0) {\n      return;\n    }\n\n    registeredTasks.push(fn);\n    var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\n    stageHandler.__prio = priority;\n    stageHandler.__raw = fn;\n    targetList.push(stageHandler);\n  }\n\n  function registerLoading(name, loadingFx) {\n    loadingEffects[name] = loadingFx;\n  }\n  /**\n   * ZRender need a canvas context to do measureText.\n   * But in node environment canvas may be created by node-canvas.\n   * So we need to specify how to create a canvas instead of using document.createElement('canvas')\n   *\n   *\n   * @deprecated use setPlatformAPI({ createCanvas }) instead.\n   *\n   * @example\n   *     let Canvas = require('canvas');\n   *     let echarts = require('echarts');\n   *     echarts.setCanvasCreator(function () {\n   *         // Small size is enough.\n   *         return new Canvas(32, 32);\n   *     });\n   */\n\n\n  function setCanvasCreator(creator) {\n    {\n      deprecateLog('setCanvasCreator is deprecated. Use setPlatformAPI({ createCanvas }) instead.');\n    }\n    setPlatformAPI({\n      createCanvas: creator\n    });\n  }\n  /**\n   * The parameters and usage: see `geoSourceManager.registerMap`.\n   * Compatible with previous `echarts.registerMap`.\n   */\n\n\n  function registerMap(mapName, geoJson, specialAreas) {\n    var registerMap = getImpl('registerMap');\n    registerMap && registerMap(mapName, geoJson, specialAreas);\n  }\n\n  function getMap(mapName) {\n    var getMap = getImpl('getMap');\n    return getMap && getMap(mapName);\n  }\n\n  var registerTransform = registerExternalTransform;\n  /**\n   * Globa dispatchAction to a specified chart instance.\n   */\n  // export function dispatchAction(payload: { chartId: string } & Payload, opt?: Parameters<ECharts['dispatchAction']>[1]) {\n  //     if (!payload || !payload.chartId) {\n  //         // Must have chartId to find chart\n  //         return;\n  //     }\n  //     const chart = instances[payload.chartId];\n  //     if (chart) {\n  //         chart.dispatchAction(payload, opt);\n  //     }\n  // }\n  // Buitlin global visual\n\n  registerVisual(PRIORITY_VISUAL_GLOBAL, seriesStyleTask);\n  registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataStyleTask);\n  registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataColorPaletteTask);\n  registerVisual(PRIORITY_VISUAL_GLOBAL, seriesSymbolTask);\n  registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataSymbolTask);\n  registerVisual(PRIORITY_VISUAL_DECAL, decalVisual);\n  registerPreprocessor(globalBackwardCompat);\n  registerProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\n  registerLoading('default', defaultLoading); // Default actions\n\n  registerAction({\n    type: HIGHLIGHT_ACTION_TYPE,\n    event: HIGHLIGHT_ACTION_TYPE,\n    update: HIGHLIGHT_ACTION_TYPE\n  }, noop);\n  registerAction({\n    type: DOWNPLAY_ACTION_TYPE,\n    event: DOWNPLAY_ACTION_TYPE,\n    update: DOWNPLAY_ACTION_TYPE\n  }, noop);\n  registerAction({\n    type: SELECT_ACTION_TYPE,\n    event: SELECT_ACTION_TYPE,\n    update: SELECT_ACTION_TYPE\n  }, noop);\n  registerAction({\n    type: UNSELECT_ACTION_TYPE,\n    event: UNSELECT_ACTION_TYPE,\n    update: UNSELECT_ACTION_TYPE\n  }, noop);\n  registerAction({\n    type: TOGGLE_SELECT_ACTION_TYPE,\n    event: TOGGLE_SELECT_ACTION_TYPE,\n    update: TOGGLE_SELECT_ACTION_TYPE\n  }, noop); // Default theme\n\n  registerTheme('light', lightTheme);\n  registerTheme('dark', theme); // For backward compatibility, where the namespace `dataTool` will\n  // be mounted on `echarts` is the extension `dataTool` is imported.\n\n  var dataTool = {};\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  function dataIndexMapValueLength(valNumOrArrLengthMoreThan2) {\n    return valNumOrArrLengthMoreThan2 == null ? 0 : valNumOrArrLengthMoreThan2.length || 1;\n  }\n\n  function defaultKeyGetter(item) {\n    return item;\n  }\n\n  var DataDiffer =\n  /** @class */\n  function () {\n    /**\n     * @param context Can be visited by this.context in callback.\n     */\n    function DataDiffer(oldArr, newArr, oldKeyGetter, newKeyGetter, context, // By default: 'oneToOne'.\n    diffMode) {\n      this._old = oldArr;\n      this._new = newArr;\n      this._oldKeyGetter = oldKeyGetter || defaultKeyGetter;\n      this._newKeyGetter = newKeyGetter || defaultKeyGetter; // Visible in callback via `this.context`;\n\n      this.context = context;\n      this._diffModeMultiple = diffMode === 'multiple';\n    }\n    /**\n     * Callback function when add a data\n     */\n\n\n    DataDiffer.prototype.add = function (func) {\n      this._add = func;\n      return this;\n    };\n    /**\n     * Callback function when update a data\n     */\n\n\n    DataDiffer.prototype.update = function (func) {\n      this._update = func;\n      return this;\n    };\n    /**\n     * Callback function when update a data and only work in `cbMode: 'byKey'`.\n     */\n\n\n    DataDiffer.prototype.updateManyToOne = function (func) {\n      this._updateManyToOne = func;\n      return this;\n    };\n    /**\n     * Callback function when update a data and only work in `cbMode: 'byKey'`.\n     */\n\n\n    DataDiffer.prototype.updateOneToMany = function (func) {\n      this._updateOneToMany = func;\n      return this;\n    };\n    /**\n     * Callback function when update a data and only work in `cbMode: 'byKey'`.\n     */\n\n\n    DataDiffer.prototype.updateManyToMany = function (func) {\n      this._updateManyToMany = func;\n      return this;\n    };\n    /**\n     * Callback function when remove a data\n     */\n\n\n    DataDiffer.prototype.remove = function (func) {\n      this._remove = func;\n      return this;\n    };\n\n    DataDiffer.prototype.execute = function () {\n      this[this._diffModeMultiple ? '_executeMultiple' : '_executeOneToOne']();\n    };\n\n    DataDiffer.prototype._executeOneToOne = function () {\n      var oldArr = this._old;\n      var newArr = this._new;\n      var newDataIndexMap = {};\n      var oldDataKeyArr = new Array(oldArr.length);\n      var newDataKeyArr = new Array(newArr.length);\n\n      this._initIndexMap(oldArr, null, oldDataKeyArr, '_oldKeyGetter');\n\n      this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\n\n      for (var i = 0; i < oldArr.length; i++) {\n        var oldKey = oldDataKeyArr[i];\n        var newIdxMapVal = newDataIndexMap[oldKey];\n        var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal); // idx can never be empty array here. see 'set null' logic below.\n\n        if (newIdxMapValLen > 1) {\n          // Consider there is duplicate key (for example, use dataItem.name as key).\n          // We should make sure every item in newArr and oldArr can be visited.\n          var newIdx = newIdxMapVal.shift();\n\n          if (newIdxMapVal.length === 1) {\n            newDataIndexMap[oldKey] = newIdxMapVal[0];\n          }\n\n          this._update && this._update(newIdx, i);\n        } else if (newIdxMapValLen === 1) {\n          newDataIndexMap[oldKey] = null;\n          this._update && this._update(newIdxMapVal, i);\n        } else {\n          this._remove && this._remove(i);\n        }\n      }\n\n      this._performRestAdd(newDataKeyArr, newDataIndexMap);\n    };\n    /**\n     * For example, consider the case:\n     * oldData: [o0, o1, o2, o3, o4, o5, o6, o7],\n     * newData: [n0, n1, n2, n3, n4, n5, n6, n7, n8],\n     * Where:\n     *     o0, o1, n0 has key 'a' (many to one)\n     *     o5, n4, n5, n6 has key 'b' (one to many)\n     *     o2, n1 has key 'c' (one to one)\n     *     n2, n3 has key 'd' (add)\n     *     o3, o4 has key 'e' (remove)\n     *     o6, o7, n7, n8 has key 'f' (many to many, treated as add and remove)\n     * Then:\n     *     (The order of the following directives are not ensured.)\n     *     this._updateManyToOne(n0, [o0, o1]);\n     *     this._updateOneToMany([n4, n5, n6], o5);\n     *     this._update(n1, o2);\n     *     this._remove(o3);\n     *     this._remove(o4);\n     *     this._remove(o6);\n     *     this._remove(o7);\n     *     this._add(n2);\n     *     this._add(n3);\n     *     this._add(n7);\n     *     this._add(n8);\n     */\n\n\n    DataDiffer.prototype._executeMultiple = function () {\n      var oldArr = this._old;\n      var newArr = this._new;\n      var oldDataIndexMap = {};\n      var newDataIndexMap = {};\n      var oldDataKeyArr = [];\n      var newDataKeyArr = [];\n\n      this._initIndexMap(oldArr, oldDataIndexMap, oldDataKeyArr, '_oldKeyGetter');\n\n      this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\n\n      for (var i = 0; i < oldDataKeyArr.length; i++) {\n        var oldKey = oldDataKeyArr[i];\n        var oldIdxMapVal = oldDataIndexMap[oldKey];\n        var newIdxMapVal = newDataIndexMap[oldKey];\n        var oldIdxMapValLen = dataIndexMapValueLength(oldIdxMapVal);\n        var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n\n        if (oldIdxMapValLen > 1 && newIdxMapValLen === 1) {\n          this._updateManyToOne && this._updateManyToOne(newIdxMapVal, oldIdxMapVal);\n          newDataIndexMap[oldKey] = null;\n        } else if (oldIdxMapValLen === 1 && newIdxMapValLen > 1) {\n          this._updateOneToMany && this._updateOneToMany(newIdxMapVal, oldIdxMapVal);\n          newDataIndexMap[oldKey] = null;\n        } else if (oldIdxMapValLen === 1 && newIdxMapValLen === 1) {\n          this._update && this._update(newIdxMapVal, oldIdxMapVal);\n          newDataIndexMap[oldKey] = null;\n        } else if (oldIdxMapValLen > 1 && newIdxMapValLen > 1) {\n          this._updateManyToMany && this._updateManyToMany(newIdxMapVal, oldIdxMapVal);\n          newDataIndexMap[oldKey] = null;\n        } else if (oldIdxMapValLen > 1) {\n          for (var i_1 = 0; i_1 < oldIdxMapValLen; i_1++) {\n            this._remove && this._remove(oldIdxMapVal[i_1]);\n          }\n        } else {\n          this._remove && this._remove(oldIdxMapVal);\n        }\n      }\n\n      this._performRestAdd(newDataKeyArr, newDataIndexMap);\n    };\n\n    DataDiffer.prototype._performRestAdd = function (newDataKeyArr, newDataIndexMap) {\n      for (var i = 0; i < newDataKeyArr.length; i++) {\n        var newKey = newDataKeyArr[i];\n        var newIdxMapVal = newDataIndexMap[newKey];\n        var idxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n\n        if (idxMapValLen > 1) {\n          for (var j = 0; j < idxMapValLen; j++) {\n            this._add && this._add(newIdxMapVal[j]);\n          }\n        } else if (idxMapValLen === 1) {\n          this._add && this._add(newIdxMapVal);\n        } // Support both `newDataKeyArr` are duplication removed or not removed.\n\n\n        newDataIndexMap[newKey] = null;\n      }\n    };\n\n    DataDiffer.prototype._initIndexMap = function (arr, // Can be null.\n    map, // In 'byKey', the output `keyArr` is duplication removed.\n    // In 'byIndex', the output `keyArr` is not duplication removed and\n    //     its indices are accurately corresponding to `arr`.\n    keyArr, keyGetterName) {\n      var cbModeMultiple = this._diffModeMultiple;\n\n      for (var i = 0; i < arr.length; i++) {\n        // Add prefix to avoid conflict with Object.prototype.\n        var key = '_ec_' + this[keyGetterName](arr[i], i);\n\n        if (!cbModeMultiple) {\n          keyArr[i] = key;\n        }\n\n        if (!map) {\n          continue;\n        }\n\n        var idxMapVal = map[key];\n        var idxMapValLen = dataIndexMapValueLength(idxMapVal);\n\n        if (idxMapValLen === 0) {\n          // Simple optimize: in most cases, one index has one key,\n          // do not need array.\n          map[key] = i;\n\n          if (cbModeMultiple) {\n            keyArr.push(key);\n          }\n        } else if (idxMapValLen === 1) {\n          map[key] = [idxMapVal, i];\n        } else {\n          idxMapVal.push(i);\n        }\n      }\n    };\n\n    return DataDiffer;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var DimensionUserOuput =\n  /** @class */\n  function () {\n    function DimensionUserOuput(encode, dimRequest) {\n      this._encode = encode;\n      this._schema = dimRequest;\n    }\n\n    DimensionUserOuput.prototype.get = function () {\n      return {\n        // Do not generate full dimension name until fist used.\n        fullDimensions: this._getFullDimensionNames(),\n        encode: this._encode\n      };\n    };\n    /**\n     * Get all data store dimension names.\n     * Theoretically a series data store is defined both by series and used dataset (if any).\n     * If some dimensions are omitted for performance reason in `this.dimensions`,\n     * the dimension name may not be auto-generated if user does not specify a dimension name.\n     * In this case, the dimension name is `null`/`undefined`.\n     */\n\n\n    DimensionUserOuput.prototype._getFullDimensionNames = function () {\n      if (!this._cachedDimNames) {\n        this._cachedDimNames = this._schema ? this._schema.makeOutputDimensionNames() : [];\n      }\n\n      return this._cachedDimNames;\n    };\n\n    return DimensionUserOuput;\n  }();\n\n  function summarizeDimensions(data, schema) {\n    var summary = {};\n    var encode = summary.encode = {};\n    var notExtraCoordDimMap = createHashMap();\n    var defaultedLabel = [];\n    var defaultedTooltip = [];\n    var userOutputEncode = {};\n    each(data.dimensions, function (dimName) {\n      var dimItem = data.getDimensionInfo(dimName);\n      var coordDim = dimItem.coordDim;\n\n      if (coordDim) {\n        {\n          assert(VISUAL_DIMENSIONS.get(coordDim) == null);\n        }\n        var coordDimIndex = dimItem.coordDimIndex;\n        getOrCreateEncodeArr(encode, coordDim)[coordDimIndex] = dimName;\n\n        if (!dimItem.isExtraCoord) {\n          notExtraCoordDimMap.set(coordDim, 1); // Use the last coord dim (and label friendly) as default label,\n          // because when dataset is used, it is hard to guess which dimension\n          // can be value dimension. If both show x, y on label is not look good,\n          // and conventionally y axis is focused more.\n\n          if (mayLabelDimType(dimItem.type)) {\n            defaultedLabel[0] = dimName;\n          } // User output encode do not contain generated coords.\n          // And it only has index. User can use index to retrieve value from the raw item array.\n\n\n          getOrCreateEncodeArr(userOutputEncode, coordDim)[coordDimIndex] = data.getDimensionIndex(dimItem.name);\n        }\n\n        if (dimItem.defaultTooltip) {\n          defaultedTooltip.push(dimName);\n        }\n      }\n\n      VISUAL_DIMENSIONS.each(function (v, otherDim) {\n        var encodeArr = getOrCreateEncodeArr(encode, otherDim);\n        var dimIndex = dimItem.otherDims[otherDim];\n\n        if (dimIndex != null && dimIndex !== false) {\n          encodeArr[dimIndex] = dimItem.name;\n        }\n      });\n    });\n    var dataDimsOnCoord = [];\n    var encodeFirstDimNotExtra = {};\n    notExtraCoordDimMap.each(function (v, coordDim) {\n      var dimArr = encode[coordDim];\n      encodeFirstDimNotExtra[coordDim] = dimArr[0]; // Not necessary to remove duplicate, because a data\n      // dim canot on more than one coordDim.\n\n      dataDimsOnCoord = dataDimsOnCoord.concat(dimArr);\n    });\n    summary.dataDimsOnCoord = dataDimsOnCoord;\n    summary.dataDimIndicesOnCoord = map(dataDimsOnCoord, function (dimName) {\n      return data.getDimensionInfo(dimName).storeDimIndex;\n    });\n    summary.encodeFirstDimNotExtra = encodeFirstDimNotExtra;\n    var encodeLabel = encode.label; // FIXME `encode.label` is not recommanded, because formatter can not be set\n    // in this way. Use label.formatter instead. May be remove this approach someday.\n\n    if (encodeLabel && encodeLabel.length) {\n      defaultedLabel = encodeLabel.slice();\n    }\n\n    var encodeTooltip = encode.tooltip;\n\n    if (encodeTooltip && encodeTooltip.length) {\n      defaultedTooltip = encodeTooltip.slice();\n    } else if (!defaultedTooltip.length) {\n      defaultedTooltip = defaultedLabel.slice();\n    }\n\n    encode.defaultedLabel = defaultedLabel;\n    encode.defaultedTooltip = defaultedTooltip;\n    summary.userOutput = new DimensionUserOuput(userOutputEncode, schema);\n    return summary;\n  }\n\n  function getOrCreateEncodeArr(encode, dim) {\n    if (!encode.hasOwnProperty(dim)) {\n      encode[dim] = [];\n    }\n\n    return encode[dim];\n  } // FIXME:TS should be type `AxisType`\n\n\n  function getDimensionTypeByAxis(axisType) {\n    return axisType === 'category' ? 'ordinal' : axisType === 'time' ? 'time' : 'float';\n  }\n\n  function mayLabelDimType(dimType) {\n    // In most cases, ordinal and time do not suitable for label.\n    // Ordinal info can be displayed on axis. Time is too long.\n    return !(dimType === 'ordinal' || dimType === 'time');\n  } // function findTheLastDimMayLabel(data) {\n  //     // Get last value dim\n  //     let dimensions = data.dimensions.slice();\n  //     let valueType;\n  //     let valueDim;\n  //     while (dimensions.length && (\n  //         valueDim = dimensions.pop(),\n  //         valueType = data.getDimensionInfo(valueDim).type,\n  //         valueType === 'ordinal' || valueType === 'time'\n  //     )) {} // jshint ignore:line\n  //     return valueDim;\n  // }\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var SeriesDimensionDefine =\n  /** @class */\n  function () {\n    /**\n     * @param opt All of the fields will be shallow copied.\n     */\n    function SeriesDimensionDefine(opt) {\n      /**\n       * The format of `otherDims` is:\n       * ```js\n       * {\n       *     tooltip?: number\n       *     label?: number\n       *     itemName?: number\n       *     seriesName?: number\n       * }\n       * ```\n       *\n       * A `series.encode` can specified these fields:\n       * ```js\n       * encode: {\n       *     // \"3, 1, 5\" is the index of data dimension.\n       *     tooltip: [3, 1, 5],\n       *     label: [0, 3],\n       *     ...\n       * }\n       * ```\n       * `otherDims` is the parse result of the `series.encode` above, like:\n       * ```js\n       * // Suppose the index of this data dimension is `3`.\n       * this.otherDims = {\n       *     // `3` is at the index `0` of the `encode.tooltip`\n       *     tooltip: 0,\n       *     // `3` is at the index `1` of the `encode.label`\n       *     label: 1\n       * };\n       * ```\n       *\n       * This prop should never be `null`/`undefined` after initialized.\n       */\n      this.otherDims = {};\n\n      if (opt != null) {\n        extend(this, opt);\n      }\n    }\n\n    return SeriesDimensionDefine;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var inner$4 = makeInner();\n  var dimTypeShort = {\n    float: 'f',\n    int: 'i',\n    ordinal: 'o',\n    number: 'n',\n    time: 't'\n  };\n  /**\n   * Represents the dimension requirement of a series.\n   *\n   * NOTICE:\n   * When there are too many dimensions in dataset and many series, only the used dimensions\n   * (i.e., used by coord sys and declared in `series.encode`) are add to `dimensionDefineList`.\n   * But users may query data by other unused dimension names.\n   * In this case, users can only query data if and only if they have defined dimension names\n   * via ec option, so we provide `getDimensionIndexFromSource`, which only query them from\n   * `source` dimensions.\n   */\n\n  var SeriesDataSchema =\n  /** @class */\n  function () {\n    function SeriesDataSchema(opt) {\n      this.dimensions = opt.dimensions;\n      this._dimOmitted = opt.dimensionOmitted;\n      this.source = opt.source;\n      this._fullDimCount = opt.fullDimensionCount;\n\n      this._updateDimOmitted(opt.dimensionOmitted);\n    }\n\n    SeriesDataSchema.prototype.isDimensionOmitted = function () {\n      return this._dimOmitted;\n    };\n\n    SeriesDataSchema.prototype._updateDimOmitted = function (dimensionOmitted) {\n      this._dimOmitted = dimensionOmitted;\n\n      if (!dimensionOmitted) {\n        return;\n      }\n\n      if (!this._dimNameMap) {\n        this._dimNameMap = ensureSourceDimNameMap(this.source);\n      }\n    };\n    /**\n     * @caution Can only be used when `dimensionOmitted: true`.\n     *\n     * Get index by user defined dimension name (i.e., not internal generate name).\n     * That is, get index from `dimensionsDefine`.\n     * If no `dimensionsDefine`, or no name get, return -1.\n     */\n\n\n    SeriesDataSchema.prototype.getSourceDimensionIndex = function (dimName) {\n      return retrieve2(this._dimNameMap.get(dimName), -1);\n    };\n    /**\n     * @caution Can only be used when `dimensionOmitted: true`.\n     *\n     * Notice: may return `null`/`undefined` if user not specify dimension names.\n     */\n\n\n    SeriesDataSchema.prototype.getSourceDimension = function (dimIndex) {\n      var dimensionsDefine = this.source.dimensionsDefine;\n\n      if (dimensionsDefine) {\n        return dimensionsDefine[dimIndex];\n      }\n    };\n\n    SeriesDataSchema.prototype.makeStoreSchema = function () {\n      var dimCount = this._fullDimCount;\n      var willRetrieveDataByName = shouldRetrieveDataByName(this.source);\n      var makeHashStrict = !shouldOmitUnusedDimensions(dimCount); // If source don't have dimensions or series don't omit unsed dimensions.\n      // Generate from seriesDimList directly\n\n      var dimHash = '';\n      var dims = [];\n\n      for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < dimCount; fullDimIdx++) {\n        var property = void 0;\n        var type = void 0;\n        var ordinalMeta = void 0;\n        var seriesDimDef = this.dimensions[seriesDimIdx]; // The list has been sorted by `storeDimIndex` asc.\n\n        if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\n          property = willRetrieveDataByName ? seriesDimDef.name : null;\n          type = seriesDimDef.type;\n          ordinalMeta = seriesDimDef.ordinalMeta;\n          seriesDimIdx++;\n        } else {\n          var sourceDimDef = this.getSourceDimension(fullDimIdx);\n\n          if (sourceDimDef) {\n            property = willRetrieveDataByName ? sourceDimDef.name : null;\n            type = sourceDimDef.type;\n          }\n        }\n\n        dims.push({\n          property: property,\n          type: type,\n          ordinalMeta: ordinalMeta\n        }); // If retrieving data by index,\n        //   use <index, type, ordinalMeta> to determine whether data can be shared.\n        //   (Becuase in this case there might be no dimension name defined in dataset, but indices always exists).\n        //   (indices are always 0, 1, 2, ..., so we can ignore them to shorten the hash).\n        // Otherwise if retrieving data by property name (like `data: [{aa: 123, bb: 765}, ...]`),\n        //   use <property, type, ordinalMeta> in hash.\n\n        if (willRetrieveDataByName && property != null // For data stack, we have make sure each series has its own dim on this store.\n        // So we do not add property to hash to make sure they can share this store.\n        && (!seriesDimDef || !seriesDimDef.isCalculationCoord)) {\n          dimHash += makeHashStrict // Use escape character '`' in case that property name contains '$'.\n          ? property.replace(/\\`/g, '`1').replace(/\\$/g, '`2') // For better performance, when there are large dimensions, tolerant this defects that hardly meet.\n          : property;\n        }\n\n        dimHash += '$';\n        dimHash += dimTypeShort[type] || 'f';\n\n        if (ordinalMeta) {\n          dimHash += ordinalMeta.uid;\n        }\n\n        dimHash += '$';\n      } // Source from endpoint(usually series) will be read differently\n      // when seriesLayoutBy or startIndex(which is affected by sourceHeader) are different.\n      // So we use this three props as key.\n\n\n      var source = this.source;\n      var hash = [source.seriesLayoutBy, source.startIndex, dimHash].join('$$');\n      return {\n        dimensions: dims,\n        hash: hash\n      };\n    };\n\n    SeriesDataSchema.prototype.makeOutputDimensionNames = function () {\n      var result = [];\n\n      for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < this._fullDimCount; fullDimIdx++) {\n        var name_1 = void 0;\n        var seriesDimDef = this.dimensions[seriesDimIdx]; // The list has been sorted by `storeDimIndex` asc.\n\n        if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\n          if (!seriesDimDef.isCalculationCoord) {\n            name_1 = seriesDimDef.name;\n          }\n\n          seriesDimIdx++;\n        } else {\n          var sourceDimDef = this.getSourceDimension(fullDimIdx);\n\n          if (sourceDimDef) {\n            name_1 = sourceDimDef.name;\n          }\n        }\n\n        result.push(name_1);\n      }\n\n      return result;\n    };\n\n    SeriesDataSchema.prototype.appendCalculationDimension = function (dimDef) {\n      this.dimensions.push(dimDef);\n      dimDef.isCalculationCoord = true;\n      this._fullDimCount++; // If append dimension on a data store, consider the store\n      // might be shared by different series, series dimensions not\n      // really map to store dimensions.\n\n      this._updateDimOmitted(true);\n    };\n\n    return SeriesDataSchema;\n  }();\n\n  function isSeriesDataSchema(schema) {\n    return schema instanceof SeriesDataSchema;\n  }\n\n  function createDimNameMap(dimsDef) {\n    var dataDimNameMap = createHashMap();\n\n    for (var i = 0; i < (dimsDef || []).length; i++) {\n      var dimDefItemRaw = dimsDef[i];\n      var userDimName = isObject(dimDefItemRaw) ? dimDefItemRaw.name : dimDefItemRaw;\n\n      if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\n        dataDimNameMap.set(userDimName, i);\n      }\n    }\n\n    return dataDimNameMap;\n  }\n\n  function ensureSourceDimNameMap(source) {\n    var innerSource = inner$4(source);\n    return innerSource.dimNameMap || (innerSource.dimNameMap = createDimNameMap(source.dimensionsDefine));\n  }\n\n  function shouldOmitUnusedDimensions(dimCount) {\n    return dimCount > 30;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /* global Int32Array */\n\n\n  var isObject$2 = isObject;\n  var map$1 = map;\n  var CtorInt32Array$1 = typeof Int32Array === 'undefined' ? Array : Int32Array; // Use prefix to avoid index to be the same as otherIdList[idx],\n  // which will cause weird udpate animation.\n\n  var ID_PREFIX = 'e\\0\\0';\n  var INDEX_NOT_FOUND = -1; // type SeriesDimensionIndex = DimensionIndex;\n\n  var TRANSFERABLE_PROPERTIES = ['hasItemOption', '_nameList', '_idList', '_invertedIndicesMap', '_dimSummary', 'userOutput', '_rawData', '_dimValueGetter', '_nameDimIdx', '_idDimIdx', '_nameRepeatCount'];\n  var CLONE_PROPERTIES = ['_approximateExtent']; // -----------------------------\n  // Internal method declarations:\n  // -----------------------------\n\n  var prepareInvertedIndex;\n  var getId;\n  var getIdNameFromStore;\n  var normalizeDimensions;\n  var transferProperties;\n  var cloneListForMapAndSample;\n  var makeIdFromName;\n\n  var SeriesData =\n  /** @class */\n  function () {\n    /**\n     * @param dimensionsInput.dimensions\n     *        For example, ['someDimName', {name: 'someDimName', type: 'someDimType'}, ...].\n     *        Dimensions should be concrete names like x, y, z, lng, lat, angle, radius\n     */\n    function SeriesData(dimensionsInput, hostModel) {\n      this.type = 'list';\n      this._dimOmitted = false;\n      this._nameList = [];\n      this._idList = []; // Models of data option is stored sparse for optimizing memory cost\n      // Never used yet (not used yet).\n      // private _optionModels: Model[] = [];\n      // Global visual properties after visual coding\n\n      this._visual = {}; // Globel layout properties.\n\n      this._layout = {}; // Item visual properties after visual coding\n\n      this._itemVisuals = []; // Item layout properties after layout\n\n      this._itemLayouts = []; // Graphic elemnents\n\n      this._graphicEls = []; // key: dim, value: extent\n\n      this._approximateExtent = {};\n      this._calculationInfo = {}; // Having detected that there is data item is non primitive type\n      // (in type `OptionDataItemObject`).\n      // Like `data: [ { value: xx, itemStyle: {...} }, ...]`\n      // At present it only happen in `SOURCE_FORMAT_ORIGINAL`.\n\n      this.hasItemOption = false; // Methods that create a new list based on this list should be listed here.\n      // Notice that those method should `RETURN` the new list.\n\n      this.TRANSFERABLE_METHODS = ['cloneShallow', 'downSample', 'lttbDownSample', 'map']; // Methods that change indices of this list should be listed here.\n\n      this.CHANGABLE_METHODS = ['filterSelf', 'selectRange'];\n      this.DOWNSAMPLE_METHODS = ['downSample', 'lttbDownSample'];\n      var dimensions;\n      var assignStoreDimIdx = false;\n\n      if (isSeriesDataSchema(dimensionsInput)) {\n        dimensions = dimensionsInput.dimensions;\n        this._dimOmitted = dimensionsInput.isDimensionOmitted();\n        this._schema = dimensionsInput;\n      } else {\n        assignStoreDimIdx = true;\n        dimensions = dimensionsInput;\n      }\n\n      dimensions = dimensions || ['x', 'y'];\n      var dimensionInfos = {};\n      var dimensionNames = [];\n      var invertedIndicesMap = {};\n      var needsHasOwn = false;\n      var emptyObj = {};\n\n      for (var i = 0; i < dimensions.length; i++) {\n        // Use the original dimensions[i], where other flag props may exists.\n        var dimInfoInput = dimensions[i];\n        var dimensionInfo = isString(dimInfoInput) ? new SeriesDimensionDefine({\n          name: dimInfoInput\n        }) : !(dimInfoInput instanceof SeriesDimensionDefine) ? new SeriesDimensionDefine(dimInfoInput) : dimInfoInput;\n        var dimensionName = dimensionInfo.name;\n        dimensionInfo.type = dimensionInfo.type || 'float';\n\n        if (!dimensionInfo.coordDim) {\n          dimensionInfo.coordDim = dimensionName;\n          dimensionInfo.coordDimIndex = 0;\n        }\n\n        var otherDims = dimensionInfo.otherDims = dimensionInfo.otherDims || {};\n        dimensionNames.push(dimensionName);\n        dimensionInfos[dimensionName] = dimensionInfo;\n\n        if (emptyObj[dimensionName] != null) {\n          needsHasOwn = true;\n        }\n\n        if (dimensionInfo.createInvertedIndices) {\n          invertedIndicesMap[dimensionName] = [];\n        }\n\n        if (otherDims.itemName === 0) {\n          this._nameDimIdx = i;\n        }\n\n        if (otherDims.itemId === 0) {\n          this._idDimIdx = i;\n        }\n\n        {\n          assert(assignStoreDimIdx || dimensionInfo.storeDimIndex >= 0);\n        }\n\n        if (assignStoreDimIdx) {\n          dimensionInfo.storeDimIndex = i;\n        }\n      }\n\n      this.dimensions = dimensionNames;\n      this._dimInfos = dimensionInfos;\n\n      this._initGetDimensionInfo(needsHasOwn);\n\n      this.hostModel = hostModel;\n      this._invertedIndicesMap = invertedIndicesMap;\n\n      if (this._dimOmitted) {\n        var dimIdxToName_1 = this._dimIdxToName = createHashMap();\n        each(dimensionNames, function (dimName) {\n          dimIdxToName_1.set(dimensionInfos[dimName].storeDimIndex, dimName);\n        });\n      }\n    }\n    /**\n     *\n     * Get concrete dimension name by dimension name or dimension index.\n     * If input a dimension name, do not validate whether the dimension name exits.\n     *\n     * @caution\n     * @param dim Must make sure the dimension is `SeriesDimensionLoose`.\n     * Because only those dimensions will have auto-generated dimension names if not\n     * have a user-specified name, and other dimensions will get a return of null/undefined.\n     *\n     * @notice Becuause of this reason, should better use `getDimensionIndex` instead, for examples:\n     * ```js\n     * const val = data.getStore().get(data.getDimensionIndex(dim), dataIdx);\n     * ```\n     *\n     * @return Concrete dim name.\n     */\n\n\n    SeriesData.prototype.getDimension = function (dim) {\n      var dimIdx = this._recognizeDimIndex(dim);\n\n      if (dimIdx == null) {\n        return dim;\n      }\n\n      dimIdx = dim;\n\n      if (!this._dimOmitted) {\n        return this.dimensions[dimIdx];\n      } // Retrieve from series dimension definition becuase it probably contains\n      // generated dimension name (like 'x', 'y').\n\n\n      var dimName = this._dimIdxToName.get(dimIdx);\n\n      if (dimName != null) {\n        return dimName;\n      }\n\n      var sourceDimDef = this._schema.getSourceDimension(dimIdx);\n\n      if (sourceDimDef) {\n        return sourceDimDef.name;\n      }\n    };\n    /**\n     * Get dimension index in data store. Return -1 if not found.\n     * Can be used to index value from getRawValue.\n     */\n\n\n    SeriesData.prototype.getDimensionIndex = function (dim) {\n      var dimIdx = this._recognizeDimIndex(dim);\n\n      if (dimIdx != null) {\n        return dimIdx;\n      }\n\n      if (dim == null) {\n        return -1;\n      }\n\n      var dimInfo = this._getDimInfo(dim);\n\n      return dimInfo ? dimInfo.storeDimIndex : this._dimOmitted ? this._schema.getSourceDimensionIndex(dim) : -1;\n    };\n    /**\n     * The meanings of the input parameter `dim`:\n     *\n     * + If dim is a number (e.g., `1`), it means the index of the dimension.\n     *   For example, `getDimension(0)` will return 'x' or 'lng' or 'radius'.\n     * + If dim is a number-like string (e.g., `\"1\"`):\n     *     + If there is the same concrete dim name defined in `series.dimensions` or `dataset.dimensions`,\n     *        it means that concrete name.\n     *     + If not, it will be converted to a number, which means the index of the dimension.\n     *        (why? because of the backward compatbility. We have been tolerating number-like string in\n     *        dimension setting, although now it seems that it is not a good idea.)\n     *     For example, `visualMap[i].dimension: \"1\"` is the same meaning as `visualMap[i].dimension: 1`,\n     *     if no dimension name is defined as `\"1\"`.\n     * + If dim is a not-number-like string, it means the concrete dim name.\n     *   For example, it can be be default name `\"x\"`, `\"y\"`, `\"z\"`, `\"lng\"`, `\"lat\"`, `\"angle\"`, `\"radius\"`,\n     *   or customized in `dimensions` property of option like `\"age\"`.\n     *\n     * @return recogonized `DimensionIndex`. Otherwise return null/undefined (means that dim is `DimensionName`).\n     */\n\n\n    SeriesData.prototype._recognizeDimIndex = function (dim) {\n      if (isNumber(dim) // If being a number-like string but not being defined as a dimension name.\n      || dim != null && !isNaN(dim) && !this._getDimInfo(dim) && (!this._dimOmitted || this._schema.getSourceDimensionIndex(dim) < 0)) {\n        return +dim;\n      }\n    };\n\n    SeriesData.prototype._getStoreDimIndex = function (dim) {\n      var dimIdx = this.getDimensionIndex(dim);\n      {\n        if (dimIdx == null) {\n          throw new Error('Unkown dimension ' + dim);\n        }\n      }\n      return dimIdx;\n    };\n    /**\n     * Get type and calculation info of particular dimension\n     * @param dim\n     *        Dimension can be concrete names like x, y, z, lng, lat, angle, radius\n     *        Or a ordinal number. For example getDimensionInfo(0) will return 'x' or 'lng' or 'radius'\n     */\n\n\n    SeriesData.prototype.getDimensionInfo = function (dim) {\n      // Do not clone, because there may be categories in dimInfo.\n      return this._getDimInfo(this.getDimension(dim));\n    };\n\n    SeriesData.prototype._initGetDimensionInfo = function (needsHasOwn) {\n      var dimensionInfos = this._dimInfos;\n      this._getDimInfo = needsHasOwn ? function (dimName) {\n        return dimensionInfos.hasOwnProperty(dimName) ? dimensionInfos[dimName] : undefined;\n      } : function (dimName) {\n        return dimensionInfos[dimName];\n      };\n    };\n    /**\n     * concrete dimension name list on coord.\n     */\n\n\n    SeriesData.prototype.getDimensionsOnCoord = function () {\n      return this._dimSummary.dataDimsOnCoord.slice();\n    };\n\n    SeriesData.prototype.mapDimension = function (coordDim, idx) {\n      var dimensionsSummary = this._dimSummary;\n\n      if (idx == null) {\n        return dimensionsSummary.encodeFirstDimNotExtra[coordDim];\n      }\n\n      var dims = dimensionsSummary.encode[coordDim];\n      return dims ? dims[idx] : null;\n    };\n\n    SeriesData.prototype.mapDimensionsAll = function (coordDim) {\n      var dimensionsSummary = this._dimSummary;\n      var dims = dimensionsSummary.encode[coordDim];\n      return (dims || []).slice();\n    };\n\n    SeriesData.prototype.getStore = function () {\n      return this._store;\n    };\n    /**\n     * Initialize from data\n     * @param data source or data or data store.\n     * @param nameList The name of a datum is used on data diff and\n     *        default label/tooltip.\n     *        A name can be specified in encode.itemName,\n     *        or dataItem.name (only for series option data),\n     *        or provided in nameList from outside.\n     */\n\n\n    SeriesData.prototype.initData = function (data, nameList, dimValueGetter) {\n      var _this = this;\n\n      var store;\n\n      if (data instanceof DataStore) {\n        store = data;\n      }\n\n      if (!store) {\n        var dimensions = this.dimensions;\n        var provider = isSourceInstance(data) || isArrayLike(data) ? new DefaultDataProvider(data, dimensions.length) : data;\n        store = new DataStore();\n        var dimensionInfos = map$1(dimensions, function (dimName) {\n          return {\n            type: _this._dimInfos[dimName].type,\n            property: dimName\n          };\n        });\n        store.initData(provider, dimensionInfos, dimValueGetter);\n      }\n\n      this._store = store; // Reset\n\n      this._nameList = (nameList || []).slice();\n      this._idList = [];\n      this._nameRepeatCount = {};\n\n      this._doInit(0, store.count()); // Cache summary info for fast visit. See \"dimensionHelper\".\n      // Needs to be initialized after store is prepared.\n\n\n      this._dimSummary = summarizeDimensions(this, this._schema);\n      this.userOutput = this._dimSummary.userOutput;\n    };\n    /**\n     * Caution: Can be only called on raw data (before `this._indices` created).\n     */\n\n\n    SeriesData.prototype.appendData = function (data) {\n      var range = this._store.appendData(data);\n\n      this._doInit(range[0], range[1]);\n    };\n    /**\n     * Caution: Can be only called on raw data (before `this._indices` created).\n     * This method does not modify `rawData` (`dataProvider`), but only\n     * add values to store.\n     *\n     * The final count will be increased by `Math.max(values.length, names.length)`.\n     *\n     * @param values That is the SourceType: 'arrayRows', like\n     *        [\n     *            [12, 33, 44],\n     *            [NaN, 43, 1],\n     *            ['-', 'asdf', 0]\n     *        ]\n     *        Each item is exaclty cooresponding to a dimension.\n     */\n\n\n    SeriesData.prototype.appendValues = function (values, names) {\n      var _a = this._store.appendValues(values, names.length),\n          start = _a.start,\n          end = _a.end;\n\n      var shouldMakeIdFromName = this._shouldMakeIdFromName();\n\n      this._updateOrdinalMeta();\n\n      if (names) {\n        for (var idx = start; idx < end; idx++) {\n          var sourceIdx = idx - start;\n          this._nameList[idx] = names[sourceIdx];\n\n          if (shouldMakeIdFromName) {\n            makeIdFromName(this, idx);\n          }\n        }\n      }\n    };\n\n    SeriesData.prototype._updateOrdinalMeta = function () {\n      var store = this._store;\n      var dimensions = this.dimensions;\n\n      for (var i = 0; i < dimensions.length; i++) {\n        var dimInfo = this._dimInfos[dimensions[i]];\n\n        if (dimInfo.ordinalMeta) {\n          store.collectOrdinalMeta(dimInfo.storeDimIndex, dimInfo.ordinalMeta);\n        }\n      }\n    };\n\n    SeriesData.prototype._shouldMakeIdFromName = function () {\n      var provider = this._store.getProvider();\n\n      return this._idDimIdx == null && provider.getSource().sourceFormat !== SOURCE_FORMAT_TYPED_ARRAY && !provider.fillStorage;\n    };\n\n    SeriesData.prototype._doInit = function (start, end) {\n      if (start >= end) {\n        return;\n      }\n\n      var store = this._store;\n      var provider = store.getProvider();\n\n      this._updateOrdinalMeta();\n\n      var nameList = this._nameList;\n      var idList = this._idList;\n      var sourceFormat = provider.getSource().sourceFormat;\n      var isFormatOriginal = sourceFormat === SOURCE_FORMAT_ORIGINAL; // Each data item is value\n      // [1, 2]\n      // 2\n      // Bar chart, line chart which uses category axis\n      // only gives the 'y' value. 'x' value is the indices of category\n      // Use a tempValue to normalize the value to be a (x, y) value\n      // If dataItem is {name: ...} or {id: ...}, it has highest priority.\n      // This kind of ids and names are always stored `_nameList` and `_idList`.\n\n      if (isFormatOriginal && !provider.pure) {\n        var sharedDataItem = [];\n\n        for (var idx = start; idx < end; idx++) {\n          // NOTICE: Try not to write things into dataItem\n          var dataItem = provider.getItem(idx, sharedDataItem);\n\n          if (!this.hasItemOption && isDataItemOption(dataItem)) {\n            this.hasItemOption = true;\n          }\n\n          if (dataItem) {\n            var itemName = dataItem.name;\n\n            if (nameList[idx] == null && itemName != null) {\n              nameList[idx] = convertOptionIdName(itemName, null);\n            }\n\n            var itemId = dataItem.id;\n\n            if (idList[idx] == null && itemId != null) {\n              idList[idx] = convertOptionIdName(itemId, null);\n            }\n          }\n        }\n      }\n\n      if (this._shouldMakeIdFromName()) {\n        for (var idx = start; idx < end; idx++) {\n          makeIdFromName(this, idx);\n        }\n      }\n\n      prepareInvertedIndex(this);\n    };\n    /**\n     * PENDING: In fact currently this function is only used to short-circuit\n     * the calling of `scale.unionExtentFromData` when data have been filtered by modules\n     * like \"dataZoom\". `scale.unionExtentFromData` is used to calculate data extent for series on\n     * an axis, but if a \"axis related data filter module\" is used, the extent of the axis have\n     * been fixed and no need to calling `scale.unionExtentFromData` actually.\n     * But if we add \"custom data filter\" in future, which is not \"axis related\", this method may\n     * be still needed.\n     *\n     * Optimize for the scenario that data is filtered by a given extent.\n     * Consider that if data amount is more than hundreds of thousand,\n     * extent calculation will cost more than 10ms and the cache will\n     * be erased because of the filtering.\n     */\n\n\n    SeriesData.prototype.getApproximateExtent = function (dim) {\n      return this._approximateExtent[dim] || this._store.getDataExtent(this._getStoreDimIndex(dim));\n    };\n    /**\n     * Calculate extent on a filtered data might be time consuming.\n     * Approximate extent is only used for: calculte extent of filtered data outside.\n     */\n\n\n    SeriesData.prototype.setApproximateExtent = function (extent, dim) {\n      dim = this.getDimension(dim);\n      this._approximateExtent[dim] = extent.slice();\n    };\n\n    SeriesData.prototype.getCalculationInfo = function (key) {\n      return this._calculationInfo[key];\n    };\n\n    SeriesData.prototype.setCalculationInfo = function (key, value) {\n      isObject$2(key) ? extend(this._calculationInfo, key) : this._calculationInfo[key] = value;\n    };\n    /**\n     * @return Never be null/undefined. `number` will be converted to string. Becuase:\n     * In most cases, name is used in display, where returning a string is more convenient.\n     * In other cases, name is used in query (see `indexOfName`), where we can keep the\n     * rule that name `2` equals to name `'2'`.\n     */\n\n\n    SeriesData.prototype.getName = function (idx) {\n      var rawIndex = this.getRawIndex(idx);\n      var name = this._nameList[rawIndex];\n\n      if (name == null && this._nameDimIdx != null) {\n        name = getIdNameFromStore(this, this._nameDimIdx, rawIndex);\n      }\n\n      if (name == null) {\n        name = '';\n      }\n\n      return name;\n    };\n\n    SeriesData.prototype._getCategory = function (dimIdx, idx) {\n      var ordinal = this._store.get(dimIdx, idx);\n\n      var ordinalMeta = this._store.getOrdinalMeta(dimIdx);\n\n      if (ordinalMeta) {\n        return ordinalMeta.categories[ordinal];\n      }\n\n      return ordinal;\n    };\n    /**\n     * @return Never null/undefined. `number` will be converted to string. Becuase:\n     * In all cases having encountered at present, id is used in making diff comparison, which\n     * are usually based on hash map. We can keep the rule that the internal id are always string\n     * (treat `2` is the same as `'2'`) to make the related logic simple.\n     */\n\n\n    SeriesData.prototype.getId = function (idx) {\n      return getId(this, this.getRawIndex(idx));\n    };\n\n    SeriesData.prototype.count = function () {\n      return this._store.count();\n    };\n    /**\n     * Get value. Return NaN if idx is out of range.\n     *\n     * @notice Should better to use `data.getStore().get(dimIndex, dataIdx)` instead.\n     */\n\n\n    SeriesData.prototype.get = function (dim, idx) {\n      var store = this._store;\n      var dimInfo = this._dimInfos[dim];\n\n      if (dimInfo) {\n        return store.get(dimInfo.storeDimIndex, idx);\n      }\n    };\n    /**\n     * @notice Should better to use `data.getStore().getByRawIndex(dimIndex, dataIdx)` instead.\n     */\n\n\n    SeriesData.prototype.getByRawIndex = function (dim, rawIdx) {\n      var store = this._store;\n      var dimInfo = this._dimInfos[dim];\n\n      if (dimInfo) {\n        return store.getByRawIndex(dimInfo.storeDimIndex, rawIdx);\n      }\n    };\n\n    SeriesData.prototype.getIndices = function () {\n      return this._store.getIndices();\n    };\n\n    SeriesData.prototype.getDataExtent = function (dim) {\n      return this._store.getDataExtent(this._getStoreDimIndex(dim));\n    };\n\n    SeriesData.prototype.getSum = function (dim) {\n      return this._store.getSum(this._getStoreDimIndex(dim));\n    };\n\n    SeriesData.prototype.getMedian = function (dim) {\n      return this._store.getMedian(this._getStoreDimIndex(dim));\n    };\n\n    SeriesData.prototype.getValues = function (dimensions, idx) {\n      var _this = this;\n\n      var store = this._store;\n      return isArray(dimensions) ? store.getValues(map$1(dimensions, function (dim) {\n        return _this._getStoreDimIndex(dim);\n      }), idx) : store.getValues(dimensions);\n    };\n    /**\n     * If value is NaN. Inlcuding '-'\n     * Only check the coord dimensions.\n     */\n\n\n    SeriesData.prototype.hasValue = function (idx) {\n      var dataDimIndicesOnCoord = this._dimSummary.dataDimIndicesOnCoord;\n\n      for (var i = 0, len = dataDimIndicesOnCoord.length; i < len; i++) {\n        // Ordinal type originally can be string or number.\n        // But when an ordinal type is used on coord, it can\n        // not be string but only number. So we can also use isNaN.\n        if (isNaN(this._store.get(dataDimIndicesOnCoord[i], idx))) {\n          return false;\n        }\n      }\n\n      return true;\n    };\n    /**\n     * Retreive the index with given name\n     */\n\n\n    SeriesData.prototype.indexOfName = function (name) {\n      for (var i = 0, len = this._store.count(); i < len; i++) {\n        if (this.getName(i) === name) {\n          return i;\n        }\n      }\n\n      return -1;\n    };\n\n    SeriesData.prototype.getRawIndex = function (idx) {\n      return this._store.getRawIndex(idx);\n    };\n\n    SeriesData.prototype.indexOfRawIndex = function (rawIndex) {\n      return this._store.indexOfRawIndex(rawIndex);\n    };\n    /**\n     * Only support the dimension which inverted index created.\n     * Do not support other cases until required.\n     * @param dim concrete dim\n     * @param value ordinal index\n     * @return rawIndex\n     */\n\n\n    SeriesData.prototype.rawIndexOf = function (dim, value) {\n      var invertedIndices = dim && this._invertedIndicesMap[dim];\n      {\n        if (!invertedIndices) {\n          throw new Error('Do not supported yet');\n        }\n      }\n      var rawIndex = invertedIndices[value];\n\n      if (rawIndex == null || isNaN(rawIndex)) {\n        return INDEX_NOT_FOUND;\n      }\n\n      return rawIndex;\n    };\n    /**\n     * Retreive the index of nearest value\n     * @param dim\n     * @param value\n     * @param [maxDistance=Infinity]\n     * @return If and only if multiple indices has\n     *         the same value, they are put to the result.\n     */\n\n\n    SeriesData.prototype.indicesOfNearest = function (dim, value, maxDistance) {\n      return this._store.indicesOfNearest(this._getStoreDimIndex(dim), value, maxDistance);\n    };\n\n    SeriesData.prototype.each = function (dims, cb, ctx) {\n      'use strict';\n\n      if (isFunction(dims)) {\n        ctx = cb;\n        cb = dims;\n        dims = [];\n      } // ctxCompat just for compat echarts3\n\n\n      var fCtx = ctx || this;\n      var dimIndices = map$1(normalizeDimensions(dims), this._getStoreDimIndex, this);\n\n      this._store.each(dimIndices, fCtx ? bind(cb, fCtx) : cb);\n    };\n\n    SeriesData.prototype.filterSelf = function (dims, cb, ctx) {\n      'use strict';\n\n      if (isFunction(dims)) {\n        ctx = cb;\n        cb = dims;\n        dims = [];\n      } // ctxCompat just for compat echarts3\n\n\n      var fCtx = ctx || this;\n      var dimIndices = map$1(normalizeDimensions(dims), this._getStoreDimIndex, this);\n      this._store = this._store.filter(dimIndices, fCtx ? bind(cb, fCtx) : cb);\n      return this;\n    };\n    /**\n     * Select data in range. (For optimization of filter)\n     * (Manually inline code, support 5 million data filtering in data zoom.)\n     */\n\n\n    SeriesData.prototype.selectRange = function (range) {\n      'use strict';\n\n      var _this = this;\n\n      var innerRange = {};\n      var dims = keys(range);\n      var dimIndices = [];\n      each(dims, function (dim) {\n        var dimIdx = _this._getStoreDimIndex(dim);\n\n        innerRange[dimIdx] = range[dim];\n        dimIndices.push(dimIdx);\n      });\n      this._store = this._store.selectRange(innerRange);\n      return this;\n    };\n    /* eslint-enable max-len */\n\n\n    SeriesData.prototype.mapArray = function (dims, cb, ctx) {\n      'use strict';\n\n      if (isFunction(dims)) {\n        ctx = cb;\n        cb = dims;\n        dims = [];\n      } // ctxCompat just for compat echarts3\n\n\n      ctx = ctx || this;\n      var result = [];\n      this.each(dims, function () {\n        result.push(cb && cb.apply(this, arguments));\n      }, ctx);\n      return result;\n    };\n\n    SeriesData.prototype.map = function (dims, cb, ctx, ctxCompat) {\n      'use strict'; // ctxCompat just for compat echarts3\n\n      var fCtx = ctx || ctxCompat || this;\n      var dimIndices = map$1(normalizeDimensions(dims), this._getStoreDimIndex, this);\n      var list = cloneListForMapAndSample(this);\n      list._store = this._store.map(dimIndices, fCtx ? bind(cb, fCtx) : cb);\n      return list;\n    };\n\n    SeriesData.prototype.modify = function (dims, cb, ctx, ctxCompat) {\n      var _this = this; // ctxCompat just for compat echarts3\n\n\n      var fCtx = ctx || ctxCompat || this;\n      {\n        each(normalizeDimensions(dims), function (dim) {\n          var dimInfo = _this.getDimensionInfo(dim);\n\n          if (!dimInfo.isCalculationCoord) {\n            console.error('Danger: only stack dimension can be modified');\n          }\n        });\n      }\n      var dimIndices = map$1(normalizeDimensions(dims), this._getStoreDimIndex, this); // If do shallow clone here, if there are too many stacked series,\n      // it still cost lots of memory, becuase `_store.dimensions` are not shared.\n      // We should consider there probably be shallow clone happen in each sereis\n      // in consequent filter/map.\n\n      this._store.modify(dimIndices, fCtx ? bind(cb, fCtx) : cb);\n    };\n    /**\n     * Large data down sampling on given dimension\n     * @param sampleIndex Sample index for name and id\n     */\n\n\n    SeriesData.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n      var list = cloneListForMapAndSample(this);\n      list._store = this._store.downSample(this._getStoreDimIndex(dimension), rate, sampleValue, sampleIndex);\n      return list;\n    };\n    /**\n     * Large data down sampling using largest-triangle-three-buckets\n     * @param {string} valueDimension\n     * @param {number} targetCount\n     */\n\n\n    SeriesData.prototype.lttbDownSample = function (valueDimension, rate) {\n      var list = cloneListForMapAndSample(this);\n      list._store = this._store.lttbDownSample(this._getStoreDimIndex(valueDimension), rate);\n      return list;\n    };\n\n    SeriesData.prototype.getRawDataItem = function (idx) {\n      return this._store.getRawDataItem(idx);\n    };\n    /**\n     * Get model of one data item.\n     */\n    // TODO: Type of data item\n\n\n    SeriesData.prototype.getItemModel = function (idx) {\n      var hostModel = this.hostModel;\n      var dataItem = this.getRawDataItem(idx);\n      return new Model(dataItem, hostModel, hostModel && hostModel.ecModel);\n    };\n    /**\n     * Create a data differ\n     */\n\n\n    SeriesData.prototype.diff = function (otherList) {\n      var thisList = this;\n      return new DataDiffer(otherList ? otherList.getStore().getIndices() : [], this.getStore().getIndices(), function (idx) {\n        return getId(otherList, idx);\n      }, function (idx) {\n        return getId(thisList, idx);\n      });\n    };\n    /**\n     * Get visual property.\n     */\n\n\n    SeriesData.prototype.getVisual = function (key) {\n      var visual = this._visual;\n      return visual && visual[key];\n    };\n\n    SeriesData.prototype.setVisual = function (kvObj, val) {\n      this._visual = this._visual || {};\n\n      if (isObject$2(kvObj)) {\n        extend(this._visual, kvObj);\n      } else {\n        this._visual[kvObj] = val;\n      }\n    };\n    /**\n     * Get visual property of single data item\n     */\n    // eslint-disable-next-line\n\n\n    SeriesData.prototype.getItemVisual = function (idx, key) {\n      var itemVisual = this._itemVisuals[idx];\n      var val = itemVisual && itemVisual[key];\n\n      if (val == null) {\n        // Use global visual property\n        return this.getVisual(key);\n      }\n\n      return val;\n    };\n    /**\n     * If exists visual property of single data item\n     */\n\n\n    SeriesData.prototype.hasItemVisual = function () {\n      return this._itemVisuals.length > 0;\n    };\n    /**\n     * Make sure itemVisual property is unique\n     */\n    // TODO: use key to save visual to reduce memory.\n\n\n    SeriesData.prototype.ensureUniqueItemVisual = function (idx, key) {\n      var itemVisuals = this._itemVisuals;\n      var itemVisual = itemVisuals[idx];\n\n      if (!itemVisual) {\n        itemVisual = itemVisuals[idx] = {};\n      }\n\n      var val = itemVisual[key];\n\n      if (val == null) {\n        val = this.getVisual(key); // TODO Performance?\n\n        if (isArray(val)) {\n          val = val.slice();\n        } else if (isObject$2(val)) {\n          val = extend({}, val);\n        }\n\n        itemVisual[key] = val;\n      }\n\n      return val;\n    }; // eslint-disable-next-line\n\n\n    SeriesData.prototype.setItemVisual = function (idx, key, value) {\n      var itemVisual = this._itemVisuals[idx] || {};\n      this._itemVisuals[idx] = itemVisual;\n\n      if (isObject$2(key)) {\n        extend(itemVisual, key);\n      } else {\n        itemVisual[key] = value;\n      }\n    };\n    /**\n     * Clear itemVisuals and list visual.\n     */\n\n\n    SeriesData.prototype.clearAllVisual = function () {\n      this._visual = {};\n      this._itemVisuals = [];\n    };\n\n    SeriesData.prototype.setLayout = function (key, val) {\n      isObject$2(key) ? extend(this._layout, key) : this._layout[key] = val;\n    };\n    /**\n     * Get layout property.\n     */\n\n\n    SeriesData.prototype.getLayout = function (key) {\n      return this._layout[key];\n    };\n    /**\n     * Get layout of single data item\n     */\n\n\n    SeriesData.prototype.getItemLayout = function (idx) {\n      return this._itemLayouts[idx];\n    };\n    /**\n     * Set layout of single data item\n     */\n\n\n    SeriesData.prototype.setItemLayout = function (idx, layout, merge$$1) {\n      this._itemLayouts[idx] = merge$$1 ? extend(this._itemLayouts[idx] || {}, layout) : layout;\n    };\n    /**\n     * Clear all layout of single data item\n     */\n\n\n    SeriesData.prototype.clearItemLayouts = function () {\n      this._itemLayouts.length = 0;\n    };\n    /**\n     * Set graphic element relative to data. It can be set as null\n     */\n\n\n    SeriesData.prototype.setItemGraphicEl = function (idx, el) {\n      var seriesIndex = this.hostModel && this.hostModel.seriesIndex;\n      setCommonECData(seriesIndex, this.dataType, idx, el);\n      this._graphicEls[idx] = el;\n    };\n\n    SeriesData.prototype.getItemGraphicEl = function (idx) {\n      return this._graphicEls[idx];\n    };\n\n    SeriesData.prototype.eachItemGraphicEl = function (cb, context) {\n      each(this._graphicEls, function (el, idx) {\n        if (el) {\n          cb && cb.call(context, el, idx);\n        }\n      });\n    };\n    /**\n     * Shallow clone a new list except visual and layout properties, and graph elements.\n     * New list only change the indices.\n     */\n\n\n    SeriesData.prototype.cloneShallow = function (list) {\n      if (!list) {\n        list = new SeriesData(this._schema ? this._schema : map$1(this.dimensions, this._getDimInfo, this), this.hostModel);\n      }\n\n      transferProperties(list, this);\n      list._store = this._store;\n      return list;\n    };\n    /**\n     * Wrap some method to add more feature\n     */\n\n\n    SeriesData.prototype.wrapMethod = function (methodName, injectFunction) {\n      var originalMethod = this[methodName];\n\n      if (!isFunction(originalMethod)) {\n        return;\n      }\n\n      this.__wrappedMethods = this.__wrappedMethods || [];\n\n      this.__wrappedMethods.push(methodName);\n\n      this[methodName] = function () {\n        var res = originalMethod.apply(this, arguments);\n        return injectFunction.apply(this, [res].concat(slice(arguments)));\n      };\n    }; // ----------------------------------------------------------\n    // A work around for internal method visiting private member.\n    // ----------------------------------------------------------\n\n\n    SeriesData.internalField = function () {\n      prepareInvertedIndex = function (data) {\n        var invertedIndicesMap = data._invertedIndicesMap;\n        each(invertedIndicesMap, function (invertedIndices, dim) {\n          var dimInfo = data._dimInfos[dim]; // Currently, only dimensions that has ordinalMeta can create inverted indices.\n\n          var ordinalMeta = dimInfo.ordinalMeta;\n          var store = data._store;\n\n          if (ordinalMeta) {\n            invertedIndices = invertedIndicesMap[dim] = new CtorInt32Array$1(ordinalMeta.categories.length); // The default value of TypedArray is 0. To avoid miss\n            // mapping to 0, we should set it as INDEX_NOT_FOUND.\n\n            for (var i = 0; i < invertedIndices.length; i++) {\n              invertedIndices[i] = INDEX_NOT_FOUND;\n            }\n\n            for (var i = 0; i < store.count(); i++) {\n              // Only support the case that all values are distinct.\n              invertedIndices[store.get(dimInfo.storeDimIndex, i)] = i;\n            }\n          }\n        });\n      };\n\n      getIdNameFromStore = function (data, dimIdx, idx) {\n        return convertOptionIdName(data._getCategory(dimIdx, idx), null);\n      };\n      /**\n       * @see the comment of `List['getId']`.\n       */\n\n\n      getId = function (data, rawIndex) {\n        var id = data._idList[rawIndex];\n\n        if (id == null && data._idDimIdx != null) {\n          id = getIdNameFromStore(data, data._idDimIdx, rawIndex);\n        }\n\n        if (id == null) {\n          id = ID_PREFIX + rawIndex;\n        }\n\n        return id;\n      };\n\n      normalizeDimensions = function (dimensions) {\n        if (!isArray(dimensions)) {\n          dimensions = dimensions != null ? [dimensions] : [];\n        }\n\n        return dimensions;\n      };\n      /**\n       * Data in excludeDimensions is copied, otherwise transfered.\n       */\n\n\n      cloneListForMapAndSample = function (original) {\n        var list = new SeriesData(original._schema ? original._schema : map$1(original.dimensions, original._getDimInfo, original), original.hostModel); // FIXME If needs stackedOn, value may already been stacked\n\n        transferProperties(list, original);\n        return list;\n      };\n\n      transferProperties = function (target, source) {\n        each(TRANSFERABLE_PROPERTIES.concat(source.__wrappedMethods || []), function (propName) {\n          if (source.hasOwnProperty(propName)) {\n            target[propName] = source[propName];\n          }\n        });\n        target.__wrappedMethods = source.__wrappedMethods;\n        each(CLONE_PROPERTIES, function (propName) {\n          target[propName] = clone(source[propName]);\n        });\n        target._calculationInfo = extend({}, source._calculationInfo);\n      };\n\n      makeIdFromName = function (data, idx) {\n        var nameList = data._nameList;\n        var idList = data._idList;\n        var nameDimIdx = data._nameDimIdx;\n        var idDimIdx = data._idDimIdx;\n        var name = nameList[idx];\n        var id = idList[idx];\n\n        if (name == null && nameDimIdx != null) {\n          nameList[idx] = name = getIdNameFromStore(data, nameDimIdx, idx);\n        }\n\n        if (id == null && idDimIdx != null) {\n          idList[idx] = id = getIdNameFromStore(data, idDimIdx, idx);\n        }\n\n        if (id == null && name != null) {\n          var nameRepeatCount = data._nameRepeatCount;\n          var nmCnt = nameRepeatCount[name] = (nameRepeatCount[name] || 0) + 1;\n          id = name;\n\n          if (nmCnt > 1) {\n            id += '__ec__' + nmCnt;\n          }\n\n          idList[idx] = id;\n        }\n      };\n    }();\n\n    return SeriesData;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * For outside usage compat (like echarts-gl are using it).\n   */\n\n\n  function createDimensions(source, opt) {\n    return prepareSeriesDataSchema(source, opt).dimensions;\n  }\n  /**\n   * This method builds the relationship between:\n   * + \"what the coord sys or series requires (see `coordDimensions`)\",\n   * + \"what the user defines (in `encode` and `dimensions`, see `opt.dimensionsDefine` and `opt.encodeDefine`)\"\n   * + \"what the data source provids (see `source`)\".\n   *\n   * Some guess strategy will be adapted if user does not define something.\n   * If no 'value' dimension specified, the first no-named dimension will be\n   * named as 'value'.\n   *\n   * @return The results are always sorted by `storeDimIndex` asc.\n   */\n\n\n  function prepareSeriesDataSchema( // TODO: TYPE completeDimensions type\n  source, opt) {\n    if (!isSourceInstance(source)) {\n      source = createSourceFromSeriesDataOption(source);\n    }\n\n    opt = opt || {};\n    var sysDims = opt.coordDimensions || [];\n    var dimsDef = opt.dimensionsDefine || source.dimensionsDefine || [];\n    var coordDimNameMap = createHashMap();\n    var resultList = [];\n    var dimCount = getDimCount(source, sysDims, dimsDef, opt.dimensionsCount); // Try to ignore unsed dimensions if sharing a high dimension datastore\n    // 30 is an experience value.\n\n    var omitUnusedDimensions = opt.canOmitUnusedDimensions && shouldOmitUnusedDimensions(dimCount);\n    var isUsingSourceDimensionsDef = dimsDef === source.dimensionsDefine;\n    var dataDimNameMap = isUsingSourceDimensionsDef ? ensureSourceDimNameMap(source) : createDimNameMap(dimsDef);\n    var encodeDef = opt.encodeDefine;\n\n    if (!encodeDef && opt.encodeDefaulter) {\n      encodeDef = opt.encodeDefaulter(source, dimCount);\n    }\n\n    var encodeDefMap = createHashMap(encodeDef);\n    var indicesMap = new CtorInt32Array(dimCount);\n\n    for (var i = 0; i < indicesMap.length; i++) {\n      indicesMap[i] = -1;\n    }\n\n    function getResultItem(dimIdx) {\n      var idx = indicesMap[dimIdx];\n\n      if (idx < 0) {\n        var dimDefItemRaw = dimsDef[dimIdx];\n        var dimDefItem = isObject(dimDefItemRaw) ? dimDefItemRaw : {\n          name: dimDefItemRaw\n        };\n        var resultItem = new SeriesDimensionDefine();\n        var userDimName = dimDefItem.name;\n\n        if (userDimName != null && dataDimNameMap.get(userDimName) != null) {\n          // Only if `series.dimensions` is defined in option\n          // displayName, will be set, and dimension will be diplayed vertically in\n          // tooltip by default.\n          resultItem.name = resultItem.displayName = userDimName;\n        }\n\n        dimDefItem.type != null && (resultItem.type = dimDefItem.type);\n        dimDefItem.displayName != null && (resultItem.displayName = dimDefItem.displayName);\n        var newIdx = resultList.length;\n        indicesMap[dimIdx] = newIdx;\n        resultItem.storeDimIndex = dimIdx;\n        resultList.push(resultItem);\n        return resultItem;\n      }\n\n      return resultList[idx];\n    }\n\n    if (!omitUnusedDimensions) {\n      for (var i = 0; i < dimCount; i++) {\n        getResultItem(i);\n      }\n    } // Set `coordDim` and `coordDimIndex` by `encodeDefMap` and normalize `encodeDefMap`.\n\n\n    encodeDefMap.each(function (dataDimsRaw, coordDim) {\n      var dataDims = normalizeToArray(dataDimsRaw).slice(); // Note: It is allowed that `dataDims.length` is `0`, e.g., options is\n      // `{encode: {x: -1, y: 1}}`. Should not filter anything in\n      // this case.\n\n      if (dataDims.length === 1 && !isString(dataDims[0]) && dataDims[0] < 0) {\n        encodeDefMap.set(coordDim, false);\n        return;\n      }\n\n      var validDataDims = encodeDefMap.set(coordDim, []);\n      each(dataDims, function (resultDimIdxOrName, idx) {\n        // The input resultDimIdx can be dim name or index.\n        var resultDimIdx = isString(resultDimIdxOrName) ? dataDimNameMap.get(resultDimIdxOrName) : resultDimIdxOrName;\n\n        if (resultDimIdx != null && resultDimIdx < dimCount) {\n          validDataDims[idx] = resultDimIdx;\n          applyDim(getResultItem(resultDimIdx), coordDim, idx);\n        }\n      });\n    }); // Apply templetes and default order from `sysDims`.\n\n    var availDimIdx = 0;\n    each(sysDims, function (sysDimItemRaw) {\n      var coordDim;\n      var sysDimItemDimsDef;\n      var sysDimItemOtherDims;\n      var sysDimItem;\n\n      if (isString(sysDimItemRaw)) {\n        coordDim = sysDimItemRaw;\n        sysDimItem = {};\n      } else {\n        sysDimItem = sysDimItemRaw;\n        coordDim = sysDimItem.name;\n        var ordinalMeta = sysDimItem.ordinalMeta;\n        sysDimItem.ordinalMeta = null;\n        sysDimItem = extend({}, sysDimItem);\n        sysDimItem.ordinalMeta = ordinalMeta; // `coordDimIndex` should not be set directly.\n\n        sysDimItemDimsDef = sysDimItem.dimsDef;\n        sysDimItemOtherDims = sysDimItem.otherDims;\n        sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex = sysDimItem.dimsDef = sysDimItem.otherDims = null;\n      }\n\n      var dataDims = encodeDefMap.get(coordDim); // negative resultDimIdx means no need to mapping.\n\n      if (dataDims === false) {\n        return;\n      }\n\n      dataDims = normalizeToArray(dataDims); // dimensions provides default dim sequences.\n\n      if (!dataDims.length) {\n        for (var i = 0; i < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i++) {\n          while (availDimIdx < dimCount && getResultItem(availDimIdx).coordDim != null) {\n            availDimIdx++;\n          }\n\n          availDimIdx < dimCount && dataDims.push(availDimIdx++);\n        }\n      } // Apply templates.\n\n\n      each(dataDims, function (resultDimIdx, coordDimIndex) {\n        var resultItem = getResultItem(resultDimIdx); // Coordinate system has a higher priority on dim type than source.\n\n        if (isUsingSourceDimensionsDef && sysDimItem.type != null) {\n          resultItem.type = sysDimItem.type;\n        }\n\n        applyDim(defaults(resultItem, sysDimItem), coordDim, coordDimIndex);\n\n        if (resultItem.name == null && sysDimItemDimsDef) {\n          var sysDimItemDimsDefItem = sysDimItemDimsDef[coordDimIndex];\n          !isObject(sysDimItemDimsDefItem) && (sysDimItemDimsDefItem = {\n            name: sysDimItemDimsDefItem\n          });\n          resultItem.name = resultItem.displayName = sysDimItemDimsDefItem.name;\n          resultItem.defaultTooltip = sysDimItemDimsDefItem.defaultTooltip;\n        } // FIXME refactor, currently only used in case: {otherDims: {tooltip: false}}\n\n\n        sysDimItemOtherDims && defaults(resultItem.otherDims, sysDimItemOtherDims);\n      });\n    });\n\n    function applyDim(resultItem, coordDim, coordDimIndex) {\n      if (VISUAL_DIMENSIONS.get(coordDim) != null) {\n        resultItem.otherDims[coordDim] = coordDimIndex;\n      } else {\n        resultItem.coordDim = coordDim;\n        resultItem.coordDimIndex = coordDimIndex;\n        coordDimNameMap.set(coordDim, true);\n      }\n    } // Make sure the first extra dim is 'value'.\n\n\n    var generateCoord = opt.generateCoord;\n    var generateCoordCount = opt.generateCoordCount;\n    var fromZero = generateCoordCount != null;\n    generateCoordCount = generateCoord ? generateCoordCount || 1 : 0;\n    var extra = generateCoord || 'value';\n\n    function ifNoNameFillWithCoordName(resultItem) {\n      if (resultItem.name == null) {\n        // Duplication will be removed in the next step.\n        resultItem.name = resultItem.coordDim;\n      }\n    } // Set dim `name` and other `coordDim` and other props.\n\n\n    if (!omitUnusedDimensions) {\n      for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {\n        var resultItem = getResultItem(resultDimIdx);\n        var coordDim = resultItem.coordDim;\n\n        if (coordDim == null) {\n          // TODO no need to generate coordDim for isExtraCoord?\n          resultItem.coordDim = genCoordDimName(extra, coordDimNameMap, fromZero);\n          resultItem.coordDimIndex = 0; // Series specified generateCoord is using out.\n\n          if (!generateCoord || generateCoordCount <= 0) {\n            resultItem.isExtraCoord = true;\n          }\n\n          generateCoordCount--;\n        }\n\n        ifNoNameFillWithCoordName(resultItem);\n\n        if (resultItem.type == null && (guessOrdinal(source, resultDimIdx) === BE_ORDINAL.Must // Consider the case:\n        // {\n        //    dataset: {source: [\n        //        ['2001', 123],\n        //        ['2002', 456],\n        //        ...\n        //        ['The others', 987],\n        //    ]},\n        //    series: {type: 'pie'}\n        // }\n        // The first colum should better be treated as a \"ordinal\" although it\n        // might not able to be detected as an \"ordinal\" by `guessOrdinal`.\n        || resultItem.isExtraCoord && (resultItem.otherDims.itemName != null || resultItem.otherDims.seriesName != null))) {\n          resultItem.type = 'ordinal';\n        }\n      }\n    } else {\n      each(resultList, function (resultItem) {\n        // PENDING: guessOrdinal or let user specify type: 'ordinal' manually?\n        ifNoNameFillWithCoordName(resultItem);\n      }); // Sort dimensions: there are some rule that use the last dim as label,\n      // and for some latter travel process easier.\n\n      resultList.sort(function (item0, item1) {\n        return item0.storeDimIndex - item1.storeDimIndex;\n      });\n    }\n\n    removeDuplication(resultList);\n    return new SeriesDataSchema({\n      source: source,\n      dimensions: resultList,\n      fullDimensionCount: dimCount,\n      dimensionOmitted: omitUnusedDimensions\n    });\n  }\n\n  function removeDuplication(result) {\n    var duplicationMap = createHashMap();\n\n    for (var i = 0; i < result.length; i++) {\n      var dim = result[i];\n      var dimOriginalName = dim.name;\n      var count = duplicationMap.get(dimOriginalName) || 0;\n\n      if (count > 0) {\n        // Starts from 0.\n        dim.name = dimOriginalName + (count - 1);\n      }\n\n      count++;\n      duplicationMap.set(dimOriginalName, count);\n    }\n  } // ??? TODO\n  // Originally detect dimCount by data[0]. Should we\n  // optimize it to only by sysDims and dimensions and encode.\n  // So only necessary dims will be initialized.\n  // But\n  // (1) custom series should be considered. where other dims\n  // may be visited.\n  // (2) sometimes user need to calcualte bubble size or use visualMap\n  // on other dimensions besides coordSys needed.\n  // So, dims that is not used by system, should be shared in data store?\n\n\n  function getDimCount(source, sysDims, dimsDef, optDimCount) {\n    // Note that the result dimCount should not small than columns count\n    // of data, otherwise `dataDimNameMap` checking will be incorrect.\n    var dimCount = Math.max(source.dimensionsDetectedCount || 1, sysDims.length, dimsDef.length, optDimCount || 0);\n    each(sysDims, function (sysDimItem) {\n      var sysDimItemDimsDef;\n\n      if (isObject(sysDimItem) && (sysDimItemDimsDef = sysDimItem.dimsDef)) {\n        dimCount = Math.max(dimCount, sysDimItemDimsDef.length);\n      }\n    });\n    return dimCount;\n  }\n\n  function genCoordDimName(name, map$$1, fromZero) {\n    var mapData = map$$1.data;\n\n    if (fromZero || mapData.hasOwnProperty(name)) {\n      var i = 0;\n\n      while (mapData.hasOwnProperty(name + i)) {\n        i++;\n      }\n\n      name += i;\n    }\n\n    map$$1.set(name, true);\n    return name;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Helper for model references.\n   * There are many manners to refer axis/coordSys.\n   */\n  // TODO\n  // merge relevant logic to this file?\n  // check: \"modelHelper\" of tooltip and \"BrushTargetManager\".\n\n  /**\n   * @class\n   * For example:\n   * {\n   *     coordSysName: 'cartesian2d',\n   *     coordSysDims: ['x', 'y', ...],\n   *     axisMap: HashMap({\n   *         x: xAxisModel,\n   *         y: yAxisModel\n   *     }),\n   *     categoryAxisMap: HashMap({\n   *         x: xAxisModel,\n   *         y: undefined\n   *     }),\n   *     // The index of the first category axis in `coordSysDims`.\n   *     // `null/undefined` means no category axis exists.\n   *     firstCategoryDimIndex: 1,\n   *     // To replace user specified encode.\n   * }\n   */\n\n\n  var CoordSysInfo =\n  /** @class */\n  function () {\n    function CoordSysInfo(coordSysName) {\n      this.coordSysDims = [];\n      this.axisMap = createHashMap();\n      this.categoryAxisMap = createHashMap();\n      this.coordSysName = coordSysName;\n    }\n\n    return CoordSysInfo;\n  }();\n\n  function getCoordSysInfoBySeries(seriesModel) {\n    var coordSysName = seriesModel.get('coordinateSystem');\n    var result = new CoordSysInfo(coordSysName);\n    var fetch = fetchers[coordSysName];\n\n    if (fetch) {\n      fetch(seriesModel, result, result.axisMap, result.categoryAxisMap);\n      return result;\n    }\n  }\n\n  var fetchers = {\n    cartesian2d: function (seriesModel, result, axisMap, categoryAxisMap) {\n      var xAxisModel = seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n      var yAxisModel = seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n      {\n        if (!xAxisModel) {\n          throw new Error('xAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('xAxisId'), 0) + '\" not found');\n        }\n\n        if (!yAxisModel) {\n          throw new Error('yAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('yAxisId'), 0) + '\" not found');\n        }\n      }\n      result.coordSysDims = ['x', 'y'];\n      axisMap.set('x', xAxisModel);\n      axisMap.set('y', yAxisModel);\n\n      if (isCategory(xAxisModel)) {\n        categoryAxisMap.set('x', xAxisModel);\n        result.firstCategoryDimIndex = 0;\n      }\n\n      if (isCategory(yAxisModel)) {\n        categoryAxisMap.set('y', yAxisModel);\n        result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n      }\n    },\n    singleAxis: function (seriesModel, result, axisMap, categoryAxisMap) {\n      var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n      {\n        if (!singleAxisModel) {\n          throw new Error('singleAxis should be specified.');\n        }\n      }\n      result.coordSysDims = ['single'];\n      axisMap.set('single', singleAxisModel);\n\n      if (isCategory(singleAxisModel)) {\n        categoryAxisMap.set('single', singleAxisModel);\n        result.firstCategoryDimIndex = 0;\n      }\n    },\n    polar: function (seriesModel, result, axisMap, categoryAxisMap) {\n      var polarModel = seriesModel.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n      var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n      var angleAxisModel = polarModel.findAxisModel('angleAxis');\n      {\n        if (!angleAxisModel) {\n          throw new Error('angleAxis option not found');\n        }\n\n        if (!radiusAxisModel) {\n          throw new Error('radiusAxis option not found');\n        }\n      }\n      result.coordSysDims = ['radius', 'angle'];\n      axisMap.set('radius', radiusAxisModel);\n      axisMap.set('angle', angleAxisModel);\n\n      if (isCategory(radiusAxisModel)) {\n        categoryAxisMap.set('radius', radiusAxisModel);\n        result.firstCategoryDimIndex = 0;\n      }\n\n      if (isCategory(angleAxisModel)) {\n        categoryAxisMap.set('angle', angleAxisModel);\n        result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n      }\n    },\n    geo: function (seriesModel, result, axisMap, categoryAxisMap) {\n      result.coordSysDims = ['lng', 'lat'];\n    },\n    parallel: function (seriesModel, result, axisMap, categoryAxisMap) {\n      var ecModel = seriesModel.ecModel;\n      var parallelModel = ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n      var coordSysDims = result.coordSysDims = parallelModel.dimensions.slice();\n      each(parallelModel.parallelAxisIndex, function (axisIndex, index) {\n        var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n        var axisDim = coordSysDims[index];\n        axisMap.set(axisDim, axisModel);\n\n        if (isCategory(axisModel)) {\n          categoryAxisMap.set(axisDim, axisModel);\n\n          if (result.firstCategoryDimIndex == null) {\n            result.firstCategoryDimIndex = index;\n          }\n        }\n      });\n    }\n  };\n\n  function isCategory(axisModel) {\n    return axisModel.get('type') === 'category';\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Note that it is too complicated to support 3d stack by value\n   * (have to create two-dimension inverted index), so in 3d case\n   * we just support that stacked by index.\n   *\n   * @param seriesModel\n   * @param dimensionsInput The same as the input of <module:echarts/data/SeriesData>.\n   *        The input will be modified.\n   * @param opt\n   * @param opt.stackedCoordDimension Specify a coord dimension if needed.\n   * @param opt.byIndex=false\n   * @return calculationInfo\n   * {\n   *     stackedDimension: string\n   *     stackedByDimension: string\n   *     isStackedByIndex: boolean\n   *     stackedOverDimension: string\n   *     stackResultDimension: string\n   * }\n   */\n\n\n  function enableDataStack(seriesModel, dimensionsInput, opt) {\n    opt = opt || {};\n    var byIndex = opt.byIndex;\n    var stackedCoordDimension = opt.stackedCoordDimension;\n    var dimensionDefineList;\n    var schema;\n    var store;\n\n    if (isLegacyDimensionsInput(dimensionsInput)) {\n      dimensionDefineList = dimensionsInput;\n    } else {\n      schema = dimensionsInput.schema;\n      dimensionDefineList = schema.dimensions;\n      store = dimensionsInput.store;\n    } // Compatibal: when `stack` is set as '', do not stack.\n\n\n    var mayStack = !!(seriesModel && seriesModel.get('stack'));\n    var stackedByDimInfo;\n    var stackedDimInfo;\n    var stackResultDimension;\n    var stackedOverDimension;\n    each(dimensionDefineList, function (dimensionInfo, index) {\n      if (isString(dimensionInfo)) {\n        dimensionDefineList[index] = dimensionInfo = {\n          name: dimensionInfo\n        };\n      }\n\n      if (mayStack && !dimensionInfo.isExtraCoord) {\n        // Find the first ordinal dimension as the stackedByDimInfo.\n        if (!byIndex && !stackedByDimInfo && dimensionInfo.ordinalMeta) {\n          stackedByDimInfo = dimensionInfo;\n        } // Find the first stackable dimension as the stackedDimInfo.\n\n\n        if (!stackedDimInfo && dimensionInfo.type !== 'ordinal' && dimensionInfo.type !== 'time' && (!stackedCoordDimension || stackedCoordDimension === dimensionInfo.coordDim)) {\n          stackedDimInfo = dimensionInfo;\n        }\n      }\n    });\n\n    if (stackedDimInfo && !byIndex && !stackedByDimInfo) {\n      // Compatible with previous design, value axis (time axis) only stack by index.\n      // It may make sense if the user provides elaborately constructed data.\n      byIndex = true;\n    } // Add stack dimension, they can be both calculated by coordinate system in `unionExtent`.\n    // That put stack logic in List is for using conveniently in echarts extensions, but it\n    // might not be a good way.\n\n\n    if (stackedDimInfo) {\n      // Use a weird name that not duplicated with other names.\n      // Also need to use seriesModel.id as postfix because different\n      // series may share same data store. The stack dimension needs to be distinguished.\n      stackResultDimension = '__\\0ecstackresult_' + seriesModel.id;\n      stackedOverDimension = '__\\0ecstackedover_' + seriesModel.id; // Create inverted index to fast query index by value.\n\n      if (stackedByDimInfo) {\n        stackedByDimInfo.createInvertedIndices = true;\n      }\n\n      var stackedDimCoordDim_1 = stackedDimInfo.coordDim;\n      var stackedDimType = stackedDimInfo.type;\n      var stackedDimCoordIndex_1 = 0;\n      each(dimensionDefineList, function (dimensionInfo) {\n        if (dimensionInfo.coordDim === stackedDimCoordDim_1) {\n          stackedDimCoordIndex_1++;\n        }\n      });\n      var stackedOverDimensionDefine = {\n        name: stackResultDimension,\n        coordDim: stackedDimCoordDim_1,\n        coordDimIndex: stackedDimCoordIndex_1,\n        type: stackedDimType,\n        isExtraCoord: true,\n        isCalculationCoord: true,\n        storeDimIndex: dimensionDefineList.length\n      };\n      var stackResultDimensionDefine = {\n        name: stackedOverDimension,\n        // This dimension contains stack base (generally, 0), so do not set it as\n        // `stackedDimCoordDim` to avoid extent calculation, consider log scale.\n        coordDim: stackedOverDimension,\n        coordDimIndex: stackedDimCoordIndex_1 + 1,\n        type: stackedDimType,\n        isExtraCoord: true,\n        isCalculationCoord: true,\n        storeDimIndex: dimensionDefineList.length + 1\n      };\n\n      if (schema) {\n        if (store) {\n          stackedOverDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackedOverDimension, stackedDimType);\n          stackResultDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackResultDimension, stackedDimType);\n        }\n\n        schema.appendCalculationDimension(stackedOverDimensionDefine);\n        schema.appendCalculationDimension(stackResultDimensionDefine);\n      } else {\n        dimensionDefineList.push(stackedOverDimensionDefine);\n        dimensionDefineList.push(stackResultDimensionDefine);\n      }\n    }\n\n    return {\n      stackedDimension: stackedDimInfo && stackedDimInfo.name,\n      stackedByDimension: stackedByDimInfo && stackedByDimInfo.name,\n      isStackedByIndex: byIndex,\n      stackedOverDimension: stackedOverDimension,\n      stackResultDimension: stackResultDimension\n    };\n  }\n\n  function isLegacyDimensionsInput(dimensionsInput) {\n    return !isSeriesDataSchema(dimensionsInput.schema);\n  }\n\n  function isDimensionStacked(data, stackedDim) {\n    // Each single series only maps to one pair of axis. So we do not need to\n    // check stackByDim, whatever stacked by a dimension or stacked by index.\n    return !!stackedDim && stackedDim === data.getCalculationInfo('stackedDimension');\n  }\n\n  function getStackedDimension(data, targetDim) {\n    return isDimensionStacked(data, targetDim) ? data.getCalculationInfo('stackResultDimension') : targetDim;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function getCoordSysDimDefs(seriesModel, coordSysInfo) {\n    var coordSysName = seriesModel.get('coordinateSystem');\n    var registeredCoordSys = CoordinateSystemManager.get(coordSysName);\n    var coordSysDimDefs;\n\n    if (coordSysInfo && coordSysInfo.coordSysDims) {\n      coordSysDimDefs = map(coordSysInfo.coordSysDims, function (dim) {\n        var dimInfo = {\n          name: dim\n        };\n        var axisModel = coordSysInfo.axisMap.get(dim);\n\n        if (axisModel) {\n          var axisType = axisModel.get('type');\n          dimInfo.type = getDimensionTypeByAxis(axisType);\n        }\n\n        return dimInfo;\n      });\n    }\n\n    if (!coordSysDimDefs) {\n      // Get dimensions from registered coordinate system\n      coordSysDimDefs = registeredCoordSys && (registeredCoordSys.getDimensionsInfo ? registeredCoordSys.getDimensionsInfo() : registeredCoordSys.dimensions.slice()) || ['x', 'y'];\n    }\n\n    return coordSysDimDefs;\n  }\n\n  function injectOrdinalMeta(dimInfoList, createInvertedIndices, coordSysInfo) {\n    var firstCategoryDimIndex;\n    var hasNameEncode;\n    coordSysInfo && each(dimInfoList, function (dimInfo, dimIndex) {\n      var coordDim = dimInfo.coordDim;\n      var categoryAxisModel = coordSysInfo.categoryAxisMap.get(coordDim);\n\n      if (categoryAxisModel) {\n        if (firstCategoryDimIndex == null) {\n          firstCategoryDimIndex = dimIndex;\n        }\n\n        dimInfo.ordinalMeta = categoryAxisModel.getOrdinalMeta();\n\n        if (createInvertedIndices) {\n          dimInfo.createInvertedIndices = true;\n        }\n      }\n\n      if (dimInfo.otherDims.itemName != null) {\n        hasNameEncode = true;\n      }\n    });\n\n    if (!hasNameEncode && firstCategoryDimIndex != null) {\n      dimInfoList[firstCategoryDimIndex].otherDims.itemName = 0;\n    }\n\n    return firstCategoryDimIndex;\n  }\n  /**\n   * Caution: there are side effects to `sourceManager` in this method.\n   * Should better only be called in `Series['getInitialData']`.\n   */\n\n\n  function createSeriesData(sourceRaw, seriesModel, opt) {\n    opt = opt || {};\n    var sourceManager = seriesModel.getSourceManager();\n    var source;\n    var isOriginalSource = false;\n\n    if (sourceRaw) {\n      isOriginalSource = true;\n      source = createSourceFromSeriesDataOption(sourceRaw);\n    } else {\n      source = sourceManager.getSource(); // Is series.data. not dataset.\n\n      isOriginalSource = source.sourceFormat === SOURCE_FORMAT_ORIGINAL;\n    }\n\n    var coordSysInfo = getCoordSysInfoBySeries(seriesModel);\n    var coordSysDimDefs = getCoordSysDimDefs(seriesModel, coordSysInfo);\n    var useEncodeDefaulter = opt.useEncodeDefaulter;\n    var encodeDefaulter = isFunction(useEncodeDefaulter) ? useEncodeDefaulter : useEncodeDefaulter ? curry(makeSeriesEncodeForAxisCoordSys, coordSysDimDefs, seriesModel) : null;\n    var createDimensionOptions = {\n      coordDimensions: coordSysDimDefs,\n      generateCoord: opt.generateCoord,\n      encodeDefine: seriesModel.getEncode(),\n      encodeDefaulter: encodeDefaulter,\n      canOmitUnusedDimensions: !isOriginalSource\n    };\n    var schema = prepareSeriesDataSchema(source, createDimensionOptions);\n    var firstCategoryDimIndex = injectOrdinalMeta(schema.dimensions, opt.createInvertedIndices, coordSysInfo);\n    var store = !isOriginalSource ? sourceManager.getSharedDataStore(schema) : null;\n    var stackCalculationInfo = enableDataStack(seriesModel, {\n      schema: schema,\n      store: store\n    });\n    var data = new SeriesData(schema, seriesModel);\n    data.setCalculationInfo(stackCalculationInfo);\n    var dimValueGetter = firstCategoryDimIndex != null && isNeedCompleteOrdinalData(source) ? function (itemOpt, dimName, dataIndex, dimIndex) {\n      // Use dataIndex as ordinal value in categoryAxis\n      return dimIndex === firstCategoryDimIndex ? dataIndex : this.defaultDimValueGetter(itemOpt, dimName, dataIndex, dimIndex);\n    } : null;\n    data.hasItemOption = false;\n    data.initData( // Try to reuse the data store in sourceManager if using dataset.\n    isOriginalSource ? source : store, null, dimValueGetter);\n    return data;\n  }\n\n  function isNeedCompleteOrdinalData(source) {\n    if (source.sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n      var sampleItem = firstDataNotNull(source.data || []);\n      return !isArray(getDataItemValue(sampleItem));\n    }\n  }\n\n  function firstDataNotNull(arr) {\n    var i = 0;\n\n    while (i < arr.length && arr[i] == null) {\n      i++;\n    }\n\n    return arr[i];\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var Scale =\n  /** @class */\n  function () {\n    function Scale(setting) {\n      this._setting = setting || {};\n      this._extent = [Infinity, -Infinity];\n    }\n\n    Scale.prototype.getSetting = function (name) {\n      return this._setting[name];\n    };\n    /**\n     * Set extent from data\n     */\n\n\n    Scale.prototype.unionExtent = function (other) {\n      var extent = this._extent;\n      other[0] < extent[0] && (extent[0] = other[0]);\n      other[1] > extent[1] && (extent[1] = other[1]); // not setExtent because in log axis it may transformed to power\n      // this.setExtent(extent[0], extent[1]);\n    };\n    /**\n     * Set extent from data\n     */\n\n\n    Scale.prototype.unionExtentFromData = function (data, dim) {\n      this.unionExtent(data.getApproximateExtent(dim));\n    };\n    /**\n     * Get extent\n     *\n     * Extent is always in increase order.\n     */\n\n\n    Scale.prototype.getExtent = function () {\n      return this._extent.slice();\n    };\n    /**\n     * Set extent\n     */\n\n\n    Scale.prototype.setExtent = function (start, end) {\n      var thisExtent = this._extent;\n\n      if (!isNaN(start)) {\n        thisExtent[0] = start;\n      }\n\n      if (!isNaN(end)) {\n        thisExtent[1] = end;\n      }\n    };\n    /**\n     * If value is in extent range\n     */\n\n\n    Scale.prototype.isInExtentRange = function (value) {\n      return this._extent[0] <= value && this._extent[1] >= value;\n    };\n    /**\n     * When axis extent depends on data and no data exists,\n     * axis ticks should not be drawn, which is named 'blank'.\n     */\n\n\n    Scale.prototype.isBlank = function () {\n      return this._isBlank;\n    };\n    /**\n     * When axis extent depends on data and no data exists,\n     * axis ticks should not be drawn, which is named 'blank'.\n     */\n\n\n    Scale.prototype.setBlank = function (isBlank) {\n      this._isBlank = isBlank;\n    };\n\n    return Scale;\n  }();\n\n  enableClassManagement(Scale);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var uidBase = 0;\n\n  var OrdinalMeta =\n  /** @class */\n  function () {\n    function OrdinalMeta(opt) {\n      this.categories = opt.categories || [];\n      this._needCollect = opt.needCollect;\n      this._deduplication = opt.deduplication;\n      this.uid = ++uidBase;\n    }\n\n    OrdinalMeta.createByAxisModel = function (axisModel) {\n      var option = axisModel.option;\n      var data = option.data;\n      var categories = data && map(data, getName);\n      return new OrdinalMeta({\n        categories: categories,\n        needCollect: !categories,\n        // deduplication is default in axis.\n        deduplication: option.dedplication !== false\n      });\n    };\n\n    OrdinalMeta.prototype.getOrdinal = function (category) {\n      // @ts-ignore\n      return this._getOrCreateMap().get(category);\n    };\n    /**\n     * @return The ordinal. If not found, return NaN.\n     */\n\n\n    OrdinalMeta.prototype.parseAndCollect = function (category) {\n      var index;\n      var needCollect = this._needCollect; // The value of category dim can be the index of the given category set.\n      // This feature is only supported when !needCollect, because we should\n      // consider a common case: a value is 2017, which is a number but is\n      // expected to be tread as a category. This case usually happen in dataset,\n      // where it happent to be no need of the index feature.\n\n      if (!isString(category) && !needCollect) {\n        return category;\n      } // Optimize for the scenario:\n      // category is ['2012-01-01', '2012-01-02', ...], where the input\n      // data has been ensured not duplicate and is large data.\n      // Notice, if a dataset dimension provide categroies, usually echarts\n      // should remove duplication except user tell echarts dont do that\n      // (set axis.deduplication = false), because echarts do not know whether\n      // the values in the category dimension has duplication (consider the\n      // parallel-aqi example)\n\n\n      if (needCollect && !this._deduplication) {\n        index = this.categories.length;\n        this.categories[index] = category;\n        return index;\n      }\n\n      var map$$1 = this._getOrCreateMap(); // @ts-ignore\n\n\n      index = map$$1.get(category);\n\n      if (index == null) {\n        if (needCollect) {\n          index = this.categories.length;\n          this.categories[index] = category; // @ts-ignore\n\n          map$$1.set(category, index);\n        } else {\n          index = NaN;\n        }\n      }\n\n      return index;\n    }; // Consider big data, do not create map until needed.\n\n\n    OrdinalMeta.prototype._getOrCreateMap = function () {\n      return this._map || (this._map = createHashMap(this.categories));\n    };\n\n    return OrdinalMeta;\n  }();\n\n  function getName(obj) {\n    if (isObject(obj) && obj.value != null) {\n      return obj.value;\n    } else {\n      return obj + '';\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function isValueNice(val) {\n    var exp10 = Math.pow(10, quantityExponent(Math.abs(val)));\n    var f = Math.abs(val / exp10);\n    return f === 0 || f === 1 || f === 2 || f === 3 || f === 5;\n  }\n\n  function isIntervalOrLogScale(scale) {\n    return scale.type === 'interval' || scale.type === 'log';\n  }\n  /**\n   * @param extent Both extent[0] and extent[1] should be valid number.\n   *               Should be extent[0] < extent[1].\n   * @param splitNumber splitNumber should be >= 1.\n   */\n\n\n  function intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval) {\n    var result = {};\n    var span = extent[1] - extent[0];\n    var interval = result.interval = nice(span / splitNumber, true);\n\n    if (minInterval != null && interval < minInterval) {\n      interval = result.interval = minInterval;\n    }\n\n    if (maxInterval != null && interval > maxInterval) {\n      interval = result.interval = maxInterval;\n    } // Tow more digital for tick.\n\n\n    var precision = result.intervalPrecision = getIntervalPrecision(interval); // Niced extent inside original extent\n\n    var niceTickExtent = result.niceTickExtent = [round(Math.ceil(extent[0] / interval) * interval, precision), round(Math.floor(extent[1] / interval) * interval, precision)];\n    fixExtent(niceTickExtent, extent);\n    return result;\n  }\n\n  function increaseInterval(interval) {\n    var exp10 = Math.pow(10, quantityExponent(interval)); // Increase interval\n\n    var f = interval / exp10;\n\n    if (!f) {\n      f = 1;\n    } else if (f === 2) {\n      f = 3;\n    } else if (f === 3) {\n      f = 5;\n    } else {\n      // f is 1 or 5\n      f *= 2;\n    }\n\n    return round(f * exp10);\n  }\n  /**\n   * @return interval precision\n   */\n\n\n  function getIntervalPrecision(interval) {\n    // Tow more digital for tick.\n    return getPrecision(interval) + 2;\n  }\n\n  function clamp(niceTickExtent, idx, extent) {\n    niceTickExtent[idx] = Math.max(Math.min(niceTickExtent[idx], extent[1]), extent[0]);\n  } // In some cases (e.g., splitNumber is 1), niceTickExtent may be out of extent.\n\n\n  function fixExtent(niceTickExtent, extent) {\n    !isFinite(niceTickExtent[0]) && (niceTickExtent[0] = extent[0]);\n    !isFinite(niceTickExtent[1]) && (niceTickExtent[1] = extent[1]);\n    clamp(niceTickExtent, 0, extent);\n    clamp(niceTickExtent, 1, extent);\n\n    if (niceTickExtent[0] > niceTickExtent[1]) {\n      niceTickExtent[0] = niceTickExtent[1];\n    }\n  }\n\n  function contain$1(val, extent) {\n    return val >= extent[0] && val <= extent[1];\n  }\n\n  function normalize$1(val, extent) {\n    if (extent[1] === extent[0]) {\n      return 0.5;\n    }\n\n    return (val - extent[0]) / (extent[1] - extent[0]);\n  }\n\n  function scale$2(val, extent) {\n    return val * (extent[1] - extent[0]) + extent[0];\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Linear continuous scale\n   * http://en.wikipedia.org/wiki/Level_of_measurement\n   */\n  // FIXME only one data\n\n\n  var OrdinalScale =\n  /** @class */\n  function (_super) {\n    __extends(OrdinalScale, _super);\n\n    function OrdinalScale(setting) {\n      var _this = _super.call(this, setting) || this;\n\n      _this.type = 'ordinal';\n\n      var ordinalMeta = _this.getSetting('ordinalMeta'); // Caution: Should not use instanceof, consider ec-extensions using\n      // import approach to get OrdinalMeta class.\n\n\n      if (!ordinalMeta) {\n        ordinalMeta = new OrdinalMeta({});\n      }\n\n      if (isArray(ordinalMeta)) {\n        ordinalMeta = new OrdinalMeta({\n          categories: map(ordinalMeta, function (item) {\n            return isObject(item) ? item.value : item;\n          })\n        });\n      }\n\n      _this._ordinalMeta = ordinalMeta;\n      _this._extent = _this.getSetting('extent') || [0, ordinalMeta.categories.length - 1];\n      return _this;\n    }\n\n    OrdinalScale.prototype.parse = function (val) {\n      // Caution: Math.round(null) will return `0` rather than `NaN`\n      if (val == null) {\n        return NaN;\n      }\n\n      return isString(val) ? this._ordinalMeta.getOrdinal(val) // val might be float.\n      : Math.round(val);\n    };\n\n    OrdinalScale.prototype.contain = function (rank) {\n      rank = this.parse(rank);\n      return contain$1(rank, this._extent) && this._ordinalMeta.categories[rank] != null;\n    };\n    /**\n     * Normalize given rank or name to linear [0, 1]\n     * @param val raw ordinal number.\n     * @return normalized value in [0, 1].\n     */\n\n\n    OrdinalScale.prototype.normalize = function (val) {\n      val = this._getTickNumber(this.parse(val));\n      return normalize$1(val, this._extent);\n    };\n    /**\n     * @param val normalized value in [0, 1].\n     * @return raw ordinal number.\n     */\n\n\n    OrdinalScale.prototype.scale = function (val) {\n      val = Math.round(scale$2(val, this._extent));\n      return this.getRawOrdinalNumber(val);\n    };\n\n    OrdinalScale.prototype.getTicks = function () {\n      var ticks = [];\n      var extent = this._extent;\n      var rank = extent[0];\n\n      while (rank <= extent[1]) {\n        ticks.push({\n          value: rank\n        });\n        rank++;\n      }\n\n      return ticks;\n    };\n\n    OrdinalScale.prototype.getMinorTicks = function (splitNumber) {\n      // Not support.\n      return;\n    };\n    /**\n     * @see `Ordinal['_ordinalNumbersByTick']`\n     */\n\n\n    OrdinalScale.prototype.setSortInfo = function (info) {\n      if (info == null) {\n        this._ordinalNumbersByTick = this._ticksByOrdinalNumber = null;\n        return;\n      }\n\n      var infoOrdinalNumbers = info.ordinalNumbers;\n      var ordinalsByTick = this._ordinalNumbersByTick = [];\n      var ticksByOrdinal = this._ticksByOrdinalNumber = []; // Unnecessary support negative tick in `realtimeSort`.\n\n      var tickNum = 0;\n      var allCategoryLen = this._ordinalMeta.categories.length;\n\n      for (var len = Math.min(allCategoryLen, infoOrdinalNumbers.length); tickNum < len; ++tickNum) {\n        var ordinalNumber = infoOrdinalNumbers[tickNum];\n        ordinalsByTick[tickNum] = ordinalNumber;\n        ticksByOrdinal[ordinalNumber] = tickNum;\n      } // Handle that `series.data` only covers part of the `axis.category.data`.\n\n\n      var unusedOrdinal = 0;\n\n      for (; tickNum < allCategoryLen; ++tickNum) {\n        while (ticksByOrdinal[unusedOrdinal] != null) {\n          unusedOrdinal++;\n        }\n\n        ordinalsByTick.push(unusedOrdinal);\n        ticksByOrdinal[unusedOrdinal] = tickNum;\n      }\n    };\n\n    OrdinalScale.prototype._getTickNumber = function (ordinal) {\n      var ticksByOrdinalNumber = this._ticksByOrdinalNumber; // also support ordinal out of range of `ordinalMeta.categories.length`,\n      // where ordinal numbers are used as tick value directly.\n\n      return ticksByOrdinalNumber && ordinal >= 0 && ordinal < ticksByOrdinalNumber.length ? ticksByOrdinalNumber[ordinal] : ordinal;\n    };\n    /**\n     * @usage\n     * ```js\n     * const ordinalNumber = ordinalScale.getRawOrdinalNumber(tickVal);\n     *\n     * // case0\n     * const rawOrdinalValue = axisModel.getCategories()[ordinalNumber];\n     * // case1\n     * const rawOrdinalValue = this._ordinalMeta.categories[ordinalNumber];\n     * // case2\n     * const coord = axis.dataToCoord(ordinalNumber);\n     * ```\n     *\n     * @param {OrdinalNumber} tickNumber index of display\n     */\n\n\n    OrdinalScale.prototype.getRawOrdinalNumber = function (tickNumber) {\n      var ordinalNumbersByTick = this._ordinalNumbersByTick; // tickNumber may be out of range, e.g., when axis max is larger than `ordinalMeta.categories.length`.,\n      // where ordinal numbers are used as tick value directly.\n\n      return ordinalNumbersByTick && tickNumber >= 0 && tickNumber < ordinalNumbersByTick.length ? ordinalNumbersByTick[tickNumber] : tickNumber;\n    };\n    /**\n     * Get item on tick\n     */\n\n\n    OrdinalScale.prototype.getLabel = function (tick) {\n      if (!this.isBlank()) {\n        var ordinalNumber = this.getRawOrdinalNumber(tick.value);\n        var cateogry = this._ordinalMeta.categories[ordinalNumber]; // Note that if no data, ordinalMeta.categories is an empty array.\n        // Return empty if it's not exist.\n\n        return cateogry == null ? '' : cateogry + '';\n      }\n    };\n\n    OrdinalScale.prototype.count = function () {\n      return this._extent[1] - this._extent[0] + 1;\n    };\n\n    OrdinalScale.prototype.unionExtentFromData = function (data, dim) {\n      this.unionExtent(data.getApproximateExtent(dim));\n    };\n    /**\n     * @override\n     * If value is in extent range\n     */\n\n\n    OrdinalScale.prototype.isInExtentRange = function (value) {\n      value = this._getTickNumber(value);\n      return this._extent[0] <= value && this._extent[1] >= value;\n    };\n\n    OrdinalScale.prototype.getOrdinalMeta = function () {\n      return this._ordinalMeta;\n    };\n\n    OrdinalScale.prototype.calcNiceTicks = function () {};\n\n    OrdinalScale.prototype.calcNiceExtent = function () {};\n\n    OrdinalScale.type = 'ordinal';\n    return OrdinalScale;\n  }(Scale);\n\n  Scale.registerClass(OrdinalScale);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var roundNumber = round;\n\n  var IntervalScale =\n  /** @class */\n  function (_super) {\n    __extends(IntervalScale, _super);\n\n    function IntervalScale() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = 'interval'; // Step is calculated in adjustExtent.\n\n      _this._interval = 0;\n      _this._intervalPrecision = 2;\n      return _this;\n    }\n\n    IntervalScale.prototype.parse = function (val) {\n      return val;\n    };\n\n    IntervalScale.prototype.contain = function (val) {\n      return contain$1(val, this._extent);\n    };\n\n    IntervalScale.prototype.normalize = function (val) {\n      return normalize$1(val, this._extent);\n    };\n\n    IntervalScale.prototype.scale = function (val) {\n      return scale$2(val, this._extent);\n    };\n\n    IntervalScale.prototype.setExtent = function (start, end) {\n      var thisExtent = this._extent; // start,end may be a Number like '25',so...\n\n      if (!isNaN(start)) {\n        thisExtent[0] = parseFloat(start);\n      }\n\n      if (!isNaN(end)) {\n        thisExtent[1] = parseFloat(end);\n      }\n    };\n\n    IntervalScale.prototype.unionExtent = function (other) {\n      var extent = this._extent;\n      other[0] < extent[0] && (extent[0] = other[0]);\n      other[1] > extent[1] && (extent[1] = other[1]); // unionExtent may called by it's sub classes\n\n      this.setExtent(extent[0], extent[1]);\n    };\n\n    IntervalScale.prototype.getInterval = function () {\n      return this._interval;\n    };\n\n    IntervalScale.prototype.setInterval = function (interval) {\n      this._interval = interval; // Dropped auto calculated niceExtent and use user setted extent\n      // We assume user wan't to set both interval, min, max to get a better result\n\n      this._niceExtent = this._extent.slice();\n      this._intervalPrecision = getIntervalPrecision(interval);\n    };\n    /**\n     * @param expandToNicedExtent Whether expand the ticks to niced extent.\n     */\n\n\n    IntervalScale.prototype.getTicks = function (expandToNicedExtent) {\n      var interval = this._interval;\n      var extent = this._extent;\n      var niceTickExtent = this._niceExtent;\n      var intervalPrecision = this._intervalPrecision;\n      var ticks = []; // If interval is 0, return [];\n\n      if (!interval) {\n        return ticks;\n      } // Consider this case: using dataZoom toolbox, zoom and zoom.\n\n\n      var safeLimit = 10000;\n\n      if (extent[0] < niceTickExtent[0]) {\n        if (expandToNicedExtent) {\n          ticks.push({\n            value: roundNumber(niceTickExtent[0] - interval, intervalPrecision)\n          });\n        } else {\n          ticks.push({\n            value: extent[0]\n          });\n        }\n      }\n\n      var tick = niceTickExtent[0];\n\n      while (tick <= niceTickExtent[1]) {\n        ticks.push({\n          value: tick\n        }); // Avoid rounding error\n\n        tick = roundNumber(tick + interval, intervalPrecision);\n\n        if (tick === ticks[ticks.length - 1].value) {\n          // Consider out of safe float point, e.g.,\n          // -3711126.9907707 + 2e-10 === -3711126.9907707\n          break;\n        }\n\n        if (ticks.length > safeLimit) {\n          return [];\n        }\n      } // Consider this case: the last item of ticks is smaller\n      // than niceTickExtent[1] and niceTickExtent[1] === extent[1].\n\n\n      var lastNiceTick = ticks.length ? ticks[ticks.length - 1].value : niceTickExtent[1];\n\n      if (extent[1] > lastNiceTick) {\n        if (expandToNicedExtent) {\n          ticks.push({\n            value: roundNumber(lastNiceTick + interval, intervalPrecision)\n          });\n        } else {\n          ticks.push({\n            value: extent[1]\n          });\n        }\n      }\n\n      return ticks;\n    };\n\n    IntervalScale.prototype.getMinorTicks = function (splitNumber) {\n      var ticks = this.getTicks(true);\n      var minorTicks = [];\n      var extent = this.getExtent();\n\n      for (var i = 1; i < ticks.length; i++) {\n        var nextTick = ticks[i];\n        var prevTick = ticks[i - 1];\n        var count = 0;\n        var minorTicksGroup = [];\n        var interval = nextTick.value - prevTick.value;\n        var minorInterval = interval / splitNumber;\n\n        while (count < splitNumber - 1) {\n          var minorTick = roundNumber(prevTick.value + (count + 1) * minorInterval); // For the first and last interval. The count may be less than splitNumber.\n\n          if (minorTick > extent[0] && minorTick < extent[1]) {\n            minorTicksGroup.push(minorTick);\n          }\n\n          count++;\n        }\n\n        minorTicks.push(minorTicksGroup);\n      }\n\n      return minorTicks;\n    };\n    /**\n     * @param opt.precision If 'auto', use nice presision.\n     * @param opt.pad returns 1.50 but not 1.5 if precision is 2.\n     */\n\n\n    IntervalScale.prototype.getLabel = function (data, opt) {\n      if (data == null) {\n        return '';\n      }\n\n      var precision = opt && opt.precision;\n\n      if (precision == null) {\n        precision = getPrecision(data.value) || 0;\n      } else if (precision === 'auto') {\n        // Should be more precise then tick.\n        precision = this._intervalPrecision;\n      } // (1) If `precision` is set, 12.005 should be display as '12.00500'.\n      // (2) Use roundNumber (toFixed) to avoid scientific notation like '3.5e-7'.\n\n\n      var dataNum = roundNumber(data.value, precision, true);\n      return addCommas(dataNum);\n    };\n    /**\n     * @param splitNumber By default `5`.\n     */\n\n\n    IntervalScale.prototype.calcNiceTicks = function (splitNumber, minInterval, maxInterval) {\n      splitNumber = splitNumber || 5;\n      var extent = this._extent;\n      var span = extent[1] - extent[0];\n\n      if (!isFinite(span)) {\n        return;\n      } // User may set axis min 0 and data are all negative\n      // FIXME If it needs to reverse ?\n\n\n      if (span < 0) {\n        span = -span;\n        extent.reverse();\n      }\n\n      var result = intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval);\n      this._intervalPrecision = result.intervalPrecision;\n      this._interval = result.interval;\n      this._niceExtent = result.niceTickExtent;\n    };\n\n    IntervalScale.prototype.calcNiceExtent = function (opt) {\n      var extent = this._extent; // If extent start and end are same, expand them\n\n      if (extent[0] === extent[1]) {\n        if (extent[0] !== 0) {\n          // Expand extent\n          var expandSize = extent[0]; // In the fowllowing case\n          //      Axis has been fixed max 100\n          //      Plus data are all 100 and axis extent are [100, 100].\n          // Extend to the both side will cause expanded max is larger than fixed max.\n          // So only expand to the smaller side.\n\n          if (!opt.fixMax) {\n            extent[1] += expandSize / 2;\n            extent[0] -= expandSize / 2;\n          } else {\n            extent[0] -= expandSize / 2;\n          }\n        } else {\n          extent[1] = 1;\n        }\n      }\n\n      var span = extent[1] - extent[0]; // If there are no data and extent are [Infinity, -Infinity]\n\n      if (!isFinite(span)) {\n        extent[0] = 0;\n        extent[1] = 1;\n      }\n\n      this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval); // let extent = this._extent;\n\n      var interval = this._interval;\n\n      if (!opt.fixMin) {\n        extent[0] = roundNumber(Math.floor(extent[0] / interval) * interval);\n      }\n\n      if (!opt.fixMax) {\n        extent[1] = roundNumber(Math.ceil(extent[1] / interval) * interval);\n      }\n    };\n\n    IntervalScale.prototype.setNiceExtent = function (min, max) {\n      this._niceExtent = [min, max];\n    };\n\n    IntervalScale.type = 'interval';\n    return IntervalScale;\n  }(Scale);\n\n  Scale.registerClass(IntervalScale);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /* global Float32Array */\n\n  var supportFloat32Array = typeof Float32Array !== 'undefined';\n  var Float32ArrayCtor = !supportFloat32Array ? Array : Float32Array;\n\n  function createFloat32Array(arg) {\n    if (isArray(arg)) {\n      // Return self directly if don't support TypedArray.\n      return supportFloat32Array ? new Float32Array(arg) : arg;\n    } // Else is number\n\n\n    return new Float32ArrayCtor(arg);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var STACK_PREFIX = '__ec_stack_';\n\n  function getSeriesStackId(seriesModel) {\n    return seriesModel.get('stack') || STACK_PREFIX + seriesModel.seriesIndex;\n  }\n\n  function getAxisKey(axis) {\n    return axis.dim + axis.index;\n  }\n  /**\n   * @return {Object} {width, offset, offsetCenter} If axis.type is not 'category', return undefined.\n   */\n\n\n  function prepareLayoutBarSeries(seriesType, ecModel) {\n    var seriesModels = [];\n    ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n      // Check series coordinate, do layout for cartesian2d only\n      if (isOnCartesian(seriesModel)) {\n        seriesModels.push(seriesModel);\n      }\n    });\n    return seriesModels;\n  }\n  /**\n   * Map from (baseAxis.dim + '_' + baseAxis.index) to min gap of two adjacent\n   * values.\n   * This works for time axes, value axes, and log axes.\n   * For a single time axis, return value is in the form like\n   * {'x_0': [1000000]}.\n   * The value of 1000000 is in milliseconds.\n   */\n\n\n  function getValueAxesMinGaps(barSeries) {\n    /**\n     * Map from axis.index to values.\n     * For a single time axis, axisValues is in the form like\n     * {'x_0': [1495555200000, 1495641600000, 1495728000000]}.\n     * Items in axisValues[x], e.g. 1495555200000, are time values of all\n     * series.\n     */\n    var axisValues = {};\n    each(barSeries, function (seriesModel) {\n      var cartesian = seriesModel.coordinateSystem;\n      var baseAxis = cartesian.getBaseAxis();\n\n      if (baseAxis.type !== 'time' && baseAxis.type !== 'value') {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      var key = baseAxis.dim + '_' + baseAxis.index;\n      var dimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\n      var store = data.getStore();\n\n      for (var i = 0, cnt = store.count(); i < cnt; ++i) {\n        var value = store.get(dimIdx, i);\n\n        if (!axisValues[key]) {\n          // No previous data for the axis\n          axisValues[key] = [value];\n        } else {\n          // No value in previous series\n          axisValues[key].push(value);\n        } // Ignore duplicated time values in the same axis\n\n      }\n    });\n    var axisMinGaps = {};\n\n    for (var key in axisValues) {\n      if (axisValues.hasOwnProperty(key)) {\n        var valuesInAxis = axisValues[key];\n\n        if (valuesInAxis) {\n          // Sort axis values into ascending order to calculate gaps\n          valuesInAxis.sort(function (a, b) {\n            return a - b;\n          });\n          var min = null;\n\n          for (var j = 1; j < valuesInAxis.length; ++j) {\n            var delta = valuesInAxis[j] - valuesInAxis[j - 1];\n\n            if (delta > 0) {\n              // Ignore 0 delta because they are of the same axis value\n              min = min === null ? delta : Math.min(min, delta);\n            }\n          } // Set to null if only have one data\n\n\n          axisMinGaps[key] = min;\n        }\n      }\n    }\n\n    return axisMinGaps;\n  }\n\n  function makeColumnLayout(barSeries) {\n    var axisMinGaps = getValueAxesMinGaps(barSeries);\n    var seriesInfoList = [];\n    each(barSeries, function (seriesModel) {\n      var cartesian = seriesModel.coordinateSystem;\n      var baseAxis = cartesian.getBaseAxis();\n      var axisExtent = baseAxis.getExtent();\n      var bandWidth;\n\n      if (baseAxis.type === 'category') {\n        bandWidth = baseAxis.getBandWidth();\n      } else if (baseAxis.type === 'value' || baseAxis.type === 'time') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n        var minGap = axisMinGaps[key];\n        var extentSpan = Math.abs(axisExtent[1] - axisExtent[0]);\n        var scale = baseAxis.scale.getExtent();\n        var scaleSpan = Math.abs(scale[1] - scale[0]);\n        bandWidth = minGap ? extentSpan / scaleSpan * minGap : extentSpan; // When there is only one data value\n      } else {\n        var data = seriesModel.getData();\n        bandWidth = Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n      }\n\n      var barWidth = parsePercent$1(seriesModel.get('barWidth'), bandWidth);\n      var barMaxWidth = parsePercent$1(seriesModel.get('barMaxWidth'), bandWidth);\n      var barMinWidth = parsePercent$1( // barMinWidth by default is 0.5 / 1 in cartesian. Because in value axis,\n      // the auto-calculated bar width might be less than 0.5 / 1.\n      seriesModel.get('barMinWidth') || (isInLargeMode(seriesModel) ? 0.5 : 1), bandWidth);\n      var barGap = seriesModel.get('barGap');\n      var barCategoryGap = seriesModel.get('barCategoryGap');\n      seriesInfoList.push({\n        bandWidth: bandWidth,\n        barWidth: barWidth,\n        barMaxWidth: barMaxWidth,\n        barMinWidth: barMinWidth,\n        barGap: barGap,\n        barCategoryGap: barCategoryGap,\n        axisKey: getAxisKey(baseAxis),\n        stackId: getSeriesStackId(seriesModel)\n      });\n    });\n    return doCalBarWidthAndOffset(seriesInfoList);\n  }\n\n  function doCalBarWidthAndOffset(seriesInfoList) {\n    // Columns info on each category axis. Key is cartesian name\n    var columnsMap = {};\n    each(seriesInfoList, function (seriesInfo, idx) {\n      var axisKey = seriesInfo.axisKey;\n      var bandWidth = seriesInfo.bandWidth;\n      var columnsOnAxis = columnsMap[axisKey] || {\n        bandWidth: bandWidth,\n        remainedWidth: bandWidth,\n        autoWidthCount: 0,\n        categoryGap: null,\n        gap: '20%',\n        stacks: {}\n      };\n      var stacks = columnsOnAxis.stacks;\n      columnsMap[axisKey] = columnsOnAxis;\n      var stackId = seriesInfo.stackId;\n\n      if (!stacks[stackId]) {\n        columnsOnAxis.autoWidthCount++;\n      }\n\n      stacks[stackId] = stacks[stackId] || {\n        width: 0,\n        maxWidth: 0\n      }; // Caution: In a single coordinate system, these barGrid attributes\n      // will be shared by series. Consider that they have default values,\n      // only the attributes set on the last series will work.\n      // Do not change this fact unless there will be a break change.\n\n      var barWidth = seriesInfo.barWidth;\n\n      if (barWidth && !stacks[stackId].width) {\n        // See #6312, do not restrict width.\n        stacks[stackId].width = barWidth;\n        barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n        columnsOnAxis.remainedWidth -= barWidth;\n      }\n\n      var barMaxWidth = seriesInfo.barMaxWidth;\n      barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n      var barMinWidth = seriesInfo.barMinWidth;\n      barMinWidth && (stacks[stackId].minWidth = barMinWidth);\n      var barGap = seriesInfo.barGap;\n      barGap != null && (columnsOnAxis.gap = barGap);\n      var barCategoryGap = seriesInfo.barCategoryGap;\n      barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n    });\n    var result = {};\n    each(columnsMap, function (columnsOnAxis, coordSysName) {\n      result[coordSysName] = {};\n      var stacks = columnsOnAxis.stacks;\n      var bandWidth = columnsOnAxis.bandWidth;\n      var categoryGapPercent = columnsOnAxis.categoryGap;\n\n      if (categoryGapPercent == null) {\n        var columnCount = keys(stacks).length; // More columns in one group\n        // the spaces between group is smaller. Or the column will be too thin.\n\n        categoryGapPercent = Math.max(35 - columnCount * 4, 15) + '%';\n      }\n\n      var categoryGap = parsePercent$1(categoryGapPercent, bandWidth);\n      var barGapPercent = parsePercent$1(columnsOnAxis.gap, 1);\n      var remainedWidth = columnsOnAxis.remainedWidth;\n      var autoWidthCount = columnsOnAxis.autoWidthCount;\n      var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n      autoWidth = Math.max(autoWidth, 0); // Find if any auto calculated bar exceeded maxBarWidth\n\n      each(stacks, function (column) {\n        var maxWidth = column.maxWidth;\n        var minWidth = column.minWidth;\n\n        if (!column.width) {\n          var finalWidth = autoWidth;\n\n          if (maxWidth && maxWidth < finalWidth) {\n            finalWidth = Math.min(maxWidth, remainedWidth);\n          } // `minWidth` has higher priority. `minWidth` decide that wheter the\n          // bar is able to be visible. So `minWidth` should not be restricted\n          // by `maxWidth` or `remainedWidth` (which is from `bandWidth`). In\n          // the extreme cases for `value` axis, bars are allowed to overlap\n          // with each other if `minWidth` specified.\n\n\n          if (minWidth && minWidth > finalWidth) {\n            finalWidth = minWidth;\n          }\n\n          if (finalWidth !== autoWidth) {\n            column.width = finalWidth;\n            remainedWidth -= finalWidth + barGapPercent * finalWidth;\n            autoWidthCount--;\n          }\n        } else {\n          // `barMinWidth/barMaxWidth` has higher priority than `barWidth`, as\n          // CSS does. Becuase barWidth can be a percent value, where\n          // `barMaxWidth` can be used to restrict the final width.\n          var finalWidth = column.width;\n\n          if (maxWidth) {\n            finalWidth = Math.min(finalWidth, maxWidth);\n          } // `minWidth` has higher priority, as described above\n\n\n          if (minWidth) {\n            finalWidth = Math.max(finalWidth, minWidth);\n          }\n\n          column.width = finalWidth;\n          remainedWidth -= finalWidth + barGapPercent * finalWidth;\n          autoWidthCount--;\n        }\n      }); // Recalculate width again\n\n      autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n      autoWidth = Math.max(autoWidth, 0);\n      var widthSum = 0;\n      var lastColumn;\n      each(stacks, function (column, idx) {\n        if (!column.width) {\n          column.width = autoWidth;\n        }\n\n        lastColumn = column;\n        widthSum += column.width * (1 + barGapPercent);\n      });\n\n      if (lastColumn) {\n        widthSum -= lastColumn.width * barGapPercent;\n      }\n\n      var offset = -widthSum / 2;\n      each(stacks, function (column, stackId) {\n        result[coordSysName][stackId] = result[coordSysName][stackId] || {\n          bandWidth: bandWidth,\n          offset: offset,\n          width: column.width\n        };\n        offset += column.width * (1 + barGapPercent);\n      });\n    });\n    return result;\n  }\n\n  function retrieveColumnLayout(barWidthAndOffset, axis, seriesModel) {\n    if (barWidthAndOffset && axis) {\n      var result = barWidthAndOffset[getAxisKey(axis)];\n\n      if (result != null && seriesModel != null) {\n        return result[getSeriesStackId(seriesModel)];\n      }\n\n      return result;\n    }\n  }\n\n  function layout(seriesType, ecModel) {\n    var seriesModels = prepareLayoutBarSeries(seriesType, ecModel);\n    var barWidthAndOffset = makeColumnLayout(seriesModels);\n    each(seriesModels, function (seriesModel) {\n      var data = seriesModel.getData();\n      var cartesian = seriesModel.coordinateSystem;\n      var baseAxis = cartesian.getBaseAxis();\n      var stackId = getSeriesStackId(seriesModel);\n      var columnLayoutInfo = barWidthAndOffset[getAxisKey(baseAxis)][stackId];\n      var columnOffset = columnLayoutInfo.offset;\n      var columnWidth = columnLayoutInfo.width;\n      data.setLayout({\n        bandWidth: columnLayoutInfo.bandWidth,\n        offset: columnOffset,\n        size: columnWidth\n      });\n    });\n  } // TODO: Do not support stack in large mode yet.\n\n\n  function createProgressiveLayout(seriesType) {\n    return {\n      seriesType: seriesType,\n      plan: createRenderPlanner(),\n      reset: function (seriesModel) {\n        if (!isOnCartesian(seriesModel)) {\n          return;\n        }\n\n        var data = seriesModel.getData();\n        var cartesian = seriesModel.coordinateSystem;\n        var baseAxis = cartesian.getBaseAxis();\n        var valueAxis = cartesian.getOtherAxis(baseAxis);\n        var valueDimIdx = data.getDimensionIndex(data.mapDimension(valueAxis.dim));\n        var baseDimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\n        var drawBackground = seriesModel.get('showBackground', true);\n        var valueDim = data.mapDimension(valueAxis.dim);\n        var stackResultDim = data.getCalculationInfo('stackResultDimension');\n        var stacked = isDimensionStacked(data, valueDim) && !!data.getCalculationInfo('stackedOnSeries');\n        var isValueAxisH = valueAxis.isHorizontal();\n        var valueAxisStart = getValueAxisStart(baseAxis, valueAxis);\n        var isLarge = isInLargeMode(seriesModel);\n        var barMinHeight = seriesModel.get('barMinHeight') || 0;\n        var stackedDimIdx = stackResultDim && data.getDimensionIndex(stackResultDim); // Layout info.\n\n        var columnWidth = data.getLayout('size');\n        var columnOffset = data.getLayout('offset');\n        return {\n          progress: function (params, data) {\n            var count = params.count;\n            var largePoints = isLarge && createFloat32Array(count * 3);\n            var largeBackgroundPoints = isLarge && drawBackground && createFloat32Array(count * 3);\n            var largeDataIndices = isLarge && createFloat32Array(count);\n            var coordLayout = cartesian.master.getRect();\n            var bgSize = isValueAxisH ? coordLayout.width : coordLayout.height;\n            var dataIndex;\n            var store = data.getStore();\n            var idxOffset = 0;\n\n            while ((dataIndex = params.next()) != null) {\n              var value = store.get(stacked ? stackedDimIdx : valueDimIdx, dataIndex);\n              var baseValue = store.get(baseDimIdx, dataIndex);\n              var baseCoord = valueAxisStart;\n              var startValue = void 0; // Because of the barMinHeight, we can not use the value in\n              // stackResultDimension directly.\n\n              if (stacked) {\n                startValue = +value - store.get(valueDimIdx, dataIndex);\n              }\n\n              var x = void 0;\n              var y = void 0;\n              var width = void 0;\n              var height = void 0;\n\n              if (isValueAxisH) {\n                var coord = cartesian.dataToPoint([value, baseValue]);\n\n                if (stacked) {\n                  var startCoord = cartesian.dataToPoint([startValue, baseValue]);\n                  baseCoord = startCoord[0];\n                }\n\n                x = baseCoord;\n                y = coord[1] + columnOffset;\n                width = coord[0] - baseCoord;\n                height = columnWidth;\n\n                if (Math.abs(width) < barMinHeight) {\n                  width = (width < 0 ? -1 : 1) * barMinHeight;\n                }\n              } else {\n                var coord = cartesian.dataToPoint([baseValue, value]);\n\n                if (stacked) {\n                  var startCoord = cartesian.dataToPoint([baseValue, startValue]);\n                  baseCoord = startCoord[1];\n                }\n\n                x = coord[0] + columnOffset;\n                y = baseCoord;\n                width = columnWidth;\n                height = coord[1] - baseCoord;\n\n                if (Math.abs(height) < barMinHeight) {\n                  // Include zero to has a positive bar\n                  height = (height <= 0 ? -1 : 1) * barMinHeight;\n                }\n              }\n\n              if (!isLarge) {\n                data.setItemLayout(dataIndex, {\n                  x: x,\n                  y: y,\n                  width: width,\n                  height: height\n                });\n              } else {\n                largePoints[idxOffset] = x;\n                largePoints[idxOffset + 1] = y;\n                largePoints[idxOffset + 2] = isValueAxisH ? width : height;\n\n                if (largeBackgroundPoints) {\n                  largeBackgroundPoints[idxOffset] = isValueAxisH ? coordLayout.x : x;\n                  largeBackgroundPoints[idxOffset + 1] = isValueAxisH ? y : coordLayout.y;\n                  largeBackgroundPoints[idxOffset + 2] = bgSize;\n                }\n\n                largeDataIndices[dataIndex] = dataIndex;\n              }\n\n              idxOffset += 3;\n            }\n\n            if (isLarge) {\n              data.setLayout({\n                largePoints: largePoints,\n                largeDataIndices: largeDataIndices,\n                largeBackgroundPoints: largeBackgroundPoints,\n                valueAxisHorizontal: isValueAxisH\n              });\n            }\n          }\n        };\n      }\n    };\n  }\n\n  function isOnCartesian(seriesModel) {\n    return seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\n  }\n\n  function isInLargeMode(seriesModel) {\n    return seriesModel.pipelineContext && seriesModel.pipelineContext.large;\n  } // See cases in `test/bar-start.html` and `#7412`, `#8747`.\n\n\n  function getValueAxisStart(baseAxis, valueAxis) {\n    return valueAxis.toGlobalCoord(valueAxis.dataToCoord(valueAxis.type === 'log' ? 1 : 0));\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /*\n  * A third-party license is embeded for some of the code in this file:\n  * The \"scaleLevels\" was originally copied from \"d3.js\" with some\n  * modifications made for this project.\n  * (See more details in the comment on the definition of \"scaleLevels\" below.)\n  * The use of the source code of this file is also subject to the terms\n  * and consitions of the license of \"d3.js\" (BSD-3Clause, see\n  * </licenses/LICENSE-d3>).\n  */\n  // [About UTC and local time zone]:\n  // In most cases, `number.parseDate` will treat input data string as local time\n  // (except time zone is specified in time string). And `format.formateTime` returns\n  // local time by default. option.useUTC is false by default. This design have\n  // concidered these common case:\n  // (1) Time that is persistent in server is in UTC, but it is needed to be diplayed\n  // in local time by default.\n  // (2) By default, the input data string (e.g., '2011-01-02') should be displayed\n  // as its original time, without any time difference.\n\n\n  var bisect = function (a, x, lo, hi) {\n    while (lo < hi) {\n      var mid = lo + hi >>> 1;\n\n      if (a[mid][1] < x) {\n        lo = mid + 1;\n      } else {\n        hi = mid;\n      }\n    }\n\n    return lo;\n  };\n\n  var TimeScale =\n  /** @class */\n  function (_super) {\n    __extends(TimeScale, _super);\n\n    function TimeScale(settings) {\n      var _this = _super.call(this, settings) || this;\n\n      _this.type = 'time';\n      return _this;\n    }\n    /**\n     * Get label is mainly for other components like dataZoom, tooltip.\n     */\n\n\n    TimeScale.prototype.getLabel = function (tick) {\n      var useUTC = this.getSetting('useUTC');\n      return format(tick.value, fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))] || fullLeveledFormatter.second, useUTC, this.getSetting('locale'));\n    };\n\n    TimeScale.prototype.getFormattedLabel = function (tick, idx, labelFormatter) {\n      var isUTC = this.getSetting('useUTC');\n      var lang = this.getSetting('locale');\n      return leveledFormat(tick, idx, labelFormatter, lang, isUTC);\n    };\n    /**\n     * @override\n     */\n\n\n    TimeScale.prototype.getTicks = function () {\n      var interval = this._interval;\n      var extent = this._extent;\n      var ticks = []; // If interval is 0, return [];\n\n      if (!interval) {\n        return ticks;\n      }\n\n      ticks.push({\n        value: extent[0],\n        level: 0\n      });\n      var useUTC = this.getSetting('useUTC');\n      var innerTicks = getIntervalTicks(this._minLevelUnit, this._approxInterval, useUTC, extent);\n      ticks = ticks.concat(innerTicks);\n      ticks.push({\n        value: extent[1],\n        level: 0\n      });\n      return ticks;\n    };\n\n    TimeScale.prototype.calcNiceExtent = function (opt) {\n      var extent = this._extent; // If extent start and end are same, expand them\n\n      if (extent[0] === extent[1]) {\n        // Expand extent\n        extent[0] -= ONE_DAY;\n        extent[1] += ONE_DAY;\n      } // If there are no data and extent are [Infinity, -Infinity]\n\n\n      if (extent[1] === -Infinity && extent[0] === Infinity) {\n        var d = new Date();\n        extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n        extent[0] = extent[1] - ONE_DAY;\n      }\n\n      this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\n    };\n\n    TimeScale.prototype.calcNiceTicks = function (approxTickNum, minInterval, maxInterval) {\n      approxTickNum = approxTickNum || 10;\n      var extent = this._extent;\n      var span = extent[1] - extent[0];\n      this._approxInterval = span / approxTickNum;\n\n      if (minInterval != null && this._approxInterval < minInterval) {\n        this._approxInterval = minInterval;\n      }\n\n      if (maxInterval != null && this._approxInterval > maxInterval) {\n        this._approxInterval = maxInterval;\n      }\n\n      var scaleIntervalsLen = scaleIntervals.length;\n      var idx = Math.min(bisect(scaleIntervals, this._approxInterval, 0, scaleIntervalsLen), scaleIntervalsLen - 1); // Interval that can be used to calculate ticks\n\n      this._interval = scaleIntervals[idx][1]; // Min level used when picking ticks from top down.\n      // We check one more level to avoid the ticks are to sparse in some case.\n\n      this._minLevelUnit = scaleIntervals[Math.max(idx - 1, 0)][0];\n    };\n\n    TimeScale.prototype.parse = function (val) {\n      // val might be float.\n      return isNumber(val) ? val : +parseDate(val);\n    };\n\n    TimeScale.prototype.contain = function (val) {\n      return contain$1(this.parse(val), this._extent);\n    };\n\n    TimeScale.prototype.normalize = function (val) {\n      return normalize$1(this.parse(val), this._extent);\n    };\n\n    TimeScale.prototype.scale = function (val) {\n      return scale$2(val, this._extent);\n    };\n\n    TimeScale.type = 'time';\n    return TimeScale;\n  }(IntervalScale);\n  /**\n   * This implementation was originally copied from \"d3.js\"\n   * <https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/time/scale.js>\n   * with some modifications made for this program.\n   * See the license statement at the head of this file.\n   */\n\n\n  var scaleIntervals = [// Format                           interval\n  ['second', ONE_SECOND], ['minute', ONE_MINUTE], ['hour', ONE_HOUR], ['quarter-day', ONE_HOUR * 6], ['half-day', ONE_HOUR * 12], ['day', ONE_DAY * 1.2], ['half-week', ONE_DAY * 3.5], ['week', ONE_DAY * 7], ['month', ONE_DAY * 31], ['quarter', ONE_DAY * 95], ['half-year', ONE_YEAR / 2], ['year', ONE_YEAR] // 1Y\n  ];\n\n  function isUnitValueSame(unit, valueA, valueB, isUTC) {\n    var dateA = parseDate(valueA);\n    var dateB = parseDate(valueB);\n\n    var isSame = function (unit) {\n      return getUnitValue(dateA, unit, isUTC) === getUnitValue(dateB, unit, isUTC);\n    };\n\n    var isSameYear = function () {\n      return isSame('year');\n    }; // const isSameHalfYear = () => isSameYear() && isSame('half-year');\n    // const isSameQuater = () => isSameYear() && isSame('quarter');\n\n\n    var isSameMonth = function () {\n      return isSameYear() && isSame('month');\n    };\n\n    var isSameDay = function () {\n      return isSameMonth() && isSame('day');\n    }; // const isSameHalfDay = () => isSameDay() && isSame('half-day');\n\n\n    var isSameHour = function () {\n      return isSameDay() && isSame('hour');\n    };\n\n    var isSameMinute = function () {\n      return isSameHour() && isSame('minute');\n    };\n\n    var isSameSecond = function () {\n      return isSameMinute() && isSame('second');\n    };\n\n    var isSameMilliSecond = function () {\n      return isSameSecond() && isSame('millisecond');\n    };\n\n    switch (unit) {\n      case 'year':\n        return isSameYear();\n\n      case 'month':\n        return isSameMonth();\n\n      case 'day':\n        return isSameDay();\n\n      case 'hour':\n        return isSameHour();\n\n      case 'minute':\n        return isSameMinute();\n\n      case 'second':\n        return isSameSecond();\n\n      case 'millisecond':\n        return isSameMilliSecond();\n    }\n  } // const primaryUnitGetters = {\n  //     year: fullYearGetterName(),\n  //     month: monthGetterName(),\n  //     day: dateGetterName(),\n  //     hour: hoursGetterName(),\n  //     minute: minutesGetterName(),\n  //     second: secondsGetterName(),\n  //     millisecond: millisecondsGetterName()\n  // };\n  // const primaryUnitUTCGetters = {\n  //     year: fullYearGetterName(true),\n  //     month: monthGetterName(true),\n  //     day: dateGetterName(true),\n  //     hour: hoursGetterName(true),\n  //     minute: minutesGetterName(true),\n  //     second: secondsGetterName(true),\n  //     millisecond: millisecondsGetterName(true)\n  // };\n  // function moveTick(date: Date, unitName: TimeUnit, step: number, isUTC: boolean) {\n  //     step = step || 1;\n  //     switch (getPrimaryTimeUnit(unitName)) {\n  //         case 'year':\n  //             date[fullYearSetterName(isUTC)](date[fullYearGetterName(isUTC)]() + step);\n  //             break;\n  //         case 'month':\n  //             date[monthSetterName(isUTC)](date[monthGetterName(isUTC)]() + step);\n  //             break;\n  //         case 'day':\n  //             date[dateSetterName(isUTC)](date[dateGetterName(isUTC)]() + step);\n  //             break;\n  //         case 'hour':\n  //             date[hoursSetterName(isUTC)](date[hoursGetterName(isUTC)]() + step);\n  //             break;\n  //         case 'minute':\n  //             date[minutesSetterName(isUTC)](date[minutesGetterName(isUTC)]() + step);\n  //             break;\n  //         case 'second':\n  //             date[secondsSetterName(isUTC)](date[secondsGetterName(isUTC)]() + step);\n  //             break;\n  //         case 'millisecond':\n  //             date[millisecondsSetterName(isUTC)](date[millisecondsGetterName(isUTC)]() + step);\n  //             break;\n  //     }\n  //     return date.getTime();\n  // }\n  // const DATE_INTERVALS = [[8, 7.5], [4, 3.5], [2, 1.5]];\n  // const MONTH_INTERVALS = [[6, 5.5], [3, 2.5], [2, 1.5]];\n  // const MINUTES_SECONDS_INTERVALS = [[30, 30], [20, 20], [15, 15], [10, 10], [5, 5], [2, 2]];\n\n\n  function getDateInterval(approxInterval, daysInMonth) {\n    approxInterval /= ONE_DAY;\n    return approxInterval > 16 ? 16 // Math.floor(daysInMonth / 2) + 1  // In this case we only want one tick betwen two month.\n    : approxInterval > 7.5 ? 7 // TODO week 7 or day 8?\n    : approxInterval > 3.5 ? 4 : approxInterval > 1.5 ? 2 : 1;\n  }\n\n  function getMonthInterval(approxInterval) {\n    var APPROX_ONE_MONTH = 30 * ONE_DAY;\n    approxInterval /= APPROX_ONE_MONTH;\n    return approxInterval > 6 ? 6 : approxInterval > 3 ? 3 : approxInterval > 2 ? 2 : 1;\n  }\n\n  function getHourInterval(approxInterval) {\n    approxInterval /= ONE_HOUR;\n    return approxInterval > 12 ? 12 : approxInterval > 6 ? 6 : approxInterval > 3.5 ? 4 : approxInterval > 2 ? 2 : 1;\n  }\n\n  function getMinutesAndSecondsInterval(approxInterval, isMinutes) {\n    approxInterval /= isMinutes ? ONE_MINUTE : ONE_SECOND;\n    return approxInterval > 30 ? 30 : approxInterval > 20 ? 20 : approxInterval > 15 ? 15 : approxInterval > 10 ? 10 : approxInterval > 5 ? 5 : approxInterval > 2 ? 2 : 1;\n  }\n\n  function getMillisecondsInterval(approxInterval) {\n    return nice(approxInterval, true);\n  }\n\n  function getFirstTimestampOfUnit(date, unitName, isUTC) {\n    var outDate = new Date(date);\n\n    switch (getPrimaryTimeUnit(unitName)) {\n      case 'year':\n      case 'month':\n        outDate[monthSetterName(isUTC)](0);\n\n      case 'day':\n        outDate[dateSetterName(isUTC)](1);\n\n      case 'hour':\n        outDate[hoursSetterName(isUTC)](0);\n\n      case 'minute':\n        outDate[minutesSetterName(isUTC)](0);\n\n      case 'second':\n        outDate[secondsSetterName(isUTC)](0);\n        outDate[millisecondsSetterName(isUTC)](0);\n    }\n\n    return outDate.getTime();\n  }\n\n  function getIntervalTicks(bottomUnitName, approxInterval, isUTC, extent) {\n    var safeLimit = 10000;\n    var unitNames = timeUnits;\n    var iter = 0;\n\n    function addTicksInSpan(interval, minTimestamp, maxTimestamp, getMethodName, setMethodName, isDate, out) {\n      var date = new Date(minTimestamp);\n      var dateTime = minTimestamp;\n      var d = date[getMethodName](); // if (isDate) {\n      //     d -= 1; // Starts with 0;   PENDING\n      // }\n\n      while (dateTime < maxTimestamp && dateTime <= extent[1]) {\n        out.push({\n          value: dateTime\n        });\n        d += interval;\n        date[setMethodName](d);\n        dateTime = date.getTime();\n      } // This extra tick is for calcuating ticks of next level. Will not been added to the final result\n\n\n      out.push({\n        value: dateTime,\n        notAdd: true\n      });\n    }\n\n    function addLevelTicks(unitName, lastLevelTicks, levelTicks) {\n      var newAddedTicks = [];\n      var isFirstLevel = !lastLevelTicks.length;\n\n      if (isUnitValueSame(getPrimaryTimeUnit(unitName), extent[0], extent[1], isUTC)) {\n        return;\n      }\n\n      if (isFirstLevel) {\n        lastLevelTicks = [{\n          // TODO Optimize. Not include so may ticks.\n          value: getFirstTimestampOfUnit(new Date(extent[0]), unitName, isUTC)\n        }, {\n          value: extent[1]\n        }];\n      }\n\n      for (var i = 0; i < lastLevelTicks.length - 1; i++) {\n        var startTick = lastLevelTicks[i].value;\n        var endTick = lastLevelTicks[i + 1].value;\n\n        if (startTick === endTick) {\n          continue;\n        }\n\n        var interval = void 0;\n        var getterName = void 0;\n        var setterName = void 0;\n        var isDate = false;\n\n        switch (unitName) {\n          case 'year':\n            interval = Math.max(1, Math.round(approxInterval / ONE_DAY / 365));\n            getterName = fullYearGetterName(isUTC);\n            setterName = fullYearSetterName(isUTC);\n            break;\n\n          case 'half-year':\n          case 'quarter':\n          case 'month':\n            interval = getMonthInterval(approxInterval);\n            getterName = monthGetterName(isUTC);\n            setterName = monthSetterName(isUTC);\n            break;\n\n          case 'week': // PENDING If week is added. Ignore day.\n\n          case 'half-week':\n          case 'day':\n            interval = getDateInterval(approxInterval, 31); // Use 32 days and let interval been 16\n\n            getterName = dateGetterName(isUTC);\n            setterName = dateSetterName(isUTC);\n            isDate = true;\n            break;\n\n          case 'half-day':\n          case 'quarter-day':\n          case 'hour':\n            interval = getHourInterval(approxInterval);\n            getterName = hoursGetterName(isUTC);\n            setterName = hoursSetterName(isUTC);\n            break;\n\n          case 'minute':\n            interval = getMinutesAndSecondsInterval(approxInterval, true);\n            getterName = minutesGetterName(isUTC);\n            setterName = minutesSetterName(isUTC);\n            break;\n\n          case 'second':\n            interval = getMinutesAndSecondsInterval(approxInterval, false);\n            getterName = secondsGetterName(isUTC);\n            setterName = secondsSetterName(isUTC);\n            break;\n\n          case 'millisecond':\n            interval = getMillisecondsInterval(approxInterval);\n            getterName = millisecondsGetterName(isUTC);\n            setterName = millisecondsSetterName(isUTC);\n            break;\n        }\n\n        addTicksInSpan(interval, startTick, endTick, getterName, setterName, isDate, newAddedTicks);\n\n        if (unitName === 'year' && levelTicks.length > 1 && i === 0) {\n          // Add nearest years to the left extent.\n          levelTicks.unshift({\n            value: levelTicks[0].value - interval\n          });\n        }\n      }\n\n      for (var i = 0; i < newAddedTicks.length; i++) {\n        levelTicks.push(newAddedTicks[i]);\n      } // newAddedTicks.length && console.log(unitName, newAddedTicks);\n\n\n      return newAddedTicks;\n    }\n\n    var levelsTicks = [];\n    var currentLevelTicks = [];\n    var tickCount = 0;\n    var lastLevelTickCount = 0;\n\n    for (var i = 0; i < unitNames.length && iter++ < safeLimit; ++i) {\n      var primaryTimeUnit = getPrimaryTimeUnit(unitNames[i]);\n\n      if (!isPrimaryTimeUnit(unitNames[i])) {\n        // TODO\n        continue;\n      }\n\n      addLevelTicks(unitNames[i], levelsTicks[levelsTicks.length - 1] || [], currentLevelTicks);\n      var nextPrimaryTimeUnit = unitNames[i + 1] ? getPrimaryTimeUnit(unitNames[i + 1]) : null;\n\n      if (primaryTimeUnit !== nextPrimaryTimeUnit) {\n        if (currentLevelTicks.length) {\n          lastLevelTickCount = tickCount; // Remove the duplicate so the tick count can be precisely.\n\n          currentLevelTicks.sort(function (a, b) {\n            return a.value - b.value;\n          });\n          var levelTicksRemoveDuplicated = [];\n\n          for (var i_1 = 0; i_1 < currentLevelTicks.length; ++i_1) {\n            var tickValue = currentLevelTicks[i_1].value;\n\n            if (i_1 === 0 || currentLevelTicks[i_1 - 1].value !== tickValue) {\n              levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]);\n\n              if (tickValue >= extent[0] && tickValue <= extent[1]) {\n                tickCount++;\n              }\n            }\n          }\n\n          var targetTickNum = (extent[1] - extent[0]) / approxInterval; // Added too much in this level and not too less in last level\n\n          if (tickCount > targetTickNum * 1.5 && lastLevelTickCount > targetTickNum / 1.5) {\n            break;\n          } // Only treat primary time unit as one level.\n\n\n          levelsTicks.push(levelTicksRemoveDuplicated);\n\n          if (tickCount > targetTickNum || bottomUnitName === unitNames[i]) {\n            break;\n          }\n        } // Reset if next unitName is primary\n\n\n        currentLevelTicks = [];\n      }\n    }\n\n    {\n      if (iter >= safeLimit) {\n        warn('Exceed safe limit.');\n      }\n    }\n    var levelsTicksInExtent = filter(map(levelsTicks, function (levelTicks) {\n      return filter(levelTicks, function (tick) {\n        return tick.value >= extent[0] && tick.value <= extent[1] && !tick.notAdd;\n      });\n    }), function (levelTicks) {\n      return levelTicks.length > 0;\n    });\n    var ticks = [];\n    var maxLevel = levelsTicksInExtent.length - 1;\n\n    for (var i = 0; i < levelsTicksInExtent.length; ++i) {\n      var levelTicks = levelsTicksInExtent[i];\n\n      for (var k = 0; k < levelTicks.length; ++k) {\n        ticks.push({\n          value: levelTicks[k].value,\n          level: maxLevel - i\n        });\n      }\n    }\n\n    ticks.sort(function (a, b) {\n      return a.value - b.value;\n    }); // Remove duplicates\n\n    var result = [];\n\n    for (var i = 0; i < ticks.length; ++i) {\n      if (i === 0 || ticks[i].value !== ticks[i - 1].value) {\n        result.push(ticks[i]);\n      }\n    }\n\n    return result;\n  }\n\n  Scale.registerClass(TimeScale);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var scaleProto = Scale.prototype; // FIXME:TS refactor: not good to call it directly with `this`?\n\n  var intervalScaleProto = IntervalScale.prototype;\n  var roundingErrorFix = round;\n  var mathFloor = Math.floor;\n  var mathCeil = Math.ceil;\n  var mathPow$1 = Math.pow;\n  var mathLog = Math.log;\n\n  var LogScale =\n  /** @class */\n  function (_super) {\n    __extends(LogScale, _super);\n\n    function LogScale() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = 'log';\n      _this.base = 10;\n      _this._originalScale = new IntervalScale(); // FIXME:TS actually used by `IntervalScale`\n\n      _this._interval = 0;\n      return _this;\n    }\n    /**\n     * @param Whether expand the ticks to niced extent.\n     */\n\n\n    LogScale.prototype.getTicks = function (expandToNicedExtent) {\n      var originalScale = this._originalScale;\n      var extent = this._extent;\n      var originalExtent = originalScale.getExtent();\n      var ticks = intervalScaleProto.getTicks.call(this, expandToNicedExtent);\n      return map(ticks, function (tick) {\n        var val = tick.value;\n        var powVal = round(mathPow$1(this.base, val)); // Fix #4158\n\n        powVal = val === extent[0] && this._fixMin ? fixRoundingError(powVal, originalExtent[0]) : powVal;\n        powVal = val === extent[1] && this._fixMax ? fixRoundingError(powVal, originalExtent[1]) : powVal;\n        return {\n          value: powVal\n        };\n      }, this);\n    };\n\n    LogScale.prototype.setExtent = function (start, end) {\n      var base = this.base;\n      start = mathLog(start) / mathLog(base);\n      end = mathLog(end) / mathLog(base);\n      intervalScaleProto.setExtent.call(this, start, end);\n    };\n    /**\n     * @return {number} end\n     */\n\n\n    LogScale.prototype.getExtent = function () {\n      var base = this.base;\n      var extent = scaleProto.getExtent.call(this);\n      extent[0] = mathPow$1(base, extent[0]);\n      extent[1] = mathPow$1(base, extent[1]); // Fix #4158\n\n      var originalScale = this._originalScale;\n      var originalExtent = originalScale.getExtent();\n      this._fixMin && (extent[0] = fixRoundingError(extent[0], originalExtent[0]));\n      this._fixMax && (extent[1] = fixRoundingError(extent[1], originalExtent[1]));\n      return extent;\n    };\n\n    LogScale.prototype.unionExtent = function (extent) {\n      this._originalScale.unionExtent(extent);\n\n      var base = this.base;\n      extent[0] = mathLog(extent[0]) / mathLog(base);\n      extent[1] = mathLog(extent[1]) / mathLog(base);\n      scaleProto.unionExtent.call(this, extent);\n    };\n\n    LogScale.prototype.unionExtentFromData = function (data, dim) {\n      // TODO\n      // filter value that <= 0\n      this.unionExtent(data.getApproximateExtent(dim));\n    };\n    /**\n     * Update interval and extent of intervals for nice ticks\n     * @param approxTickNum default 10 Given approx tick number\n     */\n\n\n    LogScale.prototype.calcNiceTicks = function (approxTickNum) {\n      approxTickNum = approxTickNum || 10;\n      var extent = this._extent;\n      var span = extent[1] - extent[0];\n\n      if (span === Infinity || span <= 0) {\n        return;\n      }\n\n      var interval = quantity(span);\n      var err = approxTickNum / span * interval; // Filter ticks to get closer to the desired count.\n\n      if (err <= 0.5) {\n        interval *= 10;\n      } // Interval should be integer\n\n\n      while (!isNaN(interval) && Math.abs(interval) < 1 && Math.abs(interval) > 0) {\n        interval *= 10;\n      }\n\n      var niceExtent = [round(mathCeil(extent[0] / interval) * interval), round(mathFloor(extent[1] / interval) * interval)];\n      this._interval = interval;\n      this._niceExtent = niceExtent;\n    };\n\n    LogScale.prototype.calcNiceExtent = function (opt) {\n      intervalScaleProto.calcNiceExtent.call(this, opt);\n      this._fixMin = opt.fixMin;\n      this._fixMax = opt.fixMax;\n    };\n\n    LogScale.prototype.parse = function (val) {\n      return val;\n    };\n\n    LogScale.prototype.contain = function (val) {\n      val = mathLog(val) / mathLog(this.base);\n      return contain$1(val, this._extent);\n    };\n\n    LogScale.prototype.normalize = function (val) {\n      val = mathLog(val) / mathLog(this.base);\n      return normalize$1(val, this._extent);\n    };\n\n    LogScale.prototype.scale = function (val) {\n      val = scale$2(val, this._extent);\n      return mathPow$1(this.base, val);\n    };\n\n    LogScale.type = 'log';\n    return LogScale;\n  }(Scale);\n\n  var proto = LogScale.prototype;\n  proto.getMinorTicks = intervalScaleProto.getMinorTicks;\n  proto.getLabel = intervalScaleProto.getLabel;\n\n  function fixRoundingError(val, originalVal) {\n    return roundingErrorFix(val, getPrecision(originalVal));\n  }\n\n  Scale.registerClass(LogScale);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var ScaleRawExtentInfo =\n  /** @class */\n  function () {\n    function ScaleRawExtentInfo(scale, model, // Usually: data extent from all series on this axis.\n    originalExtent) {\n      this._prepareParams(scale, model, originalExtent);\n    }\n    /**\n     * Parameters depending on ouside (like model, user callback)\n     * are prepared and fixed here.\n     */\n\n\n    ScaleRawExtentInfo.prototype._prepareParams = function (scale, model, // Usually: data extent from all series on this axis.\n    dataExtent) {\n      if (dataExtent[1] < dataExtent[0]) {\n        dataExtent = [NaN, NaN];\n      }\n\n      this._dataMin = dataExtent[0];\n      this._dataMax = dataExtent[1];\n      var isOrdinal = this._isOrdinal = scale.type === 'ordinal';\n      this._needCrossZero = scale.type === 'interval' && model.getNeedCrossZero && model.getNeedCrossZero();\n      var modelMinRaw = this._modelMinRaw = model.get('min', true);\n\n      if (isFunction(modelMinRaw)) {\n        // This callback alway provide users the full data extent (before data filtered).\n        this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw({\n          min: dataExtent[0],\n          max: dataExtent[1]\n        }));\n      } else if (modelMinRaw !== 'dataMin') {\n        this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw);\n      }\n\n      var modelMaxRaw = this._modelMaxRaw = model.get('max', true);\n\n      if (isFunction(modelMaxRaw)) {\n        // This callback alway provide users the full data extent (before data filtered).\n        this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw({\n          min: dataExtent[0],\n          max: dataExtent[1]\n        }));\n      } else if (modelMaxRaw !== 'dataMax') {\n        this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw);\n      }\n\n      if (isOrdinal) {\n        // FIXME: there is a flaw here: if there is no \"block\" data processor like `dataZoom`,\n        // and progressive rendering is using, here the category result might just only contain\n        // the processed chunk rather than the entire result.\n        this._axisDataLen = model.getCategories().length;\n      } else {\n        var boundaryGap = model.get('boundaryGap');\n        var boundaryGapArr = isArray(boundaryGap) ? boundaryGap : [boundaryGap || 0, boundaryGap || 0];\n\n        if (typeof boundaryGapArr[0] === 'boolean' || typeof boundaryGapArr[1] === 'boolean') {\n          {\n            console.warn('Boolean type for boundaryGap is only ' + 'allowed for ordinal axis. Please use string in ' + 'percentage instead, e.g., \"20%\". Currently, ' + 'boundaryGap is set to be 0.');\n          }\n          this._boundaryGapInner = [0, 0];\n        } else {\n          this._boundaryGapInner = [parsePercent(boundaryGapArr[0], 1), parsePercent(boundaryGapArr[1], 1)];\n        }\n      }\n    };\n    /**\n     * Calculate extent by prepared parameters.\n     * This method has no external dependency and can be called duplicatedly,\n     * getting the same result.\n     * If parameters changed, should call this method to recalcuate.\n     */\n\n\n    ScaleRawExtentInfo.prototype.calculate = function () {\n      // Notice: When min/max is not set (that is, when there are null/undefined,\n      // which is the most common case), these cases should be ensured:\n      // (1) For 'ordinal', show all axis.data.\n      // (2) For others:\n      //      + `boundaryGap` is applied (if min/max set, boundaryGap is\n      //      disabled).\n      //      + If `needCrossZero`, min/max should be zero, otherwise, min/max should\n      //      be the result that originalExtent enlarged by boundaryGap.\n      // (3) If no data, it should be ensured that `scale.setBlank` is set.\n      var isOrdinal = this._isOrdinal;\n      var dataMin = this._dataMin;\n      var dataMax = this._dataMax;\n      var axisDataLen = this._axisDataLen;\n      var boundaryGapInner = this._boundaryGapInner;\n      var span = !isOrdinal ? dataMax - dataMin || Math.abs(dataMin) : null; // Currently if a `'value'` axis model min is specified as 'dataMin'/'dataMax',\n      // `boundaryGap` will not be used. It's the different from specifying as `null`/`undefined`.\n\n      var min = this._modelMinRaw === 'dataMin' ? dataMin : this._modelMinNum;\n      var max = this._modelMaxRaw === 'dataMax' ? dataMax : this._modelMaxNum; // If `_modelMinNum`/`_modelMaxNum` is `null`/`undefined`, should not be fixed.\n\n      var minFixed = min != null;\n      var maxFixed = max != null;\n\n      if (min == null) {\n        min = isOrdinal ? axisDataLen ? 0 : NaN : dataMin - boundaryGapInner[0] * span;\n      }\n\n      if (max == null) {\n        max = isOrdinal ? axisDataLen ? axisDataLen - 1 : NaN : dataMax + boundaryGapInner[1] * span;\n      }\n\n      (min == null || !isFinite(min)) && (min = NaN);\n      (max == null || !isFinite(max)) && (max = NaN);\n      var isBlank = eqNaN(min) || eqNaN(max) || isOrdinal && !axisDataLen; // If data extent modified, need to recalculated to ensure cross zero.\n\n      if (this._needCrossZero) {\n        // Axis is over zero and min is not set\n        if (min > 0 && max > 0 && !minFixed) {\n          min = 0; // minFixed = true;\n        } // Axis is under zero and max is not set\n\n\n        if (min < 0 && max < 0 && !maxFixed) {\n          max = 0; // maxFixed = true;\n        } // PENDING:\n        // When `needCrossZero` and all data is positive/negative, should it be ensured\n        // that the results processed by boundaryGap are positive/negative?\n        // If so, here `minFixed`/`maxFixed` need to be set.\n\n      }\n\n      var determinedMin = this._determinedMin;\n      var determinedMax = this._determinedMax;\n\n      if (determinedMin != null) {\n        min = determinedMin;\n        minFixed = true;\n      }\n\n      if (determinedMax != null) {\n        max = determinedMax;\n        maxFixed = true;\n      } // Ensure min/max be finite number or NaN here. (not to be null/undefined)\n      // `NaN` means min/max axis is blank.\n\n\n      return {\n        min: min,\n        max: max,\n        minFixed: minFixed,\n        maxFixed: maxFixed,\n        isBlank: isBlank\n      };\n    };\n\n    ScaleRawExtentInfo.prototype.modifyDataMinMax = function (minMaxName, val) {\n      {\n        assert(!this.frozen);\n      }\n      this[DATA_MIN_MAX_ATTR[minMaxName]] = val;\n    };\n\n    ScaleRawExtentInfo.prototype.setDeterminedMinMax = function (minMaxName, val) {\n      var attr = DETERMINED_MIN_MAX_ATTR[minMaxName];\n      {\n        assert(!this.frozen // Earse them usually means logic flaw.\n        && this[attr] == null);\n      }\n      this[attr] = val;\n    };\n\n    ScaleRawExtentInfo.prototype.freeze = function () {\n      // @ts-ignore\n      this.frozen = true;\n    };\n\n    return ScaleRawExtentInfo;\n  }();\n\n  var DETERMINED_MIN_MAX_ATTR = {\n    min: '_determinedMin',\n    max: '_determinedMax'\n  };\n  var DATA_MIN_MAX_ATTR = {\n    min: '_dataMin',\n    max: '_dataMax'\n  };\n  /**\n   * Get scale min max and related info only depends on model settings.\n   * This method can be called after coordinate system created.\n   * For example, in data processing stage.\n   *\n   * Scale extent info probably be required multiple times during a workflow.\n   * For example:\n   * (1) `dataZoom` depends it to get the axis extent in \"100%\" state.\n   * (2) `processor/extentCalculator` depends it to make sure whether axis extent is specified.\n   * (3) `coordSys.update` use it to finally decide the scale extent.\n   * But the callback of `min`/`max` should not be called multiple times.\n   * The code below should not be implemented repeatedly either.\n   * So we cache the result in the scale instance, which will be recreated at the begining\n   * of the workflow (because `scale` instance will be recreated each round of the workflow).\n   */\n\n  function ensureScaleRawExtentInfo(scale, model, // Usually: data extent from all series on this axis.\n  originalExtent) {\n    // Do not permit to recreate.\n    var rawExtentInfo = scale.rawExtentInfo;\n\n    if (rawExtentInfo) {\n      return rawExtentInfo;\n    }\n\n    rawExtentInfo = new ScaleRawExtentInfo(scale, model, originalExtent); // @ts-ignore\n\n    scale.rawExtentInfo = rawExtentInfo;\n    return rawExtentInfo;\n  }\n\n  function parseAxisModelMinMax(scale, minMax) {\n    return minMax == null ? null : eqNaN(minMax) ? NaN : scale.parse(minMax);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Get axis scale extent before niced.\n   * Item of returned array can only be number (including Infinity and NaN).\n   *\n   * Caution:\n   * Precondition of calling this method:\n   * The scale extent has been initialized using series data extent via\n   * `scale.setExtent` or `scale.unionExtentFromData`;\n   */\n\n\n  function getScaleExtent(scale, model) {\n    var scaleType = scale.type;\n    var rawExtentResult = ensureScaleRawExtentInfo(scale, model, scale.getExtent()).calculate();\n    scale.setBlank(rawExtentResult.isBlank);\n    var min = rawExtentResult.min;\n    var max = rawExtentResult.max; // If bars are placed on a base axis of type time or interval account for axis boundary overflow and current axis\n    // is base axis\n    // FIXME\n    // (1) Consider support value axis, where below zero and axis `onZero` should be handled properly.\n    // (2) Refactor the logic with `barGrid`. Is it not need to `makeBarWidthAndOffsetInfo` twice with different extent?\n    //     Should not depend on series type `bar`?\n    // (3) Fix that might overlap when using dataZoom.\n    // (4) Consider other chart types using `barGrid`?\n    // See #6728, #4862, `test/bar-overflow-time-plot.html`\n\n    var ecModel = model.ecModel;\n\n    if (ecModel && scaleType === 'time'\n    /*|| scaleType === 'interval' */\n    ) {\n        var barSeriesModels = prepareLayoutBarSeries('bar', ecModel);\n        var isBaseAxisAndHasBarSeries_1 = false;\n        each(barSeriesModels, function (seriesModel) {\n          isBaseAxisAndHasBarSeries_1 = isBaseAxisAndHasBarSeries_1 || seriesModel.getBaseAxis() === model.axis;\n        });\n\n        if (isBaseAxisAndHasBarSeries_1) {\n          // Calculate placement of bars on axis. TODO should be decoupled\n          // with barLayout\n          var barWidthAndOffset = makeColumnLayout(barSeriesModels); // Adjust axis min and max to account for overflow\n\n          var adjustedScale = adjustScaleForOverflow(min, max, model, barWidthAndOffset);\n          min = adjustedScale.min;\n          max = adjustedScale.max;\n        }\n      }\n\n    return {\n      extent: [min, max],\n      // \"fix\" means \"fixed\", the value should not be\n      // changed in the subsequent steps.\n      fixMin: rawExtentResult.minFixed,\n      fixMax: rawExtentResult.maxFixed\n    };\n  }\n\n  function adjustScaleForOverflow(min, max, model, // Only support cartesian coord yet.\n  barWidthAndOffset) {\n    // Get Axis Length\n    var axisExtent = model.axis.getExtent();\n    var axisLength = axisExtent[1] - axisExtent[0]; // Get bars on current base axis and calculate min and max overflow\n\n    var barsOnCurrentAxis = retrieveColumnLayout(barWidthAndOffset, model.axis);\n\n    if (barsOnCurrentAxis === undefined) {\n      return {\n        min: min,\n        max: max\n      };\n    }\n\n    var minOverflow = Infinity;\n    each(barsOnCurrentAxis, function (item) {\n      minOverflow = Math.min(item.offset, minOverflow);\n    });\n    var maxOverflow = -Infinity;\n    each(barsOnCurrentAxis, function (item) {\n      maxOverflow = Math.max(item.offset + item.width, maxOverflow);\n    });\n    minOverflow = Math.abs(minOverflow);\n    maxOverflow = Math.abs(maxOverflow);\n    var totalOverFlow = minOverflow + maxOverflow; // Calculate required buffer based on old range and overflow\n\n    var oldRange = max - min;\n    var oldRangePercentOfNew = 1 - (minOverflow + maxOverflow) / axisLength;\n    var overflowBuffer = oldRange / oldRangePercentOfNew - oldRange;\n    max += overflowBuffer * (maxOverflow / totalOverFlow);\n    min -= overflowBuffer * (minOverflow / totalOverFlow);\n    return {\n      min: min,\n      max: max\n    };\n  } // Precondition of calling this method:\n  // The scale extent has been initailized using series data extent via\n  // `scale.setExtent` or `scale.unionExtentFromData`;\n\n\n  function niceScaleExtent(scale, inModel) {\n    var model = inModel;\n    var extentInfo = getScaleExtent(scale, model);\n    var extent = extentInfo.extent;\n    var splitNumber = model.get('splitNumber');\n\n    if (scale instanceof LogScale) {\n      scale.base = model.get('logBase');\n    }\n\n    var scaleType = scale.type;\n    var interval = model.get('interval');\n    var isIntervalOrTime = scaleType === 'interval' || scaleType === 'time';\n    scale.setExtent(extent[0], extent[1]);\n    scale.calcNiceExtent({\n      splitNumber: splitNumber,\n      fixMin: extentInfo.fixMin,\n      fixMax: extentInfo.fixMax,\n      minInterval: isIntervalOrTime ? model.get('minInterval') : null,\n      maxInterval: isIntervalOrTime ? model.get('maxInterval') : null\n    }); // If some one specified the min, max. And the default calculated interval\n    // is not good enough. He can specify the interval. It is often appeared\n    // in angle axis with angle 0 - 360. Interval calculated in interval scale is hard\n    // to be 60.\n    // FIXME\n\n    if (interval != null) {\n      scale.setInterval && scale.setInterval(interval);\n    }\n  }\n  /**\n   * @param axisType Default retrieve from model.type\n   */\n\n\n  function createScaleByModel(model, axisType) {\n    axisType = axisType || model.get('type');\n\n    if (axisType) {\n      switch (axisType) {\n        // Buildin scale\n        case 'category':\n          return new OrdinalScale({\n            ordinalMeta: model.getOrdinalMeta ? model.getOrdinalMeta() : model.getCategories(),\n            extent: [Infinity, -Infinity]\n          });\n\n        case 'time':\n          return new TimeScale({\n            locale: model.ecModel.getLocaleModel(),\n            useUTC: model.ecModel.get('useUTC')\n          });\n\n        default:\n          // case 'value'/'interval', 'log', or others.\n          return new (Scale.getClass(axisType) || IntervalScale)();\n      }\n    }\n  }\n  /**\n   * Check if the axis cross 0\n   */\n\n\n  function ifAxisCrossZero(axis) {\n    var dataExtent = axis.scale.getExtent();\n    var min = dataExtent[0];\n    var max = dataExtent[1];\n    return !(min > 0 && max > 0 || min < 0 && max < 0);\n  }\n  /**\n   * @param axis\n   * @return Label formatter function.\n   *         param: {number} tickValue,\n   *         param: {number} idx, the index in all ticks.\n   *                         If category axis, this param is not required.\n   *         return: {string} label string.\n   */\n\n\n  function makeLabelFormatter(axis) {\n    var labelFormatter = axis.getLabelModel().get('formatter');\n    var categoryTickStart = axis.type === 'category' ? axis.scale.getExtent()[0] : null;\n\n    if (axis.scale.type === 'time') {\n      return function (tpl) {\n        return function (tick, idx) {\n          return axis.scale.getFormattedLabel(tick, idx, tpl);\n        };\n      }(labelFormatter);\n    } else if (isString(labelFormatter)) {\n      return function (tpl) {\n        return function (tick) {\n          // For category axis, get raw value; for numeric axis,\n          // get formatted label like '1,333,444'.\n          var label = axis.scale.getLabel(tick);\n          var text = tpl.replace('{value}', label != null ? label : '');\n          return text;\n        };\n      }(labelFormatter);\n    } else if (isFunction(labelFormatter)) {\n      return function (cb) {\n        return function (tick, idx) {\n          // The original intention of `idx` is \"the index of the tick in all ticks\".\n          // But the previous implementation of category axis do not consider the\n          // `axisLabel.interval`, which cause that, for example, the `interval` is\n          // `1`, then the ticks \"name5\", \"name7\", \"name9\" are displayed, where the\n          // corresponding `idx` are `0`, `2`, `4`, but not `0`, `1`, `2`. So we keep\n          // the definition here for back compatibility.\n          if (categoryTickStart != null) {\n            idx = tick.value - categoryTickStart;\n          }\n\n          return cb(getAxisRawValue(axis, tick), idx, tick.level != null ? {\n            level: tick.level\n          } : null);\n        };\n      }(labelFormatter);\n    } else {\n      return function (tick) {\n        return axis.scale.getLabel(tick);\n      };\n    }\n  }\n\n  function getAxisRawValue(axis, tick) {\n    // In category axis with data zoom, tick is not the original\n    // index of axis.data. So tick should not be exposed to user\n    // in category axis.\n    return axis.type === 'category' ? axis.scale.getLabel(tick) : tick.value;\n  }\n  /**\n   * @param axis\n   * @return Be null/undefined if no labels.\n   */\n\n\n  function estimateLabelUnionRect(axis) {\n    var axisModel = axis.model;\n    var scale = axis.scale;\n\n    if (!axisModel.get(['axisLabel', 'show']) || scale.isBlank()) {\n      return;\n    }\n\n    var realNumberScaleTicks;\n    var tickCount;\n    var categoryScaleExtent = scale.getExtent(); // Optimize for large category data, avoid call `getTicks()`.\n\n    if (scale instanceof OrdinalScale) {\n      tickCount = scale.count();\n    } else {\n      realNumberScaleTicks = scale.getTicks();\n      tickCount = realNumberScaleTicks.length;\n    }\n\n    var axisLabelModel = axis.getLabelModel();\n    var labelFormatter = makeLabelFormatter(axis);\n    var rect;\n    var step = 1; // Simple optimization for large amount of labels\n\n    if (tickCount > 40) {\n      step = Math.ceil(tickCount / 40);\n    }\n\n    for (var i = 0; i < tickCount; i += step) {\n      var tick = realNumberScaleTicks ? realNumberScaleTicks[i] : {\n        value: categoryScaleExtent[0] + i\n      };\n      var label = labelFormatter(tick, i);\n      var unrotatedSingleRect = axisLabelModel.getTextRect(label);\n      var singleRect = rotateTextRect(unrotatedSingleRect, axisLabelModel.get('rotate') || 0);\n      rect ? rect.union(singleRect) : rect = singleRect;\n    }\n\n    return rect;\n  }\n\n  function rotateTextRect(textRect, rotate) {\n    var rotateRadians = rotate * Math.PI / 180;\n    var beforeWidth = textRect.width;\n    var beforeHeight = textRect.height;\n    var afterWidth = beforeWidth * Math.abs(Math.cos(rotateRadians)) + Math.abs(beforeHeight * Math.sin(rotateRadians));\n    var afterHeight = beforeWidth * Math.abs(Math.sin(rotateRadians)) + Math.abs(beforeHeight * Math.cos(rotateRadians));\n    var rotatedRect = new BoundingRect(textRect.x, textRect.y, afterWidth, afterHeight);\n    return rotatedRect;\n  }\n  /**\n   * @param model axisLabelModel or axisTickModel\n   * @return {number|String} Can be null|'auto'|number|function\n   */\n\n\n  function getOptionCategoryInterval(model) {\n    var interval = model.get('interval');\n    return interval == null ? 'auto' : interval;\n  }\n  /**\n   * Set `categoryInterval` as 0 implicitly indicates that\n   * show all labels reguardless of overlap.\n   * @param {Object} axis axisModel.axis\n   */\n\n\n  function shouldShowAllLabels(axis) {\n    return axis.type === 'category' && getOptionCategoryInterval(axis.getLabelModel()) === 0;\n  }\n\n  function getDataDimensionsOnAxis(data, axisDim) {\n    // Remove duplicated dat dimensions caused by `getStackedDimension`.\n    var dataDimMap = {}; // Currently `mapDimensionsAll` will contain stack result dimension ('__\\0ecstackresult').\n    // PENDING: is it reasonable? Do we need to remove the original dim from \"coord dim\" since\n    // there has been stacked result dim?\n\n    each(data.mapDimensionsAll(axisDim), function (dataDim) {\n      // For example, the extent of the original dimension\n      // is [0.1, 0.5], the extent of the `stackResultDimension`\n      // is [7, 9], the final extent should NOT include [0.1, 0.5],\n      // because there is no graphic corresponding to [0.1, 0.5].\n      // See the case in `test/area-stack.html` `main1`, where area line\n      // stack needs `yAxis` not start from 0.\n      dataDimMap[getStackedDimension(data, dataDim)] = true;\n    });\n    return keys(dataDimMap);\n  }\n\n  function unionAxisExtentFromData(dataExtent, data, axisDim) {\n    if (data) {\n      each(getDataDimensionsOnAxis(data, axisDim), function (dim) {\n        var seriesExtent = data.getApproximateExtent(dim);\n        seriesExtent[0] < dataExtent[0] && (dataExtent[0] = seriesExtent[0]);\n        seriesExtent[1] > dataExtent[1] && (dataExtent[1] = seriesExtent[1]);\n      });\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  var AxisModelCommonMixin =\n  /** @class */\n  function () {\n    function AxisModelCommonMixin() {}\n\n    AxisModelCommonMixin.prototype.getNeedCrossZero = function () {\n      var option = this.option;\n      return !option.scale;\n    };\n    /**\n     * Should be implemented by each axis model if necessary.\n     * @return coordinate system model\n     */\n\n\n    AxisModelCommonMixin.prototype.getCoordSysModel = function () {\n      return;\n    };\n\n    return AxisModelCommonMixin;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * This module exposes helper functions for developing extensions.\n   */\n\n  /**\n   * Create a muti dimension List structure from seriesModel.\n   */\n\n\n  function createList(seriesModel) {\n    return createSeriesData(null, seriesModel);\n  } // export function createGraph(seriesModel) {\n\n\n  var dataStack$1 = {\n    isDimensionStacked: isDimensionStacked,\n    enableDataStack: enableDataStack,\n    getStackedDimension: getStackedDimension\n  };\n  /**\n   * Create scale\n   * @param {Array.<number>} dataExtent\n   * @param {Object|module:echarts/Model} option If `optoin.type`\n   *        is secified, it can only be `'value'` currently.\n   */\n\n  function createScale(dataExtent, option) {\n    var axisModel = option;\n\n    if (!(option instanceof Model)) {\n      axisModel = new Model(option); // FIXME\n      // Currently AxisModelCommonMixin has nothing to do with the\n      // the requirements of `axisHelper.createScaleByModel`. For\n      // example the method `getCategories` and `getOrdinalMeta`\n      // are required for `'category'` axis, and ecModel are required\n      // for `'time'` axis. But occationally echarts-gl happened\n      // to only use `'value'` axis.\n      // zrUtil.mixin(axisModel, AxisModelCommonMixin);\n    }\n\n    var scale = createScaleByModel(axisModel);\n    scale.setExtent(dataExtent[0], dataExtent[1]);\n    niceScaleExtent(scale, axisModel);\n    return scale;\n  }\n  /**\n   * Mixin common methods to axis model,\n   *\n   * Inlcude methods\n   * `getFormattedLabels() => Array.<string>`\n   * `getCategories() => Array.<string>`\n   * `getMin(origin: boolean) => number`\n   * `getMax(origin: boolean) => number`\n   * `getNeedCrossZero() => boolean`\n   */\n\n\n  function mixinAxisModelCommonMethods(Model$$1) {\n    mixin(Model$$1, AxisModelCommonMixin);\n  }\n\n  function createTextStyle$1(textStyleModel, opts) {\n    opts = opts || {};\n    return createTextStyle(textStyleModel, null, null, opts.state !== 'normal');\n  }\n\n  var helper = (Object.freeze || Object)({\n    createList: createList,\n    getLayoutRect: getLayoutRect,\n    dataStack: dataStack$1,\n    createScale: createScale,\n    mixinAxisModelCommonMethods: mixinAxisModelCommonMethods,\n    getECData: getECData,\n    createTextStyle: createTextStyle$1,\n    createDimensions: createDimensions,\n    createSymbol: createSymbol,\n    enableHoverEmphasis: enableHoverEmphasis\n  });\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var extensions = [];\n  var extensionRegisters = {\n    registerPreprocessor: registerPreprocessor,\n    registerProcessor: registerProcessor,\n    registerPostInit: registerPostInit,\n    registerPostUpdate: registerPostUpdate,\n    registerUpdateLifecycle: registerUpdateLifecycle,\n    registerAction: registerAction,\n    registerCoordinateSystem: registerCoordinateSystem,\n    registerLayout: registerLayout,\n    registerVisual: registerVisual,\n    registerTransform: registerTransform,\n    registerLoading: registerLoading,\n    registerMap: registerMap,\n    registerImpl: registerImpl,\n    PRIORITY: PRIORITY,\n    ComponentModel: ComponentModel,\n    ComponentView: ComponentView,\n    SeriesModel: SeriesModel,\n    ChartView: ChartView,\n    // TODO Use ComponentModel and SeriesModel instead of Constructor\n    registerComponentModel: function (ComponentModelClass) {\n      ComponentModel.registerClass(ComponentModelClass);\n    },\n    registerComponentView: function (ComponentViewClass) {\n      ComponentView.registerClass(ComponentViewClass);\n    },\n    registerSeriesModel: function (SeriesModelClass) {\n      SeriesModel.registerClass(SeriesModelClass);\n    },\n    registerChartView: function (ChartViewClass) {\n      ChartView.registerClass(ChartViewClass);\n    },\n    registerSubTypeDefaulter: function (componentType, defaulter) {\n      ComponentModel.registerSubTypeDefaulter(componentType, defaulter);\n    },\n    registerPainter: function (painterType, PainterCtor) {\n      registerPainter(painterType, PainterCtor);\n    }\n  };\n\n  function use(ext) {\n    if (isArray(ext)) {\n      // use([ChartLine, ChartBar]);\n      each(ext, function (singleExt) {\n        use(singleExt);\n      });\n      return;\n    }\n\n    if (indexOf(extensions, ext) >= 0) {\n      return;\n    }\n\n    extensions.push(ext);\n\n    if (isFunction(ext)) {\n      ext = {\n        install: ext\n      };\n    }\n\n    ext.install(extensionRegisters);\n  }\n\n  var EPSILON$4 = 1e-8;\n\n  function isAroundEqual$1(a, b) {\n    return Math.abs(a - b) < EPSILON$4;\n  }\n\n  function contain$2(points, x, y) {\n    var w = 0;\n    var p = points[0];\n\n    if (!p) {\n      return false;\n    }\n\n    for (var i = 1; i < points.length; i++) {\n      var p2 = points[i];\n      w += windingLine(p[0], p[1], p2[0], p2[1], x, y);\n      p = p2;\n    }\n\n    var p0 = points[0];\n\n    if (!isAroundEqual$1(p[0], p0[0]) || !isAroundEqual$1(p[1], p0[1])) {\n      w += windingLine(p[0], p[1], p0[0], p0[1], x, y);\n    }\n\n    return w !== 0;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var TMP_TRANSFORM = [];\n\n  function transformPoints(points, transform) {\n    for (var p = 0; p < points.length; p++) {\n      applyTransform(points[p], points[p], transform);\n    }\n  }\n\n  function updateBBoxFromPoints(points, min$$1, max$$1, projection) {\n    for (var i = 0; i < points.length; i++) {\n      var p = points[i];\n\n      if (projection) {\n        // projection may return null point.\n        p = projection.project(p);\n      }\n\n      if (p && isFinite(p[0]) && isFinite(p[1])) {\n        min(min$$1, min$$1, p);\n        max(max$$1, max$$1, p);\n      }\n    }\n  }\n\n  function centroid(points) {\n    var signedArea = 0;\n    var cx = 0;\n    var cy = 0;\n    var len$$1 = points.length;\n    var x0 = points[len$$1 - 1][0];\n    var y0 = points[len$$1 - 1][1]; // Polygon should been closed.\n\n    for (var i = 0; i < len$$1; i++) {\n      var x1 = points[i][0];\n      var y1 = points[i][1];\n      var a = x0 * y1 - x1 * y0;\n      signedArea += a;\n      cx += (x0 + x1) * a;\n      cy += (y0 + y1) * a;\n      x0 = x1;\n      y0 = y1;\n    }\n\n    return signedArea ? [cx / signedArea / 3, cy / signedArea / 3, signedArea] : [points[0][0] || 0, points[0][1] || 0];\n  }\n\n  var Region =\n  /** @class */\n  function () {\n    function Region(name) {\n      this.name = name;\n    }\n\n    Region.prototype.setCenter = function (center) {\n      this._center = center;\n    };\n    /**\n     * Get center point in data unit. That is,\n     * for GeoJSONRegion, the unit is lat/lng,\n     * for GeoSVGRegion, the unit is SVG local coord.\n     */\n\n\n    Region.prototype.getCenter = function () {\n      var center = this._center;\n\n      if (!center) {\n        // In most cases there are no need to calculate this center.\n        // So calculate only when called.\n        center = this._center = this.calcCenter();\n      }\n\n      return center;\n    };\n\n    return Region;\n  }();\n\n  var GeoJSONPolygonGeometry =\n  /** @class */\n  function () {\n    function GeoJSONPolygonGeometry(exterior, interiors) {\n      this.type = 'polygon';\n      this.exterior = exterior;\n      this.interiors = interiors;\n    }\n\n    return GeoJSONPolygonGeometry;\n  }();\n\n  var GeoJSONLineStringGeometry =\n  /** @class */\n  function () {\n    function GeoJSONLineStringGeometry(points) {\n      this.type = 'linestring';\n      this.points = points;\n    }\n\n    return GeoJSONLineStringGeometry;\n  }();\n\n  var GeoJSONRegion =\n  /** @class */\n  function (_super) {\n    __extends(GeoJSONRegion, _super);\n\n    function GeoJSONRegion(name, geometries, cp) {\n      var _this = _super.call(this, name) || this;\n\n      _this.type = 'geoJSON';\n      _this.geometries = geometries;\n      _this._center = cp && [cp[0], cp[1]];\n      return _this;\n    }\n\n    GeoJSONRegion.prototype.calcCenter = function () {\n      var geometries = this.geometries;\n      var largestGeo;\n      var largestGeoSize = 0;\n\n      for (var i = 0; i < geometries.length; i++) {\n        var geo = geometries[i];\n        var exterior = geo.exterior; // Simple trick to use points count instead of polygon area as region size.\n        // Ignore linestring\n\n        var size = exterior && exterior.length;\n\n        if (size > largestGeoSize) {\n          largestGeo = geo;\n          largestGeoSize = size;\n        }\n      }\n\n      if (largestGeo) {\n        return centroid(largestGeo.exterior);\n      } // from bounding rect by default.\n\n\n      var rect = this.getBoundingRect();\n      return [rect.x + rect.width / 2, rect.y + rect.height / 2];\n    };\n\n    GeoJSONRegion.prototype.getBoundingRect = function (projection) {\n      var rect = this._rect; // Always recalculate if using projection.\n\n      if (rect && !projection) {\n        return rect;\n      }\n\n      var min$$1 = [Infinity, Infinity];\n      var max$$1 = [-Infinity, -Infinity];\n      var geometries = this.geometries;\n      each(geometries, function (geo) {\n        if (geo.type === 'polygon') {\n          // Doesn't consider hole\n          updateBBoxFromPoints(geo.exterior, min$$1, max$$1, projection);\n        } else {\n          each(geo.points, function (points) {\n            updateBBoxFromPoints(points, min$$1, max$$1, projection);\n          });\n        }\n      }); // Normalie invalid bounding.\n\n      if (!(isFinite(min$$1[0]) && isFinite(min$$1[1]) && isFinite(max$$1[0]) && isFinite(max$$1[1]))) {\n        min$$1[0] = min$$1[1] = max$$1[0] = max$$1[1] = 0;\n      }\n\n      rect = new BoundingRect(min$$1[0], min$$1[1], max$$1[0] - min$$1[0], max$$1[1] - min$$1[1]);\n\n      if (!projection) {\n        this._rect = rect;\n      }\n\n      return rect;\n    };\n\n    GeoJSONRegion.prototype.contain = function (coord) {\n      var rect = this.getBoundingRect();\n      var geometries = this.geometries;\n\n      if (!rect.contain(coord[0], coord[1])) {\n        return false;\n      }\n\n      loopGeo: for (var i = 0, len$$1 = geometries.length; i < len$$1; i++) {\n        var geo = geometries[i]; // Only support polygon.\n\n        if (geo.type !== 'polygon') {\n          continue;\n        }\n\n        var exterior = geo.exterior;\n        var interiors = geo.interiors;\n\n        if (contain$2(exterior, coord[0], coord[1])) {\n          // Not in the region if point is in the hole.\n          for (var k = 0; k < (interiors ? interiors.length : 0); k++) {\n            if (contain$2(interiors[k], coord[0], coord[1])) {\n              continue loopGeo;\n            }\n          }\n\n          return true;\n        }\n      }\n\n      return false;\n    };\n    /**\n     * Transform the raw coords to target bounding.\n     * @param x\n     * @param y\n     * @param width\n     * @param height\n     */\n\n\n    GeoJSONRegion.prototype.transformTo = function (x, y, width, height) {\n      var rect = this.getBoundingRect();\n      var aspect = rect.width / rect.height;\n\n      if (!width) {\n        width = aspect * height;\n      } else if (!height) {\n        height = width / aspect;\n      }\n\n      var target = new BoundingRect(x, y, width, height);\n      var transform = rect.calculateTransform(target);\n      var geometries = this.geometries;\n\n      for (var i = 0; i < geometries.length; i++) {\n        var geo = geometries[i];\n\n        if (geo.type === 'polygon') {\n          transformPoints(geo.exterior, transform);\n          each(geo.interiors, function (interior) {\n            transformPoints(interior, transform);\n          });\n        } else {\n          each(geo.points, function (points) {\n            transformPoints(points, transform);\n          });\n        }\n      }\n\n      rect = this._rect;\n      rect.copy(target); // Update center\n\n      this._center = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n    };\n\n    GeoJSONRegion.prototype.cloneShallow = function (name) {\n      name == null && (name = this.name);\n      var newRegion = new GeoJSONRegion(name, this.geometries, this._center);\n      newRegion._rect = this._rect;\n      newRegion.transformTo = null; // Simply avoid to be called.\n\n      return newRegion;\n    };\n\n    return GeoJSONRegion;\n  }(Region);\n\n  var GeoSVGRegion =\n  /** @class */\n  function (_super) {\n    __extends(GeoSVGRegion, _super);\n\n    function GeoSVGRegion(name, elOnlyForCalculate) {\n      var _this = _super.call(this, name) || this;\n\n      _this.type = 'geoSVG';\n      _this._elOnlyForCalculate = elOnlyForCalculate;\n      return _this;\n    }\n\n    GeoSVGRegion.prototype.calcCenter = function () {\n      var el = this._elOnlyForCalculate;\n      var rect = el.getBoundingRect();\n      var center = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n      var mat = identity(TMP_TRANSFORM);\n      var target = el;\n\n      while (target && !target.isGeoSVGGraphicRoot) {\n        mul$1(mat, target.getLocalTransform(), mat);\n        target = target.parent;\n      }\n\n      invert(mat, mat);\n      applyTransform(center, center, mat);\n      return center;\n    };\n\n    return GeoSVGRegion;\n  }(Region);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Parse and decode geo json\n   */\n\n\n  function decode(json) {\n    if (!json.UTF8Encoding) {\n      return json;\n    }\n\n    var jsonCompressed = json;\n    var encodeScale = jsonCompressed.UTF8Scale;\n\n    if (encodeScale == null) {\n      encodeScale = 1024;\n    }\n\n    var features = jsonCompressed.features;\n    each(features, function (feature) {\n      var geometry = feature.geometry;\n      var encodeOffsets = geometry.encodeOffsets;\n      var coordinates = geometry.coordinates; // Geometry may be appeded manually in the script after json loaded.\n      // In this case this geometry is usually not encoded.\n\n      if (!encodeOffsets) {\n        return;\n      }\n\n      switch (geometry.type) {\n        case 'LineString':\n          geometry.coordinates = decodeRing(coordinates, encodeOffsets, encodeScale);\n          break;\n\n        case 'Polygon':\n          decodeRings(coordinates, encodeOffsets, encodeScale);\n          break;\n\n        case 'MultiLineString':\n          decodeRings(coordinates, encodeOffsets, encodeScale);\n          break;\n\n        case 'MultiPolygon':\n          each(coordinates, function (rings, idx) {\n            return decodeRings(rings, encodeOffsets[idx], encodeScale);\n          });\n      }\n    }); // Has been decoded\n\n    jsonCompressed.UTF8Encoding = false;\n    return jsonCompressed;\n  }\n\n  function decodeRings(rings, encodeOffsets, encodeScale) {\n    for (var c = 0; c < rings.length; c++) {\n      rings[c] = decodeRing(rings[c], encodeOffsets[c], encodeScale);\n    }\n  }\n\n  function decodeRing(coordinate, encodeOffsets, encodeScale) {\n    var result = [];\n    var prevX = encodeOffsets[0];\n    var prevY = encodeOffsets[1];\n\n    for (var i = 0; i < coordinate.length; i += 2) {\n      var x = coordinate.charCodeAt(i) - 64;\n      var y = coordinate.charCodeAt(i + 1) - 64; // ZigZag decoding\n\n      x = x >> 1 ^ -(x & 1);\n      y = y >> 1 ^ -(y & 1); // Delta deocding\n\n      x += prevX;\n      y += prevY;\n      prevX = x;\n      prevY = y; // Dequantize\n\n      result.push([x / encodeScale, y / encodeScale]);\n    }\n\n    return result;\n  }\n\n  function parseGeoJSON(geoJson, nameProperty) {\n    geoJson = decode(geoJson);\n    return map(filter(geoJson.features, function (featureObj) {\n      // Output of mapshaper may have geometry null\n      return featureObj.geometry && featureObj.properties && featureObj.geometry.coordinates.length > 0;\n    }), function (featureObj) {\n      var properties = featureObj.properties;\n      var geo = featureObj.geometry;\n      var geometries = [];\n\n      switch (geo.type) {\n        case 'Polygon':\n          var coordinates = geo.coordinates; // According to the GeoJSON specification.\n          // First must be exterior, and the rest are all interior(holes).\n\n          geometries.push(new GeoJSONPolygonGeometry(coordinates[0], coordinates.slice(1)));\n          break;\n\n        case 'MultiPolygon':\n          each(geo.coordinates, function (item) {\n            if (item[0]) {\n              geometries.push(new GeoJSONPolygonGeometry(item[0], item.slice(1)));\n            }\n          });\n          break;\n\n        case 'LineString':\n          geometries.push(new GeoJSONLineStringGeometry([geo.coordinates]));\n          break;\n\n        case 'MultiLineString':\n          geometries.push(new GeoJSONLineStringGeometry(geo.coordinates));\n      }\n\n      var region = new GeoJSONRegion(properties[nameProperty || 'name'], geometries, properties.cp);\n      region.properties = properties;\n      return region;\n    });\n  }\n\n  var number = (Object.freeze || Object)({\n    linearMap: linearMap,\n    round: round,\n    asc: asc,\n    getPrecision: getPrecision,\n    getPrecisionSafe: getPrecisionSafe,\n    getPixelPrecision: getPixelPrecision,\n    getPercentWithPrecision: getPercentWithPrecision,\n    MAX_SAFE_INTEGER: MAX_SAFE_INTEGER,\n    remRadian: remRadian,\n    isRadianAroundZero: isRadianAroundZero,\n    parseDate: parseDate,\n    quantity: quantity,\n    quantityExponent: quantityExponent,\n    nice: nice,\n    quantile: quantile,\n    reformIntervals: reformIntervals,\n    isNumeric: isNumeric,\n    numericToNumber: numericToNumber\n  });\n  var time = (Object.freeze || Object)({\n    parse: parseDate,\n    format: format\n  });\n  var graphic$1 = (Object.freeze || Object)({\n    extendShape: extendShape,\n    extendPath: extendPath,\n    makePath: makePath,\n    makeImage: makeImage,\n    mergePath: mergePath,\n    resizePath: resizePath,\n    createIcon: createIcon,\n    updateProps: updateProps,\n    initProps: initProps,\n    getTransform: getTransform,\n    clipPointsByRect: clipPointsByRect,\n    clipRectByRect: clipRectByRect,\n    registerShape: registerShape,\n    getShapeClass: getShapeClass,\n    Group: Group,\n    Image: ZRImage,\n    Text: ZRText,\n    Circle: Circle,\n    Ellipse: Ellipse,\n    Sector: Sector,\n    Ring: Ring,\n    Polygon: Polygon,\n    Polyline: Polyline,\n    Rect: Rect,\n    Line: Line,\n    BezierCurve: BezierCurve,\n    Arc: Arc,\n    IncrementalDisplayable: IncrementalDisplayable,\n    CompoundPath: CompoundPath,\n    LinearGradient: LinearGradient,\n    RadialGradient: RadialGradient,\n    BoundingRect: BoundingRect\n  });\n  var format$1 = (Object.freeze || Object)({\n    addCommas: addCommas,\n    toCamelCase: toCamelCase,\n    normalizeCssArray: normalizeCssArray$1,\n    encodeHTML: encodeHTML,\n    formatTpl: formatTpl,\n    getTooltipMarker: getTooltipMarker,\n    formatTime: formatTime,\n    capitalFirst: capitalFirst,\n    truncateText: truncateText,\n    getTextRect: getTextRect\n  });\n  var util$1 = (Object.freeze || Object)({\n    map: map,\n    each: each,\n    indexOf: indexOf,\n    inherits: inherits,\n    reduce: reduce,\n    filter: filter,\n    bind: bind,\n    curry: curry,\n    isArray: isArray,\n    isString: isString,\n    isObject: isObject,\n    isFunction: isFunction,\n    extend: extend,\n    defaults: defaults,\n    clone: clone,\n    merge: merge\n  });\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var inner$5 = makeInner();\n\n  function createAxisLabels(axis) {\n    // Only ordinal scale support tick interval\n    return axis.type === 'category' ? makeCategoryLabels(axis) : makeRealNumberLabels(axis);\n  }\n  /**\n   * @param {module:echats/coord/Axis} axis\n   * @param {module:echarts/model/Model} tickModel For example, can be axisTick, splitLine, splitArea.\n   * @return {Object} {\n   *     ticks: Array.<number>\n   *     tickCategoryInterval: number\n   * }\n   */\n\n\n  function createAxisTicks(axis, tickModel) {\n    // Only ordinal scale support tick interval\n    return axis.type === 'category' ? makeCategoryTicks(axis, tickModel) : {\n      ticks: map(axis.scale.getTicks(), function (tick) {\n        return tick.value;\n      })\n    };\n  }\n\n  function makeCategoryLabels(axis) {\n    var labelModel = axis.getLabelModel();\n    var result = makeCategoryLabelsActually(axis, labelModel);\n    return !labelModel.get('show') || axis.scale.isBlank() ? {\n      labels: [],\n      labelCategoryInterval: result.labelCategoryInterval\n    } : result;\n  }\n\n  function makeCategoryLabelsActually(axis, labelModel) {\n    var labelsCache = getListCache(axis, 'labels');\n    var optionLabelInterval = getOptionCategoryInterval(labelModel);\n    var result = listCacheGet(labelsCache, optionLabelInterval);\n\n    if (result) {\n      return result;\n    }\n\n    var labels;\n    var numericLabelInterval;\n\n    if (isFunction(optionLabelInterval)) {\n      labels = makeLabelsByCustomizedCategoryInterval(axis, optionLabelInterval);\n    } else {\n      numericLabelInterval = optionLabelInterval === 'auto' ? makeAutoCategoryInterval(axis) : optionLabelInterval;\n      labels = makeLabelsByNumericCategoryInterval(axis, numericLabelInterval);\n    } // Cache to avoid calling interval function repeatly.\n\n\n    return listCacheSet(labelsCache, optionLabelInterval, {\n      labels: labels,\n      labelCategoryInterval: numericLabelInterval\n    });\n  }\n\n  function makeCategoryTicks(axis, tickModel) {\n    var ticksCache = getListCache(axis, 'ticks');\n    var optionTickInterval = getOptionCategoryInterval(tickModel);\n    var result = listCacheGet(ticksCache, optionTickInterval);\n\n    if (result) {\n      return result;\n    }\n\n    var ticks;\n    var tickCategoryInterval; // Optimize for the case that large category data and no label displayed,\n    // we should not return all ticks.\n\n    if (!tickModel.get('show') || axis.scale.isBlank()) {\n      ticks = [];\n    }\n\n    if (isFunction(optionTickInterval)) {\n      ticks = makeLabelsByCustomizedCategoryInterval(axis, optionTickInterval, true);\n    } // Always use label interval by default despite label show. Consider this\n    // scenario, Use multiple grid with the xAxis sync, and only one xAxis shows\n    // labels. `splitLine` and `axisTick` should be consistent in this case.\n    else if (optionTickInterval === 'auto') {\n        var labelsResult = makeCategoryLabelsActually(axis, axis.getLabelModel());\n        tickCategoryInterval = labelsResult.labelCategoryInterval;\n        ticks = map(labelsResult.labels, function (labelItem) {\n          return labelItem.tickValue;\n        });\n      } else {\n        tickCategoryInterval = optionTickInterval;\n        ticks = makeLabelsByNumericCategoryInterval(axis, tickCategoryInterval, true);\n      } // Cache to avoid calling interval function repeatly.\n\n\n    return listCacheSet(ticksCache, optionTickInterval, {\n      ticks: ticks,\n      tickCategoryInterval: tickCategoryInterval\n    });\n  }\n\n  function makeRealNumberLabels(axis) {\n    var ticks = axis.scale.getTicks();\n    var labelFormatter = makeLabelFormatter(axis);\n    return {\n      labels: map(ticks, function (tick, idx) {\n        return {\n          level: tick.level,\n          formattedLabel: labelFormatter(tick, idx),\n          rawLabel: axis.scale.getLabel(tick),\n          tickValue: tick.value\n        };\n      })\n    };\n  }\n\n  function getListCache(axis, prop) {\n    // Because key can be funciton, and cache size always be small, we use array cache.\n    return inner$5(axis)[prop] || (inner$5(axis)[prop] = []);\n  }\n\n  function listCacheGet(cache, key) {\n    for (var i = 0; i < cache.length; i++) {\n      if (cache[i].key === key) {\n        return cache[i].value;\n      }\n    }\n  }\n\n  function listCacheSet(cache, key, value) {\n    cache.push({\n      key: key,\n      value: value\n    });\n    return value;\n  }\n\n  function makeAutoCategoryInterval(axis) {\n    var result = inner$5(axis).autoInterval;\n    return result != null ? result : inner$5(axis).autoInterval = axis.calculateCategoryInterval();\n  }\n  /**\n   * Calculate interval for category axis ticks and labels.\n   * To get precise result, at least one of `getRotate` and `isHorizontal`\n   * should be implemented in axis.\n   */\n\n\n  function calculateCategoryInterval(axis) {\n    var params = fetchAutoCategoryIntervalCalculationParams(axis);\n    var labelFormatter = makeLabelFormatter(axis);\n    var rotation = (params.axisRotate - params.labelRotate) / 180 * Math.PI;\n    var ordinalScale = axis.scale;\n    var ordinalExtent = ordinalScale.getExtent(); // Providing this method is for optimization:\n    // avoid generating a long array by `getTicks`\n    // in large category data case.\n\n    var tickCount = ordinalScale.count();\n\n    if (ordinalExtent[1] - ordinalExtent[0] < 1) {\n      return 0;\n    }\n\n    var step = 1; // Simple optimization. Empirical value: tick count should less than 40.\n\n    if (tickCount > 40) {\n      step = Math.max(1, Math.floor(tickCount / 40));\n    }\n\n    var tickValue = ordinalExtent[0];\n    var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\n    var unitW = Math.abs(unitSpan * Math.cos(rotation));\n    var unitH = Math.abs(unitSpan * Math.sin(rotation));\n    var maxW = 0;\n    var maxH = 0; // Caution: Performance sensitive for large category data.\n    // Consider dataZoom, we should make appropriate step to avoid O(n) loop.\n\n    for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n      var width = 0;\n      var height = 0; // Not precise, do not consider align and vertical align\n      // and each distance from axis line yet.\n\n      var rect = getBoundingRect(labelFormatter({\n        value: tickValue\n      }), params.font, 'center', 'top'); // Magic number\n\n      width = rect.width * 1.3;\n      height = rect.height * 1.3; // Min size, void long loop.\n\n      maxW = Math.max(maxW, width, 7);\n      maxH = Math.max(maxH, height, 7);\n    }\n\n    var dw = maxW / unitW;\n    var dh = maxH / unitH; // 0/0 is NaN, 1/0 is Infinity.\n\n    isNaN(dw) && (dw = Infinity);\n    isNaN(dh) && (dh = Infinity);\n    var interval = Math.max(0, Math.floor(Math.min(dw, dh)));\n    var cache = inner$5(axis.model);\n    var axisExtent = axis.getExtent();\n    var lastAutoInterval = cache.lastAutoInterval;\n    var lastTickCount = cache.lastTickCount; // Use cache to keep interval stable while moving zoom window,\n    // otherwise the calculated interval might jitter when the zoom\n    // window size is close to the interval-changing size.\n    // For example, if all of the axis labels are `a, b, c, d, e, f, g`.\n    // The jitter will cause that sometimes the displayed labels are\n    // `a, d, g` (interval: 2) sometimes `a, c, e`(interval: 1).\n\n    if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1 // Always choose the bigger one, otherwise the critical\n    // point is not the same when zooming in or zooming out.\n    && lastAutoInterval > interval // If the axis change is caused by chart resize, the cache should not\n    // be used. Otherwise some hiden labels might not be shown again.\n    && cache.axisExtent0 === axisExtent[0] && cache.axisExtent1 === axisExtent[1]) {\n      interval = lastAutoInterval;\n    } // Only update cache if cache not used, otherwise the\n    // changing of interval is too insensitive.\n    else {\n        cache.lastTickCount = tickCount;\n        cache.lastAutoInterval = interval;\n        cache.axisExtent0 = axisExtent[0];\n        cache.axisExtent1 = axisExtent[1];\n      }\n\n    return interval;\n  }\n\n  function fetchAutoCategoryIntervalCalculationParams(axis) {\n    var labelModel = axis.getLabelModel();\n    return {\n      axisRotate: axis.getRotate ? axis.getRotate() : axis.isHorizontal && !axis.isHorizontal() ? 90 : 0,\n      labelRotate: labelModel.get('rotate') || 0,\n      font: labelModel.getFont()\n    };\n  }\n\n  function makeLabelsByNumericCategoryInterval(axis, categoryInterval, onlyTick) {\n    var labelFormatter = makeLabelFormatter(axis);\n    var ordinalScale = axis.scale;\n    var ordinalExtent = ordinalScale.getExtent();\n    var labelModel = axis.getLabelModel();\n    var result = []; // TODO: axisType: ordinalTime, pick the tick from each month/day/year/...\n\n    var step = Math.max((categoryInterval || 0) + 1, 1);\n    var startTick = ordinalExtent[0];\n    var tickCount = ordinalScale.count(); // Calculate start tick based on zero if possible to keep label consistent\n    // while zooming and moving while interval > 0. Otherwise the selection\n    // of displayable ticks and symbols probably keep changing.\n    // 3 is empirical value.\n\n    if (startTick !== 0 && step > 1 && tickCount / step > 2) {\n      startTick = Math.round(Math.ceil(startTick / step) * step);\n    } // (1) Only add min max label here but leave overlap checking\n    // to render stage, which also ensure the returned list\n    // suitable for splitLine and splitArea rendering.\n    // (2) Scales except category always contain min max label so\n    // do not need to perform this process.\n\n\n    var showAllLabel = shouldShowAllLabels(axis);\n    var includeMinLabel = labelModel.get('showMinLabel') || showAllLabel;\n    var includeMaxLabel = labelModel.get('showMaxLabel') || showAllLabel;\n\n    if (includeMinLabel && startTick !== ordinalExtent[0]) {\n      addItem(ordinalExtent[0]);\n    } // Optimize: avoid generating large array by `ordinalScale.getTicks()`.\n\n\n    var tickValue = startTick;\n\n    for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n      addItem(tickValue);\n    }\n\n    if (includeMaxLabel && tickValue - step !== ordinalExtent[1]) {\n      addItem(ordinalExtent[1]);\n    }\n\n    function addItem(tickValue) {\n      var tickObj = {\n        value: tickValue\n      };\n      result.push(onlyTick ? tickValue : {\n        formattedLabel: labelFormatter(tickObj),\n        rawLabel: ordinalScale.getLabel(tickObj),\n        tickValue: tickValue\n      });\n    }\n\n    return result;\n  }\n\n  function makeLabelsByCustomizedCategoryInterval(axis, categoryInterval, onlyTick) {\n    var ordinalScale = axis.scale;\n    var labelFormatter = makeLabelFormatter(axis);\n    var result = [];\n    each(ordinalScale.getTicks(), function (tick) {\n      var rawLabel = ordinalScale.getLabel(tick);\n      var tickValue = tick.value;\n\n      if (categoryInterval(tick.value, rawLabel)) {\n        result.push(onlyTick ? tickValue : {\n          formattedLabel: labelFormatter(tick),\n          rawLabel: rawLabel,\n          tickValue: tickValue\n        });\n      }\n    });\n    return result;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var NORMALIZED_EXTENT = [0, 1];\n  /**\n   * Base class of Axis.\n   */\n\n  var Axis =\n  /** @class */\n  function () {\n    function Axis(dim, scale, extent) {\n      this.onBand = false;\n      this.inverse = false;\n      this.dim = dim;\n      this.scale = scale;\n      this._extent = extent || [0, 0];\n    }\n    /**\n     * If axis extent contain given coord\n     */\n\n\n    Axis.prototype.contain = function (coord) {\n      var extent = this._extent;\n      var min = Math.min(extent[0], extent[1]);\n      var max = Math.max(extent[0], extent[1]);\n      return coord >= min && coord <= max;\n    };\n    /**\n     * If axis extent contain given data\n     */\n\n\n    Axis.prototype.containData = function (data) {\n      return this.scale.contain(data);\n    };\n    /**\n     * Get coord extent.\n     */\n\n\n    Axis.prototype.getExtent = function () {\n      return this._extent.slice();\n    };\n    /**\n     * Get precision used for formatting\n     */\n\n\n    Axis.prototype.getPixelPrecision = function (dataExtent) {\n      return getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\n    };\n    /**\n     * Set coord extent\n     */\n\n\n    Axis.prototype.setExtent = function (start, end) {\n      var extent = this._extent;\n      extent[0] = start;\n      extent[1] = end;\n    };\n    /**\n     * Convert data to coord. Data is the rank if it has an ordinal scale\n     */\n\n\n    Axis.prototype.dataToCoord = function (data, clamp) {\n      var extent = this._extent;\n      var scale = this.scale;\n      data = scale.normalize(data);\n\n      if (this.onBand && scale.type === 'ordinal') {\n        extent = extent.slice();\n        fixExtentWithBands(extent, scale.count());\n      }\n\n      return linearMap(data, NORMALIZED_EXTENT, extent, clamp);\n    };\n    /**\n     * Convert coord to data. Data is the rank if it has an ordinal scale\n     */\n\n\n    Axis.prototype.coordToData = function (coord, clamp) {\n      var extent = this._extent;\n      var scale = this.scale;\n\n      if (this.onBand && scale.type === 'ordinal') {\n        extent = extent.slice();\n        fixExtentWithBands(extent, scale.count());\n      }\n\n      var t = linearMap(coord, extent, NORMALIZED_EXTENT, clamp);\n      return this.scale.scale(t);\n    };\n    /**\n     * Convert pixel point to data in axis\n     */\n\n\n    Axis.prototype.pointToData = function (point, clamp) {\n      // Should be implemented in derived class if necessary.\n      return;\n    };\n    /**\n     * Different from `zrUtil.map(axis.getTicks(), axis.dataToCoord, axis)`,\n     * `axis.getTicksCoords` considers `onBand`, which is used by\n     * `boundaryGap:true` of category axis and splitLine and splitArea.\n     * @param opt.tickModel default: axis.model.getModel('axisTick')\n     * @param opt.clamp If `true`, the first and the last\n     *        tick must be at the axis end points. Otherwise, clip ticks\n     *        that outside the axis extent.\n     */\n\n\n    Axis.prototype.getTicksCoords = function (opt) {\n      opt = opt || {};\n      var tickModel = opt.tickModel || this.getTickModel();\n      var result = createAxisTicks(this, tickModel);\n      var ticks = result.ticks;\n      var ticksCoords = map(ticks, function (tickVal) {\n        return {\n          coord: this.dataToCoord(this.scale.type === 'ordinal' ? this.scale.getRawOrdinalNumber(tickVal) : tickVal),\n          tickValue: tickVal\n        };\n      }, this);\n      var alignWithLabel = tickModel.get('alignWithLabel');\n      fixOnBandTicksCoords(this, ticksCoords, alignWithLabel, opt.clamp);\n      return ticksCoords;\n    };\n\n    Axis.prototype.getMinorTicksCoords = function () {\n      if (this.scale.type === 'ordinal') {\n        // Category axis doesn't support minor ticks\n        return [];\n      }\n\n      var minorTickModel = this.model.getModel('minorTick');\n      var splitNumber = minorTickModel.get('splitNumber'); // Protection.\n\n      if (!(splitNumber > 0 && splitNumber < 100)) {\n        splitNumber = 5;\n      }\n\n      var minorTicks = this.scale.getMinorTicks(splitNumber);\n      var minorTicksCoords = map(minorTicks, function (minorTicksGroup) {\n        return map(minorTicksGroup, function (minorTick) {\n          return {\n            coord: this.dataToCoord(minorTick),\n            tickValue: minorTick\n          };\n        }, this);\n      }, this);\n      return minorTicksCoords;\n    };\n\n    Axis.prototype.getViewLabels = function () {\n      return createAxisLabels(this).labels;\n    };\n\n    Axis.prototype.getLabelModel = function () {\n      return this.model.getModel('axisLabel');\n    };\n    /**\n     * Notice here we only get the default tick model. For splitLine\n     * or splitArea, we should pass the splitLineModel or splitAreaModel\n     * manually when calling `getTicksCoords`.\n     * In GL, this method may be overrided to:\n     * `axisModel.getModel('axisTick', grid3DModel.getModel('axisTick'));`\n     */\n\n\n    Axis.prototype.getTickModel = function () {\n      return this.model.getModel('axisTick');\n    };\n    /**\n     * Get width of band\n     */\n\n\n    Axis.prototype.getBandWidth = function () {\n      var axisExtent = this._extent;\n      var dataExtent = this.scale.getExtent();\n      var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0); // Fix #2728, avoid NaN when only one data.\n\n      len === 0 && (len = 1);\n      var size = Math.abs(axisExtent[1] - axisExtent[0]);\n      return Math.abs(size) / len;\n    };\n    /**\n     * Only be called in category axis.\n     * Can be overrided, consider other axes like in 3D.\n     * @return Auto interval for cateogry axis tick and label\n     */\n\n\n    Axis.prototype.calculateCategoryInterval = function () {\n      return calculateCategoryInterval(this);\n    };\n\n    return Axis;\n  }();\n\n  function fixExtentWithBands(extent, nTick) {\n    var size = extent[1] - extent[0];\n    var len = nTick;\n    var margin = size / len / 2;\n    extent[0] += margin;\n    extent[1] -= margin;\n  } // If axis has labels [1, 2, 3, 4]. Bands on the axis are\n  // |---1---|---2---|---3---|---4---|.\n  // So the displayed ticks and splitLine/splitArea should between\n  // each data item, otherwise cause misleading (e.g., split tow bars\n  // of a single data item when there are two bar series).\n  // Also consider if tickCategoryInterval > 0 and onBand, ticks and\n  // splitLine/spliteArea should layout appropriately corresponding\n  // to displayed labels. (So we should not use `getBandWidth` in this\n  // case).\n\n\n  function fixOnBandTicksCoords(axis, ticksCoords, alignWithLabel, clamp) {\n    var ticksLen = ticksCoords.length;\n\n    if (!axis.onBand || alignWithLabel || !ticksLen) {\n      return;\n    }\n\n    var axisExtent = axis.getExtent();\n    var last;\n    var diffSize;\n\n    if (ticksLen === 1) {\n      ticksCoords[0].coord = axisExtent[0];\n      last = ticksCoords[1] = {\n        coord: axisExtent[0]\n      };\n    } else {\n      var crossLen = ticksCoords[ticksLen - 1].tickValue - ticksCoords[0].tickValue;\n      var shift_1 = (ticksCoords[ticksLen - 1].coord - ticksCoords[0].coord) / crossLen;\n      each(ticksCoords, function (ticksItem) {\n        ticksItem.coord -= shift_1 / 2;\n      });\n      var dataExtent = axis.scale.getExtent();\n      diffSize = 1 + dataExtent[1] - ticksCoords[ticksLen - 1].tickValue;\n      last = {\n        coord: ticksCoords[ticksLen - 1].coord + shift_1 * diffSize\n      };\n      ticksCoords.push(last);\n    }\n\n    var inverse = axisExtent[0] > axisExtent[1]; // Handling clamp.\n\n    if (littleThan(ticksCoords[0].coord, axisExtent[0])) {\n      clamp ? ticksCoords[0].coord = axisExtent[0] : ticksCoords.shift();\n    }\n\n    if (clamp && littleThan(axisExtent[0], ticksCoords[0].coord)) {\n      ticksCoords.unshift({\n        coord: axisExtent[0]\n      });\n    }\n\n    if (littleThan(axisExtent[1], last.coord)) {\n      clamp ? last.coord = axisExtent[1] : ticksCoords.pop();\n    }\n\n    if (clamp && littleThan(last.coord, axisExtent[1])) {\n      ticksCoords.push({\n        coord: axisExtent[1]\n      });\n    }\n\n    function littleThan(a, b) {\n      // Avoid rounding error cause calculated tick coord different with extent.\n      // It may cause an extra unecessary tick added.\n      a = round(a);\n      b = round(b);\n      return inverse ? a > b : a < b;\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // These APIs are for more advanced usages\n  // For example extend charts and components, creating graphic elements, formatting.\n  // Should use `ComponentModel.extend` or `class XXXX extend ComponentModel` to create class.\n  // Then use `registerComponentModel` in `install` parameter when `use` this extension. For example:\n  // class Bar3DModel extends ComponentModel {}\n  // export function install(registers) { regsiters.registerComponentModel(Bar3DModel); }\n  // echarts.use(install);\n\n\n  function extendComponentModel(proto) {\n    var Model = ComponentModel.extend(proto);\n    ComponentModel.registerClass(Model);\n    return Model;\n  }\n\n  function extendComponentView(proto) {\n    var View = ComponentView.extend(proto);\n    ComponentView.registerClass(View);\n    return View;\n  }\n\n  function extendSeriesModel(proto) {\n    var Model = SeriesModel.extend(proto);\n    SeriesModel.registerClass(Model);\n    return Model;\n  }\n\n  function extendChartView(proto) {\n    var View = ChartView.extend(proto);\n    ChartView.registerClass(View);\n    return View;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var PI2$6 = Math.PI * 2;\n  var CMD$3 = PathProxy.CMD;\n  var DEFAULT_SEARCH_SPACE = ['top', 'right', 'bottom', 'left'];\n\n  function getCandidateAnchor(pos, distance$$1, rect, outPt, outDir) {\n    var width = rect.width;\n    var height = rect.height;\n\n    switch (pos) {\n      case 'top':\n        outPt.set(rect.x + width / 2, rect.y - distance$$1);\n        outDir.set(0, -1);\n        break;\n\n      case 'bottom':\n        outPt.set(rect.x + width / 2, rect.y + height + distance$$1);\n        outDir.set(0, 1);\n        break;\n\n      case 'left':\n        outPt.set(rect.x - distance$$1, rect.y + height / 2);\n        outDir.set(-1, 0);\n        break;\n\n      case 'right':\n        outPt.set(rect.x + width + distance$$1, rect.y + height / 2);\n        outDir.set(1, 0);\n        break;\n    }\n  }\n\n  function projectPointToArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y, out) {\n    x -= cx;\n    y -= cy;\n    var d = Math.sqrt(x * x + y * y);\n    x /= d;\n    y /= d; // Intersect point.\n\n    var ox = x * r + cx;\n    var oy = y * r + cy;\n\n    if (Math.abs(startAngle - endAngle) % PI2$6 < 1e-4) {\n      // Is a circle\n      out[0] = ox;\n      out[1] = oy;\n      return d - r;\n    }\n\n    if (anticlockwise) {\n      var tmp = startAngle;\n      startAngle = normalizeRadian(endAngle);\n      endAngle = normalizeRadian(tmp);\n    } else {\n      startAngle = normalizeRadian(startAngle);\n      endAngle = normalizeRadian(endAngle);\n    }\n\n    if (startAngle > endAngle) {\n      endAngle += PI2$6;\n    }\n\n    var angle = Math.atan2(y, x);\n\n    if (angle < 0) {\n      angle += PI2$6;\n    }\n\n    if (angle >= startAngle && angle <= endAngle || angle + PI2$6 >= startAngle && angle + PI2$6 <= endAngle) {\n      // Project point is on the arc.\n      out[0] = ox;\n      out[1] = oy;\n      return d - r;\n    }\n\n    var x1 = r * Math.cos(startAngle) + cx;\n    var y1 = r * Math.sin(startAngle) + cy;\n    var x2 = r * Math.cos(endAngle) + cx;\n    var y2 = r * Math.sin(endAngle) + cy;\n    var d1 = (x1 - x) * (x1 - x) + (y1 - y) * (y1 - y);\n    var d2 = (x2 - x) * (x2 - x) + (y2 - y) * (y2 - y);\n\n    if (d1 < d2) {\n      out[0] = x1;\n      out[1] = y1;\n      return Math.sqrt(d1);\n    } else {\n      out[0] = x2;\n      out[1] = y2;\n      return Math.sqrt(d2);\n    }\n  }\n\n  function projectPointToLine(x1, y1, x2, y2, x, y, out, limitToEnds) {\n    var dx = x - x1;\n    var dy = y - y1;\n    var dx1 = x2 - x1;\n    var dy1 = y2 - y1;\n    var lineLen = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n    dx1 /= lineLen;\n    dy1 /= lineLen; // dot product\n\n    var projectedLen = dx * dx1 + dy * dy1;\n    var t = projectedLen / lineLen;\n\n    if (limitToEnds) {\n      t = Math.min(Math.max(t, 0), 1);\n    }\n\n    t *= lineLen;\n    var ox = out[0] = x1 + t * dx1;\n    var oy = out[1] = y1 + t * dy1;\n    return Math.sqrt((ox - x) * (ox - x) + (oy - y) * (oy - y));\n  }\n\n  function projectPointToRect(x1, y1, width, height, x, y, out) {\n    if (width < 0) {\n      x1 = x1 + width;\n      width = -width;\n    }\n\n    if (height < 0) {\n      y1 = y1 + height;\n      height = -height;\n    }\n\n    var x2 = x1 + width;\n    var y2 = y1 + height;\n    var ox = out[0] = Math.min(Math.max(x, x1), x2);\n    var oy = out[1] = Math.min(Math.max(y, y1), y2);\n    return Math.sqrt((ox - x) * (ox - x) + (oy - y) * (oy - y));\n  }\n\n  var tmpPt = [];\n\n  function nearestPointOnRect(pt, rect, out) {\n    var dist$$1 = projectPointToRect(rect.x, rect.y, rect.width, rect.height, pt.x, pt.y, tmpPt);\n    out.set(tmpPt[0], tmpPt[1]);\n    return dist$$1;\n  }\n  /**\n   * Calculate min distance corresponding point.\n   * This method won't evaluate if point is in the path.\n   */\n\n\n  function nearestPointOnPath(pt, path, out) {\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    var x1;\n    var y1;\n    var minDist = Infinity;\n    var data = path.data;\n    var x = pt.x;\n    var y = pt.y;\n\n    for (var i = 0; i < data.length;) {\n      var cmd = data[i++];\n\n      if (i === 1) {\n        xi = data[i];\n        yi = data[i + 1];\n        x0 = xi;\n        y0 = yi;\n      }\n\n      var d = minDist;\n\n      switch (cmd) {\n        case CMD$3.M:\n          // moveTo 命令重新创建一个新的 subpath, 并且更新新的起点\n          // 在 closePath 的时候使用\n          x0 = data[i++];\n          y0 = data[i++];\n          xi = x0;\n          yi = y0;\n          break;\n\n        case CMD$3.L:\n          d = projectPointToLine(xi, yi, data[i], data[i + 1], x, y, tmpPt, true);\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD$3.C:\n          d = cubicProjectPoint(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y, tmpPt);\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD$3.Q:\n          d = quadraticProjectPoint(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y, tmpPt);\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD$3.A:\n          // TODO Arc 判断的开销比较大\n          var cx = data[i++];\n          var cy = data[i++];\n          var rx = data[i++];\n          var ry = data[i++];\n          var theta = data[i++];\n          var dTheta = data[i++]; // TODO Arc 旋转\n\n          i += 1;\n          var anticlockwise = !!(1 - data[i++]);\n          x1 = Math.cos(theta) * rx + cx;\n          y1 = Math.sin(theta) * ry + cy; // 不是直接使用 arc 命令\n\n          if (i <= 1) {\n            // 第一个命令起点还未定义\n            x0 = x1;\n            y0 = y1;\n          } // zr 使用scale来模拟椭圆, 这里也对x做一定的缩放\n\n\n          var _x = (x - cx) * ry / rx + cx;\n\n          d = projectPointToArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y, tmpPt);\n          xi = Math.cos(theta + dTheta) * rx + cx;\n          yi = Math.sin(theta + dTheta) * ry + cy;\n          break;\n\n        case CMD$3.R:\n          x0 = xi = data[i++];\n          y0 = yi = data[i++];\n          var width = data[i++];\n          var height = data[i++];\n          d = projectPointToRect(x0, y0, width, height, x, y, tmpPt);\n          break;\n\n        case CMD$3.Z:\n          d = projectPointToLine(xi, yi, x0, y0, x, y, tmpPt, true);\n          xi = x0;\n          yi = y0;\n          break;\n      }\n\n      if (d < minDist) {\n        minDist = d;\n        out.set(tmpPt[0], tmpPt[1]);\n      }\n    }\n\n    return minDist;\n  } // Temporal varible for intermediate usage.\n\n\n  var pt0 = new Point();\n  var pt1 = new Point();\n  var pt2 = new Point();\n  var dir = new Point();\n  var dir2 = new Point();\n  /**\n   * Calculate a proper guide line based on the label position and graphic element definition\n   * @param label\n   * @param labelRect\n   * @param target\n   * @param targetRect\n   */\n\n  function updateLabelLinePoints(target, labelLineModel) {\n    if (!target) {\n      return;\n    }\n\n    var labelLine = target.getTextGuideLine();\n    var label = target.getTextContent(); // Needs to create text guide in each charts.\n\n    if (!(label && labelLine)) {\n      return;\n    }\n\n    var labelGuideConfig = target.textGuideLineConfig || {};\n    var points = [[0, 0], [0, 0], [0, 0]];\n    var searchSpace = labelGuideConfig.candidates || DEFAULT_SEARCH_SPACE;\n    var labelRect = label.getBoundingRect().clone();\n    labelRect.applyTransform(label.getComputedTransform());\n    var minDist = Infinity;\n    var anchorPoint = labelGuideConfig.anchor;\n    var targetTransform = target.getComputedTransform();\n    var targetInversedTransform = targetTransform && invert([], targetTransform);\n    var len$$1 = labelLineModel.get('length2') || 0;\n\n    if (anchorPoint) {\n      pt2.copy(anchorPoint);\n    }\n\n    for (var i = 0; i < searchSpace.length; i++) {\n      var candidate = searchSpace[i];\n      getCandidateAnchor(candidate, 0, labelRect, pt0, dir);\n      Point.scaleAndAdd(pt1, pt0, dir, len$$1); // Transform to target coord space.\n\n      pt1.transform(targetInversedTransform); // Note: getBoundingRect will ensure the `path` being created.\n\n      var boundingRect = target.getBoundingRect();\n      var dist$$1 = anchorPoint ? anchorPoint.distance(pt1) : target instanceof Path ? nearestPointOnPath(pt1, target.path, pt2) : nearestPointOnRect(pt1, boundingRect, pt2); // TODO pt2 is in the path\n\n      if (dist$$1 < minDist) {\n        minDist = dist$$1; // Transform back to global space.\n\n        pt1.transform(targetTransform);\n        pt2.transform(targetTransform);\n        pt2.toArray(points[0]);\n        pt1.toArray(points[1]);\n        pt0.toArray(points[2]);\n      }\n    }\n\n    limitTurnAngle(points, labelLineModel.get('minTurnAngle'));\n    labelLine.setShape({\n      points: points\n    });\n  } // Temporal variable for the limitTurnAngle function\n\n\n  var tmpArr = [];\n  var tmpProjPoint = new Point();\n  /**\n   * Reduce the line segment attached to the label to limit the turn angle between two segments.\n   * @param linePoints\n   * @param minTurnAngle Radian of minimum turn angle. 0 - 180\n   */\n\n  function limitTurnAngle(linePoints, minTurnAngle) {\n    if (!(minTurnAngle <= 180 && minTurnAngle > 0)) {\n      return;\n    }\n\n    minTurnAngle = minTurnAngle / 180 * Math.PI; // The line points can be\n    //      /pt1----pt2 (label)\n    //     /\n    // pt0/\n\n    pt0.fromArray(linePoints[0]);\n    pt1.fromArray(linePoints[1]);\n    pt2.fromArray(linePoints[2]);\n    Point.sub(dir, pt0, pt1);\n    Point.sub(dir2, pt2, pt1);\n    var len1 = dir.len();\n    var len2 = dir2.len();\n\n    if (len1 < 1e-3 || len2 < 1e-3) {\n      return;\n    }\n\n    dir.scale(1 / len1);\n    dir2.scale(1 / len2);\n    var angleCos = dir.dot(dir2);\n    var minTurnAngleCos = Math.cos(minTurnAngle);\n\n    if (minTurnAngleCos < angleCos) {\n      // Smaller than minTurnAngle\n      // Calculate project point of pt0 on pt1-pt2\n      var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);\n      tmpProjPoint.fromArray(tmpArr); // Calculate new projected length with limited minTurnAngle and get the new connect point\n\n      tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI - minTurnAngle)); // Limit the new calculated connect point between pt1 and pt2.\n\n      var t = pt2.x !== pt1.x ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x) : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);\n\n      if (isNaN(t)) {\n        return;\n      }\n\n      if (t < 0) {\n        Point.copy(tmpProjPoint, pt1);\n      } else if (t > 1) {\n        Point.copy(tmpProjPoint, pt2);\n      }\n\n      tmpProjPoint.toArray(linePoints[1]);\n    }\n  }\n  /**\n   * Limit the angle of line and the surface\n   * @param maxSurfaceAngle Radian of minimum turn angle. 0 - 180. 0 is same direction to normal. 180 is opposite\n   */\n\n\n  function limitSurfaceAngle(linePoints, surfaceNormal, maxSurfaceAngle) {\n    if (!(maxSurfaceAngle <= 180 && maxSurfaceAngle > 0)) {\n      return;\n    }\n\n    maxSurfaceAngle = maxSurfaceAngle / 180 * Math.PI;\n    pt0.fromArray(linePoints[0]);\n    pt1.fromArray(linePoints[1]);\n    pt2.fromArray(linePoints[2]);\n    Point.sub(dir, pt1, pt0);\n    Point.sub(dir2, pt2, pt1);\n    var len1 = dir.len();\n    var len2 = dir2.len();\n\n    if (len1 < 1e-3 || len2 < 1e-3) {\n      return;\n    }\n\n    dir.scale(1 / len1);\n    dir2.scale(1 / len2);\n    var angleCos = dir.dot(surfaceNormal);\n    var maxSurfaceAngleCos = Math.cos(maxSurfaceAngle);\n\n    if (angleCos < maxSurfaceAngleCos) {\n      // Calculate project point of pt0 on pt1-pt2\n      var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);\n      tmpProjPoint.fromArray(tmpArr);\n      var HALF_PI = Math.PI / 2;\n      var angle2 = Math.acos(dir2.dot(surfaceNormal));\n      var newAngle = HALF_PI + angle2 - maxSurfaceAngle;\n\n      if (newAngle >= HALF_PI) {\n        // parallel\n        Point.copy(tmpProjPoint, pt2);\n      } else {\n        // Calculate new projected length with limited minTurnAngle and get the new connect point\n        tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI / 2 - newAngle)); // Limit the new calculated connect point between pt1 and pt2.\n\n        var t = pt2.x !== pt1.x ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x) : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);\n\n        if (isNaN(t)) {\n          return;\n        }\n\n        if (t < 0) {\n          Point.copy(tmpProjPoint, pt1);\n        } else if (t > 1) {\n          Point.copy(tmpProjPoint, pt2);\n        }\n      }\n\n      tmpProjPoint.toArray(linePoints[1]);\n    }\n  }\n\n  function setLabelLineState(labelLine, ignore, stateName, stateModel) {\n    var isNormal = stateName === 'normal';\n    var stateObj = isNormal ? labelLine : labelLine.ensureState(stateName); // Make sure display.\n\n    stateObj.ignore = ignore; // Set smooth\n\n    var smooth = stateModel.get('smooth');\n\n    if (smooth && smooth === true) {\n      smooth = 0.3;\n    }\n\n    stateObj.shape = stateObj.shape || {};\n\n    if (smooth > 0) {\n      stateObj.shape.smooth = smooth;\n    }\n\n    var styleObj = stateModel.getModel('lineStyle').getLineStyle();\n    isNormal ? labelLine.useStyle(styleObj) : stateObj.style = styleObj;\n  }\n\n  function buildLabelLinePath(path, shape) {\n    var smooth = shape.smooth;\n    var points = shape.points;\n\n    if (!points) {\n      return;\n    }\n\n    path.moveTo(points[0][0], points[0][1]);\n\n    if (smooth > 0 && points.length >= 3) {\n      var len1 = dist(points[0], points[1]);\n      var len2 = dist(points[1], points[2]);\n\n      if (!len1 || !len2) {\n        path.lineTo(points[1][0], points[1][1]);\n        path.lineTo(points[2][0], points[2][1]);\n        return;\n      }\n\n      var moveLen = Math.min(len1, len2) * smooth;\n      var midPoint0 = lerp([], points[1], points[0], moveLen / len1);\n      var midPoint2 = lerp([], points[1], points[2], moveLen / len2);\n      var midPoint1 = lerp([], midPoint0, midPoint2, 0.5);\n      path.bezierCurveTo(midPoint0[0], midPoint0[1], midPoint0[0], midPoint0[1], midPoint1[0], midPoint1[1]);\n      path.bezierCurveTo(midPoint2[0], midPoint2[1], midPoint2[0], midPoint2[1], points[2][0], points[2][1]);\n    } else {\n      for (var i = 1; i < points.length; i++) {\n        path.lineTo(points[i][0], points[i][1]);\n      }\n    }\n  }\n  /**\n   * Create a label line if necessary and set it's style.\n   */\n\n\n  function setLabelLineStyle(targetEl, statesModels, defaultStyle) {\n    var labelLine = targetEl.getTextGuideLine();\n    var label = targetEl.getTextContent();\n\n    if (!label) {\n      // Not show label line if there is no label.\n      if (labelLine) {\n        targetEl.removeTextGuideLine();\n      }\n\n      return;\n    }\n\n    var normalModel = statesModels.normal;\n    var showNormal = normalModel.get('show');\n    var labelIgnoreNormal = label.ignore;\n\n    for (var i = 0; i < DISPLAY_STATES.length; i++) {\n      var stateName = DISPLAY_STATES[i];\n      var stateModel = statesModels[stateName];\n      var isNormal = stateName === 'normal';\n\n      if (stateModel) {\n        var stateShow = stateModel.get('show');\n        var isLabelIgnored = isNormal ? labelIgnoreNormal : retrieve2(label.states[stateName] && label.states[stateName].ignore, labelIgnoreNormal);\n\n        if (isLabelIgnored // Not show when label is not shown in this state.\n        || !retrieve2(stateShow, showNormal) // Use normal state by default if not set.\n        ) {\n            var stateObj = isNormal ? labelLine : labelLine && labelLine.states[stateName];\n\n            if (stateObj) {\n              stateObj.ignore = true;\n            }\n\n            continue;\n          } // Create labelLine if not exists\n\n\n        if (!labelLine) {\n          labelLine = new Polyline();\n          targetEl.setTextGuideLine(labelLine); // Reset state of normal because it's new created.\n          // NOTE: NORMAL should always been the first!\n\n          if (!isNormal && (labelIgnoreNormal || !showNormal)) {\n            setLabelLineState(labelLine, true, 'normal', statesModels.normal);\n          } // Use same state proxy.\n\n\n          if (targetEl.stateProxy) {\n            labelLine.stateProxy = targetEl.stateProxy;\n          }\n        }\n\n        setLabelLineState(labelLine, false, stateName, stateModel);\n      }\n    }\n\n    if (labelLine) {\n      defaults(labelLine.style, defaultStyle); // Not fill.\n\n      labelLine.style.fill = null;\n      var showAbove = normalModel.get('showAbove');\n      var labelLineConfig = targetEl.textGuideLineConfig = targetEl.textGuideLineConfig || {};\n      labelLineConfig.showAbove = showAbove || false; // Custom the buildPath.\n\n      labelLine.buildPath = buildLabelLinePath;\n    }\n  }\n\n  function getLabelLineStatesModels(itemModel, labelLineName) {\n    labelLineName = labelLineName || 'labelLine';\n    var statesModels = {\n      normal: itemModel.getModel(labelLineName)\n    };\n\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      statesModels[stateName] = itemModel.getModel([stateName, labelLineName]);\n    }\n\n    return statesModels;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function prepareLayoutList(input) {\n    var list = [];\n\n    for (var i = 0; i < input.length; i++) {\n      var rawItem = input[i];\n\n      if (rawItem.defaultAttr.ignore) {\n        continue;\n      }\n\n      var label = rawItem.label;\n      var transform = label.getComputedTransform(); // NOTE: Get bounding rect after getComputedTransform, or label may not been updated by the host el.\n\n      var localRect = label.getBoundingRect();\n      var isAxisAligned = !transform || transform[1] < 1e-5 && transform[2] < 1e-5;\n      var minMargin = label.style.margin || 0;\n      var globalRect = localRect.clone();\n      globalRect.applyTransform(transform);\n      globalRect.x -= minMargin / 2;\n      globalRect.y -= minMargin / 2;\n      globalRect.width += minMargin;\n      globalRect.height += minMargin;\n      var obb = isAxisAligned ? new OrientedBoundingRect(localRect, transform) : null;\n      list.push({\n        label: label,\n        labelLine: rawItem.labelLine,\n        rect: globalRect,\n        localRect: localRect,\n        obb: obb,\n        priority: rawItem.priority,\n        defaultAttr: rawItem.defaultAttr,\n        layoutOption: rawItem.computedLayoutOption,\n        axisAligned: isAxisAligned,\n        transform: transform\n      });\n    }\n\n    return list;\n  }\n\n  function shiftLayout(list, xyDim, sizeDim, minBound, maxBound, balanceShift) {\n    var len = list.length;\n\n    if (len < 2) {\n      return;\n    }\n\n    list.sort(function (a, b) {\n      return a.rect[xyDim] - b.rect[xyDim];\n    });\n    var lastPos = 0;\n    var delta;\n    var adjusted = false;\n    var shifts = [];\n    var totalShifts = 0;\n\n    for (var i = 0; i < len; i++) {\n      var item = list[i];\n      var rect = item.rect;\n      delta = rect[xyDim] - lastPos;\n\n      if (delta < 0) {\n        // shiftForward(i, len, -delta);\n        rect[xyDim] -= delta;\n        item.label[xyDim] -= delta;\n        adjusted = true;\n      }\n\n      var shift = Math.max(-delta, 0);\n      shifts.push(shift);\n      totalShifts += shift;\n      lastPos = rect[xyDim] + rect[sizeDim];\n    }\n\n    if (totalShifts > 0 && balanceShift) {\n      // Shift back to make the distribution more equally.\n      shiftList(-totalShifts / len, 0, len);\n    } // TODO bleedMargin?\n\n\n    var first = list[0];\n    var last = list[len - 1];\n    var minGap;\n    var maxGap;\n    updateMinMaxGap(); // If ends exceed two bounds, squeeze at most 80%, then take the gap of two bounds.\n\n    minGap < 0 && squeezeGaps(-minGap, 0.8);\n    maxGap < 0 && squeezeGaps(maxGap, 0.8);\n    updateMinMaxGap();\n    takeBoundsGap(minGap, maxGap, 1);\n    takeBoundsGap(maxGap, minGap, -1); // Handle bailout when there is not enough space.\n\n    updateMinMaxGap();\n\n    if (minGap < 0) {\n      squeezeWhenBailout(-minGap);\n    }\n\n    if (maxGap < 0) {\n      squeezeWhenBailout(maxGap);\n    }\n\n    function updateMinMaxGap() {\n      minGap = first.rect[xyDim] - minBound;\n      maxGap = maxBound - last.rect[xyDim] - last.rect[sizeDim];\n    }\n\n    function takeBoundsGap(gapThisBound, gapOtherBound, moveDir) {\n      if (gapThisBound < 0) {\n        // Move from other gap if can.\n        var moveFromMaxGap = Math.min(gapOtherBound, -gapThisBound);\n\n        if (moveFromMaxGap > 0) {\n          shiftList(moveFromMaxGap * moveDir, 0, len);\n          var remained = moveFromMaxGap + gapThisBound;\n\n          if (remained < 0) {\n            squeezeGaps(-remained * moveDir, 1);\n          }\n        } else {\n          squeezeGaps(-gapThisBound * moveDir, 1);\n        }\n      }\n    }\n\n    function shiftList(delta, start, end) {\n      if (delta !== 0) {\n        adjusted = true;\n      }\n\n      for (var i = start; i < end; i++) {\n        var item = list[i];\n        var rect = item.rect;\n        rect[xyDim] += delta;\n        item.label[xyDim] += delta;\n      }\n    } // Squeeze gaps if the labels exceed margin.\n\n\n    function squeezeGaps(delta, maxSqeezePercent) {\n      var gaps = [];\n      var totalGaps = 0;\n\n      for (var i = 1; i < len; i++) {\n        var prevItemRect = list[i - 1].rect;\n        var gap = Math.max(list[i].rect[xyDim] - prevItemRect[xyDim] - prevItemRect[sizeDim], 0);\n        gaps.push(gap);\n        totalGaps += gap;\n      }\n\n      if (!totalGaps) {\n        return;\n      }\n\n      var squeezePercent = Math.min(Math.abs(delta) / totalGaps, maxSqeezePercent);\n\n      if (delta > 0) {\n        for (var i = 0; i < len - 1; i++) {\n          // Distribute the shift delta to all gaps.\n          var movement = gaps[i] * squeezePercent; // Forward\n\n          shiftList(movement, 0, i + 1);\n        }\n      } else {\n        // Backward\n        for (var i = len - 1; i > 0; i--) {\n          // Distribute the shift delta to all gaps.\n          var movement = gaps[i - 1] * squeezePercent;\n          shiftList(-movement, i, len);\n        }\n      }\n    }\n    /**\n     * Squeeze to allow overlap if there is no more space available.\n     * Let other overlapping strategy like hideOverlap do the job instead of keep exceeding the bounds.\n     */\n\n\n    function squeezeWhenBailout(delta) {\n      var dir = delta < 0 ? -1 : 1;\n      delta = Math.abs(delta);\n      var moveForEachLabel = Math.ceil(delta / (len - 1));\n\n      for (var i = 0; i < len - 1; i++) {\n        if (dir > 0) {\n          // Forward\n          shiftList(moveForEachLabel, 0, i + 1);\n        } else {\n          // Backward\n          shiftList(-moveForEachLabel, len - i - 1, len);\n        }\n\n        delta -= moveForEachLabel;\n\n        if (delta <= 0) {\n          return;\n        }\n      }\n    }\n\n    return adjusted;\n  }\n  /**\n   * Adjust labels on x direction to avoid overlap.\n   */\n\n\n  function shiftLayoutOnX(list, leftBound, rightBound, // If average the shifts on all labels and add them to 0\n  // TODO: Not sure if should enable it.\n  // Pros: The angle of lines will distribute more equally\n  // Cons: In some layout. It may not what user wanted. like in pie. the label of last sector is usually changed unexpectedly.\n  balanceShift) {\n    return shiftLayout(list, 'x', 'width', leftBound, rightBound, balanceShift);\n  }\n  /**\n   * Adjust labels on y direction to avoid overlap.\n   */\n\n\n  function shiftLayoutOnY(list, topBound, bottomBound, // If average the shifts on all labels and add them to 0\n  balanceShift) {\n    return shiftLayout(list, 'y', 'height', topBound, bottomBound, balanceShift);\n  }\n\n  function hideOverlap(labelList) {\n    var displayedLabels = []; // TODO, render overflow visible first, put in the displayedLabels.\n\n    labelList.sort(function (a, b) {\n      return b.priority - a.priority;\n    });\n    var globalRect = new BoundingRect(0, 0, 0, 0);\n\n    function hideEl(el) {\n      if (!el.ignore) {\n        // Show on emphasis.\n        var emphasisState = el.ensureState('emphasis');\n\n        if (emphasisState.ignore == null) {\n          emphasisState.ignore = false;\n        }\n      }\n\n      el.ignore = true;\n    }\n\n    for (var i = 0; i < labelList.length; i++) {\n      var labelItem = labelList[i];\n      var isAxisAligned = labelItem.axisAligned;\n      var localRect = labelItem.localRect;\n      var transform = labelItem.transform;\n      var label = labelItem.label;\n      var labelLine = labelItem.labelLine;\n      globalRect.copy(labelItem.rect); // Add a threshold because layout may be aligned precisely.\n\n      globalRect.width -= 0.1;\n      globalRect.height -= 0.1;\n      globalRect.x += 0.05;\n      globalRect.y += 0.05;\n      var obb = labelItem.obb;\n      var overlapped = false;\n\n      for (var j = 0; j < displayedLabels.length; j++) {\n        var existsTextCfg = displayedLabels[j]; // Fast rejection.\n\n        if (!globalRect.intersect(existsTextCfg.rect)) {\n          continue;\n        }\n\n        if (isAxisAligned && existsTextCfg.axisAligned) {\n          // Is overlapped\n          overlapped = true;\n          break;\n        }\n\n        if (!existsTextCfg.obb) {\n          // If self is not axis aligned. But other is.\n          existsTextCfg.obb = new OrientedBoundingRect(existsTextCfg.localRect, existsTextCfg.transform);\n        }\n\n        if (!obb) {\n          // If self is axis aligned. But other is not.\n          obb = new OrientedBoundingRect(localRect, transform);\n        }\n\n        if (obb.intersect(existsTextCfg.obb)) {\n          overlapped = true;\n          break;\n        }\n      } // TODO Callback to determine if this overlap should be handled?\n\n\n      if (overlapped) {\n        hideEl(label);\n        labelLine && hideEl(labelLine);\n      } else {\n        label.attr('ignore', labelItem.defaultAttr.ignore);\n        labelLine && labelLine.attr('ignore', labelItem.defaultAttr.labelGuideIgnore);\n        displayedLabels.push(labelItem);\n      }\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // TODO: move labels out of viewport.\n\n\n  function cloneArr(points) {\n    if (points) {\n      var newPoints = [];\n\n      for (var i = 0; i < points.length; i++) {\n        newPoints.push(points[i].slice());\n      }\n\n      return newPoints;\n    }\n  }\n\n  function prepareLayoutCallbackParams(labelItem, hostEl) {\n    var label = labelItem.label;\n    var labelLine = hostEl && hostEl.getTextGuideLine();\n    return {\n      dataIndex: labelItem.dataIndex,\n      dataType: labelItem.dataType,\n      seriesIndex: labelItem.seriesModel.seriesIndex,\n      text: labelItem.label.style.text,\n      rect: labelItem.hostRect,\n      labelRect: labelItem.rect,\n      // x: labelAttr.x,\n      // y: labelAttr.y,\n      align: label.style.align,\n      verticalAlign: label.style.verticalAlign,\n      labelLinePoints: cloneArr(labelLine && labelLine.shape.points)\n    };\n  }\n\n  var LABEL_OPTION_TO_STYLE_KEYS = ['align', 'verticalAlign', 'width', 'height', 'fontSize'];\n  var dummyTransformable = new Transformable();\n  var labelLayoutInnerStore = makeInner();\n  var labelLineAnimationStore = makeInner();\n\n  function extendWithKeys(target, source, keys$$1) {\n    for (var i = 0; i < keys$$1.length; i++) {\n      var key = keys$$1[i];\n\n      if (source[key] != null) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  var LABEL_LAYOUT_PROPS = ['x', 'y', 'rotation'];\n\n  var LabelManager =\n  /** @class */\n  function () {\n    function LabelManager() {\n      this._labelList = [];\n      this._chartViewList = [];\n    }\n\n    LabelManager.prototype.clearLabels = function () {\n      this._labelList = [];\n      this._chartViewList = [];\n    };\n    /**\n     * Add label to manager\n     */\n\n\n    LabelManager.prototype._addLabel = function (dataIndex, dataType, seriesModel, label, layoutOption) {\n      var labelStyle = label.style;\n      var hostEl = label.__hostTarget;\n      var textConfig = hostEl.textConfig || {}; // TODO: If label is in other state.\n\n      var labelTransform = label.getComputedTransform();\n      var labelRect = label.getBoundingRect().plain();\n      BoundingRect.applyTransform(labelRect, labelRect, labelTransform);\n\n      if (labelTransform) {\n        dummyTransformable.setLocalTransform(labelTransform);\n      } else {\n        // Identity transform.\n        dummyTransformable.x = dummyTransformable.y = dummyTransformable.rotation = dummyTransformable.originX = dummyTransformable.originY = 0;\n        dummyTransformable.scaleX = dummyTransformable.scaleY = 1;\n      }\n\n      var host = label.__hostTarget;\n      var hostRect;\n\n      if (host) {\n        hostRect = host.getBoundingRect().plain();\n        var transform = host.getComputedTransform();\n        BoundingRect.applyTransform(hostRect, hostRect, transform);\n      }\n\n      var labelGuide = hostRect && host.getTextGuideLine();\n\n      this._labelList.push({\n        label: label,\n        labelLine: labelGuide,\n        seriesModel: seriesModel,\n        dataIndex: dataIndex,\n        dataType: dataType,\n        layoutOption: layoutOption,\n        computedLayoutOption: null,\n        rect: labelRect,\n        hostRect: hostRect,\n        // Label with lower priority will be hidden when overlapped\n        // Use rect size as default priority\n        priority: hostRect ? hostRect.width * hostRect.height : 0,\n        // Save default label attributes.\n        // For restore if developers want get back to default value in callback.\n        defaultAttr: {\n          ignore: label.ignore,\n          labelGuideIgnore: labelGuide && labelGuide.ignore,\n          x: dummyTransformable.x,\n          y: dummyTransformable.y,\n          scaleX: dummyTransformable.scaleX,\n          scaleY: dummyTransformable.scaleY,\n          rotation: dummyTransformable.rotation,\n          style: {\n            x: labelStyle.x,\n            y: labelStyle.y,\n            align: labelStyle.align,\n            verticalAlign: labelStyle.verticalAlign,\n            width: labelStyle.width,\n            height: labelStyle.height,\n            fontSize: labelStyle.fontSize\n          },\n          cursor: label.cursor,\n          attachedPos: textConfig.position,\n          attachedRot: textConfig.rotation\n        }\n      });\n    };\n\n    LabelManager.prototype.addLabelsOfSeries = function (chartView) {\n      var _this = this;\n\n      this._chartViewList.push(chartView);\n\n      var seriesModel = chartView.__model;\n      var layoutOption = seriesModel.get('labelLayout');\n      /**\n       * Ignore layouting if it's not specified anything.\n       */\n\n      if (!(isFunction(layoutOption) || keys(layoutOption).length)) {\n        return;\n      }\n\n      chartView.group.traverse(function (child) {\n        if (child.ignore) {\n          return true; // Stop traverse descendants.\n        } // Only support label being hosted on graphic elements.\n\n\n        var textEl = child.getTextContent();\n        var ecData = getECData(child); // Can only attach the text on the element with dataIndex\n\n        if (textEl && !textEl.disableLabelLayout) {\n          _this._addLabel(ecData.dataIndex, ecData.dataType, seriesModel, textEl, layoutOption);\n        }\n      });\n    };\n\n    LabelManager.prototype.updateLayoutConfig = function (api) {\n      var width = api.getWidth();\n      var height = api.getHeight();\n\n      function createDragHandler(el, labelLineModel) {\n        return function () {\n          updateLabelLinePoints(el, labelLineModel);\n        };\n      }\n\n      for (var i = 0; i < this._labelList.length; i++) {\n        var labelItem = this._labelList[i];\n        var label = labelItem.label;\n        var hostEl = label.__hostTarget;\n        var defaultLabelAttr = labelItem.defaultAttr;\n        var layoutOption = void 0; // TODO A global layout option?\n\n        if (isFunction(labelItem.layoutOption)) {\n          layoutOption = labelItem.layoutOption(prepareLayoutCallbackParams(labelItem, hostEl));\n        } else {\n          layoutOption = labelItem.layoutOption;\n        }\n\n        layoutOption = layoutOption || {};\n        labelItem.computedLayoutOption = layoutOption;\n        var degreeToRadian = Math.PI / 180; // TODO hostEl should always exists.\n        // Or label should not have parent because the x, y is all in global space.\n\n        if (hostEl) {\n          hostEl.setTextConfig({\n            // Force to set local false.\n            local: false,\n            // Ignore position and rotation config on the host el if x or y is changed.\n            position: layoutOption.x != null || layoutOption.y != null ? null : defaultLabelAttr.attachedPos,\n            // Ignore rotation config on the host el if rotation is changed.\n            rotation: layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.attachedRot,\n            offset: [layoutOption.dx || 0, layoutOption.dy || 0]\n          });\n        }\n\n        var needsUpdateLabelLine = false;\n\n        if (layoutOption.x != null) {\n          // TODO width of chart view.\n          label.x = parsePercent$1(layoutOption.x, width);\n          label.setStyle('x', 0); // Ignore movement in style. TODO: origin.\n\n          needsUpdateLabelLine = true;\n        } else {\n          label.x = defaultLabelAttr.x;\n          label.setStyle('x', defaultLabelAttr.style.x);\n        }\n\n        if (layoutOption.y != null) {\n          // TODO height of chart view.\n          label.y = parsePercent$1(layoutOption.y, height);\n          label.setStyle('y', 0); // Ignore movement in style.\n\n          needsUpdateLabelLine = true;\n        } else {\n          label.y = defaultLabelAttr.y;\n          label.setStyle('y', defaultLabelAttr.style.y);\n        }\n\n        if (layoutOption.labelLinePoints) {\n          var guideLine = hostEl.getTextGuideLine();\n\n          if (guideLine) {\n            guideLine.setShape({\n              points: layoutOption.labelLinePoints\n            }); // Not update\n\n            needsUpdateLabelLine = false;\n          }\n        }\n\n        var labelLayoutStore = labelLayoutInnerStore(label);\n        labelLayoutStore.needsUpdateLabelLine = needsUpdateLabelLine;\n        label.rotation = layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.rotation;\n        label.scaleX = defaultLabelAttr.scaleX;\n        label.scaleY = defaultLabelAttr.scaleY;\n\n        for (var k = 0; k < LABEL_OPTION_TO_STYLE_KEYS.length; k++) {\n          var key = LABEL_OPTION_TO_STYLE_KEYS[k];\n          label.setStyle(key, layoutOption[key] != null ? layoutOption[key] : defaultLabelAttr.style[key]);\n        }\n\n        if (layoutOption.draggable) {\n          label.draggable = true;\n          label.cursor = 'move';\n\n          if (hostEl) {\n            var hostModel = labelItem.seriesModel;\n\n            if (labelItem.dataIndex != null) {\n              var data = labelItem.seriesModel.getData(labelItem.dataType);\n              hostModel = data.getItemModel(labelItem.dataIndex);\n            }\n\n            label.on('drag', createDragHandler(hostEl, hostModel.getModel('labelLine')));\n          }\n        } else {\n          // TODO Other drag functions?\n          label.off('drag');\n          label.cursor = defaultLabelAttr.cursor;\n        }\n      }\n    };\n\n    LabelManager.prototype.layout = function (api) {\n      var width = api.getWidth();\n      var height = api.getHeight();\n      var labelList = prepareLayoutList(this._labelList);\n      var labelsNeedsAdjustOnX = filter(labelList, function (item) {\n        return item.layoutOption.moveOverlap === 'shiftX';\n      });\n      var labelsNeedsAdjustOnY = filter(labelList, function (item) {\n        return item.layoutOption.moveOverlap === 'shiftY';\n      });\n      shiftLayoutOnX(labelsNeedsAdjustOnX, 0, width);\n      shiftLayoutOnY(labelsNeedsAdjustOnY, 0, height);\n      var labelsNeedsHideOverlap = filter(labelList, function (item) {\n        return item.layoutOption.hideOverlap;\n      });\n      hideOverlap(labelsNeedsHideOverlap);\n    };\n    /**\n     * Process all labels. Not only labels with layoutOption.\n     */\n\n\n    LabelManager.prototype.processLabelsOverall = function () {\n      var _this = this;\n\n      each(this._chartViewList, function (chartView) {\n        var seriesModel = chartView.__model;\n        var ignoreLabelLineUpdate = chartView.ignoreLabelLineUpdate;\n        var animationEnabled = seriesModel.isAnimationEnabled();\n        chartView.group.traverse(function (child) {\n          if (child.ignore && !child.forceLabelAnimation) {\n            return true; // Stop traverse descendants.\n          }\n\n          var needsUpdateLabelLine = !ignoreLabelLineUpdate;\n          var label = child.getTextContent();\n\n          if (!needsUpdateLabelLine && label) {\n            needsUpdateLabelLine = labelLayoutInnerStore(label).needsUpdateLabelLine;\n          }\n\n          if (needsUpdateLabelLine) {\n            _this._updateLabelLine(child, seriesModel);\n          }\n\n          if (animationEnabled) {\n            _this._animateLabels(child, seriesModel);\n          }\n        });\n      });\n    };\n\n    LabelManager.prototype._updateLabelLine = function (el, seriesModel) {\n      // Only support label being hosted on graphic elements.\n      var textEl = el.getTextContent(); // Update label line style.\n\n      var ecData = getECData(el);\n      var dataIndex = ecData.dataIndex; // Only support labelLine on the labels represent data.\n\n      if (textEl && dataIndex != null) {\n        var data = seriesModel.getData(ecData.dataType);\n        var itemModel = data.getItemModel(dataIndex);\n        var defaultStyle = {};\n        var visualStyle = data.getItemVisual(dataIndex, 'style');\n        var visualType = data.getVisual('drawType'); // Default to be same with main color\n\n        defaultStyle.stroke = visualStyle[visualType];\n        var labelLineModel = itemModel.getModel('labelLine');\n        setLabelLineStyle(el, getLabelLineStatesModels(itemModel), defaultStyle);\n        updateLabelLinePoints(el, labelLineModel);\n      }\n    };\n\n    LabelManager.prototype._animateLabels = function (el, seriesModel) {\n      var textEl = el.getTextContent();\n      var guideLine = el.getTextGuideLine(); // Animate\n\n      if (textEl // `forceLabelAnimation` has the highest priority\n      && (el.forceLabelAnimation || !textEl.ignore && !textEl.invisible && !el.disableLabelAnimation && !isElementRemoved(el))) {\n        var layoutStore = labelLayoutInnerStore(textEl);\n        var oldLayout = layoutStore.oldLayout;\n        var ecData = getECData(el);\n        var dataIndex = ecData.dataIndex;\n        var newProps = {\n          x: textEl.x,\n          y: textEl.y,\n          rotation: textEl.rotation\n        };\n        var data = seriesModel.getData(ecData.dataType);\n\n        if (!oldLayout) {\n          textEl.attr(newProps); // Disable fade in animation if value animation is enabled.\n\n          if (!labelInner(textEl).valueAnimation) {\n            var oldOpacity = retrieve2(textEl.style.opacity, 1); // Fade in animation\n\n            textEl.style.opacity = 0;\n            initProps(textEl, {\n              style: {\n                opacity: oldOpacity\n              }\n            }, seriesModel, dataIndex);\n          }\n        } else {\n          textEl.attr(oldLayout); // Make sure the animation from is in the right status.\n\n          var prevStates = el.prevStates;\n\n          if (prevStates) {\n            if (indexOf(prevStates, 'select') >= 0) {\n              textEl.attr(layoutStore.oldLayoutSelect);\n            }\n\n            if (indexOf(prevStates, 'emphasis') >= 0) {\n              textEl.attr(layoutStore.oldLayoutEmphasis);\n            }\n          }\n\n          updateProps(textEl, newProps, seriesModel, dataIndex);\n        }\n\n        layoutStore.oldLayout = newProps;\n\n        if (textEl.states.select) {\n          var layoutSelect = layoutStore.oldLayoutSelect = {};\n          extendWithKeys(layoutSelect, newProps, LABEL_LAYOUT_PROPS);\n          extendWithKeys(layoutSelect, textEl.states.select, LABEL_LAYOUT_PROPS);\n        }\n\n        if (textEl.states.emphasis) {\n          var layoutEmphasis = layoutStore.oldLayoutEmphasis = {};\n          extendWithKeys(layoutEmphasis, newProps, LABEL_LAYOUT_PROPS);\n          extendWithKeys(layoutEmphasis, textEl.states.emphasis, LABEL_LAYOUT_PROPS);\n        }\n\n        animateLabelValue(textEl, dataIndex, data, seriesModel, seriesModel);\n      }\n\n      if (guideLine && !guideLine.ignore && !guideLine.invisible) {\n        var layoutStore = labelLineAnimationStore(guideLine);\n        var oldLayout = layoutStore.oldLayout;\n        var newLayout = {\n          points: guideLine.shape.points\n        };\n\n        if (!oldLayout) {\n          guideLine.setShape(newLayout);\n          guideLine.style.strokePercent = 0;\n          initProps(guideLine, {\n            style: {\n              strokePercent: 1\n            }\n          }, seriesModel);\n        } else {\n          guideLine.attr({\n            shape: oldLayout\n          });\n          updateProps(guideLine, {\n            shape: newLayout\n          }, seriesModel);\n        }\n\n        layoutStore.oldLayout = newLayout;\n      }\n    };\n\n    return LabelManager;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var getLabelManager = makeInner();\n\n  function installLabelLayout(registers) {\n    registers.registerUpdateLifecycle('series:beforeupdate', function (ecModel, api, params) {\n      // TODO api provide an namespace that can save stuff per instance\n      var labelManager = getLabelManager(api).labelManager;\n\n      if (!labelManager) {\n        labelManager = getLabelManager(api).labelManager = new LabelManager();\n      }\n\n      labelManager.clearLabels();\n    });\n    registers.registerUpdateLifecycle('series:layoutlabels', function (ecModel, api, params) {\n      var labelManager = getLabelManager(api).labelManager;\n      params.updatedSeries.forEach(function (series) {\n        labelManager.addLabelsOfSeries(api.getViewOfSeriesModel(series));\n      });\n      labelManager.updateLayoutConfig(api);\n      labelManager.layout(api);\n      labelManager.processLabelsOverall();\n    });\n  } // TODO will be treeshaked.\n\n\n  use(installLabelLayout);\n\n  function createDom(id, painter, dpr) {\n    var newDom = platformApi.createCanvas();\n    var width = painter.getWidth();\n    var height = painter.getHeight();\n    var newDomStyle = newDom.style;\n\n    if (newDomStyle) {\n      newDomStyle.position = 'absolute';\n      newDomStyle.left = '0';\n      newDomStyle.top = '0';\n      newDomStyle.width = width + 'px';\n      newDomStyle.height = height + 'px';\n      newDom.setAttribute('data-zr-dom-id', id);\n    }\n\n    newDom.width = width * dpr;\n    newDom.height = height * dpr;\n    return newDom;\n  }\n\n  var Layer = function (_super) {\n    __extends(Layer, _super);\n\n    function Layer(id, painter, dpr) {\n      var _this = _super.call(this) || this;\n\n      _this.motionBlur = false;\n      _this.lastFrameAlpha = 0.7;\n      _this.dpr = 1;\n      _this.virtual = false;\n      _this.config = {};\n      _this.incremental = false;\n      _this.zlevel = 0;\n      _this.maxRepaintRectCount = 5;\n      _this.__dirty = true;\n      _this.__firstTimePaint = true;\n      _this.__used = false;\n      _this.__drawIndex = 0;\n      _this.__startIndex = 0;\n      _this.__endIndex = 0;\n      _this.__prevStartIndex = null;\n      _this.__prevEndIndex = null;\n      var dom;\n      dpr = dpr || devicePixelRatio;\n\n      if (typeof id === 'string') {\n        dom = createDom(id, painter, dpr);\n      } else if (isObject(id)) {\n        dom = id;\n        id = dom.id;\n      }\n\n      _this.id = id;\n      _this.dom = dom;\n      var domStyle = dom.style;\n\n      if (domStyle) {\n        disableUserSelect(dom);\n\n        dom.onselectstart = function () {\n          return false;\n        };\n\n        domStyle.padding = '0';\n        domStyle.margin = '0';\n        domStyle.borderWidth = '0';\n      }\n\n      _this.painter = painter;\n      _this.dpr = dpr;\n      return _this;\n    }\n\n    Layer.prototype.getElementCount = function () {\n      return this.__endIndex - this.__startIndex;\n    };\n\n    Layer.prototype.afterBrush = function () {\n      this.__prevStartIndex = this.__startIndex;\n      this.__prevEndIndex = this.__endIndex;\n    };\n\n    Layer.prototype.initContext = function () {\n      this.ctx = this.dom.getContext('2d');\n      this.ctx.dpr = this.dpr;\n    };\n\n    Layer.prototype.setUnpainted = function () {\n      this.__firstTimePaint = true;\n    };\n\n    Layer.prototype.createBackBuffer = function () {\n      var dpr = this.dpr;\n      this.domBack = createDom('back-' + this.id, this.painter, dpr);\n      this.ctxBack = this.domBack.getContext('2d');\n\n      if (dpr !== 1) {\n        this.ctxBack.scale(dpr, dpr);\n      }\n    };\n\n    Layer.prototype.createRepaintRects = function (displayList, prevList, viewWidth, viewHeight) {\n      if (this.__firstTimePaint) {\n        this.__firstTimePaint = false;\n        return null;\n      }\n\n      var mergedRepaintRects = [];\n      var maxRepaintRectCount = this.maxRepaintRectCount;\n      var full = false;\n      var pendingRect = new BoundingRect(0, 0, 0, 0);\n\n      function addRectToMergePool(rect) {\n        if (!rect.isFinite() || rect.isZero()) {\n          return;\n        }\n\n        if (mergedRepaintRects.length === 0) {\n          var boundingRect = new BoundingRect(0, 0, 0, 0);\n          boundingRect.copy(rect);\n          mergedRepaintRects.push(boundingRect);\n        } else {\n          var isMerged = false;\n          var minDeltaArea = Infinity;\n          var bestRectToMergeIdx = 0;\n\n          for (var i = 0; i < mergedRepaintRects.length; ++i) {\n            var mergedRect = mergedRepaintRects[i];\n\n            if (mergedRect.intersect(rect)) {\n              var pendingRect_1 = new BoundingRect(0, 0, 0, 0);\n              pendingRect_1.copy(mergedRect);\n              pendingRect_1.union(rect);\n              mergedRepaintRects[i] = pendingRect_1;\n              isMerged = true;\n              break;\n            } else if (full) {\n              pendingRect.copy(rect);\n              pendingRect.union(mergedRect);\n              var aArea = rect.width * rect.height;\n              var bArea = mergedRect.width * mergedRect.height;\n              var pendingArea = pendingRect.width * pendingRect.height;\n              var deltaArea = pendingArea - aArea - bArea;\n\n              if (deltaArea < minDeltaArea) {\n                minDeltaArea = deltaArea;\n                bestRectToMergeIdx = i;\n              }\n            }\n          }\n\n          if (full) {\n            mergedRepaintRects[bestRectToMergeIdx].union(rect);\n            isMerged = true;\n          }\n\n          if (!isMerged) {\n            var boundingRect = new BoundingRect(0, 0, 0, 0);\n            boundingRect.copy(rect);\n            mergedRepaintRects.push(boundingRect);\n          }\n\n          if (!full) {\n            full = mergedRepaintRects.length >= maxRepaintRectCount;\n          }\n        }\n      }\n\n      for (var i = this.__startIndex; i < this.__endIndex; ++i) {\n        var el = displayList[i];\n\n        if (el) {\n          var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n          var prevRect = el.__isRendered && (el.__dirty & REDRAW_BIT || !shouldPaint) ? el.getPrevPaintRect() : null;\n\n          if (prevRect) {\n            addRectToMergePool(prevRect);\n          }\n\n          var curRect = shouldPaint && (el.__dirty & REDRAW_BIT || !el.__isRendered) ? el.getPaintRect() : null;\n\n          if (curRect) {\n            addRectToMergePool(curRect);\n          }\n        }\n      }\n\n      for (var i = this.__prevStartIndex; i < this.__prevEndIndex; ++i) {\n        var el = prevList[i];\n        var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n\n        if (el && (!shouldPaint || !el.__zr) && el.__isRendered) {\n          var prevRect = el.getPrevPaintRect();\n\n          if (prevRect) {\n            addRectToMergePool(prevRect);\n          }\n        }\n      }\n\n      var hasIntersections;\n\n      do {\n        hasIntersections = false;\n\n        for (var i = 0; i < mergedRepaintRects.length;) {\n          if (mergedRepaintRects[i].isZero()) {\n            mergedRepaintRects.splice(i, 1);\n            continue;\n          }\n\n          for (var j = i + 1; j < mergedRepaintRects.length;) {\n            if (mergedRepaintRects[i].intersect(mergedRepaintRects[j])) {\n              hasIntersections = true;\n              mergedRepaintRects[i].union(mergedRepaintRects[j]);\n              mergedRepaintRects.splice(j, 1);\n            } else {\n              j++;\n            }\n          }\n\n          i++;\n        }\n      } while (hasIntersections);\n\n      this._paintRects = mergedRepaintRects;\n      return mergedRepaintRects;\n    };\n\n    Layer.prototype.debugGetPaintRects = function () {\n      return (this._paintRects || []).slice();\n    };\n\n    Layer.prototype.resize = function (width, height) {\n      var dpr = this.dpr;\n      var dom = this.dom;\n      var domStyle = dom.style;\n      var domBack = this.domBack;\n\n      if (domStyle) {\n        domStyle.width = width + 'px';\n        domStyle.height = height + 'px';\n      }\n\n      dom.width = width * dpr;\n      dom.height = height * dpr;\n\n      if (domBack) {\n        domBack.width = width * dpr;\n        domBack.height = height * dpr;\n\n        if (dpr !== 1) {\n          this.ctxBack.scale(dpr, dpr);\n        }\n      }\n    };\n\n    Layer.prototype.clear = function (clearAll, clearColor, repaintRects) {\n      var dom = this.dom;\n      var ctx = this.ctx;\n      var width = dom.width;\n      var height = dom.height;\n      clearColor = clearColor || this.clearColor;\n      var haveMotionBLur = this.motionBlur && !clearAll;\n      var lastFrameAlpha = this.lastFrameAlpha;\n      var dpr = this.dpr;\n      var self = this;\n\n      if (haveMotionBLur) {\n        if (!this.domBack) {\n          this.createBackBuffer();\n        }\n\n        this.ctxBack.globalCompositeOperation = 'copy';\n        this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n      }\n\n      var domBack = this.domBack;\n\n      function doClear(x, y, width, height) {\n        ctx.clearRect(x, y, width, height);\n\n        if (clearColor && clearColor !== 'transparent') {\n          var clearColorGradientOrPattern = void 0;\n\n          if (isGradientObject(clearColor)) {\n            clearColorGradientOrPattern = clearColor.__canvasGradient || getCanvasGradient(ctx, clearColor, {\n              x: 0,\n              y: 0,\n              width: width,\n              height: height\n            });\n            clearColor.__canvasGradient = clearColorGradientOrPattern;\n          } else if (isImagePatternObject(clearColor)) {\n            clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {\n              dirty: function () {\n                self.setUnpainted();\n\n                self.__painter.refresh();\n              }\n            });\n          }\n\n          ctx.save();\n          ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n          ctx.fillRect(x, y, width, height);\n          ctx.restore();\n        }\n\n        if (haveMotionBLur) {\n          ctx.save();\n          ctx.globalAlpha = lastFrameAlpha;\n          ctx.drawImage(domBack, x, y, width, height);\n          ctx.restore();\n        }\n      }\n\n      if (!repaintRects || haveMotionBLur) {\n        doClear(0, 0, width, height);\n      } else if (repaintRects.length) {\n        each(repaintRects, function (rect) {\n          doClear(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n        });\n      }\n    };\n\n    return Layer;\n  }(Eventful);\n\n  var HOVER_LAYER_ZLEVEL = 1e5;\n  var CANVAS_ZLEVEL = 314159;\n  var EL_AFTER_INCREMENTAL_INC = 0.01;\n  var INCREMENTAL_INC = 0.001;\n\n  function isLayerValid(layer) {\n    if (!layer) {\n      return false;\n    }\n\n    if (layer.__builtin__) {\n      return true;\n    }\n\n    if (typeof layer.resize !== 'function' || typeof layer.refresh !== 'function') {\n      return false;\n    }\n\n    return true;\n  }\n\n  function createRoot(width, height) {\n    var domRoot = document.createElement('div');\n    domRoot.style.cssText = ['position:relative', 'width:' + width + 'px', 'height:' + height + 'px', 'padding:0', 'margin:0', 'border-width:0'].join(';') + ';';\n    return domRoot;\n  }\n\n  var CanvasPainter = function () {\n    function CanvasPainter(root, storage, opts, id) {\n      this.type = 'canvas';\n      this._zlevelList = [];\n      this._prevDisplayList = [];\n      this._layers = {};\n      this._layerConfig = {};\n      this._needsManuallyCompositing = false;\n      this.type = 'canvas';\n      var singleCanvas = !root.nodeName || root.nodeName.toUpperCase() === 'CANVAS';\n      this._opts = opts = extend({}, opts || {});\n      this.dpr = opts.devicePixelRatio || devicePixelRatio;\n      this._singleCanvas = singleCanvas;\n      this.root = root;\n      var rootStyle = root.style;\n\n      if (rootStyle) {\n        disableUserSelect(root);\n        root.innerHTML = '';\n      }\n\n      this.storage = storage;\n      var zlevelList = this._zlevelList;\n      this._prevDisplayList = [];\n      var layers = this._layers;\n\n      if (!singleCanvas) {\n        this._width = getSize(root, 0, opts);\n        this._height = getSize(root, 1, opts);\n        var domRoot = this._domRoot = createRoot(this._width, this._height);\n        root.appendChild(domRoot);\n      } else {\n        var rootCanvas = root;\n        var width = rootCanvas.width;\n        var height = rootCanvas.height;\n\n        if (opts.width != null) {\n          width = opts.width;\n        }\n\n        if (opts.height != null) {\n          height = opts.height;\n        }\n\n        this.dpr = opts.devicePixelRatio || 1;\n        rootCanvas.width = width * this.dpr;\n        rootCanvas.height = height * this.dpr;\n        this._width = width;\n        this._height = height;\n        var mainLayer = new Layer(rootCanvas, this, this.dpr);\n        mainLayer.__builtin__ = true;\n        mainLayer.initContext();\n        layers[CANVAS_ZLEVEL] = mainLayer;\n        mainLayer.zlevel = CANVAS_ZLEVEL;\n        zlevelList.push(CANVAS_ZLEVEL);\n        this._domRoot = root;\n      }\n    }\n\n    CanvasPainter.prototype.getType = function () {\n      return 'canvas';\n    };\n\n    CanvasPainter.prototype.isSingleCanvas = function () {\n      return this._singleCanvas;\n    };\n\n    CanvasPainter.prototype.getViewportRoot = function () {\n      return this._domRoot;\n    };\n\n    CanvasPainter.prototype.getViewportRootOffset = function () {\n      var viewportRoot = this.getViewportRoot();\n\n      if (viewportRoot) {\n        return {\n          offsetLeft: viewportRoot.offsetLeft || 0,\n          offsetTop: viewportRoot.offsetTop || 0\n        };\n      }\n    };\n\n    CanvasPainter.prototype.refresh = function (paintAll) {\n      var list = this.storage.getDisplayList(true);\n      var prevList = this._prevDisplayList;\n      var zlevelList = this._zlevelList;\n      this._redrawId = Math.random();\n\n      this._paintList(list, prevList, paintAll, this._redrawId);\n\n      for (var i = 0; i < zlevelList.length; i++) {\n        var z = zlevelList[i];\n        var layer = this._layers[z];\n\n        if (!layer.__builtin__ && layer.refresh) {\n          var clearColor = i === 0 ? this._backgroundColor : null;\n          layer.refresh(clearColor);\n        }\n      }\n\n      if (this._opts.useDirtyRect) {\n        this._prevDisplayList = list.slice();\n      }\n\n      return this;\n    };\n\n    CanvasPainter.prototype.refreshHover = function () {\n      this._paintHoverList(this.storage.getDisplayList(false));\n    };\n\n    CanvasPainter.prototype._paintHoverList = function (list) {\n      var len = list.length;\n      var hoverLayer = this._hoverlayer;\n      hoverLayer && hoverLayer.clear();\n\n      if (!len) {\n        return;\n      }\n\n      var scope = {\n        inHover: true,\n        viewWidth: this._width,\n        viewHeight: this._height\n      };\n      var ctx;\n\n      for (var i = 0; i < len; i++) {\n        var el = list[i];\n\n        if (el.__inHover) {\n          if (!hoverLayer) {\n            hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\n          }\n\n          if (!ctx) {\n            ctx = hoverLayer.ctx;\n            ctx.save();\n          }\n\n          brush(ctx, el, scope, i === len - 1);\n        }\n      }\n\n      if (ctx) {\n        ctx.restore();\n      }\n    };\n\n    CanvasPainter.prototype.getHoverLayer = function () {\n      return this.getLayer(HOVER_LAYER_ZLEVEL);\n    };\n\n    CanvasPainter.prototype.paintOne = function (ctx, el) {\n      brushSingle(ctx, el);\n    };\n\n    CanvasPainter.prototype._paintList = function (list, prevList, paintAll, redrawId) {\n      if (this._redrawId !== redrawId) {\n        return;\n      }\n\n      paintAll = paintAll || false;\n\n      this._updateLayerStatus(list);\n\n      var _a = this._doPaintList(list, prevList, paintAll),\n          finished = _a.finished,\n          needsRefreshHover = _a.needsRefreshHover;\n\n      if (this._needsManuallyCompositing) {\n        this._compositeManually();\n      }\n\n      if (needsRefreshHover) {\n        this._paintHoverList(list);\n      }\n\n      if (!finished) {\n        var self_1 = this;\n        requestAnimationFrame$1(function () {\n          self_1._paintList(list, prevList, paintAll, redrawId);\n        });\n      } else {\n        this.eachLayer(function (layer) {\n          layer.afterBrush && layer.afterBrush();\n        });\n      }\n    };\n\n    CanvasPainter.prototype._compositeManually = function () {\n      var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\n      var width = this._domRoot.width;\n      var height = this._domRoot.height;\n      ctx.clearRect(0, 0, width, height);\n      this.eachBuiltinLayer(function (layer) {\n        if (layer.virtual) {\n          ctx.drawImage(layer.dom, 0, 0, width, height);\n        }\n      });\n    };\n\n    CanvasPainter.prototype._doPaintList = function (list, prevList, paintAll) {\n      var _this = this;\n\n      var layerList = [];\n      var useDirtyRect = this._opts.useDirtyRect;\n\n      for (var zi = 0; zi < this._zlevelList.length; zi++) {\n        var zlevel = this._zlevelList[zi];\n        var layer = this._layers[zlevel];\n\n        if (layer.__builtin__ && layer !== this._hoverlayer && (layer.__dirty || paintAll)) {\n          layerList.push(layer);\n        }\n      }\n\n      var finished = true;\n      var needsRefreshHover = false;\n\n      var _loop_1 = function (k) {\n        var layer = layerList[k];\n        var ctx = layer.ctx;\n        var repaintRects = useDirtyRect && layer.createRepaintRects(list, prevList, this_1._width, this_1._height);\n        var start = paintAll ? layer.__startIndex : layer.__drawIndex;\n        var useTimer = !paintAll && layer.incremental && Date.now;\n        var startTime = useTimer && Date.now();\n        var clearColor = layer.zlevel === this_1._zlevelList[0] ? this_1._backgroundColor : null;\n\n        if (layer.__startIndex === layer.__endIndex) {\n          layer.clear(false, clearColor, repaintRects);\n        } else if (start === layer.__startIndex) {\n          var firstEl = list[start];\n\n          if (!firstEl.incremental || !firstEl.notClear || paintAll) {\n            layer.clear(false, clearColor, repaintRects);\n          }\n        }\n\n        if (start === -1) {\n          console.error('For some unknown reason. drawIndex is -1');\n          start = layer.__startIndex;\n        }\n\n        var i;\n\n        var repaint = function (repaintRect) {\n          var scope = {\n            inHover: false,\n            allClipped: false,\n            prevEl: null,\n            viewWidth: _this._width,\n            viewHeight: _this._height\n          };\n\n          for (i = start; i < layer.__endIndex; i++) {\n            var el = list[i];\n\n            if (el.__inHover) {\n              needsRefreshHover = true;\n            }\n\n            _this._doPaintEl(el, layer, useDirtyRect, repaintRect, scope, i === layer.__endIndex - 1);\n\n            if (useTimer) {\n              var dTime = Date.now() - startTime;\n\n              if (dTime > 15) {\n                break;\n              }\n            }\n          }\n\n          if (scope.prevElClipPaths) {\n            ctx.restore();\n          }\n        };\n\n        if (repaintRects) {\n          if (repaintRects.length === 0) {\n            i = layer.__endIndex;\n          } else {\n            var dpr = this_1.dpr;\n\n            for (var r = 0; r < repaintRects.length; ++r) {\n              var rect = repaintRects[r];\n              ctx.save();\n              ctx.beginPath();\n              ctx.rect(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n              ctx.clip();\n              repaint(rect);\n              ctx.restore();\n            }\n          }\n        } else {\n          ctx.save();\n          repaint();\n          ctx.restore();\n        }\n\n        layer.__drawIndex = i;\n\n        if (layer.__drawIndex < layer.__endIndex) {\n          finished = false;\n        }\n      };\n\n      var this_1 = this;\n\n      for (var k = 0; k < layerList.length; k++) {\n        _loop_1(k);\n      }\n\n      if (env.wxa) {\n        each(this._layers, function (layer) {\n          if (layer && layer.ctx && layer.ctx.draw) {\n            layer.ctx.draw();\n          }\n        });\n      }\n\n      return {\n        finished: finished,\n        needsRefreshHover: needsRefreshHover\n      };\n    };\n\n    CanvasPainter.prototype._doPaintEl = function (el, currentLayer, useDirtyRect, repaintRect, scope, isLast) {\n      var ctx = currentLayer.ctx;\n\n      if (useDirtyRect) {\n        var paintRect = el.getPaintRect();\n\n        if (!repaintRect || paintRect && paintRect.intersect(repaintRect)) {\n          brush(ctx, el, scope, isLast);\n          el.setPrevPaintRect(paintRect);\n        }\n      } else {\n        brush(ctx, el, scope, isLast);\n      }\n    };\n\n    CanvasPainter.prototype.getLayer = function (zlevel, virtual) {\n      if (this._singleCanvas && !this._needsManuallyCompositing) {\n        zlevel = CANVAS_ZLEVEL;\n      }\n\n      var layer = this._layers[zlevel];\n\n      if (!layer) {\n        layer = new Layer('zr_' + zlevel, this, this.dpr);\n        layer.zlevel = zlevel;\n        layer.__builtin__ = true;\n\n        if (this._layerConfig[zlevel]) {\n          merge(layer, this._layerConfig[zlevel], true);\n        } else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\n          merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\n        }\n\n        if (virtual) {\n          layer.virtual = virtual;\n        }\n\n        this.insertLayer(zlevel, layer);\n        layer.initContext();\n      }\n\n      return layer;\n    };\n\n    CanvasPainter.prototype.insertLayer = function (zlevel, layer) {\n      var layersMap = this._layers;\n      var zlevelList = this._zlevelList;\n      var len = zlevelList.length;\n      var domRoot = this._domRoot;\n      var prevLayer = null;\n      var i = -1;\n\n      if (layersMap[zlevel]) {\n        {\n          logError('ZLevel ' + zlevel + ' has been used already');\n        }\n        return;\n      }\n\n      if (!isLayerValid(layer)) {\n        {\n          logError('Layer of zlevel ' + zlevel + ' is not valid');\n        }\n        return;\n      }\n\n      if (len > 0 && zlevel > zlevelList[0]) {\n        for (i = 0; i < len - 1; i++) {\n          if (zlevelList[i] < zlevel && zlevelList[i + 1] > zlevel) {\n            break;\n          }\n        }\n\n        prevLayer = layersMap[zlevelList[i]];\n      }\n\n      zlevelList.splice(i + 1, 0, zlevel);\n      layersMap[zlevel] = layer;\n\n      if (!layer.virtual) {\n        if (prevLayer) {\n          var prevDom = prevLayer.dom;\n\n          if (prevDom.nextSibling) {\n            domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n          } else {\n            domRoot.appendChild(layer.dom);\n          }\n        } else {\n          if (domRoot.firstChild) {\n            domRoot.insertBefore(layer.dom, domRoot.firstChild);\n          } else {\n            domRoot.appendChild(layer.dom);\n          }\n        }\n      }\n\n      layer.__painter = this;\n    };\n\n    CanvasPainter.prototype.eachLayer = function (cb, context) {\n      var zlevelList = this._zlevelList;\n\n      for (var i = 0; i < zlevelList.length; i++) {\n        var z = zlevelList[i];\n        cb.call(context, this._layers[z], z);\n      }\n    };\n\n    CanvasPainter.prototype.eachBuiltinLayer = function (cb, context) {\n      var zlevelList = this._zlevelList;\n\n      for (var i = 0; i < zlevelList.length; i++) {\n        var z = zlevelList[i];\n        var layer = this._layers[z];\n\n        if (layer.__builtin__) {\n          cb.call(context, layer, z);\n        }\n      }\n    };\n\n    CanvasPainter.prototype.eachOtherLayer = function (cb, context) {\n      var zlevelList = this._zlevelList;\n\n      for (var i = 0; i < zlevelList.length; i++) {\n        var z = zlevelList[i];\n        var layer = this._layers[z];\n\n        if (!layer.__builtin__) {\n          cb.call(context, layer, z);\n        }\n      }\n    };\n\n    CanvasPainter.prototype.getLayers = function () {\n      return this._layers;\n    };\n\n    CanvasPainter.prototype._updateLayerStatus = function (list) {\n      this.eachBuiltinLayer(function (layer, z) {\n        layer.__dirty = layer.__used = false;\n      });\n\n      function updatePrevLayer(idx) {\n        if (prevLayer) {\n          if (prevLayer.__endIndex !== idx) {\n            prevLayer.__dirty = true;\n          }\n\n          prevLayer.__endIndex = idx;\n        }\n      }\n\n      if (this._singleCanvas) {\n        for (var i_1 = 1; i_1 < list.length; i_1++) {\n          var el = list[i_1];\n\n          if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {\n            this._needsManuallyCompositing = true;\n            break;\n          }\n        }\n      }\n\n      var prevLayer = null;\n      var incrementalLayerCount = 0;\n      var prevZlevel;\n      var i;\n\n      for (i = 0; i < list.length; i++) {\n        var el = list[i];\n        var zlevel = el.zlevel;\n        var layer = void 0;\n\n        if (prevZlevel !== zlevel) {\n          prevZlevel = zlevel;\n          incrementalLayerCount = 0;\n        }\n\n        if (el.incremental) {\n          layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\n          layer.incremental = true;\n          incrementalLayerCount = 1;\n        } else {\n          layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\n        }\n\n        if (!layer.__builtin__) {\n          logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\n        }\n\n        if (layer !== prevLayer) {\n          layer.__used = true;\n\n          if (layer.__startIndex !== i) {\n            layer.__dirty = true;\n          }\n\n          layer.__startIndex = i;\n\n          if (!layer.incremental) {\n            layer.__drawIndex = i;\n          } else {\n            layer.__drawIndex = -1;\n          }\n\n          updatePrevLayer(i);\n          prevLayer = layer;\n        }\n\n        if (el.__dirty & REDRAW_BIT && !el.__inHover) {\n          layer.__dirty = true;\n\n          if (layer.incremental && layer.__drawIndex < 0) {\n            layer.__drawIndex = i;\n          }\n        }\n      }\n\n      updatePrevLayer(i);\n      this.eachBuiltinLayer(function (layer, z) {\n        if (!layer.__used && layer.getElementCount() > 0) {\n          layer.__dirty = true;\n          layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\n        }\n\n        if (layer.__dirty && layer.__drawIndex < 0) {\n          layer.__drawIndex = layer.__startIndex;\n        }\n      });\n    };\n\n    CanvasPainter.prototype.clear = function () {\n      this.eachBuiltinLayer(this._clearLayer);\n      return this;\n    };\n\n    CanvasPainter.prototype._clearLayer = function (layer) {\n      layer.clear();\n    };\n\n    CanvasPainter.prototype.setBackgroundColor = function (backgroundColor) {\n      this._backgroundColor = backgroundColor;\n      each(this._layers, function (layer) {\n        layer.setUnpainted();\n      });\n    };\n\n    CanvasPainter.prototype.configLayer = function (zlevel, config) {\n      if (config) {\n        var layerConfig = this._layerConfig;\n\n        if (!layerConfig[zlevel]) {\n          layerConfig[zlevel] = config;\n        } else {\n          merge(layerConfig[zlevel], config, true);\n        }\n\n        for (var i = 0; i < this._zlevelList.length; i++) {\n          var _zlevel = this._zlevelList[i];\n\n          if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\n            var layer = this._layers[_zlevel];\n            merge(layer, layerConfig[zlevel], true);\n          }\n        }\n      }\n    };\n\n    CanvasPainter.prototype.delLayer = function (zlevel) {\n      var layers = this._layers;\n      var zlevelList = this._zlevelList;\n      var layer = layers[zlevel];\n\n      if (!layer) {\n        return;\n      }\n\n      layer.dom.parentNode.removeChild(layer.dom);\n      delete layers[zlevel];\n      zlevelList.splice(indexOf(zlevelList, zlevel), 1);\n    };\n\n    CanvasPainter.prototype.resize = function (width, height) {\n      if (!this._domRoot.style) {\n        if (width == null || height == null) {\n          return;\n        }\n\n        this._width = width;\n        this._height = height;\n        this.getLayer(CANVAS_ZLEVEL).resize(width, height);\n      } else {\n        var domRoot = this._domRoot;\n        domRoot.style.display = 'none';\n        var opts = this._opts;\n        var root = this.root;\n        width != null && (opts.width = width);\n        height != null && (opts.height = height);\n        width = getSize(root, 0, opts);\n        height = getSize(root, 1, opts);\n        domRoot.style.display = '';\n\n        if (this._width !== width || height !== this._height) {\n          domRoot.style.width = width + 'px';\n          domRoot.style.height = height + 'px';\n\n          for (var id in this._layers) {\n            if (this._layers.hasOwnProperty(id)) {\n              this._layers[id].resize(width, height);\n            }\n          }\n\n          this.refresh(true);\n        }\n\n        this._width = width;\n        this._height = height;\n      }\n\n      return this;\n    };\n\n    CanvasPainter.prototype.clearLayer = function (zlevel) {\n      var layer = this._layers[zlevel];\n\n      if (layer) {\n        layer.clear();\n      }\n    };\n\n    CanvasPainter.prototype.dispose = function () {\n      this.root.innerHTML = '';\n      this.root = this.storage = this._domRoot = this._layers = null;\n    };\n\n    CanvasPainter.prototype.getRenderedCanvas = function (opts) {\n      opts = opts || {};\n\n      if (this._singleCanvas && !this._compositeManually) {\n        return this._layers[CANVAS_ZLEVEL].dom;\n      }\n\n      var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n      imageLayer.initContext();\n      imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\n      var ctx = imageLayer.ctx;\n\n      if (opts.pixelRatio <= this.dpr) {\n        this.refresh();\n        var width_1 = imageLayer.dom.width;\n        var height_1 = imageLayer.dom.height;\n        this.eachLayer(function (layer) {\n          if (layer.__builtin__) {\n            ctx.drawImage(layer.dom, 0, 0, width_1, height_1);\n          } else if (layer.renderToCanvas) {\n            ctx.save();\n            layer.renderToCanvas(ctx);\n            ctx.restore();\n          }\n        });\n      } else {\n        var scope = {\n          inHover: false,\n          viewWidth: this._width,\n          viewHeight: this._height\n        };\n        var displayList = this.storage.getDisplayList(true);\n\n        for (var i = 0, len = displayList.length; i < len; i++) {\n          var el = displayList[i];\n          brush(ctx, el, scope, i === len - 1);\n        }\n      }\n\n      return imageLayer.dom;\n    };\n\n    CanvasPainter.prototype.getWidth = function () {\n      return this._width;\n    };\n\n    CanvasPainter.prototype.getHeight = function () {\n      return this._height;\n    };\n\n    return CanvasPainter;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install(registers) {\n    registers.registerPainter('canvas', CanvasPainter);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * This module is imported by echarts directly.\n   *\n   * Notice:\n   * Always keep this file exists for backward compatibility.\n   * Because before 4.1.0, dataset is an optional component,\n   * some users may import this module manually.\n   */\n\n\n  var DatasetModel =\n  /** @class */\n  function (_super) {\n    __extends(DatasetModel, _super);\n\n    function DatasetModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = 'dataset';\n      return _this;\n    }\n\n    DatasetModel.prototype.init = function (option, parentModel, ecModel) {\n      _super.prototype.init.call(this, option, parentModel, ecModel);\n\n      this._sourceManager = new SourceManager(this);\n      disableTransformOptionMerge(this);\n    };\n\n    DatasetModel.prototype.mergeOption = function (newOption, ecModel) {\n      _super.prototype.mergeOption.call(this, newOption, ecModel);\n\n      disableTransformOptionMerge(this);\n    };\n\n    DatasetModel.prototype.optionUpdated = function () {\n      this._sourceManager.dirty();\n    };\n\n    DatasetModel.prototype.getSourceManager = function () {\n      return this._sourceManager;\n    };\n\n    DatasetModel.type = 'dataset';\n    DatasetModel.defaultOption = {\n      seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN\n    };\n    return DatasetModel;\n  }(ComponentModel);\n\n  var DatasetView =\n  /** @class */\n  function (_super) {\n    __extends(DatasetView, _super);\n\n    function DatasetView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = 'dataset';\n      return _this;\n    }\n\n    DatasetView.type = 'dataset';\n    return DatasetView;\n  }(ComponentView);\n\n  function install$1(registers) {\n    registers.registerComponentModel(DatasetModel);\n    registers.registerComponentView(DatasetView);\n  }\n\n  use([install, install$1]); // TODO: Compatitable with the following code\n  // import echarts from 'echarts/lib/echarts.js'\n  // TODO remove\n\n  use(installLabelLayout);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var samplers = {\n    average: function (frame) {\n      var sum = 0;\n      var count = 0;\n\n      for (var i = 0; i < frame.length; i++) {\n        if (!isNaN(frame[i])) {\n          sum += frame[i];\n          count++;\n        }\n      } // Return NaN if count is 0\n\n\n      return count === 0 ? NaN : sum / count;\n    },\n    sum: function (frame) {\n      var sum = 0;\n\n      for (var i = 0; i < frame.length; i++) {\n        // Ignore NaN\n        sum += frame[i] || 0;\n      }\n\n      return sum;\n    },\n    max: function (frame) {\n      var max = -Infinity;\n\n      for (var i = 0; i < frame.length; i++) {\n        frame[i] > max && (max = frame[i]);\n      } // NaN will cause illegal axis extent.\n\n\n      return isFinite(max) ? max : NaN;\n    },\n    min: function (frame) {\n      var min = Infinity;\n\n      for (var i = 0; i < frame.length; i++) {\n        frame[i] < min && (min = frame[i]);\n      } // NaN will cause illegal axis extent.\n\n\n      return isFinite(min) ? min : NaN;\n    },\n    // TODO\n    // Median\n    nearest: function (frame) {\n      return frame[0];\n    }\n  };\n\n  var indexSampler = function (frame) {\n    return Math.round(frame.length / 2);\n  };\n\n  function dataSample(seriesType) {\n    return {\n      seriesType: seriesType,\n      // FIXME:TS never used, so comment it\n      // modifyOutputEnd: true,\n      reset: function (seriesModel, ecModel, api) {\n        var data = seriesModel.getData();\n        var sampling = seriesModel.get('sampling');\n        var coordSys = seriesModel.coordinateSystem;\n        var count = data.count(); // Only cartesian2d support down sampling. Disable it when there is few data.\n\n        if (count > 10 && coordSys.type === 'cartesian2d' && sampling) {\n          var baseAxis = coordSys.getBaseAxis();\n          var valueAxis = coordSys.getOtherAxis(baseAxis);\n          var extent = baseAxis.getExtent();\n          var dpr = api.getDevicePixelRatio(); // Coordinste system has been resized\n\n          var size = Math.abs(extent[1] - extent[0]) * (dpr || 1);\n          var rate = Math.round(count / size);\n\n          if (isFinite(rate) && rate > 1) {\n            if (sampling === 'lttb') {\n              seriesModel.setData(data.lttbDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\n            }\n\n            var sampler = void 0;\n\n            if (isString(sampling)) {\n              sampler = samplers[sampling];\n            } else if (isFunction(sampling)) {\n              sampler = sampling;\n            }\n\n            if (sampler) {\n              // Only support sample the first dim mapped from value axis.\n              seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n            }\n          }\n        }\n      }\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var BaseBarSeriesModel =\n  /** @class */\n  function (_super) {\n    __extends(BaseBarSeriesModel, _super);\n\n    function BaseBarSeriesModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = BaseBarSeriesModel.type;\n      return _this;\n    }\n\n    BaseBarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n      return createSeriesData(null, this, {\n        useEncodeDefaulter: true\n      });\n    };\n\n    BaseBarSeriesModel.prototype.getMarkerPosition = function (value) {\n      var coordSys = this.coordinateSystem;\n\n      if (coordSys && coordSys.clampData) {\n        // PENDING if clamp ?\n        var pt = coordSys.dataToPoint(coordSys.clampData(value));\n        var data = this.getData();\n        var offset = data.getLayout('offset');\n        var size = data.getLayout('size');\n        var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\n        pt[offsetIndex] += offset + size / 2;\n        return pt;\n      }\n\n      return [NaN, NaN];\n    };\n\n    BaseBarSeriesModel.type = 'series.__base_bar__';\n    BaseBarSeriesModel.defaultOption = {\n      // zlevel: 0,\n      z: 2,\n      coordinateSystem: 'cartesian2d',\n      legendHoverLink: true,\n      // stack: null\n      // Cartesian coordinate system\n      // xAxisIndex: 0,\n      // yAxisIndex: 0,\n      barMinHeight: 0,\n      barMinAngle: 0,\n      // cursor: null,\n      large: false,\n      largeThreshold: 400,\n      progressive: 3e3,\n      progressiveChunkMode: 'mod'\n    };\n    return BaseBarSeriesModel;\n  }(SeriesModel);\n\n  SeriesModel.registerClass(BaseBarSeriesModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var BarSeriesModel =\n  /** @class */\n  function (_super) {\n    __extends(BarSeriesModel, _super);\n\n    function BarSeriesModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = BarSeriesModel.type;\n      return _this;\n    }\n\n    BarSeriesModel.prototype.getInitialData = function () {\n      return createSeriesData(null, this, {\n        useEncodeDefaulter: true,\n        createInvertedIndices: !!this.get('realtimeSort', true) || null\n      });\n    };\n    /**\n     * @override\n     */\n\n\n    BarSeriesModel.prototype.getProgressive = function () {\n      // Do not support progressive in normal mode.\n      return this.get('large') ? this.get('progressive') : false;\n    };\n    /**\n     * @override\n     */\n\n\n    BarSeriesModel.prototype.getProgressiveThreshold = function () {\n      // Do not support progressive in normal mode.\n      var progressiveThreshold = this.get('progressiveThreshold');\n      var largeThreshold = this.get('largeThreshold');\n\n      if (largeThreshold > progressiveThreshold) {\n        progressiveThreshold = largeThreshold;\n      }\n\n      return progressiveThreshold;\n    };\n\n    BarSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n      return selectors.rect(data.getItemLayout(dataIndex));\n    };\n\n    BarSeriesModel.type = 'series.bar';\n    BarSeriesModel.dependencies = ['grid', 'polar'];\n    BarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n      // If clipped\n      // Only available on cartesian2d\n      clip: true,\n      roundCap: false,\n      showBackground: false,\n      backgroundStyle: {\n        color: 'rgba(180, 180, 180, 0.2)',\n        borderColor: null,\n        borderWidth: 0,\n        borderType: 'solid',\n        borderRadius: 0,\n        shadowBlur: 0,\n        shadowColor: null,\n        shadowOffsetX: 0,\n        shadowOffsetY: 0,\n        opacity: 1\n      },\n      select: {\n        itemStyle: {\n          borderColor: '#212121'\n        }\n      },\n      realtimeSort: false\n    });\n    return BarSeriesModel;\n  }(BaseBarSeriesModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function createGridClipPath(cartesian, hasAnimation, seriesModel, done, during) {\n    var rect = cartesian.getArea();\n    var x = rect.x;\n    var y = rect.y;\n    var width = rect.width;\n    var height = rect.height;\n    var lineWidth = seriesModel.get(['lineStyle', 'width']) || 2; // Expand the clip path a bit to avoid the border is clipped and looks thinner\n\n    x -= lineWidth / 2;\n    y -= lineWidth / 2;\n    width += lineWidth;\n    height += lineWidth; // fix: https://github.com/apache/incubator-echarts/issues/11369\n\n    x = Math.floor(x);\n    width = Math.round(width);\n    var clipPath = new Rect({\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      }\n    });\n\n    if (hasAnimation) {\n      var baseAxis = cartesian.getBaseAxis();\n      var isHorizontal = baseAxis.isHorizontal();\n      var isAxisInversed = baseAxis.inverse;\n\n      if (isHorizontal) {\n        if (isAxisInversed) {\n          clipPath.shape.x += width;\n        }\n\n        clipPath.shape.width = 0;\n      } else {\n        if (!isAxisInversed) {\n          clipPath.shape.y += height;\n        }\n\n        clipPath.shape.height = 0;\n      }\n\n      var duringCb = isFunction(during) ? function (percent) {\n        during(percent, clipPath);\n      } : null;\n      initProps(clipPath, {\n        shape: {\n          width: width,\n          height: height,\n          x: x,\n          y: y\n        }\n      }, seriesModel, null, done, duringCb);\n    }\n\n    return clipPath;\n  }\n\n  function createPolarClipPath(polar, hasAnimation, seriesModel) {\n    var sectorArea = polar.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n\n    var r0 = round(sectorArea.r0, 1);\n    var r = round(sectorArea.r, 1);\n    var clipPath = new Sector({\n      shape: {\n        cx: round(polar.cx, 1),\n        cy: round(polar.cy, 1),\n        r0: r0,\n        r: r,\n        startAngle: sectorArea.startAngle,\n        endAngle: sectorArea.endAngle,\n        clockwise: sectorArea.clockwise\n      }\n    });\n\n    if (hasAnimation) {\n      var isRadial = polar.getBaseAxis().dim === 'angle';\n\n      if (isRadial) {\n        clipPath.shape.endAngle = sectorArea.startAngle;\n      } else {\n        clipPath.shape.r = r0;\n      }\n\n      initProps(clipPath, {\n        shape: {\n          endAngle: sectorArea.endAngle,\n          r: r\n        }\n      }, seriesModel);\n    }\n\n    return clipPath;\n  }\n\n  function createClipPath(coordSys, hasAnimation, seriesModel, done, during) {\n    if (!coordSys) {\n      return null;\n    } else if (coordSys.type === 'polar') {\n      return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n    } else if (coordSys.type === 'cartesian2d') {\n      return createGridClipPath(coordSys, hasAnimation, seriesModel, done, during);\n    }\n\n    return null;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Sausage: similar to sector, but have half circle on both sides\n   */\n\n\n  var SausageShape =\n  /** @class */\n  function () {\n    function SausageShape() {\n      this.cx = 0;\n      this.cy = 0;\n      this.r0 = 0;\n      this.r = 0;\n      this.startAngle = 0;\n      this.endAngle = Math.PI * 2;\n      this.clockwise = true;\n    }\n\n    return SausageShape;\n  }();\n\n  var SausagePath =\n  /** @class */\n  function (_super) {\n    __extends(SausagePath, _super);\n\n    function SausagePath(opts) {\n      var _this = _super.call(this, opts) || this;\n\n      _this.type = 'sausage';\n      return _this;\n    }\n\n    SausagePath.prototype.getDefaultShape = function () {\n      return new SausageShape();\n    };\n\n    SausagePath.prototype.buildPath = function (ctx, shape) {\n      var cx = shape.cx;\n      var cy = shape.cy;\n      var r0 = Math.max(shape.r0 || 0, 0);\n      var r = Math.max(shape.r, 0);\n      var dr = (r - r0) * 0.5;\n      var rCenter = r0 + dr;\n      var startAngle = shape.startAngle;\n      var endAngle = shape.endAngle;\n      var clockwise = shape.clockwise;\n      var PI2 = Math.PI * 2;\n      var lessThanCircle = clockwise ? endAngle - startAngle < PI2 : startAngle - endAngle < PI2;\n\n      if (!lessThanCircle) {\n        // Normalize angles\n        startAngle = endAngle - (clockwise ? PI2 : -PI2);\n      }\n\n      var unitStartX = Math.cos(startAngle);\n      var unitStartY = Math.sin(startAngle);\n      var unitEndX = Math.cos(endAngle);\n      var unitEndY = Math.sin(endAngle);\n\n      if (lessThanCircle) {\n        ctx.moveTo(unitStartX * r0 + cx, unitStartY * r0 + cy);\n        ctx.arc(unitStartX * rCenter + cx, unitStartY * rCenter + cy, dr, -Math.PI + startAngle, startAngle, !clockwise);\n      } else {\n        ctx.moveTo(unitStartX * r + cx, unitStartY * r + cy);\n      }\n\n      ctx.arc(cx, cy, r, startAngle, endAngle, !clockwise);\n      ctx.arc(unitEndX * rCenter + cx, unitEndY * rCenter + cy, dr, endAngle - Math.PI * 2, endAngle - Math.PI, !clockwise);\n\n      if (r0 !== 0) {\n        ctx.arc(cx, cy, r0, endAngle, startAngle, clockwise);\n      } // ctx.closePath();\n\n    };\n\n    return SausagePath;\n  }(Path);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function isCoordinateSystemType(coordSys, type) {\n    return coordSys.type === type;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * @return label string. Not null/undefined\n   */\n\n\n  function getDefaultLabel(data, dataIndex) {\n    var labelDims = data.mapDimensionsAll('defaultedLabel');\n    var len = labelDims.length; // Simple optimization (in lots of cases, label dims length is 1)\n\n    if (len === 1) {\n      var rawVal = retrieveRawValue(data, dataIndex, labelDims[0]);\n      return rawVal != null ? rawVal + '' : null;\n    } else if (len) {\n      var vals = [];\n\n      for (var i = 0; i < labelDims.length; i++) {\n        vals.push(retrieveRawValue(data, dataIndex, labelDims[i]));\n      }\n\n      return vals.join(' ');\n    }\n  }\n\n  function getDefaultInterpolatedLabel(data, interpolatedValue) {\n    var labelDims = data.mapDimensionsAll('defaultedLabel');\n\n    if (!isArray(interpolatedValue)) {\n      return interpolatedValue + '';\n    }\n\n    var vals = [];\n\n    for (var i = 0; i < labelDims.length; i++) {\n      var dimIndex = data.getDimensionIndex(labelDims[i]);\n\n      if (dimIndex >= 0) {\n        vals.push(interpolatedValue[dimIndex]);\n      }\n    }\n\n    return vals.join(' ');\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function createSectorCalculateTextPosition(positionMapping, opts) {\n    opts = opts || {};\n    var isRoundCap = opts.isRoundCap;\n    return function (out, opts, boundingRect) {\n      var textPosition = opts.position;\n\n      if (!textPosition || textPosition instanceof Array) {\n        return calculateTextPosition(out, opts, boundingRect);\n      }\n\n      var mappedSectorPosition = positionMapping(textPosition);\n      var distance = opts.distance != null ? opts.distance : 5;\n      var sector = this.shape;\n      var cx = sector.cx;\n      var cy = sector.cy;\n      var r = sector.r;\n      var r0 = sector.r0;\n      var middleR = (r + r0) / 2;\n      var startAngle = sector.startAngle;\n      var endAngle = sector.endAngle;\n      var middleAngle = (startAngle + endAngle) / 2;\n      var extraDist = isRoundCap ? Math.abs(r - r0) / 2 : 0;\n      var mathCos = Math.cos;\n      var mathSin = Math.sin; // base position: top-left\n\n      var x = cx + r * mathCos(startAngle);\n      var y = cy + r * mathSin(startAngle);\n      var textAlign = 'left';\n      var textVerticalAlign = 'top';\n\n      switch (mappedSectorPosition) {\n        case 'startArc':\n          x = cx + (r0 - distance) * mathCos(middleAngle);\n          y = cy + (r0 - distance) * mathSin(middleAngle);\n          textAlign = 'center';\n          textVerticalAlign = 'top';\n          break;\n\n        case 'insideStartArc':\n          x = cx + (r0 + distance) * mathCos(middleAngle);\n          y = cy + (r0 + distance) * mathSin(middleAngle);\n          textAlign = 'center';\n          textVerticalAlign = 'bottom';\n          break;\n\n        case 'startAngle':\n          x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, distance + extraDist, false);\n          y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, distance + extraDist, false);\n          textAlign = 'right';\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'insideStartAngle':\n          x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, -distance + extraDist, false);\n          y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, -distance + extraDist, false);\n          textAlign = 'left';\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'middle':\n          x = cx + middleR * mathCos(middleAngle);\n          y = cy + middleR * mathSin(middleAngle);\n          textAlign = 'center';\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'endArc':\n          x = cx + (r + distance) * mathCos(middleAngle);\n          y = cy + (r + distance) * mathSin(middleAngle);\n          textAlign = 'center';\n          textVerticalAlign = 'bottom';\n          break;\n\n        case 'insideEndArc':\n          x = cx + (r - distance) * mathCos(middleAngle);\n          y = cy + (r - distance) * mathSin(middleAngle);\n          textAlign = 'center';\n          textVerticalAlign = 'top';\n          break;\n\n        case 'endAngle':\n          x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, distance + extraDist, true);\n          y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, distance + extraDist, true);\n          textAlign = 'left';\n          textVerticalAlign = 'middle';\n          break;\n\n        case 'insideEndAngle':\n          x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, -distance + extraDist, true);\n          y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, -distance + extraDist, true);\n          textAlign = 'right';\n          textVerticalAlign = 'middle';\n          break;\n\n        default:\n          return calculateTextPosition(out, opts, boundingRect);\n      }\n\n      out = out || {};\n      out.x = x;\n      out.y = y;\n      out.align = textAlign;\n      out.verticalAlign = textVerticalAlign;\n      return out;\n    };\n  }\n\n  function setSectorTextRotation(sector, textPosition, positionMapping, rotateType) {\n    if (isNumber(rotateType)) {\n      // user-set rotation\n      sector.setTextConfig({\n        rotation: rotateType\n      });\n      return;\n    } else if (isArray(textPosition)) {\n      // user-set position, use 0 as auto rotation\n      sector.setTextConfig({\n        rotation: 0\n      });\n      return;\n    }\n\n    var shape = sector.shape;\n    var startAngle = shape.clockwise ? shape.startAngle : shape.endAngle;\n    var endAngle = shape.clockwise ? shape.endAngle : shape.startAngle;\n    var middleAngle = (startAngle + endAngle) / 2;\n    var anchorAngle;\n    var mappedSectorPosition = positionMapping(textPosition);\n\n    switch (mappedSectorPosition) {\n      case 'startArc':\n      case 'insideStartArc':\n      case 'middle':\n      case 'insideEndArc':\n      case 'endArc':\n        anchorAngle = middleAngle;\n        break;\n\n      case 'startAngle':\n      case 'insideStartAngle':\n        anchorAngle = startAngle;\n        break;\n\n      case 'endAngle':\n      case 'insideEndAngle':\n        anchorAngle = endAngle;\n        break;\n\n      default:\n        sector.setTextConfig({\n          rotation: 0\n        });\n        return;\n    }\n\n    var rotate = Math.PI * 1.5 - anchorAngle;\n    /**\n     * TODO: labels with rotate > Math.PI / 2 should be rotate another\n     * half round flipped to increase readability. However, only middle\n     * position supports this for now, because in other positions, the\n     * anchor point is not at the center of the text, so the positions\n     * after rotating is not as expected.\n     */\n\n    if (mappedSectorPosition === 'middle' && rotate > Math.PI / 2 && rotate < Math.PI * 1.5) {\n      rotate -= Math.PI;\n    }\n\n    sector.setTextConfig({\n      rotation: rotate\n    });\n  }\n\n  function adjustAngleDistanceX(angle, distance, isEnd) {\n    return distance * Math.sin(angle) * (isEnd ? -1 : 1);\n  }\n\n  function adjustAngleDistanceY(angle, distance, isEnd) {\n    return distance * Math.cos(angle) * (isEnd ? 1 : -1);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var mathMax$5 = Math.max;\n  var mathMin$5 = Math.min;\n\n  function getClipArea(coord, data) {\n    var coordSysClipArea = coord.getArea && coord.getArea();\n\n    if (isCoordinateSystemType(coord, 'cartesian2d')) {\n      var baseAxis = coord.getBaseAxis(); // When boundaryGap is false or using time axis. bar may exceed the grid.\n      // We should not clip this part.\n      // See test/bar2.html\n\n      if (baseAxis.type !== 'category' || !baseAxis.onBand) {\n        var expandWidth = data.getLayout('bandWidth');\n\n        if (baseAxis.isHorizontal()) {\n          coordSysClipArea.x -= expandWidth;\n          coordSysClipArea.width += expandWidth * 2;\n        } else {\n          coordSysClipArea.y -= expandWidth;\n          coordSysClipArea.height += expandWidth * 2;\n        }\n      }\n    }\n\n    return coordSysClipArea;\n  }\n\n  var BarView =\n  /** @class */\n  function (_super) {\n    __extends(BarView, _super);\n\n    function BarView() {\n      var _this = _super.call(this) || this;\n\n      _this.type = BarView.type;\n      _this._isFirstFrame = true;\n      return _this;\n    }\n\n    BarView.prototype.render = function (seriesModel, ecModel, api, payload) {\n      this._model = seriesModel;\n\n      this._removeOnRenderedListener(api);\n\n      this._updateDrawMode(seriesModel);\n\n      var coordinateSystemType = seriesModel.get('coordinateSystem');\n\n      if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\n        // Clear previously rendered progressive elements.\n        this._progressiveEls = null;\n        this._isLargeDraw ? this._renderLarge(seriesModel, ecModel, api) : this._renderNormal(seriesModel, ecModel, api, payload);\n      } else {\n        warn('Only cartesian2d and polar supported for bar.');\n      }\n    };\n\n    BarView.prototype.incrementalPrepareRender = function (seriesModel) {\n      this._clear();\n\n      this._updateDrawMode(seriesModel); // incremental also need to clip, otherwise might be overlow.\n      // But must not set clip in each frame, otherwise all of the children will be marked redraw.\n\n\n      this._updateLargeClip(seriesModel);\n    };\n\n    BarView.prototype.incrementalRender = function (params, seriesModel) {\n      // Reset\n      this._progressiveEls = []; // Do not support progressive in normal mode.\n\n      this._incrementalRenderLarge(params, seriesModel);\n    };\n\n    BarView.prototype.eachRendered = function (cb) {\n      traverseElements(this._progressiveEls || this.group, cb);\n    };\n\n    BarView.prototype._updateDrawMode = function (seriesModel) {\n      var isLargeDraw = seriesModel.pipelineContext.large;\n\n      if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n        this._isLargeDraw = isLargeDraw;\n\n        this._clear();\n      }\n    };\n\n    BarView.prototype._renderNormal = function (seriesModel, ecModel, api, payload) {\n      var group = this.group;\n      var data = seriesModel.getData();\n      var oldData = this._data;\n      var coord = seriesModel.coordinateSystem;\n      var baseAxis = coord.getBaseAxis();\n      var isHorizontalOrRadial;\n\n      if (coord.type === 'cartesian2d') {\n        isHorizontalOrRadial = baseAxis.isHorizontal();\n      } else if (coord.type === 'polar') {\n        isHorizontalOrRadial = baseAxis.dim === 'angle';\n      }\n\n      var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\n      var realtimeSortCfg = shouldRealtimeSort(seriesModel, coord);\n\n      if (realtimeSortCfg) {\n        this._enableRealtimeSort(realtimeSortCfg, data, api);\n      }\n\n      var needsClip = seriesModel.get('clip', true) || realtimeSortCfg;\n      var coordSysClipArea = getClipArea(coord, data); // If there is clipPath created in large mode. Remove it.\n\n      group.removeClipPath(); // We don't use clipPath in normal mode because we needs a perfect animation\n      // And don't want the label are clipped.\n\n      var roundCap = seriesModel.get('roundCap', true);\n      var drawBackground = seriesModel.get('showBackground', true);\n      var backgroundModel = seriesModel.getModel('backgroundStyle');\n      var barBorderRadius = backgroundModel.get('borderRadius') || 0;\n      var bgEls = [];\n      var oldBgEls = this._backgroundEls;\n      var isInitSort = payload && payload.isInitSort;\n      var isChangeOrder = payload && payload.type === 'changeAxisOrder';\n\n      function createBackground(dataIndex) {\n        var bgLayout = getLayout[coord.type](data, dataIndex);\n        var bgEl = createBackgroundEl(coord, isHorizontalOrRadial, bgLayout);\n        bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\n\n        if (coord.type === 'cartesian2d') {\n          bgEl.setShape('r', barBorderRadius);\n        }\n\n        bgEls[dataIndex] = bgEl;\n        return bgEl;\n      }\n\n      data.diff(oldData).add(function (dataIndex) {\n        var itemModel = data.getItemModel(dataIndex);\n        var layout = getLayout[coord.type](data, dataIndex, itemModel);\n\n        if (drawBackground) {\n          createBackground(dataIndex);\n        } // If dataZoom in filteMode: 'empty', the baseValue can be set as NaN in \"axisProxy\".\n\n\n        if (!data.hasValue(dataIndex) || !isValidLayout[coord.type](layout)) {\n          return;\n        }\n\n        var isClipped = false;\n\n        if (needsClip) {\n          // Clip will modify the layout params.\n          // And return a boolean to determine if the shape are fully clipped.\n          isClipped = clip[coord.type](coordSysClipArea, layout);\n        }\n\n        var el = elementCreator[coord.type](seriesModel, data, dataIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, false, roundCap);\n\n        if (realtimeSortCfg) {\n          /**\n           * Force label animation because even if the element is\n           * ignored because it's clipped, it may not be clipped after\n           * changing order. Then, if not using forceLabelAnimation,\n           * the label animation was never started, in which case,\n           * the label will be the final value and doesn't have label\n           * animation.\n           */\n          el.forceLabelAnimation = true;\n        }\n\n        updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n\n        if (isInitSort) {\n          el.attr({\n            shape: layout\n          });\n        } else if (realtimeSortCfg) {\n          updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, dataIndex, isHorizontalOrRadial, false, false);\n        } else {\n          initProps(el, {\n            shape: layout\n          }, seriesModel, dataIndex);\n        }\n\n        data.setItemGraphicEl(dataIndex, el);\n        group.add(el);\n        el.ignore = isClipped;\n      }).update(function (newIndex, oldIndex) {\n        var itemModel = data.getItemModel(newIndex);\n        var layout = getLayout[coord.type](data, newIndex, itemModel);\n\n        if (drawBackground) {\n          var bgEl = void 0;\n\n          if (oldBgEls.length === 0) {\n            bgEl = createBackground(oldIndex);\n          } else {\n            bgEl = oldBgEls[oldIndex];\n            bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\n\n            if (coord.type === 'cartesian2d') {\n              bgEl.setShape('r', barBorderRadius);\n            }\n\n            bgEls[newIndex] = bgEl;\n          }\n\n          var bgLayout = getLayout[coord.type](data, newIndex);\n          var shape = createBackgroundShape(isHorizontalOrRadial, bgLayout, coord);\n          updateProps(bgEl, {\n            shape: shape\n          }, animationModel, newIndex);\n        }\n\n        var el = oldData.getItemGraphicEl(oldIndex);\n\n        if (!data.hasValue(newIndex) || !isValidLayout[coord.type](layout)) {\n          group.remove(el);\n          return;\n        }\n\n        var isClipped = false;\n\n        if (needsClip) {\n          isClipped = clip[coord.type](coordSysClipArea, layout);\n\n          if (isClipped) {\n            group.remove(el);\n          }\n        }\n\n        if (!el) {\n          el = elementCreator[coord.type](seriesModel, data, newIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, !!el, roundCap);\n        } else {\n          saveOldStyle(el);\n        }\n\n        if (realtimeSortCfg) {\n          el.forceLabelAnimation = true;\n        }\n\n        if (isChangeOrder) {\n          var textEl = el.getTextContent();\n\n          if (textEl) {\n            var labelInnerStore = labelInner(textEl);\n\n            if (labelInnerStore.prevValue != null) {\n              /**\n               * Set preValue to be value so that no new label\n               * should be started, otherwise, it will take a full\n               * `animationDurationUpdate` time to finish the\n               * animation, which is not expected.\n               */\n              labelInnerStore.prevValue = labelInnerStore.value;\n            }\n          }\n        } // Not change anything if only order changed.\n        // Especially not change label.\n        else {\n            updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n          }\n\n        if (isInitSort) {\n          el.attr({\n            shape: layout\n          });\n        } else if (realtimeSortCfg) {\n          updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, newIndex, isHorizontalOrRadial, true, isChangeOrder);\n        } else {\n          updateProps(el, {\n            shape: layout\n          }, seriesModel, newIndex, null);\n        }\n\n        data.setItemGraphicEl(newIndex, el);\n        el.ignore = isClipped;\n        group.add(el);\n      }).remove(function (dataIndex) {\n        var el = oldData.getItemGraphicEl(dataIndex);\n        el && removeElementWithFadeOut(el, seriesModel, dataIndex);\n      }).execute();\n      var bgGroup = this._backgroundGroup || (this._backgroundGroup = new Group());\n      bgGroup.removeAll();\n\n      for (var i = 0; i < bgEls.length; ++i) {\n        bgGroup.add(bgEls[i]);\n      }\n\n      group.add(bgGroup);\n      this._backgroundEls = bgEls;\n      this._data = data;\n    };\n\n    BarView.prototype._renderLarge = function (seriesModel, ecModel, api) {\n      this._clear();\n\n      createLarge(seriesModel, this.group);\n\n      this._updateLargeClip(seriesModel);\n    };\n\n    BarView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n      this._removeBackground();\n\n      createLarge(seriesModel, this.group, this._progressiveEls, true);\n    };\n\n    BarView.prototype._updateLargeClip = function (seriesModel) {\n      // Use clipPath in large mode.\n      var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\n      var group = this.group;\n\n      if (clipPath) {\n        group.setClipPath(clipPath);\n      } else {\n        group.removeClipPath();\n      }\n    };\n\n    BarView.prototype._enableRealtimeSort = function (realtimeSortCfg, data, api) {\n      var _this = this; // If no data in the first frame, wait for data to initSort\n\n\n      if (!data.count()) {\n        return;\n      }\n\n      var baseAxis = realtimeSortCfg.baseAxis;\n\n      if (this._isFirstFrame) {\n        this._dispatchInitSort(data, realtimeSortCfg, api);\n\n        this._isFirstFrame = false;\n      } else {\n        var orderMapping_1 = function (idx) {\n          var el = data.getItemGraphicEl(idx);\n          var shape = el && el.shape;\n          return shape && // The result should be consistent with the initial sort by data value.\n          // Do not support the case that both positive and negative exist.\n          Math.abs(baseAxis.isHorizontal() ? shape.height : shape.width) // If data is NaN, shape.xxx may be NaN, so use || 0 here in case\n          || 0;\n        };\n\n        this._onRendered = function () {\n          _this._updateSortWithinSameData(data, orderMapping_1, baseAxis, api);\n        };\n\n        api.getZr().on('rendered', this._onRendered);\n      }\n    };\n\n    BarView.prototype._dataSort = function (data, baseAxis, orderMapping) {\n      var info = [];\n      data.each(data.mapDimension(baseAxis.dim), function (ordinalNumber, dataIdx) {\n        var mappedValue = orderMapping(dataIdx);\n        mappedValue = mappedValue == null ? NaN : mappedValue;\n        info.push({\n          dataIndex: dataIdx,\n          mappedValue: mappedValue,\n          ordinalNumber: ordinalNumber\n        });\n      });\n      info.sort(function (a, b) {\n        // If NaN, it will be treated as min val.\n        return b.mappedValue - a.mappedValue;\n      });\n      return {\n        ordinalNumbers: map(info, function (item) {\n          return item.ordinalNumber;\n        })\n      };\n    };\n\n    BarView.prototype._isOrderChangedWithinSameData = function (data, orderMapping, baseAxis) {\n      var scale = baseAxis.scale;\n      var ordinalDataDim = data.mapDimension(baseAxis.dim);\n      var lastValue = Number.MAX_VALUE;\n\n      for (var tickNum = 0, len = scale.getOrdinalMeta().categories.length; tickNum < len; ++tickNum) {\n        var rawIdx = data.rawIndexOf(ordinalDataDim, scale.getRawOrdinalNumber(tickNum));\n        var value = rawIdx < 0 // If some tick have no bar, the tick will be treated as min.\n        ? Number.MIN_VALUE // PENDING: if dataZoom on baseAxis exits, is it a performance issue?\n        : orderMapping(data.indexOfRawIndex(rawIdx));\n\n        if (value > lastValue) {\n          return true;\n        }\n\n        lastValue = value;\n      }\n\n      return false;\n    };\n    /*\n     * Consider the case when A and B changed order, whose representing\n     * bars are both out of sight, we don't wish to trigger reorder action\n     * as long as the order in the view doesn't change.\n     */\n\n\n    BarView.prototype._isOrderDifferentInView = function (orderInfo, baseAxis) {\n      var scale = baseAxis.scale;\n      var extent = scale.getExtent();\n      var tickNum = Math.max(0, extent[0]);\n      var tickMax = Math.min(extent[1], scale.getOrdinalMeta().categories.length - 1);\n\n      for (; tickNum <= tickMax; ++tickNum) {\n        if (orderInfo.ordinalNumbers[tickNum] !== scale.getRawOrdinalNumber(tickNum)) {\n          return true;\n        }\n      }\n    };\n\n    BarView.prototype._updateSortWithinSameData = function (data, orderMapping, baseAxis, api) {\n      if (!this._isOrderChangedWithinSameData(data, orderMapping, baseAxis)) {\n        return;\n      }\n\n      var sortInfo = this._dataSort(data, baseAxis, orderMapping);\n\n      if (this._isOrderDifferentInView(sortInfo, baseAxis)) {\n        this._removeOnRenderedListener(api);\n\n        api.dispatchAction({\n          type: 'changeAxisOrder',\n          componentType: baseAxis.dim + 'Axis',\n          axisId: baseAxis.index,\n          sortInfo: sortInfo\n        });\n      }\n    };\n\n    BarView.prototype._dispatchInitSort = function (data, realtimeSortCfg, api) {\n      var baseAxis = realtimeSortCfg.baseAxis;\n\n      var sortResult = this._dataSort(data, baseAxis, function (dataIdx) {\n        return data.get(data.mapDimension(realtimeSortCfg.otherAxis.dim), dataIdx);\n      });\n\n      api.dispatchAction({\n        type: 'changeAxisOrder',\n        componentType: baseAxis.dim + 'Axis',\n        isInitSort: true,\n        axisId: baseAxis.index,\n        sortInfo: sortResult\n      });\n    };\n\n    BarView.prototype.remove = function (ecModel, api) {\n      this._clear(this._model);\n\n      this._removeOnRenderedListener(api);\n    };\n\n    BarView.prototype.dispose = function (ecModel, api) {\n      this._removeOnRenderedListener(api);\n    };\n\n    BarView.prototype._removeOnRenderedListener = function (api) {\n      if (this._onRendered) {\n        api.getZr().off('rendered', this._onRendered);\n        this._onRendered = null;\n      }\n    };\n\n    BarView.prototype._clear = function (model) {\n      var group = this.group;\n      var data = this._data;\n\n      if (model && model.isAnimationEnabled() && data && !this._isLargeDraw) {\n        this._removeBackground();\n\n        this._backgroundEls = [];\n        data.eachItemGraphicEl(function (el) {\n          removeElementWithFadeOut(el, model, getECData(el).dataIndex);\n        });\n      } else {\n        group.removeAll();\n      }\n\n      this._data = null;\n      this._isFirstFrame = true;\n    };\n\n    BarView.prototype._removeBackground = function () {\n      this.group.remove(this._backgroundGroup);\n      this._backgroundGroup = null;\n    };\n\n    BarView.type = 'bar';\n    return BarView;\n  }(ChartView);\n\n  var clip = {\n    cartesian2d: function (coordSysBoundingRect, layout) {\n      var signWidth = layout.width < 0 ? -1 : 1;\n      var signHeight = layout.height < 0 ? -1 : 1; // Needs positive width and height\n\n      if (signWidth < 0) {\n        layout.x += layout.width;\n        layout.width = -layout.width;\n      }\n\n      if (signHeight < 0) {\n        layout.y += layout.height;\n        layout.height = -layout.height;\n      }\n\n      var coordSysX2 = coordSysBoundingRect.x + coordSysBoundingRect.width;\n      var coordSysY2 = coordSysBoundingRect.y + coordSysBoundingRect.height;\n      var x = mathMax$5(layout.x, coordSysBoundingRect.x);\n      var x2 = mathMin$5(layout.x + layout.width, coordSysX2);\n      var y = mathMax$5(layout.y, coordSysBoundingRect.y);\n      var y2 = mathMin$5(layout.y + layout.height, coordSysY2);\n      var xClipped = x2 < x;\n      var yClipped = y2 < y; // When xClipped or yClipped, the element will be marked as `ignore`.\n      // But we should also place the element at the edge of the coord sys bounding rect.\n      // Beause if data changed and the bar show again, its transition animaiton\n      // will begin at this place.\n\n      layout.x = xClipped && x > coordSysX2 ? x2 : x;\n      layout.y = yClipped && y > coordSysY2 ? y2 : y;\n      layout.width = xClipped ? 0 : x2 - x;\n      layout.height = yClipped ? 0 : y2 - y; // Reverse back\n\n      if (signWidth < 0) {\n        layout.x += layout.width;\n        layout.width = -layout.width;\n      }\n\n      if (signHeight < 0) {\n        layout.y += layout.height;\n        layout.height = -layout.height;\n      }\n\n      return xClipped || yClipped;\n    },\n    polar: function (coordSysClipArea, layout) {\n      var signR = layout.r0 <= layout.r ? 1 : -1; // Make sure r is larger than r0\n\n      if (signR < 0) {\n        var tmp = layout.r;\n        layout.r = layout.r0;\n        layout.r0 = tmp;\n      }\n\n      var r = mathMin$5(layout.r, coordSysClipArea.r);\n      var r0 = mathMax$5(layout.r0, coordSysClipArea.r0);\n      layout.r = r;\n      layout.r0 = r0;\n      var clipped = r - r0 < 0; // Reverse back\n\n      if (signR < 0) {\n        var tmp = layout.r;\n        layout.r = layout.r0;\n        layout.r0 = tmp;\n      }\n\n      return clipped;\n    }\n  };\n  var elementCreator = {\n    cartesian2d: function (seriesModel, data, newIndex, layout, isHorizontal, animationModel, axisModel, isUpdate, roundCap) {\n      var rect = new Rect({\n        shape: extend({}, layout),\n        z2: 1\n      });\n      rect.__dataIndex = newIndex;\n      rect.name = 'item';\n\n      if (animationModel) {\n        var rectShape = rect.shape;\n        var animateProperty = isHorizontal ? 'height' : 'width';\n        rectShape[animateProperty] = 0;\n      }\n\n      return rect;\n    },\n    polar: function (seriesModel, data, newIndex, layout, isRadial, animationModel, axisModel, isUpdate, roundCap) {\n      var ShapeClass = !isRadial && roundCap ? SausagePath : Sector;\n      var sector = new ShapeClass({\n        shape: layout,\n        z2: 1\n      });\n      sector.name = 'item';\n      var positionMap = createPolarPositionMapping(isRadial);\n      sector.calculateTextPosition = createSectorCalculateTextPosition(positionMap, {\n        isRoundCap: ShapeClass === SausagePath\n      }); // Animation\n\n      if (animationModel) {\n        var sectorShape = sector.shape;\n        var animateProperty = isRadial ? 'r' : 'endAngle';\n        var animateTarget = {};\n        sectorShape[animateProperty] = isRadial ? 0 : layout.startAngle;\n        animateTarget[animateProperty] = layout[animateProperty];\n        (isUpdate ? updateProps : initProps)(sector, {\n          shape: animateTarget // __value: typeof dataValue === 'string' ? parseInt(dataValue, 10) : dataValue\n\n        }, animationModel);\n      }\n\n      return sector;\n    }\n  };\n\n  function shouldRealtimeSort(seriesModel, coordSys) {\n    var realtimeSortOption = seriesModel.get('realtimeSort', true);\n    var baseAxis = coordSys.getBaseAxis();\n    {\n      if (realtimeSortOption) {\n        if (baseAxis.type !== 'category') {\n          warn('`realtimeSort` will not work because this bar series is not based on a category axis.');\n        }\n\n        if (coordSys.type !== 'cartesian2d') {\n          warn('`realtimeSort` will not work because this bar series is not on cartesian2d.');\n        }\n      }\n    }\n\n    if (realtimeSortOption && baseAxis.type === 'category' && coordSys.type === 'cartesian2d') {\n      return {\n        baseAxis: baseAxis,\n        otherAxis: coordSys.getOtherAxis(baseAxis)\n      };\n    }\n  }\n\n  function updateRealtimeAnimation(realtimeSortCfg, seriesAnimationModel, el, layout, newIndex, isHorizontal, isUpdate, isChangeOrder) {\n    var seriesTarget;\n    var axisTarget;\n\n    if (isHorizontal) {\n      axisTarget = {\n        x: layout.x,\n        width: layout.width\n      };\n      seriesTarget = {\n        y: layout.y,\n        height: layout.height\n      };\n    } else {\n      axisTarget = {\n        y: layout.y,\n        height: layout.height\n      };\n      seriesTarget = {\n        x: layout.x,\n        width: layout.width\n      };\n    }\n\n    if (!isChangeOrder) {\n      // Keep the original growth animation if only axis order changed.\n      // Not start a new animation.\n      (isUpdate ? updateProps : initProps)(el, {\n        shape: seriesTarget\n      }, seriesAnimationModel, newIndex, null);\n    }\n\n    var axisAnimationModel = seriesAnimationModel ? realtimeSortCfg.baseAxis.model : null;\n    (isUpdate ? updateProps : initProps)(el, {\n      shape: axisTarget\n    }, axisAnimationModel, newIndex);\n  }\n\n  function checkPropertiesNotValid(obj, props) {\n    for (var i = 0; i < props.length; i++) {\n      if (!isFinite(obj[props[i]])) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  var rectPropties = ['x', 'y', 'width', 'height'];\n  var polarPropties = ['cx', 'cy', 'r', 'startAngle', 'endAngle'];\n  var isValidLayout = {\n    cartesian2d: function (layout) {\n      return !checkPropertiesNotValid(layout, rectPropties);\n    },\n    polar: function (layout) {\n      return !checkPropertiesNotValid(layout, polarPropties);\n    }\n  };\n  var getLayout = {\n    // itemModel is only used to get borderWidth, which is not needed\n    // when calculating bar background layout.\n    cartesian2d: function (data, dataIndex, itemModel) {\n      var layout = data.getItemLayout(dataIndex);\n      var fixedLineWidth = itemModel ? getLineWidth(itemModel, layout) : 0; // fix layout with lineWidth\n\n      var signX = layout.width > 0 ? 1 : -1;\n      var signY = layout.height > 0 ? 1 : -1;\n      return {\n        x: layout.x + signX * fixedLineWidth / 2,\n        y: layout.y + signY * fixedLineWidth / 2,\n        width: layout.width - signX * fixedLineWidth,\n        height: layout.height - signY * fixedLineWidth\n      };\n    },\n    polar: function (data, dataIndex, itemModel) {\n      var layout = data.getItemLayout(dataIndex);\n      return {\n        cx: layout.cx,\n        cy: layout.cy,\n        r0: layout.r0,\n        r: layout.r,\n        startAngle: layout.startAngle,\n        endAngle: layout.endAngle,\n        clockwise: layout.clockwise\n      };\n    }\n  };\n\n  function isZeroOnPolar(layout) {\n    return layout.startAngle != null && layout.endAngle != null && layout.startAngle === layout.endAngle;\n  }\n\n  function createPolarPositionMapping(isRadial) {\n    return function (isRadial) {\n      var arcOrAngle = isRadial ? 'Arc' : 'Angle';\n      return function (position) {\n        switch (position) {\n          case 'start':\n          case 'insideStart':\n          case 'end':\n          case 'insideEnd':\n            return position + arcOrAngle;\n\n          default:\n            return position;\n        }\n      };\n    }(isRadial);\n  }\n\n  function updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, isPolar) {\n    var style = data.getItemVisual(dataIndex, 'style');\n\n    if (!isPolar) {\n      el.setShape('r', itemModel.get(['itemStyle', 'borderRadius']) || 0);\n    }\n\n    el.useStyle(style);\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && el.attr('cursor', cursorStyle);\n    var labelPositionOutside = isPolar ? isHorizontalOrRadial ? layout.r >= layout.r0 ? 'endArc' : 'startArc' : layout.endAngle >= layout.startAngle ? 'endAngle' : 'startAngle' : isHorizontalOrRadial ? layout.height >= 0 ? 'bottom' : 'top' : layout.width >= 0 ? 'right' : 'left';\n    var labelStatesModels = getLabelStatesModels(itemModel);\n    setLabelStyle(el, labelStatesModels, {\n      labelFetcher: seriesModel,\n      labelDataIndex: dataIndex,\n      defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\n      inheritColor: style.fill,\n      defaultOpacity: style.opacity,\n      defaultOutsidePosition: labelPositionOutside\n    });\n    var label = el.getTextContent();\n\n    if (isPolar && label) {\n      var position = itemModel.get(['label', 'position']);\n      el.textConfig.inside = position === 'middle' ? true : null;\n      setSectorTextRotation(el, position === 'outside' ? labelPositionOutside : position, createPolarPositionMapping(isHorizontalOrRadial), itemModel.get(['label', 'rotate']));\n    }\n\n    setLabelValueAnimation(label, labelStatesModels, seriesModel.getRawValue(dataIndex), function (value) {\n      return getDefaultInterpolatedLabel(data, value);\n    });\n    var emphasisModel = itemModel.getModel(['emphasis']);\n    toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    setStatesStylesFromModel(el, itemModel);\n\n    if (isZeroOnPolar(layout)) {\n      el.style.fill = 'none';\n      el.style.stroke = 'none';\n      each(el.states, function (state) {\n        if (state.style) {\n          state.style.fill = state.style.stroke = 'none';\n        }\n      });\n    }\n  } // In case width or height are too small.\n\n\n  function getLineWidth(itemModel, rawLayout) {\n    // Has no border.\n    var borderColor = itemModel.get(['itemStyle', 'borderColor']);\n\n    if (!borderColor || borderColor === 'none') {\n      return 0;\n    }\n\n    var lineWidth = itemModel.get(['itemStyle', 'borderWidth']) || 0; // width or height may be NaN for empty data\n\n    var width = isNaN(rawLayout.width) ? Number.MAX_VALUE : Math.abs(rawLayout.width);\n    var height = isNaN(rawLayout.height) ? Number.MAX_VALUE : Math.abs(rawLayout.height);\n    return Math.min(lineWidth, width, height);\n  }\n\n  var LagePathShape =\n  /** @class */\n  function () {\n    function LagePathShape() {}\n\n    return LagePathShape;\n  }();\n\n  var LargePath =\n  /** @class */\n  function (_super) {\n    __extends(LargePath, _super);\n\n    function LargePath(opts) {\n      var _this = _super.call(this, opts) || this;\n\n      _this.type = 'largeBar';\n      return _this;\n    }\n\n    LargePath.prototype.getDefaultShape = function () {\n      return new LagePathShape();\n    };\n\n    LargePath.prototype.buildPath = function (ctx, shape) {\n      // Drawing lines is more efficient than drawing\n      // a whole line or drawing rects.\n      var points = shape.points;\n      var baseDimIdx = this.baseDimIdx;\n      var valueDimIdx = 1 - this.baseDimIdx;\n      var startPoint = [];\n      var size = [];\n      var barWidth = this.barWidth;\n\n      for (var i = 0; i < points.length; i += 3) {\n        size[baseDimIdx] = barWidth;\n        size[valueDimIdx] = points[i + 2];\n        startPoint[baseDimIdx] = points[i + baseDimIdx];\n        startPoint[valueDimIdx] = points[i + valueDimIdx];\n        ctx.rect(startPoint[0], startPoint[1], size[0], size[1]);\n      }\n    };\n\n    return LargePath;\n  }(Path);\n\n  function createLarge(seriesModel, group, progressiveEls, incremental) {\n    // TODO support polar\n    var data = seriesModel.getData();\n    var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\n    var largeDataIndices = data.getLayout('largeDataIndices');\n    var barWidth = data.getLayout('size');\n    var backgroundModel = seriesModel.getModel('backgroundStyle');\n    var bgPoints = data.getLayout('largeBackgroundPoints');\n\n    if (bgPoints) {\n      var bgEl = new LargePath({\n        shape: {\n          points: bgPoints\n        },\n        incremental: !!incremental,\n        silent: true,\n        z2: 0\n      });\n      bgEl.baseDimIdx = baseDimIdx;\n      bgEl.largeDataIndices = largeDataIndices;\n      bgEl.barWidth = barWidth;\n      bgEl.useStyle(backgroundModel.getItemStyle());\n      group.add(bgEl);\n      progressiveEls && progressiveEls.push(bgEl);\n    }\n\n    var el = new LargePath({\n      shape: {\n        points: data.getLayout('largePoints')\n      },\n      incremental: !!incremental,\n      z2: 1\n    });\n    el.baseDimIdx = baseDimIdx;\n    el.largeDataIndices = largeDataIndices;\n    el.barWidth = barWidth;\n    group.add(el);\n    el.useStyle(data.getVisual('style')); // Enable tooltip and user mouse/touch event handlers.\n\n    getECData(el).seriesIndex = seriesModel.seriesIndex;\n\n    if (!seriesModel.get('silent')) {\n      el.on('mousedown', largePathUpdateDataIndex);\n      el.on('mousemove', largePathUpdateDataIndex);\n    }\n\n    progressiveEls && progressiveEls.push(el);\n  } // Use throttle to avoid frequently traverse to find dataIndex.\n\n\n  var largePathUpdateDataIndex = throttle(function (event) {\n    var largePath = this;\n    var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\n    getECData(largePath).dataIndex = dataIndex >= 0 ? dataIndex : null;\n  }, 30, false);\n\n  function largePathFindDataIndex(largePath, x, y) {\n    var baseDimIdx = largePath.baseDimIdx;\n    var valueDimIdx = 1 - baseDimIdx;\n    var points = largePath.shape.points;\n    var largeDataIndices = largePath.largeDataIndices;\n    var startPoint = [];\n    var size = [];\n    var barWidth = largePath.barWidth;\n\n    for (var i = 0, len = points.length / 3; i < len; i++) {\n      var ii = i * 3;\n      size[baseDimIdx] = barWidth;\n      size[valueDimIdx] = points[ii + 2];\n      startPoint[baseDimIdx] = points[ii + baseDimIdx];\n      startPoint[valueDimIdx] = points[ii + valueDimIdx];\n\n      if (size[valueDimIdx] < 0) {\n        startPoint[valueDimIdx] += size[valueDimIdx];\n        size[valueDimIdx] = -size[valueDimIdx];\n      }\n\n      if (x >= startPoint[0] && x <= startPoint[0] + size[0] && y >= startPoint[1] && y <= startPoint[1] + size[1]) {\n        return largeDataIndices[i];\n      }\n    }\n\n    return -1;\n  }\n\n  function createBackgroundShape(isHorizontalOrRadial, layout, coord) {\n    if (isCoordinateSystemType(coord, 'cartesian2d')) {\n      var rectShape = layout;\n      var coordLayout = coord.getArea();\n      return {\n        x: isHorizontalOrRadial ? rectShape.x : coordLayout.x,\n        y: isHorizontalOrRadial ? coordLayout.y : rectShape.y,\n        width: isHorizontalOrRadial ? rectShape.width : coordLayout.width,\n        height: isHorizontalOrRadial ? coordLayout.height : rectShape.height\n      };\n    } else {\n      var coordLayout = coord.getArea();\n      var sectorShape = layout;\n      return {\n        cx: coordLayout.cx,\n        cy: coordLayout.cy,\n        r0: isHorizontalOrRadial ? coordLayout.r0 : sectorShape.r0,\n        r: isHorizontalOrRadial ? coordLayout.r : sectorShape.r,\n        startAngle: isHorizontalOrRadial ? sectorShape.startAngle : 0,\n        endAngle: isHorizontalOrRadial ? sectorShape.endAngle : Math.PI * 2\n      };\n    }\n  }\n\n  function createBackgroundEl(coord, isHorizontalOrRadial, layout) {\n    var ElementClz = coord.type === 'polar' ? Sector : Rect;\n    return new ElementClz({\n      shape: createBackgroundShape(isHorizontalOrRadial, layout, coord),\n      silent: true,\n      z2: 0\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$2(registers) {\n    registers.registerChartView(BarView);\n    registers.registerSeriesModel(BarSeriesModel);\n    registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, curry(layout, 'bar')); // Do layout after other overall layout, which can preapre some informations.\n\n    registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, createProgressiveLayout('bar')); // Down sample after filter\n\n    registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('bar'));\n    /**\n     * @payload\n     * @property {string} [componentType=series]\n     * @property {number} [dx]\n     * @property {number} [dy]\n     * @property {number} [zoom]\n     * @property {number} [originX]\n     * @property {number} [originY]\n     */\n\n    registers.registerAction({\n      type: 'changeAxisOrder',\n      event: 'changeAxisOrder',\n      update: 'update'\n    }, function (payload, ecModel) {\n      var componentType = payload.componentType || 'series';\n      ecModel.eachComponent({\n        mainType: componentType,\n        query: payload\n      }, function (componentModel) {\n        if (payload.sortInfo) {\n          componentModel.axis.setCategorySortInfo(payload.sortInfo);\n        }\n      });\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  use(install$2);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var LineSeriesModel =\n  /** @class */\n  function (_super) {\n    __extends(LineSeriesModel, _super);\n\n    function LineSeriesModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = LineSeriesModel.type;\n      _this.hasSymbolVisual = true;\n      return _this;\n    }\n\n    LineSeriesModel.prototype.getInitialData = function (option) {\n      {\n        var coordSys = option.coordinateSystem;\n\n        if (coordSys !== 'polar' && coordSys !== 'cartesian2d') {\n          throw new Error('Line not support coordinateSystem besides cartesian and polar');\n        }\n      }\n      return createSeriesData(null, this, {\n        useEncodeDefaulter: true\n      });\n    };\n\n    LineSeriesModel.prototype.getLegendIcon = function (opt) {\n      var group = new Group();\n      var line = createSymbol('line', 0, opt.itemHeight / 2, opt.itemWidth, 0, opt.lineStyle.stroke, false);\n      group.add(line);\n      line.setStyle(opt.lineStyle);\n      var visualType = this.getData().getVisual('symbol');\n      var visualRotate = this.getData().getVisual('symbolRotate');\n      var symbolType = visualType === 'none' ? 'circle' : visualType; // Symbol size is 80% when there is a line\n\n      var size = opt.itemHeight * 0.8;\n      var symbol = createSymbol(symbolType, (opt.itemWidth - size) / 2, (opt.itemHeight - size) / 2, size, size, opt.itemStyle.fill);\n      group.add(symbol);\n      symbol.setStyle(opt.itemStyle);\n      var symbolRotate = opt.iconRotate === 'inherit' ? visualRotate : opt.iconRotate || 0;\n      symbol.rotation = symbolRotate * Math.PI / 180;\n      symbol.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n\n      if (symbolType.indexOf('empty') > -1) {\n        symbol.style.stroke = symbol.style.fill;\n        symbol.style.fill = '#fff';\n        symbol.style.lineWidth = 2;\n      }\n\n      return group;\n    };\n\n    LineSeriesModel.type = 'series.line';\n    LineSeriesModel.dependencies = ['grid', 'polar'];\n    LineSeriesModel.defaultOption = {\n      // zlevel: 0,\n      z: 3,\n      coordinateSystem: 'cartesian2d',\n      legendHoverLink: true,\n      clip: true,\n      label: {\n        position: 'top'\n      },\n      // itemStyle: {\n      // },\n      endLabel: {\n        show: false,\n        valueAnimation: true,\n        distance: 8\n      },\n      lineStyle: {\n        width: 2,\n        type: 'solid'\n      },\n      emphasis: {\n        scale: true\n      },\n      // areaStyle: {\n      // origin of areaStyle. Valid values:\n      // `'auto'/null/undefined`: from axisLine to data\n      // `'start'`: from min to data\n      // `'end'`: from data to max\n      // origin: 'auto'\n      // },\n      // false, 'start', 'end', 'middle'\n      step: false,\n      // Disabled if step is true\n      smooth: false,\n      smoothMonotone: null,\n      symbol: 'emptyCircle',\n      symbolSize: 4,\n      symbolRotate: null,\n      showSymbol: true,\n      // `false`: follow the label interval strategy.\n      // `true`: show all symbols.\n      // `'auto'`: If possible, show all symbols, otherwise\n      //           follow the label interval strategy.\n      showAllSymbol: 'auto',\n      // Whether to connect break point.\n      connectNulls: false,\n      // Sampling for large data. Can be: 'average', 'max', 'min', 'sum', 'lttb'.\n      sampling: 'none',\n      animationEasing: 'linear',\n      // Disable progressive\n      progressive: 0,\n      hoverLayerThreshold: Infinity,\n      universalTransition: {\n        divideShape: 'clone'\n      },\n      triggerLineEvent: false\n    };\n    return LineSeriesModel;\n  }(SeriesModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var Symbol$1 =\n  /** @class */\n  function (_super) {\n    __extends(Symbol, _super);\n\n    function Symbol(data, idx, seriesScope, opts) {\n      var _this = _super.call(this) || this;\n\n      _this.updateData(data, idx, seriesScope, opts);\n\n      return _this;\n    }\n\n    Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n      // Remove paths created before\n      this.removeAll(); // let symbolPath = createSymbol(\n      //     symbolType, -0.5, -0.5, 1, 1, color\n      // );\n      // If width/height are set too small (e.g., set to 1) on ios10\n      // and macOS Sierra, a circle stroke become a rect, no matter what\n      // the scale is set. So we set width/height as 2. See #4150.\n\n      var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\n      symbolPath.attr({\n        z2: 100,\n        culling: true,\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2\n      }); // Rewrite drift method\n\n      symbolPath.drift = driftSymbol;\n      this._symbolType = symbolType;\n      this.add(symbolPath);\n    };\n    /**\n     * Stop animation\n     * @param {boolean} toLastFrame\n     */\n\n\n    Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\n      this.childAt(0).stopAnimation(null, toLastFrame);\n    };\n\n    Symbol.prototype.getSymbolType = function () {\n      return this._symbolType;\n    };\n    /**\n     * FIXME:\n     * Caution: This method breaks the encapsulation of this module,\n     * but it indeed brings convenience. So do not use the method\n     * unless you detailedly know all the implements of `Symbol`,\n     * especially animation.\n     *\n     * Get symbol path element.\n     */\n\n\n    Symbol.prototype.getSymbolPath = function () {\n      return this.childAt(0);\n    };\n    /**\n     * Highlight symbol\n     */\n\n\n    Symbol.prototype.highlight = function () {\n      enterEmphasis(this.childAt(0));\n    };\n    /**\n     * Downplay symbol\n     */\n\n\n    Symbol.prototype.downplay = function () {\n      leaveEmphasis(this.childAt(0));\n    };\n    /**\n     * @param {number} zlevel\n     * @param {number} z\n     */\n\n\n    Symbol.prototype.setZ = function (zlevel, z) {\n      var symbolPath = this.childAt(0);\n      symbolPath.zlevel = zlevel;\n      symbolPath.z = z;\n    };\n\n    Symbol.prototype.setDraggable = function (draggable, hasCursorOption) {\n      var symbolPath = this.childAt(0);\n      symbolPath.draggable = draggable;\n      symbolPath.cursor = !hasCursorOption && draggable ? 'move' : symbolPath.cursor;\n    };\n    /**\n     * Update symbol properties\n     */\n\n\n    Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\n      this.silent = false;\n      var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n      var seriesModel = data.hostModel;\n      var symbolSize = Symbol.getSymbolSize(data, idx);\n      var isInit = symbolType !== this._symbolType;\n      var disableAnimation = opts && opts.disableAnimation;\n\n      if (isInit) {\n        var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n        this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n      } else {\n        var symbolPath = this.childAt(0);\n        symbolPath.silent = false;\n        var target = {\n          scaleX: symbolSize[0] / 2,\n          scaleY: symbolSize[1] / 2\n        };\n        disableAnimation ? symbolPath.attr(target) : updateProps(symbolPath, target, seriesModel, idx);\n        saveOldStyle(symbolPath);\n      }\n\n      this._updateCommon(data, idx, symbolSize, seriesScope, opts);\n\n      if (isInit) {\n        var symbolPath = this.childAt(0);\n\n        if (!disableAnimation) {\n          var target = {\n            scaleX: this._sizeX,\n            scaleY: this._sizeY,\n            style: {\n              // Always fadeIn. Because it has fadeOut animation when symbol is removed..\n              opacity: symbolPath.style.opacity\n            }\n          };\n          symbolPath.scaleX = symbolPath.scaleY = 0;\n          symbolPath.style.opacity = 0;\n          initProps(symbolPath, target, seriesModel, idx);\n        }\n      }\n\n      if (disableAnimation) {\n        // Must stop leave transition manually if don't call initProps or updateProps.\n        this.childAt(0).stopAnimation('leave');\n      }\n    };\n\n    Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\n      var symbolPath = this.childAt(0);\n      var seriesModel = data.hostModel;\n      var emphasisItemStyle;\n      var blurItemStyle;\n      var selectItemStyle;\n      var focus;\n      var blurScope;\n      var emphasisDisabled;\n      var labelStatesModels;\n      var hoverScale;\n      var cursorStyle;\n\n      if (seriesScope) {\n        emphasisItemStyle = seriesScope.emphasisItemStyle;\n        blurItemStyle = seriesScope.blurItemStyle;\n        selectItemStyle = seriesScope.selectItemStyle;\n        focus = seriesScope.focus;\n        blurScope = seriesScope.blurScope;\n        labelStatesModels = seriesScope.labelStatesModels;\n        hoverScale = seriesScope.hoverScale;\n        cursorStyle = seriesScope.cursorStyle;\n        emphasisDisabled = seriesScope.emphasisDisabled;\n      }\n\n      if (!seriesScope || data.hasItemOption) {\n        var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx);\n        var emphasisModel = itemModel.getModel('emphasis');\n        emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n        selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n        blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n        focus = emphasisModel.get('focus');\n        blurScope = emphasisModel.get('blurScope');\n        emphasisDisabled = emphasisModel.get('disabled');\n        labelStatesModels = getLabelStatesModels(itemModel);\n        hoverScale = emphasisModel.getShallow('scale');\n        cursorStyle = itemModel.getShallow('cursor');\n      }\n\n      var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n      symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n      var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n\n      if (symbolOffset) {\n        symbolPath.x = symbolOffset[0];\n        symbolPath.y = symbolOffset[1];\n      }\n\n      cursorStyle && symbolPath.attr('cursor', cursorStyle);\n      var symbolStyle = data.getItemVisual(idx, 'style');\n      var visualColor = symbolStyle.fill;\n\n      if (symbolPath instanceof ZRImage) {\n        var pathStyle = symbolPath.style;\n        symbolPath.useStyle(extend({\n          // TODO other properties like x, y ?\n          image: pathStyle.image,\n          x: pathStyle.x,\n          y: pathStyle.y,\n          width: pathStyle.width,\n          height: pathStyle.height\n        }, symbolStyle));\n      } else {\n        if (symbolPath.__isEmptyBrush) {\n          // fill and stroke will be swapped if it's empty.\n          // So we cloned a new style to avoid it affecting the original style in visual storage.\n          // TODO Better implementation. No empty logic!\n          symbolPath.useStyle(extend({}, symbolStyle));\n        } else {\n          symbolPath.useStyle(symbolStyle);\n        } // Disable decal because symbol scale will been applied on the decal.\n\n\n        symbolPath.style.decal = null;\n        symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\n        symbolPath.style.strokeNoScale = true;\n      }\n\n      var liftZ = data.getItemVisual(idx, 'liftZ');\n      var z2Origin = this._z2;\n\n      if (liftZ != null) {\n        if (z2Origin == null) {\n          this._z2 = symbolPath.z2;\n          symbolPath.z2 += liftZ;\n        }\n      } else if (z2Origin != null) {\n        symbolPath.z2 = z2Origin;\n        this._z2 = null;\n      }\n\n      var useNameLabel = opts && opts.useNameLabel;\n      setLabelStyle(symbolPath, labelStatesModels, {\n        labelFetcher: seriesModel,\n        labelDataIndex: idx,\n        defaultText: getLabelDefaultText,\n        inheritColor: visualColor,\n        defaultOpacity: symbolStyle.opacity\n      }); // Do not execute util needed.\n\n      function getLabelDefaultText(idx) {\n        return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n      }\n\n      this._sizeX = symbolSize[0] / 2;\n      this._sizeY = symbolSize[1] / 2;\n      var emphasisState = symbolPath.ensureState('emphasis');\n      emphasisState.style = emphasisItemStyle;\n      symbolPath.ensureState('select').style = selectItemStyle;\n      symbolPath.ensureState('blur').style = blurItemStyle;\n\n      if (hoverScale) {\n        var scaleRatio = Math.max(isNumber(hoverScale) ? hoverScale : 1.1, 3 / this._sizeY);\n        emphasisState.scaleX = this._sizeX * scaleRatio;\n        emphasisState.scaleY = this._sizeY * scaleRatio;\n      }\n\n      this.setSymbolScale(1);\n      toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n    };\n\n    Symbol.prototype.setSymbolScale = function (scale) {\n      this.scaleX = this.scaleY = scale;\n    };\n\n    Symbol.prototype.fadeOut = function (cb, seriesModel, opt) {\n      var symbolPath = this.childAt(0);\n      var dataIndex = getECData(this).dataIndex;\n      var animationOpt = opt && opt.animation; // Avoid mistaken hover when fading out\n\n      this.silent = symbolPath.silent = true; // Not show text when animating\n\n      if (opt && opt.fadeLabel) {\n        var textContent = symbolPath.getTextContent();\n\n        if (textContent) {\n          removeElement(textContent, {\n            style: {\n              opacity: 0\n            }\n          }, seriesModel, {\n            dataIndex: dataIndex,\n            removeOpt: animationOpt,\n            cb: function () {\n              symbolPath.removeTextContent();\n            }\n          });\n        }\n      } else {\n        symbolPath.removeTextContent();\n      }\n\n      removeElement(symbolPath, {\n        style: {\n          opacity: 0\n        },\n        scaleX: 0,\n        scaleY: 0\n      }, seriesModel, {\n        dataIndex: dataIndex,\n        cb: cb,\n        removeOpt: animationOpt\n      });\n    };\n\n    Symbol.getSymbolSize = function (data, idx) {\n      return normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n    };\n\n    return Symbol;\n  }(Group);\n\n  function driftSymbol(dx, dy) {\n    this.parent.drift(dx, dy);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function symbolNeedsDraw(data, point, idx, opt) {\n    return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx)) // We do not set clipShape on group, because it will cut part of\n    // the symbol element shape. We use the same clip shape here as\n    // the line clip.\n    && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n  }\n\n  function normalizeUpdateOpt(opt) {\n    if (opt != null && !isObject(opt)) {\n      opt = {\n        isIgnore: opt\n      };\n    }\n\n    return opt || {};\n  }\n\n  function makeSeriesScope(data) {\n    var seriesModel = data.hostModel;\n    var emphasisModel = seriesModel.getModel('emphasis');\n    return {\n      emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\n      blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\n      selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\n      focus: emphasisModel.get('focus'),\n      blurScope: emphasisModel.get('blurScope'),\n      emphasisDisabled: emphasisModel.get('disabled'),\n      hoverScale: emphasisModel.get('scale'),\n      labelStatesModels: getLabelStatesModels(seriesModel),\n      cursorStyle: seriesModel.get('cursor')\n    };\n  }\n\n  var SymbolDraw =\n  /** @class */\n  function () {\n    function SymbolDraw(SymbolCtor) {\n      this.group = new Group();\n      this._SymbolCtor = SymbolCtor || Symbol$1;\n    }\n    /**\n     * Update symbols draw by new data\n     */\n\n\n    SymbolDraw.prototype.updateData = function (data, opt) {\n      // Remove progressive els.\n      this._progressiveEls = null;\n      opt = normalizeUpdateOpt(opt);\n      var group = this.group;\n      var seriesModel = data.hostModel;\n      var oldData = this._data;\n      var SymbolCtor = this._SymbolCtor;\n      var disableAnimation = opt.disableAnimation;\n      var seriesScope = makeSeriesScope(data);\n      var symbolUpdateOpt = {\n        disableAnimation: disableAnimation\n      };\n\n      var getSymbolPoint = opt.getSymbolPoint || function (idx) {\n        return data.getItemLayout(idx);\n      }; // There is no oldLineData only when first rendering or switching from\n      // stream mode to normal mode, where previous elements should be removed.\n\n\n      if (!oldData) {\n        group.removeAll();\n      }\n\n      data.diff(oldData).add(function (newIdx) {\n        var point = getSymbolPoint(newIdx);\n\n        if (symbolNeedsDraw(data, point, newIdx, opt)) {\n          var symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n          symbolEl.setPosition(point);\n          data.setItemGraphicEl(newIdx, symbolEl);\n          group.add(symbolEl);\n        }\n      }).update(function (newIdx, oldIdx) {\n        var symbolEl = oldData.getItemGraphicEl(oldIdx);\n        var point = getSymbolPoint(newIdx);\n\n        if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n          group.remove(symbolEl);\n          return;\n        }\n\n        var newSymbolType = data.getItemVisual(newIdx, 'symbol') || 'circle';\n        var oldSymbolType = symbolEl && symbolEl.getSymbolType && symbolEl.getSymbolType();\n\n        if (!symbolEl // Create a new if symbol type changed.\n        || oldSymbolType && oldSymbolType !== newSymbolType) {\n          group.remove(symbolEl);\n          symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n          symbolEl.setPosition(point);\n        } else {\n          symbolEl.updateData(data, newIdx, seriesScope, symbolUpdateOpt);\n          var target = {\n            x: point[0],\n            y: point[1]\n          };\n          disableAnimation ? symbolEl.attr(target) : updateProps(symbolEl, target, seriesModel);\n        } // Add back\n\n\n        group.add(symbolEl);\n        data.setItemGraphicEl(newIdx, symbolEl);\n      }).remove(function (oldIdx) {\n        var el = oldData.getItemGraphicEl(oldIdx);\n        el && el.fadeOut(function () {\n          group.remove(el);\n        }, seriesModel);\n      }).execute();\n      this._getSymbolPoint = getSymbolPoint;\n      this._data = data;\n    };\n\n    SymbolDraw.prototype.updateLayout = function () {\n      var _this = this;\n\n      var data = this._data;\n\n      if (data) {\n        // Not use animation\n        data.eachItemGraphicEl(function (el, idx) {\n          var point = _this._getSymbolPoint(idx);\n\n          el.setPosition(point);\n          el.markRedraw();\n        });\n      }\n    };\n\n    SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n      this._seriesScope = makeSeriesScope(data);\n      this._data = null;\n      this.group.removeAll();\n    };\n    /**\n     * Update symbols draw by new data\n     */\n\n\n    SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n      // Clear\n      this._progressiveEls = [];\n      opt = normalizeUpdateOpt(opt);\n\n      function updateIncrementalAndHover(el) {\n        if (!el.isGroup) {\n          el.incremental = true;\n          el.ensureState('emphasis').hoverLayer = true;\n        }\n      }\n\n      for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n        var point = data.getItemLayout(idx);\n\n        if (symbolNeedsDraw(data, point, idx, opt)) {\n          var el = new this._SymbolCtor(data, idx, this._seriesScope);\n          el.traverse(updateIncrementalAndHover);\n          el.setPosition(point);\n          this.group.add(el);\n          data.setItemGraphicEl(idx, el);\n\n          this._progressiveEls.push(el);\n        }\n      }\n    };\n\n    SymbolDraw.prototype.eachRendered = function (cb) {\n      traverseElements(this._progressiveEls || this.group, cb);\n    };\n\n    SymbolDraw.prototype.remove = function (enableAnimation) {\n      var group = this.group;\n      var data = this._data; // Incremental model do not have this._data.\n\n      if (data && enableAnimation) {\n        data.eachItemGraphicEl(function (el) {\n          el.fadeOut(function () {\n            group.remove(el);\n          }, data.hostModel);\n        });\n      } else {\n        group.removeAll();\n      }\n    };\n\n    return SymbolDraw;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function prepareDataCoordInfo(coordSys, data, valueOrigin) {\n    var baseAxis = coordSys.getBaseAxis();\n    var valueAxis = coordSys.getOtherAxis(baseAxis);\n    var valueStart = getValueStart(valueAxis, valueOrigin);\n    var baseAxisDim = baseAxis.dim;\n    var valueAxisDim = valueAxis.dim;\n    var valueDim = data.mapDimension(valueAxisDim);\n    var baseDim = data.mapDimension(baseAxisDim);\n    var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n    var dims = map(coordSys.dimensions, function (coordDim) {\n      return data.mapDimension(coordDim);\n    });\n    var stacked = false;\n    var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n    if (isDimensionStacked(data, dims[0]\n    /*, dims[1]*/\n    )) {\n      // jshint ignore:line\n      stacked = true;\n      dims[0] = stackResultDim;\n    }\n\n    if (isDimensionStacked(data, dims[1]\n    /*, dims[0]*/\n    )) {\n      // jshint ignore:line\n      stacked = true;\n      dims[1] = stackResultDim;\n    }\n\n    return {\n      dataDimsForPoint: dims,\n      valueStart: valueStart,\n      valueAxisDim: valueAxisDim,\n      baseAxisDim: baseAxisDim,\n      stacked: !!stacked,\n      valueDim: valueDim,\n      baseDim: baseDim,\n      baseDataOffset: baseDataOffset,\n      stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\n    };\n  }\n\n  function getValueStart(valueAxis, valueOrigin) {\n    var valueStart = 0;\n    var extent = valueAxis.scale.getExtent();\n\n    if (valueOrigin === 'start') {\n      valueStart = extent[0];\n    } else if (valueOrigin === 'end') {\n      valueStart = extent[1];\n    } // If origin is specified as a number, use it as\n    // valueStart directly\n    else if (isNumber(valueOrigin) && !isNaN(valueOrigin)) {\n        valueStart = valueOrigin;\n      } // auto\n      else {\n          // Both positive\n          if (extent[0] > 0) {\n            valueStart = extent[0];\n          } // Both negative\n          else if (extent[1] < 0) {\n              valueStart = extent[1];\n            } // If is one positive, and one negative, onZero shall be true\n\n        }\n\n    return valueStart;\n  }\n\n  function getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\n    var value = NaN;\n\n    if (dataCoordInfo.stacked) {\n      value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\n    }\n\n    if (isNaN(value)) {\n      value = dataCoordInfo.valueStart;\n    }\n\n    var baseDataOffset = dataCoordInfo.baseDataOffset;\n    var stackedData = [];\n    stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\n    stackedData[1 - baseDataOffset] = value;\n    return coordSys.dataToPoint(stackedData);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function diffData(oldData, newData) {\n    var diffResult = [];\n    newData.diff(oldData).add(function (idx) {\n      diffResult.push({\n        cmd: '+',\n        idx: idx\n      });\n    }).update(function (newIdx, oldIdx) {\n      diffResult.push({\n        cmd: '=',\n        idx: oldIdx,\n        idx1: newIdx\n      });\n    }).remove(function (idx) {\n      diffResult.push({\n        cmd: '-',\n        idx: idx\n      });\n    }).execute();\n    return diffResult;\n  }\n\n  function lineAnimationDiff(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\n    var diff = diffData(oldData, newData); // let newIdList = newData.mapArray(newData.getId);\n    // let oldIdList = oldData.mapArray(oldData.getId);\n    // convertToIntId(newIdList, oldIdList);\n    // // FIXME One data ?\n    // diff = arrayDiff(oldIdList, newIdList);\n\n    var currPoints = [];\n    var nextPoints = []; // Points for stacking base line\n\n    var currStackedPoints = [];\n    var nextStackedPoints = [];\n    var status = [];\n    var sortedIndices = [];\n    var rawIndices = [];\n    var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin); // const oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\n\n    var oldPoints = oldData.getLayout('points') || [];\n    var newPoints = newData.getLayout('points') || [];\n\n    for (var i = 0; i < diff.length; i++) {\n      var diffItem = diff[i];\n      var pointAdded = true;\n      var oldIdx2 = void 0;\n      var newIdx2 = void 0; // FIXME, animation is not so perfect when dataZoom window moves fast\n      // Which is in case remvoing or add more than one data in the tail or head\n\n      switch (diffItem.cmd) {\n        case '=':\n          oldIdx2 = diffItem.idx * 2;\n          newIdx2 = diffItem.idx1 * 2;\n          var currentX = oldPoints[oldIdx2];\n          var currentY = oldPoints[oldIdx2 + 1];\n          var nextX = newPoints[newIdx2];\n          var nextY = newPoints[newIdx2 + 1]; // If previous data is NaN, use next point directly\n\n          if (isNaN(currentX) || isNaN(currentY)) {\n            currentX = nextX;\n            currentY = nextY;\n          }\n\n          currPoints.push(currentX, currentY);\n          nextPoints.push(nextX, nextY);\n          currStackedPoints.push(oldStackedOnPoints[oldIdx2], oldStackedOnPoints[oldIdx2 + 1]);\n          nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n          rawIndices.push(newData.getRawIndex(diffItem.idx1));\n          break;\n\n        case '+':\n          var newIdx = diffItem.idx;\n          var newDataDimsForPoint = newDataOldCoordInfo.dataDimsForPoint;\n          var oldPt = oldCoordSys.dataToPoint([newData.get(newDataDimsForPoint[0], newIdx), newData.get(newDataDimsForPoint[1], newIdx)]);\n          newIdx2 = newIdx * 2;\n          currPoints.push(oldPt[0], oldPt[1]);\n          nextPoints.push(newPoints[newIdx2], newPoints[newIdx2 + 1]);\n          var stackedOnPoint = getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, newIdx);\n          currStackedPoints.push(stackedOnPoint[0], stackedOnPoint[1]);\n          nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n          rawIndices.push(newData.getRawIndex(newIdx));\n          break;\n\n        case '-':\n          pointAdded = false;\n      } // Original indices\n\n\n      if (pointAdded) {\n        status.push(diffItem);\n        sortedIndices.push(sortedIndices.length);\n      }\n    } // Diff result may be crossed if all items are changed\n    // Sort by data index\n\n\n    sortedIndices.sort(function (a, b) {\n      return rawIndices[a] - rawIndices[b];\n    });\n    var len = currPoints.length;\n    var sortedCurrPoints = createFloat32Array(len);\n    var sortedNextPoints = createFloat32Array(len);\n    var sortedCurrStackedPoints = createFloat32Array(len);\n    var sortedNextStackedPoints = createFloat32Array(len);\n    var sortedStatus = [];\n\n    for (var i = 0; i < sortedIndices.length; i++) {\n      var idx = sortedIndices[i];\n      var i2 = i * 2;\n      var idx2 = idx * 2;\n      sortedCurrPoints[i2] = currPoints[idx2];\n      sortedCurrPoints[i2 + 1] = currPoints[idx2 + 1];\n      sortedNextPoints[i2] = nextPoints[idx2];\n      sortedNextPoints[i2 + 1] = nextPoints[idx2 + 1];\n      sortedCurrStackedPoints[i2] = currStackedPoints[idx2];\n      sortedCurrStackedPoints[i2 + 1] = currStackedPoints[idx2 + 1];\n      sortedNextStackedPoints[i2] = nextStackedPoints[idx2];\n      sortedNextStackedPoints[i2 + 1] = nextStackedPoints[idx2 + 1];\n      sortedStatus[i] = status[idx];\n    }\n\n    return {\n      current: sortedCurrPoints,\n      next: sortedNextPoints,\n      stackedOnCurrent: sortedCurrStackedPoints,\n      stackedOnNext: sortedNextStackedPoints,\n      status: sortedStatus\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var mathMin$6 = Math.min;\n  var mathMax$6 = Math.max;\n\n  function isPointNull$1(x, y) {\n    return isNaN(x) || isNaN(y);\n  }\n  /**\n   * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\n   * situations. This should be used when points are non-monotone neither in x or\n   * y dimension.\n   */\n\n\n  function drawSegment(ctx, points, start, segLen, allLen, dir, smooth, smoothMonotone, connectNulls) {\n    var prevX;\n    var prevY;\n    var cpx0;\n    var cpy0;\n    var cpx1;\n    var cpy1;\n    var idx = start;\n    var k = 0;\n\n    for (; k < segLen; k++) {\n      var x = points[idx * 2];\n      var y = points[idx * 2 + 1];\n\n      if (idx >= allLen || idx < 0) {\n        break;\n      }\n\n      if (isPointNull$1(x, y)) {\n        if (connectNulls) {\n          idx += dir;\n          continue;\n        }\n\n        break;\n      }\n\n      if (idx === start) {\n        ctx[dir > 0 ? 'moveTo' : 'lineTo'](x, y);\n        cpx0 = x;\n        cpy0 = y;\n      } else {\n        var dx = x - prevX;\n        var dy = y - prevY; // Ignore tiny segment.\n\n        if (dx * dx + dy * dy < 0.5) {\n          idx += dir;\n          continue;\n        }\n\n        if (smooth > 0) {\n          var nextIdx = idx + dir;\n          var nextX = points[nextIdx * 2];\n          var nextY = points[nextIdx * 2 + 1]; // Ignore duplicate point\n\n          while (nextX === x && nextY === y && k < segLen) {\n            k++;\n            nextIdx += dir;\n            idx += dir;\n            nextX = points[nextIdx * 2];\n            nextY = points[nextIdx * 2 + 1];\n            x = points[idx * 2];\n            y = points[idx * 2 + 1];\n            dx = x - prevX;\n            dy = y - prevY;\n          }\n\n          var tmpK = k + 1;\n\n          if (connectNulls) {\n            // Find next point not null\n            while (isPointNull$1(nextX, nextY) && tmpK < segLen) {\n              tmpK++;\n              nextIdx += dir;\n              nextX = points[nextIdx * 2];\n              nextY = points[nextIdx * 2 + 1];\n            }\n          }\n\n          var ratioNextSeg = 0.5;\n          var vx = 0;\n          var vy = 0;\n          var nextCpx0 = void 0;\n          var nextCpy0 = void 0; // Is last point\n\n          if (tmpK >= segLen || isPointNull$1(nextX, nextY)) {\n            cpx1 = x;\n            cpy1 = y;\n          } else {\n            vx = nextX - prevX;\n            vy = nextY - prevY;\n            var dx0 = x - prevX;\n            var dx1 = nextX - x;\n            var dy0 = y - prevY;\n            var dy1 = nextY - y;\n            var lenPrevSeg = void 0;\n            var lenNextSeg = void 0;\n\n            if (smoothMonotone === 'x') {\n              lenPrevSeg = Math.abs(dx0);\n              lenNextSeg = Math.abs(dx1);\n              var dir_1 = vx > 0 ? 1 : -1;\n              cpx1 = x - dir_1 * lenPrevSeg * smooth;\n              cpy1 = y;\n              nextCpx0 = x + dir_1 * lenNextSeg * smooth;\n              nextCpy0 = y;\n            } else if (smoothMonotone === 'y') {\n              lenPrevSeg = Math.abs(dy0);\n              lenNextSeg = Math.abs(dy1);\n              var dir_2 = vy > 0 ? 1 : -1;\n              cpx1 = x;\n              cpy1 = y - dir_2 * lenPrevSeg * smooth;\n              nextCpx0 = x;\n              nextCpy0 = y + dir_2 * lenNextSeg * smooth;\n            } else {\n              lenPrevSeg = Math.sqrt(dx0 * dx0 + dy0 * dy0);\n              lenNextSeg = Math.sqrt(dx1 * dx1 + dy1 * dy1); // Use ratio of seg length\n\n              ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n              cpx1 = x - vx * smooth * (1 - ratioNextSeg);\n              cpy1 = y - vy * smooth * (1 - ratioNextSeg); // cp0 of next segment\n\n              nextCpx0 = x + vx * smooth * ratioNextSeg;\n              nextCpy0 = y + vy * smooth * ratioNextSeg; // Smooth constraint between point and next point.\n              // Avoid exceeding extreme after smoothing.\n\n              nextCpx0 = mathMin$6(nextCpx0, mathMax$6(nextX, x));\n              nextCpy0 = mathMin$6(nextCpy0, mathMax$6(nextY, y));\n              nextCpx0 = mathMax$6(nextCpx0, mathMin$6(nextX, x));\n              nextCpy0 = mathMax$6(nextCpy0, mathMin$6(nextY, y)); // Reclaculate cp1 based on the adjusted cp0 of next seg.\n\n              vx = nextCpx0 - x;\n              vy = nextCpy0 - y;\n              cpx1 = x - vx * lenPrevSeg / lenNextSeg;\n              cpy1 = y - vy * lenPrevSeg / lenNextSeg; // Smooth constraint between point and prev point.\n              // Avoid exceeding extreme after smoothing.\n\n              cpx1 = mathMin$6(cpx1, mathMax$6(prevX, x));\n              cpy1 = mathMin$6(cpy1, mathMax$6(prevY, y));\n              cpx1 = mathMax$6(cpx1, mathMin$6(prevX, x));\n              cpy1 = mathMax$6(cpy1, mathMin$6(prevY, y)); // Adjust next cp0 again.\n\n              vx = x - cpx1;\n              vy = y - cpy1;\n              nextCpx0 = x + vx * lenNextSeg / lenPrevSeg;\n              nextCpy0 = y + vy * lenNextSeg / lenPrevSeg;\n            }\n          }\n\n          ctx.bezierCurveTo(cpx0, cpy0, cpx1, cpy1, x, y);\n          cpx0 = nextCpx0;\n          cpy0 = nextCpy0;\n        } else {\n          ctx.lineTo(x, y);\n        }\n      }\n\n      prevX = x;\n      prevY = y;\n      idx += dir;\n    }\n\n    return k;\n  }\n\n  var ECPolylineShape =\n  /** @class */\n  function () {\n    function ECPolylineShape() {\n      this.smooth = 0;\n      this.smoothConstraint = true;\n    }\n\n    return ECPolylineShape;\n  }();\n\n  var ECPolyline =\n  /** @class */\n  function (_super) {\n    __extends(ECPolyline, _super);\n\n    function ECPolyline(opts) {\n      var _this = _super.call(this, opts) || this;\n\n      _this.type = 'ec-polyline';\n      return _this;\n    }\n\n    ECPolyline.prototype.getDefaultStyle = function () {\n      return {\n        stroke: '#000',\n        fill: null\n      };\n    };\n\n    ECPolyline.prototype.getDefaultShape = function () {\n      return new ECPolylineShape();\n    };\n\n    ECPolyline.prototype.buildPath = function (ctx, shape) {\n      var points = shape.points;\n      var i = 0;\n      var len = points.length / 2; // const result = getBoundingBox(points, shape.smoothConstraint);\n\n      if (shape.connectNulls) {\n        // Must remove first and last null values avoid draw error in polygon\n        for (; len > 0; len--) {\n          if (!isPointNull$1(points[len * 2 - 2], points[len * 2 - 1])) {\n            break;\n          }\n        }\n\n        for (; i < len; i++) {\n          if (!isPointNull$1(points[i * 2], points[i * 2 + 1])) {\n            break;\n          }\n        }\n      }\n\n      while (i < len) {\n        i += drawSegment(ctx, points, i, len, len, 1, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n      }\n    };\n\n    ECPolyline.prototype.getPointOn = function (xOrY, dim) {\n      if (!this.path) {\n        this.createPathProxy();\n        this.buildPath(this.path, this.shape);\n      }\n\n      var path = this.path;\n      var data = path.data;\n      var CMD = PathProxy.CMD;\n      var x0;\n      var y0;\n      var isDimX = dim === 'x';\n      var roots = [];\n\n      for (var i = 0; i < data.length;) {\n        var cmd = data[i++];\n        var x = void 0;\n        var y = void 0;\n        var x2 = void 0;\n        var y2 = void 0;\n        var x3 = void 0;\n        var y3 = void 0;\n        var t = void 0;\n\n        switch (cmd) {\n          case CMD.M:\n            x0 = data[i++];\n            y0 = data[i++];\n            break;\n\n          case CMD.L:\n            x = data[i++];\n            y = data[i++];\n            t = isDimX ? (xOrY - x0) / (x - x0) : (xOrY - y0) / (y - y0);\n\n            if (t <= 1 && t >= 0) {\n              var val = isDimX ? (y - y0) * t + y0 : (x - x0) * t + x0;\n              return isDimX ? [xOrY, val] : [val, xOrY];\n            }\n\n            x0 = x;\n            y0 = y;\n            break;\n\n          case CMD.C:\n            x = data[i++];\n            y = data[i++];\n            x2 = data[i++];\n            y2 = data[i++];\n            x3 = data[i++];\n            y3 = data[i++];\n            var nRoot = isDimX ? cubicRootAt(x0, x, x2, x3, xOrY, roots) : cubicRootAt(y0, y, y2, y3, xOrY, roots);\n\n            if (nRoot > 0) {\n              for (var i_1 = 0; i_1 < nRoot; i_1++) {\n                var t_1 = roots[i_1];\n\n                if (t_1 <= 1 && t_1 >= 0) {\n                  var val = isDimX ? cubicAt(y0, y, y2, y3, t_1) : cubicAt(x0, x, x2, x3, t_1);\n                  return isDimX ? [xOrY, val] : [val, xOrY];\n                }\n              }\n            }\n\n            x0 = x3;\n            y0 = y3;\n            break;\n        }\n      }\n    };\n\n    return ECPolyline;\n  }(Path);\n\n  var ECPolygonShape =\n  /** @class */\n  function (_super) {\n    __extends(ECPolygonShape, _super);\n\n    function ECPolygonShape() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    return ECPolygonShape;\n  }(ECPolylineShape);\n\n  var ECPolygon =\n  /** @class */\n  function (_super) {\n    __extends(ECPolygon, _super);\n\n    function ECPolygon(opts) {\n      var _this = _super.call(this, opts) || this;\n\n      _this.type = 'ec-polygon';\n      return _this;\n    }\n\n    ECPolygon.prototype.getDefaultShape = function () {\n      return new ECPolygonShape();\n    };\n\n    ECPolygon.prototype.buildPath = function (ctx, shape) {\n      var points = shape.points;\n      var stackedOnPoints = shape.stackedOnPoints;\n      var i = 0;\n      var len = points.length / 2;\n      var smoothMonotone = shape.smoothMonotone;\n\n      if (shape.connectNulls) {\n        // Must remove first and last null values avoid draw error in polygon\n        for (; len > 0; len--) {\n          if (!isPointNull$1(points[len * 2 - 2], points[len * 2 - 1])) {\n            break;\n          }\n        }\n\n        for (; i < len; i++) {\n          if (!isPointNull$1(points[i * 2], points[i * 2 + 1])) {\n            break;\n          }\n        }\n      }\n\n      while (i < len) {\n        var k = drawSegment(ctx, points, i, len, len, 1, shape.smooth, smoothMonotone, shape.connectNulls);\n        drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n        i += k + 1;\n        ctx.closePath();\n      }\n    };\n\n    return ECPolygon;\n  }(Path);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function isPointsSame(points1, points2) {\n    if (points1.length !== points2.length) {\n      return;\n    }\n\n    for (var i = 0; i < points1.length; i++) {\n      if (points1[i] !== points2[i]) {\n        return;\n      }\n    }\n\n    return true;\n  }\n\n  function bboxFromPoints(points) {\n    var minX = Infinity;\n    var minY = Infinity;\n    var maxX = -Infinity;\n    var maxY = -Infinity;\n\n    for (var i = 0; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (!isNaN(x)) {\n        minX = Math.min(x, minX);\n        maxX = Math.max(x, maxX);\n      }\n\n      if (!isNaN(y)) {\n        minY = Math.min(y, minY);\n        maxY = Math.max(y, maxY);\n      }\n    }\n\n    return [[minX, minY], [maxX, maxY]];\n  }\n\n  function getBoundingDiff(points1, points2) {\n    var _a = bboxFromPoints(points1),\n        min1 = _a[0],\n        max1 = _a[1];\n\n    var _b = bboxFromPoints(points2),\n        min2 = _b[0],\n        max2 = _b[1]; // Get a max value from each corner of two boundings.\n\n\n    return Math.max(Math.abs(min1[0] - min2[0]), Math.abs(min1[1] - min2[1]), Math.abs(max1[0] - max2[0]), Math.abs(max1[1] - max2[1]));\n  }\n\n  function getSmooth(smooth) {\n    return isNumber(smooth) ? smooth : smooth ? 0.5 : 0;\n  }\n\n  function getStackedOnPoints(coordSys, data, dataCoordInfo) {\n    if (!dataCoordInfo.valueDim) {\n      return [];\n    }\n\n    var len = data.count();\n    var points = createFloat32Array(len * 2);\n\n    for (var idx = 0; idx < len; idx++) {\n      var pt = getStackedOnPoint(dataCoordInfo, coordSys, data, idx);\n      points[idx * 2] = pt[0];\n      points[idx * 2 + 1] = pt[1];\n    }\n\n    return points;\n  }\n\n  function turnPointsIntoStep(points, coordSys, stepTurnAt, connectNulls) {\n    var baseAxis = coordSys.getBaseAxis();\n    var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n    var stepPoints = [];\n    var i = 0;\n    var stepPt = [];\n    var pt = [];\n    var nextPt = [];\n    var filteredPoints = [];\n\n    if (connectNulls) {\n      for (i = 0; i < points.length; i += 2) {\n        if (!isNaN(points[i]) && !isNaN(points[i + 1])) {\n          filteredPoints.push(points[i], points[i + 1]);\n        }\n      }\n\n      points = filteredPoints;\n    }\n\n    for (i = 0; i < points.length - 2; i += 2) {\n      nextPt[0] = points[i + 2];\n      nextPt[1] = points[i + 3];\n      pt[0] = points[i];\n      pt[1] = points[i + 1];\n      stepPoints.push(pt[0], pt[1]);\n\n      switch (stepTurnAt) {\n        case 'end':\n          stepPt[baseIndex] = nextPt[baseIndex];\n          stepPt[1 - baseIndex] = pt[1 - baseIndex];\n          stepPoints.push(stepPt[0], stepPt[1]);\n          break;\n\n        case 'middle':\n          var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n          var stepPt2 = [];\n          stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n          stepPt[1 - baseIndex] = pt[1 - baseIndex];\n          stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n          stepPoints.push(stepPt[0], stepPt[1]);\n          stepPoints.push(stepPt2[0], stepPt2[1]);\n          break;\n\n        default:\n          // default is start\n          stepPt[baseIndex] = pt[baseIndex];\n          stepPt[1 - baseIndex] = nextPt[1 - baseIndex];\n          stepPoints.push(stepPt[0], stepPt[1]);\n      }\n    } // Last points\n\n\n    stepPoints.push(points[i++], points[i++]);\n    return stepPoints;\n  }\n  /**\n   * Clip color stops to edge. Avoid creating too large gradients.\n   * Which may lead to blurry when GPU acceleration is enabled. See #15680\n   *\n   * The stops has been sorted from small to large.\n   */\n\n\n  function clipColorStops(colorStops, maxSize) {\n    var newColorStops = [];\n    var len = colorStops.length; // coord will always < 0 in prevOutOfRangeColorStop.\n\n    var prevOutOfRangeColorStop;\n    var prevInRangeColorStop;\n\n    function lerpStop(stop0, stop1, clippedCoord) {\n      var coord0 = stop0.coord;\n      var p = (clippedCoord - coord0) / (stop1.coord - coord0);\n      var color = lerp$1(p, [stop0.color, stop1.color]);\n      return {\n        coord: clippedCoord,\n        color: color\n      };\n    }\n\n    for (var i = 0; i < len; i++) {\n      var stop_1 = colorStops[i];\n      var coord = stop_1.coord;\n\n      if (coord < 0) {\n        prevOutOfRangeColorStop = stop_1;\n      } else if (coord > maxSize) {\n        if (prevInRangeColorStop) {\n          newColorStops.push(lerpStop(prevInRangeColorStop, stop_1, maxSize));\n        } else if (prevOutOfRangeColorStop) {\n          // If there are two stops and coord range is between these two stops\n          newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0), lerpStop(prevOutOfRangeColorStop, stop_1, maxSize));\n        } // All following stop will be out of range. So just ignore them.\n\n\n        break;\n      } else {\n        if (prevOutOfRangeColorStop) {\n          newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0)); // Reset\n\n          prevOutOfRangeColorStop = null;\n        }\n\n        newColorStops.push(stop_1);\n        prevInRangeColorStop = stop_1;\n      }\n    }\n\n    return newColorStops;\n  }\n\n  function getVisualGradient(data, coordSys, api) {\n    var visualMetaList = data.getVisual('visualMeta');\n\n    if (!visualMetaList || !visualMetaList.length || !data.count()) {\n      // When data.count() is 0, gradient range can not be calculated.\n      return;\n    }\n\n    if (coordSys.type !== 'cartesian2d') {\n      {\n        console.warn('Visual map on line style is only supported on cartesian2d.');\n      }\n      return;\n    }\n\n    var coordDim;\n    var visualMeta;\n\n    for (var i = visualMetaList.length - 1; i >= 0; i--) {\n      var dimInfo = data.getDimensionInfo(visualMetaList[i].dimension);\n      coordDim = dimInfo && dimInfo.coordDim; // Can only be x or y\n\n      if (coordDim === 'x' || coordDim === 'y') {\n        visualMeta = visualMetaList[i];\n        break;\n      }\n    }\n\n    if (!visualMeta) {\n      {\n        console.warn('Visual map on line style only support x or y dimension.');\n      }\n      return;\n    } // If the area to be rendered is bigger than area defined by LinearGradient,\n    // the canvas spec prescribes that the color of the first stop and the last\n    // stop should be used. But if two stops are added at offset 0, in effect\n    // browsers use the color of the second stop to render area outside\n    // LinearGradient. So we can only infinitesimally extend area defined in\n    // LinearGradient to render `outerColors`.\n\n\n    var axis = coordSys.getAxis(coordDim); // dataToCoord mapping may not be linear, but must be monotonic.\n\n    var colorStops = map(visualMeta.stops, function (stop) {\n      // offset will be calculated later.\n      return {\n        coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\n        color: stop.color\n      };\n    });\n    var stopLen = colorStops.length;\n    var outerColors = visualMeta.outerColors.slice();\n\n    if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n      colorStops.reverse();\n      outerColors.reverse();\n    }\n\n    var colorStopsInRange = clipColorStops(colorStops, coordDim === 'x' ? api.getWidth() : api.getHeight());\n    var inRangeStopLen = colorStopsInRange.length;\n\n    if (!inRangeStopLen && stopLen) {\n      // All stops are out of range. All will be the same color.\n      return colorStops[0].coord < 0 ? outerColors[1] ? outerColors[1] : colorStops[stopLen - 1].color : outerColors[0] ? outerColors[0] : colorStops[0].color;\n    }\n\n    var tinyExtent = 10; // Arbitrary value: 10px\n\n    var minCoord = colorStopsInRange[0].coord - tinyExtent;\n    var maxCoord = colorStopsInRange[inRangeStopLen - 1].coord + tinyExtent;\n    var coordSpan = maxCoord - minCoord;\n\n    if (coordSpan < 1e-3) {\n      return 'transparent';\n    }\n\n    each(colorStopsInRange, function (stop) {\n      stop.offset = (stop.coord - minCoord) / coordSpan;\n    });\n    colorStopsInRange.push({\n      // NOTE: inRangeStopLen may still be 0 if stoplen is zero.\n      offset: inRangeStopLen ? colorStopsInRange[inRangeStopLen - 1].offset : 0.5,\n      color: outerColors[1] || 'transparent'\n    });\n    colorStopsInRange.unshift({\n      offset: inRangeStopLen ? colorStopsInRange[0].offset : 0.5,\n      color: outerColors[0] || 'transparent'\n    });\n    var gradient = new LinearGradient(0, 0, 0, 0, colorStopsInRange, true);\n    gradient[coordDim] = minCoord;\n    gradient[coordDim + '2'] = maxCoord;\n    return gradient;\n  }\n\n  function getIsIgnoreFunc(seriesModel, data, coordSys) {\n    var showAllSymbol = seriesModel.get('showAllSymbol');\n    var isAuto = showAllSymbol === 'auto';\n\n    if (showAllSymbol && !isAuto) {\n      return;\n    }\n\n    var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n    if (!categoryAxis) {\n      return;\n    } // Note that category label interval strategy might bring some weird effect\n    // in some scenario: users may wonder why some of the symbols are not\n    // displayed. So we show all symbols as possible as we can.\n\n\n    if (isAuto // Simplify the logic, do not determine label overlap here.\n    && canShowAllSymbolForCategory(categoryAxis, data)) {\n      return;\n    } // Otherwise follow the label interval strategy on category axis.\n\n\n    var categoryDataDim = data.mapDimension(categoryAxis.dim);\n    var labelMap = {};\n    each(categoryAxis.getViewLabels(), function (labelItem) {\n      var ordinalNumber = categoryAxis.scale.getRawOrdinalNumber(labelItem.tickValue);\n      labelMap[ordinalNumber] = 1;\n    });\n    return function (dataIndex) {\n      return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\n    };\n  }\n\n  function canShowAllSymbolForCategory(categoryAxis, data) {\n    // In mose cases, line is monotonous on category axis, and the label size\n    // is close with each other. So we check the symbol size and some of the\n    // label size alone with the category axis to estimate whether all symbol\n    // can be shown without overlap.\n    var axisExtent = categoryAxis.getExtent();\n    var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\n    isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\n    // Sampling some points, max 5.\n\n    var dataLen = data.count();\n    var step = Math.max(1, Math.round(dataLen / 5));\n\n    for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\n      if (Symbol$1.getSymbolSize(data, dataIndex // Only for cartesian, where `isHorizontal` exists.\n      )[categoryAxis.isHorizontal() ? 1 : 0] // Empirical number\n      * 1.5 > availSize) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function isPointNull(x, y) {\n    return isNaN(x) || isNaN(y);\n  }\n\n  function getLastIndexNotNull(points) {\n    var len = points.length / 2;\n\n    for (; len > 0; len--) {\n      if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n        break;\n      }\n    }\n\n    return len - 1;\n  }\n\n  function getPointAtIndex(points, idx) {\n    return [points[idx * 2], points[idx * 2 + 1]];\n  }\n\n  function getIndexRange(points, xOrY, dim) {\n    var len = points.length / 2;\n    var dimIdx = dim === 'x' ? 0 : 1;\n    var a;\n    var b;\n    var prevIndex = 0;\n    var nextIndex = -1;\n\n    for (var i = 0; i < len; i++) {\n      b = points[i * 2 + dimIdx];\n\n      if (isNaN(b) || isNaN(points[i * 2 + 1 - dimIdx])) {\n        continue;\n      }\n\n      if (i === 0) {\n        a = b;\n        continue;\n      }\n\n      if (a <= xOrY && b >= xOrY || a >= xOrY && b <= xOrY) {\n        nextIndex = i;\n        break;\n      }\n\n      prevIndex = i;\n      a = b;\n    }\n\n    return {\n      range: [prevIndex, nextIndex],\n      t: (xOrY - a) / (b - a)\n    };\n  }\n\n  function anyStateShowEndLabel(seriesModel) {\n    if (seriesModel.get(['endLabel', 'show'])) {\n      return true;\n    }\n\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      if (seriesModel.get([SPECIAL_STATES[i], 'endLabel', 'show'])) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function createLineClipPath(lineView, coordSys, hasAnimation, seriesModel) {\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      var endLabelModel_1 = seriesModel.getModel('endLabel');\n      var valueAnimation_1 = endLabelModel_1.get('valueAnimation');\n      var data_1 = seriesModel.getData();\n      var labelAnimationRecord_1 = {\n        lastFrameIndex: 0\n      };\n      var during = anyStateShowEndLabel(seriesModel) ? function (percent, clipRect) {\n        lineView._endLabelOnDuring(percent, clipRect, data_1, labelAnimationRecord_1, valueAnimation_1, endLabelModel_1, coordSys);\n      } : null;\n      var isHorizontal = coordSys.getBaseAxis().isHorizontal();\n      var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel, function () {\n        var endLabel = lineView._endLabel;\n\n        if (endLabel && hasAnimation) {\n          if (labelAnimationRecord_1.originalX != null) {\n            endLabel.attr({\n              x: labelAnimationRecord_1.originalX,\n              y: labelAnimationRecord_1.originalY\n            });\n          }\n        }\n      }, during); // Expand clip shape to avoid clipping when line value exceeds axis\n\n      if (!seriesModel.get('clip', true)) {\n        var rectShape = clipPath.shape;\n        var expandSize = Math.max(rectShape.width, rectShape.height);\n\n        if (isHorizontal) {\n          rectShape.y -= expandSize;\n          rectShape.height += expandSize * 2;\n        } else {\n          rectShape.x -= expandSize;\n          rectShape.width += expandSize * 2;\n        }\n      } // Set to the final frame. To make sure label layout is right.\n\n\n      if (during) {\n        during(1, clipPath);\n      }\n\n      return clipPath;\n    } else {\n      {\n        if (seriesModel.get(['endLabel', 'show'])) {\n          console.warn('endLabel is not supported for lines in polar systems.');\n        }\n      }\n      return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n    }\n  }\n\n  function getEndLabelStateSpecified(endLabelModel, coordSys) {\n    var baseAxis = coordSys.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var isBaseInversed = baseAxis.inverse;\n    var align = isHorizontal ? isBaseInversed ? 'right' : 'left' : 'center';\n    var verticalAlign = isHorizontal ? 'middle' : isBaseInversed ? 'top' : 'bottom';\n    return {\n      normal: {\n        align: endLabelModel.get('align') || align,\n        verticalAlign: endLabelModel.get('verticalAlign') || verticalAlign\n      }\n    };\n  }\n\n  var LineView =\n  /** @class */\n  function (_super) {\n    __extends(LineView, _super);\n\n    function LineView() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    LineView.prototype.init = function () {\n      var lineGroup = new Group();\n      var symbolDraw = new SymbolDraw();\n      this.group.add(symbolDraw.group);\n      this._symbolDraw = symbolDraw;\n      this._lineGroup = lineGroup;\n    };\n\n    LineView.prototype.render = function (seriesModel, ecModel, api) {\n      var _this = this;\n\n      var coordSys = seriesModel.coordinateSystem;\n      var group = this.group;\n      var data = seriesModel.getData();\n      var lineStyleModel = seriesModel.getModel('lineStyle');\n      var areaStyleModel = seriesModel.getModel('areaStyle');\n      var points = data.getLayout('points') || [];\n      var isCoordSysPolar = coordSys.type === 'polar';\n      var prevCoordSys = this._coordSys;\n      var symbolDraw = this._symbolDraw;\n      var polyline = this._polyline;\n      var polygon = this._polygon;\n      var lineGroup = this._lineGroup;\n      var hasAnimation = seriesModel.get('animation');\n      var isAreaChart = !areaStyleModel.isEmpty();\n      var valueOrigin = areaStyleModel.get('origin');\n      var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\n      var stackedOnPoints = isAreaChart && getStackedOnPoints(coordSys, data, dataCoordInfo);\n      var showSymbol = seriesModel.get('showSymbol');\n      var connectNulls = seriesModel.get('connectNulls');\n      var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys); // Remove temporary symbols\n\n      var oldData = this._data;\n      oldData && oldData.eachItemGraphicEl(function (el, idx) {\n        if (el.__temp) {\n          group.remove(el);\n          oldData.setItemGraphicEl(idx, null);\n        }\n      }); // Remove previous created symbols if showSymbol changed to false\n\n      if (!showSymbol) {\n        symbolDraw.remove();\n      }\n\n      group.add(lineGroup); // FIXME step not support polar\n\n      var step = !isCoordSysPolar ? seriesModel.get('step') : false;\n      var clipShapeForSymbol;\n\n      if (coordSys && coordSys.getArea && seriesModel.get('clip', true)) {\n        clipShapeForSymbol = coordSys.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n        // See #7913 and `test/dataZoom-clip.html`.\n\n        if (clipShapeForSymbol.width != null) {\n          clipShapeForSymbol.x -= 0.1;\n          clipShapeForSymbol.y -= 0.1;\n          clipShapeForSymbol.width += 0.2;\n          clipShapeForSymbol.height += 0.2;\n        } else if (clipShapeForSymbol.r0) {\n          clipShapeForSymbol.r0 -= 0.5;\n          clipShapeForSymbol.r += 0.5;\n        }\n      }\n\n      this._clipShapeForSymbol = clipShapeForSymbol;\n      var visualColor = getVisualGradient(data, coordSys, api) || data.getVisual('style')[data.getVisual('drawType')]; // Initialization animation or coordinate system changed\n\n      if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n        showSymbol && symbolDraw.updateData(data, {\n          isIgnore: isIgnoreFunc,\n          clipShape: clipShapeForSymbol,\n          disableAnimation: true,\n          getSymbolPoint: function (idx) {\n            return [points[idx * 2], points[idx * 2 + 1]];\n          }\n        });\n        hasAnimation && this._initSymbolLabelAnimation(data, coordSys, clipShapeForSymbol);\n\n        if (step) {\n          // TODO If stacked series is not step\n          points = turnPointsIntoStep(points, coordSys, step, connectNulls);\n\n          if (stackedOnPoints) {\n            stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step, connectNulls);\n          }\n        }\n\n        polyline = this._newPolyline(points);\n\n        if (isAreaChart) {\n          polygon = this._newPolygon(points, stackedOnPoints);\n        } // If areaStyle is removed\n        else if (polygon) {\n            lineGroup.remove(polygon);\n            polygon = this._polygon = null;\n          } // NOTE: Must update _endLabel before setClipPath.\n\n\n        if (!isCoordSysPolar) {\n          this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n        }\n\n        lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n      } else {\n        if (isAreaChart && !polygon) {\n          // If areaStyle is added\n          polygon = this._newPolygon(points, stackedOnPoints);\n        } else if (polygon && !isAreaChart) {\n          // If areaStyle is removed\n          lineGroup.remove(polygon);\n          polygon = this._polygon = null;\n        } // NOTE: Must update _endLabel before setClipPath.\n\n\n        if (!isCoordSysPolar) {\n          this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n        } // Update clipPath\n\n\n        var oldClipPath = lineGroup.getClipPath();\n\n        if (oldClipPath) {\n          var newClipPath = createLineClipPath(this, coordSys, false, seriesModel);\n          initProps(oldClipPath, {\n            shape: newClipPath.shape\n          }, seriesModel);\n        } else {\n          lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n        } // Always update, or it is wrong in the case turning on legend\n        // because points are not changed\n\n\n        showSymbol && symbolDraw.updateData(data, {\n          isIgnore: isIgnoreFunc,\n          clipShape: clipShapeForSymbol,\n          disableAnimation: true,\n          getSymbolPoint: function (idx) {\n            return [points[idx * 2], points[idx * 2 + 1]];\n          }\n        }); // In the case data zoom triggerred refreshing frequently\n        // Data may not change if line has a category axis. So it should animate nothing\n\n        if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n          if (hasAnimation) {\n            this._doUpdateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin, connectNulls);\n          } else {\n            // Not do it in update with animation\n            if (step) {\n              // TODO If stacked series is not step\n              points = turnPointsIntoStep(points, coordSys, step, connectNulls);\n\n              if (stackedOnPoints) {\n                stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step, connectNulls);\n              }\n            }\n\n            polyline.setShape({\n              points: points\n            });\n            polygon && polygon.setShape({\n              points: points,\n              stackedOnPoints: stackedOnPoints\n            });\n          }\n        }\n      }\n\n      var emphasisModel = seriesModel.getModel('emphasis');\n      var focus = emphasisModel.get('focus');\n      var blurScope = emphasisModel.get('blurScope');\n      var emphasisDisabled = emphasisModel.get('disabled');\n      polyline.useStyle(defaults( // Use color in lineStyle first\n      lineStyleModel.getLineStyle(), {\n        fill: 'none',\n        stroke: visualColor,\n        lineJoin: 'bevel'\n      }));\n      setStatesStylesFromModel(polyline, seriesModel, 'lineStyle');\n\n      if (polyline.style.lineWidth > 0 && seriesModel.get(['emphasis', 'lineStyle', 'width']) === 'bolder') {\n        var emphasisLineStyle = polyline.getState('emphasis').style;\n        emphasisLineStyle.lineWidth = +polyline.style.lineWidth + 1;\n      } // Needs seriesIndex for focus\n\n\n      getECData(polyline).seriesIndex = seriesModel.seriesIndex;\n      toggleHoverEmphasis(polyline, focus, blurScope, emphasisDisabled);\n      var smooth = getSmooth(seriesModel.get('smooth'));\n      var smoothMonotone = seriesModel.get('smoothMonotone');\n      polyline.setShape({\n        smooth: smooth,\n        smoothMonotone: smoothMonotone,\n        connectNulls: connectNulls\n      });\n\n      if (polygon) {\n        var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n        var stackedOnSmooth = 0;\n        polygon.useStyle(defaults(areaStyleModel.getAreaStyle(), {\n          fill: visualColor,\n          opacity: 0.7,\n          lineJoin: 'bevel',\n          decal: data.getVisual('style').decal\n        }));\n\n        if (stackedOnSeries) {\n          stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n        }\n\n        polygon.setShape({\n          smooth: smooth,\n          stackedOnSmooth: stackedOnSmooth,\n          smoothMonotone: smoothMonotone,\n          connectNulls: connectNulls\n        });\n        setStatesStylesFromModel(polygon, seriesModel, 'areaStyle'); // Needs seriesIndex for focus\n\n        getECData(polygon).seriesIndex = seriesModel.seriesIndex;\n        toggleHoverEmphasis(polygon, focus, blurScope, emphasisDisabled);\n      }\n\n      var changePolyState = function (toState) {\n        _this._changePolyState(toState);\n      };\n\n      data.eachItemGraphicEl(function (el) {\n        // Switch polyline / polygon state if element changed its state.\n        el && (el.onHoverStateChange = changePolyState);\n      });\n      this._polyline.onHoverStateChange = changePolyState;\n      this._data = data; // Save the coordinate system for transition animation when data changed\n\n      this._coordSys = coordSys;\n      this._stackedOnPoints = stackedOnPoints;\n      this._points = points;\n      this._step = step;\n      this._valueOrigin = valueOrigin;\n\n      if (seriesModel.get('triggerLineEvent')) {\n        this.packEventData(seriesModel, polyline);\n        polygon && this.packEventData(seriesModel, polygon);\n      }\n    };\n\n    LineView.prototype.packEventData = function (seriesModel, el) {\n      getECData(el).eventData = {\n        componentType: 'series',\n        componentSubType: 'line',\n        componentIndex: seriesModel.componentIndex,\n        seriesIndex: seriesModel.seriesIndex,\n        seriesName: seriesModel.name,\n        seriesType: 'line'\n      };\n    };\n\n    LineView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n      var data = seriesModel.getData();\n      var dataIndex = queryDataIndex(data, payload);\n\n      this._changePolyState('emphasis');\n\n      if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n        var points = data.getLayout('points');\n        var symbol = data.getItemGraphicEl(dataIndex);\n\n        if (!symbol) {\n          // Create a temporary symbol if it is not exists\n          var x = points[dataIndex * 2];\n          var y = points[dataIndex * 2 + 1];\n\n          if (isNaN(x) || isNaN(y)) {\n            // Null data\n            return;\n          } // fix #11360: should't draw symbol outside clipShapeForSymbol\n\n\n          if (this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(x, y)) {\n            return;\n          }\n\n          var zlevel = seriesModel.get('zlevel');\n          var z = seriesModel.get('z');\n          symbol = new Symbol$1(data, dataIndex);\n          symbol.x = x;\n          symbol.y = y;\n          symbol.setZ(zlevel, z); // ensure label text of the temporary symbol is in front of line and area polygon\n\n          var symbolLabel = symbol.getSymbolPath().getTextContent();\n\n          if (symbolLabel) {\n            symbolLabel.zlevel = zlevel;\n            symbolLabel.z = z;\n            symbolLabel.z2 = this._polyline.z2 + 1;\n          }\n\n          symbol.__temp = true;\n          data.setItemGraphicEl(dataIndex, symbol); // Stop scale animation\n\n          symbol.stopSymbolAnimation(true);\n          this.group.add(symbol);\n        }\n\n        symbol.highlight();\n      } else {\n        // Highlight whole series\n        ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n      }\n    };\n\n    LineView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n      var data = seriesModel.getData();\n      var dataIndex = queryDataIndex(data, payload);\n\n      this._changePolyState('normal');\n\n      if (dataIndex != null && dataIndex >= 0) {\n        var symbol = data.getItemGraphicEl(dataIndex);\n\n        if (symbol) {\n          if (symbol.__temp) {\n            data.setItemGraphicEl(dataIndex, null);\n            this.group.remove(symbol);\n          } else {\n            symbol.downplay();\n          }\n        }\n      } else {\n        // FIXME\n        // can not downplay completely.\n        // Downplay whole series\n        ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n      }\n    };\n\n    LineView.prototype._changePolyState = function (toState) {\n      var polygon = this._polygon;\n      setStatesFlag(this._polyline, toState);\n      polygon && setStatesFlag(polygon, toState);\n    };\n\n    LineView.prototype._newPolyline = function (points) {\n      var polyline = this._polyline; // Remove previous created polyline\n\n      if (polyline) {\n        this._lineGroup.remove(polyline);\n      }\n\n      polyline = new ECPolyline({\n        shape: {\n          points: points\n        },\n        segmentIgnoreThreshold: 2,\n        z2: 10\n      });\n\n      this._lineGroup.add(polyline);\n\n      this._polyline = polyline;\n      return polyline;\n    };\n\n    LineView.prototype._newPolygon = function (points, stackedOnPoints) {\n      var polygon = this._polygon; // Remove previous created polygon\n\n      if (polygon) {\n        this._lineGroup.remove(polygon);\n      }\n\n      polygon = new ECPolygon({\n        shape: {\n          points: points,\n          stackedOnPoints: stackedOnPoints\n        },\n        segmentIgnoreThreshold: 2\n      });\n\n      this._lineGroup.add(polygon);\n\n      this._polygon = polygon;\n      return polygon;\n    };\n\n    LineView.prototype._initSymbolLabelAnimation = function (data, coordSys, clipShape) {\n      var isHorizontalOrRadial;\n      var isCoordSysPolar;\n      var baseAxis = coordSys.getBaseAxis();\n      var isAxisInverse = baseAxis.inverse;\n\n      if (coordSys.type === 'cartesian2d') {\n        isHorizontalOrRadial = baseAxis.isHorizontal();\n        isCoordSysPolar = false;\n      } else if (coordSys.type === 'polar') {\n        isHorizontalOrRadial = baseAxis.dim === 'angle';\n        isCoordSysPolar = true;\n      }\n\n      var seriesModel = data.hostModel;\n      var seriesDuration = seriesModel.get('animationDuration');\n\n      if (isFunction(seriesDuration)) {\n        seriesDuration = seriesDuration(null);\n      }\n\n      var seriesDalay = seriesModel.get('animationDelay') || 0;\n      var seriesDalayValue = isFunction(seriesDalay) ? seriesDalay(null) : seriesDalay;\n      data.eachItemGraphicEl(function (symbol, idx) {\n        var el = symbol;\n\n        if (el) {\n          var point = [symbol.x, symbol.y];\n          var start = void 0;\n          var end = void 0;\n          var current = void 0;\n\n          if (clipShape) {\n            if (isCoordSysPolar) {\n              var polarClip = clipShape;\n              var coord = coordSys.pointToCoord(point);\n\n              if (isHorizontalOrRadial) {\n                start = polarClip.startAngle;\n                end = polarClip.endAngle;\n                current = -coord[1] / 180 * Math.PI;\n              } else {\n                start = polarClip.r0;\n                end = polarClip.r;\n                current = coord[0];\n              }\n            } else {\n              var gridClip = clipShape;\n\n              if (isHorizontalOrRadial) {\n                start = gridClip.x;\n                end = gridClip.x + gridClip.width;\n                current = symbol.x;\n              } else {\n                start = gridClip.y + gridClip.height;\n                end = gridClip.y;\n                current = symbol.y;\n              }\n            }\n          }\n\n          var ratio = end === start ? 0 : (current - start) / (end - start);\n\n          if (isAxisInverse) {\n            ratio = 1 - ratio;\n          }\n\n          var delay = isFunction(seriesDalay) ? seriesDalay(idx) : seriesDuration * ratio + seriesDalayValue;\n          var symbolPath = el.getSymbolPath();\n          var text = symbolPath.getTextContent();\n          el.attr({\n            scaleX: 0,\n            scaleY: 0\n          });\n          el.animateTo({\n            scaleX: 1,\n            scaleY: 1\n          }, {\n            duration: 200,\n            setToFinal: true,\n            delay: delay\n          });\n\n          if (text) {\n            text.animateFrom({\n              style: {\n                opacity: 0\n              }\n            }, {\n              duration: 300,\n              delay: delay\n            });\n          }\n\n          symbolPath.disableLabelAnimation = true;\n        }\n      });\n    };\n\n    LineView.prototype._initOrUpdateEndLabel = function (seriesModel, coordSys, inheritColor) {\n      var endLabelModel = seriesModel.getModel('endLabel');\n\n      if (anyStateShowEndLabel(seriesModel)) {\n        var data_2 = seriesModel.getData();\n        var polyline = this._polyline; // series may be filtered.\n\n        var points = data_2.getLayout('points');\n\n        if (!points) {\n          polyline.removeTextContent();\n          this._endLabel = null;\n          return;\n        }\n\n        var endLabel = this._endLabel;\n\n        if (!endLabel) {\n          endLabel = this._endLabel = new ZRText({\n            z2: 200 // should be higher than item symbol\n\n          });\n          endLabel.ignoreClip = true;\n          polyline.setTextContent(this._endLabel);\n          polyline.disableLabelAnimation = true;\n        } // Find last non-NaN data to display data\n\n\n        var dataIndex = getLastIndexNotNull(points);\n\n        if (dataIndex >= 0) {\n          setLabelStyle(polyline, getLabelStatesModels(seriesModel, 'endLabel'), {\n            inheritColor: inheritColor,\n            labelFetcher: seriesModel,\n            labelDataIndex: dataIndex,\n            defaultText: function (dataIndex, opt, interpolatedValue) {\n              return interpolatedValue != null ? getDefaultInterpolatedLabel(data_2, interpolatedValue) : getDefaultLabel(data_2, dataIndex);\n            },\n            enableTextSetter: true\n          }, getEndLabelStateSpecified(endLabelModel, coordSys));\n          polyline.textConfig.position = null;\n        }\n      } else if (this._endLabel) {\n        this._polyline.removeTextContent();\n\n        this._endLabel = null;\n      }\n    };\n\n    LineView.prototype._endLabelOnDuring = function (percent, clipRect, data, animationRecord, valueAnimation, endLabelModel, coordSys) {\n      var endLabel = this._endLabel;\n      var polyline = this._polyline;\n\n      if (endLabel) {\n        // NOTE: Don't remove percent < 1. percent === 1 means the first frame during render.\n        // The label is not prepared at this time.\n        if (percent < 1 && animationRecord.originalX == null) {\n          animationRecord.originalX = endLabel.x;\n          animationRecord.originalY = endLabel.y;\n        }\n\n        var points = data.getLayout('points');\n        var seriesModel = data.hostModel;\n        var connectNulls = seriesModel.get('connectNulls');\n        var precision = endLabelModel.get('precision');\n        var distance = endLabelModel.get('distance') || 0;\n        var baseAxis = coordSys.getBaseAxis();\n        var isHorizontal = baseAxis.isHorizontal();\n        var isBaseInversed = baseAxis.inverse;\n        var clipShape = clipRect.shape;\n        var xOrY = isBaseInversed ? isHorizontal ? clipShape.x : clipShape.y + clipShape.height : isHorizontal ? clipShape.x + clipShape.width : clipShape.y;\n        var distanceX = (isHorizontal ? distance : 0) * (isBaseInversed ? -1 : 1);\n        var distanceY = (isHorizontal ? 0 : -distance) * (isBaseInversed ? -1 : 1);\n        var dim = isHorizontal ? 'x' : 'y';\n        var dataIndexRange = getIndexRange(points, xOrY, dim);\n        var indices = dataIndexRange.range;\n        var diff = indices[1] - indices[0];\n        var value = void 0;\n\n        if (diff >= 1) {\n          // diff > 1 && connectNulls, which is on the null data.\n          if (diff > 1 && !connectNulls) {\n            var pt = getPointAtIndex(points, indices[0]);\n            endLabel.attr({\n              x: pt[0] + distanceX,\n              y: pt[1] + distanceY\n            });\n            valueAnimation && (value = seriesModel.getRawValue(indices[0]));\n          } else {\n            var pt = polyline.getPointOn(xOrY, dim);\n            pt && endLabel.attr({\n              x: pt[0] + distanceX,\n              y: pt[1] + distanceY\n            });\n            var startValue = seriesModel.getRawValue(indices[0]);\n            var endValue = seriesModel.getRawValue(indices[1]);\n            valueAnimation && (value = interpolateRawValues(data, precision, startValue, endValue, dataIndexRange.t));\n          }\n\n          animationRecord.lastFrameIndex = indices[0];\n        } else {\n          // If diff <= 0, which is the range is not found(Include NaN)\n          // Choose the first point or last point.\n          var idx = percent === 1 || animationRecord.lastFrameIndex > 0 ? indices[0] : 0;\n          var pt = getPointAtIndex(points, idx);\n          valueAnimation && (value = seriesModel.getRawValue(idx));\n          endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n        }\n\n        if (valueAnimation) {\n          labelInner(endLabel).setLabelText(value);\n        }\n      }\n    };\n    /**\n     * @private\n     */\n    // FIXME Two value axis\n\n\n    LineView.prototype._doUpdateAnimation = function (data, stackedOnPoints, coordSys, api, step, valueOrigin, connectNulls) {\n      var polyline = this._polyline;\n      var polygon = this._polygon;\n      var seriesModel = data.hostModel;\n      var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\n      var current = diff.current;\n      var stackedOnCurrent = diff.stackedOnCurrent;\n      var next = diff.next;\n      var stackedOnNext = diff.stackedOnNext;\n\n      if (step) {\n        // TODO If stacked series is not step\n        current = turnPointsIntoStep(diff.current, coordSys, step, connectNulls);\n        stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step, connectNulls);\n        next = turnPointsIntoStep(diff.next, coordSys, step, connectNulls);\n        stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step, connectNulls);\n      } // Don't apply animation if diff is large.\n      // For better result and avoid memory explosion problems like\n      // https://github.com/apache/incubator-echarts/issues/12229\n\n\n      if (getBoundingDiff(current, next) > 3000 || polygon && getBoundingDiff(stackedOnCurrent, stackedOnNext) > 3000) {\n        polyline.stopAnimation();\n        polyline.setShape({\n          points: next\n        });\n\n        if (polygon) {\n          polygon.stopAnimation();\n          polygon.setShape({\n            points: next,\n            stackedOnPoints: stackedOnNext\n          });\n        }\n\n        return;\n      }\n\n      polyline.shape.__points = diff.current;\n      polyline.shape.points = current;\n      var target = {\n        shape: {\n          points: next\n        }\n      }; // Also animate the original points.\n      // If points reference is changed when turning into step line.\n\n      if (diff.current !== current) {\n        target.shape.__points = diff.next;\n      } // Stop previous animation.\n\n\n      polyline.stopAnimation();\n      updateProps(polyline, target, seriesModel);\n\n      if (polygon) {\n        polygon.setShape({\n          // Reuse the points with polyline.\n          points: current,\n          stackedOnPoints: stackedOnCurrent\n        });\n        polygon.stopAnimation();\n        updateProps(polygon, {\n          shape: {\n            stackedOnPoints: stackedOnNext\n          }\n        }, seriesModel); // If use attr directly in updateProps.\n\n        if (polyline.shape.points !== polygon.shape.points) {\n          polygon.shape.points = polyline.shape.points;\n        }\n      }\n\n      var updatedDataInfo = [];\n      var diffStatus = diff.status;\n\n      for (var i = 0; i < diffStatus.length; i++) {\n        var cmd = diffStatus[i].cmd;\n\n        if (cmd === '=') {\n          var el = data.getItemGraphicEl(diffStatus[i].idx1);\n\n          if (el) {\n            updatedDataInfo.push({\n              el: el,\n              ptIdx: i // Index of points\n\n            });\n          }\n        }\n      }\n\n      if (polyline.animators && polyline.animators.length) {\n        polyline.animators[0].during(function () {\n          polygon && polygon.dirtyShape();\n          var points = polyline.shape.__points;\n\n          for (var i = 0; i < updatedDataInfo.length; i++) {\n            var el = updatedDataInfo[i].el;\n            var offset = updatedDataInfo[i].ptIdx * 2;\n            el.x = points[offset];\n            el.y = points[offset + 1];\n            el.markRedraw();\n          }\n        });\n      }\n    };\n\n    LineView.prototype.remove = function (ecModel) {\n      var group = this.group;\n      var oldData = this._data;\n\n      this._lineGroup.removeAll();\n\n      this._symbolDraw.remove(true); // Remove temporary created elements when highlighting\n\n\n      oldData && oldData.eachItemGraphicEl(function (el, idx) {\n        if (el.__temp) {\n          group.remove(el);\n          oldData.setItemGraphicEl(idx, null);\n        }\n      });\n      this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._endLabel = this._data = null;\n    };\n\n    LineView.type = 'line';\n    return LineView;\n  }(ChartView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function pointsLayout(seriesType, forceStoreInTypedArray) {\n    return {\n      seriesType: seriesType,\n      plan: createRenderPlanner(),\n      reset: function (seriesModel) {\n        var data = seriesModel.getData();\n        var coordSys = seriesModel.coordinateSystem;\n        var pipelineContext = seriesModel.pipelineContext;\n        var useTypedArray = forceStoreInTypedArray || pipelineContext.large;\n\n        if (!coordSys) {\n          return;\n        }\n\n        var dims = map(coordSys.dimensions, function (dim) {\n          return data.mapDimension(dim);\n        }).slice(0, 2);\n        var dimLen = dims.length;\n        var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n        if (isDimensionStacked(data, dims[0])) {\n          dims[0] = stackResultDim;\n        }\n\n        if (isDimensionStacked(data, dims[1])) {\n          dims[1] = stackResultDim;\n        }\n\n        var store = data.getStore();\n        var dimIdx0 = data.getDimensionIndex(dims[0]);\n        var dimIdx1 = data.getDimensionIndex(dims[1]);\n        return dimLen && {\n          progress: function (params, data) {\n            var segCount = params.end - params.start;\n            var points = useTypedArray && createFloat32Array(segCount * dimLen);\n            var tmpIn = [];\n            var tmpOut = [];\n\n            for (var i = params.start, offset = 0; i < params.end; i++) {\n              var point = void 0;\n\n              if (dimLen === 1) {\n                var x = store.get(dimIdx0, i); // NOTE: Make sure the second parameter is null to use default strategy.\n\n                point = coordSys.dataToPoint(x, null, tmpOut);\n              } else {\n                tmpIn[0] = store.get(dimIdx0, i);\n                tmpIn[1] = store.get(dimIdx1, i); // Let coordinate system to handle the NaN data.\n\n                point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n              }\n\n              if (useTypedArray) {\n                points[offset++] = point[0];\n                points[offset++] = point[1];\n              } else {\n                data.setItemLayout(i, point.slice());\n              }\n            }\n\n            useTypedArray && data.setLayout('points', points);\n          }\n        };\n      }\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$3(registers) {\n    registers.registerChartView(LineView);\n    registers.registerSeriesModel(LineSeriesModel);\n    registers.registerLayout(pointsLayout('line', true));\n    registers.registerVisual({\n      seriesType: 'line',\n      reset: function (seriesModel) {\n        var data = seriesModel.getData(); // Visual coding for legend\n\n        var lineStyle = seriesModel.getModel('lineStyle').getLineStyle();\n\n        if (lineStyle && !lineStyle.stroke) {\n          // Fill in visual should be palette color if\n          // has color callback\n          lineStyle.stroke = data.getVisual('style').fill;\n        }\n\n        data.setVisual('legendLineStyle', lineStyle);\n      }\n    }); // Down sample after filter\n\n    registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  use(install$3);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var PI2$7 = Math.PI * 2;\n  var RADIAN = Math.PI / 180;\n\n  function getViewRect(seriesModel, api) {\n    return getLayoutRect(seriesModel.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  }\n\n  function getBasicPieLayout(seriesModel, api) {\n    var viewRect = getViewRect(seriesModel, api);\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = parsePercent$1(viewRect.width, api.getWidth());\n    var height = parsePercent$1(viewRect.height, api.getHeight());\n    var size = Math.min(width, height);\n    var cx = parsePercent$1(center[0], width) + viewRect.x;\n    var cy = parsePercent$1(center[1], height) + viewRect.y;\n    var r0 = parsePercent$1(radius[0], size / 2);\n    var r = parsePercent$1(radius[1], size / 2);\n    return {\n      cx: cx,\n      cy: cy,\n      r0: r0,\n      r: r\n    };\n  }\n\n  function pieLayout(seriesType, ecModel, api) {\n    ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n      var data = seriesModel.getData();\n      var valueDim = data.mapDimension('value');\n      var viewRect = getViewRect(seriesModel, api);\n\n      var _a = getBasicPieLayout(seriesModel, api),\n          cx = _a.cx,\n          cy = _a.cy,\n          r = _a.r,\n          r0 = _a.r0;\n\n      var startAngle = -seriesModel.get('startAngle') * RADIAN;\n      var minAngle = seriesModel.get('minAngle') * RADIAN;\n      var validDataCount = 0;\n      data.each(valueDim, function (value) {\n        !isNaN(value) && validDataCount++;\n      });\n      var sum = data.getSum(valueDim); // Sum may be 0\n\n      var unitRadian = Math.PI / (sum || validDataCount) * 2;\n      var clockwise = seriesModel.get('clockwise');\n      var roseType = seriesModel.get('roseType');\n      var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // [0...max]\n\n      var extent = data.getDataExtent(valueDim);\n      extent[0] = 0; // In the case some sector angle is smaller than minAngle\n\n      var restAngle = PI2$7;\n      var valueSumLargerThanMinAngle = 0;\n      var currentAngle = startAngle;\n      var dir = clockwise ? 1 : -1;\n      data.setLayout({\n        viewRect: viewRect,\n        r: r\n      });\n      data.each(valueDim, function (value, idx) {\n        var angle;\n\n        if (isNaN(value)) {\n          data.setItemLayout(idx, {\n            angle: NaN,\n            startAngle: NaN,\n            endAngle: NaN,\n            clockwise: clockwise,\n            cx: cx,\n            cy: cy,\n            r0: r0,\n            r: roseType ? NaN : r\n          });\n          return;\n        } // FIXME 兼容 2.0 但是 roseType 是 area 的时候才是这样？\n\n\n        if (roseType !== 'area') {\n          angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n        } else {\n          angle = PI2$7 / validDataCount;\n        }\n\n        if (angle < minAngle) {\n          angle = minAngle;\n          restAngle -= minAngle;\n        } else {\n          valueSumLargerThanMinAngle += value;\n        }\n\n        var endAngle = currentAngle + dir * angle;\n        data.setItemLayout(idx, {\n          angle: angle,\n          startAngle: currentAngle,\n          endAngle: endAngle,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? linearMap(value, extent, [r0, r]) : r\n        });\n        currentAngle = endAngle;\n      }); // Some sector is constrained by minAngle\n      // Rest sectors needs recalculate angle\n\n      if (restAngle < PI2$7 && validDataCount) {\n        // Average the angle if rest angle is not enough after all angles is\n        // Constrained by minAngle\n        if (restAngle <= 1e-3) {\n          var angle_1 = PI2$7 / validDataCount;\n          data.each(valueDim, function (value, idx) {\n            if (!isNaN(value)) {\n              var layout_1 = data.getItemLayout(idx);\n              layout_1.angle = angle_1;\n              layout_1.startAngle = startAngle + dir * idx * angle_1;\n              layout_1.endAngle = startAngle + dir * (idx + 1) * angle_1;\n            }\n          });\n        } else {\n          unitRadian = restAngle / valueSumLargerThanMinAngle;\n          currentAngle = startAngle;\n          data.each(valueDim, function (value, idx) {\n            if (!isNaN(value)) {\n              var layout_2 = data.getItemLayout(idx);\n              var angle = layout_2.angle === minAngle ? minAngle : value * unitRadian;\n              layout_2.startAngle = currentAngle;\n              layout_2.endAngle = currentAngle + dir * angle;\n              currentAngle += dir * angle;\n            }\n          });\n        }\n      }\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function dataFilter(seriesType) {\n    return {\n      seriesType: seriesType,\n      reset: function (seriesModel, ecModel) {\n        var legendModels = ecModel.findComponents({\n          mainType: 'legend'\n        });\n\n        if (!legendModels || !legendModels.length) {\n          return;\n        }\n\n        var data = seriesModel.getData();\n        data.filterSelf(function (idx) {\n          var name = data.getName(idx); // If in any legend component the status is not selected.\n\n          for (var i = 0; i < legendModels.length; i++) {\n            // @ts-ignore FIXME: LegendModel\n            if (!legendModels[i].isSelected(name)) {\n              return false;\n            }\n          }\n\n          return true;\n        });\n      }\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // FIXME emphasis label position is not same with normal label position\n\n\n  var RADIAN$1 = Math.PI / 180;\n\n  function adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {\n    if (list.length < 2) {\n      return;\n    }\n\n    function recalculateXOnSemiToAlignOnEllipseCurve(semi) {\n      var rB = semi.rB;\n      var rB2 = rB * rB;\n\n      for (var i = 0; i < semi.list.length; i++) {\n        var item = semi.list[i];\n        var dy = Math.abs(item.label.y - cy); // horizontal r is always same with original r because x is not changed.\n\n        var rA = r + item.len;\n        var rA2 = rA * rA; // Use ellipse implicit function to calculate x\n\n        var dx = Math.sqrt((1 - Math.abs(dy * dy / rB2)) * rA2);\n        var newX = cx + (dx + item.len2) * dir;\n        var deltaX = newX - item.label.x;\n        var newTargetWidth = item.targetTextWidth - deltaX * dir; // text x is changed, so need to recalculate width.\n\n        constrainTextWidth(item, newTargetWidth, true);\n        item.label.x = newX;\n      }\n    } // Adjust X based on the shifted y. Make tight labels aligned on an ellipse curve.\n\n\n    function recalculateX(items) {\n      // Extremes of\n      var topSemi = {\n        list: [],\n        maxY: 0\n      };\n      var bottomSemi = {\n        list: [],\n        maxY: 0\n      };\n\n      for (var i = 0; i < items.length; i++) {\n        if (items[i].labelAlignTo !== 'none') {\n          continue;\n        }\n\n        var item = items[i];\n        var semi = item.label.y > cy ? bottomSemi : topSemi;\n        var dy = Math.abs(item.label.y - cy);\n\n        if (dy >= semi.maxY) {\n          var dx = item.label.x - cx - item.len2 * dir; // horizontal r is always same with original r because x is not changed.\n\n          var rA = r + item.len; // Canculate rB based on the topest / bottemest label.\n\n          var rB = Math.abs(dx) < rA ? Math.sqrt(dy * dy / (1 - dx * dx / rA / rA)) : rA;\n          semi.rB = rB;\n          semi.maxY = dy;\n        }\n\n        semi.list.push(item);\n      }\n\n      recalculateXOnSemiToAlignOnEllipseCurve(topSemi);\n      recalculateXOnSemiToAlignOnEllipseCurve(bottomSemi);\n    }\n\n    var len = list.length;\n\n    for (var i = 0; i < len; i++) {\n      if (list[i].position === 'outer' && list[i].labelAlignTo === 'labelLine') {\n        var dx = list[i].label.x - farthestX;\n        list[i].linePoints[1][0] += dx;\n        list[i].label.x = farthestX;\n      }\n    }\n\n    if (shiftLayoutOnY(list, viewTop, viewTop + viewHeight)) {\n      recalculateX(list);\n    }\n  }\n\n  function avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {\n    var leftList = [];\n    var rightList = [];\n    var leftmostX = Number.MAX_VALUE;\n    var rightmostX = -Number.MAX_VALUE;\n\n    for (var i = 0; i < labelLayoutList.length; i++) {\n      var label = labelLayoutList[i].label;\n\n      if (isPositionCenter(labelLayoutList[i])) {\n        continue;\n      }\n\n      if (label.x < cx) {\n        leftmostX = Math.min(leftmostX, label.x);\n        leftList.push(labelLayoutList[i]);\n      } else {\n        rightmostX = Math.max(rightmostX, label.x);\n        rightList.push(labelLayoutList[i]);\n      }\n    }\n\n    for (var i = 0; i < labelLayoutList.length; i++) {\n      var layout = labelLayoutList[i];\n\n      if (!isPositionCenter(layout) && layout.linePoints) {\n        if (layout.labelStyleWidth != null) {\n          continue;\n        }\n\n        var label = layout.label;\n        var linePoints = layout.linePoints;\n        var targetTextWidth = void 0;\n\n        if (layout.labelAlignTo === 'edge') {\n          if (label.x < cx) {\n            targetTextWidth = linePoints[2][0] - layout.labelDistance - viewLeft - layout.edgeDistance;\n          } else {\n            targetTextWidth = viewLeft + viewWidth - layout.edgeDistance - linePoints[2][0] - layout.labelDistance;\n          }\n        } else if (layout.labelAlignTo === 'labelLine') {\n          if (label.x < cx) {\n            targetTextWidth = leftmostX - viewLeft - layout.bleedMargin;\n          } else {\n            targetTextWidth = viewLeft + viewWidth - rightmostX - layout.bleedMargin;\n          }\n        } else {\n          if (label.x < cx) {\n            targetTextWidth = label.x - viewLeft - layout.bleedMargin;\n          } else {\n            targetTextWidth = viewLeft + viewWidth - label.x - layout.bleedMargin;\n          }\n        }\n\n        layout.targetTextWidth = targetTextWidth;\n        constrainTextWidth(layout, targetTextWidth);\n      }\n    }\n\n    adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);\n    adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);\n\n    for (var i = 0; i < labelLayoutList.length; i++) {\n      var layout = labelLayoutList[i];\n\n      if (!isPositionCenter(layout) && layout.linePoints) {\n        var label = layout.label;\n        var linePoints = layout.linePoints;\n        var isAlignToEdge = layout.labelAlignTo === 'edge';\n        var padding = label.style.padding;\n        var paddingH = padding ? padding[1] + padding[3] : 0; // textRect.width already contains paddingH if bgColor is set\n\n        var extraPaddingH = label.style.backgroundColor ? 0 : paddingH;\n        var realTextWidth = layout.rect.width + extraPaddingH;\n        var dist = linePoints[1][0] - linePoints[2][0];\n\n        if (isAlignToEdge) {\n          if (label.x < cx) {\n            linePoints[2][0] = viewLeft + layout.edgeDistance + realTextWidth + layout.labelDistance;\n          } else {\n            linePoints[2][0] = viewLeft + viewWidth - layout.edgeDistance - realTextWidth - layout.labelDistance;\n          }\n        } else {\n          if (label.x < cx) {\n            linePoints[2][0] = label.x + layout.labelDistance;\n          } else {\n            linePoints[2][0] = label.x - layout.labelDistance;\n          }\n\n          linePoints[1][0] = linePoints[2][0] + dist;\n        }\n\n        linePoints[1][1] = linePoints[2][1] = label.y;\n      }\n    }\n  }\n  /**\n   * Set max width of each label, and then wrap each label to the max width.\n   *\n   * @param layout label layout\n   * @param availableWidth max width for the label to display\n   * @param forceRecalculate recaculate the text layout even if the current width\n   * is smaller than `availableWidth`. This is useful when the text was previously\n   * wrapped by calling `constrainTextWidth` but now `availableWidth` changed, in\n   * which case, previous wrapping should be redo.\n   */\n\n\n  function constrainTextWidth(layout, availableWidth, forceRecalculate) {\n    if (forceRecalculate === void 0) {\n      forceRecalculate = false;\n    }\n\n    if (layout.labelStyleWidth != null) {\n      // User-defined style.width has the highest priority.\n      return;\n    }\n\n    var label = layout.label;\n    var style = label.style;\n    var textRect = layout.rect;\n    var bgColor = style.backgroundColor;\n    var padding = style.padding;\n    var paddingH = padding ? padding[1] + padding[3] : 0;\n    var overflow = style.overflow; // textRect.width already contains paddingH if bgColor is set\n\n    var oldOuterWidth = textRect.width + (bgColor ? 0 : paddingH);\n\n    if (availableWidth < oldOuterWidth || forceRecalculate) {\n      var oldHeight = textRect.height;\n\n      if (overflow && overflow.match('break')) {\n        // Temporarily set background to be null to calculate\n        // the bounding box without backgroud.\n        label.setStyle('backgroundColor', null); // Set constraining width\n\n        label.setStyle('width', availableWidth - paddingH); // This is the real bounding box of the text without padding\n\n        var innerRect = label.getBoundingRect();\n        label.setStyle('width', Math.ceil(innerRect.width));\n        label.setStyle('backgroundColor', bgColor);\n      } else {\n        var availableInnerWidth = availableWidth - paddingH;\n        var newWidth = availableWidth < oldOuterWidth // Current text is too wide, use `availableWidth` as max width.\n        ? availableInnerWidth : // Current available width is enough, but the text may have\n        // already been wrapped with a smaller available width.\n        forceRecalculate ? availableInnerWidth > layout.unconstrainedWidth // Current available is larger than text width,\n        // so don't constrain width (otherwise it may have\n        // empty space in the background).\n        ? null // Current available is smaller than text width, so\n        // use the current available width as constraining\n        // width.\n        : availableInnerWidth : // Current available width is enough, so no need to\n        // constrain.\n        null;\n        label.setStyle('width', newWidth);\n      }\n\n      var newRect = label.getBoundingRect();\n      textRect.width = newRect.width;\n      var margin = (label.style.margin || 0) + 2.1;\n      textRect.height = newRect.height + margin;\n      textRect.y -= (textRect.height - oldHeight) / 2;\n    }\n  }\n\n  function isPositionCenter(sectorShape) {\n    // Not change x for center label\n    return sectorShape.position === 'center';\n  }\n\n  function pieLabelLayout(seriesModel) {\n    var data = seriesModel.getData();\n    var labelLayoutList = [];\n    var cx;\n    var cy;\n    var hasLabelRotate = false;\n    var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN$1;\n    var viewRect = data.getLayout('viewRect');\n    var r = data.getLayout('r');\n    var viewWidth = viewRect.width;\n    var viewLeft = viewRect.x;\n    var viewTop = viewRect.y;\n    var viewHeight = viewRect.height;\n\n    function setNotShow(el) {\n      el.ignore = true;\n    }\n\n    function isLabelShown(label) {\n      if (!label.ignore) {\n        return true;\n      }\n\n      for (var key in label.states) {\n        if (label.states[key].ignore === false) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    data.each(function (idx) {\n      var sector = data.getItemGraphicEl(idx);\n      var sectorShape = sector.shape;\n      var label = sector.getTextContent();\n      var labelLine = sector.getTextGuideLine();\n      var itemModel = data.getItemModel(idx);\n      var labelModel = itemModel.getModel('label'); // Use position in normal or emphasis\n\n      var labelPosition = labelModel.get('position') || itemModel.get(['emphasis', 'label', 'position']);\n      var labelDistance = labelModel.get('distanceToLabelLine');\n      var labelAlignTo = labelModel.get('alignTo');\n      var edgeDistance = parsePercent$1(labelModel.get('edgeDistance'), viewWidth);\n      var bleedMargin = labelModel.get('bleedMargin');\n      var labelLineModel = itemModel.getModel('labelLine');\n      var labelLineLen = labelLineModel.get('length');\n      labelLineLen = parsePercent$1(labelLineLen, viewWidth);\n      var labelLineLen2 = labelLineModel.get('length2');\n      labelLineLen2 = parsePercent$1(labelLineLen2, viewWidth);\n\n      if (Math.abs(sectorShape.endAngle - sectorShape.startAngle) < minShowLabelRadian) {\n        each(label.states, setNotShow);\n        label.ignore = true;\n        return;\n      }\n\n      if (!isLabelShown(label)) {\n        return;\n      }\n\n      var midAngle = (sectorShape.startAngle + sectorShape.endAngle) / 2;\n      var nx = Math.cos(midAngle);\n      var ny = Math.sin(midAngle);\n      var textX;\n      var textY;\n      var linePoints;\n      var textAlign;\n      cx = sectorShape.cx;\n      cy = sectorShape.cy;\n      var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n\n      if (labelPosition === 'center') {\n        textX = sectorShape.cx;\n        textY = sectorShape.cy;\n        textAlign = 'center';\n      } else {\n        var x1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * nx : sectorShape.r * nx) + cx;\n        var y1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * ny : sectorShape.r * ny) + cy;\n        textX = x1 + nx * 3;\n        textY = y1 + ny * 3;\n\n        if (!isLabelInside) {\n          // For roseType\n          var x2 = x1 + nx * (labelLineLen + r - sectorShape.r);\n          var y2 = y1 + ny * (labelLineLen + r - sectorShape.r);\n          var x3 = x2 + (nx < 0 ? -1 : 1) * labelLineLen2;\n          var y3 = y2;\n\n          if (labelAlignTo === 'edge') {\n            // Adjust textX because text align of edge is opposite\n            textX = nx < 0 ? viewLeft + edgeDistance : viewLeft + viewWidth - edgeDistance;\n          } else {\n            textX = x3 + (nx < 0 ? -labelDistance : labelDistance);\n          }\n\n          textY = y3;\n          linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n        }\n\n        textAlign = isLabelInside ? 'center' : labelAlignTo === 'edge' ? nx > 0 ? 'right' : 'left' : nx > 0 ? 'left' : 'right';\n      }\n\n      var PI = Math.PI;\n      var labelRotate = 0;\n      var rotate = labelModel.get('rotate');\n\n      if (isNumber(rotate)) {\n        labelRotate = rotate * (PI / 180);\n      } else if (labelPosition === 'center') {\n        labelRotate = 0;\n      } else if (rotate === 'radial' || rotate === true) {\n        var radialAngle = nx < 0 ? -midAngle + PI : -midAngle;\n        labelRotate = radialAngle;\n      } else if (rotate === 'tangential' && labelPosition !== 'outside' && labelPosition !== 'outer') {\n        var rad = Math.atan2(nx, ny);\n\n        if (rad < 0) {\n          rad = PI * 2 + rad;\n        }\n\n        var isDown = ny > 0;\n\n        if (isDown) {\n          rad = PI + rad;\n        }\n\n        labelRotate = rad - PI;\n      }\n\n      hasLabelRotate = !!labelRotate;\n      label.x = textX;\n      label.y = textY;\n      label.rotation = labelRotate;\n      label.setStyle({\n        verticalAlign: 'middle'\n      }); // Not sectorShape the inside label\n\n      if (!isLabelInside) {\n        var textRect = label.getBoundingRect().clone();\n        textRect.applyTransform(label.getComputedTransform()); // Text has a default 1px stroke. Exclude this.\n\n        var margin = (label.style.margin || 0) + 2.1;\n        textRect.y -= margin / 2;\n        textRect.height += margin;\n        labelLayoutList.push({\n          label: label,\n          labelLine: labelLine,\n          position: labelPosition,\n          len: labelLineLen,\n          len2: labelLineLen2,\n          minTurnAngle: labelLineModel.get('minTurnAngle'),\n          maxSurfaceAngle: labelLineModel.get('maxSurfaceAngle'),\n          surfaceNormal: new Point(nx, ny),\n          linePoints: linePoints,\n          textAlign: textAlign,\n          labelDistance: labelDistance,\n          labelAlignTo: labelAlignTo,\n          edgeDistance: edgeDistance,\n          bleedMargin: bleedMargin,\n          rect: textRect,\n          unconstrainedWidth: textRect.width,\n          labelStyleWidth: label.style.width\n        });\n      } else {\n        label.setStyle({\n          align: textAlign\n        });\n        var selectState = label.states.select;\n\n        if (selectState) {\n          selectState.x += label.x;\n          selectState.y += label.y;\n        }\n      }\n\n      sector.setTextConfig({\n        inside: isLabelInside\n      });\n    });\n\n    if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n      avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);\n    }\n\n    for (var i = 0; i < labelLayoutList.length; i++) {\n      var layout = labelLayoutList[i];\n      var label = layout.label;\n      var labelLine = layout.labelLine;\n      var notShowLabel = isNaN(label.x) || isNaN(label.y);\n\n      if (label) {\n        label.setStyle({\n          align: layout.textAlign\n        });\n\n        if (notShowLabel) {\n          each(label.states, setNotShow);\n          label.ignore = true;\n        }\n\n        var selectState = label.states.select;\n\n        if (selectState) {\n          selectState.x += label.x;\n          selectState.y += label.y;\n        }\n      }\n\n      if (labelLine) {\n        var linePoints = layout.linePoints;\n\n        if (notShowLabel || !linePoints) {\n          each(labelLine.states, setNotShow);\n          labelLine.ignore = true;\n        } else {\n          limitTurnAngle(linePoints, layout.minTurnAngle);\n          limitSurfaceAngle(linePoints, layout.surfaceNormal, layout.maxSurfaceAngle);\n          labelLine.setShape({\n            points: linePoints\n          }); // Set the anchor to the midpoint of sector\n\n          label.__hostTarget.textGuideLineConfig = {\n            anchor: new Point(linePoints[0][0], linePoints[0][1])\n          };\n        }\n      }\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function getSectorCornerRadius(model, shape, zeroIfNull) {\n    var cornerRadius = model.get('borderRadius');\n\n    if (cornerRadius == null) {\n      return zeroIfNull ? {\n        cornerRadius: 0\n      } : null;\n    }\n\n    if (!isArray(cornerRadius)) {\n      cornerRadius = [cornerRadius, cornerRadius, cornerRadius, cornerRadius];\n    }\n\n    var dr = Math.abs(shape.r || 0 - shape.r0 || 0);\n    return {\n      cornerRadius: map(cornerRadius, function (cr) {\n        return parsePercent(cr, dr);\n      })\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Piece of pie including Sector, Label, LabelLine\n   */\n\n\n  var PiePiece =\n  /** @class */\n  function (_super) {\n    __extends(PiePiece, _super);\n\n    function PiePiece(data, idx, startAngle) {\n      var _this = _super.call(this) || this;\n\n      _this.z2 = 2;\n      var text = new ZRText();\n\n      _this.setTextContent(text);\n\n      _this.updateData(data, idx, startAngle, true);\n\n      return _this;\n    }\n\n    PiePiece.prototype.updateData = function (data, idx, startAngle, firstCreate) {\n      var sector = this;\n      var seriesModel = data.hostModel;\n      var itemModel = data.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      var layout = data.getItemLayout(idx); // cornerRadius & innerCornerRadius doesn't exist in the item layout. Use `0` if null value is specified.\n      // see `setItemLayout` in `pieLayout.ts`.\n\n      var sectorShape = extend(getSectorCornerRadius(itemModel.getModel('itemStyle'), layout, true), layout); // Ignore NaN data.\n\n      if (isNaN(sectorShape.startAngle)) {\n        // Use NaN shape to avoid drawing shape.\n        sector.setShape(sectorShape);\n        return;\n      }\n\n      if (firstCreate) {\n        sector.setShape(sectorShape);\n        var animationType = seriesModel.getShallow('animationType');\n\n        if (seriesModel.ecModel.ssr) {\n          // Use scale animation in SSR mode(opacity?)\n          // Because CSS SVG animation doesn't support very customized shape animation.\n          initProps(sector, {\n            scaleX: 0,\n            scaleY: 0\n          }, seriesModel, {\n            dataIndex: idx,\n            isFrom: true\n          });\n          sector.originX = sectorShape.cx;\n          sector.originY = sectorShape.cy;\n        } else if (animationType === 'scale') {\n          sector.shape.r = layout.r0;\n          initProps(sector, {\n            shape: {\n              r: layout.r\n            }\n          }, seriesModel, idx);\n        } // Expansion\n        else {\n            if (startAngle != null) {\n              sector.setShape({\n                startAngle: startAngle,\n                endAngle: startAngle\n              });\n              initProps(sector, {\n                shape: {\n                  startAngle: layout.startAngle,\n                  endAngle: layout.endAngle\n                }\n              }, seriesModel, idx);\n            } else {\n              sector.shape.endAngle = layout.startAngle;\n              updateProps(sector, {\n                shape: {\n                  endAngle: layout.endAngle\n                }\n              }, seriesModel, idx);\n            }\n          }\n      } else {\n        saveOldStyle(sector); // Transition animation from the old shape\n\n        updateProps(sector, {\n          shape: sectorShape\n        }, seriesModel, idx);\n      }\n\n      sector.useStyle(data.getItemVisual(idx, 'style'));\n      setStatesStylesFromModel(sector, itemModel);\n      var midAngle = (layout.startAngle + layout.endAngle) / 2;\n      var offset = seriesModel.get('selectedOffset');\n      var dx = Math.cos(midAngle) * offset;\n      var dy = Math.sin(midAngle) * offset;\n      var cursorStyle = itemModel.getShallow('cursor');\n      cursorStyle && sector.attr('cursor', cursorStyle);\n\n      this._updateLabel(seriesModel, data, idx);\n\n      sector.ensureState('emphasis').shape = extend({\n        r: layout.r + (emphasisModel.get('scale') ? emphasisModel.get('scaleSize') || 0 : 0)\n      }, getSectorCornerRadius(emphasisModel.getModel('itemStyle'), layout));\n      extend(sector.ensureState('select'), {\n        x: dx,\n        y: dy,\n        shape: getSectorCornerRadius(itemModel.getModel(['select', 'itemStyle']), layout)\n      });\n      extend(sector.ensureState('blur'), {\n        shape: getSectorCornerRadius(itemModel.getModel(['blur', 'itemStyle']), layout)\n      });\n      var labelLine = sector.getTextGuideLine();\n      var labelText = sector.getTextContent();\n      labelLine && extend(labelLine.ensureState('select'), {\n        x: dx,\n        y: dy\n      }); // TODO: needs dx, dy in zrender?\n\n      extend(labelText.ensureState('select'), {\n        x: dx,\n        y: dy\n      });\n      toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n    };\n\n    PiePiece.prototype._updateLabel = function (seriesModel, data, idx) {\n      var sector = this;\n      var itemModel = data.getItemModel(idx);\n      var labelLineModel = itemModel.getModel('labelLine');\n      var style = data.getItemVisual(idx, 'style');\n      var visualColor = style && style.fill;\n      var visualOpacity = style && style.opacity;\n      setLabelStyle(sector, getLabelStatesModels(itemModel), {\n        labelFetcher: data.hostModel,\n        labelDataIndex: idx,\n        inheritColor: visualColor,\n        defaultOpacity: visualOpacity,\n        defaultText: seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx)\n      });\n      var labelText = sector.getTextContent(); // Set textConfig on sector.\n\n      sector.setTextConfig({\n        // reset position, rotation\n        position: null,\n        rotation: null\n      }); // Make sure update style on labelText after setLabelStyle.\n      // Because setLabelStyle will replace a new style on it.\n\n      labelText.attr({\n        z2: 10\n      });\n      var labelPosition = seriesModel.get(['label', 'position']);\n\n      if (labelPosition !== 'outside' && labelPosition !== 'outer') {\n        sector.removeTextGuideLine();\n      } else {\n        var polyline = this.getTextGuideLine();\n\n        if (!polyline) {\n          polyline = new Polyline();\n          this.setTextGuideLine(polyline);\n        } // Default use item visual color\n\n\n        setLabelLineStyle(this, getLabelLineStatesModels(itemModel), {\n          stroke: visualColor,\n          opacity: retrieve3(labelLineModel.get(['lineStyle', 'opacity']), visualOpacity, 1)\n        });\n      }\n    };\n\n    return PiePiece;\n  }(Sector); // Pie view\n\n\n  var PieView =\n  /** @class */\n  function (_super) {\n    __extends(PieView, _super);\n\n    function PieView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.ignoreLabelLineUpdate = true;\n      return _this;\n    }\n\n    PieView.prototype.render = function (seriesModel, ecModel, api, payload) {\n      var data = seriesModel.getData();\n      var oldData = this._data;\n      var group = this.group;\n      var startAngle; // First render\n\n      if (!oldData && data.count() > 0) {\n        var shape = data.getItemLayout(0);\n\n        for (var s = 1; isNaN(shape && shape.startAngle) && s < data.count(); ++s) {\n          shape = data.getItemLayout(s);\n        }\n\n        if (shape) {\n          startAngle = shape.startAngle;\n        }\n      } // remove empty-circle if it exists\n\n\n      if (this._emptyCircleSector) {\n        group.remove(this._emptyCircleSector);\n      } // when all data are filtered, show lightgray empty circle\n\n\n      if (data.count() === 0 && seriesModel.get('showEmptyCircle')) {\n        var sector = new Sector({\n          shape: getBasicPieLayout(seriesModel, api)\n        });\n        sector.useStyle(seriesModel.getModel('emptyCircleStyle').getItemStyle());\n        this._emptyCircleSector = sector;\n        group.add(sector);\n      }\n\n      data.diff(oldData).add(function (idx) {\n        var piePiece = new PiePiece(data, idx, startAngle);\n        data.setItemGraphicEl(idx, piePiece);\n        group.add(piePiece);\n      }).update(function (newIdx, oldIdx) {\n        var piePiece = oldData.getItemGraphicEl(oldIdx);\n        piePiece.updateData(data, newIdx, startAngle);\n        piePiece.off('click');\n        group.add(piePiece);\n        data.setItemGraphicEl(newIdx, piePiece);\n      }).remove(function (idx) {\n        var piePiece = oldData.getItemGraphicEl(idx);\n        removeElementWithFadeOut(piePiece, seriesModel, idx);\n      }).execute();\n      pieLabelLayout(seriesModel); // Always use initial animation.\n\n      if (seriesModel.get('animationTypeUpdate') !== 'expansion') {\n        this._data = data;\n      }\n    };\n\n    PieView.prototype.dispose = function () {};\n\n    PieView.prototype.containPoint = function (point, seriesModel) {\n      var data = seriesModel.getData();\n      var itemLayout = data.getItemLayout(0);\n\n      if (itemLayout) {\n        var dx = point[0] - itemLayout.cx;\n        var dy = point[1] - itemLayout.cy;\n        var radius = Math.sqrt(dx * dx + dy * dy);\n        return radius <= itemLayout.r && radius >= itemLayout.r0;\n      }\n    };\n\n    PieView.type = 'pie';\n    return PieView;\n  }(ChartView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * [Usage]:\n   * (1)\n   * createListSimply(seriesModel, ['value']);\n   * (2)\n   * createListSimply(seriesModel, {\n   *     coordDimensions: ['value'],\n   *     dimensionsCount: 5\n   * });\n   */\n\n\n  function createSeriesDataSimply(seriesModel, opt, nameList) {\n    opt = isArray(opt) && {\n      coordDimensions: opt\n    } || extend({\n      encodeDefine: seriesModel.getEncode()\n    }, opt);\n    var source = seriesModel.getSource();\n    var dimensions = prepareSeriesDataSchema(source, opt).dimensions;\n    var list = new SeriesData(dimensions, seriesModel);\n    list.initData(source, nameList);\n    return list;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * LegendVisualProvider is an bridge that pick encoded color from data and\n   * provide to the legend component.\n   */\n\n\n  var LegendVisualProvider =\n  /** @class */\n  function () {\n    function LegendVisualProvider( // Function to get data after filtered. It stores all the encoding info\n    getDataWithEncodedVisual, // Function to get raw data before filtered.\n    getRawData) {\n      this._getDataWithEncodedVisual = getDataWithEncodedVisual;\n      this._getRawData = getRawData;\n    }\n\n    LegendVisualProvider.prototype.getAllNames = function () {\n      var rawData = this._getRawData(); // We find the name from the raw data. In case it's filtered by the legend component.\n      // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n\n\n      return rawData.mapArray(rawData.getName);\n    };\n\n    LegendVisualProvider.prototype.containName = function (name) {\n      var rawData = this._getRawData();\n\n      return rawData.indexOfName(name) >= 0;\n    };\n\n    LegendVisualProvider.prototype.indexOfName = function (name) {\n      // Only get data when necessary.\n      // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n      // Invoking Series#getData immediately will throw an error.\n      var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n      return dataWithEncodedVisual.indexOfName(name);\n    };\n\n    LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\n      // Get encoded visual properties from final filtered data.\n      var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n      return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n    };\n\n    return LegendVisualProvider;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var PieSeriesModel =\n  /** @class */\n  function (_super) {\n    __extends(PieSeriesModel, _super);\n\n    function PieSeriesModel() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @overwrite\n     */\n\n\n    PieSeriesModel.prototype.init = function (option) {\n      _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\n      // Use a function instead of direct access because data reference may changed\n\n\n      this.legendVisualProvider = new LegendVisualProvider(bind(this.getData, this), bind(this.getRawData, this));\n\n      this._defaultLabelLine(option);\n    };\n    /**\n     * @overwrite\n     */\n\n\n    PieSeriesModel.prototype.mergeOption = function () {\n      _super.prototype.mergeOption.apply(this, arguments);\n    };\n    /**\n     * @overwrite\n     */\n\n\n    PieSeriesModel.prototype.getInitialData = function () {\n      return createSeriesDataSimply(this, {\n        coordDimensions: ['value'],\n        encodeDefaulter: curry(makeSeriesEncodeForNameBased, this)\n      });\n    };\n    /**\n     * @overwrite\n     */\n\n\n    PieSeriesModel.prototype.getDataParams = function (dataIndex) {\n      var data = this.getData();\n\n      var params = _super.prototype.getDataParams.call(this, dataIndex); // FIXME toFixed?\n\n\n      var valueList = [];\n      data.each(data.mapDimension('value'), function (value) {\n        valueList.push(value);\n      });\n      params.percent = getPercentWithPrecision(valueList, dataIndex, data.hostModel.get('percentPrecision'));\n      params.$vars.push('percent');\n      return params;\n    };\n\n    PieSeriesModel.prototype._defaultLabelLine = function (option) {\n      // Extend labelLine emphasis\n      defaultEmphasis(option, 'labelLine', ['show']);\n      var labelLineNormalOpt = option.labelLine;\n      var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n      labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n      labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n    };\n\n    PieSeriesModel.type = 'series.pie';\n    PieSeriesModel.defaultOption = {\n      // zlevel: 0,\n      z: 2,\n      legendHoverLink: true,\n      colorBy: 'data',\n      // 默认全局居中\n      center: ['50%', '50%'],\n      radius: [0, '75%'],\n      // 默认顺时针\n      clockwise: true,\n      startAngle: 90,\n      // 最小角度改为0\n      minAngle: 0,\n      // If the angle of a sector less than `minShowLabelAngle`,\n      // the label will not be displayed.\n      minShowLabelAngle: 0,\n      // 选中时扇区偏移量\n      selectedOffset: 10,\n      // 选择模式，默认关闭，可选single，multiple\n      // selectedMode: false,\n      // 南丁格尔玫瑰图模式，'radius'（半径） | 'area'（面积）\n      // roseType: null,\n      percentPrecision: 2,\n      // If still show when all data zero.\n      stillShowZeroSum: true,\n      // cursor: null,\n      left: 0,\n      top: 0,\n      right: 0,\n      bottom: 0,\n      width: null,\n      height: null,\n      label: {\n        // color: 'inherit',\n        // If rotate around circle\n        rotate: 0,\n        show: true,\n        overflow: 'truncate',\n        // 'outer', 'inside', 'center'\n        position: 'outer',\n        // 'none', 'labelLine', 'edge'. Works only when position is 'outer'\n        alignTo: 'none',\n        // Closest distance between label and chart edge.\n        // Works only position is 'outer' and alignTo is 'edge'.\n        edgeDistance: '25%',\n        // Works only position is 'outer' and alignTo is not 'edge'.\n        bleedMargin: 10,\n        // Distance between text and label line.\n        distanceToLabelLine: 5 // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n        // 默认使用全局文本样式，详见TEXTSTYLE\n        // distance: 当position为inner时有效，为label位置到圆心的距离与圆半径(环状图为内外半径和)的比例系数\n\n      },\n      // Enabled when label.normal.position is 'outer'\n      labelLine: {\n        show: true,\n        // 引导线两段中的第一段长度\n        length: 15,\n        // 引导线两段中的第二段长度\n        length2: 15,\n        smooth: false,\n        minTurnAngle: 90,\n        maxSurfaceAngle: 90,\n        lineStyle: {\n          // color: 各异,\n          width: 1,\n          type: 'solid'\n        }\n      },\n      itemStyle: {\n        borderWidth: 1,\n        borderJoin: 'round'\n      },\n      showEmptyCircle: true,\n      emptyCircleStyle: {\n        color: 'lightgray',\n        opacity: 1\n      },\n      labelLayout: {\n        // Hide the overlapped label.\n        hideOverlap: true\n      },\n      emphasis: {\n        scale: true,\n        scaleSize: 5\n      },\n      // If use strategy to avoid label overlapping\n      avoidLabelOverlap: true,\n      // Animation type. Valid values: expansion, scale\n      animationType: 'expansion',\n      animationDuration: 1000,\n      // Animation type when update. Valid values: transition, expansion\n      animationTypeUpdate: 'transition',\n      animationEasingUpdate: 'cubicInOut',\n      animationDurationUpdate: 500,\n      animationEasing: 'cubicInOut'\n    };\n    return PieSeriesModel;\n  }(SeriesModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function negativeDataFilter(seriesType) {\n    return {\n      seriesType: seriesType,\n      reset: function (seriesModel, ecModel) {\n        var data = seriesModel.getData();\n        data.filterSelf(function (idx) {\n          // handle negative value condition\n          var valueDim = data.mapDimension('value');\n          var curValue = data.get(valueDim, idx);\n\n          if (isNumber(curValue) && !isNaN(curValue) && curValue < 0) {\n            return false;\n          }\n\n          return true;\n        });\n      }\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$4(registers) {\n    registers.registerChartView(PieView);\n    registers.registerSeriesModel(PieSeriesModel);\n    createLegacyDataSelectAction('pie', registers.registerAction);\n    registers.registerLayout(curry(pieLayout, 'pie'));\n    registers.registerProcessor(dataFilter('pie'));\n    registers.registerProcessor(negativeDataFilter('pie'));\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  use(install$4);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var ScatterSeriesModel =\n  /** @class */\n  function (_super) {\n    __extends(ScatterSeriesModel, _super);\n\n    function ScatterSeriesModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = ScatterSeriesModel.type;\n      _this.hasSymbolVisual = true;\n      return _this;\n    }\n\n    ScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n      return createSeriesData(null, this, {\n        useEncodeDefaulter: true\n      });\n    };\n\n    ScatterSeriesModel.prototype.getProgressive = function () {\n      var progressive = this.option.progressive;\n\n      if (progressive == null) {\n        // PENDING\n        return this.option.large ? 5e3 : this.get('progressive');\n      }\n\n      return progressive;\n    };\n\n    ScatterSeriesModel.prototype.getProgressiveThreshold = function () {\n      var progressiveThreshold = this.option.progressiveThreshold;\n\n      if (progressiveThreshold == null) {\n        // PENDING\n        return this.option.large ? 1e4 : this.get('progressiveThreshold');\n      }\n\n      return progressiveThreshold;\n    };\n\n    ScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n      return selectors.point(data.getItemLayout(dataIndex));\n    };\n\n    ScatterSeriesModel.prototype.getZLevelKey = function () {\n      // Each progressive series has individual key.\n      return this.getData().count() > this.getProgressiveThreshold() ? this.id : '';\n    };\n\n    ScatterSeriesModel.type = 'series.scatter';\n    ScatterSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n    ScatterSeriesModel.defaultOption = {\n      coordinateSystem: 'cartesian2d',\n      // zlevel: 0,\n      z: 2,\n      legendHoverLink: true,\n      symbolSize: 10,\n      // symbolRotate: null,  // 图形旋转控制\n      large: false,\n      // Available when large is true\n      largeThreshold: 2000,\n      // cursor: null,\n      itemStyle: {\n        opacity: 0.8 // color: 各异\n\n      },\n      emphasis: {\n        scale: true\n      },\n      // If clip the overflow graphics\n      // Works on cartesian / polar series\n      clip: true,\n      select: {\n        itemStyle: {\n          borderColor: '#212121'\n        }\n      },\n      universalTransition: {\n        divideShape: 'clone'\n      } // progressive: null\n\n    };\n    return ScatterSeriesModel;\n  }(SeriesModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /* global Float32Array */\n  // TODO Batch by color\n\n\n  var BOOST_SIZE_THRESHOLD = 4;\n\n  var LargeSymbolPathShape =\n  /** @class */\n  function () {\n    function LargeSymbolPathShape() {}\n\n    return LargeSymbolPathShape;\n  }();\n\n  var LargeSymbolPath =\n  /** @class */\n  function (_super) {\n    __extends(LargeSymbolPath, _super);\n\n    function LargeSymbolPath(opts) {\n      var _this = _super.call(this, opts) || this;\n\n      _this._off = 0;\n      _this.hoverDataIdx = -1;\n      return _this;\n    }\n\n    LargeSymbolPath.prototype.getDefaultShape = function () {\n      return new LargeSymbolPathShape();\n    };\n\n    LargeSymbolPath.prototype.reset = function () {\n      this.notClear = false;\n      this._off = 0;\n    };\n\n    LargeSymbolPath.prototype.buildPath = function (path, shape) {\n      var points = shape.points;\n      var size = shape.size;\n      var symbolProxy = this.symbolProxy;\n      var symbolProxyShape = symbolProxy.shape;\n      var ctx = path.getContext ? path.getContext() : path;\n      var canBoost = ctx && size[0] < BOOST_SIZE_THRESHOLD;\n      var softClipShape = this.softClipShape;\n      var i; // Do draw in afterBrush.\n\n      if (canBoost) {\n        this._ctx = ctx;\n        return;\n      }\n\n      this._ctx = null;\n\n      for (i = this._off; i < points.length;) {\n        var x = points[i++];\n        var y = points[i++];\n\n        if (isNaN(x) || isNaN(y)) {\n          continue;\n        }\n\n        if (softClipShape && !softClipShape.contain(x, y)) {\n          continue;\n        }\n\n        symbolProxyShape.x = x - size[0] / 2;\n        symbolProxyShape.y = y - size[1] / 2;\n        symbolProxyShape.width = size[0];\n        symbolProxyShape.height = size[1];\n        symbolProxy.buildPath(path, symbolProxyShape, true);\n      }\n\n      if (this.incremental) {\n        this._off = i;\n        this.notClear = true;\n      }\n    };\n\n    LargeSymbolPath.prototype.afterBrush = function () {\n      var shape = this.shape;\n      var points = shape.points;\n      var size = shape.size;\n      var ctx = this._ctx;\n      var softClipShape = this.softClipShape;\n      var i;\n\n      if (!ctx) {\n        return;\n      } // PENDING If style or other canvas status changed?\n\n\n      for (i = this._off; i < points.length;) {\n        var x = points[i++];\n        var y = points[i++];\n\n        if (isNaN(x) || isNaN(y)) {\n          continue;\n        }\n\n        if (softClipShape && !softClipShape.contain(x, y)) {\n          continue;\n        } // fillRect is faster than building a rect path and draw.\n        // And it support light globalCompositeOperation.\n\n\n        ctx.fillRect(x - size[0] / 2, y - size[1] / 2, size[0], size[1]);\n      }\n\n      if (this.incremental) {\n        this._off = i;\n        this.notClear = true;\n      }\n    };\n\n    LargeSymbolPath.prototype.findDataIndex = function (x, y) {\n      // TODO ???\n      // Consider transform\n      var shape = this.shape;\n      var points = shape.points;\n      var size = shape.size;\n      var w = Math.max(size[0], 4);\n      var h = Math.max(size[1], 4); // Not consider transform\n      // Treat each element as a rect\n      // top down traverse\n\n      for (var idx = points.length / 2 - 1; idx >= 0; idx--) {\n        var i = idx * 2;\n        var x0 = points[i] - w / 2;\n        var y0 = points[i + 1] - h / 2;\n\n        if (x >= x0 && y >= y0 && x <= x0 + w && y <= y0 + h) {\n          return idx;\n        }\n      }\n\n      return -1;\n    };\n\n    LargeSymbolPath.prototype.contain = function (x, y) {\n      var localPos = this.transformCoordToLocal(x, y);\n      var rect = this.getBoundingRect();\n      x = localPos[0];\n      y = localPos[1];\n\n      if (rect.contain(x, y)) {\n        // Cache found data index.\n        var dataIdx = this.hoverDataIdx = this.findDataIndex(x, y);\n        return dataIdx >= 0;\n      }\n\n      this.hoverDataIdx = -1;\n      return false;\n    };\n\n    LargeSymbolPath.prototype.getBoundingRect = function () {\n      // Ignore stroke for large symbol draw.\n      var rect = this._rect;\n\n      if (!rect) {\n        var shape = this.shape;\n        var points = shape.points;\n        var size = shape.size;\n        var w = size[0];\n        var h = size[1];\n        var minX = Infinity;\n        var minY = Infinity;\n        var maxX = -Infinity;\n        var maxY = -Infinity;\n\n        for (var i = 0; i < points.length;) {\n          var x = points[i++];\n          var y = points[i++];\n          minX = Math.min(x, minX);\n          maxX = Math.max(x, maxX);\n          minY = Math.min(y, minY);\n          maxY = Math.max(y, maxY);\n        }\n\n        rect = this._rect = new BoundingRect(minX - w / 2, minY - h / 2, maxX - minX + w, maxY - minY + h);\n      }\n\n      return rect;\n    };\n\n    return LargeSymbolPath;\n  }(Path);\n\n  var LargeSymbolDraw =\n  /** @class */\n  function () {\n    function LargeSymbolDraw() {\n      this.group = new Group();\n    }\n    /**\n     * Update symbols draw by new data\n     */\n\n\n    LargeSymbolDraw.prototype.updateData = function (data, opt) {\n      this._clear();\n\n      var symbolEl = this._create();\n\n      symbolEl.setShape({\n        points: data.getLayout('points')\n      });\n\n      this._setCommon(symbolEl, data, opt);\n    };\n\n    LargeSymbolDraw.prototype.updateLayout = function (data) {\n      var points = data.getLayout('points');\n      this.group.eachChild(function (child) {\n        if (child.startIndex != null) {\n          var len = (child.endIndex - child.startIndex) * 2;\n          var byteOffset = child.startIndex * 4 * 2;\n          points = new Float32Array(points.buffer, byteOffset, len);\n        }\n\n        child.setShape('points', points); // Reset draw cursor.\n\n        child.reset();\n      });\n    };\n\n    LargeSymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n      this._clear();\n    };\n\n    LargeSymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n      var lastAdded = this._newAdded[0];\n      var points = data.getLayout('points');\n      var oldPoints = lastAdded && lastAdded.shape.points; // Merging the exists. Each element has 1e4 points.\n      // Consider the performance balance between too much elements and too much points in one shape(may affect hover optimization)\n\n      if (oldPoints && oldPoints.length < 2e4) {\n        var oldLen = oldPoints.length;\n        var newPoints = new Float32Array(oldLen + points.length); // Concat two array\n\n        newPoints.set(oldPoints);\n        newPoints.set(points, oldLen); // Update endIndex\n\n        lastAdded.endIndex = taskParams.end;\n        lastAdded.setShape({\n          points: newPoints\n        });\n      } else {\n        // Clear\n        this._newAdded = [];\n\n        var symbolEl = this._create();\n\n        symbolEl.startIndex = taskParams.start;\n        symbolEl.endIndex = taskParams.end;\n        symbolEl.incremental = true;\n        symbolEl.setShape({\n          points: points\n        });\n\n        this._setCommon(symbolEl, data, opt);\n      }\n    };\n\n    LargeSymbolDraw.prototype.eachRendered = function (cb) {\n      this._newAdded[0] && cb(this._newAdded[0]);\n    };\n\n    LargeSymbolDraw.prototype._create = function () {\n      var symbolEl = new LargeSymbolPath({\n        cursor: 'default'\n      });\n      this.group.add(symbolEl);\n\n      this._newAdded.push(symbolEl);\n\n      return symbolEl;\n    };\n\n    LargeSymbolDraw.prototype._setCommon = function (symbolEl, data, opt) {\n      var hostModel = data.hostModel;\n      opt = opt || {};\n      var size = data.getVisual('symbolSize');\n      symbolEl.setShape('size', size instanceof Array ? size : [size, size]);\n      symbolEl.softClipShape = opt.clipShape || null; // Create symbolProxy to build path for each data\n\n      symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0); // Use symbolProxy setColor method\n\n      symbolEl.setColor = symbolEl.symbolProxy.setColor;\n      var extrudeShadow = symbolEl.shape.size[0] < BOOST_SIZE_THRESHOLD;\n      symbolEl.useStyle( // Draw shadow when doing fillRect is extremely slow.\n      hostModel.getModel('itemStyle').getItemStyle(extrudeShadow ? ['color', 'shadowBlur', 'shadowColor'] : ['color']));\n      var globalStyle = data.getVisual('style');\n      var visualColor = globalStyle && globalStyle.fill;\n\n      if (visualColor) {\n        symbolEl.setColor(visualColor);\n      }\n\n      var ecData = getECData(symbolEl); // Enable tooltip\n      // PENDING May have performance issue when path is extremely large\n\n      ecData.seriesIndex = hostModel.seriesIndex;\n      symbolEl.on('mousemove', function (e) {\n        ecData.dataIndex = null;\n        var dataIndex = symbolEl.hoverDataIdx;\n\n        if (dataIndex >= 0) {\n          // Provide dataIndex for tooltip\n          ecData.dataIndex = dataIndex + (symbolEl.startIndex || 0);\n        }\n      });\n    };\n\n    LargeSymbolDraw.prototype.remove = function () {\n      this._clear();\n    };\n\n    LargeSymbolDraw.prototype._clear = function () {\n      this._newAdded = [];\n      this.group.removeAll();\n    };\n\n    return LargeSymbolDraw;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var ScatterView =\n  /** @class */\n  function (_super) {\n    __extends(ScatterView, _super);\n\n    function ScatterView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = ScatterView.type;\n      return _this;\n    }\n\n    ScatterView.prototype.render = function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n\n      var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n      symbolDraw.updateData(data, {\n        // TODO\n        // If this parameter should be a shape or a bounding volume\n        // shape will be more general.\n        // But bounding volume like bounding rect will be much faster in the contain calculation\n        clipShape: this._getClipShape(seriesModel)\n      });\n      this._finished = true;\n    };\n\n    ScatterView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n\n      var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n      symbolDraw.incrementalPrepareUpdate(data);\n      this._finished = false;\n    };\n\n    ScatterView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n      this._symbolDraw.incrementalUpdate(taskParams, seriesModel.getData(), {\n        clipShape: this._getClipShape(seriesModel)\n      });\n\n      this._finished = taskParams.end === seriesModel.getData().count();\n    };\n\n    ScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData(); // Must mark group dirty and make sure the incremental layer will be cleared\n      // PENDING\n\n      this.group.dirty();\n\n      if (!this._finished || data.count() > 1e4) {\n        return {\n          update: true\n        };\n      } else {\n        var res = pointsLayout('').reset(seriesModel, ecModel, api);\n\n        if (res.progress) {\n          res.progress({\n            start: 0,\n            end: data.count(),\n            count: data.count()\n          }, data);\n        }\n\n        this._symbolDraw.updateLayout(data);\n      }\n    };\n\n    ScatterView.prototype.eachRendered = function (cb) {\n      this._symbolDraw && this._symbolDraw.eachRendered(cb);\n    };\n\n    ScatterView.prototype._getClipShape = function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n      return seriesModel.get('clip', true) ? clipArea : null;\n    };\n\n    ScatterView.prototype._updateSymbolDraw = function (data, seriesModel) {\n      var symbolDraw = this._symbolDraw;\n      var pipelineContext = seriesModel.pipelineContext;\n      var isLargeDraw = pipelineContext.large;\n\n      if (!symbolDraw || isLargeDraw !== this._isLargeDraw) {\n        symbolDraw && symbolDraw.remove();\n        symbolDraw = this._symbolDraw = isLargeDraw ? new LargeSymbolDraw() : new SymbolDraw();\n        this._isLargeDraw = isLargeDraw;\n        this.group.removeAll();\n      }\n\n      this.group.add(symbolDraw.group);\n      return symbolDraw;\n    };\n\n    ScatterView.prototype.remove = function (ecModel, api) {\n      this._symbolDraw && this._symbolDraw.remove(true);\n      this._symbolDraw = null;\n    };\n\n    ScatterView.prototype.dispose = function () {};\n\n    ScatterView.type = 'scatter';\n    return ScatterView;\n  }(ChartView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var GridModel =\n  /** @class */\n  function (_super) {\n    __extends(GridModel, _super);\n\n    function GridModel() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    GridModel.type = 'grid';\n    GridModel.dependencies = ['xAxis', 'yAxis'];\n    GridModel.layoutMode = 'box';\n    GridModel.defaultOption = {\n      show: false,\n      // zlevel: 0,\n      z: 0,\n      left: '10%',\n      top: 60,\n      right: '10%',\n      bottom: 70,\n      // If grid size contain label\n      containLabel: false,\n      // width: {totalWidth} - left - right,\n      // height: {totalHeight} - top - bottom,\n      backgroundColor: 'rgba(0,0,0,0)',\n      borderWidth: 1,\n      borderColor: '#ccc'\n    };\n    return GridModel;\n  }(ComponentModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var CartesianAxisModel =\n  /** @class */\n  function (_super) {\n    __extends(CartesianAxisModel, _super);\n\n    function CartesianAxisModel() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    CartesianAxisModel.prototype.getCoordSysModel = function () {\n      return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n    };\n\n    CartesianAxisModel.type = 'cartesian2dAxis';\n    return CartesianAxisModel;\n  }(ComponentModel);\n\n  mixin(CartesianAxisModel, AxisModelCommonMixin);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var defaultOption = {\n    show: true,\n    // zlevel: 0,\n    z: 0,\n    // Inverse the axis.\n    inverse: false,\n    // Axis name displayed.\n    name: '',\n    // 'start' | 'middle' | 'end'\n    nameLocation: 'end',\n    // By degree. By default auto rotate by nameLocation.\n    nameRotate: null,\n    nameTruncate: {\n      maxWidth: null,\n      ellipsis: '...',\n      placeholder: '.'\n    },\n    // Use global text style by default.\n    nameTextStyle: {},\n    // The gap between axisName and axisLine.\n    nameGap: 15,\n    // Default `false` to support tooltip.\n    silent: false,\n    // Default `false` to avoid legacy user event listener fail.\n    triggerEvent: false,\n    tooltip: {\n      show: false\n    },\n    axisPointer: {},\n    axisLine: {\n      show: true,\n      onZero: true,\n      onZeroAxisIndex: null,\n      lineStyle: {\n        color: '#6E7079',\n        width: 1,\n        type: 'solid'\n      },\n      // The arrow at both ends the the axis.\n      symbol: ['none', 'none'],\n      symbolSize: [10, 15]\n    },\n    axisTick: {\n      show: true,\n      // Whether axisTick is inside the grid or outside the grid.\n      inside: false,\n      // The length of axisTick.\n      length: 5,\n      lineStyle: {\n        width: 1\n      }\n    },\n    axisLabel: {\n      show: true,\n      // Whether axisLabel is inside the grid or outside the grid.\n      inside: false,\n      rotate: 0,\n      // true | false | null/undefined (auto)\n      showMinLabel: null,\n      // true | false | null/undefined (auto)\n      showMaxLabel: null,\n      margin: 8,\n      // formatter: null,\n      fontSize: 12\n    },\n    splitLine: {\n      show: true,\n      lineStyle: {\n        color: ['#E0E6F1'],\n        width: 1,\n        type: 'solid'\n      }\n    },\n    splitArea: {\n      show: false,\n      areaStyle: {\n        color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\n      }\n    }\n  };\n  var categoryAxis = merge({\n    // The gap at both ends of the axis. For categoryAxis, boolean.\n    boundaryGap: true,\n    // Set false to faster category collection.\n    deduplication: null,\n    // splitArea: {\n    // show: false\n    // },\n    splitLine: {\n      show: false\n    },\n    axisTick: {\n      // If tick is align with label when boundaryGap is true\n      alignWithLabel: false,\n      interval: 'auto'\n    },\n    axisLabel: {\n      interval: 'auto'\n    }\n  }, defaultOption);\n  var valueAxis = merge({\n    boundaryGap: [0, 0],\n    axisLine: {\n      // Not shown when other axis is categoryAxis in cartesian\n      show: 'auto'\n    },\n    axisTick: {\n      // Not shown when other axis is categoryAxis in cartesian\n      show: 'auto'\n    },\n    // TODO\n    // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n    splitNumber: 5,\n    minorTick: {\n      // Minor tick, not available for cateogry axis.\n      show: false,\n      // Split number of minor ticks. The value should be in range of (0, 100)\n      splitNumber: 5,\n      // Lenght of minor tick\n      length: 3,\n      // Line style\n      lineStyle: {// Default to be same with axisTick\n      }\n    },\n    minorSplitLine: {\n      show: false,\n      lineStyle: {\n        color: '#F4F7FD',\n        width: 1\n      }\n    }\n  }, defaultOption);\n  var timeAxis = merge({\n    splitNumber: 6,\n    axisLabel: {\n      // To eliminate labels that are not nice\n      showMinLabel: false,\n      showMaxLabel: false,\n      rich: {\n        primary: {\n          fontWeight: 'bold'\n        }\n      }\n    },\n    splitLine: {\n      show: false\n    }\n  }, valueAxis);\n  var logAxis = defaults({\n    logBase: 10\n  }, valueAxis);\n  var axisDefault = {\n    category: categoryAxis,\n    value: valueAxis,\n    time: timeAxis,\n    log: logAxis\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var AXIS_TYPES = {\n    value: 1,\n    category: 1,\n    time: 1,\n    log: 1\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Generate sub axis model class\n   * @param axisName 'x' 'y' 'radius' 'angle' 'parallel' ...\n   */\n\n  function axisModelCreator(registers, axisName, BaseAxisModelClass, extraDefaultOption) {\n    each(AXIS_TYPES, function (v, axisType) {\n      var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\n\n      var AxisModel =\n      /** @class */\n      function (_super) {\n        __extends(AxisModel, _super);\n\n        function AxisModel() {\n          var _this = _super !== null && _super.apply(this, arguments) || this;\n\n          _this.type = axisName + 'Axis.' + axisType;\n          return _this;\n        }\n\n        AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n          var layoutMode = fetchLayoutMode(this);\n          var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n          var themeModel = ecModel.getTheme();\n          merge(option, themeModel.get(axisType + 'Axis'));\n          merge(option, this.getDefaultOption());\n          option.type = getAxisType(option);\n\n          if (layoutMode) {\n            mergeLayoutParam(option, inputPositionParams, layoutMode);\n          }\n        };\n\n        AxisModel.prototype.optionUpdated = function () {\n          var thisOption = this.option;\n\n          if (thisOption.type === 'category') {\n            this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n          }\n        };\n        /**\n         * Should not be called before all of 'getInitailData' finished.\n         * Because categories are collected during initializing data.\n         */\n\n\n        AxisModel.prototype.getCategories = function (rawData) {\n          var option = this.option; // FIXME\n          // warning if called before all of 'getInitailData' finished.\n\n          if (option.type === 'category') {\n            if (rawData) {\n              return option.data;\n            }\n\n            return this.__ordinalMeta.categories;\n          }\n        };\n\n        AxisModel.prototype.getOrdinalMeta = function () {\n          return this.__ordinalMeta;\n        };\n\n        AxisModel.type = axisName + 'Axis.' + axisType;\n        AxisModel.defaultOption = defaultOption;\n        return AxisModel;\n      }(BaseAxisModelClass);\n\n      registers.registerComponentModel(AxisModel);\n    });\n    registers.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\n  }\n\n  function getAxisType(option) {\n    // Default axis with data is category axis\n    return option.type || (option.data ? 'category' : 'value');\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var Cartesian =\n  /** @class */\n  function () {\n    function Cartesian(name) {\n      this.type = 'cartesian';\n      this._dimList = [];\n      this._axes = {};\n      this.name = name || '';\n    }\n\n    Cartesian.prototype.getAxis = function (dim) {\n      return this._axes[dim];\n    };\n\n    Cartesian.prototype.getAxes = function () {\n      return map(this._dimList, function (dim) {\n        return this._axes[dim];\n      }, this);\n    };\n\n    Cartesian.prototype.getAxesByScale = function (scaleType) {\n      scaleType = scaleType.toLowerCase();\n      return filter(this.getAxes(), function (axis) {\n        return axis.scale.type === scaleType;\n      });\n    };\n\n    Cartesian.prototype.addAxis = function (axis) {\n      var dim = axis.dim;\n      this._axes[dim] = axis;\n\n      this._dimList.push(dim);\n    };\n\n    return Cartesian;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var cartesian2DDimensions = ['x', 'y'];\n\n  function canCalculateAffineTransform(scale$$1) {\n    return scale$$1.type === 'interval' || scale$$1.type === 'time';\n  }\n\n  var Cartesian2D =\n  /** @class */\n  function (_super) {\n    __extends(Cartesian2D, _super);\n\n    function Cartesian2D() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = 'cartesian2d';\n      _this.dimensions = cartesian2DDimensions;\n      return _this;\n    }\n    /**\n     * Calculate an affine transform matrix if two axes are time or value.\n     * It's mainly for accelartion on the large time series data.\n     */\n\n\n    Cartesian2D.prototype.calcAffineTransform = function () {\n      this._transform = this._invTransform = null;\n      var xAxisScale = this.getAxis('x').scale;\n      var yAxisScale = this.getAxis('y').scale;\n\n      if (!canCalculateAffineTransform(xAxisScale) || !canCalculateAffineTransform(yAxisScale)) {\n        return;\n      }\n\n      var xScaleExtent = xAxisScale.getExtent();\n      var yScaleExtent = yAxisScale.getExtent();\n      var start = this.dataToPoint([xScaleExtent[0], yScaleExtent[0]]);\n      var end = this.dataToPoint([xScaleExtent[1], yScaleExtent[1]]);\n      var xScaleSpan = xScaleExtent[1] - xScaleExtent[0];\n      var yScaleSpan = yScaleExtent[1] - yScaleExtent[0];\n\n      if (!xScaleSpan || !yScaleSpan) {\n        return;\n      } // Accelerate data to point calculation on the special large time series data.\n\n\n      var scaleX = (end[0] - start[0]) / xScaleSpan;\n      var scaleY = (end[1] - start[1]) / yScaleSpan;\n      var translateX = start[0] - xScaleExtent[0] * scaleX;\n      var translateY = start[1] - yScaleExtent[0] * scaleY;\n      var m = this._transform = [scaleX, 0, 0, scaleY, translateX, translateY];\n      this._invTransform = invert([], m);\n    };\n    /**\n     * Base axis will be used on stacking.\n     */\n\n\n    Cartesian2D.prototype.getBaseAxis = function () {\n      return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n    };\n\n    Cartesian2D.prototype.containPoint = function (point) {\n      var axisX = this.getAxis('x');\n      var axisY = this.getAxis('y');\n      return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n    };\n\n    Cartesian2D.prototype.containData = function (data) {\n      return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n    };\n\n    Cartesian2D.prototype.containZone = function (data1, data2) {\n      var zoneDiag1 = this.dataToPoint(data1);\n      var zoneDiag2 = this.dataToPoint(data2);\n      var area = this.getArea();\n      var zone = new BoundingRect(zoneDiag1[0], zoneDiag1[1], zoneDiag2[0] - zoneDiag1[0], zoneDiag2[1] - zoneDiag1[1]);\n      return area.intersect(zone);\n    };\n\n    Cartesian2D.prototype.dataToPoint = function (data, clamp, out) {\n      out = out || [];\n      var xVal = data[0];\n      var yVal = data[1]; // Fast path\n\n      if (this._transform // It's supported that if data is like `[Inifity, 123]`, where only Y pixel calculated.\n      && xVal != null && isFinite(xVal) && yVal != null && isFinite(yVal)) {\n        return applyTransform(out, data, this._transform);\n      }\n\n      var xAxis = this.getAxis('x');\n      var yAxis = this.getAxis('y');\n      out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(xVal, clamp));\n      out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(yVal, clamp));\n      return out;\n    };\n\n    Cartesian2D.prototype.clampData = function (data, out) {\n      var xScale = this.getAxis('x').scale;\n      var yScale = this.getAxis('y').scale;\n      var xAxisExtent = xScale.getExtent();\n      var yAxisExtent = yScale.getExtent();\n      var x = xScale.parse(data[0]);\n      var y = yScale.parse(data[1]);\n      out = out || [];\n      out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n      out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n      return out;\n    };\n\n    Cartesian2D.prototype.pointToData = function (point, clamp) {\n      var out = [];\n\n      if (this._invTransform) {\n        return applyTransform(out, point, this._invTransform);\n      }\n\n      var xAxis = this.getAxis('x');\n      var yAxis = this.getAxis('y');\n      out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]), clamp);\n      out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]), clamp);\n      return out;\n    };\n\n    Cartesian2D.prototype.getOtherAxis = function (axis) {\n      return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n    };\n    /**\n     * Get rect area of cartesian.\n     * Area will have a contain function to determine if a point is in the coordinate system.\n     */\n\n\n    Cartesian2D.prototype.getArea = function () {\n      var xExtent = this.getAxis('x').getGlobalExtent();\n      var yExtent = this.getAxis('y').getGlobalExtent();\n      var x = Math.min(xExtent[0], xExtent[1]);\n      var y = Math.min(yExtent[0], yExtent[1]);\n      var width = Math.max(xExtent[0], xExtent[1]) - x;\n      var height = Math.max(yExtent[0], yExtent[1]) - y;\n      return new BoundingRect(x, y, width, height);\n    };\n\n    return Cartesian2D;\n  }(Cartesian);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var Axis2D =\n  /** @class */\n  function (_super) {\n    __extends(Axis2D, _super);\n\n    function Axis2D(dim, scale, coordExtent, axisType, position) {\n      var _this = _super.call(this, dim, scale, coordExtent) || this;\n      /**\n       * Index of axis, can be used as key\n       * Injected outside.\n       */\n\n\n      _this.index = 0;\n      _this.type = axisType || 'value';\n      _this.position = position || 'bottom';\n      return _this;\n    }\n\n    Axis2D.prototype.isHorizontal = function () {\n      var position = this.position;\n      return position === 'top' || position === 'bottom';\n    };\n    /**\n     * Each item cooresponds to this.getExtent(), which\n     * means globalExtent[0] may greater than globalExtent[1],\n     * unless `asc` is input.\n     *\n     * @param {boolean} [asc]\n     * @return {Array.<number>}\n     */\n\n\n    Axis2D.prototype.getGlobalExtent = function (asc) {\n      var ret = this.getExtent();\n      ret[0] = this.toGlobalCoord(ret[0]);\n      ret[1] = this.toGlobalCoord(ret[1]);\n      asc && ret[0] > ret[1] && ret.reverse();\n      return ret;\n    };\n\n    Axis2D.prototype.pointToData = function (point, clamp) {\n      return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n    };\n    /**\n     * Set ordinalSortInfo\n     * @param info new OrdinalSortInfo\n     */\n\n\n    Axis2D.prototype.setCategorySortInfo = function (info) {\n      if (this.type !== 'category') {\n        return false;\n      }\n\n      this.model.option.categorySortInfo = info;\n      this.scale.setSortInfo(info);\n    };\n\n    return Axis2D;\n  }(Axis);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Can only be called after coordinate system creation stage.\n   * (Can be called before coordinate system update stage).\n   */\n\n\n  function layout$1(gridModel, axisModel, opt) {\n    opt = opt || {};\n    var grid = gridModel.coordinateSystem;\n    var axis = axisModel.axis;\n    var layout = {};\n    var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n    var rawAxisPosition = axis.position;\n    var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n    var axisDim = axis.dim;\n    var rect = grid.getRect();\n    var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n    var idx = {\n      left: 0,\n      right: 1,\n      top: 0,\n      bottom: 1,\n      onZero: 2\n    };\n    var axisOffset = axisModel.get('offset') || 0;\n    var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n\n    if (otherAxisOnZeroOf) {\n      var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n      posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n    } // Axis position\n\n\n    layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]]; // Axis rotation\n\n    layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1); // Tick and label direction, x y is axisDim\n\n    var dirMap = {\n      top: -1,\n      bottom: 1,\n      left: -1,\n      right: 1\n    };\n    layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n    layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n\n    if (axisModel.get(['axisTick', 'inside'])) {\n      layout.tickDirection = -layout.tickDirection;\n    }\n\n    if (retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\n      layout.labelDirection = -layout.labelDirection;\n    } // Special label rotation\n\n\n    var labelRotate = axisModel.get(['axisLabel', 'rotate']);\n    layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate; // Over splitLine and splitArea\n\n    layout.z2 = 1;\n    return layout;\n  }\n\n  function isCartesian2DSeries(seriesModel) {\n    return seriesModel.get('coordinateSystem') === 'cartesian2d';\n  }\n\n  function findAxisModels(seriesModel) {\n    var axisModelMap = {\n      xAxisModel: null,\n      yAxisModel: null\n    };\n    each(axisModelMap, function (v, key) {\n      var axisType = key.replace(/Model$/, '');\n      var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n      {\n        if (!axisModel) {\n          throw new Error(axisType + ' \"' + retrieve3(seriesModel.get(axisType + 'Index'), seriesModel.get(axisType + 'Id'), 0) + '\" not found');\n        }\n      }\n      axisModelMap[key] = axisModel;\n    });\n    return axisModelMap;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var mathLog$1 = Math.log;\n\n  function alignScaleTicks(scale, axisModel, alignToScale) {\n    var intervalScaleProto = IntervalScale.prototype; // NOTE: There is a precondition for log scale  here:\n    // In log scale we store _interval and _extent of exponent value.\n    // So if we use the method of InternalScale to set/get these data.\n    // It process the exponent value, which is linear and what we want here.\n\n    var alignToTicks = intervalScaleProto.getTicks.call(alignToScale);\n    var alignToNicedTicks = intervalScaleProto.getTicks.call(alignToScale, true);\n    var alignToSplitNumber = alignToTicks.length - 1;\n    var alignToInterval = intervalScaleProto.getInterval.call(alignToScale);\n    var scaleExtent = getScaleExtent(scale, axisModel);\n    var rawExtent = scaleExtent.extent;\n    var isMinFixed = scaleExtent.fixMin;\n    var isMaxFixed = scaleExtent.fixMax;\n\n    if (scale.type === 'log') {\n      var logBase = mathLog$1(scale.base);\n      rawExtent = [mathLog$1(rawExtent[0]) / logBase, mathLog$1(rawExtent[1]) / logBase];\n    }\n\n    scale.setExtent(rawExtent[0], rawExtent[1]);\n    scale.calcNiceExtent({\n      splitNumber: alignToSplitNumber,\n      fixMin: isMinFixed,\n      fixMax: isMaxFixed\n    });\n    var extent = intervalScaleProto.getExtent.call(scale); // Need to update the rawExtent.\n    // Because value in rawExtent may be not parsed. e.g. 'dataMin', 'dataMax'\n\n    if (isMinFixed) {\n      rawExtent[0] = extent[0];\n    }\n\n    if (isMaxFixed) {\n      rawExtent[1] = extent[1];\n    }\n\n    var interval = intervalScaleProto.getInterval.call(scale);\n    var min = rawExtent[0];\n    var max = rawExtent[1];\n\n    if (isMinFixed && isMaxFixed) {\n      // User set min, max, divide to get new interval\n      interval = (max - min) / alignToSplitNumber;\n    } else if (isMinFixed) {\n      max = rawExtent[0] + interval * alignToSplitNumber; // User set min, expand extent on the other side\n\n      while (max < rawExtent[1] && isFinite(max) && isFinite(rawExtent[1])) {\n        interval = increaseInterval(interval);\n        max = rawExtent[0] + interval * alignToSplitNumber;\n      }\n    } else if (isMaxFixed) {\n      // User set max, expand extent on the other side\n      min = rawExtent[1] - interval * alignToSplitNumber;\n\n      while (min > rawExtent[0] && isFinite(min) && isFinite(rawExtent[0])) {\n        interval = increaseInterval(interval);\n        min = rawExtent[1] - interval * alignToSplitNumber;\n      }\n    } else {\n      var nicedSplitNumber = scale.getTicks().length - 1;\n\n      if (nicedSplitNumber > alignToSplitNumber) {\n        interval = increaseInterval(interval);\n      }\n\n      var range = interval * alignToSplitNumber;\n      max = Math.ceil(rawExtent[1] / interval) * interval;\n      min = round(max - range); // Not change the result that crossing zero.\n\n      if (min < 0 && rawExtent[0] >= 0) {\n        min = 0;\n        max = round(range);\n      } else if (max > 0 && rawExtent[1] <= 0) {\n        max = 0;\n        min = -round(range);\n      }\n    } // Adjust min, max based on the extent of alignTo. When min or max is set in alignTo scale\n\n\n    var t0 = (alignToTicks[0].value - alignToNicedTicks[0].value) / alignToInterval;\n    var t1 = (alignToTicks[alignToSplitNumber].value - alignToNicedTicks[alignToSplitNumber].value) / alignToInterval; // NOTE: Must in setExtent -> setInterval -> setNiceExtent order.\n\n    intervalScaleProto.setExtent.call(scale, min + interval * t0, max + interval * t1);\n    intervalScaleProto.setInterval.call(scale, interval);\n\n    if (t0 || t1) {\n      intervalScaleProto.setNiceExtent.call(scale, min + interval, max - interval);\n    }\n\n    {\n      var ticks = intervalScaleProto.getTicks.call(scale);\n\n      if (ticks[1] && (!isValueNice(interval) || getPrecisionSafe(ticks[1].value) > getPrecisionSafe(interval))) {\n        warn( // eslint-disable-next-line\n        \"The ticks may be not readable when set min: \" + axisModel.get('min') + \", max: \" + axisModel.get('max') + \" and alignTicks: true\");\n      }\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Grid is a region which contains at most 4 cartesian systems\n   *\n   * TODO Default cartesian\n   */\n\n\n  var Grid =\n  /** @class */\n  function () {\n    function Grid(gridModel, ecModel, api) {\n      // FIXME:TS where used (different from registered type 'cartesian2d')?\n      this.type = 'grid';\n      this._coordsMap = {};\n      this._coordsList = [];\n      this._axesMap = {};\n      this._axesList = [];\n      this.axisPointerEnabled = true;\n      this.dimensions = cartesian2DDimensions;\n\n      this._initCartesian(gridModel, ecModel, api);\n\n      this.model = gridModel;\n    }\n\n    Grid.prototype.getRect = function () {\n      return this._rect;\n    };\n\n    Grid.prototype.update = function (ecModel, api) {\n      var axesMap = this._axesMap;\n\n      this._updateScale(ecModel, this.model);\n\n      function updateAxisTicks(axes) {\n        var alignTo; // Axis is added in order of axisIndex.\n\n        var axesIndices = keys(axes);\n        var len = axesIndices.length;\n\n        if (!len) {\n          return;\n        }\n\n        var axisNeedsAlign = []; // Process once and calculate the ticks for those don't use alignTicks.\n\n        for (var i = len - 1; i >= 0; i--) {\n          var idx = +axesIndices[i]; // Convert to number.\n\n          var axis = axes[idx];\n          var model = axis.model;\n          var scale = axis.scale;\n\n          if ( // Only value and log axis without interval support alignTicks.\n          isIntervalOrLogScale(scale) && model.get('alignTicks') && model.get('interval') == null) {\n            axisNeedsAlign.push(axis);\n          } else {\n            niceScaleExtent(scale, model);\n\n            if (isIntervalOrLogScale(scale)) {\n              // Can only align to interval or log axis.\n              alignTo = axis;\n            }\n          }\n        } // All axes has set alignTicks. Pick the first one.\n        // PENDING. Should we find the axis that both set interval, min, max and align to this one?\n\n\n        if (axisNeedsAlign.length) {\n          if (!alignTo) {\n            alignTo = axisNeedsAlign.pop();\n            niceScaleExtent(alignTo.scale, alignTo.model);\n          }\n\n          each(axisNeedsAlign, function (axis) {\n            alignScaleTicks(axis.scale, axis.model, alignTo.scale);\n          });\n        }\n      }\n\n      updateAxisTicks(axesMap.x);\n      updateAxisTicks(axesMap.y); // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n\n      var onZeroRecords = {};\n      each(axesMap.x, function (xAxis) {\n        fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n      });\n      each(axesMap.y, function (yAxis) {\n        fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n      }); // Resize again if containLabel is enabled\n      // FIXME It may cause getting wrong grid size in data processing stage\n\n      this.resize(this.model, api);\n    };\n    /**\n     * Resize the grid\n     */\n\n\n    Grid.prototype.resize = function (gridModel, api, ignoreContainLabel) {\n      var boxLayoutParams = gridModel.getBoxLayoutParams();\n      var isContainLabel = !ignoreContainLabel && gridModel.get('containLabel');\n      var gridRect = getLayoutRect(boxLayoutParams, {\n        width: api.getWidth(),\n        height: api.getHeight()\n      });\n      this._rect = gridRect;\n      var axesList = this._axesList;\n      adjustAxes(); // Minus label size\n\n      if (isContainLabel) {\n        each(axesList, function (axis) {\n          if (!axis.model.get(['axisLabel', 'inside'])) {\n            var labelUnionRect = estimateLabelUnionRect(axis);\n\n            if (labelUnionRect) {\n              var dim = axis.isHorizontal() ? 'height' : 'width';\n              var margin = axis.model.get(['axisLabel', 'margin']);\n              gridRect[dim] -= labelUnionRect[dim] + margin;\n\n              if (axis.position === 'top') {\n                gridRect.y += labelUnionRect.height + margin;\n              } else if (axis.position === 'left') {\n                gridRect.x += labelUnionRect.width + margin;\n              }\n            }\n          }\n        });\n        adjustAxes();\n      }\n\n      each(this._coordsList, function (coord) {\n        // Calculate affine matrix to accelerate the data to point transform.\n        // If all the axes scales are time or value.\n        coord.calcAffineTransform();\n      });\n\n      function adjustAxes() {\n        each(axesList, function (axis) {\n          var isHorizontal = axis.isHorizontal();\n          var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n          var idx = axis.inverse ? 1 : 0;\n          axis.setExtent(extent[idx], extent[1 - idx]);\n          updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n        });\n      }\n    };\n\n    Grid.prototype.getAxis = function (dim, axisIndex) {\n      var axesMapOnDim = this._axesMap[dim];\n\n      if (axesMapOnDim != null) {\n        return axesMapOnDim[axisIndex || 0];\n      }\n    };\n\n    Grid.prototype.getAxes = function () {\n      return this._axesList.slice();\n    };\n\n    Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\n      if (xAxisIndex != null && yAxisIndex != null) {\n        var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n        return this._coordsMap[key];\n      }\n\n      if (isObject(xAxisIndex)) {\n        yAxisIndex = xAxisIndex.yAxisIndex;\n        xAxisIndex = xAxisIndex.xAxisIndex;\n      }\n\n      for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n        if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n          return coordList[i];\n        }\n      }\n    };\n\n    Grid.prototype.getCartesians = function () {\n      return this._coordsList.slice();\n    };\n    /**\n     * @implements\n     */\n\n\n    Grid.prototype.convertToPixel = function (ecModel, finder, value) {\n      var target = this._findConvertTarget(finder);\n\n      return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n    };\n    /**\n     * @implements\n     */\n\n\n    Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\n      var target = this._findConvertTarget(finder);\n\n      return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n    };\n\n    Grid.prototype._findConvertTarget = function (finder) {\n      var seriesModel = finder.seriesModel;\n      var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n      var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n      var gridModel = finder.gridModel;\n      var coordsList = this._coordsList;\n      var cartesian;\n      var axis;\n\n      if (seriesModel) {\n        cartesian = seriesModel.coordinateSystem;\n        indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n      } else if (xAxisModel && yAxisModel) {\n        cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n      } else if (xAxisModel) {\n        axis = this.getAxis('x', xAxisModel.componentIndex);\n      } else if (yAxisModel) {\n        axis = this.getAxis('y', yAxisModel.componentIndex);\n      } // Lowest priority.\n      else if (gridModel) {\n          var grid = gridModel.coordinateSystem;\n\n          if (grid === this) {\n            cartesian = this._coordsList[0];\n          }\n        }\n\n      return {\n        cartesian: cartesian,\n        axis: axis\n      };\n    };\n    /**\n     * @implements\n     */\n\n\n    Grid.prototype.containPoint = function (point) {\n      var coord = this._coordsList[0];\n\n      if (coord) {\n        return coord.containPoint(point);\n      }\n    };\n    /**\n     * Initialize cartesian coordinate systems\n     */\n\n\n    Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\n      var _this = this;\n\n      var grid = this;\n      var axisPositionUsed = {\n        left: false,\n        right: false,\n        top: false,\n        bottom: false\n      };\n      var axesMap = {\n        x: {},\n        y: {}\n      };\n      var axesCount = {\n        x: 0,\n        y: 0\n      }; /// Create axis\n\n      ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n      ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n      if (!axesCount.x || !axesCount.y) {\n        // Roll back when there no either x or y axis\n        this._axesMap = {};\n        this._axesList = [];\n        return;\n      }\n\n      this._axesMap = axesMap; /// Create cartesian2d\n\n      each(axesMap.x, function (xAxis, xAxisIndex) {\n        each(axesMap.y, function (yAxis, yAxisIndex) {\n          var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n          var cartesian = new Cartesian2D(key);\n          cartesian.master = _this;\n          cartesian.model = gridModel;\n          _this._coordsMap[key] = cartesian;\n\n          _this._coordsList.push(cartesian);\n\n          cartesian.addAxis(xAxis);\n          cartesian.addAxis(yAxis);\n        });\n      });\n\n      function createAxisCreator(dimName) {\n        return function (axisModel, idx) {\n          if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\n            return;\n          }\n\n          var axisPosition = axisModel.get('position');\n\n          if (dimName === 'x') {\n            // Fix position\n            if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n              // Default bottom of X\n              axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n            }\n          } else {\n            // Fix position\n            if (axisPosition !== 'left' && axisPosition !== 'right') {\n              // Default left of Y\n              axisPosition = axisPositionUsed.left ? 'right' : 'left';\n            }\n          }\n\n          axisPositionUsed[axisPosition] = true;\n          var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n          var isCategory = axis.type === 'category';\n          axis.onBand = isCategory && axisModel.get('boundaryGap');\n          axis.inverse = axisModel.get('inverse'); // Inject axis into axisModel\n\n          axisModel.axis = axis; // Inject axisModel into axis\n\n          axis.model = axisModel; // Inject grid info axis\n\n          axis.grid = grid; // Index of axis, can be used as key\n\n          axis.index = idx;\n\n          grid._axesList.push(axis);\n\n          axesMap[dimName][idx] = axis;\n          axesCount[dimName]++;\n        };\n      }\n    };\n    /**\n     * Update cartesian properties from series.\n     */\n\n\n    Grid.prototype._updateScale = function (ecModel, gridModel) {\n      // Reset scale\n      each(this._axesList, function (axis) {\n        axis.scale.setExtent(Infinity, -Infinity);\n\n        if (axis.type === 'category') {\n          var categorySortInfo = axis.model.get('categorySortInfo');\n          axis.scale.setSortInfo(categorySortInfo);\n        }\n      });\n      ecModel.eachSeries(function (seriesModel) {\n        if (isCartesian2DSeries(seriesModel)) {\n          var axesModelMap = findAxisModels(seriesModel);\n          var xAxisModel = axesModelMap.xAxisModel;\n          var yAxisModel = axesModelMap.yAxisModel;\n\n          if (!isAxisUsedInTheGrid(xAxisModel, gridModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\n            return;\n          }\n\n          var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n          var data = seriesModel.getData();\n          var xAxis = cartesian.getAxis('x');\n          var yAxis = cartesian.getAxis('y');\n          unionExtent(data, xAxis);\n          unionExtent(data, yAxis);\n        }\n      }, this);\n\n      function unionExtent(data, axis) {\n        each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\n          axis.scale.unionExtentFromData(data, dim);\n        });\n      }\n    };\n    /**\n     * @param dim 'x' or 'y' or 'auto' or null/undefined\n     */\n\n\n    Grid.prototype.getTooltipAxes = function (dim) {\n      var baseAxes = [];\n      var otherAxes = [];\n      each(this.getCartesians(), function (cartesian) {\n        var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n        var otherAxis = cartesian.getOtherAxis(baseAxis);\n        indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n        indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n      });\n      return {\n        baseAxes: baseAxes,\n        otherAxes: otherAxes\n      };\n    };\n\n    Grid.create = function (ecModel, api) {\n      var grids = [];\n      ecModel.eachComponent('grid', function (gridModel, idx) {\n        var grid = new Grid(gridModel, ecModel, api);\n        grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n        // should be performed in create stage.\n\n        grid.resize(gridModel, api, true);\n        gridModel.coordinateSystem = grid;\n        grids.push(grid);\n      }); // Inject the coordinateSystems into seriesModel\n\n      ecModel.eachSeries(function (seriesModel) {\n        if (!isCartesian2DSeries(seriesModel)) {\n          return;\n        }\n\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n        var gridModel = xAxisModel.getCoordSysModel();\n        {\n          if (!gridModel) {\n            throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\n          }\n\n          if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\n            throw new Error('xAxis and yAxis must use the same grid');\n          }\n        }\n        var grid = gridModel.coordinateSystem;\n        seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n      });\n      return grids;\n    }; // For deciding which dimensions to use when creating list data\n\n\n    Grid.dimensions = cartesian2DDimensions;\n    return Grid;\n  }();\n  /**\n   * Check if the axis is used in the specified grid.\n   */\n\n\n  function isAxisUsedInTheGrid(axisModel, gridModel) {\n    return axisModel.getCoordSysModel() === gridModel;\n  }\n\n  function fixAxisOnZero(axesMap, otherAxisDim, axis, // Key: see `getOnZeroRecordKey`\n  onZeroRecords) {\n    axis.getAxesOnZeroOf = function () {\n      // TODO: onZero of multiple axes.\n      return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n    }; // onZero can not be enabled in these two situations:\n    // 1. When any other axis is a category axis.\n    // 2. When no axis is cross 0 point.\n\n\n    var otherAxes = axesMap[otherAxisDim];\n    var otherAxisOnZeroOf;\n    var axisModel = axis.model;\n    var onZero = axisModel.get(['axisLine', 'onZero']);\n    var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\n\n    if (!onZero) {\n      return;\n    } // If target axis is specified.\n\n\n    if (onZeroAxisIndex != null) {\n      if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n        otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n      }\n    } else {\n      // Find the first available other axis.\n      for (var idx in otherAxes) {\n        if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx]) // Consider that two Y axes on one value axis,\n        // if both onZero, the two Y axes overlap.\n        && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n          otherAxisOnZeroOf = otherAxes[idx];\n          break;\n        }\n      }\n    }\n\n    if (otherAxisOnZeroOf) {\n      onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n    }\n\n    function getOnZeroRecordKey(axis) {\n      return axis.dim + '_' + axis.index;\n    }\n  }\n\n  function canOnZeroToAxis(axis) {\n    return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n  }\n\n  function updateAxisTransform(axis, coordBase) {\n    var axisExtent = axis.getExtent();\n    var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n    axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n      return coord + coordBase;\n    } : function (coord) {\n      return axisExtentSum - coord + coordBase;\n    };\n    axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n      return coord - coordBase;\n    } : function (coord) {\n      return axisExtentSum - coord + coordBase;\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var PI$4 = Math.PI;\n  /**\n   * A final axis is translated and rotated from a \"standard axis\".\n   * So opt.position and opt.rotation is required.\n   *\n   * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\n   * for example: (0, 0) ------------> (0, 50)\n   *\n   * nameDirection or tickDirection or labelDirection is 1 means tick\n   * or label is below the standard axis, whereas is -1 means above\n   * the standard axis. labelOffset means offset between label and axis,\n   * which is useful when 'onZero', where axisLabel is in the grid and\n   * label in outside grid.\n   *\n   * Tips: like always,\n   * positive rotation represents anticlockwise, and negative rotation\n   * represents clockwise.\n   * The direction of position coordinate is the same as the direction\n   * of screen coordinate.\n   *\n   * Do not need to consider axis 'inverse', which is auto processed by\n   * axis extent.\n   */\n\n  var AxisBuilder =\n  /** @class */\n  function () {\n    function AxisBuilder(axisModel, opt) {\n      this.group = new Group();\n      this.opt = opt;\n      this.axisModel = axisModel; // Default value\n\n      defaults(opt, {\n        labelOffset: 0,\n        nameDirection: 1,\n        tickDirection: 1,\n        labelDirection: 1,\n        silent: true,\n        handleAutoShown: function () {\n          return true;\n        }\n      }); // FIXME Not use a seperate text group?\n\n      var transformGroup = new Group({\n        x: opt.position[0],\n        y: opt.position[1],\n        rotation: opt.rotation\n      }); // this.group.add(transformGroup);\n      // this._transformGroup = transformGroup;\n\n      transformGroup.updateTransform();\n      this._transformGroup = transformGroup;\n    }\n\n    AxisBuilder.prototype.hasBuilder = function (name) {\n      return !!builders[name];\n    };\n\n    AxisBuilder.prototype.add = function (name) {\n      builders[name](this.opt, this.axisModel, this.group, this._transformGroup);\n    };\n\n    AxisBuilder.prototype.getGroup = function () {\n      return this.group;\n    };\n\n    AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n      var rotationDiff = remRadian(textRotation - axisRotation);\n      var textAlign;\n      var textVerticalAlign;\n\n      if (isRadianAroundZero(rotationDiff)) {\n        // Label is parallel with axis line.\n        textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n        textAlign = 'center';\n      } else if (isRadianAroundZero(rotationDiff - PI$4)) {\n        // Label is inverse parallel with axis line.\n        textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n        textAlign = 'center';\n      } else {\n        textVerticalAlign = 'middle';\n\n        if (rotationDiff > 0 && rotationDiff < PI$4) {\n          textAlign = direction > 0 ? 'right' : 'left';\n        } else {\n          textAlign = direction > 0 ? 'left' : 'right';\n        }\n      }\n\n      return {\n        rotation: rotationDiff,\n        textAlign: textAlign,\n        textVerticalAlign: textVerticalAlign\n      };\n    };\n\n    AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n      var eventData = {\n        componentType: axisModel.mainType,\n        componentIndex: axisModel.componentIndex\n      };\n      eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n      return eventData;\n    };\n\n    AxisBuilder.isLabelSilent = function (axisModel) {\n      var tooltipOpt = axisModel.get('tooltip');\n      return axisModel.get('silent') // Consider mouse cursor, add these restrictions.\n      || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n    };\n\n    return AxisBuilder;\n  }();\n\n  var builders = {\n    axisLine: function (opt, axisModel, group, transformGroup) {\n      var shown = axisModel.get(['axisLine', 'show']);\n\n      if (shown === 'auto' && opt.handleAutoShown) {\n        shown = opt.handleAutoShown('axisLine');\n      }\n\n      if (!shown) {\n        return;\n      }\n\n      var extent = axisModel.axis.getExtent();\n      var matrix = transformGroup.transform;\n      var pt1 = [extent[0], 0];\n      var pt2 = [extent[1], 0];\n\n      if (matrix) {\n        applyTransform(pt1, pt1, matrix);\n        applyTransform(pt2, pt2, matrix);\n      }\n\n      var lineStyle = extend({\n        lineCap: 'round'\n      }, axisModel.getModel(['axisLine', 'lineStyle']).getLineStyle());\n      var line = new Line({\n        // Id for animation\n        subPixelOptimize: true,\n        shape: {\n          x1: pt1[0],\n          y1: pt1[1],\n          x2: pt2[0],\n          y2: pt2[1]\n        },\n        style: lineStyle,\n        strokeContainThreshold: opt.strokeContainThreshold || 5,\n        silent: true,\n        z2: 1\n      });\n      line.anid = 'line';\n      group.add(line);\n      var arrows = axisModel.get(['axisLine', 'symbol']);\n\n      if (arrows != null) {\n        var arrowSize = axisModel.get(['axisLine', 'symbolSize']);\n\n        if (isString(arrows)) {\n          // Use the same arrow for start and end point\n          arrows = [arrows, arrows];\n        }\n\n        if (isString(arrowSize) || isNumber(arrowSize)) {\n          // Use the same size for width and height\n          arrowSize = [arrowSize, arrowSize];\n        }\n\n        var arrowOffset = normalizeSymbolOffset(axisModel.get(['axisLine', 'symbolOffset']) || 0, arrowSize);\n        var symbolWidth_1 = arrowSize[0];\n        var symbolHeight_1 = arrowSize[1];\n        each([{\n          rotate: opt.rotation + Math.PI / 2,\n          offset: arrowOffset[0],\n          r: 0\n        }, {\n          rotate: opt.rotation - Math.PI / 2,\n          offset: arrowOffset[1],\n          r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n        }], function (point, index) {\n          if (arrows[index] !== 'none' && arrows[index] != null) {\n            var symbol = createSymbol(arrows[index], -symbolWidth_1 / 2, -symbolHeight_1 / 2, symbolWidth_1, symbolHeight_1, lineStyle.stroke, true); // Calculate arrow position with offset\n\n            var r = point.r + point.offset;\n            symbol.attr({\n              rotation: point.rotate,\n              x: pt1[0] + r * Math.cos(opt.rotation),\n              y: pt1[1] - r * Math.sin(opt.rotation),\n              silent: true,\n              z2: 11\n            });\n            group.add(symbol);\n          }\n        });\n      }\n    },\n    axisTickLabel: function (opt, axisModel, group, transformGroup) {\n      var ticksEls = buildAxisMajorTicks(group, transformGroup, axisModel, opt);\n      var labelEls = buildAxisLabel(group, transformGroup, axisModel, opt);\n      fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\n      buildAxisMinorTicks(group, transformGroup, axisModel, opt.tickDirection); // This bit fixes the label overlap issue for the time chart.\n      // See https://github.com/apache/echarts/issues/14266 for more.\n\n      if (axisModel.get(['axisLabel', 'hideOverlap'])) {\n        var labelList = prepareLayoutList(map(labelEls, function (label) {\n          return {\n            label: label,\n            priority: label.z2,\n            defaultAttr: {\n              ignore: label.ignore\n            }\n          };\n        }));\n        hideOverlap(labelList);\n      }\n    },\n    axisName: function (opt, axisModel, group, transformGroup) {\n      var name = retrieve(opt.axisName, axisModel.get('name'));\n\n      if (!name) {\n        return;\n      }\n\n      var nameLocation = axisModel.get('nameLocation');\n      var nameDirection = opt.nameDirection;\n      var textStyleModel = axisModel.getModel('nameTextStyle');\n      var gap = axisModel.get('nameGap') || 0;\n      var extent = axisModel.axis.getExtent();\n      var gapSignal = extent[0] > extent[1] ? -1 : 1;\n      var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2, // Reuse labelOffset.\n      isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n      var labelLayout;\n      var nameRotation = axisModel.get('nameRotate');\n\n      if (nameRotation != null) {\n        nameRotation = nameRotation * PI$4 / 180; // To radian.\n      }\n\n      var axisNameAvailableWidth;\n\n      if (isNameLocationCenter(nameLocation)) {\n        labelLayout = AxisBuilder.innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, // Adapt to axis.\n        nameDirection);\n      } else {\n        labelLayout = endTextLayout(opt.rotation, nameLocation, nameRotation || 0, extent);\n        axisNameAvailableWidth = opt.axisNameAvailableWidth;\n\n        if (axisNameAvailableWidth != null) {\n          axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n          !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n        }\n      }\n\n      var textFont = textStyleModel.getFont();\n      var truncateOpt = axisModel.get('nameTruncate', true) || {};\n      var ellipsis = truncateOpt.ellipsis;\n      var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth);\n      var textEl = new ZRText({\n        x: pos[0],\n        y: pos[1],\n        rotation: labelLayout.rotation,\n        silent: AxisBuilder.isLabelSilent(axisModel),\n        style: createTextStyle(textStyleModel, {\n          text: name,\n          font: textFont,\n          overflow: 'truncate',\n          width: maxWidth,\n          ellipsis: ellipsis,\n          fill: textStyleModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']),\n          align: textStyleModel.get('align') || labelLayout.textAlign,\n          verticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n        }),\n        z2: 1\n      });\n      setTooltipConfig({\n        el: textEl,\n        componentModel: axisModel,\n        itemName: name\n      });\n      textEl.__fullText = name; // Id for animation\n\n      textEl.anid = 'name';\n\n      if (axisModel.get('triggerEvent')) {\n        var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n        eventData.targetType = 'axisName';\n        eventData.name = name;\n        getECData(textEl).eventData = eventData;\n      } // FIXME\n\n\n      transformGroup.add(textEl);\n      textEl.updateTransform();\n      group.add(textEl);\n      textEl.decomposeTransform();\n    }\n  };\n\n  function endTextLayout(rotation, textPosition, textRotate, extent) {\n    var rotationDiff = remRadian(textRotate - rotation);\n    var textAlign;\n    var textVerticalAlign;\n    var inverse = extent[0] > extent[1];\n    var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n\n    if (isRadianAroundZero(rotationDiff - PI$4 / 2)) {\n      textVerticalAlign = onLeft ? 'bottom' : 'top';\n      textAlign = 'center';\n    } else if (isRadianAroundZero(rotationDiff - PI$4 * 1.5)) {\n      textVerticalAlign = onLeft ? 'top' : 'bottom';\n      textAlign = 'center';\n    } else {\n      textVerticalAlign = 'middle';\n\n      if (rotationDiff < PI$4 * 1.5 && rotationDiff > PI$4 / 2) {\n        textAlign = onLeft ? 'left' : 'right';\n      } else {\n        textAlign = onLeft ? 'right' : 'left';\n      }\n    }\n\n    return {\n      rotation: rotationDiff,\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n  }\n\n  function fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n    if (shouldShowAllLabels(axisModel.axis)) {\n      return;\n    } // If min or max are user set, we need to check\n    // If the tick on min(max) are overlap on their neighbour tick\n    // If they are overlapped, we need to hide the min(max) tick label\n\n\n    var showMinLabel = axisModel.get(['axisLabel', 'showMinLabel']);\n    var showMaxLabel = axisModel.get(['axisLabel', 'showMaxLabel']); // FIXME\n    // Have not consider onBand yet, where tick els is more than label els.\n\n    labelEls = labelEls || [];\n    tickEls = tickEls || [];\n    var firstLabel = labelEls[0];\n    var nextLabel = labelEls[1];\n    var lastLabel = labelEls[labelEls.length - 1];\n    var prevLabel = labelEls[labelEls.length - 2];\n    var firstTick = tickEls[0];\n    var nextTick = tickEls[1];\n    var lastTick = tickEls[tickEls.length - 1];\n    var prevTick = tickEls[tickEls.length - 2];\n\n    if (showMinLabel === false) {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n      if (showMinLabel) {\n        ignoreEl(nextLabel);\n        ignoreEl(nextTick);\n      } else {\n        ignoreEl(firstLabel);\n        ignoreEl(firstTick);\n      }\n    }\n\n    if (showMaxLabel === false) {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n      if (showMaxLabel) {\n        ignoreEl(prevLabel);\n        ignoreEl(prevTick);\n      } else {\n        ignoreEl(lastLabel);\n        ignoreEl(lastTick);\n      }\n    }\n  }\n\n  function ignoreEl(el) {\n    el && (el.ignore = true);\n  }\n\n  function isTwoLabelOverlapped(current, next) {\n    // current and next has the same rotation.\n    var firstRect = current && current.getBoundingRect().clone();\n    var nextRect = next && next.getBoundingRect().clone();\n\n    if (!firstRect || !nextRect) {\n      return;\n    } // When checking intersect of two rotated labels, we use mRotationBack\n    // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n\n\n    var mRotationBack = identity([]);\n    rotate(mRotationBack, mRotationBack, -current.rotation);\n    firstRect.applyTransform(mul$1([], mRotationBack, current.getLocalTransform()));\n    nextRect.applyTransform(mul$1([], mRotationBack, next.getLocalTransform()));\n    return firstRect.intersect(nextRect);\n  }\n\n  function isNameLocationCenter(nameLocation) {\n    return nameLocation === 'middle' || nameLocation === 'center';\n  }\n\n  function createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, anidPrefix) {\n    var tickEls = [];\n    var pt1 = [];\n    var pt2 = [];\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = ticksCoords[i].coord;\n      pt1[0] = tickCoord;\n      pt1[1] = 0;\n      pt2[0] = tickCoord;\n      pt2[1] = tickEndCoord;\n\n      if (tickTransform) {\n        applyTransform(pt1, pt1, tickTransform);\n        applyTransform(pt2, pt2, tickTransform);\n      } // Tick line, Not use group transform to have better line draw\n\n\n      var tickEl = new Line({\n        subPixelOptimize: true,\n        shape: {\n          x1: pt1[0],\n          y1: pt1[1],\n          x2: pt2[0],\n          y2: pt2[1]\n        },\n        style: tickLineStyle,\n        z2: 2,\n        autoBatch: true,\n        silent: true\n      });\n      tickEl.anid = anidPrefix + '_' + ticksCoords[i].tickValue;\n      tickEls.push(tickEl);\n    }\n\n    return tickEls;\n  }\n\n  function buildAxisMajorTicks(group, transformGroup, axisModel, opt) {\n    var axis = axisModel.axis;\n    var tickModel = axisModel.getModel('axisTick');\n    var shown = tickModel.get('show');\n\n    if (shown === 'auto' && opt.handleAutoShown) {\n      shown = opt.handleAutoShown('axisTick');\n    }\n\n    if (!shown || axis.scale.isBlank()) {\n      return;\n    }\n\n    var lineStyleModel = tickModel.getModel('lineStyle');\n    var tickEndCoord = opt.tickDirection * tickModel.get('length');\n    var ticksCoords = axis.getTicksCoords();\n    var ticksEls = createTicks(ticksCoords, transformGroup.transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n      stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n    }), 'ticks');\n\n    for (var i = 0; i < ticksEls.length; i++) {\n      group.add(ticksEls[i]);\n    }\n\n    return ticksEls;\n  }\n\n  function buildAxisMinorTicks(group, transformGroup, axisModel, tickDirection) {\n    var axis = axisModel.axis;\n    var minorTickModel = axisModel.getModel('minorTick');\n\n    if (!minorTickModel.get('show') || axis.scale.isBlank()) {\n      return;\n    }\n\n    var minorTicksCoords = axis.getMinorTicksCoords();\n\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var lineStyleModel = minorTickModel.getModel('lineStyle');\n    var tickEndCoord = tickDirection * minorTickModel.get('length');\n    var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n      stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n    }));\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      var minorTicksEls = createTicks(minorTicksCoords[i], transformGroup.transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n\n      for (var k = 0; k < minorTicksEls.length; k++) {\n        group.add(minorTicksEls[k]);\n      }\n    }\n  }\n\n  function buildAxisLabel(group, transformGroup, axisModel, opt) {\n    var axis = axisModel.axis;\n    var show = retrieve(opt.axisLabelShow, axisModel.get(['axisLabel', 'show']));\n\n    if (!show || axis.scale.isBlank()) {\n      return;\n    }\n\n    var labelModel = axisModel.getModel('axisLabel');\n    var labelMargin = labelModel.get('margin');\n    var labels = axis.getViewLabels(); // Special label rotate.\n\n    var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI$4 / 180;\n    var labelLayout = AxisBuilder.innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n    var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n    var labelEls = [];\n    var silent = AxisBuilder.isLabelSilent(axisModel);\n    var triggerEvent = axisModel.get('triggerEvent');\n    each(labels, function (labelItem, index) {\n      var tickValue = axis.scale.type === 'ordinal' ? axis.scale.getRawOrdinalNumber(labelItem.tickValue) : labelItem.tickValue;\n      var formattedLabel = labelItem.formattedLabel;\n      var rawLabel = labelItem.rawLabel;\n      var itemLabelModel = labelModel;\n\n      if (rawCategoryData && rawCategoryData[tickValue]) {\n        var rawCategoryItem = rawCategoryData[tickValue];\n\n        if (isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\n          itemLabelModel = new Model(rawCategoryItem.textStyle, labelModel, axisModel.ecModel);\n        }\n      }\n\n      var textColor = itemLabelModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']);\n      var tickCoord = axis.dataToCoord(tickValue);\n      var textEl = new ZRText({\n        x: tickCoord,\n        y: opt.labelOffset + opt.labelDirection * labelMargin,\n        rotation: labelLayout.rotation,\n        silent: silent,\n        z2: 10 + (labelItem.level || 0),\n        style: createTextStyle(itemLabelModel, {\n          text: formattedLabel,\n          align: itemLabelModel.getShallow('align', true) || labelLayout.textAlign,\n          verticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign,\n          fill: isFunction(textColor) ? textColor( // (1) In category axis with data zoom, tick is not the original\n          // index of axis.data. So tick should not be exposed to user\n          // in category axis.\n          // (2) Compatible with previous version, which always use formatted label as\n          // input. But in interval scale the formatted label is like '223,445', which\n          // maked user repalce ','. So we modify it to return original val but remain\n          // it as 'string' to avoid error in replacing.\n          axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n        })\n      });\n      textEl.anid = 'label_' + tickValue; // Pack data for mouse event\n\n      if (triggerEvent) {\n        var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n        eventData.targetType = 'axisLabel';\n        eventData.value = rawLabel;\n        eventData.tickIndex = index;\n\n        if (axis.type === 'category') {\n          eventData.dataIndex = tickValue;\n        }\n\n        getECData(textEl).eventData = eventData;\n      } // FIXME\n\n\n      transformGroup.add(textEl);\n      textEl.updateTransform();\n      labelEls.push(textEl);\n      group.add(textEl);\n      textEl.decomposeTransform();\n    });\n    return labelEls;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // allAxesInfo should be updated when setOption performed.\n\n\n  function collect(ecModel, api) {\n    var result = {\n      /**\n       * key: makeKey(axis.model)\n       * value: {\n       *      axis,\n       *      coordSys,\n       *      axisPointerModel,\n       *      triggerTooltip,\n       *      involveSeries,\n       *      snap,\n       *      seriesModels,\n       *      seriesDataCount\n       * }\n       */\n      axesInfo: {},\n      seriesInvolved: false,\n\n      /**\n       * key: makeKey(coordSys.model)\n       * value: Object: key makeKey(axis.model), value: axisInfo\n       */\n      coordSysAxesInfo: {},\n      coordSysMap: {}\n    };\n    collectAxesInfo(result, ecModel, api); // Check seriesInvolved for performance, in case too many series in some chart.\n\n    result.seriesInvolved && collectSeriesInfo(result, ecModel);\n    return result;\n  }\n\n  function collectAxesInfo(result, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var globalAxisPointerModel = ecModel.getComponent('axisPointer'); // links can only be set on global.\n\n    var linksOption = globalAxisPointerModel.get('link', true) || [];\n    var linkGroups = []; // Collect axes info.\n\n    each(api.getCoordinateSystems(), function (coordSys) {\n      // Some coordinate system do not support axes, like geo.\n      if (!coordSys.axisPointerEnabled) {\n        return;\n      }\n\n      var coordSysKey = makeKey(coordSys.model);\n      var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n      result.coordSysMap[coordSysKey] = coordSys; // Set tooltip (like 'cross') is a convienent way to show axisPointer\n      // for user. So we enable seting tooltip on coordSys model.\n\n      var coordSysModel = coordSys.model;\n      var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n      each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null)); // If axis tooltip used, choose tooltip axis for each coordSys.\n      // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n\n      if (coordSys.getTooltipAxes && globalTooltipModel // If tooltip.showContent is set as false, tooltip will not\n      // show but axisPointer will show as normal.\n      && baseTooltipModel.get('show')) {\n        // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n        // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n        var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n        var cross = baseTooltipModel.get(['axisPointer', 'type']) === 'cross';\n        var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get(['axisPointer', 'axis']));\n\n        if (triggerAxis || cross) {\n          each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n        }\n\n        if (cross) {\n          each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n        }\n      } // fromTooltip: true | false | 'cross'\n      // triggerTooltip: true | false | null\n\n\n      function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n        var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n        var axisPointerShow = axisPointerModel.get('show');\n\n        if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n          return;\n        }\n\n        if (triggerTooltip == null) {\n          triggerTooltip = axisPointerModel.get('triggerTooltip');\n        }\n\n        axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n        var snap = axisPointerModel.get('snap');\n        var axisKey = makeKey(axis.model);\n        var involveSeries = triggerTooltip || snap || axis.type === 'category'; // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n\n        var axisInfo = result.axesInfo[axisKey] = {\n          key: axisKey,\n          axis: axis,\n          coordSys: coordSys,\n          axisPointerModel: axisPointerModel,\n          triggerTooltip: triggerTooltip,\n          involveSeries: involveSeries,\n          snap: snap,\n          useHandle: isHandleTrigger(axisPointerModel),\n          seriesModels: [],\n          linkGroup: null\n        };\n        axesInfoInCoordSys[axisKey] = axisInfo;\n        result.seriesInvolved = result.seriesInvolved || involveSeries;\n        var groupIndex = getLinkGroupIndex(linksOption, axis);\n\n        if (groupIndex != null) {\n          var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n            axesInfo: {}\n          });\n          linkGroup.axesInfo[axisKey] = axisInfo;\n          linkGroup.mapper = linksOption[groupIndex].mapper;\n          axisInfo.linkGroup = linkGroup;\n        }\n      }\n    });\n  }\n\n  function makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n    var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n    var fields = ['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'];\n    var volatileOption = {};\n    each(fields, function (field) {\n      volatileOption[field] = clone(tooltipAxisPointerModel.get(field));\n    }); // category axis do not auto snap, otherwise some tick that do not\n    // has value can not be hovered. value/time/log axis default snap if\n    // triggered from tooltip and trigger tooltip.\n\n    volatileOption.snap = axis.type !== 'category' && !!triggerTooltip; // Compatibel with previous behavior, tooltip axis do not show label by default.\n    // Only these properties can be overrided from tooltip to axisPointer.\n\n    if (tooltipAxisPointerModel.get('type') === 'cross') {\n      volatileOption.type = 'line';\n    }\n\n    var labelOption = volatileOption.label || (volatileOption.label = {}); // Follow the convention, do not show label when triggered by tooltip by default.\n\n    labelOption.show == null && (labelOption.show = false);\n\n    if (fromTooltip === 'cross') {\n      // When 'cross', both axes show labels.\n      var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get(['label', 'show']);\n      labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true; // If triggerTooltip, this is a base axis, which should better not use cross style\n      // (cross style is dashed by default)\n\n      if (!triggerTooltip) {\n        var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n        crossStyle && defaults(labelOption, crossStyle.textStyle);\n      }\n    }\n\n    return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n  }\n\n  function collectSeriesInfo(result, ecModel) {\n    // Prepare data for axis trigger\n    ecModel.eachSeries(function (seriesModel) {\n      // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n      var coordSys = seriesModel.coordinateSystem;\n      var seriesTooltipTrigger = seriesModel.get(['tooltip', 'trigger'], true);\n      var seriesTooltipShow = seriesModel.get(['tooltip', 'show'], true);\n\n      if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get(['axisPointer', 'show'], true) === false) {\n        return;\n      }\n\n      each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n        var axis = axisInfo.axis;\n\n        if (coordSys.getAxis(axis.dim) === axis) {\n          axisInfo.seriesModels.push(seriesModel);\n          axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n          axisInfo.seriesDataCount += seriesModel.getData().count();\n        }\n      });\n    });\n  }\n  /**\n   * For example:\n   * {\n   *     axisPointer: {\n   *         links: [{\n   *             xAxisIndex: [2, 4],\n   *             yAxisIndex: 'all'\n   *         }, {\n   *             xAxisId: ['a5', 'a7'],\n   *             xAxisName: 'xxx'\n   *         }]\n   *     }\n   * }\n   */\n\n\n  function getLinkGroupIndex(linksOption, axis) {\n    var axisModel = axis.model;\n    var dim = axis.dim;\n\n    for (var i = 0; i < linksOption.length; i++) {\n      var linkOption = linksOption[i] || {};\n\n      if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n        return i;\n      }\n    }\n  }\n\n  function checkPropInLink(linkPropValue, axisPropValue) {\n    return linkPropValue === 'all' || isArray(linkPropValue) && indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n  }\n\n  function fixValue(axisModel) {\n    var axisInfo = getAxisInfo(axisModel);\n\n    if (!axisInfo) {\n      return;\n    }\n\n    var axisPointerModel = axisInfo.axisPointerModel;\n    var scale = axisInfo.axis.scale;\n    var option = axisPointerModel.option;\n    var status = axisPointerModel.get('status');\n    var value = axisPointerModel.get('value'); // Parse init value for category and time axis.\n\n    if (value != null) {\n      value = scale.parse(value);\n    }\n\n    var useHandle = isHandleTrigger(axisPointerModel); // If `handle` used, `axisPointer` will always be displayed, so value\n    // and status should be initialized.\n\n    if (status == null) {\n      option.status = useHandle ? 'show' : 'hide';\n    }\n\n    var extent = scale.getExtent().slice();\n    extent[0] > extent[1] && extent.reverse();\n\n    if ( // Pick a value on axis when initializing.\n    value == null // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n    // where we should re-pick a value to keep `handle` displaying normally.\n    || value > extent[1]) {\n      // Make handle displayed on the end of the axis when init, which looks better.\n      value = extent[1];\n    }\n\n    if (value < extent[0]) {\n      value = extent[0];\n    }\n\n    option.value = value;\n\n    if (useHandle) {\n      option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n    }\n  }\n\n  function getAxisInfo(axisModel) {\n    var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n    return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n  }\n\n  function getAxisPointerModel(axisModel) {\n    var axisInfo = getAxisInfo(axisModel);\n    return axisInfo && axisInfo.axisPointerModel;\n  }\n\n  function isHandleTrigger(axisPointerModel) {\n    return !!axisPointerModel.get(['handle', 'show']);\n  }\n  /**\n   * @param {module:echarts/model/Model} model\n   * @return {string} unique key\n   */\n\n\n  function makeKey(model) {\n    return model.type + '||' + model.id;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var axisPointerClazz = {};\n  /**\n   * Base class of AxisView.\n   */\n\n  var AxisView =\n  /** @class */\n  function (_super) {\n    __extends(AxisView, _super);\n\n    function AxisView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = AxisView.type;\n      return _this;\n    }\n    /**\n     * @override\n     */\n\n\n    AxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n      // FIXME\n      // This process should proformed after coordinate systems updated\n      // (axis scale updated), and should be performed each time update.\n      // So put it here temporarily, although it is not appropriate to\n      // put a model-writing procedure in `view`.\n      this.axisPointerClass && fixValue(axisModel);\n\n      _super.prototype.render.apply(this, arguments);\n\n      this._doUpdateAxisPointerClass(axisModel, api, true);\n    };\n    /**\n     * Action handler.\n     */\n\n\n    AxisView.prototype.updateAxisPointer = function (axisModel, ecModel, api, payload) {\n      this._doUpdateAxisPointerClass(axisModel, api, false);\n    };\n    /**\n     * @override\n     */\n\n\n    AxisView.prototype.remove = function (ecModel, api) {\n      var axisPointer = this._axisPointer;\n      axisPointer && axisPointer.remove(api);\n    };\n    /**\n     * @override\n     */\n\n\n    AxisView.prototype.dispose = function (ecModel, api) {\n      this._disposeAxisPointer(api);\n\n      _super.prototype.dispose.apply(this, arguments);\n    };\n\n    AxisView.prototype._doUpdateAxisPointerClass = function (axisModel, api, forceRender) {\n      var Clazz = AxisView.getAxisPointerClass(this.axisPointerClass);\n\n      if (!Clazz) {\n        return;\n      }\n\n      var axisPointerModel = getAxisPointerModel(axisModel);\n      axisPointerModel ? (this._axisPointer || (this._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : this._disposeAxisPointer(api);\n    };\n\n    AxisView.prototype._disposeAxisPointer = function (api) {\n      this._axisPointer && this._axisPointer.dispose(api);\n      this._axisPointer = null;\n    };\n\n    AxisView.registerAxisPointerClass = function (type, clazz) {\n      {\n        if (axisPointerClazz[type]) {\n          throw new Error('axisPointer ' + type + ' exists');\n        }\n      }\n      axisPointerClazz[type] = clazz;\n    };\n\n    AxisView.getAxisPointerClass = function (type) {\n      return type && axisPointerClazz[type];\n    };\n\n    AxisView.type = 'axis';\n    return AxisView;\n  }(ComponentView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var inner$6 = makeInner();\n\n  function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    } // TODO: TYPE\n\n\n    var splitAreaModel = axisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitAreaModel,\n      clamp: true\n    });\n\n    if (!ticksCoords.length) {\n      return;\n    } // For Making appropriate splitArea animation, the color and anid\n    // should be corresponding to previous one if possible.\n\n\n    var areaColorsLen = areaColors.length;\n    var lastSplitAreaColors = inner$6(axisView).splitAreaColors;\n    var newSplitAreaColors = createHashMap();\n    var colorIndex = 0;\n\n    if (lastSplitAreaColors) {\n      for (var i = 0; i < ticksCoords.length; i++) {\n        var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n        if (cIndex != null) {\n          colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n          break;\n        }\n      }\n    }\n\n    var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n    var areaStyle = areaStyleModel.getAreaStyle();\n    areaColors = isArray(areaColors) ? areaColors : [areaColors];\n\n    for (var i = 1; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n      var x = void 0;\n      var y = void 0;\n      var width = void 0;\n      var height = void 0;\n\n      if (axis.isHorizontal()) {\n        x = prev;\n        y = gridRect.y;\n        width = tickCoord - x;\n        height = gridRect.height;\n        prev = x + width;\n      } else {\n        x = gridRect.x;\n        y = prev;\n        width = gridRect.width;\n        height = tickCoord - y;\n        prev = y + height;\n      }\n\n      var tickValue = ticksCoords[i - 1].tickValue;\n      tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n      axisGroup.add(new Rect({\n        anid: tickValue != null ? 'area_' + tickValue : null,\n        shape: {\n          x: x,\n          y: y,\n          width: width,\n          height: height\n        },\n        style: defaults({\n          fill: areaColors[colorIndex]\n        }, areaStyle),\n        autoBatch: true,\n        silent: true\n      }));\n      colorIndex = (colorIndex + 1) % areaColorsLen;\n    }\n\n    inner$6(axisView).splitAreaColors = newSplitAreaColors;\n  }\n\n  function rectCoordAxisHandleRemove(axisView) {\n    inner$6(axisView).splitAreaColors = null;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\n  var selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\n\n  var CartesianAxisView =\n  /** @class */\n  function (_super) {\n    __extends(CartesianAxisView, _super);\n\n    function CartesianAxisView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = CartesianAxisView.type;\n      _this.axisPointerClass = 'CartesianAxisPointer';\n      return _this;\n    }\n    /**\n     * @override\n     */\n\n\n    CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n      this.group.removeAll();\n      var oldAxisGroup = this._axisGroup;\n      this._axisGroup = new Group();\n      this.group.add(this._axisGroup);\n\n      if (!axisModel.get('show')) {\n        return;\n      }\n\n      var gridModel = axisModel.getCoordSysModel();\n      var layout = layout$1(gridModel, axisModel);\n      var axisBuilder = new AxisBuilder(axisModel, extend({\n        handleAutoShown: function (elementType) {\n          var cartesians = gridModel.coordinateSystem.getCartesians();\n\n          for (var i = 0; i < cartesians.length; i++) {\n            if (isIntervalOrLogScale(cartesians[i].getOtherAxis(axisModel.axis).scale)) {\n              // Still show axis tick or axisLine if other axis is value / log\n              return true;\n            }\n          } // Not show axisTick or axisLine if other axis is category / time\n\n\n          return false;\n        }\n      }, layout));\n      each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n      this._axisGroup.add(axisBuilder.getGroup());\n\n      each(selfBuilderAttrs, function (name) {\n        if (axisModel.get([name, 'show'])) {\n          axisElementBuilders[name](this, this._axisGroup, axisModel, gridModel);\n        }\n      }, this); // THIS is a special case for bar racing chart.\n      // Update the axis label from the natural initial layout to\n      // sorted layout should has no animation.\n\n      var isInitialSortFromBarRacing = payload && payload.type === 'changeAxisOrder' && payload.isInitSort;\n\n      if (!isInitialSortFromBarRacing) {\n        groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n      }\n\n      _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n    };\n\n    CartesianAxisView.prototype.remove = function () {\n      rectCoordAxisHandleRemove(this);\n    };\n\n    CartesianAxisView.type = 'cartesianAxis';\n    return CartesianAxisView;\n  }(AxisView);\n\n  var axisElementBuilders = {\n    splitLine: function (axisView, axisGroup, axisModel, gridModel) {\n      var axis = axisModel.axis;\n\n      if (axis.scale.isBlank()) {\n        return;\n      }\n\n      var splitLineModel = axisModel.getModel('splitLine');\n      var lineStyleModel = splitLineModel.getModel('lineStyle');\n      var lineColors = lineStyleModel.get('color');\n      lineColors = isArray(lineColors) ? lineColors : [lineColors];\n      var gridRect = gridModel.coordinateSystem.getRect();\n      var isHorizontal = axis.isHorizontal();\n      var lineCount = 0;\n      var ticksCoords = axis.getTicksCoords({\n        tickModel: splitLineModel\n      });\n      var p1 = [];\n      var p2 = [];\n      var lineStyle = lineStyleModel.getLineStyle();\n\n      for (var i = 0; i < ticksCoords.length; i++) {\n        var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n\n        var colorIndex = lineCount++ % lineColors.length;\n        var tickValue = ticksCoords[i].tickValue;\n        axisGroup.add(new Line({\n          anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n          subPixelOptimize: true,\n          autoBatch: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: defaults({\n            stroke: lineColors[colorIndex]\n          }, lineStyle),\n          silent: true\n        }));\n      }\n    },\n    minorSplitLine: function (axisView, axisGroup, axisModel, gridModel) {\n      var axis = axisModel.axis;\n      var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n      var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n      var gridRect = gridModel.coordinateSystem.getRect();\n      var isHorizontal = axis.isHorizontal();\n      var minorTicksCoords = axis.getMinorTicksCoords();\n\n      if (!minorTicksCoords.length) {\n        return;\n      }\n\n      var p1 = [];\n      var p2 = [];\n      var lineStyle = lineStyleModel.getLineStyle();\n\n      for (var i = 0; i < minorTicksCoords.length; i++) {\n        for (var k = 0; k < minorTicksCoords[i].length; k++) {\n          var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n\n          if (isHorizontal) {\n            p1[0] = tickCoord;\n            p1[1] = gridRect.y;\n            p2[0] = tickCoord;\n            p2[1] = gridRect.y + gridRect.height;\n          } else {\n            p1[0] = gridRect.x;\n            p1[1] = tickCoord;\n            p2[0] = gridRect.x + gridRect.width;\n            p2[1] = tickCoord;\n          }\n\n          axisGroup.add(new Line({\n            anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n            subPixelOptimize: true,\n            autoBatch: true,\n            shape: {\n              x1: p1[0],\n              y1: p1[1],\n              x2: p2[0],\n              y2: p2[1]\n            },\n            style: lineStyle,\n            silent: true\n          }));\n        }\n      }\n    },\n    splitArea: function (axisView, axisGroup, axisModel, gridModel) {\n      rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\n    }\n  };\n\n  var CartesianXAxisView =\n  /** @class */\n  function (_super) {\n    __extends(CartesianXAxisView, _super);\n\n    function CartesianXAxisView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = CartesianXAxisView.type;\n      return _this;\n    }\n\n    CartesianXAxisView.type = 'xAxis';\n    return CartesianXAxisView;\n  }(CartesianAxisView);\n\n  var CartesianYAxisView =\n  /** @class */\n  function (_super) {\n    __extends(CartesianYAxisView, _super);\n\n    function CartesianYAxisView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = CartesianXAxisView.type;\n      return _this;\n    }\n\n    CartesianYAxisView.type = 'yAxis';\n    return CartesianYAxisView;\n  }(CartesianAxisView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var GridView =\n  /** @class */\n  function (_super) {\n    __extends(GridView, _super);\n\n    function GridView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = 'grid';\n      return _this;\n    }\n\n    GridView.prototype.render = function (gridModel, ecModel) {\n      this.group.removeAll();\n\n      if (gridModel.get('show')) {\n        this.group.add(new Rect({\n          shape: gridModel.coordinateSystem.getRect(),\n          style: defaults({\n            fill: gridModel.get('backgroundColor')\n          }, gridModel.getItemStyle()),\n          silent: true,\n          z2: -1\n        }));\n      }\n    };\n\n    GridView.type = 'grid';\n    return GridView;\n  }(ComponentView);\n\n  var extraOption = {\n    // gridIndex: 0,\n    // gridId: '',\n    offset: 0\n  };\n\n  function install$6(registers) {\n    registers.registerComponentView(GridView);\n    registers.registerComponentModel(GridModel);\n    registers.registerCoordinateSystem('cartesian2d', Grid);\n    axisModelCreator(registers, 'x', CartesianAxisModel, extraOption);\n    axisModelCreator(registers, 'y', CartesianAxisModel, extraOption);\n    registers.registerComponentView(CartesianXAxisView);\n    registers.registerComponentView(CartesianYAxisView);\n    registers.registerPreprocessor(function (option) {\n      // Only create grid when need\n      if (option.xAxis && option.yAxis && !option.grid) {\n        option.grid = {};\n      }\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$5(registers) {\n    // In case developer forget to include grid component\n    use(install$6);\n    registers.registerSeriesModel(ScatterSeriesModel);\n    registers.registerChartView(ScatterView);\n    registers.registerLayout(pointsLayout('scatter'));\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  use(install$5);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  use(install$6);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var TitleModel =\n  /** @class */\n  function (_super) {\n    __extends(TitleModel, _super);\n\n    function TitleModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = TitleModel.type;\n      _this.layoutMode = {\n        type: 'box',\n        ignoreSize: true\n      };\n      return _this;\n    }\n\n    TitleModel.type = 'title';\n    TitleModel.defaultOption = {\n      // zlevel: 0,\n      z: 6,\n      show: true,\n      text: '',\n      target: 'blank',\n      subtext: '',\n      subtarget: 'blank',\n      left: 0,\n      top: 0,\n      backgroundColor: 'rgba(0,0,0,0)',\n      borderColor: '#ccc',\n      borderWidth: 0,\n      padding: 5,\n      itemGap: 10,\n      textStyle: {\n        fontSize: 18,\n        fontWeight: 'bold',\n        color: '#464646'\n      },\n      subtextStyle: {\n        fontSize: 12,\n        color: '#6E7079'\n      }\n    };\n    return TitleModel;\n  }(ComponentModel); // View\n\n\n  var TitleView =\n  /** @class */\n  function (_super) {\n    __extends(TitleView, _super);\n\n    function TitleView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = TitleView.type;\n      return _this;\n    }\n\n    TitleView.prototype.render = function (titleModel, ecModel, api) {\n      this.group.removeAll();\n\n      if (!titleModel.get('show')) {\n        return;\n      }\n\n      var group = this.group;\n      var textStyleModel = titleModel.getModel('textStyle');\n      var subtextStyleModel = titleModel.getModel('subtextStyle');\n      var textAlign = titleModel.get('textAlign');\n      var textVerticalAlign = retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n      var textEl = new ZRText({\n        style: createTextStyle(textStyleModel, {\n          text: titleModel.get('text'),\n          fill: textStyleModel.getTextColor()\n        }, {\n          disableBox: true\n        }),\n        z2: 10\n      });\n      var textRect = textEl.getBoundingRect();\n      var subText = titleModel.get('subtext');\n      var subTextEl = new ZRText({\n        style: createTextStyle(subtextStyleModel, {\n          text: subText,\n          fill: subtextStyleModel.getTextColor(),\n          y: textRect.height + titleModel.get('itemGap'),\n          verticalAlign: 'top'\n        }, {\n          disableBox: true\n        }),\n        z2: 10\n      });\n      var link = titleModel.get('link');\n      var sublink = titleModel.get('sublink');\n      var triggerEvent = titleModel.get('triggerEvent', true);\n      textEl.silent = !link && !triggerEvent;\n      subTextEl.silent = !sublink && !triggerEvent;\n\n      if (link) {\n        textEl.on('click', function () {\n          windowOpen(link, '_' + titleModel.get('target'));\n        });\n      }\n\n      if (sublink) {\n        subTextEl.on('click', function () {\n          windowOpen(sublink, '_' + titleModel.get('subtarget'));\n        });\n      }\n\n      getECData(textEl).eventData = getECData(subTextEl).eventData = triggerEvent ? {\n        componentType: 'title',\n        componentIndex: titleModel.componentIndex\n      } : null;\n      group.add(textEl);\n      subText && group.add(subTextEl); // If no subText, but add subTextEl, there will be an empty line.\n\n      var groupRect = group.getBoundingRect();\n      var layoutOption = titleModel.getBoxLayoutParams();\n      layoutOption.width = groupRect.width;\n      layoutOption.height = groupRect.height;\n      var layoutRect = getLayoutRect(layoutOption, {\n        width: api.getWidth(),\n        height: api.getHeight()\n      }, titleModel.get('padding')); // Adjust text align based on position\n\n      if (!textAlign) {\n        // Align left if title is on the left. center and right is same\n        textAlign = titleModel.get('left') || titleModel.get('right'); // @ts-ignore\n\n        if (textAlign === 'middle') {\n          textAlign = 'center';\n        } // Adjust layout by text align\n\n\n        if (textAlign === 'right') {\n          layoutRect.x += layoutRect.width;\n        } else if (textAlign === 'center') {\n          layoutRect.x += layoutRect.width / 2;\n        }\n      }\n\n      if (!textVerticalAlign) {\n        textVerticalAlign = titleModel.get('top') || titleModel.get('bottom'); // @ts-ignore\n\n        if (textVerticalAlign === 'center') {\n          textVerticalAlign = 'middle';\n        }\n\n        if (textVerticalAlign === 'bottom') {\n          layoutRect.y += layoutRect.height;\n        } else if (textVerticalAlign === 'middle') {\n          layoutRect.y += layoutRect.height / 2;\n        }\n\n        textVerticalAlign = textVerticalAlign || 'top';\n      }\n\n      group.x = layoutRect.x;\n      group.y = layoutRect.y;\n      group.markRedraw();\n      var alignStyle = {\n        align: textAlign,\n        verticalAlign: textVerticalAlign\n      };\n      textEl.setStyle(alignStyle);\n      subTextEl.setStyle(alignStyle); // Render background\n      // Get groupRect again because textAlign has been changed\n\n      groupRect = group.getBoundingRect();\n      var padding = layoutRect.margin;\n      var style = titleModel.getItemStyle(['color', 'opacity']);\n      style.fill = titleModel.get('backgroundColor');\n      var rect = new Rect({\n        shape: {\n          x: groupRect.x - padding[3],\n          y: groupRect.y - padding[0],\n          width: groupRect.width + padding[1] + padding[3],\n          height: groupRect.height + padding[0] + padding[2],\n          r: titleModel.get('borderRadius')\n        },\n        style: style,\n        subPixelOptimize: true,\n        silent: true\n      });\n      group.add(rect);\n    };\n\n    TitleView.type = 'title';\n    return TitleView;\n  }(ComponentView);\n\n  function install$7(registers) {\n    registers.registerComponentModel(TitleModel);\n    registers.registerComponentView(TitleView);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  use(install$7);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var getDefaultSelectorOptions = function (ecModel, type) {\n    if (type === 'all') {\n      return {\n        type: 'all',\n        title: ecModel.getLocaleModel().get(['legend', 'selector', 'all'])\n      };\n    } else if (type === 'inverse') {\n      return {\n        type: 'inverse',\n        title: ecModel.getLocaleModel().get(['legend', 'selector', 'inverse'])\n      };\n    }\n  };\n\n  var LegendModel =\n  /** @class */\n  function (_super) {\n    __extends(LegendModel, _super);\n\n    function LegendModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = LegendModel.type;\n      _this.layoutMode = {\n        type: 'box',\n        // legend.width/height are maxWidth/maxHeight actually,\n        // whereas realy width/height is calculated by its content.\n        // (Setting {left: 10, right: 10} does not make sense).\n        // So consider the case:\n        // `setOption({legend: {left: 10});`\n        // then `setOption({legend: {right: 10});`\n        // The previous `left` should be cleared by setting `ignoreSize`.\n        ignoreSize: true\n      };\n      return _this;\n    }\n\n    LegendModel.prototype.init = function (option, parentModel, ecModel) {\n      this.mergeDefaultAndTheme(option, ecModel);\n      option.selected = option.selected || {};\n\n      this._updateSelector(option);\n    };\n\n    LegendModel.prototype.mergeOption = function (option, ecModel) {\n      _super.prototype.mergeOption.call(this, option, ecModel);\n\n      this._updateSelector(option);\n    };\n\n    LegendModel.prototype._updateSelector = function (option) {\n      var selector = option.selector;\n      var ecModel = this.ecModel;\n\n      if (selector === true) {\n        selector = option.selector = ['all', 'inverse'];\n      }\n\n      if (isArray(selector)) {\n        each(selector, function (item, index) {\n          isString(item) && (item = {\n            type: item\n          });\n          selector[index] = merge(item, getDefaultSelectorOptions(ecModel, item.type));\n        });\n      }\n    };\n\n    LegendModel.prototype.optionUpdated = function () {\n      this._updateData(this.ecModel);\n\n      var legendData = this._data; // If selectedMode is single, try to select one\n\n      if (legendData[0] && this.get('selectedMode') === 'single') {\n        var hasSelected = false; // If has any selected in option.selected\n\n        for (var i = 0; i < legendData.length; i++) {\n          var name_1 = legendData[i].get('name');\n\n          if (this.isSelected(name_1)) {\n            // Force to unselect others\n            this.select(name_1);\n            hasSelected = true;\n            break;\n          }\n        } // Try select the first if selectedMode is single\n\n\n        !hasSelected && this.select(legendData[0].get('name'));\n      }\n    };\n\n    LegendModel.prototype._updateData = function (ecModel) {\n      var potentialData = [];\n      var availableNames = [];\n      ecModel.eachRawSeries(function (seriesModel) {\n        var seriesName = seriesModel.name;\n        availableNames.push(seriesName);\n        var isPotential;\n\n        if (seriesModel.legendVisualProvider) {\n          var provider = seriesModel.legendVisualProvider;\n          var names = provider.getAllNames();\n\n          if (!ecModel.isSeriesFiltered(seriesModel)) {\n            availableNames = availableNames.concat(names);\n          }\n\n          if (names.length) {\n            potentialData = potentialData.concat(names);\n          } else {\n            isPotential = true;\n          }\n        } else {\n          isPotential = true;\n        }\n\n        if (isPotential && isNameSpecified(seriesModel)) {\n          potentialData.push(seriesModel.name);\n        }\n      });\n      /**\n       * @type {Array.<string>}\n       * @private\n       */\n\n      this._availableNames = availableNames; // If legend.data not specified in option, use availableNames as data,\n      // which is convinient for user preparing option.\n\n      var rawData = this.get('data') || potentialData;\n      var legendData = map(rawData, function (dataItem) {\n        // Can be string or number\n        if (isString(dataItem) || isNumber(dataItem)) {\n          dataItem = {\n            name: dataItem\n          };\n        }\n\n        return new Model(dataItem, this, this.ecModel);\n      }, this);\n      /**\n       * @type {Array.<module:echarts/model/Model>}\n       * @private\n       */\n\n      this._data = legendData;\n    };\n\n    LegendModel.prototype.getData = function () {\n      return this._data;\n    };\n\n    LegendModel.prototype.select = function (name) {\n      var selected = this.option.selected;\n      var selectedMode = this.get('selectedMode');\n\n      if (selectedMode === 'single') {\n        var data = this._data;\n        each(data, function (dataItem) {\n          selected[dataItem.get('name')] = false;\n        });\n      }\n\n      selected[name] = true;\n    };\n\n    LegendModel.prototype.unSelect = function (name) {\n      if (this.get('selectedMode') !== 'single') {\n        this.option.selected[name] = false;\n      }\n    };\n\n    LegendModel.prototype.toggleSelected = function (name) {\n      var selected = this.option.selected; // Default is true\n\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n\n      this[selected[name] ? 'unSelect' : 'select'](name);\n    };\n\n    LegendModel.prototype.allSelect = function () {\n      var data = this._data;\n      var selected = this.option.selected;\n      each(data, function (dataItem) {\n        selected[dataItem.get('name', true)] = true;\n      });\n    };\n\n    LegendModel.prototype.inverseSelect = function () {\n      var data = this._data;\n      var selected = this.option.selected;\n      each(data, function (dataItem) {\n        var name = dataItem.get('name', true); // Initially, default value is true\n\n        if (!selected.hasOwnProperty(name)) {\n          selected[name] = true;\n        }\n\n        selected[name] = !selected[name];\n      });\n    };\n\n    LegendModel.prototype.isSelected = function (name) {\n      var selected = this.option.selected;\n      return !(selected.hasOwnProperty(name) && !selected[name]) && indexOf(this._availableNames, name) >= 0;\n    };\n\n    LegendModel.prototype.getOrient = function () {\n      return this.get('orient') === 'vertical' ? {\n        index: 1,\n        name: 'vertical'\n      } : {\n        index: 0,\n        name: 'horizontal'\n      };\n    };\n\n    LegendModel.type = 'legend.plain';\n    LegendModel.dependencies = ['series'];\n    LegendModel.defaultOption = {\n      // zlevel: 0,\n      z: 4,\n      show: true,\n      orient: 'horizontal',\n      left: 'center',\n      // right: 'center',\n      top: 0,\n      // bottom: null,\n      align: 'auto',\n      backgroundColor: 'rgba(0,0,0,0)',\n      borderColor: '#ccc',\n      borderRadius: 0,\n      borderWidth: 0,\n      padding: 5,\n      itemGap: 10,\n      itemWidth: 25,\n      itemHeight: 14,\n      symbolRotate: 'inherit',\n      symbolKeepAspect: true,\n      inactiveColor: '#ccc',\n      inactiveBorderColor: '#ccc',\n      inactiveBorderWidth: 'auto',\n      itemStyle: {\n        color: 'inherit',\n        opacity: 'inherit',\n        borderColor: 'inherit',\n        borderWidth: 'auto',\n        borderCap: 'inherit',\n        borderJoin: 'inherit',\n        borderDashOffset: 'inherit',\n        borderMiterLimit: 'inherit'\n      },\n      lineStyle: {\n        width: 'auto',\n        color: 'inherit',\n        inactiveColor: '#ccc',\n        inactiveWidth: 2,\n        opacity: 'inherit',\n        type: 'inherit',\n        cap: 'inherit',\n        join: 'inherit',\n        dashOffset: 'inherit',\n        miterLimit: 'inherit'\n      },\n      textStyle: {\n        color: '#333'\n      },\n      selectedMode: true,\n      selector: false,\n      selectorLabel: {\n        show: true,\n        borderRadius: 10,\n        padding: [3, 5, 3, 5],\n        fontSize: 12,\n        fontFamily: 'sans-serif',\n        color: '#666',\n        borderWidth: 1,\n        borderColor: '#666'\n      },\n      emphasis: {\n        selectorLabel: {\n          show: true,\n          color: '#eee',\n          backgroundColor: '#666'\n        }\n      },\n      selectorPosition: 'auto',\n      selectorItemGap: 7,\n      selectorButtonGap: 10,\n      tooltip: {\n        show: false\n      }\n    };\n    return LegendModel;\n  }(ComponentModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // @ts-nocheck\n\n  /**\n   * Layout list like component.\n   * It will box layout each items in group of component and then position the whole group in the viewport\n   * @param {module:zrender/group/Group} group\n   * @param {module:echarts/model/Component} componentModel\n   * @param {module:echarts/ExtensionAPI}\n   */\n\n\n  function layout$2(group, componentModel, api) {\n    var boxLayoutParams = componentModel.getBoxLayoutParams();\n    var padding = componentModel.get('padding');\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n    box(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n    positionElement(group, boxLayoutParams, viewportSize, padding);\n  }\n\n  function makeBackground(rect, componentModel) {\n    var padding = normalizeCssArray$1(componentModel.get('padding'));\n    var style = componentModel.getItemStyle(['color', 'opacity']);\n    style.fill = componentModel.get('backgroundColor');\n    rect = new Rect({\n      shape: {\n        x: rect.x - padding[3],\n        y: rect.y - padding[0],\n        width: rect.width + padding[1] + padding[3],\n        height: rect.height + padding[0] + padding[2],\n        r: componentModel.get('borderRadius')\n      },\n      style: style,\n      silent: true,\n      z2: -1\n    }); // FIXME\n    // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n    // and background rect when setting like `left: 0`, `top: 0`.\n    // graphic.subPixelOptimizeRect(rect);\n\n    return rect;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var curry$1 = curry;\n  var each$3 = each;\n  var Group$2 = Group;\n\n  var LegendView =\n  /** @class */\n  function (_super) {\n    __extends(LegendView, _super);\n\n    function LegendView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = LegendView.type;\n      _this.newlineDisabled = false;\n      return _this;\n    }\n\n    LegendView.prototype.init = function () {\n      this.group.add(this._contentGroup = new Group$2());\n      this.group.add(this._selectorGroup = new Group$2());\n      this._isFirstRender = true;\n    };\n    /**\n     * @protected\n     */\n\n\n    LegendView.prototype.getContentGroup = function () {\n      return this._contentGroup;\n    };\n    /**\n     * @protected\n     */\n\n\n    LegendView.prototype.getSelectorGroup = function () {\n      return this._selectorGroup;\n    };\n    /**\n     * @override\n     */\n\n\n    LegendView.prototype.render = function (legendModel, ecModel, api) {\n      var isFirstRender = this._isFirstRender;\n      this._isFirstRender = false;\n      this.resetInner();\n\n      if (!legendModel.get('show', true)) {\n        return;\n      }\n\n      var itemAlign = legendModel.get('align');\n      var orient = legendModel.get('orient');\n\n      if (!itemAlign || itemAlign === 'auto') {\n        itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n      } // selector has been normalized to an array in model\n\n\n      var selector = legendModel.get('selector', true);\n      var selectorPosition = legendModel.get('selectorPosition', true);\n\n      if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n        selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n      }\n\n      this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition); // Perform layout.\n\n      var positionInfo = legendModel.getBoxLayoutParams();\n      var viewportSize = {\n        width: api.getWidth(),\n        height: api.getHeight()\n      };\n      var padding = legendModel.get('padding');\n      var maxSize = getLayoutRect(positionInfo, viewportSize, padding);\n      var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition); // Place mainGroup, based on the calculated `mainRect`.\n\n      var layoutRect = getLayoutRect(defaults({\n        width: mainRect.width,\n        height: mainRect.height\n      }, positionInfo), viewportSize, padding);\n      this.group.x = layoutRect.x - mainRect.x;\n      this.group.y = layoutRect.y - mainRect.y;\n      this.group.markRedraw(); // Render background after group is layout.\n\n      this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n    };\n\n    LegendView.prototype.resetInner = function () {\n      this.getContentGroup().removeAll();\n      this._backgroundEl && this.group.remove(this._backgroundEl);\n      this.getSelectorGroup().removeAll();\n    };\n\n    LegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n      var contentGroup = this.getContentGroup();\n      var legendDrawnMap = createHashMap();\n      var selectMode = legendModel.get('selectedMode');\n      var excludeSeriesId = [];\n      ecModel.eachRawSeries(function (seriesModel) {\n        !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n      });\n      each$3(legendModel.getData(), function (legendItemModel, dataIndex) {\n        var name = legendItemModel.get('name'); // Use empty string or \\n as a newline string\n\n        if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n          var g = new Group$2(); // @ts-ignore\n\n          g.newline = true;\n          contentGroup.add(g);\n          return;\n        } // Representitive series.\n\n\n        var seriesModel = ecModel.getSeriesByName(name)[0];\n\n        if (legendDrawnMap.get(name)) {\n          // Have been drawed\n          return;\n        } // Legend to control series.\n\n\n        if (seriesModel) {\n          var data = seriesModel.getData();\n          var lineVisualStyle = data.getVisual('legendLineStyle') || {};\n          var legendIcon = data.getVisual('legendIcon');\n          /**\n           * `data.getVisual('style')` may be the color from the register\n           * in series. For example, for line series,\n           */\n\n          var style = data.getVisual('style');\n\n          var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, style, legendIcon, selectMode, api);\n\n          itemGroup.on('click', curry$1(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry$1(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry$1(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n          legendDrawnMap.set(name, true);\n        } else {\n          // Legend to control data. In pie and funnel.\n          ecModel.eachRawSeries(function (seriesModel) {\n            // In case multiple series has same data name\n            if (legendDrawnMap.get(name)) {\n              return;\n            }\n\n            if (seriesModel.legendVisualProvider) {\n              var provider = seriesModel.legendVisualProvider;\n\n              if (!provider.containName(name)) {\n                return;\n              }\n\n              var idx = provider.indexOfName(name);\n              var style = provider.getItemVisual(idx, 'style');\n              var legendIcon = provider.getItemVisual(idx, 'legendIcon');\n              var colorArr = parse(style.fill); // Color may be set to transparent in visualMap when data is out of range.\n              // Do not show nothing.\n\n              if (colorArr && colorArr[3] === 0) {\n                colorArr[3] = 0.2; // TODO color is set to 0, 0, 0, 0. Should show correct RGBA\n\n                style = extend(extend({}, style), {\n                  fill: stringify(colorArr, 'rgba')\n                });\n              }\n\n              var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, {}, style, legendIcon, selectMode, api); // FIXME: consider different series has items with the same name.\n\n\n              itemGroup.on('click', curry$1(dispatchSelectAction, null, name, api, excludeSeriesId)) // Should not specify the series name, consider legend controls\n              // more than one pie series.\n              .on('mouseover', curry$1(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry$1(dispatchDownplayAction, null, name, api, excludeSeriesId));\n              legendDrawnMap.set(name, true);\n            }\n          }, this);\n        }\n\n        {\n          if (!legendDrawnMap.get(name)) {\n            console.warn(name + ' series not exists. Legend data should be same with series name or data name.');\n          }\n        }\n      }, this);\n\n      if (selector) {\n        this._createSelector(selector, legendModel, api, orient, selectorPosition);\n      }\n    };\n\n    LegendView.prototype._createSelector = function (selector, legendModel, api, orient, selectorPosition) {\n      var selectorGroup = this.getSelectorGroup();\n      each$3(selector, function createSelectorButton(selectorItem) {\n        var type = selectorItem.type;\n        var labelText = new ZRText({\n          style: {\n            x: 0,\n            y: 0,\n            align: 'center',\n            verticalAlign: 'middle'\n          },\n          onclick: function () {\n            api.dispatchAction({\n              type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\n            });\n          }\n        });\n        selectorGroup.add(labelText);\n        var labelModel = legendModel.getModel('selectorLabel');\n        var emphasisLabelModel = legendModel.getModel(['emphasis', 'selectorLabel']);\n        setLabelStyle(labelText, {\n          normal: labelModel,\n          emphasis: emphasisLabelModel\n        }, {\n          defaultText: selectorItem.title\n        });\n        enableHoverEmphasis(labelText);\n      });\n    };\n\n    LegendView.prototype._createItem = function (seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, itemVisualStyle, legendIcon, selectMode, api) {\n      var drawType = seriesModel.visualDrawType;\n      var itemWidth = legendModel.get('itemWidth');\n      var itemHeight = legendModel.get('itemHeight');\n      var isSelected = legendModel.isSelected(name);\n      var iconRotate = legendItemModel.get('symbolRotate');\n      var symbolKeepAspect = legendItemModel.get('symbolKeepAspect');\n      var legendIconType = legendItemModel.get('icon');\n      legendIcon = legendIconType || legendIcon || 'roundRect';\n      var style = getLegendStyle(legendIcon, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api);\n      var itemGroup = new Group$2();\n      var textStyleModel = legendItemModel.getModel('textStyle');\n\n      if (isFunction(seriesModel.getLegendIcon) && (!legendIconType || legendIconType === 'inherit')) {\n        // Series has specific way to define legend icon\n        itemGroup.add(seriesModel.getLegendIcon({\n          itemWidth: itemWidth,\n          itemHeight: itemHeight,\n          icon: legendIcon,\n          iconRotate: iconRotate,\n          itemStyle: style.itemStyle,\n          lineStyle: style.lineStyle,\n          symbolKeepAspect: symbolKeepAspect\n        }));\n      } else {\n        // Use default legend icon policy for most series\n        var rotate = legendIconType === 'inherit' && seriesModel.getData().getVisual('symbol') ? iconRotate === 'inherit' ? seriesModel.getData().getVisual('symbolRotate') : iconRotate : 0; // No rotation for no icon\n\n        itemGroup.add(getDefaultLegendIcon({\n          itemWidth: itemWidth,\n          itemHeight: itemHeight,\n          icon: legendIcon,\n          iconRotate: rotate,\n          itemStyle: style.itemStyle,\n          lineStyle: style.lineStyle,\n          symbolKeepAspect: symbolKeepAspect\n        }));\n      }\n\n      var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n      var textAlign = itemAlign;\n      var formatter = legendModel.get('formatter');\n      var content = name;\n\n      if (isString(formatter) && formatter) {\n        content = formatter.replace('{name}', name != null ? name : '');\n      } else if (isFunction(formatter)) {\n        content = formatter(name);\n      }\n\n      var inactiveColor = legendItemModel.get('inactiveColor');\n      itemGroup.add(new ZRText({\n        style: createTextStyle(textStyleModel, {\n          text: content,\n          x: textX,\n          y: itemHeight / 2,\n          fill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n          align: textAlign,\n          verticalAlign: 'middle'\n        })\n      })); // Add a invisible rect to increase the area of mouse hover\n\n      var hitRect = new Rect({\n        shape: itemGroup.getBoundingRect(),\n        invisible: true\n      });\n      var tooltipModel = legendItemModel.getModel('tooltip');\n\n      if (tooltipModel.get('show')) {\n        setTooltipConfig({\n          el: hitRect,\n          componentModel: legendModel,\n          itemName: name,\n          itemTooltipOption: tooltipModel.option\n        });\n      }\n\n      itemGroup.add(hitRect);\n      itemGroup.eachChild(function (child) {\n        child.silent = true;\n      });\n      hitRect.silent = !selectMode;\n      this.getContentGroup().add(itemGroup);\n      enableHoverEmphasis(itemGroup); // @ts-ignore\n\n      itemGroup.__legendDataIndex = dataIndex;\n      return itemGroup;\n    };\n\n    LegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n      var contentGroup = this.getContentGroup();\n      var selectorGroup = this.getSelectorGroup(); // Place items in contentGroup.\n\n      box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n      var contentRect = contentGroup.getBoundingRect();\n      var contentPos = [-contentRect.x, -contentRect.y];\n      selectorGroup.markRedraw();\n      contentGroup.markRedraw();\n\n      if (selector) {\n        // Place buttons in selectorGroup\n        box( // Buttons in selectorGroup always layout horizontally\n        'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n        var selectorRect = selectorGroup.getBoundingRect();\n        var selectorPos = [-selectorRect.x, -selectorRect.y];\n        var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n        var orientIdx = legendModel.getOrient().index;\n        var wh = orientIdx === 0 ? 'width' : 'height';\n        var hw = orientIdx === 0 ? 'height' : 'width';\n        var yx = orientIdx === 0 ? 'y' : 'x';\n\n        if (selectorPosition === 'end') {\n          selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n        } else {\n          contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n        } //Always align selector to content as 'middle'\n\n\n        selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n        selectorGroup.x = selectorPos[0];\n        selectorGroup.y = selectorPos[1];\n        contentGroup.x = contentPos[0];\n        contentGroup.y = contentPos[1];\n        var mainRect = {\n          x: 0,\n          y: 0\n        };\n        mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n        mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n        mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n        return mainRect;\n      } else {\n        contentGroup.x = contentPos[0];\n        contentGroup.y = contentPos[1];\n        return this.group.getBoundingRect();\n      }\n    };\n    /**\n     * @protected\n     */\n\n\n    LegendView.prototype.remove = function () {\n      this.getContentGroup().removeAll();\n      this._isFirstRender = true;\n    };\n\n    LegendView.type = 'legend.plain';\n    return LegendView;\n  }(ComponentView);\n\n  function getLegendStyle(iconType, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api) {\n    /**\n     * Use series style if is inherit;\n     * elsewise, use legend style\n     */\n    function handleCommonProps(style, visualStyle) {\n      // If lineStyle.width is 'auto', it is set to be 2 if series has border\n      if (style.lineWidth === 'auto') {\n        style.lineWidth = visualStyle.lineWidth > 0 ? 2 : 0;\n      }\n\n      each$3(style, function (propVal, propName) {\n        style[propName] === 'inherit' && (style[propName] = visualStyle[propName]);\n      });\n    } // itemStyle\n\n\n    var itemStyleModel = legendItemModel.getModel('itemStyle');\n    var itemStyle = itemStyleModel.getItemStyle();\n    var iconBrushType = iconType.lastIndexOf('empty', 0) === 0 ? 'fill' : 'stroke';\n    var decalStyle = itemStyleModel.getShallow('decal');\n    itemStyle.decal = !decalStyle || decalStyle === 'inherit' ? itemVisualStyle.decal : createOrUpdatePatternFromDecal(decalStyle, api);\n\n    if (itemStyle.fill === 'inherit') {\n      /**\n       * Series with visualDrawType as 'stroke' should have\n       * series stroke as legend fill\n       */\n      itemStyle.fill = itemVisualStyle[drawType];\n    }\n\n    if (itemStyle.stroke === 'inherit') {\n      /**\n       * icon type with \"emptyXXX\" should use fill color\n       * in visual style\n       */\n      itemStyle.stroke = itemVisualStyle[iconBrushType];\n    }\n\n    if (itemStyle.opacity === 'inherit') {\n      /**\n       * Use lineStyle.opacity if drawType is stroke\n       */\n      itemStyle.opacity = (drawType === 'fill' ? itemVisualStyle : lineVisualStyle).opacity;\n    }\n\n    handleCommonProps(itemStyle, itemVisualStyle); // lineStyle\n\n    var legendLineModel = legendItemModel.getModel('lineStyle');\n    var lineStyle = legendLineModel.getLineStyle();\n    handleCommonProps(lineStyle, lineVisualStyle); // Fix auto color to real color\n\n    itemStyle.fill === 'auto' && (itemStyle.fill = itemVisualStyle.fill);\n    itemStyle.stroke === 'auto' && (itemStyle.stroke = itemVisualStyle.fill);\n    lineStyle.stroke === 'auto' && (lineStyle.stroke = itemVisualStyle.fill);\n\n    if (!isSelected) {\n      var borderWidth = legendItemModel.get('inactiveBorderWidth');\n      /**\n       * Since stroke is set to be inactiveBorderColor, it may occur that\n       * there is no border in series but border in legend, so we need to\n       * use border only when series has border if is set to be auto\n       */\n\n      var visualHasBorder = itemStyle[iconBrushType];\n      itemStyle.lineWidth = borderWidth === 'auto' ? itemVisualStyle.lineWidth > 0 && visualHasBorder ? 2 : 0 : itemStyle.lineWidth;\n      itemStyle.fill = legendItemModel.get('inactiveColor');\n      itemStyle.stroke = legendItemModel.get('inactiveBorderColor');\n      lineStyle.stroke = legendLineModel.get('inactiveColor');\n      lineStyle.lineWidth = legendLineModel.get('inactiveWidth');\n    }\n\n    return {\n      itemStyle: itemStyle,\n      lineStyle: lineStyle\n    };\n  }\n\n  function getDefaultLegendIcon(opt) {\n    var symboType = opt.icon || 'roundRect';\n    var icon = createSymbol(symboType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill, opt.symbolKeepAspect);\n    icon.setStyle(opt.itemStyle);\n    icon.rotation = (opt.iconRotate || 0) * Math.PI / 180;\n    icon.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n\n    if (symboType.indexOf('empty') > -1) {\n      icon.style.stroke = icon.style.fill;\n      icon.style.fill = '#fff';\n      icon.style.lineWidth = 2;\n    }\n\n    return icon;\n  }\n\n  function dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n    // downplay before unselect\n    dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n    api.dispatchAction({\n      type: 'legendToggleSelect',\n      name: seriesName != null ? seriesName : dataName\n    }); // highlight after select\n    // TODO higlight immediately may cause animation loss.\n\n    dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n  }\n\n  function isUseHoverLayer(api) {\n    var list = api.getZr().storage.getDisplayList();\n    var emphasisState;\n    var i = 0;\n    var len = list.length;\n\n    while (i < len && !(emphasisState = list[i].states.emphasis)) {\n      i++;\n    }\n\n    return emphasisState && emphasisState.hoverLayer;\n  }\n\n  function dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n    // If element hover will move to a hoverLayer.\n    if (!isUseHoverLayer(api)) {\n      api.dispatchAction({\n        type: 'highlight',\n        seriesName: seriesName,\n        name: dataName,\n        excludeSeriesId: excludeSeriesId\n      });\n    }\n  }\n\n  function dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n    // If element hover will move to a hoverLayer.\n    if (!isUseHoverLayer(api)) {\n      api.dispatchAction({\n        type: 'downplay',\n        seriesName: seriesName,\n        name: dataName,\n        excludeSeriesId: excludeSeriesId\n      });\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function legendFilter(ecModel) {\n    var legendModels = ecModel.findComponents({\n      mainType: 'legend'\n    });\n\n    if (legendModels && legendModels.length) {\n      ecModel.filterSeries(function (series) {\n        // If in any legend component the status is not selected.\n        // Because in legend series is assumed selected when it is not in the legend data.\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(series.name)) {\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // @ts-nocheck\n\n\n  function legendSelectActionHandler(methodName, payload, ecModel) {\n    var selectedMap = {};\n    var isToggleSelect = methodName === 'toggleSelected';\n    var isSelected; // Update all legend components\n\n    ecModel.eachComponent('legend', function (legendModel) {\n      if (isToggleSelect && isSelected != null) {\n        // Force other legend has same selected status\n        // Or the first is toggled to true and other are toggled to false\n        // In the case one legend has some item unSelected in option. And if other legend\n        // doesn't has the item, they will assume it is selected.\n        legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\n      } else if (methodName === 'allSelect' || methodName === 'inverseSelect') {\n        legendModel[methodName]();\n      } else {\n        legendModel[methodName](payload.name);\n        isSelected = legendModel.isSelected(payload.name);\n      }\n\n      var legendData = legendModel.getData();\n      each(legendData, function (model) {\n        var name = model.get('name'); // Wrap element\n\n        if (name === '\\n' || name === '') {\n          return;\n        }\n\n        var isItemSelected = legendModel.isSelected(name);\n\n        if (selectedMap.hasOwnProperty(name)) {\n          // Unselected if any legend is unselected\n          selectedMap[name] = selectedMap[name] && isItemSelected;\n        } else {\n          selectedMap[name] = isItemSelected;\n        }\n      });\n    }); // Return the event explicitly\n\n    return methodName === 'allSelect' || methodName === 'inverseSelect' ? {\n      selected: selectedMap\n    } : {\n      name: payload.name,\n      selected: selectedMap\n    };\n  }\n\n  function installLegendAction(registers) {\n    /**\n     * @event legendToggleSelect\n     * @type {Object}\n     * @property {string} type 'legendToggleSelect'\n     * @property {string} [from]\n     * @property {string} name Series name or data item name\n     */\n    registers.registerAction('legendToggleSelect', 'legendselectchanged', curry(legendSelectActionHandler, 'toggleSelected'));\n    registers.registerAction('legendAllSelect', 'legendselectall', curry(legendSelectActionHandler, 'allSelect'));\n    registers.registerAction('legendInverseSelect', 'legendinverseselect', curry(legendSelectActionHandler, 'inverseSelect'));\n    /**\n     * @event legendSelect\n     * @type {Object}\n     * @property {string} type 'legendSelect'\n     * @property {string} name Series name or data item name\n     */\n\n    registers.registerAction('legendSelect', 'legendselected', curry(legendSelectActionHandler, 'select'));\n    /**\n     * @event legendUnSelect\n     * @type {Object}\n     * @property {string} type 'legendUnSelect'\n     * @property {string} name Series name or data item name\n     */\n\n    registers.registerAction('legendUnSelect', 'legendunselected', curry(legendSelectActionHandler, 'unSelect'));\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$9(registers) {\n    registers.registerComponentModel(LegendModel);\n    registers.registerComponentView(LegendView);\n    registers.registerProcessor(registers.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\n    registers.registerSubTypeDefaulter('legend', function () {\n      return 'plain';\n    });\n    installLegendAction(registers);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var ScrollableLegendModel =\n  /** @class */\n  function (_super) {\n    __extends(ScrollableLegendModel, _super);\n\n    function ScrollableLegendModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = ScrollableLegendModel.type;\n      return _this;\n    }\n    /**\n     * @param {number} scrollDataIndex\n     */\n\n\n    ScrollableLegendModel.prototype.setScrollDataIndex = function (scrollDataIndex) {\n      this.option.scrollDataIndex = scrollDataIndex;\n    };\n\n    ScrollableLegendModel.prototype.init = function (option, parentModel, ecModel) {\n      var inputPositionParams = getLayoutParams(option);\n\n      _super.prototype.init.call(this, option, parentModel, ecModel);\n\n      mergeAndNormalizeLayoutParams(this, option, inputPositionParams);\n    };\n    /**\n     * @override\n     */\n\n\n    ScrollableLegendModel.prototype.mergeOption = function (option, ecModel) {\n      _super.prototype.mergeOption.call(this, option, ecModel);\n\n      mergeAndNormalizeLayoutParams(this, this.option, option);\n    };\n\n    ScrollableLegendModel.type = 'legend.scroll';\n    ScrollableLegendModel.defaultOption = inheritDefaultOption(LegendModel.defaultOption, {\n      scrollDataIndex: 0,\n      pageButtonItemGap: 5,\n      pageButtonGap: null,\n      pageButtonPosition: 'end',\n      pageFormatter: '{current}/{total}',\n      pageIcons: {\n        horizontal: ['M0,0L12,-10L12,10z', 'M0,0L-12,-10L-12,10z'],\n        vertical: ['M0,0L20,0L10,-20z', 'M0,0L20,0L10,20z']\n      },\n      pageIconColor: '#2f4554',\n      pageIconInactiveColor: '#aaa',\n      pageIconSize: 15,\n      pageTextStyle: {\n        color: '#333'\n      },\n      animationDurationUpdate: 800\n    });\n    return ScrollableLegendModel;\n  }(LegendModel); // Do not `ignoreSize` to enable setting {left: 10, right: 10}.\n\n\n  function mergeAndNormalizeLayoutParams(legendModel, target, raw) {\n    var orient = legendModel.getOrient();\n    var ignoreSize = [1, 1];\n    ignoreSize[orient.index] = 0;\n    mergeLayoutParam(target, raw, {\n      type: 'box',\n      ignoreSize: !!ignoreSize\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Separate legend and scrollable legend to reduce package size.\n   */\n\n\n  var Group$3 = Group;\n  var WH = ['width', 'height'];\n  var XY = ['x', 'y'];\n\n  var ScrollableLegendView =\n  /** @class */\n  function (_super) {\n    __extends(ScrollableLegendView, _super);\n\n    function ScrollableLegendView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = ScrollableLegendView.type;\n      _this.newlineDisabled = true;\n      _this._currentIndex = 0;\n      return _this;\n    }\n\n    ScrollableLegendView.prototype.init = function () {\n      _super.prototype.init.call(this);\n\n      this.group.add(this._containerGroup = new Group$3());\n\n      this._containerGroup.add(this.getContentGroup());\n\n      this.group.add(this._controllerGroup = new Group$3());\n    };\n    /**\n     * @override\n     */\n\n\n    ScrollableLegendView.prototype.resetInner = function () {\n      _super.prototype.resetInner.call(this);\n\n      this._controllerGroup.removeAll();\n\n      this._containerGroup.removeClipPath();\n\n      this._containerGroup.__rectSize = null;\n    };\n    /**\n     * @override\n     */\n\n\n    ScrollableLegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n      var self = this; // Render content items.\n\n      _super.prototype.renderInner.call(this, itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n\n      var controllerGroup = this._controllerGroup; // FIXME: support be 'auto' adapt to size number text length,\n      // e.g., '3/12345' should not overlap with the control arrow button.\n\n      var pageIconSize = legendModel.get('pageIconSize', true);\n      var pageIconSizeArr = isArray(pageIconSize) ? pageIconSize : [pageIconSize, pageIconSize];\n      createPageButton('pagePrev', 0);\n      var pageTextStyleModel = legendModel.getModel('pageTextStyle');\n      controllerGroup.add(new ZRText({\n        name: 'pageText',\n        style: {\n          // Placeholder to calculate a proper layout.\n          text: 'xx/xx',\n          fill: pageTextStyleModel.getTextColor(),\n          font: pageTextStyleModel.getFont(),\n          verticalAlign: 'middle',\n          align: 'center'\n        },\n        silent: true\n      }));\n      createPageButton('pageNext', 1);\n\n      function createPageButton(name, iconIdx) {\n        var pageDataIndexName = name + 'DataIndex';\n        var icon = createIcon(legendModel.get('pageIcons', true)[legendModel.getOrient().name][iconIdx], {\n          // Buttons will be created in each render, so we do not need\n          // to worry about avoiding using legendModel kept in scope.\n          onclick: bind(self._pageGo, self, pageDataIndexName, legendModel, api)\n        }, {\n          x: -pageIconSizeArr[0] / 2,\n          y: -pageIconSizeArr[1] / 2,\n          width: pageIconSizeArr[0],\n          height: pageIconSizeArr[1]\n        });\n        icon.name = name;\n        controllerGroup.add(icon);\n      }\n    };\n    /**\n     * @override\n     */\n\n\n    ScrollableLegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n      var selectorGroup = this.getSelectorGroup();\n      var orientIdx = legendModel.getOrient().index;\n      var wh = WH[orientIdx];\n      var xy = XY[orientIdx];\n      var hw = WH[1 - orientIdx];\n      var yx = XY[1 - orientIdx];\n      selector && box( // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var processMaxSize = clone(maxSize);\n      selector && (processMaxSize[wh] = maxSize[wh] - selectorRect[wh] - selectorButtonGap);\n\n      var mainRect = this._layoutContentAndController(legendModel, isFirstRender, processMaxSize, orientIdx, wh, hw, yx, xy);\n\n      if (selector) {\n        if (selectorPosition === 'end') {\n          selectorPos[orientIdx] += mainRect[wh] + selectorButtonGap;\n        } else {\n          var offset = selectorRect[wh] + selectorButtonGap;\n          selectorPos[orientIdx] -= offset;\n          mainRect[xy] -= offset;\n        }\n\n        mainRect[wh] += selectorRect[wh] + selectorButtonGap;\n        selectorPos[1 - orientIdx] += mainRect[yx] + mainRect[hw] / 2 - selectorRect[hw] / 2;\n        mainRect[hw] = Math.max(mainRect[hw], selectorRect[hw]);\n        mainRect[yx] = Math.min(mainRect[yx], selectorRect[yx] + selectorPos[1 - orientIdx]);\n        selectorGroup.x = selectorPos[0];\n        selectorGroup.y = selectorPos[1];\n        selectorGroup.markRedraw();\n      }\n\n      return mainRect;\n    };\n\n    ScrollableLegendView.prototype._layoutContentAndController = function (legendModel, isFirstRender, maxSize, orientIdx, wh, hw, yx, xy) {\n      var contentGroup = this.getContentGroup();\n      var containerGroup = this._containerGroup;\n      var controllerGroup = this._controllerGroup; // Place items in contentGroup.\n\n      box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), !orientIdx ? null : maxSize.width, orientIdx ? null : maxSize.height);\n      box( // Buttons in controller are layout always horizontally.\n      'horizontal', controllerGroup, legendModel.get('pageButtonItemGap', true));\n      var contentRect = contentGroup.getBoundingRect();\n      var controllerRect = controllerGroup.getBoundingRect();\n      var showController = this._showController = contentRect[wh] > maxSize[wh]; // In case that the inner elements of contentGroup layout do not based on [0, 0]\n\n      var contentPos = [-contentRect.x, -contentRect.y]; // Remain contentPos when scroll animation perfroming.\n      // If first rendering, `contentGroup.position` is [0, 0], which\n      // does not make sense and may cause unexepcted animation if adopted.\n\n      if (!isFirstRender) {\n        contentPos[orientIdx] = contentGroup[xy];\n      } // Layout container group based on 0.\n\n\n      var containerPos = [0, 0];\n      var controllerPos = [-controllerRect.x, -controllerRect.y];\n      var pageButtonGap = retrieve2(legendModel.get('pageButtonGap', true), legendModel.get('itemGap', true)); // Place containerGroup and controllerGroup and contentGroup.\n\n      if (showController) {\n        var pageButtonPosition = legendModel.get('pageButtonPosition', true); // controller is on the right / bottom.\n\n        if (pageButtonPosition === 'end') {\n          controllerPos[orientIdx] += maxSize[wh] - controllerRect[wh];\n        } // controller is on the left / top.\n        else {\n            containerPos[orientIdx] += controllerRect[wh] + pageButtonGap;\n          }\n      } // Always align controller to content as 'middle'.\n\n\n      controllerPos[1 - orientIdx] += contentRect[hw] / 2 - controllerRect[hw] / 2;\n      contentGroup.setPosition(contentPos);\n      containerGroup.setPosition(containerPos);\n      controllerGroup.setPosition(controllerPos); // Calculate `mainRect` and set `clipPath`.\n      // mainRect should not be calculated by `this.group.getBoundingRect()`\n      // for sake of the overflow.\n\n      var mainRect = {\n        x: 0,\n        y: 0\n      }; // Consider content may be overflow (should be clipped).\n\n      mainRect[wh] = showController ? maxSize[wh] : contentRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], controllerRect[hw]); // `containerRect[yx] + containerPos[1 - orientIdx]` is 0.\n\n      mainRect[yx] = Math.min(0, controllerRect[yx] + controllerPos[1 - orientIdx]);\n      containerGroup.__rectSize = maxSize[wh];\n\n      if (showController) {\n        var clipShape = {\n          x: 0,\n          y: 0\n        };\n        clipShape[wh] = Math.max(maxSize[wh] - controllerRect[wh] - pageButtonGap, 0);\n        clipShape[hw] = mainRect[hw];\n        containerGroup.setClipPath(new Rect({\n          shape: clipShape\n        })); // Consider content may be larger than container, container rect\n        // can not be obtained from `containerGroup.getBoundingRect()`.\n\n        containerGroup.__rectSize = clipShape[wh];\n      } else {\n        // Do not remove or ignore controller. Keep them set as placeholders.\n        controllerGroup.eachChild(function (child) {\n          child.attr({\n            invisible: true,\n            silent: true\n          });\n        });\n      } // Content translate animation.\n\n\n      var pageInfo = this._getPageInfo(legendModel);\n\n      pageInfo.pageIndex != null && updateProps(contentGroup, {\n        x: pageInfo.contentPosition[0],\n        y: pageInfo.contentPosition[1]\n      }, // When switch from \"show controller\" to \"not show controller\", view should be\n      // updated immediately without animation, otherwise causes weird effect.\n      showController ? legendModel : null);\n\n      this._updatePageInfoView(legendModel, pageInfo);\n\n      return mainRect;\n    };\n\n    ScrollableLegendView.prototype._pageGo = function (to, legendModel, api) {\n      var scrollDataIndex = this._getPageInfo(legendModel)[to];\n\n      scrollDataIndex != null && api.dispatchAction({\n        type: 'legendScroll',\n        scrollDataIndex: scrollDataIndex,\n        legendId: legendModel.id\n      });\n    };\n\n    ScrollableLegendView.prototype._updatePageInfoView = function (legendModel, pageInfo) {\n      var controllerGroup = this._controllerGroup;\n      each(['pagePrev', 'pageNext'], function (name) {\n        var key = name + 'DataIndex';\n        var canJump = pageInfo[key] != null;\n        var icon = controllerGroup.childOfName(name);\n\n        if (icon) {\n          icon.setStyle('fill', canJump ? legendModel.get('pageIconColor', true) : legendModel.get('pageIconInactiveColor', true));\n          icon.cursor = canJump ? 'pointer' : 'default';\n        }\n      });\n      var pageText = controllerGroup.childOfName('pageText');\n      var pageFormatter = legendModel.get('pageFormatter');\n      var pageIndex = pageInfo.pageIndex;\n      var current = pageIndex != null ? pageIndex + 1 : 0;\n      var total = pageInfo.pageCount;\n      pageText && pageFormatter && pageText.setStyle('text', isString(pageFormatter) ? pageFormatter.replace('{current}', current == null ? '' : current + '').replace('{total}', total == null ? '' : total + '') : pageFormatter({\n        current: current,\n        total: total\n      }));\n    };\n    /**\n     *  contentPosition: Array.<number>, null when data item not found.\n     *  pageIndex: number, null when data item not found.\n     *  pageCount: number, always be a number, can be 0.\n     *  pagePrevDataIndex: number, null when no previous page.\n     *  pageNextDataIndex: number, null when no next page.\n     * }\n     */\n\n\n    ScrollableLegendView.prototype._getPageInfo = function (legendModel) {\n      var scrollDataIndex = legendModel.get('scrollDataIndex', true);\n      var contentGroup = this.getContentGroup();\n      var containerRectSize = this._containerGroup.__rectSize;\n      var orientIdx = legendModel.getOrient().index;\n      var wh = WH[orientIdx];\n      var xy = XY[orientIdx];\n\n      var targetItemIndex = this._findTargetItemIndex(scrollDataIndex);\n\n      var children = contentGroup.children();\n      var targetItem = children[targetItemIndex];\n      var itemCount = children.length;\n      var pCount = !itemCount ? 0 : 1;\n      var result = {\n        contentPosition: [contentGroup.x, contentGroup.y],\n        pageCount: pCount,\n        pageIndex: pCount - 1,\n        pagePrevDataIndex: null,\n        pageNextDataIndex: null\n      };\n\n      if (!targetItem) {\n        return result;\n      }\n\n      var targetItemInfo = getItemInfo(targetItem);\n      result.contentPosition[orientIdx] = -targetItemInfo.s; // Strategy:\n      // (1) Always align based on the left/top most item.\n      // (2) It is user-friendly that the last item shown in the\n      // current window is shown at the begining of next window.\n      // Otherwise if half of the last item is cut by the window,\n      // it will have no chance to display entirely.\n      // (3) Consider that item size probably be different, we\n      // have calculate pageIndex by size rather than item index,\n      // and we can not get page index directly by division.\n      // (4) The window is to narrow to contain more than\n      // one item, we should make sure that the page can be fliped.\n\n      for (var i = targetItemIndex + 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i <= itemCount; ++i) {\n        currItemInfo = getItemInfo(children[i]);\n\n        if ( // Half of the last item is out of the window.\n        !currItemInfo && winEndItemInfo.e > winStartItemInfo.s + containerRectSize || // If the current item does not intersect with the window, the new page\n        // can be started at the current item or the last item.\n        currItemInfo && !intersect(currItemInfo, winStartItemInfo.s)) {\n          if (winEndItemInfo.i > winStartItemInfo.i) {\n            winStartItemInfo = winEndItemInfo;\n          } else {\n            // e.g., when page size is smaller than item size.\n            winStartItemInfo = currItemInfo;\n          }\n\n          if (winStartItemInfo) {\n            if (result.pageNextDataIndex == null) {\n              result.pageNextDataIndex = winStartItemInfo.i;\n            }\n\n            ++result.pageCount;\n          }\n        }\n\n        winEndItemInfo = currItemInfo;\n      }\n\n      for (var i = targetItemIndex - 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i >= -1; --i) {\n        currItemInfo = getItemInfo(children[i]);\n\n        if ( // If the the end item does not intersect with the window started\n        // from the current item, a page can be settled.\n        (!currItemInfo || !intersect(winEndItemInfo, currItemInfo.s)) && // e.g., when page size is smaller than item size.\n        winStartItemInfo.i < winEndItemInfo.i) {\n          winEndItemInfo = winStartItemInfo;\n\n          if (result.pagePrevDataIndex == null) {\n            result.pagePrevDataIndex = winStartItemInfo.i;\n          }\n\n          ++result.pageCount;\n          ++result.pageIndex;\n        }\n\n        winStartItemInfo = currItemInfo;\n      }\n\n      return result;\n\n      function getItemInfo(el) {\n        if (el) {\n          var itemRect = el.getBoundingRect();\n          var start = itemRect[xy] + el[xy];\n          return {\n            s: start,\n            e: start + itemRect[wh],\n            i: el.__legendDataIndex\n          };\n        }\n      }\n\n      function intersect(itemInfo, winStart) {\n        return itemInfo.e >= winStart && itemInfo.s <= winStart + containerRectSize;\n      }\n    };\n\n    ScrollableLegendView.prototype._findTargetItemIndex = function (targetDataIndex) {\n      if (!this._showController) {\n        return 0;\n      }\n\n      var index;\n      var contentGroup = this.getContentGroup();\n      var defaultIndex;\n      contentGroup.eachChild(function (child, idx) {\n        var legendDataIdx = child.__legendDataIndex; // FIXME\n        // If the given targetDataIndex (from model) is illegal,\n        // we use defaultIndex. But the index on the legend model and\n        // action payload is still illegal. That case will not be\n        // changed until some scenario requires.\n\n        if (defaultIndex == null && legendDataIdx != null) {\n          defaultIndex = idx;\n        }\n\n        if (legendDataIdx === targetDataIndex) {\n          index = idx;\n        }\n      });\n      return index != null ? index : defaultIndex;\n    };\n\n    ScrollableLegendView.type = 'legend.scroll';\n    return ScrollableLegendView;\n  }(LegendView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function installScrollableLegendAction(registers) {\n    /**\n     * @event legendScroll\n     * @type {Object}\n     * @property {string} type 'legendScroll'\n     * @property {string} scrollDataIndex\n     */\n    registers.registerAction('legendScroll', 'legendscroll', function (payload, ecModel) {\n      var scrollDataIndex = payload.scrollDataIndex;\n      scrollDataIndex != null && ecModel.eachComponent({\n        mainType: 'legend',\n        subType: 'scroll',\n        query: payload\n      }, function (legendModel) {\n        legendModel.setScrollDataIndex(scrollDataIndex);\n      });\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$8(registers) {\n    use(install$9);\n    registers.registerComponentModel(ScrollableLegendModel);\n    registers.registerComponentView(ScrollableLegendView);\n    installScrollableLegendAction(registers);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Legend component entry file8\n   */\n\n\n  use(install$8);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var inner$7 = makeInner();\n  var clone$3 = clone;\n  var bind$1 = bind;\n  /**\n   * Base axis pointer class in 2D.\n   */\n\n  var BaseAxisPointer =\n  /** @class */\n  function () {\n    function BaseAxisPointer() {\n      this._dragging = false;\n      /**\n       * In px, arbitrary value. Do not set too small,\n       * no animation is ok for most cases.\n       */\n\n      this.animationThreshold = 15;\n    }\n    /**\n     * @implement\n     */\n\n\n    BaseAxisPointer.prototype.render = function (axisModel, axisPointerModel, api, forceRender) {\n      var value = axisPointerModel.get('value');\n      var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n      // be replaced when user calling setOption in not merge mode.\n\n      this._axisModel = axisModel;\n      this._axisPointerModel = axisPointerModel;\n      this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n      // So it is power consuming if performing `render` each time,\n      // especially on mobile device.\n\n      if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n        return;\n      }\n\n      this._lastValue = value;\n      this._lastStatus = status;\n      var group = this._group;\n      var handle = this._handle;\n\n      if (!status || status === 'hide') {\n        // Do not clear here, for animation better.\n        group && group.hide();\n        handle && handle.hide();\n        return;\n      }\n\n      group && group.show();\n      handle && handle.show(); // Otherwise status is 'show'\n\n      var elOption = {};\n      this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n      var graphicKey = elOption.graphicKey;\n\n      if (graphicKey !== this._lastGraphicKey) {\n        this.clear(api);\n      }\n\n      this._lastGraphicKey = graphicKey;\n      var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n      if (!group) {\n        group = this._group = new Group();\n        this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n        this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n        api.getZr().add(group);\n      } else {\n        var doUpdateProps = curry(updateProps$1, axisPointerModel, moveAnimation);\n        this.updatePointerEl(group, elOption, doUpdateProps);\n        this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n      }\n\n      updateMandatoryProps(group, axisPointerModel, true);\n\n      this._renderHandle(value);\n    };\n    /**\n     * @implement\n     */\n\n\n    BaseAxisPointer.prototype.remove = function (api) {\n      this.clear(api);\n    };\n    /**\n     * @implement\n     */\n\n\n    BaseAxisPointer.prototype.dispose = function (api) {\n      this.clear(api);\n    };\n    /**\n     * @protected\n     */\n\n\n    BaseAxisPointer.prototype.determineAnimation = function (axisModel, axisPointerModel) {\n      var animation = axisPointerModel.get('animation');\n      var axis = axisModel.axis;\n      var isCategoryAxis = axis.type === 'category';\n      var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n      if (!useSnap && !isCategoryAxis) {\n        return false;\n      }\n\n      if (animation === 'auto' || animation == null) {\n        var animationThreshold = this.animationThreshold;\n\n        if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n          return true;\n        } // It is important to auto animation when snap used. Consider if there is\n        // a dataZoom, animation will be disabled when too many points exist, while\n        // it will be enabled for better visual effect when little points exist.\n\n\n        if (useSnap) {\n          var seriesDataCount = getAxisInfo(axisModel).seriesDataCount;\n          var axisExtent = axis.getExtent(); // Approximate band width\n\n          return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n        }\n\n        return false;\n      }\n\n      return animation === true;\n    };\n    /**\n     * add {pointer, label, graphicKey} to elOption\n     * @protected\n     */\n\n\n    BaseAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n    };\n    /**\n     * @protected\n     */\n\n\n    BaseAxisPointer.prototype.createPointerEl = function (group, elOption, axisModel, axisPointerModel) {\n      var pointerOption = elOption.pointer;\n\n      if (pointerOption) {\n        var pointerEl = inner$7(group).pointerEl = new graphic[pointerOption.type](clone$3(elOption.pointer));\n        group.add(pointerEl);\n      }\n    };\n    /**\n     * @protected\n     */\n\n\n    BaseAxisPointer.prototype.createLabelEl = function (group, elOption, axisModel, axisPointerModel) {\n      if (elOption.label) {\n        var labelEl = inner$7(group).labelEl = new ZRText(clone$3(elOption.label));\n        group.add(labelEl);\n        updateLabelShowHide(labelEl, axisPointerModel);\n      }\n    };\n    /**\n     * @protected\n     */\n\n\n    BaseAxisPointer.prototype.updatePointerEl = function (group, elOption, updateProps$$1) {\n      var pointerEl = inner$7(group).pointerEl;\n\n      if (pointerEl && elOption.pointer) {\n        pointerEl.setStyle(elOption.pointer.style);\n        updateProps$$1(pointerEl, {\n          shape: elOption.pointer.shape\n        });\n      }\n    };\n    /**\n     * @protected\n     */\n\n\n    BaseAxisPointer.prototype.updateLabelEl = function (group, elOption, updateProps$$1, axisPointerModel) {\n      var labelEl = inner$7(group).labelEl;\n\n      if (labelEl) {\n        labelEl.setStyle(elOption.label.style);\n        updateProps$$1(labelEl, {\n          // Consider text length change in vertical axis, animation should\n          // be used on shape, otherwise the effect will be weird.\n          // TODOTODO\n          // shape: elOption.label.shape,\n          x: elOption.label.x,\n          y: elOption.label.y\n        });\n        updateLabelShowHide(labelEl, axisPointerModel);\n      }\n    };\n    /**\n     * @private\n     */\n\n\n    BaseAxisPointer.prototype._renderHandle = function (value) {\n      if (this._dragging || !this.updateHandleTransform) {\n        return;\n      }\n\n      var axisPointerModel = this._axisPointerModel;\n\n      var zr = this._api.getZr();\n\n      var handle = this._handle;\n      var handleModel = axisPointerModel.getModel('handle');\n      var status = axisPointerModel.get('status');\n\n      if (!handleModel.get('show') || !status || status === 'hide') {\n        handle && zr.remove(handle);\n        this._handle = null;\n        return;\n      }\n\n      var isInit;\n\n      if (!this._handle) {\n        isInit = true;\n        handle = this._handle = createIcon(handleModel.get('icon'), {\n          cursor: 'move',\n          draggable: true,\n          onmousemove: function (e) {\n            // Fot mobile devicem, prevent screen slider on the button.\n            stop(e.event);\n          },\n          onmousedown: bind$1(this._onHandleDragMove, this, 0, 0),\n          drift: bind$1(this._onHandleDragMove, this),\n          ondragend: bind$1(this._onHandleDragEnd, this)\n        });\n        zr.add(handle);\n      }\n\n      updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n      handle.setStyle(handleModel.getItemStyle(null, ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'])); // update position\n\n      var handleSize = handleModel.get('size');\n\n      if (!isArray(handleSize)) {\n        handleSize = [handleSize, handleSize];\n      }\n\n      handle.scaleX = handleSize[0] / 2;\n      handle.scaleY = handleSize[1] / 2;\n      createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n      this._moveHandleToValue(value, isInit);\n    };\n\n    BaseAxisPointer.prototype._moveHandleToValue = function (value, isInit) {\n      updateProps$1(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n    };\n\n    BaseAxisPointer.prototype._onHandleDragMove = function (dx, dy) {\n      var handle = this._handle;\n\n      if (!handle) {\n        return;\n      }\n\n      this._dragging = true; // Persistent for throttle.\n\n      var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n      this._payloadInfo = trans;\n      handle.stopAnimation();\n      handle.attr(getHandleTransProps(trans));\n      inner$7(handle).lastProp = null;\n\n      this._doDispatchAxisPointer();\n    };\n    /**\n     * Throttled method.\n     */\n\n\n    BaseAxisPointer.prototype._doDispatchAxisPointer = function () {\n      var handle = this._handle;\n\n      if (!handle) {\n        return;\n      }\n\n      var payloadInfo = this._payloadInfo;\n      var axisModel = this._axisModel;\n\n      this._api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payloadInfo.cursorPoint[0],\n        y: payloadInfo.cursorPoint[1],\n        tooltipOption: payloadInfo.tooltipOption,\n        axesInfo: [{\n          axisDim: axisModel.axis.dim,\n          axisIndex: axisModel.componentIndex\n        }]\n      });\n    };\n\n    BaseAxisPointer.prototype._onHandleDragEnd = function () {\n      this._dragging = false;\n      var handle = this._handle;\n\n      if (!handle) {\n        return;\n      }\n\n      var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n      // axisPointer. So move handle to align the exact value position when\n      // drag ended.\n\n\n      this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n      // button, and will be hidden after finger left handle button.\n\n\n      this._api.dispatchAction({\n        type: 'hideTip'\n      });\n    };\n    /**\n     * @private\n     */\n\n\n    BaseAxisPointer.prototype.clear = function (api) {\n      this._lastValue = null;\n      this._lastStatus = null;\n      var zr = api.getZr();\n      var group = this._group;\n      var handle = this._handle;\n\n      if (zr && group) {\n        this._lastGraphicKey = null;\n        group && zr.remove(group);\n        handle && zr.remove(handle);\n        this._group = null;\n        this._handle = null;\n        this._payloadInfo = null;\n      }\n\n      clear(this, '_doDispatchAxisPointer');\n    };\n    /**\n     * @protected\n     */\n\n\n    BaseAxisPointer.prototype.doClear = function () {// Implemented by sub-class if necessary.\n    };\n\n    BaseAxisPointer.prototype.buildLabel = function (xy, wh, xDimIndex) {\n      xDimIndex = xDimIndex || 0;\n      return {\n        x: xy[xDimIndex],\n        y: xy[1 - xDimIndex],\n        width: wh[xDimIndex],\n        height: wh[1 - xDimIndex]\n      };\n    };\n\n    return BaseAxisPointer;\n  }();\n\n  function updateProps$1(animationModel, moveAnimation, el, props) {\n    // Animation optimize.\n    if (!propsEqual(inner$7(el).lastProp, props)) {\n      inner$7(el).lastProp = props;\n      moveAnimation ? updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n    }\n  }\n\n  function propsEqual(lastProps, newProps) {\n    if (isObject(lastProps) && isObject(newProps)) {\n      var equals_1 = true;\n      each(newProps, function (item, key) {\n        equals_1 = equals_1 && propsEqual(lastProps[key], item);\n      });\n      return !!equals_1;\n    } else {\n      return lastProps === newProps;\n    }\n  }\n\n  function updateLabelShowHide(labelEl, axisPointerModel) {\n    labelEl[axisPointerModel.get(['label', 'show']) ? 'show' : 'hide']();\n  }\n\n  function getHandleTransProps(trans) {\n    return {\n      x: trans.x || 0,\n      y: trans.y || 0,\n      rotation: trans.rotation || 0\n    };\n  }\n\n  function updateMandatoryProps(group, axisPointerModel, silent) {\n    var z = axisPointerModel.get('z');\n    var zlevel = axisPointerModel.get('zlevel');\n    group && group.traverse(function (el) {\n      if (el.type !== 'group') {\n        z != null && (el.z = z);\n        zlevel != null && (el.zlevel = zlevel);\n        el.silent = silent;\n      }\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function buildElStyle(axisPointerModel) {\n    var axisPointerType = axisPointerModel.get('type');\n    var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n    var style;\n\n    if (axisPointerType === 'line') {\n      style = styleModel.getLineStyle();\n      style.fill = null;\n    } else if (axisPointerType === 'shadow') {\n      style = styleModel.getAreaStyle();\n      style.stroke = null;\n    }\n\n    return style;\n  }\n  /**\n   * @param {Function} labelPos {align, verticalAlign, position}\n   */\n\n\n  function buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n    var value = axisPointerModel.get('value');\n    var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n      precision: axisPointerModel.get(['label', 'precision']),\n      formatter: axisPointerModel.get(['label', 'formatter'])\n    });\n    var labelModel = axisPointerModel.getModel('label');\n    var paddings = normalizeCssArray$1(labelModel.get('padding') || 0);\n    var font = labelModel.getFont();\n    var textRect = getBoundingRect(text, font);\n    var position = labelPos.position;\n    var width = textRect.width + paddings[1] + paddings[3];\n    var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n    var align = labelPos.align;\n    align === 'right' && (position[0] -= width);\n    align === 'center' && (position[0] -= width / 2);\n    var verticalAlign = labelPos.verticalAlign;\n    verticalAlign === 'bottom' && (position[1] -= height);\n    verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n    confineInContainer(position, width, height, api);\n    var bgColor = labelModel.get('backgroundColor');\n\n    if (!bgColor || bgColor === 'auto') {\n      bgColor = axisModel.get(['axisLine', 'lineStyle', 'color']);\n    }\n\n    elOption.label = {\n      // shape: {x: 0, y: 0, width: width, height: height, r: labelModel.get('borderRadius')},\n      x: position[0],\n      y: position[1],\n      style: createTextStyle(labelModel, {\n        text: text,\n        font: font,\n        fill: labelModel.getTextColor(),\n        padding: paddings,\n        backgroundColor: bgColor\n      }),\n      // Lable should be over axisPointer.\n      z2: 10\n    };\n  } // Do not overflow ec container\n\n\n  function confineInContainer(position, width, height, api) {\n    var viewWidth = api.getWidth();\n    var viewHeight = api.getHeight();\n    position[0] = Math.min(position[0] + width, viewWidth) - width;\n    position[1] = Math.min(position[1] + height, viewHeight) - height;\n    position[0] = Math.max(position[0], 0);\n    position[1] = Math.max(position[1], 0);\n  }\n\n  function getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n    value = axis.scale.parse(value);\n    var text = axis.scale.getLabel({\n      value: value\n    }, {\n      // If `precision` is set, width can be fixed (like '12.00500'), which\n      // helps to debounce when when moving label.\n      precision: opt.precision\n    });\n    var formatter = opt.formatter;\n\n    if (formatter) {\n      var params_1 = {\n        value: getAxisRawValue(axis, {\n          value: value\n        }),\n        axisDimension: axis.dim,\n        axisIndex: axis.index,\n        seriesData: []\n      };\n      each(seriesDataIndices, function (idxItem) {\n        var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n        var dataIndex = idxItem.dataIndexInside;\n        var dataParams = series && series.getDataParams(dataIndex);\n        dataParams && params_1.seriesData.push(dataParams);\n      });\n\n      if (isString(formatter)) {\n        text = formatter.replace('{value}', text);\n      } else if (isFunction(formatter)) {\n        text = formatter(params_1);\n      }\n    }\n\n    return text;\n  }\n\n  function getTransformedPosition(axis, value, layoutInfo) {\n    var transform = create$1();\n    rotate(transform, transform, layoutInfo.rotation);\n    translate(transform, transform, layoutInfo.position);\n    return applyTransform$1([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n  }\n\n  function buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n    // @ts-ignore\n    var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n    layoutInfo.labelMargin = axisPointerModel.get(['label', 'margin']);\n    buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n      position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n      align: textLayout.textAlign,\n      verticalAlign: textLayout.textVerticalAlign\n    });\n  }\n\n  function makeLineShape(p1, p2, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x1: p1[xDimIndex],\n      y1: p1[1 - xDimIndex],\n      x2: p2[xDimIndex],\n      y2: p2[1 - xDimIndex]\n    };\n  }\n\n  function makeRectShape(xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var CartesianAxisPointer =\n  /** @class */\n  function (_super) {\n    __extends(CartesianAxisPointer, _super);\n\n    function CartesianAxisPointer() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @override\n     */\n\n\n    CartesianAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n      var axis = axisModel.axis;\n      var grid = axis.grid;\n      var axisPointerType = axisPointerModel.get('type');\n      var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n      var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n      if (axisPointerType && axisPointerType !== 'none') {\n        var elStyle = buildElStyle(axisPointerModel);\n        var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n        pointerOption.style = elStyle;\n        elOption.graphicKey = pointerOption.type;\n        elOption.pointer = pointerOption;\n      }\n\n      var layoutInfo = layout$1(grid.model, axisModel);\n      buildCartesianSingleLabelElOption( // @ts-ignore\n      value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n    };\n    /**\n     * @override\n     */\n\n\n    CartesianAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\n      var layoutInfo = layout$1(axisModel.axis.grid.model, axisModel, {\n        labelInside: false\n      }); // @ts-ignore\n\n      layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\n      var pos = getTransformedPosition(axisModel.axis, value, layoutInfo);\n      return {\n        x: pos[0],\n        y: pos[1],\n        rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n      };\n    };\n    /**\n     * @override\n     */\n\n\n    CartesianAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\n      var axis = axisModel.axis;\n      var grid = axis.grid;\n      var axisExtent = axis.getGlobalExtent(true);\n      var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n      var dimIndex = axis.dim === 'x' ? 0 : 1;\n      var currPosition = [transform.x, transform.y];\n      currPosition[dimIndex] += delta[dimIndex];\n      currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n      currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n      var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n      var cursorPoint = [cursorOtherValue, cursorOtherValue];\n      cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n      var tooltipOptions = [{\n        verticalAlign: 'middle'\n      }, {\n        align: 'center'\n      }];\n      return {\n        x: currPosition[0],\n        y: currPosition[1],\n        rotation: transform.rotation,\n        cursorPoint: cursorPoint,\n        tooltipOption: tooltipOptions[dimIndex]\n      };\n    };\n\n    return CartesianAxisPointer;\n  }(BaseAxisPointer);\n\n  function getCartesian(grid, axis) {\n    var opt = {};\n    opt[axis.dim + 'AxisIndex'] = axis.index;\n    return grid.getCartesian(opt);\n  }\n\n  var pointerShapeBuilder = {\n    line: function (axis, pixelValue, otherExtent) {\n      var targetShape = makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n      return {\n        type: 'Line',\n        subPixelOptimize: true,\n        shape: targetShape\n      };\n    },\n    shadow: function (axis, pixelValue, otherExtent) {\n      var bandWidth = Math.max(1, axis.getBandWidth());\n      var span = otherExtent[1] - otherExtent[0];\n      return {\n        type: 'Rect',\n        shape: makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n      };\n    }\n  };\n\n  function getAxisDimIndex(axis) {\n    return axis.dim === 'x' ? 0 : 1;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var AxisPointerModel =\n  /** @class */\n  function (_super) {\n    __extends(AxisPointerModel, _super);\n\n    function AxisPointerModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = AxisPointerModel.type;\n      return _this;\n    }\n\n    AxisPointerModel.type = 'axisPointer';\n    AxisPointerModel.defaultOption = {\n      // 'auto' means that show when triggered by tooltip or handle.\n      show: 'auto',\n      // zlevel: 0,\n      z: 50,\n      type: 'line',\n      // axispointer triggered by tootip determine snap automatically,\n      // see `modelHelper`.\n      snap: false,\n      triggerTooltip: true,\n      value: null,\n      status: null,\n      link: [],\n      // Do not set 'auto' here, otherwise global animation: false\n      // will not effect at this axispointer.\n      animation: null,\n      animationDurationUpdate: 200,\n      lineStyle: {\n        color: '#B9BEC9',\n        width: 1,\n        type: 'dashed'\n      },\n      shadowStyle: {\n        color: 'rgba(210,219,238,0.2)'\n      },\n      label: {\n        show: true,\n        formatter: null,\n        precision: 'auto',\n        margin: 3,\n        color: '#fff',\n        padding: [5, 7, 5, 7],\n        backgroundColor: 'auto',\n        borderColor: null,\n        borderWidth: 0,\n        borderRadius: 3\n      },\n      handle: {\n        show: false,\n        // eslint-disable-next-line\n        icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n        size: 45,\n        // handle margin is from symbol center to axis, which is stable when circular move.\n        margin: 50,\n        // color: '#1b8bbd'\n        // color: '#2f4554'\n        color: '#333',\n        shadowBlur: 3,\n        shadowColor: '#aaa',\n        shadowOffsetX: 0,\n        shadowOffsetY: 2,\n        // For mobile performance\n        throttle: 40\n      }\n    };\n    return AxisPointerModel;\n  }(ComponentModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var inner$8 = makeInner();\n  var each$4 = each;\n  /**\n   * @param {string} key\n   * @param {module:echarts/ExtensionAPI} api\n   * @param {Function} handler\n   *      param: {string} currTrigger\n   *      param: {Array.<number>} point\n   */\n\n  function register(key, api, handler) {\n    if (env.node) {\n      return;\n    }\n\n    var zr = api.getZr();\n    inner$8(zr).records || (inner$8(zr).records = {});\n    initGlobalListeners(zr, api);\n    var record = inner$8(zr).records[key] || (inner$8(zr).records[key] = {});\n    record.handler = handler;\n  }\n\n  function initGlobalListeners(zr, api) {\n    if (inner$8(zr).initialized) {\n      return;\n    }\n\n    inner$8(zr).initialized = true;\n    useHandler('click', curry(doEnter, 'click'));\n    useHandler('mousemove', curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n    useHandler('globalout', onLeave);\n\n    function useHandler(eventType, cb) {\n      zr.on(eventType, function (e) {\n        var dis = makeDispatchAction(api);\n        each$4(inner$8(zr).records, function (record) {\n          record && cb(record, e, dis.dispatchAction);\n        });\n        dispatchTooltipFinally(dis.pendings, api);\n      });\n    }\n  }\n\n  function dispatchTooltipFinally(pendings, api) {\n    var showLen = pendings.showTip.length;\n    var hideLen = pendings.hideTip.length;\n    var actuallyPayload;\n\n    if (showLen) {\n      actuallyPayload = pendings.showTip[showLen - 1];\n    } else if (hideLen) {\n      actuallyPayload = pendings.hideTip[hideLen - 1];\n    }\n\n    if (actuallyPayload) {\n      actuallyPayload.dispatchAction = null;\n      api.dispatchAction(actuallyPayload);\n    }\n  }\n\n  function onLeave(record, e, dispatchAction) {\n    record.handler('leave', null, dispatchAction);\n  }\n\n  function doEnter(currTrigger, record, e, dispatchAction) {\n    record.handler(currTrigger, e, dispatchAction);\n  }\n\n  function makeDispatchAction(api) {\n    var pendings = {\n      showTip: [],\n      hideTip: []\n    }; // FIXME\n    // better approach?\n    // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n    // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n    // So we have to add \"final stage\" to merge those dispatched actions.\n\n    var dispatchAction = function (payload) {\n      var pendingList = pendings[payload.type];\n\n      if (pendingList) {\n        pendingList.push(payload);\n      } else {\n        payload.dispatchAction = dispatchAction;\n        api.dispatchAction(payload);\n      }\n    };\n\n    return {\n      dispatchAction: dispatchAction,\n      pendings: pendings\n    };\n  }\n\n  function unregister(key, api) {\n    if (env.node) {\n      return;\n    }\n\n    var zr = api.getZr();\n    var record = (inner$8(zr).records || {})[key];\n\n    if (record) {\n      inner$8(zr).records[key] = null;\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var AxisPointerView =\n  /** @class */\n  function (_super) {\n    __extends(AxisPointerView, _super);\n\n    function AxisPointerView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = AxisPointerView.type;\n      return _this;\n    }\n\n    AxisPointerView.prototype.render = function (globalAxisPointerModel, ecModel, api) {\n      var globalTooltipModel = ecModel.getComponent('tooltip');\n      var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n      // AxisPointerView to be independent to Tooltip.\n\n      register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n        // If 'none', it is not controlled by mouse totally.\n        if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n          dispatchAction({\n            type: 'updateAxisPointer',\n            currTrigger: currTrigger,\n            x: e && e.offsetX,\n            y: e && e.offsetY\n          });\n        }\n      });\n    };\n\n    AxisPointerView.prototype.remove = function (ecModel, api) {\n      unregister('axisPointer', api);\n    };\n\n    AxisPointerView.prototype.dispose = function (ecModel, api) {\n      unregister('axisPointer', api);\n    };\n\n    AxisPointerView.type = 'axisPointer';\n    return AxisPointerView;\n  }(ComponentView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * @param finder contains {seriesIndex, dataIndex, dataIndexInside}\n   * @param ecModel\n   * @return  {point: [x, y], el: ...} point Will not be null.\n   */\n\n\n  function findPointFromSeries(finder, ecModel) {\n    var point = [];\n    var seriesIndex = finder.seriesIndex;\n    var seriesModel;\n\n    if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n      return {\n        point: []\n      };\n    }\n\n    var data = seriesModel.getData();\n    var dataIndex = queryDataIndex(data, finder);\n\n    if (dataIndex == null || dataIndex < 0 || isArray(dataIndex)) {\n      return {\n        point: []\n      };\n    }\n\n    var el = data.getItemGraphicEl(dataIndex);\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (seriesModel.getTooltipPosition) {\n      point = seriesModel.getTooltipPosition(dataIndex) || [];\n    } else if (coordSys && coordSys.dataToPoint) {\n      if (finder.isStacked) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var valueAxisDim = valueAxis.dim;\n        var baseAxisDim = baseAxis.dim;\n        var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n        var baseDim = data.mapDimension(baseAxisDim);\n        var stackedData = [];\n        stackedData[baseDataOffset] = data.get(baseDim, dataIndex);\n        stackedData[1 - baseDataOffset] = data.get(data.getCalculationInfo('stackResultDimension'), dataIndex);\n        point = coordSys.dataToPoint(stackedData) || [];\n      } else {\n        point = coordSys.dataToPoint(data.getValues(map(coordSys.dimensions, function (dim) {\n          return data.mapDimension(dim);\n        }), dataIndex)) || [];\n      }\n    } else if (el) {\n      // Use graphic bounding rect\n      var rect = el.getBoundingRect().clone();\n      rect.applyTransform(el.transform);\n      point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n    }\n\n    return {\n      point: point,\n      el: el\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var inner$9 = makeInner();\n  /**\n   * Basic logic: check all axis, if they do not demand show/highlight,\n   * then hide/downplay them.\n   *\n   * @return content of event obj for echarts.connect.\n   */\n\n  function axisTrigger(payload, ecModel, api) {\n    var currTrigger = payload.currTrigger;\n    var point = [payload.x, payload.y];\n    var finder = payload;\n    var dispatchAction = payload.dispatchAction || bind(api.dispatchAction, api);\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n    // See #6121. But we are not able to reproduce it yet.\n\n    if (!coordSysAxesInfo) {\n      return;\n    }\n\n    if (illegalPoint(point)) {\n      // Used in the default behavior of `connection`: use the sample seriesIndex\n      // and dataIndex. And also used in the tooltipView trigger.\n      point = findPointFromSeries({\n        seriesIndex: finder.seriesIndex,\n        // Do not use dataIndexInside from other ec instance.\n        // FIXME: auto detect it?\n        dataIndex: finder.dataIndex\n      }, ecModel).point;\n    }\n\n    var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n    // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n    // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n    // and dataIndex.\n\n    var inputAxesInfo = finder.axesInfo;\n    var axesInfo = coordSysAxesInfo.axesInfo;\n    var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n    var outputPayload = {};\n    var showValueMap = {};\n    var dataByCoordSys = {\n      list: [],\n      map: {}\n    };\n    var updaters = {\n      showPointer: curry(showPointer, showValueMap),\n      showTooltip: curry(showTooltip, dataByCoordSys)\n    }; // Process for triggered axes.\n\n    each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n      // If a point given, it must be contained by the coordinate system.\n      var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n      each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n        var axis = axisInfo.axis;\n        var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n        if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n          var val = inputAxisInfo && inputAxisInfo.value;\n\n          if (val == null && !isIllegalPoint) {\n            val = axis.pointToData(point);\n          }\n\n          val != null && processOnAxis(axisInfo, val, updaters, false, outputPayload);\n        }\n      });\n    }); // Process for linked axes.\n\n    var linkTriggers = {};\n    each(axesInfo, function (tarAxisInfo, tarKey) {\n      var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n      if (linkGroup && !showValueMap[tarKey]) {\n        each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n          var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n          if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n            var val = srcValItem.value;\n            linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n            linkTriggers[tarAxisInfo.key] = val;\n          }\n        });\n      }\n    });\n    each(linkTriggers, function (val, tarKey) {\n      processOnAxis(axesInfo[tarKey], val, updaters, true, outputPayload);\n    });\n    updateModelActually(showValueMap, axesInfo, outputPayload);\n    dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n    dispatchHighDownActually(axesInfo, dispatchAction, api);\n    return outputPayload;\n  }\n\n  function processOnAxis(axisInfo, newValue, updaters, noSnap, outputFinder) {\n    var axis = axisInfo.axis;\n\n    if (axis.scale.isBlank() || !axis.containData(newValue)) {\n      return;\n    }\n\n    if (!axisInfo.involveSeries) {\n      updaters.showPointer(axisInfo, newValue);\n      return;\n    } // Heavy calculation. So put it after axis.containData checking.\n\n\n    var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n    var payloadBatch = payloadInfo.payloadBatch;\n    var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n    // By default use the first involved series data as a sample to connect.\n\n    if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n      extend(outputFinder, payloadBatch[0]);\n    } // If no linkSource input, this process is for collecting link\n    // target, where snap should not be accepted.\n\n\n    if (!noSnap && axisInfo.snap) {\n      if (axis.containData(snapToValue) && snapToValue != null) {\n        newValue = snapToValue;\n      }\n    }\n\n    updaters.showPointer(axisInfo, newValue, payloadBatch); // Tooltip should always be snapToValue, otherwise there will be\n    // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n    updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n  }\n\n  function buildPayloadsBySeries(value, axisInfo) {\n    var axis = axisInfo.axis;\n    var dim = axis.dim;\n    var snapToValue = value;\n    var payloadBatch = [];\n    var minDist = Number.MAX_VALUE;\n    var minDiff = -1;\n    each(axisInfo.seriesModels, function (series, idx) {\n      var dataDim = series.getData().mapDimensionsAll(dim);\n      var seriesNestestValue;\n      var dataIndices;\n\n      if (series.getAxisTooltipData) {\n        var result = series.getAxisTooltipData(dataDim, value, axis);\n        dataIndices = result.dataIndices;\n        seriesNestestValue = result.nestestValue;\n      } else {\n        dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n        // when data length is not same.\n        // false,\n        axis.type === 'category' ? 0.5 : null);\n\n        if (!dataIndices.length) {\n          return;\n        }\n\n        seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n      }\n\n      if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n        return;\n      }\n\n      var diff = value - seriesNestestValue;\n      var dist = Math.abs(diff); // Consider category case\n\n      if (dist <= minDist) {\n        if (dist < minDist || diff >= 0 && minDiff < 0) {\n          minDist = dist;\n          minDiff = diff;\n          snapToValue = seriesNestestValue;\n          payloadBatch.length = 0;\n        }\n\n        each(dataIndices, function (dataIndex) {\n          payloadBatch.push({\n            seriesIndex: series.seriesIndex,\n            dataIndexInside: dataIndex,\n            dataIndex: series.getData().getRawIndex(dataIndex)\n          });\n        });\n      }\n    });\n    return {\n      payloadBatch: payloadBatch,\n      snapToValue: snapToValue\n    };\n  }\n\n  function showPointer(showValueMap, axisInfo, value, payloadBatch) {\n    showValueMap[axisInfo.key] = {\n      value: value,\n      payloadBatch: payloadBatch\n    };\n  }\n\n  function showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n    var payloadBatch = payloadInfo.payloadBatch;\n    var axis = axisInfo.axis;\n    var axisModel = axis.model;\n    var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n    // whose length will be used to judge whether dispatch action.\n\n    if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n      return;\n    }\n\n    var coordSysModel = axisInfo.coordSys.model;\n    var coordSysKey = makeKey(coordSysModel);\n    var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n    if (!coordSysItem) {\n      coordSysItem = dataByCoordSys.map[coordSysKey] = {\n        coordSysId: coordSysModel.id,\n        coordSysIndex: coordSysModel.componentIndex,\n        coordSysType: coordSysModel.type,\n        coordSysMainType: coordSysModel.mainType,\n        dataByAxis: []\n      };\n      dataByCoordSys.list.push(coordSysItem);\n    }\n\n    coordSysItem.dataByAxis.push({\n      axisDim: axis.dim,\n      axisIndex: axisModel.componentIndex,\n      axisType: axisModel.type,\n      axisId: axisModel.id,\n      value: value,\n      // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n      // depends that all models have been updated. So it should not be performed\n      // here. Considering axisPointerModel used here is volatile, which is hard\n      // to be retrieve in TooltipView, we prepare parameters here.\n      valueLabelOpt: {\n        precision: axisPointerModel.get(['label', 'precision']),\n        formatter: axisPointerModel.get(['label', 'formatter'])\n      },\n      seriesDataIndices: payloadBatch.slice()\n    });\n  }\n\n  function updateModelActually(showValueMap, axesInfo, outputPayload) {\n    var outputAxesInfo = outputPayload.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n    each(axesInfo, function (axisInfo, key) {\n      var option = axisInfo.axisPointerModel.option;\n      var valItem = showValueMap[key];\n\n      if (valItem) {\n        !axisInfo.useHandle && (option.status = 'show');\n        option.value = valItem.value; // For label formatter param and highlight.\n\n        option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n      } // When always show (e.g., handle used), remain\n      // original value and status.\n      else {\n          // If hide, value still need to be set, consider\n          // click legend to toggle axis blank.\n          !axisInfo.useHandle && (option.status = 'hide');\n        } // If status is 'hide', should be no info in payload.\n\n\n      option.status === 'show' && outputAxesInfo.push({\n        axisDim: axisInfo.axis.dim,\n        axisIndex: axisInfo.axis.model.componentIndex,\n        value: option.value\n      });\n    });\n  }\n\n  function dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n    // Basic logic: If no showTip required, hideTip will be dispatched.\n    if (illegalPoint(point) || !dataByCoordSys.list.length) {\n      dispatchAction({\n        type: 'hideTip'\n      });\n      return;\n    } // In most case only one axis (or event one series is used). It is\n    // convinient to fetch payload.seriesIndex and payload.dataIndex\n    // dirtectly. So put the first seriesIndex and dataIndex of the first\n    // axis on the payload.\n\n\n    var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n    dispatchAction({\n      type: 'showTip',\n      escapeConnect: true,\n      x: point[0],\n      y: point[1],\n      tooltipOption: payload.tooltipOption,\n      position: payload.position,\n      dataIndexInside: sampleItem.dataIndexInside,\n      dataIndex: sampleItem.dataIndex,\n      seriesIndex: sampleItem.seriesIndex,\n      dataByCoordSys: dataByCoordSys.list\n    });\n  }\n\n  function dispatchHighDownActually(axesInfo, dispatchAction, api) {\n    // FIXME\n    // highlight status modification shoule be a stage of main process?\n    // (Consider confilct (e.g., legend and axisPointer) and setOption)\n    var zr = api.getZr();\n    var highDownKey = 'axisPointerLastHighlights';\n    var lastHighlights = inner$9(zr)[highDownKey] || {};\n    var newHighlights = inner$9(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n    // Build hash map and remove duplicate incidentally.\n\n    each(axesInfo, function (axisInfo, key) {\n      var option = axisInfo.axisPointerModel.option;\n      option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n        var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n        newHighlights[key] = batchItem;\n      });\n    }); // Diff.\n\n    var toHighlight = [];\n    var toDownplay = [];\n    each(lastHighlights, function (batchItem, key) {\n      !newHighlights[key] && toDownplay.push(batchItem);\n    });\n    each(newHighlights, function (batchItem, key) {\n      !lastHighlights[key] && toHighlight.push(batchItem);\n    });\n    toDownplay.length && api.dispatchAction({\n      type: 'downplay',\n      escapeConnect: true,\n      // Not blur others when highlight in axisPointer.\n      notBlur: true,\n      batch: toDownplay\n    });\n    toHighlight.length && api.dispatchAction({\n      type: 'highlight',\n      escapeConnect: true,\n      // Not blur others when highlight in axisPointer.\n      notBlur: true,\n      batch: toHighlight\n    });\n  }\n\n  function findInputAxisInfo(inputAxesInfo, axisInfo) {\n    for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n      var inputAxisInfo = inputAxesInfo[i];\n\n      if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n        return inputAxisInfo;\n      }\n    }\n  }\n\n  function makeMapperParam(axisInfo) {\n    var axisModel = axisInfo.axis.model;\n    var item = {};\n    var dim = item.axisDim = axisInfo.axis.dim;\n    item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n    item.axisName = item[dim + 'AxisName'] = axisModel.name;\n    item.axisId = item[dim + 'AxisId'] = axisModel.id;\n    return item;\n  }\n\n  function illegalPoint(point) {\n    return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$11(registers) {\n    // CartesianAxisPointer is not supposed to be required here. But consider\n    // echarts.simple.js and online build tooltip, which only require gridSimple,\n    // CartesianAxisPointer should be able to required somewhere.\n    AxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\n    registers.registerComponentModel(AxisPointerModel);\n    registers.registerComponentView(AxisPointerView);\n    registers.registerPreprocessor(function (option) {\n      // Always has a global axisPointerModel for default setting.\n      if (option) {\n        (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n        var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n        // is not set, remain null/undefined, otherwise it will\n        // override existent link setting.\n\n        if (link && !isArray(link)) {\n          option.axisPointer.link = [link];\n        }\n      }\n    }); // This process should proformed after coordinate systems created\n    // and series data processed. So put it on statistic processing stage.\n\n    registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n      // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n      // allAxesInfo should be updated when setOption performed.\n      ecModel.getComponent('axisPointer').coordSysAxesInfo = collect(ecModel, api);\n    }); // Broadcast to all views.\n\n    registers.registerAction({\n      type: 'updateAxisPointer',\n      event: 'updateAxisPointer',\n      update: ':updateAxisPointer'\n    }, axisTrigger);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var TooltipModel =\n  /** @class */\n  function (_super) {\n    __extends(TooltipModel, _super);\n\n    function TooltipModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = TooltipModel.type;\n      return _this;\n    }\n\n    TooltipModel.type = 'tooltip';\n    TooltipModel.dependencies = ['axisPointer'];\n    TooltipModel.defaultOption = {\n      // zlevel: 0,\n      z: 60,\n      show: true,\n      // tooltip main content\n      showContent: true,\n      // 'trigger' only works on coordinate system.\n      // 'item' | 'axis' | 'none'\n      trigger: 'item',\n      // 'click' | 'mousemove' | 'none'\n      triggerOn: 'mousemove|click',\n      alwaysShowContent: false,\n      displayMode: 'single',\n      renderMode: 'auto',\n      // whether restraint content inside viewRect.\n      // If renderMode: 'richText', default true.\n      // If renderMode: 'html', defaut false (for backward compat).\n      confine: null,\n      showDelay: 0,\n      hideDelay: 100,\n      // Animation transition time, unit is second\n      transitionDuration: 0.4,\n      enterable: false,\n      backgroundColor: '#fff',\n      // box shadow\n      shadowBlur: 10,\n      shadowColor: 'rgba(0, 0, 0, .2)',\n      shadowOffsetX: 1,\n      shadowOffsetY: 2,\n      // tooltip border radius, unit is px, default is 4\n      borderRadius: 4,\n      // tooltip border width, unit is px, default is 0 (no border)\n      borderWidth: 1,\n      // Tooltip inside padding, default is 5 for all direction\n      // Array is allowed to set up, right, bottom, left, same with css\n      // The default value: See `tooltip/tooltipMarkup.ts#getPaddingFromTooltipModel`.\n      padding: null,\n      // Extra css text\n      extraCssText: '',\n      // axis indicator, trigger by axis\n      axisPointer: {\n        // default is line\n        // legal values: 'line' | 'shadow' | 'cross'\n        type: 'line',\n        // Valid when type is line, appoint tooltip line locate on which line. Optional\n        // legal values: 'x' | 'y' | 'angle' | 'radius' | 'auto'\n        // default is 'auto', chose the axis which type is category.\n        // for multiply y axis, cartesian coord chose x axis, polar chose angle axis\n        axis: 'auto',\n        animation: 'auto',\n        animationDurationUpdate: 200,\n        animationEasingUpdate: 'exponentialOut',\n        crossStyle: {\n          color: '#999',\n          width: 1,\n          type: 'dashed',\n          // TODO formatter\n          textStyle: {}\n        } // lineStyle and shadowStyle should not be specified here,\n        // otherwise it will always override those styles on option.axisPointer.\n\n      },\n      textStyle: {\n        color: '#666',\n        fontSize: 14\n      }\n    };\n    return TooltipModel;\n  }(ComponentModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /* global document */\n\n\n  function shouldTooltipConfine(tooltipModel) {\n    var confineOption = tooltipModel.get('confine');\n    return confineOption != null ? !!confineOption // In richText mode, the outside part can not be visible.\n    : tooltipModel.get('renderMode') === 'richText';\n  }\n\n  function testStyle(styleProps) {\n    if (!env.domSupported) {\n      return;\n    }\n\n    var style = document.documentElement.style;\n\n    for (var i = 0, len = styleProps.length; i < len; i++) {\n      if (styleProps[i] in style) {\n        return styleProps[i];\n      }\n    }\n  }\n\n  var TRANSFORM_VENDOR = testStyle(['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\n  var TRANSITION_VENDOR = testStyle(['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\n\n  function toCSSVendorPrefix(styleVendor, styleProp) {\n    if (!styleVendor) {\n      return styleProp;\n    }\n\n    styleProp = toCamelCase(styleProp, true);\n    var idx = styleVendor.indexOf(styleProp);\n    styleVendor = idx === -1 ? styleProp : \"-\" + styleVendor.slice(0, idx) + \"-\" + styleProp;\n    return styleVendor.toLowerCase();\n  }\n\n  function getComputedStyle(el, style) {\n    var stl = el.currentStyle || document.defaultView && document.defaultView.getComputedStyle(el);\n    return stl ? style ? stl[style] : stl : null;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /* global document, window */\n\n\n  var CSS_TRANSITION_VENDOR = toCSSVendorPrefix(TRANSITION_VENDOR, 'transition');\n  var CSS_TRANSFORM_VENDOR = toCSSVendorPrefix(TRANSFORM_VENDOR, 'transform'); // eslint-disable-next-line\n\n  var gCssText = \"position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;\" + (env.transform3dSupported ? 'will-change:transform;' : '');\n\n  function mirrorPos(pos) {\n    pos = pos === 'left' ? 'right' : pos === 'right' ? 'left' : pos === 'top' ? 'bottom' : 'top';\n    return pos;\n  }\n\n  function assembleArrow(tooltipModel, borderColor, arrowPosition) {\n    if (!isString(arrowPosition) || arrowPosition === 'inside') {\n      return '';\n    }\n\n    var backgroundColor = tooltipModel.get('backgroundColor');\n    var borderWidth = tooltipModel.get('borderWidth');\n    borderColor = convertToColorString(borderColor);\n    var arrowPos = mirrorPos(arrowPosition);\n    var arrowSize = Math.max(Math.round(borderWidth) * 1.5, 6);\n    var positionStyle = '';\n    var transformStyle = CSS_TRANSFORM_VENDOR + ':';\n    var rotateDeg;\n\n    if (indexOf(['left', 'right'], arrowPos) > -1) {\n      positionStyle += 'top:50%';\n      transformStyle += \"translateY(-50%) rotate(\" + (rotateDeg = arrowPos === 'left' ? -225 : -45) + \"deg)\";\n    } else {\n      positionStyle += 'left:50%';\n      transformStyle += \"translateX(-50%) rotate(\" + (rotateDeg = arrowPos === 'top' ? 225 : 45) + \"deg)\";\n    }\n\n    var rotateRadian = rotateDeg * Math.PI / 180;\n    var arrowWH = arrowSize + borderWidth;\n    var rotatedWH = arrowWH * Math.abs(Math.cos(rotateRadian)) + arrowWH * Math.abs(Math.sin(rotateRadian));\n    var arrowOffset = Math.round(((rotatedWH - Math.SQRT2 * borderWidth) / 2 + Math.SQRT2 * borderWidth - (rotatedWH - arrowWH) / 2) * 100) / 100;\n    positionStyle += \";\" + arrowPos + \":-\" + arrowOffset + \"px\";\n    var borderStyle = borderColor + \" solid \" + borderWidth + \"px;\";\n    var styleCss = [\"position:absolute;width:\" + arrowSize + \"px;height:\" + arrowSize + \"px;\", positionStyle + \";\" + transformStyle + \";\", \"border-bottom:\" + borderStyle, \"border-right:\" + borderStyle, \"background-color:\" + backgroundColor + \";\"];\n    return \"<div style=\\\"\" + styleCss.join('') + \"\\\"></div>\";\n  }\n\n  function assembleTransition(duration, onlyFade) {\n    var transitionCurve = 'cubic-bezier(0.23,1,0.32,1)';\n    var transitionOption = \" \" + duration / 2 + \"s \" + transitionCurve;\n    var transitionText = \"opacity\" + transitionOption + \",visibility\" + transitionOption;\n\n    if (!onlyFade) {\n      transitionOption = \" \" + duration + \"s \" + transitionCurve;\n      transitionText += env.transformSupported ? \",\" + CSS_TRANSFORM_VENDOR + transitionOption : \",left\" + transitionOption + \",top\" + transitionOption;\n    }\n\n    return CSS_TRANSITION_VENDOR + ':' + transitionText;\n  }\n\n  function assembleTransform(x, y, toString) {\n    // If using float on style, the final width of the dom might\n    // keep changing slightly while mouse move. So `toFixed(0)` them.\n    var x0 = x.toFixed(0) + 'px';\n    var y0 = y.toFixed(0) + 'px'; // not support transform, use `left` and `top` instead.\n\n    if (!env.transformSupported) {\n      return toString ? \"top:\" + y0 + \";left:\" + x0 + \";\" : [['top', y0], ['left', x0]];\n    } // support transform\n\n\n    var is3d = env.transform3dSupported;\n    var translate = \"translate\" + (is3d ? '3d' : '') + \"(\" + x0 + \",\" + y0 + (is3d ? ',0' : '') + \")\";\n    return toString ? 'top:0;left:0;' + CSS_TRANSFORM_VENDOR + ':' + translate + ';' : [['top', 0], ['left', 0], [TRANSFORM_VENDOR, translate]];\n  }\n  /**\n   * @param {Object} textStyle\n   * @return {string}\n   * @inner\n   */\n\n\n  function assembleFont(textStyleModel) {\n    var cssText = [];\n    var fontSize = textStyleModel.get('fontSize');\n    var color = textStyleModel.getTextColor();\n    color && cssText.push('color:' + color);\n    cssText.push('font:' + textStyleModel.getFont());\n    fontSize // @ts-ignore, leave it to the tooltip refactor.\n    && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n    var shadowColor = textStyleModel.get('textShadowColor');\n    var shadowBlur = textStyleModel.get('textShadowBlur') || 0;\n    var shadowOffsetX = textStyleModel.get('textShadowOffsetX') || 0;\n    var shadowOffsetY = textStyleModel.get('textShadowOffsetY') || 0;\n    shadowColor && shadowBlur && cssText.push('text-shadow:' + shadowOffsetX + 'px ' + shadowOffsetY + 'px ' + shadowBlur + 'px ' + shadowColor);\n    each(['decoration', 'align'], function (name) {\n      var val = textStyleModel.get(name);\n      val && cssText.push('text-' + name + ':' + val);\n    });\n    return cssText.join(';');\n  }\n\n  function assembleCssText(tooltipModel, enableTransition, onlyFade) {\n    var cssText = [];\n    var transitionDuration = tooltipModel.get('transitionDuration');\n    var backgroundColor = tooltipModel.get('backgroundColor');\n    var shadowBlur = tooltipModel.get('shadowBlur');\n    var shadowColor = tooltipModel.get('shadowColor');\n    var shadowOffsetX = tooltipModel.get('shadowOffsetX');\n    var shadowOffsetY = tooltipModel.get('shadowOffsetY');\n    var textStyleModel = tooltipModel.getModel('textStyle');\n    var padding = getPaddingFromTooltipModel(tooltipModel, 'html');\n    var boxShadow = shadowOffsetX + \"px \" + shadowOffsetY + \"px \" + shadowBlur + \"px \" + shadowColor;\n    cssText.push('box-shadow:' + boxShadow); // Animation transition. Do not animate when transitionDuration is 0.\n\n    enableTransition && transitionDuration && cssText.push(assembleTransition(transitionDuration, onlyFade));\n\n    if (backgroundColor) {\n      cssText.push('background-color:' + backgroundColor);\n    } // Border style\n\n\n    each(['width', 'color', 'radius'], function (name) {\n      var borderName = 'border-' + name;\n      var camelCase = toCamelCase(borderName);\n      var val = tooltipModel.get(camelCase);\n      val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n    }); // Text style\n\n    cssText.push(assembleFont(textStyleModel)); // Padding\n\n    if (padding != null) {\n      cssText.push('padding:' + normalizeCssArray$1(padding).join('px ') + 'px');\n    }\n\n    return cssText.join(';') + ';';\n  } // If not able to make, do not modify the input `out`.\n\n\n  function makeStyleCoord(out, zr, appendToBody, zrX, zrY) {\n    var zrPainter = zr && zr.painter;\n\n    if (appendToBody) {\n      var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n\n      if (zrViewportRoot) {\n        // Some APPs might use scale on body, so we support CSS transform here.\n        transformLocalCoord(out, zrViewportRoot, document.body, zrX, zrY);\n      }\n    } else {\n      out[0] = zrX;\n      out[1] = zrY; // xy should be based on canvas root. But tooltipContent is\n      // the sibling of canvas root. So padding of ec container\n      // should be considered here.\n\n      var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n\n      if (viewportRootOffset) {\n        out[0] += viewportRootOffset.offsetLeft;\n        out[1] += viewportRootOffset.offsetTop;\n      }\n    }\n\n    out[2] = out[0] / zr.getWidth();\n    out[3] = out[1] / zr.getHeight();\n  }\n\n  var TooltipHTMLContent =\n  /** @class */\n  function () {\n    function TooltipHTMLContent(container, api, opt) {\n      this._show = false;\n      this._styleCoord = [0, 0, 0, 0];\n      this._enterable = true;\n      this._firstShow = true;\n      this._longHide = true;\n\n      if (env.wxa) {\n        return null;\n      }\n\n      var el = document.createElement('div'); // TODO: TYPE\n\n      el.domBelongToZr = true;\n      this.el = el;\n      var zr = this._zr = api.getZr();\n      var appendToBody = this._appendToBody = opt && opt.appendToBody;\n      makeStyleCoord(this._styleCoord, zr, appendToBody, api.getWidth() / 2, api.getHeight() / 2);\n\n      if (appendToBody) {\n        document.body.appendChild(el);\n      } else {\n        container.appendChild(el);\n      }\n\n      this._container = container; // FIXME\n      // Is it needed to trigger zr event manually if\n      // the browser do not support `pointer-events: none`.\n\n      var self = this;\n\n      el.onmouseenter = function () {\n        // clear the timeout in hideLater and keep showing tooltip\n        if (self._enterable) {\n          clearTimeout(self._hideTimeout);\n          self._show = true;\n        }\n\n        self._inContent = true;\n      };\n\n      el.onmousemove = function (e) {\n        e = e || window.event;\n\n        if (!self._enterable) {\n          // `pointer-events: none` is set to tooltip content div\n          // if `enterable` is set as `false`, and `el.onmousemove`\n          // can not be triggered. But in browser that do not\n          // support `pointer-events`, we need to do this:\n          // Try trigger zrender event to avoid mouse\n          // in and out shape too frequently\n          var handler = zr.handler;\n          var zrViewportRoot = zr.painter.getViewportRoot();\n          normalizeEvent(zrViewportRoot, e, true);\n          handler.dispatch('mousemove', e);\n        }\n      };\n\n      el.onmouseleave = function () {\n        // set `_inContent` to `false` before `hideLater`\n        self._inContent = false;\n\n        if (self._enterable) {\n          if (self._show) {\n            self.hideLater(self._hideDelay);\n          }\n        }\n      };\n    }\n    /**\n     * Update when tooltip is rendered\n     */\n\n\n    TooltipHTMLContent.prototype.update = function (tooltipModel) {\n      // FIXME\n      // Move this logic to ec main?\n      var container = this._container;\n      var position = getComputedStyle(container, 'position');\n      var domStyle = container.style;\n\n      if (domStyle.position !== 'absolute' && position !== 'absolute') {\n        domStyle.position = 'relative';\n      } // move tooltip if chart resized\n\n\n      var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n      alwaysShowContent && this._moveIfResized(); // update className\n\n      this.el.className = tooltipModel.get('className') || ''; // Hide the tooltip\n      // PENDING\n      // this.hide();\n    };\n\n    TooltipHTMLContent.prototype.show = function (tooltipModel, nearPointColor) {\n      clearTimeout(this._hideTimeout);\n      clearTimeout(this._longHideTimeout);\n      var el = this.el;\n      var style = el.style;\n      var styleCoord = this._styleCoord;\n\n      if (!el.innerHTML) {\n        style.display = 'none';\n      } else {\n        style.cssText = gCssText + assembleCssText(tooltipModel, !this._firstShow, this._longHide) // initial transform\n        + assembleTransform(styleCoord[0], styleCoord[1], true) + (\"border-color:\" + convertToColorString(nearPointColor) + \";\") + (tooltipModel.get('extraCssText') || '') // If mouse occasionally move over the tooltip, a mouseout event will be\n        // triggered by canvas, and cause some unexpectable result like dragging\n        // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n        // it. Although it is not supported by IE8~IE10, fortunately it is a rare\n        // scenario.\n        + (\";pointer-events:\" + (this._enterable ? 'auto' : 'none'));\n      }\n\n      this._show = true;\n      this._firstShow = false;\n      this._longHide = false;\n    };\n\n    TooltipHTMLContent.prototype.setContent = function (content, markers, tooltipModel, borderColor, arrowPosition) {\n      var el = this.el;\n\n      if (content == null) {\n        el.innerHTML = '';\n        return;\n      }\n\n      var arrow = '';\n\n      if (isString(arrowPosition) && tooltipModel.get('trigger') === 'item' && !shouldTooltipConfine(tooltipModel)) {\n        arrow = assembleArrow(tooltipModel, borderColor, arrowPosition);\n      }\n\n      if (isString(content)) {\n        el.innerHTML = content + arrow;\n      } else if (content) {\n        // Clear previous\n        el.innerHTML = '';\n\n        if (!isArray(content)) {\n          content = [content];\n        }\n\n        for (var i = 0; i < content.length; i++) {\n          if (isDom(content[i]) && content[i].parentNode !== el) {\n            el.appendChild(content[i]);\n          }\n        } // no arrow if empty\n\n\n        if (arrow && el.childNodes.length) {\n          // no need to create a new parent element, but it's not supported by IE 10 and older.\n          // const arrowEl = document.createRange().createContextualFragment(arrow);\n          var arrowEl = document.createElement('div');\n          arrowEl.innerHTML = arrow;\n          el.appendChild(arrowEl);\n        }\n      }\n    };\n\n    TooltipHTMLContent.prototype.setEnterable = function (enterable) {\n      this._enterable = enterable;\n    };\n\n    TooltipHTMLContent.prototype.getSize = function () {\n      var el = this.el;\n      return [el.offsetWidth, el.offsetHeight];\n    };\n\n    TooltipHTMLContent.prototype.moveTo = function (zrX, zrY) {\n      var styleCoord = this._styleCoord;\n      makeStyleCoord(styleCoord, this._zr, this._appendToBody, zrX, zrY);\n\n      if (styleCoord[0] != null && styleCoord[1] != null) {\n        var style_1 = this.el.style;\n        var transforms = assembleTransform(styleCoord[0], styleCoord[1]);\n        each(transforms, function (transform) {\n          style_1[transform[0]] = transform[1];\n        });\n      }\n    };\n    /**\n     * when `alwaysShowContent` is true,\n     * move the tooltip after chart resized\n     */\n\n\n    TooltipHTMLContent.prototype._moveIfResized = function () {\n      // The ratio of left to width\n      var ratioX = this._styleCoord[2]; // The ratio of top to height\n\n      var ratioY = this._styleCoord[3];\n      this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n    };\n\n    TooltipHTMLContent.prototype.hide = function () {\n      var _this = this;\n\n      var style = this.el.style;\n      style.visibility = 'hidden';\n      style.opacity = '0';\n      env.transform3dSupported && (style.willChange = '');\n      this._show = false;\n      this._longHideTimeout = setTimeout(function () {\n        return _this._longHide = true;\n      }, 500);\n    };\n\n    TooltipHTMLContent.prototype.hideLater = function (time) {\n      if (this._show && !(this._inContent && this._enterable)) {\n        if (time) {\n          this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n          this._show = false;\n          this._hideTimeout = setTimeout(bind(this.hide, this), time);\n        } else {\n          this.hide();\n        }\n      }\n    };\n\n    TooltipHTMLContent.prototype.isShow = function () {\n      return this._show;\n    };\n\n    TooltipHTMLContent.prototype.dispose = function () {\n      this.el.parentNode.removeChild(this.el);\n    };\n\n    return TooltipHTMLContent;\n  }();\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var TooltipRichContent =\n  /** @class */\n  function () {\n    function TooltipRichContent(api) {\n      this._show = false;\n      this._styleCoord = [0, 0, 0, 0];\n      this._enterable = true;\n      this._zr = api.getZr();\n      makeStyleCoord$1(this._styleCoord, this._zr, api.getWidth() / 2, api.getHeight() / 2);\n    }\n    /**\n     * Update when tooltip is rendered\n     */\n\n\n    TooltipRichContent.prototype.update = function (tooltipModel) {\n      var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n      alwaysShowContent && this._moveIfResized();\n    };\n\n    TooltipRichContent.prototype.show = function () {\n      if (this._hideTimeout) {\n        clearTimeout(this._hideTimeout);\n      }\n\n      this.el.show();\n      this._show = true;\n    };\n    /**\n     * Set tooltip content\n     */\n\n\n    TooltipRichContent.prototype.setContent = function (content, markupStyleCreator, tooltipModel, borderColor, arrowPosition) {\n      var _this = this;\n\n      if (isObject(content)) {\n        throwError('Passing DOM nodes as content is not supported in richText tooltip!');\n      }\n\n      if (this.el) {\n        this._zr.remove(this.el);\n      }\n\n      var textStyleModel = tooltipModel.getModel('textStyle');\n      this.el = new ZRText({\n        style: {\n          rich: markupStyleCreator.richTextStyles,\n          text: content,\n          lineHeight: 22,\n          borderWidth: 1,\n          borderColor: borderColor,\n          textShadowColor: textStyleModel.get('textShadowColor'),\n          fill: tooltipModel.get(['textStyle', 'color']),\n          padding: getPaddingFromTooltipModel(tooltipModel, 'richText'),\n          verticalAlign: 'top',\n          align: 'left'\n        },\n        z: tooltipModel.get('z')\n      });\n      each(['backgroundColor', 'borderRadius', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'], function (propName) {\n        _this.el.style[propName] = tooltipModel.get(propName);\n      });\n      each(['textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'], function (propName) {\n        _this.el.style[propName] = textStyleModel.get(propName) || 0;\n      });\n\n      this._zr.add(this.el);\n\n      var self = this;\n      this.el.on('mouseover', function () {\n        // clear the timeout in hideLater and keep showing tooltip\n        if (self._enterable) {\n          clearTimeout(self._hideTimeout);\n          self._show = true;\n        }\n\n        self._inContent = true;\n      });\n      this.el.on('mouseout', function () {\n        if (self._enterable) {\n          if (self._show) {\n            self.hideLater(self._hideDelay);\n          }\n        }\n\n        self._inContent = false;\n      });\n    };\n\n    TooltipRichContent.prototype.setEnterable = function (enterable) {\n      this._enterable = enterable;\n    };\n\n    TooltipRichContent.prototype.getSize = function () {\n      var el = this.el;\n      var bounding = this.el.getBoundingRect(); // bounding rect does not include shadow. For renderMode richText,\n      // if overflow, it will be cut. So calculate them accurately.\n\n      var shadowOuterSize = calcShadowOuterSize(el.style);\n      return [bounding.width + shadowOuterSize.left + shadowOuterSize.right, bounding.height + shadowOuterSize.top + shadowOuterSize.bottom];\n    };\n\n    TooltipRichContent.prototype.moveTo = function (x, y) {\n      var el = this.el;\n\n      if (el) {\n        var styleCoord = this._styleCoord;\n        makeStyleCoord$1(styleCoord, this._zr, x, y);\n        x = styleCoord[0];\n        y = styleCoord[1];\n        var style = el.style;\n        var borderWidth = mathMaxWith0(style.borderWidth || 0);\n        var shadowOuterSize = calcShadowOuterSize(style); // rich text x, y do not include border.\n\n        el.x = x + borderWidth + shadowOuterSize.left;\n        el.y = y + borderWidth + shadowOuterSize.top;\n        el.markRedraw();\n      }\n    };\n    /**\n     * when `alwaysShowContent` is true,\n     * move the tooltip after chart resized\n     */\n\n\n    TooltipRichContent.prototype._moveIfResized = function () {\n      // The ratio of left to width\n      var ratioX = this._styleCoord[2]; // The ratio of top to height\n\n      var ratioY = this._styleCoord[3];\n      this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n    };\n\n    TooltipRichContent.prototype.hide = function () {\n      if (this.el) {\n        this.el.hide();\n      }\n\n      this._show = false;\n    };\n\n    TooltipRichContent.prototype.hideLater = function (time) {\n      if (this._show && !(this._inContent && this._enterable)) {\n        if (time) {\n          this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n          this._show = false;\n          this._hideTimeout = setTimeout(bind(this.hide, this), time);\n        } else {\n          this.hide();\n        }\n      }\n    };\n\n    TooltipRichContent.prototype.isShow = function () {\n      return this._show;\n    };\n\n    TooltipRichContent.prototype.dispose = function () {\n      this._zr.remove(this.el);\n    };\n\n    return TooltipRichContent;\n  }();\n\n  function mathMaxWith0(val) {\n    return Math.max(0, val);\n  }\n\n  function calcShadowOuterSize(style) {\n    var shadowBlur = mathMaxWith0(style.shadowBlur || 0);\n    var shadowOffsetX = mathMaxWith0(style.shadowOffsetX || 0);\n    var shadowOffsetY = mathMaxWith0(style.shadowOffsetY || 0);\n    return {\n      left: mathMaxWith0(shadowBlur - shadowOffsetX),\n      right: mathMaxWith0(shadowBlur + shadowOffsetX),\n      top: mathMaxWith0(shadowBlur - shadowOffsetY),\n      bottom: mathMaxWith0(shadowBlur + shadowOffsetY)\n    };\n  }\n\n  function makeStyleCoord$1(out, zr, zrX, zrY) {\n    out[0] = zrX;\n    out[1] = zrY;\n    out[2] = out[0] / zr.getWidth();\n    out[3] = out[1] / zr.getHeight();\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var proxyRect = new Rect({\n    shape: {\n      x: -1,\n      y: -1,\n      width: 2,\n      height: 2\n    }\n  });\n\n  var TooltipView =\n  /** @class */\n  function (_super) {\n    __extends(TooltipView, _super);\n\n    function TooltipView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = TooltipView.type;\n      return _this;\n    }\n\n    TooltipView.prototype.init = function (ecModel, api) {\n      if (env.node || !api.getDom()) {\n        return;\n      }\n\n      var tooltipModel = ecModel.getComponent('tooltip');\n      var renderMode = this._renderMode = getTooltipRenderMode(tooltipModel.get('renderMode'));\n      this._tooltipContent = renderMode === 'richText' ? new TooltipRichContent(api) : new TooltipHTMLContent(api.getDom(), api, {\n        appendToBody: tooltipModel.get('appendToBody', true)\n      });\n    };\n\n    TooltipView.prototype.render = function (tooltipModel, ecModel, api) {\n      if (env.node || !api.getDom()) {\n        return;\n      } // Reset\n\n\n      this.group.removeAll();\n      this._tooltipModel = tooltipModel;\n      this._ecModel = ecModel;\n      this._api = api;\n      /**\n       * @private\n       * @type {boolean}\n       */\n\n      this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n      var tooltipContent = this._tooltipContent;\n      tooltipContent.update(tooltipModel);\n      tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n      this._initGlobalListener();\n\n      this._keepShow(); // PENDING\n      // `mousemove` event will be triggered very frequently when the mouse moves fast,\n      // which causes that the `updatePosition` function was also called frequently.\n      // In Chrome with devtools open and Firefox, tooltip looks laggy and shakes. See #14695 #16101\n      // To avoid frequent triggering,\n      // consider throttling it in 50ms when transition is enabled\n\n\n      if (this._renderMode !== 'richText' && tooltipModel.get('transitionDuration')) {\n        createOrUpdate(this, '_updatePosition', 50, 'fixRate');\n      } else {\n        clear(this, '_updatePosition');\n      }\n    };\n\n    TooltipView.prototype._initGlobalListener = function () {\n      var tooltipModel = this._tooltipModel;\n      var triggerOn = tooltipModel.get('triggerOn');\n      register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n        // If 'none', it is not controlled by mouse totally.\n        if (triggerOn !== 'none') {\n          if (triggerOn.indexOf(currTrigger) >= 0) {\n            this._tryShow(e, dispatchAction);\n          } else if (currTrigger === 'leave') {\n            this._hide(dispatchAction);\n          }\n        }\n      }, this));\n    };\n\n    TooltipView.prototype._keepShow = function () {\n      var tooltipModel = this._tooltipModel;\n      var ecModel = this._ecModel;\n      var api = this._api;\n      var triggerOn = tooltipModel.get('triggerOn'); // Try to keep the tooltip show when refreshing\n\n      if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n      // self.manuallyShowTip({x, y}) might cause tooltip hide,\n      // which is not expected.\n      && triggerOn !== 'none' && triggerOn !== 'click') {\n        var self_1 = this;\n        clearTimeout(this._refreshUpdateTimeout);\n        this._refreshUpdateTimeout = setTimeout(function () {\n          // Show tip next tick after other charts are rendered\n          // In case highlight action has wrong result\n          // FIXME\n          !api.isDisposed() && self_1.manuallyShowTip(tooltipModel, ecModel, api, {\n            x: self_1._lastX,\n            y: self_1._lastY,\n            dataByCoordSys: self_1._lastDataByCoordSys\n          });\n        });\n      }\n    };\n    /**\n     * Show tip manually by\n     * dispatchAction({\n     *     type: 'showTip',\n     *     x: 10,\n     *     y: 10\n     * });\n     * Or\n     * dispatchAction({\n     *      type: 'showTip',\n     *      seriesIndex: 0,\n     *      dataIndex or dataIndexInside or name\n     * });\n     *\n     *  TODO Batch\n     */\n\n\n    TooltipView.prototype.manuallyShowTip = function (tooltipModel, ecModel, api, payload) {\n      if (payload.from === this.uid || env.node || !api.getDom()) {\n        return;\n      }\n\n      var dispatchAction = makeDispatchAction$1(payload, api); // Reset ticket\n\n      this._ticket = ''; // When triggered from axisPointer.\n\n      var dataByCoordSys = payload.dataByCoordSys;\n      var cmptRef = findComponentReference(payload, ecModel, api);\n\n      if (cmptRef) {\n        var rect = cmptRef.el.getBoundingRect().clone();\n        rect.applyTransform(cmptRef.el.transform);\n\n        this._tryShow({\n          offsetX: rect.x + rect.width / 2,\n          offsetY: rect.y + rect.height / 2,\n          target: cmptRef.el,\n          position: payload.position,\n          // When manully trigger, the mouse is not on the el, so we'd better to\n          // position tooltip on the bottom of the el and display arrow is possible.\n          positionDefault: 'bottom'\n        }, dispatchAction);\n      } else if (payload.tooltip && payload.x != null && payload.y != null) {\n        var el = proxyRect;\n        el.x = payload.x;\n        el.y = payload.y;\n        el.update();\n        getECData(el).tooltipConfig = {\n          name: null,\n          option: payload.tooltip\n        }; // Manually show tooltip while view is not using zrender elements.\n\n        this._tryShow({\n          offsetX: payload.x,\n          offsetY: payload.y,\n          target: el\n        }, dispatchAction);\n      } else if (dataByCoordSys) {\n        this._tryShow({\n          offsetX: payload.x,\n          offsetY: payload.y,\n          position: payload.position,\n          dataByCoordSys: dataByCoordSys,\n          tooltipOption: payload.tooltipOption\n        }, dispatchAction);\n      } else if (payload.seriesIndex != null) {\n        if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n          return;\n        }\n\n        var pointInfo = findPointFromSeries(payload, ecModel);\n        var cx = pointInfo.point[0];\n        var cy = pointInfo.point[1];\n\n        if (cx != null && cy != null) {\n          this._tryShow({\n            offsetX: cx,\n            offsetY: cy,\n            target: pointInfo.el,\n            position: payload.position,\n            // When manully trigger, the mouse is not on the el, so we'd better to\n            // position tooltip on the bottom of the el and display arrow is possible.\n            positionDefault: 'bottom'\n          }, dispatchAction);\n        }\n      } else if (payload.x != null && payload.y != null) {\n        // FIXME\n        // should wrap dispatchAction like `axisPointer/globalListener` ?\n        api.dispatchAction({\n          type: 'updateAxisPointer',\n          x: payload.x,\n          y: payload.y\n        });\n\n        this._tryShow({\n          offsetX: payload.x,\n          offsetY: payload.y,\n          position: payload.position,\n          target: api.getZr().findHover(payload.x, payload.y).target\n        }, dispatchAction);\n      }\n    };\n\n    TooltipView.prototype.manuallyHideTip = function (tooltipModel, ecModel, api, payload) {\n      var tooltipContent = this._tooltipContent;\n\n      if (!this._alwaysShowContent && this._tooltipModel) {\n        tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n      }\n\n      this._lastX = this._lastY = this._lastDataByCoordSys = null;\n\n      if (payload.from !== this.uid) {\n        this._hide(makeDispatchAction$1(payload, api));\n      }\n    }; // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n    // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n    // and tooltip.\n\n\n    TooltipView.prototype._manuallyAxisShowTip = function (tooltipModel, ecModel, api, payload) {\n      var seriesIndex = payload.seriesIndex;\n      var dataIndex = payload.dataIndex; // @ts-ignore\n\n      var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n      if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n        return;\n      }\n\n      var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n      if (!seriesModel) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      var tooltipCascadedModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model], this._tooltipModel);\n\n      if (tooltipCascadedModel.get('trigger') !== 'axis') {\n        return;\n      }\n\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        seriesIndex: seriesIndex,\n        dataIndex: dataIndex,\n        position: payload.position\n      });\n      return true;\n    };\n\n    TooltipView.prototype._tryShow = function (e, dispatchAction) {\n      var el = e.target;\n      var tooltipModel = this._tooltipModel;\n\n      if (!tooltipModel) {\n        return;\n      } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n      this._lastX = e.offsetX;\n      this._lastY = e.offsetY;\n      var dataByCoordSys = e.dataByCoordSys;\n\n      if (dataByCoordSys && dataByCoordSys.length) {\n        this._showAxisTooltip(dataByCoordSys, e);\n      } else if (el) {\n        this._lastDataByCoordSys = null;\n        var seriesDispatcher_1;\n        var cmptDispatcher_1;\n        findEventDispatcher(el, function (target) {\n          // Always show item tooltip if mouse is on the element with dataIndex\n          if (getECData(target).dataIndex != null) {\n            seriesDispatcher_1 = target;\n            return true;\n          } // Tooltip provided directly. Like legend.\n\n\n          if (getECData(target).tooltipConfig != null) {\n            cmptDispatcher_1 = target;\n            return true;\n          }\n        }, true);\n\n        if (seriesDispatcher_1) {\n          this._showSeriesItemTooltip(e, seriesDispatcher_1, dispatchAction);\n        } else if (cmptDispatcher_1) {\n          this._showComponentItemTooltip(e, cmptDispatcher_1, dispatchAction);\n        } else {\n          this._hide(dispatchAction);\n        }\n      } else {\n        this._lastDataByCoordSys = null;\n\n        this._hide(dispatchAction);\n      }\n    };\n\n    TooltipView.prototype._showOrMove = function (tooltipModel, cb) {\n      // showDelay is used in this case: tooltip.enterable is set\n      // as true. User intent to move mouse into tooltip and click\n      // something. `showDelay` makes it easier to enter the content\n      // but tooltip do not move immediately.\n      var delay = tooltipModel.get('showDelay');\n      cb = bind(cb, this);\n      clearTimeout(this._showTimout);\n      delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n    };\n\n    TooltipView.prototype._showAxisTooltip = function (dataByCoordSys, e) {\n      var ecModel = this._ecModel;\n      var globalTooltipModel = this._tooltipModel;\n      var point = [e.offsetX, e.offsetY];\n      var singleTooltipModel = buildTooltipModel([e.tooltipOption], globalTooltipModel);\n      var renderMode = this._renderMode;\n      var cbParamsList = [];\n      var articleMarkup = createTooltipMarkup('section', {\n        blocks: [],\n        noHeader: true\n      }); // Only for legacy: `Serise['formatTooltip']` returns a string.\n\n      var markupTextArrLegacy = [];\n      var markupStyleCreator = new TooltipMarkupStyleCreator();\n      each(dataByCoordSys, function (itemCoordSys) {\n        each(itemCoordSys.dataByAxis, function (axisItem) {\n          var axisModel = ecModel.getComponent(axisItem.axisDim + 'Axis', axisItem.axisIndex);\n          var axisValue = axisItem.value;\n\n          if (!axisModel || axisValue == null) {\n            return;\n          }\n\n          var axisValueLabel = getValueLabel(axisValue, axisModel.axis, ecModel, axisItem.seriesDataIndices, axisItem.valueLabelOpt);\n          var axisSectionMarkup = createTooltipMarkup('section', {\n            header: axisValueLabel,\n            noHeader: !trim(axisValueLabel),\n            sortBlocks: true,\n            blocks: []\n          });\n          articleMarkup.blocks.push(axisSectionMarkup);\n          each(axisItem.seriesDataIndices, function (idxItem) {\n            var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n            var dataIndex = idxItem.dataIndexInside;\n            var cbParams = series.getDataParams(dataIndex); // Can't find data.\n\n            if (cbParams.dataIndex < 0) {\n              return;\n            }\n\n            cbParams.axisDim = axisItem.axisDim;\n            cbParams.axisIndex = axisItem.axisIndex;\n            cbParams.axisType = axisItem.axisType;\n            cbParams.axisId = axisItem.axisId;\n            cbParams.axisValue = getAxisRawValue(axisModel.axis, {\n              value: axisValue\n            });\n            cbParams.axisValueLabel = axisValueLabel; // Pre-create marker style for makers. Users can assemble richText\n            // text in `formatter` callback and use those markers style.\n\n            cbParams.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(cbParams.color), renderMode);\n            var seriesTooltipResult = normalizeTooltipFormatResult(series.formatTooltip(dataIndex, true, null));\n            var frag = seriesTooltipResult.frag;\n\n            if (frag) {\n              var valueFormatter = buildTooltipModel([series], globalTooltipModel).get('valueFormatter');\n              axisSectionMarkup.blocks.push(valueFormatter ? extend({\n                valueFormatter: valueFormatter\n              }, frag) : frag);\n            }\n\n            if (seriesTooltipResult.text) {\n              markupTextArrLegacy.push(seriesTooltipResult.text);\n            }\n\n            cbParamsList.push(cbParams);\n          });\n        });\n      }); // In most cases, the second axis is displays upper on the first one.\n      // So we reverse it to look better.\n\n      articleMarkup.blocks.reverse();\n      markupTextArrLegacy.reverse();\n      var positionExpr = e.position;\n      var orderMode = singleTooltipModel.get('order');\n      var builtMarkupText = buildTooltipMarkup(articleMarkup, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), singleTooltipModel.get('textStyle'));\n      builtMarkupText && markupTextArrLegacy.unshift(builtMarkupText);\n      var blockBreak = renderMode === 'richText' ? '\\n\\n' : '<br/>';\n      var allMarkupText = markupTextArrLegacy.join(blockBreak);\n\n      this._showOrMove(singleTooltipModel, function () {\n        if (this._updateContentNotChangedOnAxis(dataByCoordSys, cbParamsList)) {\n          this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, cbParamsList);\n        } else {\n          this._showTooltipContent(singleTooltipModel, allMarkupText, cbParamsList, Math.random() + '', point[0], point[1], positionExpr, null, markupStyleCreator);\n        }\n      }); // Do not trigger events here, because this branch only be entered\n      // from dispatchAction.\n\n    };\n\n    TooltipView.prototype._showSeriesItemTooltip = function (e, dispatcher, dispatchAction) {\n      var ecModel = this._ecModel;\n      var ecData = getECData(dispatcher); // Use dataModel in element if possible\n      // Used when mouseover on a element like markPoint or edge\n      // In which case, the data is not main data in series.\n\n      var seriesIndex = ecData.seriesIndex;\n      var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n      var dataModel = ecData.dataModel || seriesModel;\n      var dataIndex = ecData.dataIndex;\n      var dataType = ecData.dataType;\n      var data = dataModel.getData(dataType);\n      var renderMode = this._renderMode;\n      var positionDefault = e.positionDefault;\n      var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model], this._tooltipModel, positionDefault ? {\n        position: positionDefault\n      } : null);\n      var tooltipTrigger = tooltipModel.get('trigger');\n\n      if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n        return;\n      }\n\n      var params = dataModel.getDataParams(dataIndex, dataType);\n      var markupStyleCreator = new TooltipMarkupStyleCreator(); // Pre-create marker style for makers. Users can assemble richText\n      // text in `formatter` callback and use those markers style.\n\n      params.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(params.color), renderMode);\n      var seriesTooltipResult = normalizeTooltipFormatResult(dataModel.formatTooltip(dataIndex, false, dataType));\n      var orderMode = tooltipModel.get('order');\n      var valueFormatter = tooltipModel.get('valueFormatter');\n      var frag = seriesTooltipResult.frag;\n      var markupText = frag ? buildTooltipMarkup(valueFormatter ? extend({\n        valueFormatter: valueFormatter\n      }, frag) : frag, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), tooltipModel.get('textStyle')) : seriesTooltipResult.text;\n      var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n      this._showOrMove(tooltipModel, function () {\n        this._showTooltipContent(tooltipModel, markupText, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markupStyleCreator);\n      }); // FIXME\n      // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n      dispatchAction({\n        type: 'showTip',\n        dataIndexInside: dataIndex,\n        dataIndex: data.getRawIndex(dataIndex),\n        seriesIndex: seriesIndex,\n        from: this.uid\n      });\n    };\n\n    TooltipView.prototype._showComponentItemTooltip = function (e, el, dispatchAction) {\n      var ecData = getECData(el);\n      var tooltipConfig = ecData.tooltipConfig;\n      var tooltipOpt = tooltipConfig.option || {};\n\n      if (isString(tooltipOpt)) {\n        var content = tooltipOpt;\n        tooltipOpt = {\n          content: content,\n          // Fixed formatter\n          formatter: content\n        };\n      }\n\n      var tooltipModelCascade = [tooltipOpt];\n\n      var cmpt = this._ecModel.getComponent(ecData.componentMainType, ecData.componentIndex);\n\n      if (cmpt) {\n        tooltipModelCascade.push(cmpt);\n      } // In most cases, component tooltip formatter has different params with series tooltip formatter,\n      // so that they can not share the same formatter. Since the global tooltip formatter is used for series\n      // by convension, we do not use it as the default formatter for component.\n\n\n      tooltipModelCascade.push({\n        formatter: tooltipOpt.content\n      });\n      var positionDefault = e.positionDefault;\n      var subTooltipModel = buildTooltipModel(tooltipModelCascade, this._tooltipModel, positionDefault ? {\n        position: positionDefault\n      } : null);\n      var defaultHtml = subTooltipModel.get('content');\n      var asyncTicket = Math.random() + ''; // PENDING: this case do not support richText style yet.\n\n      var markupStyleCreator = new TooltipMarkupStyleCreator(); // Do not check whether `trigger` is 'none' here, because `trigger`\n      // only works on coordinate system. In fact, we have not found case\n      // that requires setting `trigger` nothing on component yet.\n\n      this._showOrMove(subTooltipModel, function () {\n        // Use formatterParams from element defined in component\n        // Avoid users modify it.\n        var formatterParams = clone(subTooltipModel.get('formatterParams') || {});\n\n        this._showTooltipContent(subTooltipModel, defaultHtml, formatterParams, asyncTicket, e.offsetX, e.offsetY, e.position, el, markupStyleCreator);\n      }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n      dispatchAction({\n        type: 'showTip',\n        from: this.uid\n      });\n    };\n\n    TooltipView.prototype._showTooltipContent = function ( // Use Model<TooltipOption> insteadof TooltipModel because this model may be from series or other options.\n    // Instead of top level tooltip.\n    tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markupStyleCreator) {\n      // Reset ticket\n      this._ticket = '';\n\n      if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n        return;\n      }\n\n      var tooltipContent = this._tooltipContent;\n      tooltipContent.setEnterable(tooltipModel.get('enterable'));\n      var formatter = tooltipModel.get('formatter');\n      positionExpr = positionExpr || tooltipModel.get('position');\n      var html = defaultHtml;\n\n      var nearPoint = this._getNearestPoint([x, y], params, tooltipModel.get('trigger'), tooltipModel.get('borderColor'));\n\n      var nearPointColor = nearPoint.color;\n\n      if (formatter) {\n        if (isString(formatter)) {\n          var useUTC = tooltipModel.ecModel.get('useUTC');\n          var params0 = isArray(params) ? params[0] : params;\n          var isTimeAxis = params0 && params0.axisType && params0.axisType.indexOf('time') >= 0;\n          html = formatter;\n\n          if (isTimeAxis) {\n            html = format(params0.axisValue, html, useUTC);\n          }\n\n          html = formatTpl(html, params, true);\n        } else if (isFunction(formatter)) {\n          var callback = bind(function (cbTicket, html) {\n            if (cbTicket === this._ticket) {\n              tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n\n              this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n            }\n          }, this);\n          this._ticket = asyncTicket;\n          html = formatter(params, asyncTicket, callback);\n        } else {\n          html = formatter;\n        }\n      }\n\n      tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n      tooltipContent.show(tooltipModel, nearPointColor);\n\n      this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n    };\n\n    TooltipView.prototype._getNearestPoint = function (point, tooltipDataParams, trigger, borderColor) {\n      if (trigger === 'axis' || isArray(tooltipDataParams)) {\n        return {\n          color: borderColor || (this._renderMode === 'html' ? '#fff' : 'none')\n        };\n      }\n\n      if (!isArray(tooltipDataParams)) {\n        return {\n          color: borderColor || tooltipDataParams.color || tooltipDataParams.borderColor\n        };\n      }\n    };\n\n    TooltipView.prototype._updatePosition = function (tooltipModel, positionExpr, x, // Mouse x\n    y, // Mouse y\n    content, params, el) {\n      var viewWidth = this._api.getWidth();\n\n      var viewHeight = this._api.getHeight();\n\n      positionExpr = positionExpr || tooltipModel.get('position');\n      var contentSize = content.getSize();\n      var align = tooltipModel.get('align');\n      var vAlign = tooltipModel.get('verticalAlign');\n      var rect = el && el.getBoundingRect().clone();\n      el && rect.applyTransform(el.transform);\n\n      if (isFunction(positionExpr)) {\n        // Callback of position can be an array or a string specify the position\n        positionExpr = positionExpr([x, y], params, content.el, rect, {\n          viewSize: [viewWidth, viewHeight],\n          contentSize: contentSize.slice()\n        });\n      }\n\n      if (isArray(positionExpr)) {\n        x = parsePercent$1(positionExpr[0], viewWidth);\n        y = parsePercent$1(positionExpr[1], viewHeight);\n      } else if (isObject(positionExpr)) {\n        var boxLayoutPosition = positionExpr;\n        boxLayoutPosition.width = contentSize[0];\n        boxLayoutPosition.height = contentSize[1];\n        var layoutRect = getLayoutRect(boxLayoutPosition, {\n          width: viewWidth,\n          height: viewHeight\n        });\n        x = layoutRect.x;\n        y = layoutRect.y;\n        align = null; // When positionExpr is left/top/right/bottom,\n        // align and verticalAlign will not work.\n\n        vAlign = null;\n      } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n      else if (isString(positionExpr) && el) {\n          var pos = calcTooltipPosition(positionExpr, rect, contentSize, tooltipModel.get('borderWidth'));\n          x = pos[0];\n          y = pos[1];\n        } else {\n          var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n          x = pos[0];\n          y = pos[1];\n        }\n\n      align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n      vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n      if (shouldTooltipConfine(tooltipModel)) {\n        var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n        x = pos[0];\n        y = pos[1];\n      }\n\n      content.moveTo(x, y);\n    }; // FIXME\n    // Should we remove this but leave this to user?\n\n\n    TooltipView.prototype._updateContentNotChangedOnAxis = function (dataByCoordSys, cbParamsList) {\n      var lastCoordSys = this._lastDataByCoordSys;\n      var lastCbParamsList = this._cbParamsList;\n      var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n      contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n        var lastDataByAxis = lastItemCoordSys.dataByAxis || [];\n        var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n        var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n        contentNotChanged = contentNotChanged && lastDataByAxis.length === thisDataByAxis.length;\n        contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n          var thisItem = thisDataByAxis[indexAxis] || {};\n          var lastIndices = lastItem.seriesDataIndices || [];\n          var newIndices = thisItem.seriesDataIndices || [];\n          contentNotChanged = contentNotChanged && lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n          contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n            var newIdxItem = newIndices[j];\n            contentNotChanged = contentNotChanged && lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n          }); // check is cbParams data value changed\n\n          lastCbParamsList && each(lastItem.seriesDataIndices, function (idxItem) {\n            var seriesIdx = idxItem.seriesIndex;\n            var cbParams = cbParamsList[seriesIdx];\n            var lastCbParams = lastCbParamsList[seriesIdx];\n\n            if (cbParams && lastCbParams && lastCbParams.data !== cbParams.data) {\n              contentNotChanged = false;\n            }\n          });\n        });\n      });\n      this._lastDataByCoordSys = dataByCoordSys;\n      this._cbParamsList = cbParamsList;\n      return !!contentNotChanged;\n    };\n\n    TooltipView.prototype._hide = function (dispatchAction) {\n      // Do not directly hideLater here, because this behavior may be prevented\n      // in dispatchAction when showTip is dispatched.\n      // FIXME\n      // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n      this._lastDataByCoordSys = null;\n      dispatchAction({\n        type: 'hideTip',\n        from: this.uid\n      });\n    };\n\n    TooltipView.prototype.dispose = function (ecModel, api) {\n      if (env.node || !api.getDom()) {\n        return;\n      }\n\n      clear(this, '_updatePosition');\n\n      this._tooltipContent.dispose();\n\n      unregister('itemTooltip', api);\n    };\n\n    TooltipView.type = 'tooltip';\n    return TooltipView;\n  }(ComponentView);\n  /**\n   * From top to bottom. (the last one should be globalTooltipModel);\n   */\n\n\n  function buildTooltipModel(modelCascade, globalTooltipModel, defaultTooltipOption) {\n    // Last is always tooltip model.\n    var ecModel = globalTooltipModel.ecModel;\n    var resultModel;\n\n    if (defaultTooltipOption) {\n      resultModel = new Model(defaultTooltipOption, ecModel, ecModel);\n      resultModel = new Model(globalTooltipModel.option, resultModel, ecModel);\n    } else {\n      resultModel = globalTooltipModel;\n    }\n\n    for (var i = modelCascade.length - 1; i >= 0; i--) {\n      var tooltipOpt = modelCascade[i];\n\n      if (tooltipOpt) {\n        if (tooltipOpt instanceof Model) {\n          tooltipOpt = tooltipOpt.get('tooltip', true);\n        } // In each data item tooltip can be simply write:\n        // {\n        //  value: 10,\n        //  tooltip: 'Something you need to know'\n        // }\n\n\n        if (isString(tooltipOpt)) {\n          tooltipOpt = {\n            formatter: tooltipOpt\n          };\n        }\n\n        if (tooltipOpt) {\n          resultModel = new Model(tooltipOpt, resultModel, ecModel);\n        }\n      }\n    }\n\n    return resultModel;\n  }\n\n  function makeDispatchAction$1(payload, api) {\n    return payload.dispatchAction || bind(api.dispatchAction, api);\n  }\n\n  function refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n    var size = content.getSize();\n    var width = size[0];\n    var height = size[1];\n\n    if (gapH != null) {\n      // Add extra 2 pixels for this case:\n      // At present the \"values\" in defaut tooltip are using CSS `float: right`.\n      // When the right edge of the tooltip box is on the right side of the\n      // viewport, the `float` layout might push the \"values\" to the second line.\n      if (x + width + gapH + 2 > viewWidth) {\n        x -= width + gapH;\n      } else {\n        x += gapH;\n      }\n    }\n\n    if (gapV != null) {\n      if (y + height + gapV > viewHeight) {\n        y -= height + gapV;\n      } else {\n        y += gapV;\n      }\n    }\n\n    return [x, y];\n  }\n\n  function confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n    var size = content.getSize();\n    var width = size[0];\n    var height = size[1];\n    x = Math.min(x + width, viewWidth) - width;\n    y = Math.min(y + height, viewHeight) - height;\n    x = Math.max(x, 0);\n    y = Math.max(y, 0);\n    return [x, y];\n  }\n\n  function calcTooltipPosition(position, rect, contentSize, borderWidth) {\n    var domWidth = contentSize[0];\n    var domHeight = contentSize[1];\n    var offset = Math.ceil(Math.SQRT2 * borderWidth) + 8;\n    var x = 0;\n    var y = 0;\n    var rectWidth = rect.width;\n    var rectHeight = rect.height;\n\n    switch (position) {\n      case 'inside':\n        x = rect.x + rectWidth / 2 - domWidth / 2;\n        y = rect.y + rectHeight / 2 - domHeight / 2;\n        break;\n\n      case 'top':\n        x = rect.x + rectWidth / 2 - domWidth / 2;\n        y = rect.y - domHeight - offset;\n        break;\n\n      case 'bottom':\n        x = rect.x + rectWidth / 2 - domWidth / 2;\n        y = rect.y + rectHeight + offset;\n        break;\n\n      case 'left':\n        x = rect.x - domWidth - offset;\n        y = rect.y + rectHeight / 2 - domHeight / 2;\n        break;\n\n      case 'right':\n        x = rect.x + rectWidth + offset;\n        y = rect.y + rectHeight / 2 - domHeight / 2;\n    }\n\n    return [x, y];\n  }\n\n  function isCenterAlign(align) {\n    return align === 'center' || align === 'middle';\n  }\n  /**\n   * Find target component by payload like:\n   * ```js\n   * { legendId: 'some_id', name: 'xxx' }\n   * { toolboxIndex: 1, name: 'xxx' }\n   * { geoName: 'some_name', name: 'xxx' }\n   * ```\n   * PENDING: at present only\n   *\n   * If not found, return null/undefined.\n   */\n\n\n  function findComponentReference(payload, ecModel, api) {\n    var queryOptionMap = preParseFinder(payload).queryOptionMap;\n    var componentMainType = queryOptionMap.keys()[0];\n\n    if (!componentMainType || componentMainType === 'series') {\n      return;\n    }\n\n    var queryResult = queryReferringComponents(ecModel, componentMainType, queryOptionMap.get(componentMainType), {\n      useDefault: false,\n      enableAll: false,\n      enableNone: false\n    });\n    var model = queryResult.models[0];\n\n    if (!model) {\n      return;\n    }\n\n    var view = api.getViewOfComponentModel(model);\n    var el;\n    view.group.traverse(function (subEl) {\n      var tooltipConfig = getECData(subEl).tooltipConfig;\n\n      if (tooltipConfig && tooltipConfig.name === payload.name) {\n        el = subEl;\n        return true; // stop\n      }\n    });\n\n    if (el) {\n      return {\n        componentMainType: componentMainType,\n        componentIndex: model.componentIndex,\n        el: el\n      };\n    }\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$10(registers) {\n    use(install$11);\n    registers.registerComponentModel(TooltipModel);\n    registers.registerComponentView(TooltipView);\n    /**\n     * @action\n     * @property {string} type\n     * @property {number} seriesIndex\n     * @property {number} dataIndex\n     * @property {number} [x]\n     * @property {number} [y]\n     */\n\n    registers.registerAction({\n      type: 'showTip',\n      event: 'showTip',\n      update: 'tooltip:manuallyShowTip'\n    }, noop);\n    registers.registerAction({\n      type: 'hideTip',\n      event: 'hideTip',\n      update: 'tooltip:manuallyHideTip'\n    }, noop);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  use(install$10);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var DATA_ZOOM_AXIS_DIMENSIONS = ['x', 'y', 'radius', 'angle', 'single']; // Supported coords.\n  // FIXME: polar has been broken (but rarely used).\n\n  var SERIES_COORDS = ['cartesian2d', 'polar', 'singleAxis'];\n\n  function isCoordSupported(seriesModel) {\n    var coordType = seriesModel.get('coordinateSystem');\n    return indexOf(SERIES_COORDS, coordType) >= 0;\n  }\n\n  function getAxisMainType(axisDim) {\n    {\n      assert(axisDim);\n    }\n    return axisDim + 'Axis';\n  }\n  /**\n   * If two dataZoomModels has the same axis controlled, we say that they are 'linked'.\n   * This function finds all linked dataZoomModels start from the given payload.\n   */\n\n\n  function findEffectedDataZooms(ecModel, payload) {\n    // Key: `DataZoomAxisDimension`\n    var axisRecords = createHashMap();\n    var effectedModels = []; // Key: uid of dataZoomModel\n\n    var effectedModelMap = createHashMap(); // Find the dataZooms specified by payload.\n\n    ecModel.eachComponent({\n      mainType: 'dataZoom',\n      query: payload\n    }, function (dataZoomModel) {\n      if (!effectedModelMap.get(dataZoomModel.uid)) {\n        addToEffected(dataZoomModel);\n      }\n    }); // Start from the given dataZoomModels, travel the graph to find\n    // all of the linked dataZoom models.\n\n    var foundNewLink;\n\n    do {\n      foundNewLink = false;\n      ecModel.eachComponent('dataZoom', processSingle);\n    } while (foundNewLink);\n\n    function processSingle(dataZoomModel) {\n      if (!effectedModelMap.get(dataZoomModel.uid) && isLinked(dataZoomModel)) {\n        addToEffected(dataZoomModel);\n        foundNewLink = true;\n      }\n    }\n\n    function addToEffected(dataZoom) {\n      effectedModelMap.set(dataZoom.uid, true);\n      effectedModels.push(dataZoom);\n      markAxisControlled(dataZoom);\n    }\n\n    function isLinked(dataZoomModel) {\n      var isLink = false;\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        var axisIdxArr = axisRecords.get(axisDim);\n\n        if (axisIdxArr && axisIdxArr[axisIndex]) {\n          isLink = true;\n        }\n      });\n      return isLink;\n    }\n\n    function markAxisControlled(dataZoomModel) {\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        (axisRecords.get(axisDim) || axisRecords.set(axisDim, []))[axisIndex] = true;\n      });\n    }\n\n    return effectedModels;\n  }\n  /**\n   * Find the first target coordinate system.\n   * Available after model built.\n   *\n   * @return Like {\n   *                  grid: [\n   *                      {model: coord0, axisModels: [axis1, axis3], coordIndex: 1},\n   *                      {model: coord1, axisModels: [axis0, axis2], coordIndex: 0},\n   *                      ...\n   *                  ],  // cartesians must not be null/undefined.\n   *                  polar: [\n   *                      {model: coord0, axisModels: [axis4], coordIndex: 0},\n   *                      ...\n   *                  ],  // polars must not be null/undefined.\n   *                  singleAxis: [\n   *                      {model: coord0, axisModels: [], coordIndex: 0}\n   *                  ]\n   *              }\n   */\n\n\n  function collectReferCoordSysModelInfo(dataZoomModel) {\n    var ecModel = dataZoomModel.ecModel;\n    var coordSysInfoWrap = {\n      infoList: [],\n      infoMap: createHashMap()\n    };\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n\n      if (!axisModel) {\n        return;\n      }\n\n      var coordSysModel = axisModel.getCoordSysModel();\n\n      if (!coordSysModel) {\n        return;\n      }\n\n      var coordSysUid = coordSysModel.uid;\n      var coordSysInfo = coordSysInfoWrap.infoMap.get(coordSysUid);\n\n      if (!coordSysInfo) {\n        coordSysInfo = {\n          model: coordSysModel,\n          axisModels: []\n        };\n        coordSysInfoWrap.infoList.push(coordSysInfo);\n        coordSysInfoWrap.infoMap.set(coordSysUid, coordSysInfo);\n      }\n\n      coordSysInfo.axisModels.push(axisModel);\n    });\n    return coordSysInfoWrap;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var DataZoomAxisInfo =\n  /** @class */\n  function () {\n    function DataZoomAxisInfo() {\n      this.indexList = [];\n      this.indexMap = [];\n    }\n\n    DataZoomAxisInfo.prototype.add = function (axisCmptIdx) {\n      // Remove duplication.\n      if (!this.indexMap[axisCmptIdx]) {\n        this.indexList.push(axisCmptIdx);\n        this.indexMap[axisCmptIdx] = true;\n      }\n    };\n\n    return DataZoomAxisInfo;\n  }();\n\n  var DataZoomModel =\n  /** @class */\n  function (_super) {\n    __extends(DataZoomModel, _super);\n\n    function DataZoomModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = DataZoomModel.type;\n      _this._autoThrottle = true;\n      _this._noTarget = true;\n      /**\n       * It is `[rangeModeForMin, rangeModeForMax]`.\n       * The optional values for `rangeMode`:\n       * + `'value'` mode: the axis extent will always be determined by\n       *     `dataZoom.startValue` and `dataZoom.endValue`, despite\n       *     how data like and how `axis.min` and `axis.max` are.\n       * + `'percent'` mode: `100` represents 100% of the `[dMin, dMax]`,\n       *     where `dMin` is `axis.min` if `axis.min` specified, otherwise `data.extent[0]`,\n       *     and `dMax` is `axis.max` if `axis.max` specified, otherwise `data.extent[1]`.\n       *     Axis extent will be determined by the result of the percent of `[dMin, dMax]`.\n       *\n       * For example, when users are using dynamic data (update data periodically via `setOption`),\n       * if in `'value`' mode, the window will be kept in a fixed value range despite how\n       * data are appended, while if in `'percent'` mode, whe window range will be changed alone with\n       * the appended data (suppose `axis.min` and `axis.max` are not specified).\n       */\n\n      _this._rangePropMode = ['percent', 'percent'];\n      return _this;\n    }\n\n    DataZoomModel.prototype.init = function (option, parentModel, ecModel) {\n      var inputRawOption = retrieveRawOption(option);\n      /**\n       * Suppose a \"main process\" start at the point that model prepared (that is,\n       * model initialized or merged or method called in `action`).\n       * We should keep the `main process` idempotent, that is, given a set of values\n       * on `option`, we get the same result.\n       *\n       * But sometimes, values on `option` will be updated for providing users\n       * a \"final calculated value\" (`dataZoomProcessor` will do that). Those value\n       * should not be the base/input of the `main process`.\n       *\n       * So in that case we should save and keep the input of the `main process`\n       * separately, called `settledOption`.\n       *\n       * For example, consider the case:\n       * (Step_1) brush zoom the grid by `toolbox.dataZoom`,\n       *     where the original input `option.startValue`, `option.endValue` are earsed by\n       *     calculated value.\n       * (Step)2) click the legend to hide and show a series,\n       *     where the new range is calculated by the earsed `startValue` and `endValue`,\n       *     which brings incorrect result.\n       */\n\n      this.settledOption = inputRawOption;\n      this.mergeDefaultAndTheme(option, ecModel);\n\n      this._doInit(inputRawOption);\n    };\n\n    DataZoomModel.prototype.mergeOption = function (newOption) {\n      var inputRawOption = retrieveRawOption(newOption); //FIX #2591\n\n      merge(this.option, newOption, true);\n      merge(this.settledOption, inputRawOption, true);\n\n      this._doInit(inputRawOption);\n    };\n\n    DataZoomModel.prototype._doInit = function (inputRawOption) {\n      var thisOption = this.option;\n\n      this._setDefaultThrottle(inputRawOption);\n\n      this._updateRangeUse(inputRawOption);\n\n      var settledOption = this.settledOption;\n      each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n        // start/end has higher priority over startValue/endValue if they\n        // both set, but we should make chart.setOption({endValue: 1000})\n        // effective, rather than chart.setOption({endValue: 1000, end: null}).\n        if (this._rangePropMode[index] === 'value') {\n          thisOption[names[0]] = settledOption[names[0]] = null;\n        } // Otherwise do nothing and use the merge result.\n\n      }, this);\n\n      this._resetTarget();\n    };\n\n    DataZoomModel.prototype._resetTarget = function () {\n      var optionOrient = this.get('orient', true);\n      var targetAxisIndexMap = this._targetAxisInfoMap = createHashMap();\n\n      var hasAxisSpecified = this._fillSpecifiedTargetAxis(targetAxisIndexMap);\n\n      if (hasAxisSpecified) {\n        this._orient = optionOrient || this._makeAutoOrientByTargetAxis();\n      } else {\n        this._orient = optionOrient || 'horizontal';\n\n        this._fillAutoTargetAxisByOrient(targetAxisIndexMap, this._orient);\n      }\n\n      this._noTarget = true;\n      targetAxisIndexMap.each(function (axisInfo) {\n        if (axisInfo.indexList.length) {\n          this._noTarget = false;\n        }\n      }, this);\n    };\n\n    DataZoomModel.prototype._fillSpecifiedTargetAxis = function (targetAxisIndexMap) {\n      var hasAxisSpecified = false;\n      each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n        var refering = this.getReferringComponents(getAxisMainType(axisDim), MULTIPLE_REFERRING); // When user set axisIndex as a empty array, we think that user specify axisIndex\n        // but do not want use auto mode. Because empty array may be encountered when\n        // some error occured.\n\n        if (!refering.specified) {\n          return;\n        }\n\n        hasAxisSpecified = true;\n        var axisInfo = new DataZoomAxisInfo();\n        each(refering.models, function (axisModel) {\n          axisInfo.add(axisModel.componentIndex);\n        });\n        targetAxisIndexMap.set(axisDim, axisInfo);\n      }, this);\n      return hasAxisSpecified;\n    };\n\n    DataZoomModel.prototype._fillAutoTargetAxisByOrient = function (targetAxisIndexMap, orient) {\n      var ecModel = this.ecModel;\n      var needAuto = true; // Find axis that parallel to dataZoom as default.\n\n      if (needAuto) {\n        var axisDim = orient === 'vertical' ? 'y' : 'x';\n        var axisModels = ecModel.findComponents({\n          mainType: axisDim + 'Axis'\n        });\n        setParallelAxis(axisModels, axisDim);\n      } // Find axis that parallel to dataZoom as default.\n\n\n      if (needAuto) {\n        var axisModels = ecModel.findComponents({\n          mainType: 'singleAxis',\n          filter: function (axisModel) {\n            return axisModel.get('orient', true) === orient;\n          }\n        });\n        setParallelAxis(axisModels, 'single');\n      }\n\n      function setParallelAxis(axisModels, axisDim) {\n        // At least use the first parallel axis as the target axis.\n        var axisModel = axisModels[0];\n\n        if (!axisModel) {\n          return;\n        }\n\n        var axisInfo = new DataZoomAxisInfo();\n        axisInfo.add(axisModel.componentIndex);\n        targetAxisIndexMap.set(axisDim, axisInfo);\n        needAuto = false; // Find parallel axes in the same grid.\n\n        if (axisDim === 'x' || axisDim === 'y') {\n          var gridModel_1 = axisModel.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n          gridModel_1 && each(axisModels, function (axModel) {\n            if (axisModel.componentIndex !== axModel.componentIndex && gridModel_1 === axModel.getReferringComponents('grid', SINGLE_REFERRING).models[0]) {\n              axisInfo.add(axModel.componentIndex);\n            }\n          });\n        }\n      }\n\n      if (needAuto) {\n        // If no parallel axis, find the first category axis as default. (Also consider polar).\n        each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n          if (!needAuto) {\n            return;\n          }\n\n          var axisModels = ecModel.findComponents({\n            mainType: getAxisMainType(axisDim),\n            filter: function (axisModel) {\n              return axisModel.get('type', true) === 'category';\n            }\n          });\n\n          if (axisModels[0]) {\n            var axisInfo = new DataZoomAxisInfo();\n            axisInfo.add(axisModels[0].componentIndex);\n            targetAxisIndexMap.set(axisDim, axisInfo);\n            needAuto = false;\n          }\n        }, this);\n      }\n    };\n\n    DataZoomModel.prototype._makeAutoOrientByTargetAxis = function () {\n      var dim; // Find the first axis\n\n      this.eachTargetAxis(function (axisDim) {\n        !dim && (dim = axisDim);\n      }, this);\n      return dim === 'y' ? 'vertical' : 'horizontal';\n    };\n\n    DataZoomModel.prototype._setDefaultThrottle = function (inputRawOption) {\n      // When first time user set throttle, auto throttle ends.\n      if (inputRawOption.hasOwnProperty('throttle')) {\n        this._autoThrottle = false;\n      }\n\n      if (this._autoThrottle) {\n        var globalOption = this.ecModel.option;\n        this.option.throttle = globalOption.animation && globalOption.animationDurationUpdate > 0 ? 100 : 20;\n      }\n    };\n\n    DataZoomModel.prototype._updateRangeUse = function (inputRawOption) {\n      var rangePropMode = this._rangePropMode;\n      var rangeModeInOption = this.get('rangeMode');\n      each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n        var percentSpecified = inputRawOption[names[0]] != null;\n        var valueSpecified = inputRawOption[names[1]] != null;\n\n        if (percentSpecified && !valueSpecified) {\n          rangePropMode[index] = 'percent';\n        } else if (!percentSpecified && valueSpecified) {\n          rangePropMode[index] = 'value';\n        } else if (rangeModeInOption) {\n          rangePropMode[index] = rangeModeInOption[index];\n        } else if (percentSpecified) {\n          // percentSpecified && valueSpecified\n          rangePropMode[index] = 'percent';\n        } // else remain its original setting.\n\n      });\n    };\n\n    DataZoomModel.prototype.noTarget = function () {\n      return this._noTarget;\n    };\n\n    DataZoomModel.prototype.getFirstTargetAxisModel = function () {\n      var firstAxisModel;\n      this.eachTargetAxis(function (axisDim, axisIndex) {\n        if (firstAxisModel == null) {\n          firstAxisModel = this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n        }\n      }, this);\n      return firstAxisModel;\n    };\n    /**\n     * @param {Function} callback param: axisModel, dimNames, axisIndex, dataZoomModel, ecModel\n     */\n\n\n    DataZoomModel.prototype.eachTargetAxis = function (callback, context) {\n      this._targetAxisInfoMap.each(function (axisInfo, axisDim) {\n        each(axisInfo.indexList, function (axisIndex) {\n          callback.call(context, axisDim, axisIndex);\n        });\n      });\n    };\n    /**\n     * @return If not found, return null/undefined.\n     */\n\n\n    DataZoomModel.prototype.getAxisProxy = function (axisDim, axisIndex) {\n      var axisModel = this.getAxisModel(axisDim, axisIndex);\n\n      if (axisModel) {\n        return axisModel.__dzAxisProxy;\n      }\n    };\n    /**\n     * @return If not found, return null/undefined.\n     */\n\n\n    DataZoomModel.prototype.getAxisModel = function (axisDim, axisIndex) {\n      {\n        assert(axisDim && axisIndex != null);\n      }\n\n      var axisInfo = this._targetAxisInfoMap.get(axisDim);\n\n      if (axisInfo && axisInfo.indexMap[axisIndex]) {\n        return this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n      }\n    };\n    /**\n     * If not specified, set to undefined.\n     */\n\n\n    DataZoomModel.prototype.setRawRange = function (opt) {\n      var thisOption = this.option;\n      var settledOption = this.settledOption;\n      each([['start', 'startValue'], ['end', 'endValue']], function (names) {\n        // Consider the pair <start, startValue>:\n        // If one has value and the other one is `null/undefined`, we both set them\n        // to `settledOption`. This strategy enables the feature to clear the original\n        // value in `settledOption` to `null/undefined`.\n        // But if both of them are `null/undefined`, we do not set them to `settledOption`\n        // and keep `settledOption` with the original value. This strategy enables users to\n        // only set <end or endValue> but not set <start or startValue> when calling\n        // `dispatchAction`.\n        // The pair <end, endValue> is treated in the same way.\n        if (opt[names[0]] != null || opt[names[1]] != null) {\n          thisOption[names[0]] = settledOption[names[0]] = opt[names[0]];\n          thisOption[names[1]] = settledOption[names[1]] = opt[names[1]];\n        }\n      }, this);\n\n      this._updateRangeUse(opt);\n    };\n\n    DataZoomModel.prototype.setCalculatedRange = function (opt) {\n      var option = this.option;\n      each(['start', 'startValue', 'end', 'endValue'], function (name) {\n        option[name] = opt[name];\n      });\n    };\n\n    DataZoomModel.prototype.getPercentRange = function () {\n      var axisProxy = this.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        return axisProxy.getDataPercentWindow();\n      }\n    };\n    /**\n     * For example, chart.getModel().getComponent('dataZoom').getValueRange('y', 0);\n     *\n     * @return [startValue, endValue] value can only be '-' or finite number.\n     */\n\n\n    DataZoomModel.prototype.getValueRange = function (axisDim, axisIndex) {\n      if (axisDim == null && axisIndex == null) {\n        var axisProxy = this.findRepresentativeAxisProxy();\n\n        if (axisProxy) {\n          return axisProxy.getDataValueWindow();\n        }\n      } else {\n        return this.getAxisProxy(axisDim, axisIndex).getDataValueWindow();\n      }\n    };\n    /**\n     * @param axisModel If axisModel given, find axisProxy\n     *      corresponding to the axisModel\n     */\n\n\n    DataZoomModel.prototype.findRepresentativeAxisProxy = function (axisModel) {\n      if (axisModel) {\n        return axisModel.__dzAxisProxy;\n      } // Find the first hosted axisProxy\n\n\n      var firstProxy;\n\n      var axisDimList = this._targetAxisInfoMap.keys();\n\n      for (var i = 0; i < axisDimList.length; i++) {\n        var axisDim = axisDimList[i];\n\n        var axisInfo = this._targetAxisInfoMap.get(axisDim);\n\n        for (var j = 0; j < axisInfo.indexList.length; j++) {\n          var proxy = this.getAxisProxy(axisDim, axisInfo.indexList[j]);\n\n          if (proxy.hostedBy(this)) {\n            return proxy;\n          }\n\n          if (!firstProxy) {\n            firstProxy = proxy;\n          }\n        }\n      } // If no hosted proxy found, still need to return a proxy.\n      // This case always happens in toolbox dataZoom, where axes are all hosted by\n      // other dataZooms.\n\n\n      return firstProxy;\n    };\n\n    DataZoomModel.prototype.getRangePropMode = function () {\n      return this._rangePropMode.slice();\n    };\n\n    DataZoomModel.prototype.getOrient = function () {\n      {\n        // Should not be called before initialized.\n        assert(this._orient);\n      }\n      return this._orient;\n    };\n\n    DataZoomModel.type = 'dataZoom';\n    DataZoomModel.dependencies = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'series', 'toolbox'];\n    DataZoomModel.defaultOption = {\n      // zlevel: 0,\n      z: 4,\n      filterMode: 'filter',\n      start: 0,\n      end: 100\n    };\n    return DataZoomModel;\n  }(ComponentModel);\n  /**\n   * Retrieve the those raw params from option, which will be cached separately.\n   * becasue they will be overwritten by normalized/calculated values in the main\n   * process.\n   */\n\n\n  function retrieveRawOption(option) {\n    var ret = {};\n    each(['start', 'end', 'startValue', 'endValue', 'throttle'], function (name) {\n      option.hasOwnProperty(name) && (ret[name] = option[name]);\n    });\n    return ret;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var InsideZoomModel =\n  /** @class */\n  function (_super) {\n    __extends(InsideZoomModel, _super);\n\n    function InsideZoomModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = InsideZoomModel.type;\n      return _this;\n    }\n\n    InsideZoomModel.type = 'dataZoom.inside';\n    InsideZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n      disabled: false,\n      zoomLock: false,\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      moveOnMouseWheel: false,\n      preventDefaultMouseMove: true\n    });\n    return InsideZoomModel;\n  }(DataZoomModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var DataZoomView =\n  /** @class */\n  function (_super) {\n    __extends(DataZoomView, _super);\n\n    function DataZoomView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = DataZoomView.type;\n      return _this;\n    }\n\n    DataZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n      this.dataZoomModel = dataZoomModel;\n      this.ecModel = ecModel;\n      this.api = api;\n    };\n\n    DataZoomView.type = 'dataZoom';\n    return DataZoomView;\n  }(ComponentView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * Calculate slider move result.\n   * Usage:\n   * (1) If both handle0 and handle1 are needed to be moved, set minSpan the same as\n   * maxSpan and the same as `Math.abs(handleEnd[1] - handleEnds[0])`.\n   * (2) If handle0 is forbidden to cross handle1, set minSpan as `0`.\n   *\n   * @param delta Move length.\n   * @param handleEnds handleEnds[0] can be bigger then handleEnds[1].\n   *              handleEnds will be modified in this method.\n   * @param extent handleEnds is restricted by extent.\n   *              extent[0] should less or equals than extent[1].\n   * @param handleIndex Can be 'all', means that both move the two handleEnds.\n   * @param minSpan The range of dataZoom can not be smaller than that.\n   *              If not set, handle0 and cross handle1. If set as a non-negative\n   *              number (including `0`), handles will push each other when reaching\n   *              the minSpan.\n   * @param maxSpan The range of dataZoom can not be larger than that.\n   * @return The input handleEnds.\n   */\n\n\n  function sliderMove(delta, handleEnds, extent, handleIndex, minSpan, maxSpan) {\n    delta = delta || 0;\n    var extentSpan = extent[1] - extent[0]; // Notice maxSpan and minSpan can be null/undefined.\n\n    if (minSpan != null) {\n      minSpan = restrict(minSpan, [0, extentSpan]);\n    }\n\n    if (maxSpan != null) {\n      maxSpan = Math.max(maxSpan, minSpan != null ? minSpan : 0);\n    }\n\n    if (handleIndex === 'all') {\n      var handleSpan = Math.abs(handleEnds[1] - handleEnds[0]);\n      handleSpan = restrict(handleSpan, [0, extentSpan]);\n      minSpan = maxSpan = restrict(handleSpan, [minSpan, maxSpan]);\n      handleIndex = 0;\n    }\n\n    handleEnds[0] = restrict(handleEnds[0], extent);\n    handleEnds[1] = restrict(handleEnds[1], extent);\n    var originalDistSign = getSpanSign(handleEnds, handleIndex);\n    handleEnds[handleIndex] += delta; // Restrict in extent.\n\n    var extentMinSpan = minSpan || 0;\n    var realExtent = extent.slice();\n    originalDistSign.sign < 0 ? realExtent[0] += extentMinSpan : realExtent[1] -= extentMinSpan;\n    handleEnds[handleIndex] = restrict(handleEnds[handleIndex], realExtent); // Expand span.\n\n    var currDistSign;\n    currDistSign = getSpanSign(handleEnds, handleIndex);\n\n    if (minSpan != null && (currDistSign.sign !== originalDistSign.sign || currDistSign.span < minSpan)) {\n      // If minSpan exists, 'cross' is forbidden.\n      handleEnds[1 - handleIndex] = handleEnds[handleIndex] + originalDistSign.sign * minSpan;\n    } // Shrink span.\n\n\n    currDistSign = getSpanSign(handleEnds, handleIndex);\n\n    if (maxSpan != null && currDistSign.span > maxSpan) {\n      handleEnds[1 - handleIndex] = handleEnds[handleIndex] + currDistSign.sign * maxSpan;\n    }\n\n    return handleEnds;\n  }\n\n  function getSpanSign(handleEnds, handleIndex) {\n    var dist = handleEnds[handleIndex] - handleEnds[1 - handleIndex]; // If `handleEnds[0] === handleEnds[1]`, always believe that handleEnd[0]\n    // is at left of handleEnds[1] for non-cross case.\n\n    return {\n      span: Math.abs(dist),\n      sign: dist > 0 ? -1 : dist < 0 ? 1 : handleIndex ? -1 : 1\n    };\n  }\n\n  function restrict(value, extend) {\n    return Math.min(extend[1] != null ? extend[1] : Infinity, Math.max(extend[0] != null ? extend[0] : -Infinity, value));\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // @ts-nocheck\n\n\n  var ATTR = '\\0_ec_interaction_mutex';\n\n  function take(zr, resourceKey, userKey) {\n    var store = getStore(zr);\n    store[resourceKey] = userKey;\n  }\n\n  function release(zr, resourceKey, userKey) {\n    var store = getStore(zr);\n    var uKey = store[resourceKey];\n\n    if (uKey === userKey) {\n      store[resourceKey] = null;\n    }\n  }\n\n  function isTaken(zr, resourceKey) {\n    return !!getStore(zr)[resourceKey];\n  }\n\n  function getStore(zr) {\n    return zr[ATTR] || (zr[ATTR] = {});\n  }\n  /**\n   * payload: {\n   *     type: 'takeGlobalCursor',\n   *     key: 'dataZoomSelect', or 'brush', or ...,\n   *         If no userKey, release global cursor.\n   * }\n   */\n  // TODO: SELF REGISTERED.\n\n\n  registerAction({\n    type: 'takeGlobalCursor',\n    event: 'globalCursorTaken',\n    update: 'update'\n  }, noop);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var RoamController =\n  /** @class */\n  function (_super) {\n    __extends(RoamController, _super);\n\n    function RoamController(zr) {\n      var _this = _super.call(this) || this;\n\n      _this._zr = zr; // Avoid two roamController bind the same handler\n\n      var mousedownHandler = bind(_this._mousedownHandler, _this);\n      var mousemoveHandler = bind(_this._mousemoveHandler, _this);\n      var mouseupHandler = bind(_this._mouseupHandler, _this);\n      var mousewheelHandler = bind(_this._mousewheelHandler, _this);\n      var pinchHandler = bind(_this._pinchHandler, _this);\n      /**\n       * Notice: only enable needed types. For example, if 'zoom'\n       * is not needed, 'zoom' should not be enabled, otherwise\n       * default mousewheel behaviour (scroll page) will be disabled.\n       */\n\n      _this.enable = function (controlType, opt) {\n        // Disable previous first\n        this.disable();\n        this._opt = defaults(clone(opt) || {}, {\n          zoomOnMouseWheel: true,\n          moveOnMouseMove: true,\n          // By default, wheel do not trigger move.\n          moveOnMouseWheel: false,\n          preventDefaultMouseMove: true\n        });\n\n        if (controlType == null) {\n          controlType = true;\n        }\n\n        if (controlType === true || controlType === 'move' || controlType === 'pan') {\n          zr.on('mousedown', mousedownHandler);\n          zr.on('mousemove', mousemoveHandler);\n          zr.on('mouseup', mouseupHandler);\n        }\n\n        if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n          zr.on('mousewheel', mousewheelHandler);\n          zr.on('pinch', pinchHandler);\n        }\n      };\n\n      _this.disable = function () {\n        zr.off('mousedown', mousedownHandler);\n        zr.off('mousemove', mousemoveHandler);\n        zr.off('mouseup', mouseupHandler);\n        zr.off('mousewheel', mousewheelHandler);\n        zr.off('pinch', pinchHandler);\n      };\n\n      return _this;\n    }\n\n    RoamController.prototype.isDragging = function () {\n      return this._dragging;\n    };\n\n    RoamController.prototype.isPinching = function () {\n      return this._pinching;\n    };\n\n    RoamController.prototype.setPointerChecker = function (pointerChecker) {\n      this.pointerChecker = pointerChecker;\n    };\n\n    RoamController.prototype.dispose = function () {\n      this.disable();\n    };\n\n    RoamController.prototype._mousedownHandler = function (e) {\n      if (isMiddleOrRightButtonOnMouseUpDown(e) || e.target && e.target.draggable) {\n        return;\n      }\n\n      var x = e.offsetX;\n      var y = e.offsetY; // Only check on mosedown, but not mousemove.\n      // Mouse can be out of target when mouse moving.\n\n      if (this.pointerChecker && this.pointerChecker(e, x, y)) {\n        this._x = x;\n        this._y = y;\n        this._dragging = true;\n      }\n    };\n\n    RoamController.prototype._mousemoveHandler = function (e) {\n      if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt) || e.gestureEvent === 'pinch' || isTaken(this._zr, 'globalPan')) {\n        return;\n      }\n\n      var x = e.offsetX;\n      var y = e.offsetY;\n      var oldX = this._x;\n      var oldY = this._y;\n      var dx = x - oldX;\n      var dy = y - oldY;\n      this._x = x;\n      this._y = y;\n      this._opt.preventDefaultMouseMove && stop(e.event);\n      trigger(this, 'pan', 'moveOnMouseMove', e, {\n        dx: dx,\n        dy: dy,\n        oldX: oldX,\n        oldY: oldY,\n        newX: x,\n        newY: y,\n        isAvailableBehavior: null\n      });\n    };\n\n    RoamController.prototype._mouseupHandler = function (e) {\n      if (!isMiddleOrRightButtonOnMouseUpDown(e)) {\n        this._dragging = false;\n      }\n    };\n\n    RoamController.prototype._mousewheelHandler = function (e) {\n      var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n      var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n      var wheelDelta = e.wheelDelta;\n      var absWheelDeltaDelta = Math.abs(wheelDelta);\n      var originX = e.offsetX;\n      var originY = e.offsetY; // wheelDelta maybe -0 in chrome mac.\n\n      if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n        return;\n      } // If both `shouldZoom` and `shouldMove` is true, trigger\n      // their event both, and the final behavior is determined\n      // by event listener themselves.\n\n\n      if (shouldZoom) {\n        // Convenience:\n        // Mac and VM Windows on Mac: scroll up: zoom out.\n        // Windows: scroll up: zoom in.\n        // FIXME: Should do more test in different environment.\n        // wheelDelta is too complicated in difference nvironment\n        // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n        // although it has been normallized by zrender.\n        // wheelDelta of mouse wheel is bigger than touch pad.\n        var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n        var scale = wheelDelta > 0 ? factor : 1 / factor;\n        checkPointerAndTrigger(this, 'zoom', 'zoomOnMouseWheel', e, {\n          scale: scale,\n          originX: originX,\n          originY: originY,\n          isAvailableBehavior: null\n        });\n      }\n\n      if (shouldMove) {\n        // FIXME: Should do more test in different environment.\n        var absDelta = Math.abs(wheelDelta); // wheelDelta of mouse wheel is bigger than touch pad.\n\n        var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n        checkPointerAndTrigger(this, 'scrollMove', 'moveOnMouseWheel', e, {\n          scrollDelta: scrollDelta,\n          originX: originX,\n          originY: originY,\n          isAvailableBehavior: null\n        });\n      }\n    };\n\n    RoamController.prototype._pinchHandler = function (e) {\n      if (isTaken(this._zr, 'globalPan')) {\n        return;\n      }\n\n      var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n      checkPointerAndTrigger(this, 'zoom', null, e, {\n        scale: scale,\n        originX: e.pinchX,\n        originY: e.pinchY,\n        isAvailableBehavior: null\n      });\n    };\n\n    return RoamController;\n  }(Eventful);\n\n  function checkPointerAndTrigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n    if (controller.pointerChecker && controller.pointerChecker(e, contollerEvent.originX, contollerEvent.originY)) {\n      // When mouse is out of roamController rect,\n      // default befavoius should not be be disabled, otherwise\n      // page sliding is disabled, contrary to expectation.\n      stop(e.event);\n      trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n    }\n  }\n\n  function trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n    // Also provide behavior checker for event listener, for some case that\n    // multiple components share one listener.\n    contollerEvent.isAvailableBehavior = bind(isAvailableBehavior, null, behaviorToCheck, e); // TODO should not have type issue.\n\n    controller.trigger(eventName, contollerEvent);\n  } // settings: {\n  //     zoomOnMouseWheel\n  //     moveOnMouseMove\n  //     moveOnMouseWheel\n  // }\n  // The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n\n\n  function isAvailableBehavior(behaviorToCheck, e, settings) {\n    var setting = settings[behaviorToCheck];\n    return !behaviorToCheck || setting && (!isString(setting) || e.event[setting + 'Key']);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // Only create one roam controller for each coordinate system.\n  // one roam controller might be refered by two inside data zoom\n  // components (for example, one for x and one for y). When user\n  // pan or zoom, only dispatch one action for those data zoom\n  // components.\n\n\n  var inner$10 = makeInner();\n\n  function setViewInfoToCoordSysRecord(api, dataZoomModel, getRange) {\n    inner$10(api).coordSysRecordMap.each(function (coordSysRecord) {\n      var dzInfo = coordSysRecord.dataZoomInfoMap.get(dataZoomModel.uid);\n\n      if (dzInfo) {\n        dzInfo.getRange = getRange;\n      }\n    });\n  }\n\n  function disposeCoordSysRecordIfNeeded(api, dataZoomModel) {\n    var coordSysRecordMap = inner$10(api).coordSysRecordMap;\n    var coordSysKeyArr = coordSysRecordMap.keys();\n\n    for (var i = 0; i < coordSysKeyArr.length; i++) {\n      var coordSysKey = coordSysKeyArr[i];\n      var coordSysRecord = coordSysRecordMap.get(coordSysKey);\n      var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n\n      if (dataZoomInfoMap) {\n        var dzUid = dataZoomModel.uid;\n        var dzInfo = dataZoomInfoMap.get(dzUid);\n\n        if (dzInfo) {\n          dataZoomInfoMap.removeKey(dzUid);\n\n          if (!dataZoomInfoMap.keys().length) {\n            disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n          }\n        }\n      }\n    }\n  }\n\n  function disposeCoordSysRecord(coordSysRecordMap, coordSysRecord) {\n    if (coordSysRecord) {\n      coordSysRecordMap.removeKey(coordSysRecord.model.uid);\n      var controller = coordSysRecord.controller;\n      controller && controller.dispose();\n    }\n  }\n\n  function createCoordSysRecord(api, coordSysModel) {\n    // These init props will never change after record created.\n    var coordSysRecord = {\n      model: coordSysModel,\n      containsPoint: curry(containsPoint, coordSysModel),\n      dispatchAction: curry(dispatchAction, api),\n      dataZoomInfoMap: null,\n      controller: null\n    }; // Must not do anything depends on coordSysRecord outside the event handler here,\n    // because coordSysRecord not completed yet.\n\n    var controller = coordSysRecord.controller = new RoamController(api.getZr());\n    each(['pan', 'zoom', 'scrollMove'], function (eventName) {\n      controller.on(eventName, function (event) {\n        var batch = [];\n        coordSysRecord.dataZoomInfoMap.each(function (dzInfo) {\n          // Check whether the behaviors (zoomOnMouseWheel, moveOnMouseMove,\n          // moveOnMouseWheel, ...) enabled.\n          if (!event.isAvailableBehavior(dzInfo.model.option)) {\n            return;\n          }\n\n          var method = (dzInfo.getRange || {})[eventName];\n          var range = method && method(dzInfo.dzReferCoordSysInfo, coordSysRecord.model.mainType, coordSysRecord.controller, event);\n          !dzInfo.model.get('disabled', true) && range && batch.push({\n            dataZoomId: dzInfo.model.id,\n            start: range[0],\n            end: range[1]\n          });\n        });\n        batch.length && coordSysRecord.dispatchAction(batch);\n      });\n    });\n    return coordSysRecord;\n  }\n  /**\n   * This action will be throttled.\n   */\n\n\n  function dispatchAction(api, batch) {\n    if (!api.isDisposed()) {\n      api.dispatchAction({\n        type: 'dataZoom',\n        animation: {\n          easing: 'cubicOut',\n          duration: 100\n        },\n        batch: batch\n      });\n    }\n  }\n\n  function containsPoint(coordSysModel, e, x, y) {\n    return coordSysModel.coordinateSystem.containPoint([x, y]);\n  }\n  /**\n   * Merge roamController settings when multiple dataZooms share one roamController.\n   */\n\n\n  function mergeControllerParams(dataZoomInfoMap) {\n    var controlType; // DO NOT use reserved word (true, false, undefined) as key literally. Even if encapsulated\n    // as string, it is probably revert to reserved word by compress tool. See #7411.\n\n    var prefix = 'type_';\n    var typePriority = {\n      'type_true': 2,\n      'type_move': 1,\n      'type_false': 0,\n      'type_undefined': -1\n    };\n    var preventDefaultMouseMove = true;\n    dataZoomInfoMap.each(function (dataZoomInfo) {\n      var dataZoomModel = dataZoomInfo.model;\n      var oneType = dataZoomModel.get('disabled', true) ? false : dataZoomModel.get('zoomLock', true) ? 'move' : true;\n\n      if (typePriority[prefix + oneType] > typePriority[prefix + controlType]) {\n        controlType = oneType;\n      } // Prevent default move event by default. If one false, do not prevent. Otherwise\n      // users may be confused why it does not work when multiple insideZooms exist.\n\n\n      preventDefaultMouseMove = preventDefaultMouseMove && dataZoomModel.get('preventDefaultMouseMove', true);\n    });\n    return {\n      controlType: controlType,\n      opt: {\n        // RoamController will enable all of these functionalities,\n        // and the final behavior is determined by its event listener\n        // provided by each inside zoom.\n        zoomOnMouseWheel: true,\n        moveOnMouseMove: true,\n        moveOnMouseWheel: true,\n        preventDefaultMouseMove: !!preventDefaultMouseMove\n      }\n    };\n  }\n\n  function installDataZoomRoamProcessor(registers) {\n    registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, function (ecModel, api) {\n      var apiInner = inner$10(api);\n      var coordSysRecordMap = apiInner.coordSysRecordMap || (apiInner.coordSysRecordMap = createHashMap());\n      coordSysRecordMap.each(function (coordSysRecord) {\n        // `coordSysRecordMap` always exists (becuase it hold the `roam controller`, which should\n        // better not re-create each time), but clear `dataZoomInfoMap` each round of the workflow.\n        coordSysRecord.dataZoomInfoMap = null;\n      });\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'inside'\n      }, function (dataZoomModel) {\n        var dzReferCoordSysWrap = collectReferCoordSysModelInfo(dataZoomModel);\n        each(dzReferCoordSysWrap.infoList, function (dzCoordSysInfo) {\n          var coordSysUid = dzCoordSysInfo.model.uid;\n          var coordSysRecord = coordSysRecordMap.get(coordSysUid) || coordSysRecordMap.set(coordSysUid, createCoordSysRecord(api, dzCoordSysInfo.model));\n          var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap || (coordSysRecord.dataZoomInfoMap = createHashMap()); // Notice these props might be changed each time for a single dataZoomModel.\n\n          dataZoomInfoMap.set(dataZoomModel.uid, {\n            dzReferCoordSysInfo: dzCoordSysInfo,\n            model: dataZoomModel,\n            getRange: null\n          });\n        });\n      }); // (1) Merge dataZoom settings for each coord sys and set to the roam controller.\n      // (2) Clear coord sys if not refered by any dataZoom.\n\n      coordSysRecordMap.each(function (coordSysRecord) {\n        var controller = coordSysRecord.controller;\n        var firstDzInfo;\n        var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n\n        if (dataZoomInfoMap) {\n          var firstDzKey = dataZoomInfoMap.keys()[0];\n\n          if (firstDzKey != null) {\n            firstDzInfo = dataZoomInfoMap.get(firstDzKey);\n          }\n        }\n\n        if (!firstDzInfo) {\n          disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n          return;\n        }\n\n        var controllerParams = mergeControllerParams(dataZoomInfoMap);\n        controller.enable(controllerParams.controlType, controllerParams.opt);\n        controller.setPointerChecker(coordSysRecord.containsPoint);\n        createOrUpdate(coordSysRecord, 'dispatchAction', firstDzInfo.model.get('throttle', true), 'fixRate');\n      });\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var InsideZoomView =\n  /** @class */\n  function (_super) {\n    __extends(InsideZoomView, _super);\n\n    function InsideZoomView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = 'dataZoom.inside';\n      return _this;\n    }\n\n    InsideZoomView.prototype.render = function (dataZoomModel, ecModel, api) {\n      _super.prototype.render.apply(this, arguments);\n\n      if (dataZoomModel.noTarget()) {\n        this._clear();\n\n        return;\n      } // Hence the `throttle` util ensures to preserve command order,\n      // here simply updating range all the time will not cause missing\n      // any of the the roam change.\n\n\n      this.range = dataZoomModel.getPercentRange(); // Reset controllers.\n\n      setViewInfoToCoordSysRecord(api, dataZoomModel, {\n        pan: bind(getRangeHandlers.pan, this),\n        zoom: bind(getRangeHandlers.zoom, this),\n        scrollMove: bind(getRangeHandlers.scrollMove, this)\n      });\n    };\n\n    InsideZoomView.prototype.dispose = function () {\n      this._clear();\n\n      _super.prototype.dispose.apply(this, arguments);\n    };\n\n    InsideZoomView.prototype._clear = function () {\n      disposeCoordSysRecordIfNeeded(this.api, this.dataZoomModel);\n      this.range = null;\n    };\n\n    InsideZoomView.type = 'dataZoom.inside';\n    return InsideZoomView;\n  }(DataZoomView);\n\n  var getRangeHandlers = {\n    zoom: function (coordSysInfo, coordSysMainType, controller, e) {\n      var lastRange = this.range;\n      var range = lastRange.slice(); // Calculate transform by the first axis.\n\n      var axisModel = coordSysInfo.axisModels[0];\n\n      if (!axisModel) {\n        return;\n      }\n\n      var directionInfo = getDirectionInfo[coordSysMainType](null, [e.originX, e.originY], axisModel, controller, coordSysInfo);\n      var percentPoint = (directionInfo.signal > 0 ? directionInfo.pixelStart + directionInfo.pixelLength - directionInfo.pixel : directionInfo.pixel - directionInfo.pixelStart) / directionInfo.pixelLength * (range[1] - range[0]) + range[0];\n      var scale = Math.max(1 / e.scale, 0);\n      range[0] = (range[0] - percentPoint) * scale + percentPoint;\n      range[1] = (range[1] - percentPoint) * scale + percentPoint; // Restrict range.\n\n      var minMaxSpan = this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n      sliderMove(0, range, [0, 100], 0, minMaxSpan.minSpan, minMaxSpan.maxSpan);\n      this.range = range;\n\n      if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n        return range;\n      }\n    },\n    pan: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n      var directionInfo = getDirectionInfo[coordSysMainType]([e.oldX, e.oldY], [e.newX, e.newY], axisModel, controller, coordSysInfo);\n      return directionInfo.signal * (range[1] - range[0]) * directionInfo.pixel / directionInfo.pixelLength;\n    }),\n    scrollMove: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n      var directionInfo = getDirectionInfo[coordSysMainType]([0, 0], [e.scrollDelta, e.scrollDelta], axisModel, controller, coordSysInfo);\n      return directionInfo.signal * (range[1] - range[0]) * e.scrollDelta;\n    })\n  };\n\n  function makeMover(getPercentDelta) {\n    return function (coordSysInfo, coordSysMainType, controller, e) {\n      var lastRange = this.range;\n      var range = lastRange.slice(); // Calculate transform by the first axis.\n\n      var axisModel = coordSysInfo.axisModels[0];\n\n      if (!axisModel) {\n        return;\n      }\n\n      var percentDelta = getPercentDelta(range, axisModel, coordSysInfo, coordSysMainType, controller, e);\n      sliderMove(percentDelta, range, [0, 100], 'all');\n      this.range = range;\n\n      if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n        return range;\n      }\n    };\n  }\n\n  var getDirectionInfo = {\n    grid: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n      var axis = axisModel.axis;\n      var ret = {};\n      var rect = coordSysInfo.model.coordinateSystem.getRect();\n      oldPoint = oldPoint || [0, 0];\n\n      if (axis.dim === 'x') {\n        ret.pixel = newPoint[0] - oldPoint[0];\n        ret.pixelLength = rect.width;\n        ret.pixelStart = rect.x;\n        ret.signal = axis.inverse ? 1 : -1;\n      } else {\n        // axis.dim === 'y'\n        ret.pixel = newPoint[1] - oldPoint[1];\n        ret.pixelLength = rect.height;\n        ret.pixelStart = rect.y;\n        ret.signal = axis.inverse ? -1 : 1;\n      }\n\n      return ret;\n    },\n    polar: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n      var axis = axisModel.axis;\n      var ret = {};\n      var polar = coordSysInfo.model.coordinateSystem;\n      var radiusExtent = polar.getRadiusAxis().getExtent();\n      var angleExtent = polar.getAngleAxis().getExtent();\n      oldPoint = oldPoint ? polar.pointToCoord(oldPoint) : [0, 0];\n      newPoint = polar.pointToCoord(newPoint);\n\n      if (axisModel.mainType === 'radiusAxis') {\n        ret.pixel = newPoint[0] - oldPoint[0]; // ret.pixelLength = Math.abs(radiusExtent[1] - radiusExtent[0]);\n        // ret.pixelStart = Math.min(radiusExtent[0], radiusExtent[1]);\n\n        ret.pixelLength = radiusExtent[1] - radiusExtent[0];\n        ret.pixelStart = radiusExtent[0];\n        ret.signal = axis.inverse ? 1 : -1;\n      } else {\n        // 'angleAxis'\n        ret.pixel = newPoint[1] - oldPoint[1]; // ret.pixelLength = Math.abs(angleExtent[1] - angleExtent[0]);\n        // ret.pixelStart = Math.min(angleExtent[0], angleExtent[1]);\n\n        ret.pixelLength = angleExtent[1] - angleExtent[0];\n        ret.pixelStart = angleExtent[0];\n        ret.signal = axis.inverse ? -1 : 1;\n      }\n\n      return ret;\n    },\n    singleAxis: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n      var axis = axisModel.axis;\n      var rect = coordSysInfo.model.coordinateSystem.getRect();\n      var ret = {};\n      oldPoint = oldPoint || [0, 0];\n\n      if (axis.orient === 'horizontal') {\n        ret.pixel = newPoint[0] - oldPoint[0];\n        ret.pixelLength = rect.width;\n        ret.pixelStart = rect.x;\n        ret.signal = axis.inverse ? 1 : -1;\n      } else {\n        // 'vertical'\n        ret.pixel = newPoint[1] - oldPoint[1];\n        ret.pixelLength = rect.height;\n        ret.pixelStart = rect.y;\n        ret.signal = axis.inverse ? -1 : 1;\n      }\n\n      return ret;\n    }\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var each$5 = each;\n  var asc$1 = asc;\n  /**\n   * Operate single axis.\n   * One axis can only operated by one axis operator.\n   * Different dataZoomModels may be defined to operate the same axis.\n   * (i.e. 'inside' data zoom and 'slider' data zoom components)\n   * So dataZoomModels share one axisProxy in that case.\n   */\n\n  var AxisProxy =\n  /** @class */\n  function () {\n    function AxisProxy(dimName, axisIndex, dataZoomModel, ecModel) {\n      this._dimName = dimName;\n      this._axisIndex = axisIndex;\n      this.ecModel = ecModel;\n      this._dataZoomModel = dataZoomModel; // /**\n      //  * @readOnly\n      //  * @private\n      //  */\n      // this.hasSeriesStacked;\n    }\n    /**\n     * Whether the axisProxy is hosted by dataZoomModel.\n     */\n\n\n    AxisProxy.prototype.hostedBy = function (dataZoomModel) {\n      return this._dataZoomModel === dataZoomModel;\n    };\n    /**\n     * @return Value can only be NaN or finite value.\n     */\n\n\n    AxisProxy.prototype.getDataValueWindow = function () {\n      return this._valueWindow.slice();\n    };\n    /**\n     * @return {Array.<number>}\n     */\n\n\n    AxisProxy.prototype.getDataPercentWindow = function () {\n      return this._percentWindow.slice();\n    };\n\n    AxisProxy.prototype.getTargetSeriesModels = function () {\n      var seriesModels = [];\n      this.ecModel.eachSeries(function (seriesModel) {\n        if (isCoordSupported(seriesModel)) {\n          var axisMainType = getAxisMainType(this._dimName);\n          var axisModel = seriesModel.getReferringComponents(axisMainType, SINGLE_REFERRING).models[0];\n\n          if (axisModel && this._axisIndex === axisModel.componentIndex) {\n            seriesModels.push(seriesModel);\n          }\n        }\n      }, this);\n      return seriesModels;\n    };\n\n    AxisProxy.prototype.getAxisModel = function () {\n      return this.ecModel.getComponent(this._dimName + 'Axis', this._axisIndex);\n    };\n\n    AxisProxy.prototype.getMinMaxSpan = function () {\n      return clone(this._minMaxSpan);\n    };\n    /**\n     * Only calculate by given range and this._dataExtent, do not change anything.\n     */\n\n\n    AxisProxy.prototype.calculateDataWindow = function (opt) {\n      var dataExtent = this._dataExtent;\n      var axisModel = this.getAxisModel();\n      var scale = axisModel.axis.scale;\n\n      var rangePropMode = this._dataZoomModel.getRangePropMode();\n\n      var percentExtent = [0, 100];\n      var percentWindow = [];\n      var valueWindow = [];\n      var hasPropModeValue;\n      each$5(['start', 'end'], function (prop, idx) {\n        var boundPercent = opt[prop];\n        var boundValue = opt[prop + 'Value']; // Notice: dataZoom is based either on `percentProp` ('start', 'end') or\n        // on `valueProp` ('startValue', 'endValue'). (They are based on the data extent\n        // but not min/max of axis, which will be calculated by data window then).\n        // The former one is suitable for cases that a dataZoom component controls multiple\n        // axes with different unit or extent, and the latter one is suitable for accurate\n        // zoom by pixel (e.g., in dataZoomSelect).\n        // we use `getRangePropMode()` to mark which prop is used. `rangePropMode` is updated\n        // only when setOption or dispatchAction, otherwise it remains its original value.\n        // (Why not only record `percentProp` and always map to `valueProp`? Because\n        // the map `valueProp` -> `percentProp` -> `valueProp` probably not the original\n        // `valueProp`. consider two axes constrolled by one dataZoom. They have different\n        // data extent. All of values that are overflow the `dataExtent` will be calculated\n        // to percent '100%').\n\n        if (rangePropMode[idx] === 'percent') {\n          boundPercent == null && (boundPercent = percentExtent[idx]); // Use scale.parse to math round for category or time axis.\n\n          boundValue = scale.parse(linearMap(boundPercent, percentExtent, dataExtent));\n        } else {\n          hasPropModeValue = true;\n          boundValue = boundValue == null ? dataExtent[idx] : scale.parse(boundValue); // Calculating `percent` from `value` may be not accurate, because\n          // This calculation can not be inversed, because all of values that\n          // are overflow the `dataExtent` will be calculated to percent '100%'\n\n          boundPercent = linearMap(boundValue, dataExtent, percentExtent);\n        } // valueWindow[idx] = round(boundValue);\n        // percentWindow[idx] = round(boundPercent);\n\n\n        valueWindow[idx] = boundValue;\n        percentWindow[idx] = boundPercent;\n      });\n      asc$1(valueWindow);\n      asc$1(percentWindow); // The windows from user calling of `dispatchAction` might be out of the extent,\n      // or do not obey the `min/maxSpan`, `min/maxValueSpan`. But we dont restrict window\n      // by `zoomLock` here, because we see `zoomLock` just as a interaction constraint,\n      // where API is able to initialize/modify the window size even though `zoomLock`\n      // specified.\n\n      var spans = this._minMaxSpan;\n      hasPropModeValue ? restrictSet(valueWindow, percentWindow, dataExtent, percentExtent, false) : restrictSet(percentWindow, valueWindow, percentExtent, dataExtent, true);\n\n      function restrictSet(fromWindow, toWindow, fromExtent, toExtent, toValue) {\n        var suffix = toValue ? 'Span' : 'ValueSpan';\n        sliderMove(0, fromWindow, fromExtent, 'all', spans['min' + suffix], spans['max' + suffix]);\n\n        for (var i = 0; i < 2; i++) {\n          toWindow[i] = linearMap(fromWindow[i], fromExtent, toExtent, true);\n          toValue && (toWindow[i] = scale.parse(toWindow[i]));\n        }\n      }\n\n      return {\n        valueWindow: valueWindow,\n        percentWindow: percentWindow\n      };\n    };\n    /**\n     * Notice: reset should not be called before series.restoreData() called,\n     * so it is recommanded to be called in \"process stage\" but not \"model init\n     * stage\".\n     */\n\n\n    AxisProxy.prototype.reset = function (dataZoomModel) {\n      if (dataZoomModel !== this._dataZoomModel) {\n        return;\n      }\n\n      var targetSeries = this.getTargetSeriesModels(); // Culculate data window and data extent, and record them.\n\n      this._dataExtent = calculateDataExtent(this, this._dimName, targetSeries); // `calculateDataWindow` uses min/maxSpan.\n\n      this._updateMinMaxSpan();\n\n      var dataWindow = this.calculateDataWindow(dataZoomModel.settledOption);\n      this._valueWindow = dataWindow.valueWindow;\n      this._percentWindow = dataWindow.percentWindow; // Update axis setting then.\n\n      this._setAxisModel();\n    };\n\n    AxisProxy.prototype.filterData = function (dataZoomModel, api) {\n      if (dataZoomModel !== this._dataZoomModel) {\n        return;\n      }\n\n      var axisDim = this._dimName;\n      var seriesModels = this.getTargetSeriesModels();\n      var filterMode = dataZoomModel.get('filterMode');\n      var valueWindow = this._valueWindow;\n\n      if (filterMode === 'none') {\n        return;\n      } // FIXME\n      // Toolbox may has dataZoom injected. And if there are stacked bar chart\n      // with NaN data, NaN will be filtered and stack will be wrong.\n      // So we need to force the mode to be set empty.\n      // In fect, it is not a big deal that do not support filterMode-'filter'\n      // when using toolbox#dataZoom, utill tooltip#dataZoom support \"single axis\n      // selection\" some day, which might need \"adapt to data extent on the\n      // otherAxis\", which is disabled by filterMode-'empty'.\n      // But currently, stack has been fixed to based on value but not index,\n      // so this is not an issue any more.\n      // let otherAxisModel = this.getOtherAxisModel();\n      // if (dataZoomModel.get('$fromToolbox')\n      //     && otherAxisModel\n      //     && otherAxisModel.hasSeriesStacked\n      // ) {\n      //     filterMode = 'empty';\n      // }\n      // TODO\n      // filterMode 'weakFilter' and 'empty' is not optimized for huge data yet.\n\n\n      each$5(seriesModels, function (seriesModel) {\n        var seriesData = seriesModel.getData();\n        var dataDims = seriesData.mapDimensionsAll(axisDim);\n\n        if (!dataDims.length) {\n          return;\n        }\n\n        if (filterMode === 'weakFilter') {\n          var store_1 = seriesData.getStore();\n          var dataDimIndices_1 = map(dataDims, function (dim) {\n            return seriesData.getDimensionIndex(dim);\n          }, seriesData);\n          seriesData.filterSelf(function (dataIndex) {\n            var leftOut;\n            var rightOut;\n            var hasValue;\n\n            for (var i = 0; i < dataDims.length; i++) {\n              var value = store_1.get(dataDimIndices_1[i], dataIndex);\n              var thisHasValue = !isNaN(value);\n              var thisLeftOut = value < valueWindow[0];\n              var thisRightOut = value > valueWindow[1];\n\n              if (thisHasValue && !thisLeftOut && !thisRightOut) {\n                return true;\n              }\n\n              thisHasValue && (hasValue = true);\n              thisLeftOut && (leftOut = true);\n              thisRightOut && (rightOut = true);\n            } // If both left out and right out, do not filter.\n\n\n            return hasValue && leftOut && rightOut;\n          });\n        } else {\n          each$5(dataDims, function (dim) {\n            if (filterMode === 'empty') {\n              seriesModel.setData(seriesData = seriesData.map(dim, function (value) {\n                return !isInWindow(value) ? NaN : value;\n              }));\n            } else {\n              var range = {};\n              range[dim] = valueWindow; // console.time('select');\n\n              seriesData.selectRange(range); // console.timeEnd('select');\n            }\n          });\n        }\n\n        each$5(dataDims, function (dim) {\n          seriesData.setApproximateExtent(valueWindow, dim);\n        });\n      });\n\n      function isInWindow(value) {\n        return value >= valueWindow[0] && value <= valueWindow[1];\n      }\n    };\n\n    AxisProxy.prototype._updateMinMaxSpan = function () {\n      var minMaxSpan = this._minMaxSpan = {};\n      var dataZoomModel = this._dataZoomModel;\n      var dataExtent = this._dataExtent;\n      each$5(['min', 'max'], function (minMax) {\n        var percentSpan = dataZoomModel.get(minMax + 'Span');\n        var valueSpan = dataZoomModel.get(minMax + 'ValueSpan');\n        valueSpan != null && (valueSpan = this.getAxisModel().axis.scale.parse(valueSpan)); // minValueSpan and maxValueSpan has higher priority than minSpan and maxSpan\n\n        if (valueSpan != null) {\n          percentSpan = linearMap(dataExtent[0] + valueSpan, dataExtent, [0, 100], true);\n        } else if (percentSpan != null) {\n          valueSpan = linearMap(percentSpan, [0, 100], dataExtent, true) - dataExtent[0];\n        }\n\n        minMaxSpan[minMax + 'Span'] = percentSpan;\n        minMaxSpan[minMax + 'ValueSpan'] = valueSpan;\n      }, this);\n    };\n\n    AxisProxy.prototype._setAxisModel = function () {\n      var axisModel = this.getAxisModel();\n      var percentWindow = this._percentWindow;\n      var valueWindow = this._valueWindow;\n\n      if (!percentWindow) {\n        return;\n      } // [0, 500]: arbitrary value, guess axis extent.\n\n\n      var precision = getPixelPrecision(valueWindow, [0, 500]);\n      precision = Math.min(precision, 20); // For value axis, if min/max/scale are not set, we just use the extent obtained\n      // by series data, which may be a little different from the extent calculated by\n      // `axisHelper.getScaleExtent`. But the different just affects the experience a\n      // little when zooming. So it will not be fixed until some users require it strongly.\n\n      var rawExtentInfo = axisModel.axis.scale.rawExtentInfo;\n\n      if (percentWindow[0] !== 0) {\n        rawExtentInfo.setDeterminedMinMax('min', +valueWindow[0].toFixed(precision));\n      }\n\n      if (percentWindow[1] !== 100) {\n        rawExtentInfo.setDeterminedMinMax('max', +valueWindow[1].toFixed(precision));\n      }\n\n      rawExtentInfo.freeze();\n    };\n\n    return AxisProxy;\n  }();\n\n  function calculateDataExtent(axisProxy, axisDim, seriesModels) {\n    var dataExtent = [Infinity, -Infinity];\n    each$5(seriesModels, function (seriesModel) {\n      unionAxisExtentFromData(dataExtent, seriesModel.getData(), axisDim);\n    }); // It is important to get \"consistent\" extent when more then one axes is\n    // controlled by a `dataZoom`, otherwise those axes will not be synchronized\n    // when zooming. But it is difficult to know what is \"consistent\", considering\n    // axes have different type or even different meanings (For example, two\n    // time axes are used to compare data of the same date in different years).\n    // So basically dataZoom just obtains extent by series.data (in category axis\n    // extent can be obtained from axis.data).\n    // Nevertheless, user can set min/max/scale on axes to make extent of axes\n    // consistent.\n\n    var axisModel = axisProxy.getAxisModel();\n    var rawExtentResult = ensureScaleRawExtentInfo(axisModel.axis.scale, axisModel, dataExtent).calculate();\n    return [rawExtentResult.min, rawExtentResult.max];\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var dataZoomProcessor = {\n    // `dataZoomProcessor` will only be performed in needed series. Consider if\n    // there is a line series and a pie series, it is better not to update the\n    // line series if only pie series is needed to be updated.\n    getTargetSeries: function (ecModel) {\n      function eachAxisModel(cb) {\n        ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n          dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n            var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n            cb(axisDim, axisIndex, axisModel, dataZoomModel);\n          });\n        });\n      } // FIXME: it brings side-effect to `getTargetSeries`.\n      // Prepare axis proxies.\n\n\n      eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n        // dispose all last axis proxy, in case that some axis are deleted.\n        axisModel.__dzAxisProxy = null;\n      });\n      var proxyList = [];\n      eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n        // Different dataZooms may constrol the same axis. In that case,\n        // an axisProxy serves both of them.\n        if (!axisModel.__dzAxisProxy) {\n          // Use the first dataZoomModel as the main model of axisProxy.\n          axisModel.__dzAxisProxy = new AxisProxy(axisDim, axisIndex, dataZoomModel, ecModel);\n          proxyList.push(axisModel.__dzAxisProxy);\n        }\n      });\n      var seriesModelMap = createHashMap();\n      each(proxyList, function (axisProxy) {\n        each(axisProxy.getTargetSeriesModels(), function (seriesModel) {\n          seriesModelMap.set(seriesModel.uid, seriesModel);\n        });\n      });\n      return seriesModelMap;\n    },\n    // Consider appendData, where filter should be performed. Because data process is\n    // in block mode currently, it is not need to worry about that the overallProgress\n    // execute every frame.\n    overallReset: function (ecModel, api) {\n      ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n        // We calculate window and reset axis here but not in model\n        // init stage and not after action dispatch handler, because\n        // reset should be called after seriesData.restoreData.\n        dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n          dataZoomModel.getAxisProxy(axisDim, axisIndex).reset(dataZoomModel);\n        }); // Caution: data zoom filtering is order sensitive when using\n        // percent range and no min/max/scale set on axis.\n        // For example, we have dataZoom definition:\n        // [\n        //      {xAxisIndex: 0, start: 30, end: 70},\n        //      {yAxisIndex: 0, start: 20, end: 80}\n        // ]\n        // In this case, [20, 80] of y-dataZoom should be based on data\n        // that have filtered by x-dataZoom using range of [30, 70],\n        // but should not be based on full raw data. Thus sliding\n        // x-dataZoom will change both ranges of xAxis and yAxis,\n        // while sliding y-dataZoom will only change the range of yAxis.\n        // So we should filter x-axis after reset x-axis immediately,\n        // and then reset y-axis and filter y-axis.\n\n        dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n          dataZoomModel.getAxisProxy(axisDim, axisIndex).filterData(dataZoomModel, api);\n        });\n      });\n      ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n        // Fullfill all of the range props so that user\n        // is able to get them from chart.getOption().\n        var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n\n        if (axisProxy) {\n          var percentRange = axisProxy.getDataPercentWindow();\n          var valueRange = axisProxy.getDataValueWindow();\n          dataZoomModel.setCalculatedRange({\n            start: percentRange[0],\n            end: percentRange[1],\n            startValue: valueRange[0],\n            endValue: valueRange[1]\n          });\n        }\n      });\n    }\n  };\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  function installDataZoomAction(registers) {\n    registers.registerAction('dataZoom', function (payload, ecModel) {\n      var effectedModels = findEffectedDataZooms(ecModel, payload);\n      each(effectedModels, function (dataZoomModel) {\n        dataZoomModel.setRawRange({\n          start: payload.start,\n          end: payload.end,\n          startValue: payload.startValue,\n          endValue: payload.endValue\n        });\n      });\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var installed = false;\n\n  function installCommon(registers) {\n    if (installed) {\n      return;\n    }\n\n    installed = true;\n    registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, dataZoomProcessor);\n    installDataZoomAction(registers);\n    registers.registerSubTypeDefaulter('dataZoom', function () {\n      // Default 'slider' when no type specified.\n      return 'slider';\n    });\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$13(registers) {\n    installCommon(registers);\n    registers.registerComponentModel(InsideZoomModel);\n    registers.registerComponentView(InsideZoomView);\n    installDataZoomRoamProcessor(registers);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var SliderZoomModel =\n  /** @class */\n  function (_super) {\n    __extends(SliderZoomModel, _super);\n\n    function SliderZoomModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = SliderZoomModel.type;\n      return _this;\n    }\n\n    SliderZoomModel.type = 'dataZoom.slider';\n    SliderZoomModel.layoutMode = 'box';\n    SliderZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n      show: true,\n      // deault value can only be drived in view stage.\n      right: 'ph',\n      top: 'ph',\n      width: 'ph',\n      height: 'ph',\n      left: null,\n      bottom: null,\n      borderColor: '#d2dbee',\n      borderRadius: 3,\n      backgroundColor: 'rgba(47,69,84,0)',\n      // dataBackgroundColor: '#ddd',\n      dataBackground: {\n        lineStyle: {\n          color: '#d2dbee',\n          width: 0.5\n        },\n        areaStyle: {\n          color: '#d2dbee',\n          opacity: 0.2\n        }\n      },\n      selectedDataBackground: {\n        lineStyle: {\n          color: '#8fb0f7',\n          width: 0.5\n        },\n        areaStyle: {\n          color: '#8fb0f7',\n          opacity: 0.2\n        }\n      },\n      // Color of selected window.\n      fillerColor: 'rgba(135,175,274,0.2)',\n      handleIcon: 'path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z',\n      // Percent of the slider height\n      handleSize: '100%',\n      handleStyle: {\n        color: '#fff',\n        borderColor: '#ACB8D1'\n      },\n      moveHandleSize: 7,\n      moveHandleIcon: 'path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z',\n      moveHandleStyle: {\n        color: '#D2DBEE',\n        opacity: 0.7\n      },\n      showDetail: true,\n      showDataShadow: 'auto',\n      realtime: true,\n      zoomLock: false,\n      textStyle: {\n        color: '#6E7079'\n      },\n      brushSelect: true,\n      brushStyle: {\n        color: 'rgba(135,175,274,0.15)'\n      },\n      emphasis: {\n        handleStyle: {\n          borderColor: '#8FB0F7'\n        },\n        moveHandleStyle: {\n          color: '#8FB0F7'\n        }\n      }\n    });\n    return SliderZoomModel;\n  }(DataZoomModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var Rect$2 = Rect; // Constants\n\n  var DEFAULT_LOCATION_EDGE_GAP = 7;\n  var DEFAULT_FRAME_BORDER_WIDTH = 1;\n  var DEFAULT_FILLER_SIZE = 30;\n  var DEFAULT_MOVE_HANDLE_SIZE = 7;\n  var HORIZONTAL = 'horizontal';\n  var VERTICAL = 'vertical';\n  var LABEL_GAP = 5;\n  var SHOW_DATA_SHADOW_SERIES_TYPE = ['line', 'bar', 'candlestick', 'scatter'];\n  var REALTIME_ANIMATION_CONFIG = {\n    easing: 'cubicOut',\n    duration: 100,\n    delay: 0\n  };\n\n  var SliderZoomView =\n  /** @class */\n  function (_super) {\n    __extends(SliderZoomView, _super);\n\n    function SliderZoomView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = SliderZoomView.type;\n      _this._displayables = {};\n      return _this;\n    }\n\n    SliderZoomView.prototype.init = function (ecModel, api) {\n      this.api = api; // A unique handler for each dataZoom component\n\n      this._onBrush = bind(this._onBrush, this);\n      this._onBrushEnd = bind(this._onBrushEnd, this);\n    };\n\n    SliderZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n      _super.prototype.render.apply(this, arguments);\n\n      createOrUpdate(this, '_dispatchZoomAction', dataZoomModel.get('throttle'), 'fixRate');\n      this._orient = dataZoomModel.getOrient();\n\n      if (dataZoomModel.get('show') === false) {\n        this.group.removeAll();\n        return;\n      }\n\n      if (dataZoomModel.noTarget()) {\n        this._clear();\n\n        this.group.removeAll();\n        return;\n      } // Notice: this._resetInterval() should not be executed when payload.type\n      // is 'dataZoom', origin this._range should be maintained, otherwise 'pan'\n      // or 'zoom' info will be missed because of 'throttle' of this.dispatchAction,\n\n\n      if (!payload || payload.type !== 'dataZoom' || payload.from !== this.uid) {\n        this._buildView();\n      }\n\n      this._updateView();\n    };\n\n    SliderZoomView.prototype.dispose = function () {\n      this._clear();\n\n      _super.prototype.dispose.apply(this, arguments);\n    };\n\n    SliderZoomView.prototype._clear = function () {\n      clear(this, '_dispatchZoomAction');\n      var zr = this.api.getZr();\n      zr.off('mousemove', this._onBrush);\n      zr.off('mouseup', this._onBrushEnd);\n    };\n\n    SliderZoomView.prototype._buildView = function () {\n      var thisGroup = this.group;\n      thisGroup.removeAll();\n      this._brushing = false;\n      this._displayables.brushRect = null;\n\n      this._resetLocation();\n\n      this._resetInterval();\n\n      var barGroup = this._displayables.sliderGroup = new Group();\n\n      this._renderBackground();\n\n      this._renderHandle();\n\n      this._renderDataShadow();\n\n      thisGroup.add(barGroup);\n\n      this._positionGroup();\n    };\n\n    SliderZoomView.prototype._resetLocation = function () {\n      var dataZoomModel = this.dataZoomModel;\n      var api = this.api;\n      var showMoveHandle = dataZoomModel.get('brushSelect');\n      var moveHandleSize = showMoveHandle ? DEFAULT_MOVE_HANDLE_SIZE : 0; // If some of x/y/width/height are not specified,\n      // auto-adapt according to target grid.\n\n      var coordRect = this._findCoordRect();\n\n      var ecSize = {\n        width: api.getWidth(),\n        height: api.getHeight()\n      }; // Default align by coordinate system rect.\n\n      var positionInfo = this._orient === HORIZONTAL ? {\n        // Why using 'right', because right should be used in vertical,\n        // and it is better to be consistent for dealing with position param merge.\n        right: ecSize.width - coordRect.x - coordRect.width,\n        top: ecSize.height - DEFAULT_FILLER_SIZE - DEFAULT_LOCATION_EDGE_GAP - moveHandleSize,\n        width: coordRect.width,\n        height: DEFAULT_FILLER_SIZE\n      } : {\n        right: DEFAULT_LOCATION_EDGE_GAP,\n        top: coordRect.y,\n        width: DEFAULT_FILLER_SIZE,\n        height: coordRect.height\n      }; // Do not write back to option and replace value 'ph', because\n      // the 'ph' value should be recalculated when resize.\n\n      var layoutParams = getLayoutParams(dataZoomModel.option); // Replace the placeholder value.\n\n      each(['right', 'top', 'width', 'height'], function (name) {\n        if (layoutParams[name] === 'ph') {\n          layoutParams[name] = positionInfo[name];\n        }\n      });\n      var layoutRect = getLayoutRect(layoutParams, ecSize);\n      this._location = {\n        x: layoutRect.x,\n        y: layoutRect.y\n      };\n      this._size = [layoutRect.width, layoutRect.height];\n      this._orient === VERTICAL && this._size.reverse();\n    };\n\n    SliderZoomView.prototype._positionGroup = function () {\n      var thisGroup = this.group;\n      var location = this._location;\n      var orient = this._orient; // Just use the first axis to determine mapping.\n\n      var targetAxisModel = this.dataZoomModel.getFirstTargetAxisModel();\n      var inverse = targetAxisModel && targetAxisModel.get('inverse');\n      var sliderGroup = this._displayables.sliderGroup;\n      var otherAxisInverse = (this._dataShadowInfo || {}).otherAxisInverse; // Transform barGroup.\n\n      sliderGroup.attr(orient === HORIZONTAL && !inverse ? {\n        scaleY: otherAxisInverse ? 1 : -1,\n        scaleX: 1\n      } : orient === HORIZONTAL && inverse ? {\n        scaleY: otherAxisInverse ? 1 : -1,\n        scaleX: -1\n      } : orient === VERTICAL && !inverse ? {\n        scaleY: otherAxisInverse ? -1 : 1,\n        scaleX: 1,\n        rotation: Math.PI / 2\n      } // Dont use Math.PI, considering shadow direction.\n      : {\n        scaleY: otherAxisInverse ? -1 : 1,\n        scaleX: -1,\n        rotation: Math.PI / 2\n      }); // Position barGroup\n\n      var rect = thisGroup.getBoundingRect([sliderGroup]);\n      thisGroup.x = location.x - rect.x;\n      thisGroup.y = location.y - rect.y;\n      thisGroup.markRedraw();\n    };\n\n    SliderZoomView.prototype._getViewExtent = function () {\n      return [0, this._size[0]];\n    };\n\n    SliderZoomView.prototype._renderBackground = function () {\n      var dataZoomModel = this.dataZoomModel;\n      var size = this._size;\n      var barGroup = this._displayables.sliderGroup;\n      var brushSelect = dataZoomModel.get('brushSelect');\n      barGroup.add(new Rect$2({\n        silent: true,\n        shape: {\n          x: 0,\n          y: 0,\n          width: size[0],\n          height: size[1]\n        },\n        style: {\n          fill: dataZoomModel.get('backgroundColor')\n        },\n        z2: -40\n      })); // Click panel, over shadow, below handles.\n\n      var clickPanel = new Rect$2({\n        shape: {\n          x: 0,\n          y: 0,\n          width: size[0],\n          height: size[1]\n        },\n        style: {\n          fill: 'transparent'\n        },\n        z2: 0,\n        onclick: bind(this._onClickPanel, this)\n      });\n      var zr = this.api.getZr();\n\n      if (brushSelect) {\n        clickPanel.on('mousedown', this._onBrushStart, this);\n        clickPanel.cursor = 'crosshair';\n        zr.on('mousemove', this._onBrush);\n        zr.on('mouseup', this._onBrushEnd);\n      } else {\n        zr.off('mousemove', this._onBrush);\n        zr.off('mouseup', this._onBrushEnd);\n      }\n\n      barGroup.add(clickPanel);\n    };\n\n    SliderZoomView.prototype._renderDataShadow = function () {\n      var info = this._dataShadowInfo = this._prepareDataShadowInfo();\n\n      this._displayables.dataShadowSegs = [];\n\n      if (!info) {\n        return;\n      }\n\n      var size = this._size;\n      var oldSize = this._shadowSize || [];\n      var seriesModel = info.series;\n      var data = seriesModel.getRawData();\n      var otherDim = seriesModel.getShadowDim ? seriesModel.getShadowDim() // @see candlestick\n      : info.otherDim;\n\n      if (otherDim == null) {\n        return;\n      }\n\n      var polygonPts = this._shadowPolygonPts;\n      var polylinePts = this._shadowPolylinePts; // Not re-render if data doesn't change.\n\n      if (data !== this._shadowData || otherDim !== this._shadowDim || size[0] !== oldSize[0] || size[1] !== oldSize[1]) {\n        var otherDataExtent_1 = data.getDataExtent(otherDim); // Nice extent.\n\n        var otherOffset = (otherDataExtent_1[1] - otherDataExtent_1[0]) * 0.3;\n        otherDataExtent_1 = [otherDataExtent_1[0] - otherOffset, otherDataExtent_1[1] + otherOffset];\n        var otherShadowExtent_1 = [0, size[1]];\n        var thisShadowExtent = [0, size[0]];\n        var areaPoints_1 = [[size[0], 0], [0, 0]];\n        var linePoints_1 = [];\n        var step_1 = thisShadowExtent[1] / (data.count() - 1);\n        var thisCoord_1 = 0; // Optimize for large data shadow\n\n        var stride_1 = Math.round(data.count() / size[0]);\n        var lastIsEmpty_1;\n        data.each([otherDim], function (value, index) {\n          if (stride_1 > 0 && index % stride_1) {\n            thisCoord_1 += step_1;\n            return;\n          } // FIXME\n          // Should consider axis.min/axis.max when drawing dataShadow.\n          // FIXME\n          // 应该使用统一的空判断？还是在list里进行空判断？\n\n\n          var isEmpty = value == null || isNaN(value) || value === ''; // See #4235.\n\n          var otherCoord = isEmpty ? 0 : linearMap(value, otherDataExtent_1, otherShadowExtent_1, true); // Attempt to draw data shadow precisely when there are empty value.\n\n          if (isEmpty && !lastIsEmpty_1 && index) {\n            areaPoints_1.push([areaPoints_1[areaPoints_1.length - 1][0], 0]);\n            linePoints_1.push([linePoints_1[linePoints_1.length - 1][0], 0]);\n          } else if (!isEmpty && lastIsEmpty_1) {\n            areaPoints_1.push([thisCoord_1, 0]);\n            linePoints_1.push([thisCoord_1, 0]);\n          }\n\n          areaPoints_1.push([thisCoord_1, otherCoord]);\n          linePoints_1.push([thisCoord_1, otherCoord]);\n          thisCoord_1 += step_1;\n          lastIsEmpty_1 = isEmpty;\n        });\n        polygonPts = this._shadowPolygonPts = areaPoints_1;\n        polylinePts = this._shadowPolylinePts = linePoints_1;\n      }\n\n      this._shadowData = data;\n      this._shadowDim = otherDim;\n      this._shadowSize = [size[0], size[1]];\n      var dataZoomModel = this.dataZoomModel;\n\n      function createDataShadowGroup(isSelectedArea) {\n        var model = dataZoomModel.getModel(isSelectedArea ? 'selectedDataBackground' : 'dataBackground');\n        var group = new Group();\n        var polygon = new Polygon({\n          shape: {\n            points: polygonPts\n          },\n          segmentIgnoreThreshold: 1,\n          style: model.getModel('areaStyle').getAreaStyle(),\n          silent: true,\n          z2: -20\n        });\n        var polyline = new Polyline({\n          shape: {\n            points: polylinePts\n          },\n          segmentIgnoreThreshold: 1,\n          style: model.getModel('lineStyle').getLineStyle(),\n          silent: true,\n          z2: -19\n        });\n        group.add(polygon);\n        group.add(polyline);\n        return group;\n      } // let dataBackgroundModel = dataZoomModel.getModel('dataBackground');\n\n\n      for (var i = 0; i < 3; i++) {\n        var group = createDataShadowGroup(i === 1);\n\n        this._displayables.sliderGroup.add(group);\n\n        this._displayables.dataShadowSegs.push(group);\n      }\n    };\n\n    SliderZoomView.prototype._prepareDataShadowInfo = function () {\n      var dataZoomModel = this.dataZoomModel;\n      var showDataShadow = dataZoomModel.get('showDataShadow');\n\n      if (showDataShadow === false) {\n        return;\n      } // Find a representative series.\n\n\n      var result;\n      var ecModel = this.ecModel;\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        var seriesModels = dataZoomModel.getAxisProxy(axisDim, axisIndex).getTargetSeriesModels();\n        each(seriesModels, function (seriesModel) {\n          if (result) {\n            return;\n          }\n\n          if (showDataShadow !== true && indexOf(SHOW_DATA_SHADOW_SERIES_TYPE, seriesModel.get('type')) < 0) {\n            return;\n          }\n\n          var thisAxis = ecModel.getComponent(getAxisMainType(axisDim), axisIndex).axis;\n          var otherDim = getOtherDim(axisDim);\n          var otherAxisInverse;\n          var coordSys = seriesModel.coordinateSystem;\n\n          if (otherDim != null && coordSys.getOtherAxis) {\n            otherAxisInverse = coordSys.getOtherAxis(thisAxis).inverse;\n          }\n\n          otherDim = seriesModel.getData().mapDimension(otherDim);\n          result = {\n            thisAxis: thisAxis,\n            series: seriesModel,\n            thisDim: axisDim,\n            otherDim: otherDim,\n            otherAxisInverse: otherAxisInverse\n          };\n        }, this);\n      }, this);\n      return result;\n    };\n\n    SliderZoomView.prototype._renderHandle = function () {\n      var thisGroup = this.group;\n      var displayables = this._displayables;\n      var handles = displayables.handles = [null, null];\n      var handleLabels = displayables.handleLabels = [null, null];\n      var sliderGroup = this._displayables.sliderGroup;\n      var size = this._size;\n      var dataZoomModel = this.dataZoomModel;\n      var api = this.api;\n      var borderRadius = dataZoomModel.get('borderRadius') || 0;\n      var brushSelect = dataZoomModel.get('brushSelect');\n      var filler = displayables.filler = new Rect$2({\n        silent: brushSelect,\n        style: {\n          fill: dataZoomModel.get('fillerColor')\n        },\n        textConfig: {\n          position: 'inside'\n        }\n      });\n      sliderGroup.add(filler); // Frame border.\n\n      sliderGroup.add(new Rect$2({\n        silent: true,\n        subPixelOptimize: true,\n        shape: {\n          x: 0,\n          y: 0,\n          width: size[0],\n          height: size[1],\n          r: borderRadius\n        },\n        style: {\n          // deprecated option\n          stroke: dataZoomModel.get('dataBackgroundColor') || dataZoomModel.get('borderColor'),\n          lineWidth: DEFAULT_FRAME_BORDER_WIDTH,\n          fill: 'rgba(0,0,0,0)'\n        }\n      })); // Left and right handle to resize\n\n      each([0, 1], function (handleIndex) {\n        var iconStr = dataZoomModel.get('handleIcon');\n\n        if (!symbolBuildProxies[iconStr] && iconStr.indexOf('path://') < 0 && iconStr.indexOf('image://') < 0) {\n          // Compatitable with the old icon parsers. Which can use a path string without path://\n          iconStr = 'path://' + iconStr;\n          {\n            deprecateLog('handleIcon now needs \\'path://\\' prefix when using a path string');\n          }\n        }\n\n        var path = createSymbol(iconStr, -1, 0, 2, 2, null, true);\n        path.attr({\n          cursor: getCursor(this._orient),\n          draggable: true,\n          drift: bind(this._onDragMove, this, handleIndex),\n          ondragend: bind(this._onDragEnd, this),\n          onmouseover: bind(this._showDataInfo, this, true),\n          onmouseout: bind(this._showDataInfo, this, false),\n          z2: 5\n        });\n        var bRect = path.getBoundingRect();\n        var handleSize = dataZoomModel.get('handleSize');\n        this._handleHeight = parsePercent$1(handleSize, this._size[1]);\n        this._handleWidth = bRect.width / bRect.height * this._handleHeight;\n        path.setStyle(dataZoomModel.getModel('handleStyle').getItemStyle());\n        path.style.strokeNoScale = true;\n        path.rectHover = true;\n        path.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n        enableHoverEmphasis(path);\n        var handleColor = dataZoomModel.get('handleColor'); // deprecated option\n        // Compatitable with previous version\n\n        if (handleColor != null) {\n          path.style.fill = handleColor;\n        }\n\n        sliderGroup.add(handles[handleIndex] = path);\n        var textStyleModel = dataZoomModel.getModel('textStyle');\n        thisGroup.add(handleLabels[handleIndex] = new ZRText({\n          silent: true,\n          invisible: true,\n          style: createTextStyle(textStyleModel, {\n            x: 0,\n            y: 0,\n            text: '',\n            verticalAlign: 'middle',\n            align: 'center',\n            fill: textStyleModel.getTextColor(),\n            font: textStyleModel.getFont()\n          }),\n          z2: 10\n        }));\n      }, this); // Handle to move. Only visible when brushSelect is set true.\n\n      var actualMoveZone = filler;\n\n      if (brushSelect) {\n        var moveHandleHeight = parsePercent$1(dataZoomModel.get('moveHandleSize'), size[1]);\n        var moveHandle_1 = displayables.moveHandle = new Rect({\n          style: dataZoomModel.getModel('moveHandleStyle').getItemStyle(),\n          silent: true,\n          shape: {\n            r: [0, 0, 2, 2],\n            y: size[1] - 0.5,\n            height: moveHandleHeight\n          }\n        });\n        var iconSize = moveHandleHeight * 0.8;\n        var moveHandleIcon = displayables.moveHandleIcon = createSymbol(dataZoomModel.get('moveHandleIcon'), -iconSize / 2, -iconSize / 2, iconSize, iconSize, '#fff', true);\n        moveHandleIcon.silent = true;\n        moveHandleIcon.y = size[1] + moveHandleHeight / 2 - 0.5;\n        moveHandle_1.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'moveHandleStyle']).getItemStyle();\n        var moveZoneExpandSize = Math.min(size[1] / 2, Math.max(moveHandleHeight, 10));\n        actualMoveZone = displayables.moveZone = new Rect({\n          invisible: true,\n          shape: {\n            y: size[1] - moveZoneExpandSize,\n            height: moveHandleHeight + moveZoneExpandSize\n          }\n        });\n        actualMoveZone.on('mouseover', function () {\n          api.enterEmphasis(moveHandle_1);\n        }).on('mouseout', function () {\n          api.leaveEmphasis(moveHandle_1);\n        });\n        sliderGroup.add(moveHandle_1);\n        sliderGroup.add(moveHandleIcon);\n        sliderGroup.add(actualMoveZone);\n      }\n\n      actualMoveZone.attr({\n        draggable: true,\n        cursor: getCursor(this._orient),\n        drift: bind(this._onDragMove, this, 'all'),\n        ondragstart: bind(this._showDataInfo, this, true),\n        ondragend: bind(this._onDragEnd, this),\n        onmouseover: bind(this._showDataInfo, this, true),\n        onmouseout: bind(this._showDataInfo, this, false)\n      });\n    };\n\n    SliderZoomView.prototype._resetInterval = function () {\n      var range = this._range = this.dataZoomModel.getPercentRange();\n\n      var viewExtent = this._getViewExtent();\n\n      this._handleEnds = [linearMap(range[0], [0, 100], viewExtent, true), linearMap(range[1], [0, 100], viewExtent, true)];\n    };\n\n    SliderZoomView.prototype._updateInterval = function (handleIndex, delta) {\n      var dataZoomModel = this.dataZoomModel;\n      var handleEnds = this._handleEnds;\n\n      var viewExtend = this._getViewExtent();\n\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n      var percentExtent = [0, 100];\n      sliderMove(delta, handleEnds, viewExtend, dataZoomModel.get('zoomLock') ? 'all' : handleIndex, minMaxSpan.minSpan != null ? linearMap(minMaxSpan.minSpan, percentExtent, viewExtend, true) : null, minMaxSpan.maxSpan != null ? linearMap(minMaxSpan.maxSpan, percentExtent, viewExtend, true) : null);\n      var lastRange = this._range;\n      var range = this._range = asc([linearMap(handleEnds[0], viewExtend, percentExtent, true), linearMap(handleEnds[1], viewExtend, percentExtent, true)]);\n      return !lastRange || lastRange[0] !== range[0] || lastRange[1] !== range[1];\n    };\n\n    SliderZoomView.prototype._updateView = function (nonRealtime) {\n      var displaybles = this._displayables;\n      var handleEnds = this._handleEnds;\n      var handleInterval = asc(handleEnds.slice());\n      var size = this._size;\n      each([0, 1], function (handleIndex) {\n        // Handles\n        var handle = displaybles.handles[handleIndex];\n        var handleHeight = this._handleHeight;\n        handle.attr({\n          scaleX: handleHeight / 2,\n          scaleY: handleHeight / 2,\n          // This is a trick, by adding an extra tiny offset to let the default handle's end point align to the drag window.\n          // NOTE: It may affect some custom shapes a bit. But we prefer to have better result by default.\n          x: handleEnds[handleIndex] + (handleIndex ? -1 : 1),\n          y: size[1] / 2 - handleHeight / 2\n        });\n      }, this); // Filler\n\n      displaybles.filler.setShape({\n        x: handleInterval[0],\n        y: 0,\n        width: handleInterval[1] - handleInterval[0],\n        height: size[1]\n      });\n      var viewExtent = {\n        x: handleInterval[0],\n        width: handleInterval[1] - handleInterval[0]\n      }; // Move handle\n\n      if (displaybles.moveHandle) {\n        displaybles.moveHandle.setShape(viewExtent);\n        displaybles.moveZone.setShape(viewExtent); // Force update path on the invisible object\n\n        displaybles.moveZone.getBoundingRect();\n        displaybles.moveHandleIcon && displaybles.moveHandleIcon.attr('x', viewExtent.x + viewExtent.width / 2);\n      } // update clip path of shadow.\n\n\n      var dataShadowSegs = displaybles.dataShadowSegs;\n      var segIntervals = [0, handleInterval[0], handleInterval[1], size[0]];\n\n      for (var i = 0; i < dataShadowSegs.length; i++) {\n        var segGroup = dataShadowSegs[i];\n        var clipPath = segGroup.getClipPath();\n\n        if (!clipPath) {\n          clipPath = new Rect();\n          segGroup.setClipPath(clipPath);\n        }\n\n        clipPath.setShape({\n          x: segIntervals[i],\n          y: 0,\n          width: segIntervals[i + 1] - segIntervals[i],\n          height: size[1]\n        });\n      }\n\n      this._updateDataInfo(nonRealtime);\n    };\n\n    SliderZoomView.prototype._updateDataInfo = function (nonRealtime) {\n      var dataZoomModel = this.dataZoomModel;\n      var displaybles = this._displayables;\n      var handleLabels = displaybles.handleLabels;\n      var orient = this._orient;\n      var labelTexts = ['', '']; // FIXME\n      // date型，支持formatter，autoformatter（ec2 date.getAutoFormatter）\n\n      if (dataZoomModel.get('showDetail')) {\n        var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n\n        if (axisProxy) {\n          var axis = axisProxy.getAxisModel().axis;\n          var range = this._range;\n          var dataInterval = nonRealtime // See #4434, data and axis are not processed and reset yet in non-realtime mode.\n          ? axisProxy.calculateDataWindow({\n            start: range[0],\n            end: range[1]\n          }).valueWindow : axisProxy.getDataValueWindow();\n          labelTexts = [this._formatLabel(dataInterval[0], axis), this._formatLabel(dataInterval[1], axis)];\n        }\n      }\n\n      var orderedHandleEnds = asc(this._handleEnds.slice());\n      setLabel.call(this, 0);\n      setLabel.call(this, 1);\n\n      function setLabel(handleIndex) {\n        // Label\n        // Text should not transform by barGroup.\n        // Ignore handlers transform\n        var barTransform = getTransform(displaybles.handles[handleIndex].parent, this.group);\n        var direction = transformDirection(handleIndex === 0 ? 'right' : 'left', barTransform);\n        var offset = this._handleWidth / 2 + LABEL_GAP;\n        var textPoint = applyTransform$1([orderedHandleEnds[handleIndex] + (handleIndex === 0 ? -offset : offset), this._size[1] / 2], barTransform);\n        handleLabels[handleIndex].setStyle({\n          x: textPoint[0],\n          y: textPoint[1],\n          verticalAlign: orient === HORIZONTAL ? 'middle' : direction,\n          align: orient === HORIZONTAL ? direction : 'center',\n          text: labelTexts[handleIndex]\n        });\n      }\n    };\n\n    SliderZoomView.prototype._formatLabel = function (value, axis) {\n      var dataZoomModel = this.dataZoomModel;\n      var labelFormatter = dataZoomModel.get('labelFormatter');\n      var labelPrecision = dataZoomModel.get('labelPrecision');\n\n      if (labelPrecision == null || labelPrecision === 'auto') {\n        labelPrecision = axis.getPixelPrecision();\n      }\n\n      var valueStr = value == null || isNaN(value) ? '' // FIXME Glue code\n      : axis.type === 'category' || axis.type === 'time' ? axis.scale.getLabel({\n        value: Math.round(value)\n      }) // param of toFixed should less then 20.\n      : value.toFixed(Math.min(labelPrecision, 20));\n      return isFunction(labelFormatter) ? labelFormatter(value, valueStr) : isString(labelFormatter) ? labelFormatter.replace('{value}', valueStr) : valueStr;\n    };\n    /**\n     * @param showOrHide true: show, false: hide\n     */\n\n\n    SliderZoomView.prototype._showDataInfo = function (showOrHide) {\n      // Always show when drgging.\n      showOrHide = this._dragging || showOrHide;\n      var displayables = this._displayables;\n      var handleLabels = displayables.handleLabels;\n      handleLabels[0].attr('invisible', !showOrHide);\n      handleLabels[1].attr('invisible', !showOrHide); // Highlight move handle\n\n      displayables.moveHandle && this.api[showOrHide ? 'enterEmphasis' : 'leaveEmphasis'](displayables.moveHandle, 1);\n    };\n\n    SliderZoomView.prototype._onDragMove = function (handleIndex, dx, dy, event) {\n      this._dragging = true; // For mobile device, prevent screen slider on the button.\n\n      stop(event.event); // Transform dx, dy to bar coordination.\n\n      var barTransform = this._displayables.sliderGroup.getLocalTransform();\n\n      var vertex = applyTransform$1([dx, dy], barTransform, true);\n\n      var changed = this._updateInterval(handleIndex, vertex[0]);\n\n      var realtime = this.dataZoomModel.get('realtime');\n\n      this._updateView(!realtime); // Avoid dispatch dataZoom repeatly but range not changed,\n      // which cause bad visual effect when progressive enabled.\n\n\n      changed && realtime && this._dispatchZoomAction(true);\n    };\n\n    SliderZoomView.prototype._onDragEnd = function () {\n      this._dragging = false;\n\n      this._showDataInfo(false); // While in realtime mode and stream mode, dispatch action when\n      // drag end will cause the whole view rerender, which is unnecessary.\n\n\n      var realtime = this.dataZoomModel.get('realtime');\n      !realtime && this._dispatchZoomAction(false);\n    };\n\n    SliderZoomView.prototype._onClickPanel = function (e) {\n      var size = this._size;\n\n      var localPoint = this._displayables.sliderGroup.transformCoordToLocal(e.offsetX, e.offsetY);\n\n      if (localPoint[0] < 0 || localPoint[0] > size[0] || localPoint[1] < 0 || localPoint[1] > size[1]) {\n        return;\n      }\n\n      var handleEnds = this._handleEnds;\n      var center = (handleEnds[0] + handleEnds[1]) / 2;\n\n      var changed = this._updateInterval('all', localPoint[0] - center);\n\n      this._updateView();\n\n      changed && this._dispatchZoomAction(false);\n    };\n\n    SliderZoomView.prototype._onBrushStart = function (e) {\n      var x = e.offsetX;\n      var y = e.offsetY;\n      this._brushStart = new Point(x, y);\n      this._brushing = true;\n      this._brushStartTime = +new Date(); // this._updateBrushRect(x, y);\n    };\n\n    SliderZoomView.prototype._onBrushEnd = function (e) {\n      if (!this._brushing) {\n        return;\n      }\n\n      var brushRect = this._displayables.brushRect;\n      this._brushing = false;\n\n      if (!brushRect) {\n        return;\n      }\n\n      brushRect.attr('ignore', true);\n      var brushShape = brushRect.shape;\n      var brushEndTime = +new Date(); // console.log(brushEndTime - this._brushStartTime);\n\n      if (brushEndTime - this._brushStartTime < 200 && Math.abs(brushShape.width) < 5) {\n        // Will treat it as a click\n        return;\n      }\n\n      var viewExtend = this._getViewExtent();\n\n      var percentExtent = [0, 100];\n      this._range = asc([linearMap(brushShape.x, viewExtend, percentExtent, true), linearMap(brushShape.x + brushShape.width, viewExtend, percentExtent, true)]);\n      this._handleEnds = [brushShape.x, brushShape.x + brushShape.width];\n\n      this._updateView();\n\n      this._dispatchZoomAction(false);\n    };\n\n    SliderZoomView.prototype._onBrush = function (e) {\n      if (this._brushing) {\n        // For mobile device, prevent screen slider on the button.\n        stop(e.event);\n\n        this._updateBrushRect(e.offsetX, e.offsetY);\n      }\n    };\n\n    SliderZoomView.prototype._updateBrushRect = function (mouseX, mouseY) {\n      var displayables = this._displayables;\n      var dataZoomModel = this.dataZoomModel;\n      var brushRect = displayables.brushRect;\n\n      if (!brushRect) {\n        brushRect = displayables.brushRect = new Rect$2({\n          silent: true,\n          style: dataZoomModel.getModel('brushStyle').getItemStyle()\n        });\n        displayables.sliderGroup.add(brushRect);\n      }\n\n      brushRect.attr('ignore', false);\n      var brushStart = this._brushStart;\n      var sliderGroup = this._displayables.sliderGroup;\n      var endPoint = sliderGroup.transformCoordToLocal(mouseX, mouseY);\n      var startPoint = sliderGroup.transformCoordToLocal(brushStart.x, brushStart.y);\n      var size = this._size;\n      endPoint[0] = Math.max(Math.min(size[0], endPoint[0]), 0);\n      brushRect.setShape({\n        x: startPoint[0],\n        y: 0,\n        width: endPoint[0] - startPoint[0],\n        height: size[1]\n      });\n    };\n    /**\n     * This action will be throttled.\n     */\n\n\n    SliderZoomView.prototype._dispatchZoomAction = function (realtime) {\n      var range = this._range;\n      this.api.dispatchAction({\n        type: 'dataZoom',\n        from: this.uid,\n        dataZoomId: this.dataZoomModel.id,\n        animation: realtime ? REALTIME_ANIMATION_CONFIG : null,\n        start: range[0],\n        end: range[1]\n      });\n    };\n\n    SliderZoomView.prototype._findCoordRect = function () {\n      // Find the grid coresponding to the first axis referred by dataZoom.\n      var rect;\n      var coordSysInfoList = collectReferCoordSysModelInfo(this.dataZoomModel).infoList;\n\n      if (!rect && coordSysInfoList.length) {\n        var coordSys = coordSysInfoList[0].model.coordinateSystem;\n        rect = coordSys.getRect && coordSys.getRect();\n      }\n\n      if (!rect) {\n        var width = this.api.getWidth();\n        var height = this.api.getHeight();\n        rect = {\n          x: width * 0.2,\n          y: height * 0.2,\n          width: width * 0.6,\n          height: height * 0.6\n        };\n      }\n\n      return rect;\n    };\n\n    SliderZoomView.type = 'dataZoom.slider';\n    return SliderZoomView;\n  }(DataZoomView);\n\n  function getOtherDim(thisDim) {\n    // FIXME\n    // 这个逻辑和getOtherAxis里一致，但是写在这里是否不好\n    var map$$1 = {\n      x: 'y',\n      y: 'x',\n      radius: 'angle',\n      angle: 'radius'\n    };\n    return map$$1[thisDim];\n  }\n\n  function getCursor(orient) {\n    return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$14(registers) {\n    registers.registerComponentModel(SliderZoomModel);\n    registers.registerComponentView(SliderZoomView);\n    installCommon(registers);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$12(registers) {\n    use(install$13);\n    use(install$14); // Do not install './dataZoomSelect',\n    // since it only work for toolbox dataZoom.\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  use(install$12);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var SelectDataZoomModel =\n  /** @class */\n  function (_super) {\n    __extends(SelectDataZoomModel, _super);\n\n    function SelectDataZoomModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = SelectDataZoomModel.type;\n      return _this;\n    }\n\n    SelectDataZoomModel.type = 'dataZoom.select';\n    return SelectDataZoomModel;\n  }(DataZoomModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var SelectDataZoomView =\n  /** @class */\n  function (_super) {\n    __extends(SelectDataZoomView, _super);\n\n    function SelectDataZoomView() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = SelectDataZoomView.type;\n      return _this;\n    }\n\n    SelectDataZoomView.type = 'dataZoom.select';\n    return SelectDataZoomView;\n  }(DataZoomView);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function install$16(registers) {\n    registers.registerComponentModel(SelectDataZoomModel);\n    registers.registerComponentView(SelectDataZoomView);\n    installCommon(registers);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n\n  var ToolboxFeature =\n  /** @class */\n  function () {\n    function ToolboxFeature() {}\n\n    return ToolboxFeature;\n  }();\n\n  var features = {};\n\n  function registerFeature(name, ctor) {\n    features[name] = ctor;\n  }\n\n  function getFeature(name) {\n    return features[name];\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var ToolboxModel =\n  /** @class */\n  function (_super) {\n    __extends(ToolboxModel, _super);\n\n    function ToolboxModel() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.type = ToolboxModel.type;\n      return _this;\n    }\n\n    ToolboxModel.prototype.optionUpdated = function () {\n      _super.prototype.optionUpdated.apply(this, arguments);\n\n      var ecModel = this.ecModel;\n      each(this.option.feature, function (featureOpt, featureName) {\n        var Feature = getFeature(featureName);\n\n        if (Feature) {\n          if (Feature.getDefaultOption) {\n            Feature.defaultOption = Feature.getDefaultOption(ecModel);\n          }\n\n          merge(featureOpt, Feature.defaultOption);\n        }\n      });\n    };\n\n    ToolboxModel.type = 'toolbox';\n    ToolboxModel.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    ToolboxModel.defaultOption = {\n      show: true,\n      z: 6,\n      // zlevel: 0,\n      orient: 'horizontal',\n      left: 'right',\n      top: 'top',\n      // right\n      // bottom\n      backgroundColor: 'transparent',\n      borderColor: '#ccc',\n      borderRadius: 0,\n      borderWidth: 0,\n      padding: 5,\n      itemSize: 15,\n      itemGap: 8,\n      showTitle: true,\n      iconStyle: {\n        borderColor: '#666',\n        color: 'none'\n      },\n      emphasis: {\n        iconStyle: {\n          borderColor: '#3E98C5'\n        }\n      },\n      // textStyle: {},\n      // feature\n      tooltip: {\n        show: false,\n        position: 'bottom'\n      }\n    };\n    return ToolboxModel;\n  }(ComponentModel);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var ToolboxView =\n  /** @class */\n  function (_super) {\n    __extends(ToolboxView, _super);\n\n    function ToolboxView() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n      var group = this.group;\n      group.removeAll();\n\n      if (!toolboxModel.get('show')) {\n        return;\n      }\n\n      var itemSize = +toolboxModel.get('itemSize');\n      var isVertical = toolboxModel.get('orient') === 'vertical';\n      var featureOpts = toolboxModel.get('feature') || {};\n      var features = this._features || (this._features = {});\n      var featureNames = [];\n      each(featureOpts, function (opt, name) {\n        featureNames.push(name);\n      });\n      new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(curry(processFeature, null)).execute(); // Keep for diff.\n\n      this._featureNames = featureNames;\n\n      function processFeature(newIndex, oldIndex) {\n        var featureName = featureNames[newIndex];\n        var oldName = featureNames[oldIndex];\n        var featureOpt = featureOpts[featureName];\n        var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n        var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n        if (payload && payload.newTitle != null && payload.featureName === featureName) {\n          featureOpt.title = payload.newTitle;\n        }\n\n        if (featureName && !oldName) {\n          // Create\n          if (isUserFeatureName(featureName)) {\n            feature = {\n              onclick: featureModel.option.onclick,\n              featureName: featureName\n            };\n          } else {\n            var Feature = getFeature(featureName);\n\n            if (!Feature) {\n              return;\n            }\n\n            feature = new Feature();\n          }\n\n          features[featureName] = feature;\n        } else {\n          feature = features[oldName]; // If feature does not exsit.\n\n          if (!feature) {\n            return;\n          }\n        }\n\n        feature.uid = getUID('toolbox-feature');\n        feature.model = featureModel;\n        feature.ecModel = ecModel;\n        feature.api = api;\n        var isToolboxFeature = feature instanceof ToolboxFeature;\n\n        if (!featureName && oldName) {\n          isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n          return;\n        }\n\n        if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n          isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n          return;\n        }\n\n        createIconPaths(featureModel, feature, featureName);\n\n        featureModel.setIconStatus = function (iconName, status) {\n          var option = this.option;\n          var iconPaths = this.iconPaths;\n          option.iconStatus = option.iconStatus || {};\n          option.iconStatus[iconName] = status;\n\n          if (iconPaths[iconName]) {\n            (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n          }\n        };\n\n        if (feature instanceof ToolboxFeature) {\n          if (feature.render) {\n            feature.render(featureModel, ecModel, api, payload);\n          }\n        }\n      }\n\n      function createIconPaths(featureModel, feature, featureName) {\n        var iconStyleModel = featureModel.getModel('iconStyle');\n        var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']); // If one feature has mutiple icon. they are orginaized as\n        // {\n        //     icon: {\n        //         foo: '',\n        //         bar: ''\n        //     },\n        //     title: {\n        //         foo: '',\n        //         bar: ''\n        //     }\n        // }\n\n        var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n        var titles = featureModel.get('title') || {};\n        var iconsMap;\n        var titlesMap;\n\n        if (isString(icons)) {\n          iconsMap = {};\n          iconsMap[featureName] = icons;\n        } else {\n          iconsMap = icons;\n        }\n\n        if (isString(titles)) {\n          titlesMap = {};\n          titlesMap[featureName] = titles;\n        } else {\n          titlesMap = titles;\n        }\n\n        var iconPaths = featureModel.iconPaths = {};\n        each(iconsMap, function (iconStr, iconName) {\n          var path = createIcon(iconStr, {}, {\n            x: -itemSize / 2,\n            y: -itemSize / 2,\n            width: itemSize,\n            height: itemSize\n          }); // TODO handling image\n\n          path.setStyle(iconStyleModel.getItemStyle());\n          var pathEmphasisState = path.ensureState('emphasis');\n          pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n          var textContent = new ZRText({\n            style: {\n              text: titlesMap[iconName],\n              align: iconStyleEmphasisModel.get('textAlign'),\n              borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n              padding: iconStyleEmphasisModel.get('textPadding'),\n              fill: null\n            },\n            ignore: true\n          });\n          path.setTextContent(textContent);\n          setTooltipConfig({\n            el: path,\n            componentModel: toolboxModel,\n            itemName: iconName,\n            formatterParamsExtra: {\n              title: titlesMap[iconName]\n            }\n          });\n          path.__title = titlesMap[iconName];\n          path.on('mouseover', function () {\n            // Should not reuse above hoverStyle, which might be modified.\n            var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n            var defaultTextPosition = isVertical ? toolboxModel.get('right') == null && toolboxModel.get('left') !== 'right' ? 'right' : 'left' : toolboxModel.get('bottom') == null && toolboxModel.get('top') !== 'bottom' ? 'bottom' : 'top';\n            textContent.setStyle({\n              fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n              backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n            });\n            path.setTextConfig({\n              position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n            });\n            textContent.ignore = !toolboxModel.get('showTitle'); // Use enterEmphasis and leaveEmphasis provide by ec.\n            // There are flags managed by the echarts.\n\n            api.enterEmphasis(this);\n          }).on('mouseout', function () {\n            if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n              api.leaveEmphasis(this);\n            }\n\n            textContent.hide();\n          });\n          (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n          group.add(path);\n          path.on('click', bind(feature.onclick, feature, ecModel, api, iconName));\n          iconPaths[iconName] = path;\n        });\n      }\n\n      layout$2(group, toolboxModel, api); // Render background after group is layout\n      // FIXME\n\n      group.add(makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n      isVertical || group.eachChild(function (icon) {\n        var titleText = icon.__title; // const hoverStyle = icon.hoverStyle;\n        // TODO simplify code?\n\n        var emphasisState = icon.ensureState('emphasis');\n        var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n        var textContent = icon.getTextContent();\n        var emphasisTextState = textContent && textContent.ensureState('emphasis'); // May be background element\n\n        if (emphasisTextState && !isFunction(emphasisTextState) && titleText) {\n          var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n          var rect = getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n          var offsetX = icon.x + group.x;\n          var offsetY = icon.y + group.y + itemSize;\n          var needPutOnTop = false;\n\n          if (offsetY + rect.height > api.getHeight()) {\n            emphasisTextConfig.position = 'top';\n            needPutOnTop = true;\n          }\n\n          var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 10;\n\n          if (offsetX + rect.width / 2 > api.getWidth()) {\n            emphasisTextConfig.position = ['100%', topOffset];\n            emphasisTextStyle.align = 'right';\n          } else if (offsetX - rect.width / 2 < 0) {\n            emphasisTextConfig.position = [0, topOffset];\n            emphasisTextStyle.align = 'left';\n          }\n        }\n      });\n    };\n\n    ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n      each(this._features, function (feature) {\n        feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n      });\n    }; // updateLayout(toolboxModel, ecModel, api, payload) {\n    //     zrUtil.each(this._features, function (feature) {\n    //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n    //     });\n    // },\n\n\n    ToolboxView.prototype.remove = function (ecModel, api) {\n      each(this._features, function (feature) {\n        feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n      });\n      this.group.removeAll();\n    };\n\n    ToolboxView.prototype.dispose = function (ecModel, api) {\n      each(this._features, function (feature) {\n        feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n      });\n    };\n\n    ToolboxView.type = 'toolbox';\n    return ToolboxView;\n  }(ComponentView);\n\n  function isUserFeatureName(featureName) {\n    return featureName.indexOf('my') === 0;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /* global Uint8Array, document */\n\n  /* global window, document */\n\n\n  var SaveAsImage =\n  /** @class */\n  function (_super) {\n    __extends(SaveAsImage, _super);\n\n    function SaveAsImage() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    SaveAsImage.prototype.onclick = function (ecModel, api) {\n      var model = this.model;\n      var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n      var isSvg = api.getZr().painter.getType() === 'svg';\n      var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n      var url = api.getConnectedDataURL({\n        type: type,\n        backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n        connectedBackgroundColor: model.get('connectedBackgroundColor'),\n        excludeComponents: model.get('excludeComponents'),\n        pixelRatio: model.get('pixelRatio')\n      });\n      var browser = env.browser; // Chrome, Firefox, New Edge\n\n      if (isFunction(MouseEvent) && (browser.newEdge || !browser.ie && !browser.edge)) {\n        var $a = document.createElement('a');\n        $a.download = title + '.' + type;\n        $a.target = '_blank';\n        $a.href = url;\n        var evt = new MouseEvent('click', {\n          // some micro front-end framework， window maybe is a Proxy\n          view: document.defaultView,\n          bubbles: true,\n          cancelable: false\n        });\n        $a.dispatchEvent(evt);\n      } // IE or old Edge\n      else {\n          // @ts-ignore\n          if (window.navigator.msSaveOrOpenBlob || isSvg) {\n            var parts = url.split(','); // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\n            var base64Encoded = parts[0].indexOf('base64') > -1;\n            var bstr = isSvg // should decode the svg data uri first\n            ? decodeURIComponent(parts[1]) : parts[1]; // only `atob` when the data uri is encoded with base64\n            // otherwise, like `svg` data uri exported by zrender,\n            // there will be an error, for it's not encoded with base64.\n            // (just a url-encoded string through `encodeURIComponent`)\n\n            base64Encoded && (bstr = window.atob(bstr));\n            var filename = title + '.' + type; // @ts-ignore\n\n            if (window.navigator.msSaveOrOpenBlob) {\n              var n = bstr.length;\n              var u8arr = new Uint8Array(n);\n\n              while (n--) {\n                u8arr[n] = bstr.charCodeAt(n);\n              }\n\n              var blob = new Blob([u8arr]); // @ts-ignore\n\n              window.navigator.msSaveOrOpenBlob(blob, filename);\n            } else {\n              var frame = document.createElement('iframe');\n              document.body.appendChild(frame);\n              var cw = frame.contentWindow;\n              var doc = cw.document;\n              doc.open('image/svg+xml', 'replace');\n              doc.write(bstr);\n              doc.close();\n              cw.focus();\n              doc.execCommand('SaveAs', true, filename);\n              document.body.removeChild(frame);\n            }\n          } else {\n            var lang = model.get('lang');\n            var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n            var tab = window.open();\n            tab.document.write(html);\n            tab.document.title = title;\n          }\n        }\n    };\n\n    SaveAsImage.getDefaultOption = function (ecModel) {\n      var defaultOption = {\n        show: true,\n        icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n        title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n        type: 'png',\n        // Default use option.backgroundColor\n        // backgroundColor: '#fff',\n        connectedBackgroundColor: '#fff',\n        name: '',\n        excludeComponents: ['toolbox'],\n        // use current pixel ratio of device by default\n        // pixelRatio: 1,\n        lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n      };\n      return defaultOption;\n    };\n\n    return SaveAsImage;\n  }(ToolboxFeature);\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var INNER_STACK_KEYWORD = '__ec_magicType_stack__';\n  var radioTypes = [['line', 'bar'], ['stack']];\n\n  var MagicType =\n  /** @class */\n  function (_super) {\n    __extends(MagicType, _super);\n\n    function MagicType() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    MagicType.prototype.getIcons = function () {\n      var model = this.model;\n      var availableIcons = model.get('icon');\n      var icons = {};\n      each(model.get('type'), function (type) {\n        if (availableIcons[type]) {\n          icons[type] = availableIcons[type];\n        }\n      });\n      return icons;\n    };\n\n    MagicType.getDefaultOption = function (ecModel) {\n      var defaultOption = {\n        show: true,\n        type: [],\n        // Icon group\n        icon: {\n          line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n          bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n          // eslint-disable-next-line\n          stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n\n        },\n        // `line`, `bar`, `stack`, `tiled`\n        title: ecModel.getLocaleModel().get(['toolbox', 'magicType', 'title']),\n        option: {},\n        seriesIndex: {}\n      };\n      return defaultOption;\n    };\n\n    MagicType.prototype.onclick = function (ecModel, api, type) {\n      var model = this.model;\n      var seriesIndex = model.get(['seriesIndex', type]); // Not supported magicType\n\n      if (!seriesOptGenreator[type]) {\n        return;\n      }\n\n      var newOption = {\n        series: []\n      };\n\n      var generateNewSeriesTypes = function (seriesModel) {\n        var seriesType = seriesModel.subType;\n        var seriesId = seriesModel.id;\n        var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n\n        if (newSeriesOpt) {\n          // PENDING If merge original option?\n          defaults(newSeriesOpt, seriesModel.option);\n          newOption.series.push(newSeriesOpt);\n        } // Modify boundaryGap\n\n\n        var coordSys = seriesModel.coordinateSystem;\n\n        if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n          var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n          if (categoryAxis) {\n            var axisDim = categoryAxis.dim;\n            var axisType = axisDim + 'Axis';\n            var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n            var axisIndex = axisModel.componentIndex;\n            newOption[axisType] = newOption[axisType] || [];\n\n            for (var i = 0; i <= axisIndex; i++) {\n              newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n            }\n\n            newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n          }\n        }\n      };\n\n      each(radioTypes, function (radio) {\n        if (indexOf(radio, type) >= 0) {\n          each(radio, function (item) {\n            model.setIconStatus(item, 'normal');\n          });\n        }\n      });\n      model.setIconStatus(type, 'emphasis');\n      ecModel.eachComponent({\n        mainType: 'series',\n        query: seriesIndex == null ? null : {\n          seriesIndex: seriesIndex\n        }\n      }, generateNewSeriesTypes);\n      var newTitle;\n      var currentType = type; // Change title of stack\n\n      if (type === 'stack') {\n        // use titles in model instead of ecModel\n        // as stack and tiled appears in pair, just flip them\n        // no need of checking stack state\n        newTitle = merge({\n          stack: model.option.title.tiled,\n          tiled: model.option.title.stack\n        }, model.option.title);\n\n        if (model.get(['iconStatus', type]) !== 'emphasis') {\n          currentType = 'tiled';\n        }\n      }\n\n      api.dispatchAction({\n        type: 'changeMagicType',\n        currentType: currentType,\n        newOption: newOption,\n        newTitle: newTitle,\n        featureName: 'magicType'\n      });\n    };\n\n    return MagicType;\n  }(ToolboxFeature);\n\n  var seriesOptGenreator = {\n    'line': function (seriesType, seriesId, seriesModel, model) {\n      if (seriesType === 'bar') {\n        return merge({\n          id: seriesId,\n          type: 'line',\n          // Preserve data related option\n          data: seriesModel.get('data'),\n          stack: seriesModel.get('stack'),\n          markPoint: seriesModel.get('markPoint'),\n          markLine: seriesModel.get('markLine')\n        }, model.get(['option', 'line']) || {}, true);\n      }\n    },\n    'bar': function (seriesType, seriesId, seriesModel, model) {\n      if (seriesType === 'line') {\n        return merge({\n          id: seriesId,\n          type: 'bar',\n          // Preserve data related option\n          data: seriesModel.get('data'),\n          stack: seriesModel.get('stack'),\n          markPoint: seriesModel.get('markPoint'),\n          markLine: seriesModel.get('markLine')\n        }, model.get(['option', 'bar']) || {}, true);\n      }\n    },\n    'stack': function (seriesType, seriesId, seriesModel, model) {\n      var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n\n      if (seriesType === 'line' || seriesType === 'bar') {\n        model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n        return merge({\n          id: seriesId,\n          stack: isStack ? '' : INNER_STACK_KEYWORD\n        }, model.get(['option', 'stack']) || {}, true);\n      }\n    }\n  }; // TODO: SELF REGISTERED.\n\n  registerAction({\n    type: 'changeMagicType',\n    event: 'magicTypeChanged',\n    update: 'prepareAndUpdate'\n  }, function (payload, ecModel) {\n    ecModel.mergeOption(payload.newOption);\n  });\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /* global document */\n\n  /* global document */\n\n  var BLOCK_SPLITER = new Array(60).join('-');\n  var ITEM_SPLITER = '\\t';\n  /**\n   * Group series into two types\n   *  1. on category axis, like line, bar\n   *  2. others, like scatter, pie\n   */\n\n  function groupSeries(ecModel) {\n    var seriesGroupByCategoryAxis = {};\n    var otherSeries = [];\n    var meta = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n\n      if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n        // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n        var baseAxis = coordSys.getBaseAxis();\n\n        if (baseAxis.type === 'category') {\n          var key = baseAxis.dim + '_' + baseAxis.index;\n\n          if (!seriesGroupByCategoryAxis[key]) {\n            seriesGroupByCategoryAxis[key] = {\n              categoryAxis: baseAxis,\n              valueAxis: coordSys.getOtherAxis(baseAxis),\n              series: []\n            };\n            meta.push({\n              axisDim: baseAxis.dim,\n              axisIndex: baseAxis.index\n            });\n          }\n\n          seriesGroupByCategoryAxis[key].series.push(seriesModel);\n        } else {\n          otherSeries.push(seriesModel);\n        }\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    });\n    return {\n      seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n      other: otherSeries,\n      meta: meta\n    };\n  }\n  /**\n   * Assemble content of series on cateogory axis\n   * @inner\n   */\n\n\n  function assembleSeriesWithCategoryAxis(groups) {\n    var tables = [];\n    each(groups, function (group, key) {\n      var categoryAxis = group.categoryAxis;\n      var valueAxis = group.valueAxis;\n      var valueAxisDim = valueAxis.dim;\n      var headers = [' '].concat(map(group.series, function (series) {\n        return series.name;\n      })); // @ts-ignore TODO Polar\n\n      var columns = [categoryAxis.model.getCategories()];\n      each(group.series, function (series) {\n        var rawData = series.getRawData();\n        columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n          return val;\n        }));\n      }); // Assemble table content\n\n      var lines = [headers.join(ITEM_SPLITER)];\n\n      for (var i = 0; i < columns[0].length; i++) {\n        var items = [];\n\n        for (var j = 0; j < columns.length; j++) {\n          items.push(columns[j][i]);\n        }\n\n        lines.push(items.join(ITEM_SPLITER));\n      }\n\n      tables.push(lines.join('\\n'));\n    });\n    return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n  }\n  /**\n   * Assemble content of other series\n   */\n\n\n  function assembleOtherSeries(series) {\n    return map(series, function (series) {\n      var data = series.getRawData();\n      var lines = [series.name];\n      var vals = [];\n      data.each(data.dimensions, function () {\n        var argLen = arguments.length;\n        var dataIndex = arguments[argLen - 1];\n        var name = data.getName(dataIndex);\n\n        for (var i = 0; i < argLen - 1; i++) {\n          vals[i] = arguments[i];\n        }\n\n        lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n      });\n      return lines.join('\\n');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n  }\n\n  function getContentFromModel(ecModel) {\n    var result = groupSeries(ecModel);\n    return {\n      value: filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n        return !!str.replace(/[\\n\\t\\s]/g, '');\n      }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n      meta: result.meta\n    };\n  }\n\n  function trim$1(str) {\n    return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n  }\n  /**\n   * If a block is tsv format\n   */\n\n\n  function isTSVFormat(block) {\n    // Simple method to find out if a block is tsv format\n    var firstLine = block.slice(0, block.indexOf('\\n'));\n\n    if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n      return true;\n    }\n  }\n\n  var itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n  /**\n   * @param {string} tsv\n   * @return {Object}\n   */\n\n  function parseTSVContents(tsv) {\n    var tsvLines = tsv.split(/\\n+/g);\n    var headers = trim$1(tsvLines.shift()).split(itemSplitRegex);\n    var categories = [];\n    var series = map(headers, function (header) {\n      return {\n        name: header,\n        data: []\n      };\n    });\n\n    for (var i = 0; i < tsvLines.length; i++) {\n      var items = trim$1(tsvLines[i]).split(itemSplitRegex);\n      categories.push(items.shift());\n\n      for (var j = 0; j < items.length; j++) {\n        series[j] && (series[j].data[i] = items[j]);\n      }\n    }\n\n    return {\n      series: series,\n      categories: categories\n    };\n  }\n\n  function parseListContents(str) {\n    var lines = str.split(/\\n+/g);\n    var seriesName = trim$1(lines.shift());\n    var data = [];\n\n    for (var i = 0; i < lines.length; i++) {\n      // if line is empty, ignore it.\n      // there is a case that a user forgot to delete `\\n`.\n      var line = trim$1(lines[i]);\n\n      if (!line) {\n        continue;\n      }\n\n      var items = line.split(itemSplitRegex);\n      var name_1 = '';\n      var value = void 0;\n      var hasName = false;\n\n      if (isNaN(items[0])) {\n        // First item is name\n        hasName = true;\n        name_1 = items[0];\n        items = items.slice(1);\n        data[i] = {\n          name: name_1,\n          value: []\n        };\n        value = data[i].value;\n      } else {\n        value = data[i] = [];\n      }\n\n      for (var j = 0; j < items.length; j++) {\n        value.push(+items[j]);\n      }\n\n      if (value.length === 1) {\n        hasName ? data[i].value = value[0] : data[i] = value[0];\n      }\n    }\n\n    return {\n      name: seriesName,\n      data: data\n    };\n  }\n\n  function parseContents(str, blockMetaList) {\n    var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n    var newOption = {\n      series: []\n    };\n    each(blocks, function (block, idx) {\n      if (isTSVFormat(block)) {\n        var result = parseTSVContents(block);\n        var blockMeta = blockMetaList[idx];\n        var axisKey = blockMeta.axisDim + 'Axis';\n\n        if (blockMeta) {\n          newOption[axisKey] = newOption[axisKey] || [];\n          newOption[axisKey][blockMeta.axisIndex] = {\n            data: result.categories\n          };\n          newOption.series = newOption.series.concat(result.series);\n        }\n      } else {\n        var result = parseListContents(block);\n        newOption.series.push(result);\n      }\n    });\n    return newOption;\n  }\n\n  var DataView =\n  /** @class */\n  function (_super) {\n    __extends(DataView, _super);\n\n    function DataView() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    DataView.prototype.onclick = function (ecModel, api) {\n      // FIXME: better way?\n      setTimeout(function () {\n        api.dispatchAction({\n          type: 'hideTip'\n        });\n      });\n      var container = api.getDom();\n      var model = this.model;\n\n      if (this._dom) {\n        container.removeChild(this._dom);\n      }\n\n      var root = document.createElement('div'); // use padding to avoid 5px whitespace\n\n      root.style.cssText = 'position:absolute;top:0;bottom:0;left:0;right:0;padding:5px';\n      root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // Create elements\n\n      var header = document.createElement('h4');\n      var lang = model.get('lang') || [];\n      header.innerHTML = lang[0] || model.get('title');\n      header.style.cssText = 'margin:10px 20px';\n      header.style.color = model.get('textColor');\n      var viewMain = document.createElement('div');\n      var textarea = document.createElement('textarea');\n      viewMain.style.cssText = 'overflow:auto';\n      var optionToContent = model.get('optionToContent');\n      var contentToOption = model.get('contentToOption');\n      var result = getContentFromModel(ecModel);\n\n      if (isFunction(optionToContent)) {\n        var htmlOrDom = optionToContent(api.getOption());\n\n        if (isString(htmlOrDom)) {\n          viewMain.innerHTML = htmlOrDom;\n        } else if (isDom(htmlOrDom)) {\n          viewMain.appendChild(htmlOrDom);\n        }\n      } else {\n        // Use default textarea\n        textarea.readOnly = model.get('readOnly');\n        var style = textarea.style; // eslint-disable-next-line max-len\n\n        style.cssText = 'display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none';\n        style.color = model.get('textColor');\n        style.borderColor = model.get('textareaBorderColor');\n        style.backgroundColor = model.get('textareaColor');\n        textarea.value = result.value;\n        viewMain.appendChild(textarea);\n      }\n\n      var blockMetaList = result.meta;\n      var buttonContainer = document.createElement('div');\n      buttonContainer.style.cssText = 'position:absolute;bottom:5px;left:0;right:0'; // eslint-disable-next-line max-len\n\n      var buttonStyle = 'float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n      var closeButton = document.createElement('div');\n      var refreshButton = document.createElement('div');\n      buttonStyle += ';background-color:' + model.get('buttonColor');\n      buttonStyle += ';color:' + model.get('buttonTextColor');\n      var self = this;\n\n      function close() {\n        container.removeChild(root);\n        self._dom = null;\n      }\n\n      addEventListener(closeButton, 'click', close);\n      addEventListener(refreshButton, 'click', function () {\n        if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n          {\n            // eslint-disable-next-line\n            warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n          }\n          close();\n          return;\n        }\n\n        var newOption;\n\n        try {\n          if (isFunction(contentToOption)) {\n            newOption = contentToOption(viewMain, api.getOption());\n          } else {\n            newOption = parseContents(textarea.value, blockMetaList);\n          }\n        } catch (e) {\n          close();\n          throw new Error('Data view format error ' + e);\n        }\n\n        if (newOption) {\n          api.dispatchAction({\n            type: 'changeDataView',\n            newOption: newOption\n          });\n        }\n\n        close();\n      });\n      closeButton.innerHTML = lang[1];\n      refreshButton.innerHTML = lang[2];\n      refreshButton.style.cssText = closeButton.style.cssText = buttonStyle;\n      !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n      buttonContainer.appendChild(closeButton);\n      root.appendChild(header);\n      root.appendChild(viewMain);\n      root.appendChild(buttonContainer);\n      viewMain.style.height = container.clientHeight - 80 + 'px';\n      container.appendChild(root);\n      this._dom = root;\n    };\n\n    DataView.prototype.remove = function (ecModel, api) {\n      this._dom && api.getDom().removeChild(this._dom);\n    };\n\n    DataView.prototype.dispose = function (ecModel, api) {\n      this.remove(ecModel, api);\n    };\n\n    DataView.getDefaultOption = function (ecModel) {\n      var defaultOption = {\n        show: true,\n        readOnly: false,\n        optionToContent: null,\n        contentToOption: null,\n        // eslint-disable-next-line\n        icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n        title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n        lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n        backgroundColor: '#fff',\n        textColor: '#000',\n        textareaColor: '#fff',\n        textareaBorderColor: '#333',\n        buttonColor: '#c23531',\n        buttonTextColor: '#fff'\n      };\n      return defaultOption;\n    };\n\n    return DataView;\n  }(ToolboxFeature);\n  /**\n   * @inner\n   */\n\n\n  function tryMergeDataOption(newData, originalData) {\n    return map(newData, function (newVal, idx) {\n      var original = originalData && originalData[idx];\n\n      if (isObject(original) && !isArray(original)) {\n        var newValIsObject = isObject(newVal) && !isArray(newVal);\n\n        if (!newValIsObject) {\n          newVal = {\n            value: newVal\n          };\n        } // original data has name but new data has no name\n\n\n        var shouldDeleteName = original.name != null && newVal.name == null; // Original data has option\n\n        newVal = defaults(newVal, original);\n        shouldDeleteName && delete newVal.name;\n        return newVal;\n      } else {\n        return newVal;\n      }\n    });\n  } // TODO: SELF REGISTERED.\n\n\n  registerAction({\n    type: 'changeDataView',\n    event: 'dataViewChanged',\n    update: 'prepareAndUpdate'\n  }, function (payload, ecModel) {\n    var newSeriesOptList = [];\n    each(payload.newOption.series, function (seriesOpt) {\n      var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n\n      if (!seriesModel) {\n        // New created series\n        // Geuss the series type\n        newSeriesOptList.push(extend({\n          // Default is scatter\n          type: 'scatter'\n        }, seriesOpt));\n      } else {\n        var originalData = seriesModel.get('data');\n        newSeriesOptList.push({\n          name: seriesOpt.name,\n          data: tryMergeDataOption(seriesOpt.data, originalData)\n        });\n      }\n    });\n    ecModel.mergeOption(defaults({\n      series: newSeriesOptList\n    }, payload.newOption));\n  });\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var each$6 = each;\n  var inner$11 = makeInner();\n  /**\n   * @param ecModel\n   * @param newSnapshot key is dataZoomId\n   */\n\n  function push(ecModel, newSnapshot) {\n    var storedSnapshots = getStoreSnapshots(ecModel); // If previous dataZoom can not be found,\n    // complete an range with current range.\n\n    each$6(newSnapshot, function (batchItem, dataZoomId) {\n      var i = storedSnapshots.length - 1;\n\n      for (; i >= 0; i--) {\n        var snapshot = storedSnapshots[i];\n\n        if (snapshot[dataZoomId]) {\n          break;\n        }\n      }\n\n      if (i < 0) {\n        // No origin range set, create one by current range.\n        var dataZoomModel = ecModel.queryComponents({\n          mainType: 'dataZoom',\n          subType: 'select',\n          id: dataZoomId\n        })[0];\n\n        if (dataZoomModel) {\n          var percentRange = dataZoomModel.getPercentRange();\n          storedSnapshots[0][dataZoomId] = {\n            dataZoomId: dataZoomId,\n            start: percentRange[0],\n            end: percentRange[1]\n          };\n        }\n      }\n    });\n    storedSnapshots.push(newSnapshot);\n  }\n\n  function pop(ecModel) {\n    var storedSnapshots = getStoreSnapshots(ecModel);\n    var head = storedSnapshots[storedSnapshots.length - 1];\n    storedSnapshots.length > 1 && storedSnapshots.pop(); // Find top for all dataZoom.\n\n    var snapshot = {};\n    each$6(head, function (batchItem, dataZoomId) {\n      for (var i = storedSnapshots.length - 1; i >= 0; i--) {\n        batchItem = storedSnapshots[i][dataZoomId];\n\n        if (batchItem) {\n          snapshot[dataZoomId] = batchItem;\n          break;\n        }\n      }\n    });\n    return snapshot;\n  }\n\n  function clear$1(ecModel) {\n    inner$11(ecModel).snapshots = null;\n  }\n\n  function count(ecModel) {\n    return getStoreSnapshots(ecModel).length;\n  }\n  /**\n   * History length of each dataZoom may be different.\n   * this._history[0] is used to store origin range.\n   */\n\n\n  function getStoreSnapshots(ecModel) {\n    var store = inner$11(ecModel);\n\n    if (!store.snapshots) {\n      store.snapshots = [{}];\n    }\n\n    return store.snapshots;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var RestoreOption =\n  /** @class */\n  function (_super) {\n    __extends(RestoreOption, _super);\n\n    function RestoreOption() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    RestoreOption.prototype.onclick = function (ecModel, api) {\n      clear$1(ecModel);\n      api.dispatchAction({\n        type: 'restore',\n        from: this.uid\n      });\n    };\n\n    RestoreOption.getDefaultOption = function (ecModel) {\n      var defaultOption = {\n        show: true,\n        // eslint-disable-next-line\n        icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n        title: ecModel.getLocaleModel().get(['toolbox', 'restore', 'title'])\n      };\n      return defaultOption;\n    };\n\n    return RestoreOption;\n  }(ToolboxFeature); // TODO: SELF REGISTERED.\n\n\n  registerAction({\n    type: 'restore',\n    event: 'restore',\n    update: 'prepareAndUpdate'\n  }, function (payload, ecModel) {\n    ecModel.resetOption('recreate');\n  });\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  var BRUSH_PANEL_GLOBAL = true;\n  var mathMin$7 = Math.min;\n  var mathMax$7 = Math.max;\n  var mathPow$2 = Math.pow;\n  var COVER_Z = 10000;\n  var UNSELECT_THRESHOLD = 6;\n  var MIN_RESIZE_LINE_WIDTH = 6;\n  var MUTEX_RESOURCE_KEY = 'globalPan';\n  var DIRECTION_MAP = {\n    w: [0, 0],\n    e: [0, 1],\n    n: [1, 0],\n    s: [1, 1]\n  };\n  var CURSOR_MAP = {\n    w: 'ew',\n    e: 'ew',\n    n: 'ns',\n    s: 'ns',\n    ne: 'nesw',\n    sw: 'nesw',\n    nw: 'nwse',\n    se: 'nwse'\n  };\n  var DEFAULT_BRUSH_OPT = {\n    brushStyle: {\n      lineWidth: 2,\n      stroke: 'rgba(210,219,238,0.3)',\n      fill: '#D2DBEE'\n    },\n    transformable: true,\n    brushMode: 'single',\n    removeOnClick: false\n  };\n  var baseUID = 0;\n  /**\n   * params:\n   *     areas: Array.<Array>, coord relates to container group,\n   *                             If no container specified, to global.\n   *     opt {\n   *         isEnd: boolean,\n   *         removeOnClick: boolean\n   *     }\n   */\n\n  var BrushController =\n  /** @class */\n  function (_super) {\n    __extends(BrushController, _super);\n\n    function BrushController(zr) {\n      var _this = _super.call(this) || this;\n      /**\n       * @internal\n       */\n\n\n      _this._track = [];\n      /**\n       * @internal\n       */\n\n      _this._covers = [];\n      _this._handlers = {};\n      {\n        assert(zr);\n      }\n      _this._zr = zr;\n      _this.group = new Group();\n      _this._uid = 'brushController_' + baseUID++;\n      each(pointerHandlers, function (handler, eventName) {\n        this._handlers[eventName] = bind(handler, this);\n      }, _this);\n      return _this;\n    }\n    /**\n     * If set to `false`, select disabled.\n     */\n\n\n    BrushController.prototype.enableBrush = function (brushOption) {\n      {\n        assert(this._mounted);\n      }\n      this._brushType && this._doDisableBrush();\n      brushOption.brushType && this._doEnableBrush(brushOption);\n      return this;\n    };\n\n    BrushController.prototype._doEnableBrush = function (brushOption) {\n      var zr = this._zr; // Consider roam, which takes globalPan too.\n\n      if (!this._enableGlobalPan) {\n        take(zr, MUTEX_RESOURCE_KEY, this._uid);\n      }\n\n      each(this._handlers, function (handler, eventName) {\n        zr.on(eventName, handler);\n      });\n      this._brushType = brushOption.brushType;\n      this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\n    };\n\n    BrushController.prototype._doDisableBrush = function () {\n      var zr = this._zr;\n      release(zr, MUTEX_RESOURCE_KEY, this._uid);\n      each(this._handlers, function (handler, eventName) {\n        zr.off(eventName, handler);\n      });\n      this._brushType = this._brushOption = null;\n    };\n    /**\n     * @param panelOpts If not pass, it is global brush.\n     */\n\n\n    BrushController.prototype.setPanels = function (panelOpts) {\n      if (panelOpts && panelOpts.length) {\n        var panels_1 = this._panels = {};\n        each(panelOpts, function (panelOpts) {\n          panels_1[panelOpts.panelId] = clone(panelOpts);\n        });\n      } else {\n        this._panels = null;\n      }\n\n      return this;\n    };\n\n    BrushController.prototype.mount = function (opt) {\n      opt = opt || {};\n      {\n        this._mounted = true; // should be at first.\n      }\n      this._enableGlobalPan = opt.enableGlobalPan;\n      var thisGroup = this.group;\n\n      this._zr.add(thisGroup);\n\n      thisGroup.attr({\n        x: opt.x || 0,\n        y: opt.y || 0,\n        rotation: opt.rotation || 0,\n        scaleX: opt.scaleX || 1,\n        scaleY: opt.scaleY || 1\n      });\n      this._transform = thisGroup.getLocalTransform();\n      return this;\n    }; // eachCover(cb, context): void {\n    //     each(this._covers, cb, context);\n    // }\n\n    /**\n     * Update covers.\n     * @param coverConfigList\n     *        If coverConfigList is null/undefined, all covers removed.\n     */\n\n\n    BrushController.prototype.updateCovers = function (coverConfigList) {\n      {\n        assert(this._mounted);\n      }\n      coverConfigList = map(coverConfigList, function (coverConfig) {\n        return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\n      });\n      var tmpIdPrefix = '\\0-brush-index-';\n      var oldCovers = this._covers;\n      var newCovers = this._covers = [];\n      var controller = this;\n      var creatingCover = this._creatingCover;\n      new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n      return this;\n\n      function getKey(brushOption, index) {\n        return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n      }\n\n      function oldGetKey(cover, index) {\n        return getKey(cover.__brushOption, index);\n      }\n\n      function addOrUpdate(newIndex, oldIndex) {\n        var newBrushInternal = coverConfigList[newIndex]; // Consider setOption in event listener of brushSelect,\n        // where updating cover when creating should be forbiden.\n\n        if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n          newCovers[newIndex] = oldCovers[oldIndex];\n        } else {\n          var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushInternal, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushInternal));\n          updateCoverAfterCreation(controller, cover);\n        }\n      }\n\n      function remove(oldIndex) {\n        if (oldCovers[oldIndex] !== creatingCover) {\n          controller.group.remove(oldCovers[oldIndex]);\n        }\n      }\n    };\n\n    BrushController.prototype.unmount = function () {\n      {\n        if (!this._mounted) {\n          return;\n        }\n      }\n      this.enableBrush(false); // container may 'removeAll' outside.\n\n      clearCovers(this);\n\n      this._zr.remove(this.group);\n\n      {\n        this._mounted = false; // should be at last.\n      }\n      return this;\n    };\n\n    BrushController.prototype.dispose = function () {\n      this.unmount();\n      this.off();\n    };\n\n    return BrushController;\n  }(Eventful);\n\n  function createCover(controller, brushOption) {\n    var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n    cover.__brushOption = brushOption;\n    updateZ(cover, brushOption);\n    controller.group.add(cover);\n    return cover;\n  }\n\n  function endCreating(controller, creatingCover) {\n    var coverRenderer = getCoverRenderer(creatingCover);\n\n    if (coverRenderer.endCreating) {\n      coverRenderer.endCreating(controller, creatingCover);\n      updateZ(creatingCover, creatingCover.__brushOption);\n    }\n\n    return creatingCover;\n  }\n\n  function updateCoverShape(controller, cover) {\n    var brushOption = cover.__brushOption;\n    getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n  }\n\n  function updateZ(cover, brushOption) {\n    var z = brushOption.z;\n    z == null && (z = COVER_Z);\n    cover.traverse(function (el) {\n      el.z = z;\n      el.z2 = z; // Consider in given container.\n    });\n  }\n\n  function updateCoverAfterCreation(controller, cover) {\n    getCoverRenderer(cover).updateCommon(controller, cover);\n    updateCoverShape(controller, cover);\n  }\n\n  function getCoverRenderer(cover) {\n    return coverRenderers[cover.__brushOption.brushType];\n  } // return target panel or `true` (means global panel)\n\n\n  function getPanelByPoint(controller, e, localCursorPoint) {\n    var panels = controller._panels;\n\n    if (!panels) {\n      return BRUSH_PANEL_GLOBAL; // Global panel\n    }\n\n    var panel;\n    var transform = controller._transform;\n    each(panels, function (pn) {\n      pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n    });\n    return panel;\n  } // Return a panel or true\n\n\n  function getPanelByCover(controller, cover) {\n    var panels = controller._panels;\n\n    if (!panels) {\n      return BRUSH_PANEL_GLOBAL; // Global panel\n    }\n\n    var panelId = cover.__brushOption.panelId; // User may give cover without coord sys info,\n    // which is then treated as global panel.\n\n    return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\n  }\n\n  function clearCovers(controller) {\n    var covers = controller._covers;\n    var originalLength = covers.length;\n    each(covers, function (cover) {\n      controller.group.remove(cover);\n    }, controller);\n    covers.length = 0;\n    return !!originalLength;\n  }\n\n  function trigger$1(controller, opt) {\n    var areas = map(controller._covers, function (cover) {\n      var brushOption = cover.__brushOption;\n      var range = clone(brushOption.range);\n      return {\n        brushType: brushOption.brushType,\n        panelId: brushOption.panelId,\n        range: range\n      };\n    });\n    controller.trigger('brush', {\n      areas: areas,\n      isEnd: !!opt.isEnd,\n      removeOnClick: !!opt.removeOnClick\n    });\n  }\n\n  function shouldShowCover(controller) {\n    var track = controller._track;\n\n    if (!track.length) {\n      return false;\n    }\n\n    var p2 = track[track.length - 1];\n    var p1 = track[0];\n    var dx = p2[0] - p1[0];\n    var dy = p2[1] - p1[1];\n    var dist = mathPow$2(dx * dx + dy * dy, 0.5);\n    return dist > UNSELECT_THRESHOLD;\n  }\n\n  function getTrackEnds(track) {\n    var tail = track.length - 1;\n    tail < 0 && (tail = 0);\n    return [track[0], track[tail]];\n  }\n\n  function createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\n    var cover = new Group();\n    cover.add(new Rect({\n      name: 'main',\n      style: makeStyle(brushOption),\n      silent: true,\n      draggable: true,\n      cursor: 'move',\n      drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\n      ondragend: curry(trigger$1, controller, {\n        isEnd: true\n      })\n    }));\n    each(edgeNameSequences, function (nameSequence) {\n      cover.add(new Rect({\n        name: nameSequence.join(''),\n        style: {\n          opacity: 0\n        },\n        draggable: true,\n        silent: true,\n        invisible: true,\n        drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\n        ondragend: curry(trigger$1, controller, {\n          isEnd: true\n        })\n      }));\n    });\n    return cover;\n  }\n\n  function updateBaseRect(controller, cover, localRange, brushOption) {\n    var lineWidth = brushOption.brushStyle.lineWidth || 0;\n    var handleSize = mathMax$7(lineWidth, MIN_RESIZE_LINE_WIDTH);\n    var x = localRange[0][0];\n    var y = localRange[1][0];\n    var xa = x - lineWidth / 2;\n    var ya = y - lineWidth / 2;\n    var x2 = localRange[0][1];\n    var y2 = localRange[1][1];\n    var x2a = x2 - handleSize + lineWidth / 2;\n    var y2a = y2 - handleSize + lineWidth / 2;\n    var width = x2 - x;\n    var height = y2 - y;\n    var widtha = width + lineWidth;\n    var heighta = height + lineWidth;\n    updateRectShape(controller, cover, 'main', x, y, width, height);\n\n    if (brushOption.transformable) {\n      updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n      updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n      updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n      updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n      updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n      updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n      updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n      updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n    }\n  }\n\n  function updateCommon(controller, cover) {\n    var brushOption = cover.__brushOption;\n    var transformable = brushOption.transformable;\n    var mainEl = cover.childAt(0);\n    mainEl.useStyle(makeStyle(brushOption));\n    mainEl.attr({\n      silent: !transformable,\n      cursor: transformable ? 'move' : 'default'\n    });\n    each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\n      var el = cover.childOfName(nameSequence.join(''));\n      var globalDir = nameSequence.length === 1 ? getGlobalDirection1(controller, nameSequence[0]) : getGlobalDirection2(controller, nameSequence);\n      el && el.attr({\n        silent: !transformable,\n        invisible: !transformable,\n        cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n      });\n    });\n  }\n\n  function updateRectShape(controller, cover, name, x, y, w, h) {\n    var el = cover.childOfName(name);\n    el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n  }\n\n  function makeStyle(brushOption) {\n    return defaults({\n      strokeNoScale: true\n    }, brushOption.brushStyle);\n  }\n\n  function formatRectRange(x, y, x2, y2) {\n    var min = [mathMin$7(x, x2), mathMin$7(y, y2)];\n    var max = [mathMax$7(x, x2), mathMax$7(y, y2)];\n    return [[min[0], max[0]], [min[1], max[1]] // y range\n    ];\n  }\n\n  function getTransform$1(controller) {\n    return getTransform(controller.group);\n  }\n\n  function getGlobalDirection1(controller, localDirName) {\n    var map$$1 = {\n      w: 'left',\n      e: 'right',\n      n: 'top',\n      s: 'bottom'\n    };\n    var inverseMap = {\n      left: 'w',\n      right: 'e',\n      top: 'n',\n      bottom: 's'\n    };\n    var dir = transformDirection(map$$1[localDirName], getTransform$1(controller));\n    return inverseMap[dir];\n  }\n\n  function getGlobalDirection2(controller, localDirNameSeq) {\n    var globalDir = [getGlobalDirection1(controller, localDirNameSeq[0]), getGlobalDirection1(controller, localDirNameSeq[1])];\n    (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n    return globalDir.join('');\n  }\n\n  function driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\n    var brushOption = cover.__brushOption;\n    var rectRange = rectRangeConverter.toRectRange(brushOption.range);\n    var localDelta = toLocalDelta(controller, dx, dy);\n    each(dirNameSequence, function (dirName) {\n      var ind = DIRECTION_MAP[dirName];\n      rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n    });\n    brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n    updateCoverAfterCreation(controller, cover);\n    trigger$1(controller, {\n      isEnd: false\n    });\n  }\n\n  function driftPolygon(controller, cover, dx, dy) {\n    var range = cover.__brushOption.range;\n    var localDelta = toLocalDelta(controller, dx, dy);\n    each(range, function (point) {\n      point[0] += localDelta[0];\n      point[1] += localDelta[1];\n    });\n    updateCoverAfterCreation(controller, cover);\n    trigger$1(controller, {\n      isEnd: false\n    });\n  }\n\n  function toLocalDelta(controller, dx, dy) {\n    var thisGroup = controller.group;\n    var localD = thisGroup.transformCoordToLocal(dx, dy);\n    var localZero = thisGroup.transformCoordToLocal(0, 0);\n    return [localD[0] - localZero[0], localD[1] - localZero[1]];\n  }\n\n  function clipByPanel(controller, cover, data) {\n    var panel = getPanelByCover(controller, cover);\n    return panel && panel !== BRUSH_PANEL_GLOBAL ? panel.clipPath(data, controller._transform) : clone(data);\n  }\n\n  function pointsToRect(points) {\n    var xmin = mathMin$7(points[0][0], points[1][0]);\n    var ymin = mathMin$7(points[0][1], points[1][1]);\n    var xmax = mathMax$7(points[0][0], points[1][0]);\n    var ymax = mathMax$7(points[0][1], points[1][1]);\n    return {\n      x: xmin,\n      y: ymin,\n      width: xmax - xmin,\n      height: ymax - ymin\n    };\n  }\n\n  function resetCursor(controller, e, localCursorPoint) {\n    if ( // Check active\n    !controller._brushType // resetCursor should be always called when mouse is in zr area,\n    // but not called when mouse is out of zr area to avoid bad influence\n    // if `mousemove`, `mouseup` are triggered from `document` event.\n    || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\n      return;\n    }\n\n    var zr = controller._zr;\n    var covers = controller._covers;\n    var currPanel = getPanelByPoint(controller, e, localCursorPoint); // Check whether in covers.\n\n    if (!controller._dragging) {\n      for (var i = 0; i < covers.length; i++) {\n        var brushOption = covers[i].__brushOption;\n\n        if (currPanel && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n          // Use cursor style set on cover.\n          return;\n        }\n      }\n    }\n\n    currPanel && zr.setCursorStyle('crosshair');\n  }\n\n  function preventDefault(e) {\n    var rawE = e.event;\n    rawE.preventDefault && rawE.preventDefault();\n  }\n\n  function mainShapeContain(cover, x, y) {\n    return cover.childOfName('main').contain(x, y);\n  }\n\n  function updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n    var creatingCover = controller._creatingCover;\n    var panel = controller._creatingPanel;\n    var thisBrushOption = controller._brushOption;\n    var eventParams;\n\n    controller._track.push(localCursorPoint.slice());\n\n    if (shouldShowCover(controller) || creatingCover) {\n      if (panel && !creatingCover) {\n        thisBrushOption.brushMode === 'single' && clearCovers(controller);\n        var brushOption = clone(thisBrushOption);\n        brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n        brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\n        creatingCover = controller._creatingCover = createCover(controller, brushOption);\n\n        controller._covers.push(creatingCover);\n      }\n\n      if (creatingCover) {\n        var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n        var coverBrushOption = creatingCover.__brushOption;\n        coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n\n        if (isEnd) {\n          endCreating(controller, creatingCover);\n          coverRenderer.updateCommon(controller, creatingCover);\n        }\n\n        updateCoverShape(controller, creatingCover);\n        eventParams = {\n          isEnd: isEnd\n        };\n      }\n    } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n      // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n      // But a single click do not clear covers, because user may have casual\n      // clicks (for example, click on other component and do not expect covers\n      // disappear).\n      // Only some cover removed, trigger action, but not every click trigger action.\n      if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n        eventParams = {\n          isEnd: isEnd,\n          removeOnClick: true\n        };\n      }\n    }\n\n    return eventParams;\n  }\n\n  function determineBrushType(brushType, panel) {\n    if (brushType === 'auto') {\n      {\n        assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\n      }\n      return panel.defaultBrushType;\n    }\n\n    return brushType;\n  }\n\n  var pointerHandlers = {\n    mousedown: function (e) {\n      if (this._dragging) {\n        // In case some browser do not support globalOut,\n        // and release mouse out side the browser.\n        handleDragEnd(this, e);\n      } else if (!e.target || !e.target.draggable) {\n        preventDefault(e);\n        var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n        this._creatingCover = null;\n        var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n\n        if (panel) {\n          this._dragging = true;\n          this._track = [localCursorPoint.slice()];\n        }\n      }\n    },\n    mousemove: function (e) {\n      var x = e.offsetX;\n      var y = e.offsetY;\n      var localCursorPoint = this.group.transformCoordToLocal(x, y);\n      resetCursor(this, e, localCursorPoint);\n\n      if (this._dragging) {\n        preventDefault(e);\n        var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n        eventParams && trigger$1(this, eventParams);\n      }\n    },\n    mouseup: function (e) {\n      handleDragEnd(this, e);\n    }\n  };\n\n  function handleDragEnd(controller, e) {\n    if (controller._dragging) {\n      preventDefault(e);\n      var x = e.offsetX;\n      var y = e.offsetY;\n      var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n      var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n      controller._dragging = false;\n      controller._track = [];\n      controller._creatingCover = null; // trigger event shoule be at final, after procedure will be nested.\n\n      eventParams && trigger$1(controller, eventParams);\n    }\n  }\n\n  function isOutsideZrArea(controller, x, y) {\n    var zr = controller._zr;\n    return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n  }\n  /**\n   * key: brushType\n   */\n\n\n  var coverRenderers = {\n    lineX: getLineRenderer(0),\n    lineY: getLineRenderer(1),\n    rect: {\n      createCover: function (controller, brushOption) {\n        function returnInput(range) {\n          return range;\n        }\n\n        return createBaseRectCover({\n          toRectRange: returnInput,\n          fromRectRange: returnInput\n        }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\n      },\n      getCreatingRange: function (localTrack) {\n        var ends = getTrackEnds(localTrack);\n        return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n      },\n      updateCoverShape: function (controller, cover, localRange, brushOption) {\n        updateBaseRect(controller, cover, localRange, brushOption);\n      },\n      updateCommon: updateCommon,\n      contain: mainShapeContain\n    },\n    polygon: {\n      createCover: function (controller, brushOption) {\n        var cover = new Group(); // Do not use graphic.Polygon because graphic.Polyline do not close the\n        // border of the shape when drawing, which is a better experience for user.\n\n        cover.add(new Polyline({\n          name: 'main',\n          style: makeStyle(brushOption),\n          silent: true\n        }));\n        return cover;\n      },\n      getCreatingRange: function (localTrack) {\n        return localTrack;\n      },\n      endCreating: function (controller, cover) {\n        cover.remove(cover.childAt(0)); // Use graphic.Polygon close the shape.\n\n        cover.add(new Polygon({\n          name: 'main',\n          draggable: true,\n          drift: curry(driftPolygon, controller, cover),\n          ondragend: curry(trigger$1, controller, {\n            isEnd: true\n          })\n        }));\n      },\n      updateCoverShape: function (controller, cover, localRange, brushOption) {\n        cover.childAt(0).setShape({\n          points: clipByPanel(controller, cover, localRange)\n        });\n      },\n      updateCommon: updateCommon,\n      contain: mainShapeContain\n    }\n  };\n\n  function getLineRenderer(xyIndex) {\n    return {\n      createCover: function (controller, brushOption) {\n        return createBaseRectCover({\n          toRectRange: function (range) {\n            var rectRange = [range, [0, 100]];\n            xyIndex && rectRange.reverse();\n            return rectRange;\n          },\n          fromRectRange: function (rectRange) {\n            return rectRange[xyIndex];\n          }\n        }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\n      },\n      getCreatingRange: function (localTrack) {\n        var ends = getTrackEnds(localTrack);\n        var min = mathMin$7(ends[0][xyIndex], ends[1][xyIndex]);\n        var max = mathMax$7(ends[0][xyIndex], ends[1][xyIndex]);\n        return [min, max];\n      },\n      updateCoverShape: function (controller, cover, localRange, brushOption) {\n        var otherExtent; // If brushWidth not specified, fit the panel.\n\n        var panel = getPanelByCover(controller, cover);\n\n        if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\n          otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\n        } else {\n          var zr = controller._zr;\n          otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n        }\n\n        var rectRange = [localRange, otherExtent];\n        xyIndex && rectRange.reverse();\n        updateBaseRect(controller, cover, rectRange, brushOption);\n      },\n      updateCommon: updateCommon,\n      contain: mainShapeContain\n    };\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var IRRELEVANT_EXCLUDES = {\n    'axisPointer': 1,\n    'tooltip': 1,\n    'brush': 1\n  };\n  /**\n   * Avoid that: mouse click on a elements that is over geo or graph,\n   * but roam is triggered.\n   */\n\n  function onIrrelevantElement(e, api, targetCoordSysModel) {\n    var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n    var coordSys = model && model.coordinateSystem;\n    return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES.hasOwnProperty(model.mainType) && coordSys && coordSys.model !== targetCoordSysModel;\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  function makeRectPanelClipPath(rect) {\n    rect = normalizeRect(rect);\n    return function (localPoints) {\n      return clipPointsByRect(localPoints, rect);\n    };\n  }\n\n  function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n    rect = normalizeRect(rect);\n    return function (xyIndex) {\n      var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n      var brushWidth = idx ? rect.width : rect.height;\n      var base = idx ? rect.x : rect.y;\n      return [base, base + (brushWidth || 0)];\n    };\n  }\n\n  function makeRectIsTargetByCursor(rect, api, targetModel) {\n    var boundingRect = normalizeRect(rect);\n    return function (e, localCursorPoint) {\n      return boundingRect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n    };\n  } // Consider width/height is negative.\n\n\n  function normalizeRect(rect) {\n    return BoundingRect.create(rect);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n  // how to genarialize to more coordinate systems.\n\n\n  var INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\n\n  var BrushTargetManager =\n  /** @class */\n  function () {\n    /**\n     * @param finder contains Index/Id/Name of xAxis/yAxis/geo/grid\n     *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\n     * @param opt.include include coordinate system types.\n     */\n    function BrushTargetManager(finder, ecModel, opt) {\n      var _this = this;\n\n      this._targetInfoList = [];\n      var foundCpts = parseFinder$1(ecModel, finder);\n      each(targetInfoBuilders, function (builder, type) {\n        if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n          builder(foundCpts, _this._targetInfoList);\n        }\n      });\n    }\n\n    BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\n      this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n        (area.coordRanges || (area.coordRanges = [])).push(coordRange); // area.coordRange is the first of area.coordRanges\n\n        if (!area.coordRange) {\n          area.coordRange = coordRange; // In 'category' axis, coord to pixel is not reversible, so we can not\n          // rebuild range by coordRange accrately, which may bring trouble when\n          // brushing only one item. So we use __rangeOffset to rebuilding range\n          // by coordRange. And this it only used in brush component so it is no\n          // need to be adapted to coordRanges.\n\n          var result = coordConvert[area.brushType](0, coordSys, coordRange);\n          area.__rangeOffset = {\n            offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n            xyMinMax: result.xyMinMax\n          };\n        }\n      });\n      return areas;\n    };\n\n    BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\n      each(areas, function (area) {\n        var targetInfo = this.findTargetInfo(area, ecModel);\n\n        if (targetInfo && targetInfo !== true) {\n          each(targetInfo.coordSyses, function (coordSys) {\n            var result = coordConvert[area.brushType](1, coordSys, area.range, true);\n            cb(area, result.values, coordSys, ecModel);\n          });\n        }\n      }, this);\n    };\n    /**\n     * the `areas` is `BrushModel.areas`.\n     * Called in layout stage.\n     * convert `area.coordRange` to global range and set panelId to `area.range`.\n     */\n\n\n    BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\n      each(areas, function (area) {\n        var targetInfo = this.findTargetInfo(area, ecModel);\n        {\n          assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\n          assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\n        }\n        area.range = area.range || []; // convert coordRange to global range and set panelId.\n\n        if (targetInfo && targetInfo !== true) {\n          area.panelId = targetInfo.panelId; // (1) area.range shoule always be calculate from coordRange but does\n          // not keep its original value, for the sake of the dataZoom scenario,\n          // where area.coordRange remains unchanged but area.range may be changed.\n          // (2) Only support converting one coordRange to pixel range in brush\n          // component. So do not consider `coordRanges`.\n          // (3) About __rangeOffset, see comment above.\n\n          var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n          var rangeOffset = area.__rangeOffset;\n          area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n        }\n      }, this);\n    };\n\n    BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\n      return map(this._targetInfoList, function (targetInfo) {\n        var rect = targetInfo.getPanelRect();\n        return {\n          panelId: targetInfo.panelId,\n          defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\n          clipPath: makeRectPanelClipPath(rect),\n          isTargetByCursor: makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n          getLinearBrushOtherExtent: makeLinearBrushOtherExtent(rect)\n        };\n      });\n    };\n\n    BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\n      // Check whether area is bound in coord, and series do not belong to that coord.\n      // If do not do this check, some brush (like lineX) will controll all axes.\n      var targetInfo = this.findTargetInfo(area, ecModel);\n      return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n    };\n    /**\n     * If return Object, a coord found.\n     * If reutrn true, global found.\n     * Otherwise nothing found.\n     */\n\n\n    BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\n      var targetInfoList = this._targetInfoList;\n      var foundCpts = parseFinder$1(ecModel, area);\n\n      for (var i = 0; i < targetInfoList.length; i++) {\n        var targetInfo = targetInfoList[i];\n        var areaPanelId = area.panelId;\n\n        if (areaPanelId) {\n          if (targetInfo.panelId === areaPanelId) {\n            return targetInfo;\n          }\n        } else {\n          for (var j = 0; j < targetInfoMatchers.length; j++) {\n            if (targetInfoMatchers[j](foundCpts, targetInfo)) {\n              return targetInfo;\n            }\n          }\n        }\n      }\n\n      return true;\n    };\n\n    return BrushTargetManager;\n  }();\n\n  function formatMinMax(minMax) {\n    minMax[0] > minMax[1] && minMax.reverse();\n    return minMax;\n  }\n\n  function parseFinder$1(ecModel, finder) {\n    return parseFinder(ecModel, finder, {\n      includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n    });\n  }\n\n  var targetInfoBuilders = {\n    grid: function (foundCpts, targetInfoList) {\n      var xAxisModels = foundCpts.xAxisModels;\n      var yAxisModels = foundCpts.yAxisModels;\n      var gridModels = foundCpts.gridModels; // Remove duplicated.\n\n      var gridModelMap = createHashMap();\n      var xAxesHas = {};\n      var yAxesHas = {};\n\n      if (!xAxisModels && !yAxisModels && !gridModels) {\n        return;\n      }\n\n      each(xAxisModels, function (axisModel) {\n        var gridModel = axisModel.axis.grid.model;\n        gridModelMap.set(gridModel.id, gridModel);\n        xAxesHas[gridModel.id] = true;\n      });\n      each(yAxisModels, function (axisModel) {\n        var gridModel = axisModel.axis.grid.model;\n        gridModelMap.set(gridModel.id, gridModel);\n        yAxesHas[gridModel.id] = true;\n      });\n      each(gridModels, function (gridModel) {\n        gridModelMap.set(gridModel.id, gridModel);\n        xAxesHas[gridModel.id] = true;\n        yAxesHas[gridModel.id] = true;\n      });\n      gridModelMap.each(function (gridModel) {\n        var grid = gridModel.coordinateSystem;\n        var cartesians = [];\n        each(grid.getCartesians(), function (cartesian, index) {\n          if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n            cartesians.push(cartesian);\n          }\n        });\n        targetInfoList.push({\n          panelId: 'grid--' + gridModel.id,\n          gridModel: gridModel,\n          coordSysModel: gridModel,\n          // Use the first one as the representitive coordSys.\n          coordSys: cartesians[0],\n          coordSyses: cartesians,\n          getPanelRect: panelRectBuilders.grid,\n          xAxisDeclared: xAxesHas[gridModel.id],\n          yAxisDeclared: yAxesHas[gridModel.id]\n        });\n      });\n    },\n    geo: function (foundCpts, targetInfoList) {\n      each(foundCpts.geoModels, function (geoModel) {\n        var coordSys = geoModel.coordinateSystem;\n        targetInfoList.push({\n          panelId: 'geo--' + geoModel.id,\n          geoModel: geoModel,\n          coordSysModel: geoModel,\n          coordSys: coordSys,\n          coordSyses: [coordSys],\n          getPanelRect: panelRectBuilders.geo\n        });\n      });\n    }\n  };\n  var targetInfoMatchers = [// grid\n  function (foundCpts, targetInfo) {\n    var xAxisModel = foundCpts.xAxisModel;\n    var yAxisModel = foundCpts.yAxisModel;\n    var gridModel = foundCpts.gridModel;\n    !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n    !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n    return gridModel && gridModel === targetInfo.gridModel;\n  }, // geo\n  function (foundCpts, targetInfo) {\n    var geoModel = foundCpts.geoModel;\n    return geoModel && geoModel === targetInfo.geoModel;\n  }];\n  var panelRectBuilders = {\n    grid: function () {\n      // grid is not Transformable.\n      return this.coordSys.master.getRect().clone();\n    },\n    geo: function () {\n      var coordSys = this.coordSys;\n      var rect = coordSys.getBoundingRect().clone(); // geo roam and zoom transform\n\n      rect.applyTransform(getTransform(coordSys));\n      return rect;\n    }\n  };\n  var coordConvert = {\n    lineX: curry(axisConvert, 0),\n    lineY: curry(axisConvert, 1),\n    rect: function (to, coordSys, rangeOrCoordRange, clamp) {\n      var xminymin = to ? coordSys.pointToData([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp);\n      var xmaxymax = to ? coordSys.pointToData([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp);\n      var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n      return {\n        values: values,\n        xyMinMax: values\n      };\n    },\n    polygon: function (to, coordSys, rangeOrCoordRange, clamp) {\n      var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n      var values = map(rangeOrCoordRange, function (item) {\n        var p = to ? coordSys.pointToData(item, clamp) : coordSys.dataToPoint(item, clamp);\n        xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n        xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n        xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n        xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n        return p;\n      });\n      return {\n        values: values,\n        xyMinMax: xyMinMax\n      };\n    }\n  };\n\n  function axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n    {\n      assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\n    }\n    var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n    var values = formatMinMax(map([0, 1], function (i) {\n      return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]), true) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n    }));\n    var xyMinMax = [];\n    xyMinMax[axisNameIndex] = values;\n    xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n\n  var diffProcessor = {\n    lineX: curry(axisDiffProcessor, 0),\n    lineY: curry(axisDiffProcessor, 1),\n    rect: function (values, refer, scales) {\n      return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n    },\n    polygon: function (values, refer, scales) {\n      return map(values, function (item, idx) {\n        return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n      });\n    }\n  };\n\n  function axisDiffProcessor(axisNameIndex, values, refer, scales) {\n    return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n  } // We have to process scale caused by dataZoom manually,\n  // although it might be not accurate.\n  // Return [0~1, 0~1]\n\n\n  function getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n    var sizeCurr = getSize$1(xyMinMaxCurr);\n    var sizeOrigin = getSize$1(xyMinMaxOrigin);\n    var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n    isNaN(scales[0]) && (scales[0] = 1);\n    isNaN(scales[1]) && (scales[1] = 1);\n    return scales;\n  }\n\n  function getSize$1(xyMinMax) {\n    return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  var each$7 = each;\n  var DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\n\n  var DataZoomFeature =\n  /** @class */\n  function (_super) {\n    __extends(DataZoomFeature, _super);\n\n    function DataZoomFeature() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n      if (!this._brushController) {\n        this._brushController = new BrushController(api.getZr());\n\n        this._brushController.on('brush', bind(this._onBrush, this)).mount();\n      }\n\n      updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n      updateBackBtnStatus(featureModel, ecModel);\n    };\n\n    DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n      handlers[type].call(this);\n    };\n\n    DataZoomFeature.prototype.remove = function (ecModel, api) {\n      this._brushController && this._brushController.unmount();\n    };\n\n    DataZoomFeature.prototype.dispose = function (ecModel, api) {\n      this._brushController && this._brushController.dispose();\n    };\n\n    DataZoomFeature.prototype._onBrush = function (eventParam) {\n      var areas = eventParam.areas;\n\n      if (!eventParam.isEnd || !areas.length) {\n        return;\n      }\n\n      var snapshot = {};\n      var ecModel = this.ecModel;\n\n      this._brushController.updateCovers([]); // remove cover\n\n\n      var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n        include: ['grid']\n      });\n      brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n        if (coordSys.type !== 'cartesian2d') {\n          return;\n        }\n\n        var brushType = area.brushType;\n\n        if (brushType === 'rect') {\n          setBatch('x', coordSys, coordRange[0]);\n          setBatch('y', coordSys, coordRange[1]);\n        } else {\n          setBatch({\n            lineX: 'x',\n            lineY: 'y'\n          }[brushType], coordSys, coordRange);\n        }\n      });\n      push(ecModel, snapshot);\n\n      this._dispatchZoomAction(snapshot);\n\n      function setBatch(dimName, coordSys, minMax) {\n        var axis = coordSys.getAxis(dimName);\n        var axisModel = axis.model;\n        var dataZoomModel = findDataZoom(dimName, axisModel, ecModel); // Restrict range.\n\n        var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n\n        if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n          minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n        }\n\n        dataZoomModel && (snapshot[dataZoomModel.id] = {\n          dataZoomId: dataZoomModel.id,\n          startValue: minMax[0],\n          endValue: minMax[1]\n        });\n      }\n\n      function findDataZoom(dimName, axisModel, ecModel) {\n        var found;\n        ecModel.eachComponent({\n          mainType: 'dataZoom',\n          subType: 'select'\n        }, function (dzModel) {\n          var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n          has && (found = dzModel);\n        });\n        return found;\n      }\n    };\n\n    DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n      var batch = []; // Convert from hash map to array.\n\n      each$7(snapshot, function (batchItem, dataZoomId) {\n        batch.push(clone(batchItem));\n      });\n      batch.length && this.api.dispatchAction({\n        type: 'dataZoom',\n        from: this.uid,\n        batch: batch\n      });\n    };\n\n    DataZoomFeature.getDefaultOption = function (ecModel) {\n      var defaultOption = {\n        show: true,\n        filterMode: 'filter',\n        // Icon group\n        icon: {\n          zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n          back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n        },\n        // `zoom`, `back`\n        title: ecModel.getLocaleModel().get(['toolbox', 'dataZoom', 'title']),\n        brushStyle: {\n          borderWidth: 0,\n          color: 'rgba(210,219,238,0.2)'\n        }\n      };\n      return defaultOption;\n    };\n\n    return DataZoomFeature;\n  }(ToolboxFeature);\n\n  var handlers = {\n    zoom: function () {\n      var nextActive = !this._isZoomActive;\n      this.api.dispatchAction({\n        type: 'takeGlobalCursor',\n        key: 'dataZoomSelect',\n        dataZoomSelectActive: nextActive\n      });\n    },\n    back: function () {\n      this._dispatchZoomAction(pop(this.ecModel));\n    }\n  };\n\n  function makeAxisFinder(dzFeatureModel) {\n    var setting = {\n      xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n      yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n      xAxisId: dzFeatureModel.get('xAxisId', true),\n      yAxisId: dzFeatureModel.get('yAxisId', true)\n    }; // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n    // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n    // Some old cases set like this below to close yAxis control but leave xAxis control:\n    // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n\n    if (setting.xAxisIndex == null && setting.xAxisId == null) {\n      setting.xAxisIndex = 'all';\n    }\n\n    if (setting.yAxisIndex == null && setting.yAxisId == null) {\n      setting.yAxisIndex = 'all';\n    }\n\n    return setting;\n  }\n\n  function updateBackBtnStatus(featureModel, ecModel) {\n    featureModel.setIconStatus('back', count(ecModel) > 1 ? 'emphasis' : 'normal');\n  }\n\n  function updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n    var zoomActive = view._isZoomActive;\n\n    if (payload && payload.type === 'takeGlobalCursor') {\n      zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n    }\n\n    view._isZoomActive = zoomActive;\n    featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n      include: ['grid']\n    });\n    var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n      return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n    });\n\n    view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n      brushType: 'auto',\n      brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n    } : false);\n  }\n\n  registerInternalOptionCreator('dataZoom', function (ecModel) {\n    var toolboxModel = ecModel.getComponent('toolbox', 0);\n    var featureDataZoomPath = ['feature', 'dataZoom'];\n\n    if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n      return;\n    }\n\n    var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n    var dzOptions = [];\n    var finder = makeAxisFinder(dzFeatureModel);\n    var finderResult = parseFinder(ecModel, finder);\n    each$7(finderResult.xAxisModels, function (axisModel) {\n      return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n    });\n    each$7(finderResult.yAxisModels, function (axisModel) {\n      return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n    });\n\n    function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n      var axisIndex = axisModel.componentIndex;\n      var newOpt = {\n        type: 'select',\n        $fromToolbox: true,\n        // Default to be filter\n        filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n        // Id for merge mapping.\n        id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n      };\n      newOpt[axisIndexPropName] = axisIndex;\n      dzOptions.push(newOpt);\n    }\n\n    return dzOptions;\n  });\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  function install$15(registers) {\n    registers.registerComponentModel(ToolboxModel);\n    registers.registerComponentView(ToolboxView);\n    registerFeature('saveAsImage', SaveAsImage);\n    registerFeature('magicType', MagicType);\n    registerFeature('dataView', DataView);\n    registerFeature('dataZoom', DataZoomFeature);\n    registerFeature('restore', RestoreOption);\n    use(install$16);\n  }\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n  /**\n   * AUTO-GENERATED FILE. DO NOT MODIFY.\n   */\n\n  /*\n  * Licensed to the Apache Software Foundation (ASF) under one\n  * or more contributor license agreements.  See the NOTICE file\n  * distributed with this work for additional information\n  * regarding copyright ownership.  The ASF licenses this file\n  * to you under the Apache License, Version 2.0 (the\n  * \"License\"); you may not use this file except in compliance\n  * with the License.  You may obtain a copy of the License at\n  *\n  *   http://www.apache.org/licenses/LICENSE-2.0\n  *\n  * Unless required by applicable law or agreed to in writing,\n  * software distributed under the License is distributed on an\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n  * under the License.\n  */\n\n\n  use(install$15);\n  var mathSin$4 = Math.sin;\n  var mathCos$4 = Math.cos;\n  var PI$5 = Math.PI;\n  var PI2$8 = Math.PI * 2;\n  var degree = 180 / PI$5;\n\n  var SVGPathRebuilder = function () {\n    function SVGPathRebuilder() {}\n\n    SVGPathRebuilder.prototype.reset = function (precision) {\n      this._start = true;\n      this._d = [];\n      this._str = '';\n      this._p = Math.pow(10, precision || 4);\n    };\n\n    SVGPathRebuilder.prototype.moveTo = function (x, y) {\n      this._add('M', x, y);\n    };\n\n    SVGPathRebuilder.prototype.lineTo = function (x, y) {\n      this._add('L', x, y);\n    };\n\n    SVGPathRebuilder.prototype.bezierCurveTo = function (x, y, x2, y2, x3, y3) {\n      this._add('C', x, y, x2, y2, x3, y3);\n    };\n\n    SVGPathRebuilder.prototype.quadraticCurveTo = function (x, y, x2, y2) {\n      this._add('Q', x, y, x2, y2);\n    };\n\n    SVGPathRebuilder.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n      this.ellipse(cx, cy, r, r, 0, startAngle, endAngle, anticlockwise);\n    };\n\n    SVGPathRebuilder.prototype.ellipse = function (cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise) {\n      var dTheta = endAngle - startAngle;\n      var clockwise = !anticlockwise;\n      var dThetaPositive = Math.abs(dTheta);\n      var isCircle = isAroundZero$1(dThetaPositive - PI2$8) || (clockwise ? dTheta >= PI2$8 : -dTheta >= PI2$8);\n      var unifiedTheta = dTheta > 0 ? dTheta % PI2$8 : dTheta % PI2$8 + PI2$8;\n      var large = false;\n\n      if (isCircle) {\n        large = true;\n      } else if (isAroundZero$1(dThetaPositive)) {\n        large = false;\n      } else {\n        large = unifiedTheta >= PI$5 === !!clockwise;\n      }\n\n      var x0 = cx + rx * mathCos$4(startAngle);\n      var y0 = cy + ry * mathSin$4(startAngle);\n\n      if (this._start) {\n        this._add('M', x0, y0);\n      }\n\n      var xRot = Math.round(psi * degree);\n\n      if (isCircle) {\n        var p = 1 / this._p;\n        var dTheta_1 = (clockwise ? 1 : -1) * (PI2$8 - p);\n\n        this._add('A', rx, ry, xRot, 1, +clockwise, cx + rx * mathCos$4(startAngle + dTheta_1), cy + ry * mathSin$4(startAngle + dTheta_1));\n\n        if (p > 1e-2) {\n          this._add('A', rx, ry, xRot, 0, +clockwise, x0, y0);\n        }\n      } else {\n        var x = cx + rx * mathCos$4(endAngle);\n        var y = cy + ry * mathSin$4(endAngle);\n\n        this._add('A', rx, ry, xRot, +large, +clockwise, x, y);\n      }\n    };\n\n    SVGPathRebuilder.prototype.rect = function (x, y, w, h) {\n      this._add('M', x, y);\n\n      this._add('l', w, 0);\n\n      this._add('l', 0, h);\n\n      this._add('l', -w, 0);\n\n      this._add('Z');\n    };\n\n    SVGPathRebuilder.prototype.closePath = function () {\n      if (this._d.length > 0) {\n        this._add('Z');\n      }\n    };\n\n    SVGPathRebuilder.prototype._add = function (cmd, a, b, c, d, e, f, g, h) {\n      var vals = [];\n      var p = this._p;\n\n      for (var i = 1; i < arguments.length; i++) {\n        var val = arguments[i];\n\n        if (isNaN(val)) {\n          this._invalid = true;\n          return;\n        }\n\n        vals.push(Math.round(val * p) / p);\n      }\n\n      this._d.push(cmd + vals.join(' '));\n\n      this._start = cmd === 'Z';\n    };\n\n    SVGPathRebuilder.prototype.generateStr = function () {\n      this._str = this._invalid ? '' : this._d.join('');\n      this._d = [];\n    };\n\n    SVGPathRebuilder.prototype.getStr = function () {\n      return this._str;\n    };\n\n    return SVGPathRebuilder;\n  }();\n\n  var NONE = 'none';\n  var mathRound$1 = Math.round;\n\n  function pathHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== NONE;\n  }\n\n  function pathHasStroke(style) {\n    var stroke = style.stroke;\n    return stroke != null && stroke !== NONE;\n  }\n\n  var strokeProps = ['lineCap', 'miterLimit', 'lineJoin'];\n  var svgStrokeProps = map(strokeProps, function (prop) {\n    return \"stroke-\" + prop.toLowerCase();\n  });\n\n  function mapStyleToAttrs(updateAttr, style, el, forceUpdate) {\n    var opacity = style.opacity == null ? 1 : style.opacity;\n\n    if (el instanceof ZRImage) {\n      updateAttr('opacity', opacity);\n      return;\n    }\n\n    if (pathHasFill(style)) {\n      var fill = normalizeColor(style.fill);\n      updateAttr('fill', fill.color);\n      var fillOpacity = style.fillOpacity != null ? style.fillOpacity * fill.opacity * opacity : fill.opacity * opacity;\n\n      if (forceUpdate || fillOpacity < 1) {\n        updateAttr('fill-opacity', fillOpacity);\n      }\n    } else {\n      updateAttr('fill', NONE);\n    }\n\n    if (pathHasStroke(style)) {\n      var stroke = normalizeColor(style.stroke);\n      updateAttr('stroke', stroke.color);\n      var strokeScale = style.strokeNoScale ? el.getLineScale() : 1;\n      var strokeWidth = strokeScale ? (style.lineWidth || 0) / strokeScale : 0;\n      var strokeOpacity = style.strokeOpacity != null ? style.strokeOpacity * stroke.opacity * opacity : stroke.opacity * opacity;\n      var strokeFirst = style.strokeFirst;\n\n      if (forceUpdate || strokeWidth !== 1) {\n        updateAttr('stroke-width', strokeWidth);\n      }\n\n      if (forceUpdate || strokeFirst) {\n        updateAttr('paint-order', strokeFirst ? 'stroke' : 'fill');\n      }\n\n      if (forceUpdate || strokeOpacity < 1) {\n        updateAttr('stroke-opacity', strokeOpacity);\n      }\n\n      if (style.lineDash) {\n        var _a = getLineDash(el),\n            lineDash = _a[0],\n            lineDashOffset = _a[1];\n\n        if (lineDash) {\n          lineDashOffset = mathRound$1(lineDashOffset || 0);\n          updateAttr('stroke-dasharray', lineDash.join(','));\n\n          if (lineDashOffset || forceUpdate) {\n            updateAttr('stroke-dashoffset', lineDashOffset);\n          }\n        }\n      } else if (forceUpdate) {\n        updateAttr('stroke-dasharray', NONE);\n      }\n\n      for (var i = 0; i < strokeProps.length; i++) {\n        var propName = strokeProps[i];\n\n        if (forceUpdate || style[propName] !== DEFAULT_PATH_STYLE[propName]) {\n          var val = style[propName] || DEFAULT_PATH_STYLE[propName];\n          val && updateAttr(svgStrokeProps[i], val);\n        }\n      }\n    } else if (forceUpdate) {\n      updateAttr('stroke', NONE);\n    }\n  }\n\n  var SVGNS = 'http://www.w3.org/2000/svg';\n  var XLINKNS = 'http://www.w3.org/1999/xlink';\n  var XMLNS = 'http://www.w3.org/2000/xmlns/';\n  var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace';\n\n  function createElement(name) {\n    return document.createElementNS(SVGNS, name);\n  }\n\n  function createVNode(tag, key, attrs, children, text) {\n    return {\n      tag: tag,\n      attrs: attrs || {},\n      children: children,\n      text: text,\n      key: key\n    };\n  }\n\n  function createElementOpen(name, attrs) {\n    var attrsStr = [];\n\n    if (attrs) {\n      for (var key in attrs) {\n        var val = attrs[key];\n        var part = key;\n\n        if (val === false) {\n          continue;\n        } else if (val !== true && val != null) {\n          part += \"=\\\"\" + val + \"\\\"\";\n        }\n\n        attrsStr.push(part);\n      }\n    }\n\n    return \"<\" + name + \" \" + attrsStr.join(' ') + \">\";\n  }\n\n  function createElementClose(name) {\n    return \"</\" + name + \">\";\n  }\n\n  function vNodeToString(el, opts) {\n    opts = opts || {};\n    var S = opts.newline ? '\\n' : '';\n\n    function convertElToString(el) {\n      var children = el.children,\n          tag = el.tag,\n          attrs = el.attrs;\n      return createElementOpen(tag, attrs) + (el.text || '') + (children ? \"\" + S + map(children, function (child) {\n        return convertElToString(child);\n      }).join(S) + S : '') + createElementClose(tag);\n    }\n\n    return convertElToString(el);\n  }\n\n  function getCssString(selectorNodes, animationNodes, opts) {\n    opts = opts || {};\n    var S = opts.newline ? '\\n' : '';\n    var bracketBegin = \" {\" + S;\n    var bracketEnd = S + \"}\";\n    var selectors = map(keys(selectorNodes), function (className) {\n      return className + bracketBegin + map(keys(selectorNodes[className]), function (attrName) {\n        return attrName + \":\" + selectorNodes[className][attrName] + \";\";\n      }).join(S) + bracketEnd;\n    }).join(S);\n    var animations = map(keys(animationNodes), function (animationName) {\n      return \"@keyframes \" + animationName + bracketBegin + map(keys(animationNodes[animationName]), function (percent) {\n        return percent + bracketBegin + map(keys(animationNodes[animationName][percent]), function (attrName) {\n          var val = animationNodes[animationName][percent][attrName];\n\n          if (attrName === 'd') {\n            val = \"path(\\\"\" + val + \"\\\")\";\n          }\n\n          return attrName + \":\" + val + \";\";\n        }).join(S) + bracketEnd;\n      }).join(S) + bracketEnd;\n    }).join(S);\n\n    if (!selectors && !animations) {\n      return '';\n    }\n\n    return ['<![CDATA[', selectors, animations, ']]>'].join(S);\n  }\n\n  function createBrushScope(zrId) {\n    return {\n      zrId: zrId,\n      shadowCache: {},\n      patternCache: {},\n      gradientCache: {},\n      clipPathCache: {},\n      defs: {},\n      cssNodes: {},\n      cssAnims: {},\n      cssClassIdx: 0,\n      cssAnimIdx: 0,\n      shadowIdx: 0,\n      gradientIdx: 0,\n      patternIdx: 0,\n      clipPathIdx: 0\n    };\n  }\n\n  function createSVGVNode(width, height, children, useViewBox) {\n    return createVNode('svg', 'root', {\n      'width': width,\n      'height': height,\n      'xmlns': SVGNS,\n      'xmlns:xlink': XLINKNS,\n      'version': '1.1',\n      'baseProfile': 'full',\n      'viewBox': useViewBox ? \"0 0 \" + width + \" \" + height : false\n    }, children);\n  }\n\n  var EASING_MAP = {\n    cubicIn: '0.32,0,0.67,0',\n    cubicOut: '0.33,1,0.68,1',\n    cubicInOut: '0.65,0,0.35,1',\n    quadraticIn: '0.11,0,0.5,0',\n    quadraticOut: '0.5,1,0.89,1',\n    quadraticInOut: '0.45,0,0.55,1',\n    quarticIn: '0.5,0,0.75,0',\n    quarticOut: '0.25,1,0.5,1',\n    quarticInOut: '0.76,0,0.24,1',\n    quinticIn: '0.64,0,0.78,0',\n    quinticOut: '0.22,1,0.36,1',\n    quinticInOut: '0.83,0,0.17,1',\n    sinusoidalIn: '0.12,0,0.39,0',\n    sinusoidalOut: '0.61,1,0.88,1',\n    sinusoidalInOut: '0.37,0,0.63,1',\n    exponentialIn: '0.7,0,0.84,0',\n    exponentialOut: '0.16,1,0.3,1',\n    exponentialInOut: '0.87,0,0.13,1',\n    circularIn: '0.55,0,1,0.45',\n    circularOut: '0,0.55,0.45,1',\n    circularInOut: '0.85,0,0.15,1'\n  };\n  var transformOriginKey = 'transform-origin';\n\n  function buildPathString(el, kfShape, path) {\n    var shape = extend({}, el.shape);\n    extend(shape, kfShape);\n    el.buildPath(path, shape);\n    var svgPathBuilder = new SVGPathRebuilder();\n    svgPathBuilder.reset(getPathPrecision(el));\n    path.rebuildPath(svgPathBuilder, 1);\n    svgPathBuilder.generateStr();\n    return svgPathBuilder.getStr();\n  }\n\n  function setTransformOrigin(target, transform) {\n    var originX = transform.originX,\n        originY = transform.originY;\n\n    if (originX || originY) {\n      target[transformOriginKey] = originX + \"px \" + originY + \"px\";\n    }\n  }\n\n  var ANIMATE_STYLE_MAP = {\n    fill: 'fill',\n    opacity: 'opacity',\n    lineWidth: 'stroke-width',\n    lineDashOffset: 'stroke-dashoffset'\n  };\n\n  function addAnimation(cssAnim, scope) {\n    var animationName = scope.zrId + '-ani-' + scope.cssAnimIdx++;\n    scope.cssAnims[animationName] = cssAnim;\n    return animationName;\n  }\n\n  function createCompoundPathCSSAnimation(el, attrs, scope) {\n    var paths = el.shape.paths;\n    var composedAnim = {};\n    var cssAnimationCfg;\n    var cssAnimationName;\n    each(paths, function (path) {\n      var subScope = createBrushScope(scope.zrId);\n      subScope.animation = true;\n      createCSSAnimation(path, {}, subScope, true);\n      var cssAnims = subScope.cssAnims;\n      var cssNodes = subScope.cssNodes;\n      var animNames = keys(cssAnims);\n      var len = animNames.length;\n\n      if (!len) {\n        return;\n      }\n\n      cssAnimationName = animNames[len - 1];\n      var lastAnim = cssAnims[cssAnimationName];\n\n      for (var percent in lastAnim) {\n        var kf = lastAnim[percent];\n        composedAnim[percent] = composedAnim[percent] || {\n          d: ''\n        };\n        composedAnim[percent].d += kf.d || '';\n      }\n\n      for (var className in cssNodes) {\n        var val = cssNodes[className].animation;\n\n        if (val.indexOf(cssAnimationName) >= 0) {\n          cssAnimationCfg = val;\n        }\n      }\n    });\n\n    if (!cssAnimationCfg) {\n      return;\n    }\n\n    attrs.d = false;\n    var animationName = addAnimation(composedAnim, scope);\n    return cssAnimationCfg.replace(cssAnimationName, animationName);\n  }\n\n  function getEasingFunc(easing) {\n    return isString(easing) ? EASING_MAP[easing] ? \"cubic-bezier(\" + EASING_MAP[easing] + \")\" : createCubicEasingFunc(easing) ? easing : '' : '';\n  }\n\n  function createCSSAnimation(el, attrs, scope, onlyShape) {\n    var animators = el.animators;\n    var len = animators.length;\n    var cssAnimations = [];\n\n    if (el instanceof CompoundPath) {\n      var animationCfg = createCompoundPathCSSAnimation(el, attrs, scope);\n\n      if (animationCfg) {\n        cssAnimations.push(animationCfg);\n      } else if (!len) {\n        return;\n      }\n    } else if (!len) {\n      return;\n    }\n\n    var groupAnimators = {};\n\n    for (var i = 0; i < len; i++) {\n      var animator = animators[i];\n      var cfgArr = [animator.getMaxTime() / 1000 + 's'];\n      var easing = getEasingFunc(animator.getClip().easing);\n      var delay = animator.getDelay();\n\n      if (easing) {\n        cfgArr.push(easing);\n      } else {\n        cfgArr.push('linear');\n      }\n\n      if (delay) {\n        cfgArr.push(delay / 1000 + 's');\n      }\n\n      if (animator.getLoop()) {\n        cfgArr.push('infinite');\n      }\n\n      var cfg = cfgArr.join(' ');\n      groupAnimators[cfg] = groupAnimators[cfg] || [cfg, []];\n      groupAnimators[cfg][1].push(animator);\n    }\n\n    function createSingleCSSAnimation(groupAnimator) {\n      var animators = groupAnimator[1];\n      var len = animators.length;\n      var transformKfs = {};\n      var shapeKfs = {};\n      var finalKfs = {};\n      var animationTimingFunctionAttrName = 'animation-timing-function';\n\n      function saveAnimatorTrackToCssKfs(animator, cssKfs, toCssAttrName) {\n        var tracks = animator.getTracks();\n        var maxTime = animator.getMaxTime();\n\n        for (var k = 0; k < tracks.length; k++) {\n          var track = tracks[k];\n\n          if (track.needsAnimate()) {\n            var kfs = track.keyframes;\n            var attrName = track.propName;\n            toCssAttrName && (attrName = toCssAttrName(attrName));\n\n            if (attrName) {\n              for (var i = 0; i < kfs.length; i++) {\n                var kf = kfs[i];\n                var percent = Math.round(kf.time / maxTime * 100) + '%';\n                var kfEasing = getEasingFunc(kf.easing);\n                var rawValue = kf.rawValue;\n\n                if (isString(rawValue) || isNumber(rawValue)) {\n                  cssKfs[percent] = cssKfs[percent] || {};\n                  cssKfs[percent][attrName] = kf.rawValue;\n\n                  if (kfEasing) {\n                    cssKfs[percent][animationTimingFunctionAttrName] = kfEasing;\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n\n      for (var i = 0; i < len; i++) {\n        var animator = animators[i];\n        var targetProp = animator.targetName;\n\n        if (!targetProp) {\n          !onlyShape && saveAnimatorTrackToCssKfs(animator, transformKfs);\n        } else if (targetProp === 'shape') {\n          saveAnimatorTrackToCssKfs(animator, shapeKfs);\n        }\n      }\n\n      for (var percent in transformKfs) {\n        var transform = {};\n        copyTransform(transform, el);\n        extend(transform, transformKfs[percent]);\n        var str = getSRTTransformString(transform);\n        var timingFunction = transformKfs[percent][animationTimingFunctionAttrName];\n        finalKfs[percent] = str ? {\n          transform: str\n        } : {};\n        setTransformOrigin(finalKfs[percent], transform);\n\n        if (timingFunction) {\n          finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n        }\n      }\n\n      var path;\n      var canAnimateShape = true;\n\n      for (var percent in shapeKfs) {\n        finalKfs[percent] = finalKfs[percent] || {};\n        var isFirst = !path;\n        var timingFunction = shapeKfs[percent][animationTimingFunctionAttrName];\n\n        if (isFirst) {\n          path = new PathProxy();\n        }\n\n        var len_1 = path.len();\n        path.reset();\n        finalKfs[percent].d = buildPathString(el, shapeKfs[percent], path);\n        var newLen = path.len();\n\n        if (!isFirst && len_1 !== newLen) {\n          canAnimateShape = false;\n          break;\n        }\n\n        if (timingFunction) {\n          finalKfs[percent][animationTimingFunctionAttrName] = timingFunction;\n        }\n      }\n\n      if (!canAnimateShape) {\n        for (var percent in finalKfs) {\n          delete finalKfs[percent].d;\n        }\n      }\n\n      if (!onlyShape) {\n        for (var i = 0; i < len; i++) {\n          var animator = animators[i];\n          var targetProp = animator.targetName;\n\n          if (targetProp === 'style') {\n            saveAnimatorTrackToCssKfs(animator, finalKfs, function (propName) {\n              return ANIMATE_STYLE_MAP[propName];\n            });\n          }\n        }\n      }\n\n      var percents = keys(finalKfs);\n      var allTransformOriginSame = true;\n      var transformOrigin;\n\n      for (var i = 1; i < percents.length; i++) {\n        var p0 = percents[i - 1];\n        var p1 = percents[i];\n\n        if (finalKfs[p0][transformOriginKey] !== finalKfs[p1][transformOriginKey]) {\n          allTransformOriginSame = false;\n          break;\n        }\n\n        transformOrigin = finalKfs[p0][transformOriginKey];\n      }\n\n      if (allTransformOriginSame && transformOrigin) {\n        for (var percent in finalKfs) {\n          if (finalKfs[percent][transformOriginKey]) {\n            delete finalKfs[percent][transformOriginKey];\n          }\n        }\n\n        attrs[transformOriginKey] = transformOrigin;\n      }\n\n      if (filter(percents, function (percent) {\n        return keys(finalKfs[percent]).length > 0;\n      }).length) {\n        var animationName = addAnimation(finalKfs, scope);\n        return animationName + \" \" + groupAnimator[0] + \" both\";\n      }\n    }\n\n    for (var key in groupAnimators) {\n      var animationCfg = createSingleCSSAnimation(groupAnimators[key]);\n\n      if (animationCfg) {\n        cssAnimations.push(animationCfg);\n      }\n    }\n\n    if (cssAnimations.length) {\n      var className = scope.zrId + '-cls-' + scope.cssClassIdx++;\n      scope.cssNodes['.' + className] = {\n        animation: cssAnimations.join(',')\n      };\n      attrs[\"class\"] = className;\n    }\n  }\n\n  var round$2 = Math.round;\n\n  function isImageLike$1(val) {\n    return val && isString(val.src);\n  }\n\n  function isCanvasLike(val) {\n    return val && isFunction(val.toDataURL);\n  }\n\n  function setStyleAttrs(attrs, style, el, scope) {\n    mapStyleToAttrs(function (key, val) {\n      var isFillStroke = key === 'fill' || key === 'stroke';\n\n      if (isFillStroke && isGradient(val)) {\n        setGradient(style, attrs, key, scope);\n      } else if (isFillStroke && isPattern(val)) {\n        setPattern(el, attrs, key, scope);\n      } else {\n        attrs[key] = val;\n      }\n    }, style, el, false);\n    setShadow(el, attrs, scope);\n  }\n\n  function noRotateScale(m) {\n    return isAroundZero$1(m[0] - 1) && isAroundZero$1(m[1]) && isAroundZero$1(m[2]) && isAroundZero$1(m[3] - 1);\n  }\n\n  function noTranslate(m) {\n    return isAroundZero$1(m[4]) && isAroundZero$1(m[5]);\n  }\n\n  function setTransform(attrs, m, compress) {\n    if (m && !(noTranslate(m) && noRotateScale(m))) {\n      var mul = compress ? 10 : 1e4;\n      attrs.transform = noRotateScale(m) ? \"translate(\" + round$2(m[4] * mul) / mul + \" \" + round$2(m[5] * mul) / mul + \")\" : getMatrixStr(m);\n    }\n  }\n\n  function convertPolyShape(shape, attrs, mul) {\n    var points = shape.points;\n    var strArr = [];\n\n    for (var i = 0; i < points.length; i++) {\n      strArr.push(round$2(points[i][0] * mul) / mul);\n      strArr.push(round$2(points[i][1] * mul) / mul);\n    }\n\n    attrs.points = strArr.join(' ');\n  }\n\n  function validatePolyShape(shape) {\n    return !shape.smooth;\n  }\n\n  function createAttrsConvert(desc) {\n    var normalizedDesc = map(desc, function (item) {\n      return typeof item === 'string' ? [item, item] : item;\n    });\n    return function (shape, attrs, mul) {\n      for (var i = 0; i < normalizedDesc.length; i++) {\n        var item = normalizedDesc[i];\n        var val = shape[item[0]];\n\n        if (val != null) {\n          attrs[item[1]] = round$2(val * mul) / mul;\n        }\n      }\n    };\n  }\n\n  var buitinShapesDef = {\n    circle: [createAttrsConvert(['cx', 'cy', 'r'])],\n    polyline: [convertPolyShape, validatePolyShape],\n    polygon: [convertPolyShape, validatePolyShape]\n  };\n\n  function hasShapeAnimation(el) {\n    var animators = el.animators;\n\n    for (var i = 0; i < animators.length; i++) {\n      if (animators[i].targetName === 'shape') {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function brushSVGPath(el, scope) {\n    var style = el.style;\n    var shape = el.shape;\n    var builtinShpDef = buitinShapesDef[el.type];\n    var attrs = {};\n    var needsAnimate = scope.animation;\n    var svgElType = 'path';\n    var strokePercent = el.style.strokePercent;\n    var precision = scope.compress && getPathPrecision(el) || 4;\n\n    if (builtinShpDef && !scope.willUpdate && !(builtinShpDef[1] && !builtinShpDef[1](shape)) && !(needsAnimate && hasShapeAnimation(el)) && !(strokePercent < 1)) {\n      svgElType = el.type;\n      var mul = Math.pow(10, precision);\n      builtinShpDef[0](shape, attrs, mul);\n    } else {\n      if (!el.path) {\n        el.createPathProxy();\n      }\n\n      var path = el.path;\n\n      if (el.shapeChanged()) {\n        path.beginPath();\n        el.buildPath(path, el.shape);\n        el.pathUpdated();\n      }\n\n      var pathVersion = path.getVersion();\n      var elExt = el;\n      var svgPathBuilder = elExt.__svgPathBuilder;\n\n      if (elExt.__svgPathVersion !== pathVersion || !svgPathBuilder || strokePercent !== elExt.__svgPathStrokePercent) {\n        if (!svgPathBuilder) {\n          svgPathBuilder = elExt.__svgPathBuilder = new SVGPathRebuilder();\n        }\n\n        svgPathBuilder.reset(precision);\n        path.rebuildPath(svgPathBuilder, strokePercent);\n        svgPathBuilder.generateStr();\n        elExt.__svgPathVersion = pathVersion;\n        elExt.__svgPathStrokePercent = strokePercent;\n      }\n\n      attrs.d = svgPathBuilder.getStr();\n    }\n\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode(svgElType, el.id + '', attrs);\n  }\n\n  function brushSVGImage(el, scope) {\n    var style = el.style;\n    var image = style.image;\n\n    if (image && !isString(image)) {\n      if (isImageLike$1(image)) {\n        image = image.src;\n      } else if (isCanvasLike(image)) {\n        image = image.toDataURL();\n      }\n    }\n\n    if (!image) {\n      return;\n    }\n\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var dw = style.width;\n    var dh = style.height;\n    var attrs = {\n      href: image,\n      width: dw,\n      height: dh\n    };\n\n    if (x) {\n      attrs.x = x;\n    }\n\n    if (y) {\n      attrs.y = y;\n    }\n\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode('image', el.id + '', attrs);\n  }\n\n  function brushSVGTSpan(el, scope) {\n    var style = el.style;\n    var text = style.text;\n    text != null && (text += '');\n\n    if (!text || isNaN(style.x) || isNaN(style.y)) {\n      return;\n    }\n\n    var font = style.font || DEFAULT_FONT;\n    var x = style.x || 0;\n    var y = adjustTextY(style.y || 0, getLineHeight(font), style.textBaseline);\n    var textAlign = TEXT_ALIGN_TO_ANCHOR[style.textAlign] || style.textAlign;\n    var attrs = {\n      'dominant-baseline': 'central',\n      'text-anchor': textAlign\n    };\n\n    if (hasSeparateFont(style)) {\n      var separatedFontStr = '';\n      var fontStyle = style.fontStyle;\n      var fontSize = parseFontSize(style.fontSize);\n\n      if (!parseFloat(fontSize)) {\n        return;\n      }\n\n      var fontFamily = style.fontFamily || DEFAULT_FONT_FAMILY;\n      var fontWeight = style.fontWeight;\n      separatedFontStr += \"font-size:\" + fontSize + \";font-family:\" + fontFamily + \";\";\n\n      if (fontStyle && fontStyle !== 'normal') {\n        separatedFontStr += \"font-style:\" + fontStyle + \";\";\n      }\n\n      if (fontWeight && fontWeight !== 'normal') {\n        separatedFontStr += \"font-weight:\" + fontWeight + \";\";\n      }\n\n      attrs.style = separatedFontStr;\n    } else {\n      attrs.style = \"font: \" + font;\n    }\n\n    if (text.match(/\\s/)) {\n      attrs['xml:space'] = 'preserve';\n    }\n\n    if (x) {\n      attrs.x = x;\n    }\n\n    if (y) {\n      attrs.y = y;\n    }\n\n    setTransform(attrs, el.transform);\n    setStyleAttrs(attrs, style, el, scope);\n    scope.animation && createCSSAnimation(el, attrs, scope);\n    return createVNode('text', el.id + '', attrs, undefined, text);\n  }\n\n  function brush$1(el, scope) {\n    if (el instanceof Path) {\n      return brushSVGPath(el, scope);\n    } else if (el instanceof ZRImage) {\n      return brushSVGImage(el, scope);\n    } else if (el instanceof TSpan) {\n      return brushSVGTSpan(el, scope);\n    }\n  }\n\n  function setShadow(el, attrs, scope) {\n    var style = el.style;\n\n    if (hasShadow(style)) {\n      var shadowKey = getShadowKey(el);\n      var shadowCache = scope.shadowCache;\n      var shadowId = shadowCache[shadowKey];\n\n      if (!shadowId) {\n        var globalScale = el.getGlobalScale();\n        var scaleX = globalScale[0];\n        var scaleY = globalScale[1];\n\n        if (!scaleX || !scaleY) {\n          return;\n        }\n\n        var offsetX = style.shadowOffsetX || 0;\n        var offsetY = style.shadowOffsetY || 0;\n        var blur_1 = style.shadowBlur;\n\n        var _a = normalizeColor(style.shadowColor),\n            opacity = _a.opacity,\n            color = _a.color;\n\n        var stdDx = blur_1 / 2 / scaleX;\n        var stdDy = blur_1 / 2 / scaleY;\n        var stdDeviation = stdDx + ' ' + stdDy;\n        shadowId = scope.zrId + '-s' + scope.shadowIdx++;\n        scope.defs[shadowId] = createVNode('filter', shadowId, {\n          'id': shadowId,\n          'x': '-100%',\n          'y': '-100%',\n          'width': '300%',\n          'height': '300%'\n        }, [createVNode('feDropShadow', '', {\n          'dx': offsetX / scaleX,\n          'dy': offsetY / scaleY,\n          'stdDeviation': stdDeviation,\n          'flood-color': color,\n          'flood-opacity': opacity\n        })]);\n        shadowCache[shadowKey] = shadowId;\n      }\n\n      attrs.filter = getIdURL(shadowId);\n    }\n  }\n\n  function setGradient(style, attrs, target, scope) {\n    var val = style[target];\n    var gradientTag;\n    var gradientAttrs = {\n      'gradientUnits': val.global ? 'userSpaceOnUse' : 'objectBoundingBox'\n    };\n\n    if (isLinearGradient(val)) {\n      gradientTag = 'linearGradient';\n      gradientAttrs.x1 = val.x;\n      gradientAttrs.y1 = val.y;\n      gradientAttrs.x2 = val.x2;\n      gradientAttrs.y2 = val.y2;\n    } else if (isRadialGradient(val)) {\n      gradientTag = 'radialGradient';\n      gradientAttrs.cx = retrieve2(val.x, 0.5);\n      gradientAttrs.cy = retrieve2(val.y, 0.5);\n      gradientAttrs.r = retrieve2(val.r, 0.5);\n    } else {\n      {\n        logError('Illegal gradient type.');\n      }\n      return;\n    }\n\n    var colors = val.colorStops;\n    var colorStops = [];\n\n    for (var i = 0, len = colors.length; i < len; ++i) {\n      var offset = round4(colors[i].offset) * 100 + '%';\n      var stopColor = colors[i].color;\n\n      var _a = normalizeColor(stopColor),\n          color = _a.color,\n          opacity = _a.opacity;\n\n      var stopsAttrs = {\n        'offset': offset\n      };\n      stopsAttrs['stop-color'] = color;\n\n      if (opacity < 1) {\n        stopsAttrs['stop-opacity'] = opacity;\n      }\n\n      colorStops.push(createVNode('stop', i + '', stopsAttrs));\n    }\n\n    var gradientVNode = createVNode(gradientTag, '', gradientAttrs, colorStops);\n    var gradientKey = vNodeToString(gradientVNode);\n    var gradientCache = scope.gradientCache;\n    var gradientId = gradientCache[gradientKey];\n\n    if (!gradientId) {\n      gradientId = scope.zrId + '-g' + scope.gradientIdx++;\n      gradientCache[gradientKey] = gradientId;\n      gradientAttrs.id = gradientId;\n      scope.defs[gradientId] = createVNode(gradientTag, gradientId, gradientAttrs, colorStops);\n    }\n\n    attrs[target] = getIdURL(gradientId);\n  }\n\n  function setPattern(el, attrs, target, scope) {\n    var val = el.style[target];\n    var patternAttrs = {\n      'patternUnits': 'userSpaceOnUse'\n    };\n    var child;\n\n    if (isImagePattern(val)) {\n      var imageWidth_1 = val.imageWidth;\n      var imageHeight_1 = val.imageHeight;\n      var imageSrc = void 0;\n      var patternImage = val.image;\n\n      if (isString(patternImage)) {\n        imageSrc = patternImage;\n      } else if (isImageLike$1(patternImage)) {\n        imageSrc = patternImage.src;\n      } else if (isCanvasLike(patternImage)) {\n        imageSrc = patternImage.toDataURL();\n      }\n\n      if (typeof Image === 'undefined') {\n        var errMsg = 'Image width/height must been given explictly in svg-ssr renderer.';\n        assert(imageWidth_1, errMsg);\n        assert(imageHeight_1, errMsg);\n      } else if (imageWidth_1 == null || imageHeight_1 == null) {\n        var setSizeToVNode_1 = function (vNode, img) {\n          if (vNode) {\n            var svgEl = vNode.elm;\n            var width = vNode.attrs.width = imageWidth_1 || img.width;\n            var height = vNode.attrs.height = imageHeight_1 || img.height;\n\n            if (svgEl) {\n              svgEl.setAttribute('width', width);\n              svgEl.setAttribute('height', height);\n            }\n          }\n        };\n\n        var createdImage = createOrUpdateImage(imageSrc, null, el, function (img) {\n          setSizeToVNode_1(patternVNode, img);\n          setSizeToVNode_1(child, img);\n        });\n\n        if (createdImage && createdImage.width && createdImage.height) {\n          imageWidth_1 = imageWidth_1 || createdImage.width;\n          imageHeight_1 = imageHeight_1 || createdImage.height;\n        }\n      }\n\n      child = createVNode('image', 'img', {\n        href: imageSrc,\n        width: imageWidth_1,\n        height: imageHeight_1\n      });\n      patternAttrs.width = imageWidth_1;\n      patternAttrs.height = imageHeight_1;\n    } else if (val.svgElement) {\n      child = clone(val.svgElement);\n      patternAttrs.width = val.svgWidth;\n      patternAttrs.height = val.svgHeight;\n    }\n\n    if (!child) {\n      return;\n    }\n\n    patternAttrs.patternTransform = getSRTTransformString(val);\n    var patternVNode = createVNode('pattern', '', patternAttrs, [child]);\n    var patternKey = vNodeToString(patternVNode);\n    var patternCache = scope.patternCache;\n    var patternId = patternCache[patternKey];\n\n    if (!patternId) {\n      patternId = scope.zrId + '-p' + scope.patternIdx++;\n      patternCache[patternKey] = patternId;\n      patternAttrs.id = patternId;\n      patternVNode = scope.defs[patternId] = createVNode('pattern', patternId, patternAttrs, [child]);\n    }\n\n    attrs[target] = getIdURL(patternId);\n  }\n\n  function setClipPath(clipPath, attrs, scope) {\n    var clipPathCache = scope.clipPathCache,\n        defs = scope.defs;\n    var clipPathId = clipPathCache[clipPath.id];\n\n    if (!clipPathId) {\n      clipPathId = scope.zrId + '-c' + scope.clipPathIdx++;\n      var clipPathAttrs = {\n        id: clipPathId\n      };\n      clipPathCache[clipPath.id] = clipPathId;\n      defs[clipPathId] = createVNode('clipPath', clipPathId, clipPathAttrs, [brushSVGPath(clipPath, scope)]);\n    }\n\n    attrs['clip-path'] = getIdURL(clipPathId);\n  }\n\n  function createTextNode(text) {\n    return document.createTextNode(text);\n  }\n\n  function insertBefore(parentNode, newNode, referenceNode) {\n    parentNode.insertBefore(newNode, referenceNode);\n  }\n\n  function removeChild(node, child) {\n    node.removeChild(child);\n  }\n\n  function appendChild(node, child) {\n    node.appendChild(child);\n  }\n\n  function parentNode(node) {\n    return node.parentNode;\n  }\n\n  function nextSibling(node) {\n    return node.nextSibling;\n  }\n\n  function setTextContent(node, text) {\n    node.textContent = text;\n  }\n\n  var colonChar = 58;\n  var xChar = 120;\n  var emptyNode = createVNode('', '');\n\n  function isUndef(s) {\n    return s === undefined;\n  }\n\n  function isDef(s) {\n    return s !== undefined;\n  }\n\n  function createKeyToOldIdx(children, beginIdx, endIdx) {\n    var map$$1 = {};\n\n    for (var i = beginIdx; i <= endIdx; ++i) {\n      var key = children[i].key;\n\n      if (key !== undefined) {\n        {\n          if (map$$1[key] != null) {\n            console.error(\"Duplicate key \" + key);\n          }\n        }\n        map$$1[key] = i;\n      }\n    }\n\n    return map$$1;\n  }\n\n  function sameVnode(vnode1, vnode2) {\n    var isSameKey = vnode1.key === vnode2.key;\n    var isSameTag = vnode1.tag === vnode2.tag;\n    return isSameTag && isSameKey;\n  }\n\n  function createElm(vnode) {\n    var i;\n    var children = vnode.children;\n    var tag = vnode.tag;\n\n    if (isDef(tag)) {\n      var elm = vnode.elm = createElement(tag);\n      updateAttrs(emptyNode, vnode);\n\n      if (isArray(children)) {\n        for (i = 0; i < children.length; ++i) {\n          var ch = children[i];\n\n          if (ch != null) {\n            appendChild(elm, createElm(ch));\n          }\n        }\n      } else if (isDef(vnode.text) && !isObject(vnode.text)) {\n        appendChild(elm, createTextNode(vnode.text));\n      }\n    } else {\n      vnode.elm = createTextNode(vnode.text);\n    }\n\n    return vnode.elm;\n  }\n\n  function addVnodes(parentElm, before, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      var ch = vnodes[startIdx];\n\n      if (ch != null) {\n        insertBefore(parentElm, createElm(ch), before);\n      }\n    }\n  }\n\n  function removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      var ch = vnodes[startIdx];\n\n      if (ch != null) {\n        if (isDef(ch.tag)) {\n          var parent_1 = parentNode(ch.elm);\n          removeChild(parent_1, ch.elm);\n        } else {\n          removeChild(parentElm, ch.elm);\n        }\n      }\n    }\n  }\n\n  function updateAttrs(oldVnode, vnode) {\n    var key;\n    var elm = vnode.elm;\n    var oldAttrs = oldVnode && oldVnode.attrs || {};\n    var attrs = vnode.attrs || {};\n\n    if (oldAttrs === attrs) {\n      return;\n    }\n\n    for (key in attrs) {\n      var cur = attrs[key];\n      var old = oldAttrs[key];\n\n      if (old !== cur) {\n        if (cur === true) {\n          elm.setAttribute(key, '');\n        } else if (cur === false) {\n          elm.removeAttribute(key);\n        } else {\n          if (key.charCodeAt(0) !== xChar) {\n            elm.setAttribute(key, cur);\n          } else if (key === 'xmlns:xlink' || key === 'xmlns') {\n            elm.setAttributeNS(XMLNS, key, cur);\n          } else if (key.charCodeAt(3) === colonChar) {\n            elm.setAttributeNS(XML_NAMESPACE, key, cur);\n          } else if (key.charCodeAt(5) === colonChar) {\n            elm.setAttributeNS(XLINKNS, key, cur);\n          } else {\n            elm.setAttribute(key, cur);\n          }\n        }\n      }\n    }\n\n    for (key in oldAttrs) {\n      if (!(key in attrs)) {\n        elm.removeAttribute(key);\n      }\n    }\n  }\n\n  function updateChildren(parentElm, oldCh, newCh) {\n    var oldStartIdx = 0;\n    var newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx;\n    var idxInOld;\n    var elmToMove;\n    var before;\n\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n      if (oldStartVnode == null) {\n        oldStartVnode = oldCh[++oldStartIdx];\n      } else if (oldEndVnode == null) {\n        oldEndVnode = oldCh[--oldEndIdx];\n      } else if (newStartVnode == null) {\n        newStartVnode = newCh[++newStartIdx];\n      } else if (newEndVnode == null) {\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\n        patchVnode(oldStartVnode, newStartVnode);\n        oldStartVnode = oldCh[++oldStartIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\n        patchVnode(oldEndVnode, newEndVnode);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldStartVnode, newEndVnode)) {\n        patchVnode(oldStartVnode, newEndVnode);\n        insertBefore(parentElm, oldStartVnode.elm, nextSibling(oldEndVnode.elm));\n        oldStartVnode = oldCh[++oldStartIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldEndVnode, newStartVnode)) {\n        patchVnode(oldEndVnode, newStartVnode);\n        insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else {\n        if (isUndef(oldKeyToIdx)) {\n          oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n        }\n\n        idxInOld = oldKeyToIdx[newStartVnode.key];\n\n        if (isUndef(idxInOld)) {\n          insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm);\n        } else {\n          elmToMove = oldCh[idxInOld];\n\n          if (elmToMove.tag !== newStartVnode.tag) {\n            insertBefore(parentElm, createElm(newStartVnode), oldStartVnode.elm);\n          } else {\n            patchVnode(elmToMove, newStartVnode);\n            oldCh[idxInOld] = undefined;\n            insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);\n          }\n        }\n\n        newStartVnode = newCh[++newStartIdx];\n      }\n    }\n\n    if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\n      if (oldStartIdx > oldEndIdx) {\n        before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;\n        addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx);\n      } else {\n        removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n      }\n    }\n  }\n\n  function patchVnode(oldVnode, vnode) {\n    var elm = vnode.elm = oldVnode.elm;\n    var oldCh = oldVnode.children;\n    var ch = vnode.children;\n\n    if (oldVnode === vnode) {\n      return;\n    }\n\n    updateAttrs(oldVnode, vnode);\n\n    if (isUndef(vnode.text)) {\n      if (isDef(oldCh) && isDef(ch)) {\n        if (oldCh !== ch) {\n          updateChildren(elm, oldCh, ch);\n        }\n      } else if (isDef(ch)) {\n        if (isDef(oldVnode.text)) {\n          setTextContent(elm, '');\n        }\n\n        addVnodes(elm, null, ch, 0, ch.length - 1);\n      } else if (isDef(oldCh)) {\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n      } else if (isDef(oldVnode.text)) {\n        setTextContent(elm, '');\n      }\n    } else if (oldVnode.text !== vnode.text) {\n      if (isDef(oldCh)) {\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n      }\n\n      setTextContent(elm, vnode.text);\n    }\n  }\n\n  function patch(oldVnode, vnode) {\n    if (sameVnode(oldVnode, vnode)) {\n      patchVnode(oldVnode, vnode);\n    } else {\n      var elm = oldVnode.elm;\n      var parent_2 = parentNode(elm);\n      createElm(vnode);\n\n      if (parent_2 !== null) {\n        insertBefore(parent_2, vnode.elm, nextSibling(elm));\n        removeVnodes(parent_2, [oldVnode], 0, 0);\n      }\n    }\n\n    return vnode;\n  }\n\n  var svgId = 0;\n\n  var SVGPainter = function () {\n    function SVGPainter(root, storage, opts) {\n      this.type = 'svg';\n      this.refreshHover = createMethodNotSupport('refreshHover');\n      this.configLayer = createMethodNotSupport('configLayer');\n      this.storage = storage;\n      this._opts = opts = extend({}, opts);\n      this.root = root;\n      this._id = 'zr' + svgId++;\n      this._oldVNode = createSVGVNode(opts.width, opts.height);\n\n      if (root && !opts.ssr) {\n        var viewport = this._viewport = document.createElement('div');\n        viewport.style.cssText = 'position:relative;overflow:hidden';\n        var svgDom = this._svgDom = this._oldVNode.elm = createElement('svg');\n        updateAttrs(null, this._oldVNode);\n        viewport.appendChild(svgDom);\n        root.appendChild(viewport);\n      }\n\n      this.resize(opts.width, opts.height);\n    }\n\n    SVGPainter.prototype.getType = function () {\n      return this.type;\n    };\n\n    SVGPainter.prototype.getViewportRoot = function () {\n      return this._viewport;\n    };\n\n    SVGPainter.prototype.getViewportRootOffset = function () {\n      var viewportRoot = this.getViewportRoot();\n\n      if (viewportRoot) {\n        return {\n          offsetLeft: viewportRoot.offsetLeft || 0,\n          offsetTop: viewportRoot.offsetTop || 0\n        };\n      }\n    };\n\n    SVGPainter.prototype.getSvgDom = function () {\n      return this._svgDom;\n    };\n\n    SVGPainter.prototype.refresh = function () {\n      if (this.root) {\n        var vnode = this.renderToVNode({\n          willUpdate: true\n        });\n        vnode.attrs.style = 'position:absolute;left:0;top:0;user-select:none';\n        patch(this._oldVNode, vnode);\n        this._oldVNode = vnode;\n      }\n    };\n\n    SVGPainter.prototype.renderOneToVNode = function (el) {\n      return brush$1(el, createBrushScope(this._id));\n    };\n\n    SVGPainter.prototype.renderToVNode = function (opts) {\n      opts = opts || {};\n      var list = this.storage.getDisplayList(true);\n      var bgColor = this._backgroundColor;\n      var width = this._width;\n      var height = this._height;\n      var scope = createBrushScope(this._id);\n      scope.animation = opts.animation;\n      scope.willUpdate = opts.willUpdate;\n      scope.compress = opts.compress;\n      var children = [];\n\n      if (bgColor && bgColor !== 'none') {\n        var _a = normalizeColor(bgColor),\n            color = _a.color,\n            opacity = _a.opacity;\n\n        this._bgVNode = createVNode('rect', 'bg', {\n          width: width,\n          height: height,\n          x: '0',\n          y: '0',\n          id: '0',\n          fill: color,\n          'fill-opacity': opacity\n        });\n        children.push(this._bgVNode);\n      } else {\n        this._bgVNode = null;\n      }\n\n      var mainVNode = !opts.compress ? this._mainVNode = createVNode('g', 'main', {}, []) : null;\n\n      this._paintList(list, scope, mainVNode ? mainVNode.children : children);\n\n      mainVNode && children.push(mainVNode);\n      var defs = map(keys(scope.defs), function (id) {\n        return scope.defs[id];\n      });\n\n      if (defs.length) {\n        children.push(createVNode('defs', 'defs', {}, defs));\n      }\n\n      if (opts.animation) {\n        var animationCssStr = getCssString(scope.cssNodes, scope.cssAnims, {\n          newline: true\n        });\n\n        if (animationCssStr) {\n          var styleNode = createVNode('style', 'stl', {}, [], animationCssStr);\n          children.push(styleNode);\n        }\n      }\n\n      return createSVGVNode(width, height, children, opts.useViewBox);\n    };\n\n    SVGPainter.prototype.renderToString = function (opts) {\n      opts = opts || {};\n      return vNodeToString(this.renderToVNode({\n        animation: retrieve2(opts.cssAnimation, true),\n        willUpdate: false,\n        compress: true,\n        useViewBox: retrieve2(opts.useViewBox, true)\n      }), {\n        newline: true\n      });\n    };\n\n    SVGPainter.prototype.setBackgroundColor = function (backgroundColor) {\n      this._backgroundColor = backgroundColor;\n      var bgVNode = this._bgVNode;\n\n      if (bgVNode && bgVNode.elm) {\n        var _a = normalizeColor(backgroundColor),\n            color = _a.color,\n            opacity = _a.opacity;\n\n        bgVNode.elm.setAttribute('fill', color);\n\n        if (opacity < 1) {\n          bgVNode.elm.setAttribute('fill-opacity', opacity);\n        }\n      }\n    };\n\n    SVGPainter.prototype.getSvgRoot = function () {\n      return this._mainVNode && this._mainVNode.elm;\n    };\n\n    SVGPainter.prototype._paintList = function (list, scope, out) {\n      var listLen = list.length;\n      var clipPathsGroupsStack = [];\n      var clipPathsGroupsStackDepth = 0;\n      var currentClipPathGroup;\n      var prevClipPaths;\n      var clipGroupNodeIdx = 0;\n\n      for (var i = 0; i < listLen; i++) {\n        var displayable = list[i];\n\n        if (!displayable.invisible) {\n          var clipPaths = displayable.__clipPaths;\n          var len = clipPaths && clipPaths.length || 0;\n          var prevLen = prevClipPaths && prevClipPaths.length || 0;\n          var lca = void 0;\n\n          for (lca = Math.max(len - 1, prevLen - 1); lca >= 0; lca--) {\n            if (clipPaths && prevClipPaths && clipPaths[lca] === prevClipPaths[lca]) {\n              break;\n            }\n          }\n\n          for (var i_1 = prevLen - 1; i_1 > lca; i_1--) {\n            clipPathsGroupsStackDepth--;\n            currentClipPathGroup = clipPathsGroupsStack[clipPathsGroupsStackDepth - 1];\n          }\n\n          for (var i_2 = lca + 1; i_2 < len; i_2++) {\n            var groupAttrs = {};\n            setClipPath(clipPaths[i_2], groupAttrs, scope);\n            var g = createVNode('g', 'clip-g-' + clipGroupNodeIdx++, groupAttrs, []);\n            (currentClipPathGroup ? currentClipPathGroup.children : out).push(g);\n            clipPathsGroupsStack[clipPathsGroupsStackDepth++] = g;\n            currentClipPathGroup = g;\n          }\n\n          prevClipPaths = clipPaths;\n          var ret = brush$1(displayable, scope);\n\n          if (ret) {\n            (currentClipPathGroup ? currentClipPathGroup.children : out).push(ret);\n          }\n        }\n      }\n    };\n\n    SVGPainter.prototype.resize = function (width, height) {\n      var opts = this._opts;\n      var root = this.root;\n      var viewport = this._viewport;\n      width != null && (opts.width = width);\n      height != null && (opts.height = height);\n\n      if (root && viewport) {\n        viewport.style.display = 'none';\n        width = getSize(root, 0, opts);\n        height = getSize(root, 1, opts);\n        viewport.style.display = '';\n      }\n\n      if (this._width !== width || this._height !== height) {\n        this._width = width;\n        this._height = height;\n\n        if (viewport) {\n          var viewportStyle = viewport.style;\n          viewportStyle.width = width + 'px';\n          viewportStyle.height = height + 'px';\n        }\n\n        var svgDom = this._svgDom;\n\n        if (svgDom) {\n          svgDom.setAttribute('width', width);\n          svgDom.setAttribute('height', height);\n        }\n      }\n    };\n\n    SVGPainter.prototype.getWidth = function () {\n      return this._width;\n    };\n\n    SVGPainter.prototype.getHeight = function () {\n      return this._height;\n    };\n\n    SVGPainter.prototype.dispose = function () {\n      if (this.root) {\n        this.root.innerHTML = '';\n      }\n\n      this._svgDom = this._viewport = this.storage = this._oldVNode = this._bgVNode = this._mainVNode = null;\n    };\n\n    SVGPainter.prototype.clear = function () {\n      if (this._svgDom) {\n        this._svgDom.innerHTML = null;\n      }\n\n      this._oldVNode = null;\n    };\n\n    SVGPainter.prototype.toDataURL = function (base64) {\n      var str = encodeURIComponent(this.renderToString());\n      var prefix = 'data:image/svg+xml;';\n\n      if (base64) {\n        str = encodeBase64(str);\n        return str && prefix + 'base64,' + str;\n      }\n\n      return prefix + 'charset=UTF-8,' + str;\n    };\n\n    return SVGPainter;\n  }();\n\n  function createMethodNotSupport(method) {\n    return function () {\n      {\n        logError('In SVG mode painter not support method \"' + method + '\"');\n      }\n    };\n  }\n\n  registerPainter('svg', SVGPainter);\n  exports.version = version;\n  exports.dependencies = dependencies;\n  exports.PRIORITY = PRIORITY;\n  exports.init = init;\n  exports.connect = connect;\n  exports.disConnect = disConnect;\n  exports.disconnect = disconnect;\n  exports.dispose = dispose;\n  exports.getInstanceByDom = getInstanceByDom;\n  exports.getInstanceById = getInstanceById;\n  exports.registerTheme = registerTheme;\n  exports.registerPreprocessor = registerPreprocessor;\n  exports.registerProcessor = registerProcessor;\n  exports.registerPostInit = registerPostInit;\n  exports.registerPostUpdate = registerPostUpdate;\n  exports.registerUpdateLifecycle = registerUpdateLifecycle;\n  exports.registerAction = registerAction;\n  exports.registerCoordinateSystem = registerCoordinateSystem;\n  exports.getCoordinateSystemDimensions = getCoordinateSystemDimensions;\n  exports.registerLayout = registerLayout;\n  exports.registerVisual = registerVisual;\n  exports.registerLoading = registerLoading;\n  exports.setCanvasCreator = setCanvasCreator;\n  exports.registerMap = registerMap;\n  exports.getMap = getMap;\n  exports.registerTransform = registerTransform;\n  exports.dataTool = dataTool;\n  exports.registerLocale = registerLocale;\n  exports.zrender = zrender;\n  exports.matrix = matrix;\n  exports.vector = vector;\n  exports.zrUtil = util;\n  exports.color = color;\n  exports.helper = helper;\n  exports.number = number;\n  exports.time = time;\n  exports.graphic = graphic$1;\n  exports.format = format$1;\n  exports.util = util$1;\n  exports.List = SeriesData;\n  exports.ComponentModel = ComponentModel;\n  exports.ComponentView = ComponentView;\n  exports.SeriesModel = SeriesModel;\n  exports.ChartView = ChartView;\n  exports.extendComponentModel = extendComponentModel;\n  exports.extendComponentView = extendComponentView;\n  exports.extendSeriesModel = extendSeriesModel;\n  exports.extendChartView = extendChartView;\n  exports.throttle = throttle;\n  exports.use = use;\n  exports.setPlatformAPI = setPlatformAPI;\n  exports.parseGeoJSON = parseGeoJSON;\n  exports.parseGeoJson = parseGeoJSON;\n  exports.env = env;\n  exports.Model = Model;\n  exports.Axis = Axis;\n  exports.innerDrawElementOnCanvas = brushSingle;\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + {\"32\":\"e7dc42c7\",\"205\":\"f674da2c\",\"297\":\"93b35496\",\"343\":\"27a01ea3\",\"517\":\"92c6b5ab\",\"695\":\"5590aa59\",\"733\":\"8a37f016\",\"760\":\"d8b4982b\",\"901\":\"595b62f8\",\"928\":\"01ed2237\",\"930\":\"daea2ba4\",\"989\":\"a45750cf\",\"990\":\"a1d00b46\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"css/\" + chunkId + \".\" + {\"205\":\"a97fc1eb\",\"297\":\"31a16679\",\"695\":\"566a1ad1\",\"928\":\"202bc348\"}[chunkId] + \".css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"vue-test:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","var createStylesheet = function(chunkId, fullhref, resolve, reject) {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tvar onLinkComplete = function(event) {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + realHref + \")\");\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tlinkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\tdocument.head.appendChild(linkTag);\n\treturn linkTag;\n};\nvar findStylesheet = function(href, fullhref) {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = function(chunkId) {\n\treturn new Promise(function(resolve, reject) {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.miniCss = function(chunkId, promises) {\n\tvar cssChunks = {\"205\":1,\"297\":1,\"695\":1,\"928\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(function() {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, function(e) {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkvue_test\"] = self[\"webpackChunkvue_test\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(9784); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","attrs","staticClass","_v","_m","on","signout","staticRenderFns","require","name","methods","component","register","ready","console","log","registered","cached","updatefound","updated","offline","error","Ciphers","alphabet","split","morse","morse_numbers","nato_spelling_alphabet","ciphers","parameters","encode","cipher","cipher_text","params","encoded_text","char_index","length","char","indexOf","toLowerCase","letter_case","toUpperCase","encoded_char","current_encode_char","current_encode_char_index","decode","parseInt","btoa","encodeURIComponent","decoded_text","decoded_char","atob","decodeURIComponent","Vue","Vuex","state","user_id","cookies","user","token","trackers","getters","get_user","tracker_types","map","t","tracker_type","tracker_ids","tracker_id","get_trackers","mutations","logout","login","obj","username","auth_token","set_tracker","push","delete_trackers","actions","modules","VueRouter","routes","path","redirect","children","meta","title","auth","router","mode","base","process","beforeEach","async","to","from","next","store","VueCookies","echarts","value","currentdate","Date","mstr","datetime","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","getMilliseconds","h","App","$mount","global","factory","exports","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","constructor","create","Browser","firefox","ie","edge","newEdge","weChat","Env","browser","node","wxa","worker","svgSupported","touchEventsSupported","pointerEventsSupported","domSupported","transformSupported","transform3dSupported","hasGlobalWindow","window","env","detect","ua","match","test","version","SVGRect","document","style","documentElement","WebKitCSSMatrix","wx","getSystemInfoSync","self","navigator","userAgent","DEFAULT_FONT_SIZE","DEFAULT_FONT_FAMILY","DEFAULT_FONT","OFFSET","SCALE","defaultWidthMapStr","getTextWidthMap","mapStr","JSON","i","fromCharCode","size","charCodeAt","DEFAULT_TEXT_WIDTH_MAP","platformApi","createCanvas","createElement","measureText","_ctx","_cachedFont","text","font","canvas","getContext","res","exec","fontSize","width","preCalcWidth","loadImage","src","onload","onerror","image","Image","setPlatformAPI","newPlatformApis","key","BUILTIN_OBJECT","reduce","val","TYPED_ARRAY","objToString","toString","arrayProto","nativeForEach","forEach","nativeFilter","filter","nativeSlice","slice","nativeMap","ctorFunction","protoFunction","protoKey","idStart","guid","logError","args","_i","arguments","apply","clone","source","result","typeStr","isPrimitive","len","Ctor","isDom","merge","target","overwrite","isObject","targetProp","sourceProp","isArray","isBuiltInObject","mergeAll","targetAndSources","extend","assign","defaults","overlay","keysArr","keys","array","inherits","clazz","baseClazz","clazzPrototype","F","prop","superClass","mixin","override","getOwnPropertyNames","keyList","isArrayLike","data","each","arr","cb","context","memo","find","bindPolyfill","func","concat","bind","isFunction","curry","isString","isStringSafe","isNumber","type","isTypedArray","nodeType","ownerDocument","isGradientObject","colorStops","isImagePatternObject","isRegExp","eqNaN","retrieve","retrieve2","value0","value1","retrieve3","value2","normalizeCssArray","assert","condition","message","Error","trim","str","replace","primitiveKey","setAsPrimitive","HashMap","isArr","thisMap","visit","set","get","removeKey","createHashMap","concatArray","a","newArray","offset","createObject","proto","properties","StyleCtor","disableUserSelect","dom","domStyle","webkitUserSelect","userSelect","webkitTapHighlightColor","hasOwn","own","noop","RADIAN_TO_DEGREE","Math","PI","util","freeze","x","y","copy","out","v","clone$1","add","v1","v2","scaleAndAdd","sub","sqrt","lenSquare","lengthSquare","mul","div","dot","scale","s","normalize","distance","dist","distanceSquare","distSquare","negate","lerp","applyTransform","m","min","max","vector","Param","e","topTarget","Draggable","handler","_dragStart","_drag","_dragEnd","draggingTarget","draggable","parent","__hostTarget","_draggingTarget","dragging","_x","offsetX","_y","offsetY","dispatchToElement","event","dx","dy","drift","dropTarget","findHover","lastDropTarget","_dropTarget","Eventful","eventProcessors","_$eventProcessor","query","_$handlers","_h","eventProcessor","normalizeQuery","wrap","ctx","callAtLast","zrEventfulCallAtLast","lastIndex","lastWrap","splice","isSilent","eventName","off","eventType","newList","l","trigger","argLen","hItem","afterTrigger","triggerWithContext","LN2","determinant","rows","rank","rowStart","rowMask","colMask","detCache","cacheKey","fullRank","colStart","round","subRowMask","subRowStart","sum","j","colLocalIdx","colTag","buildTransformer","dest","mA","det","vh","srcPointX","srcPointY","pk","EVENT_SAVED_PROP","_calcOut$1","transformLocalCoord","elFrom","elTarget","inX","inY","transformCoordWithViewport","el","inverse","getBoundingClientRect","isCanvasEl","saved","markers","prepareCoordMarkers","transformer","preparePointerTransformer","propLR","propTB","marker","stl","idxLR","idxTB","cssText","join","appendChild","transformerName","oldSrcCoords","srcCoords","destCoords","oldCoordTheSame","rect","ii","left","top","offsetLeft","offsetTop","nodeName","MOUSE_EVENT_REG","_calcOut","firefoxNotSupportOffsetXY","clientToLocal","calculate","calculateZrXY","layerX","zrX","zrY","layerY","ex","clientX","ey","clientY","box","getNativeEvent","normalizeEvent","isTouch","touch","targetTouches","changedTouches","wheelDelta","getWheelDeltaMayPolyfill","zrDelta","detail","button","which","undefined","rawWheelDelta","deltaX","deltaY","delta","abs","sign","addEventListener","opt","removeEventListener","stop","preventDefault","stopPropagation","cancelBubble","isMiddleOrRightButtonOnMouseUpDown","GestureMgr","_track","recognize","root","_doTrack","_recognize","clear","touches","trackItem","points","pos","recognizers","gestureInfo","dist$1","pointPair","center","pinch","tracks","trackLen","pinchEnd","pinchPre","pinchScale","isFinite","pinchCenter","pinchX","pinchY","SILENT","makeEventPacket","eveType","targetInfo","gestureEvent","zrByTouch","stopEvent","EmptyProxy","_super","_this","dispose","setCursor","HoveredResult","handlerNames","Handler","storage","painter","proxy","painterRoot","_hovered","setHandlerProxy","_draggingMgr","mousemove","isOutside","isOutsideBoundary","lastHovered","lastHoveredTarget","__zr","hovered","hoveredTarget","cursor","mouseout","eventControl","zrEventControl","resize","dispatch","eventArgs","setCursorStyle","cursorStyle","silent","eventKey","eventPacket","eachOtherLayer","layer","exclude","list","getDisplayList","hoverCheckResult","ignore","isHover","processGesture","stage","_gestureMgr","gestureMgr","displayable","rectHover","ignoreClip","clipPath","getClipPath","contain","hostEl","handlerInstance","getWidth","getHeight","_downEl","_downPoint","_upEl","DEFAULT_MIN_MERGE","DEFAULT_MIN_GALLOPING","minRunLength","n","r","makeAscendingRun","lo","hi","compare","runHi","reverseRun","binaryInsertionSort","start","mid","pivot","right","gallopLeft","hint","lastOffset","maxOffset","tmp","gallopRight","TimSort","runStart","runLength","minGallop","stackSize","pushRun","_runStart","_runLength","mergeRuns","mergeAt","forceMergeRuns","start1","length1","start2","length2","k","mergeLow","mergeHigh","cursor1","cursor2","count1","count2","exit","_minGallop","customCursor","customDest","sort","remaining","ts","minRun","force","REDRAW_BIT","STYLE_CHANGED_BIT","SHAPE_CHANGED_BIT","invalidZErrorLogged","logInvalidZError","warn","shapeCompareFunc","zlevel","z","z2","requestAnimationFrame","Storage","_roots","_displayList","_displayListLen","displayableSortFunc","traverse","update","includeIgnore","displayList","updateDisplayList","roots","_updateAndAddDisplayable","clipPaths","beforeUpdate","afterUpdate","userSetClipPath","currentClipPath","parentClipPath","updateTransform","childrenRef","child","__dirty","disp","__clipPaths","isNaN","decalEl","getDecalElement","textGuide","getTextGuideLine","textEl","getTextContent","addRoot","delRoot","idx","delAllRoots","getRoots","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","setTimeout","requestAnimationFrame$1","easingFuncs","linear","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","cos","sinusoidalOut","sin","sinusoidalInOut","exponentialIn","pow","exponentialOut","exponentialInOut","circularIn","circularOut","circularInOut","elasticIn","asin","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceIn","bounceOut","bounceInOut","mathPow","mathSqrt","EPSILON","EPSILON_NUMERIC","THREE_SQRT","ONE_THIRD","_v0","_v1","_v2","isAroundZero","isNotAroundZero","cubicAt","p0","p1","p2","p3","onet","cubicDerivativeAt","cubicRootAt","c","A","B","C","t1","disc","K","t2","discSqrt","Y1","Y2","T","theta","acos","ASqrt","t3","cubicExtrema","extrema","cubicSubdivide","p01","p12","p23","p012","p123","p0123","cubicProjectPoint","x0","y0","x1","y1","x2","y2","x3","y3","prev","d1","d2","interval","Infinity","_t","cubicLength","iteration","px","py","step","quadraticAt","quadraticDerivativeAt","quadraticRootAt","quadraticExtremum","divider","quadraticSubdivide","quadraticProjectPoint","quadraticLength","regexp","createCubicEasingFunc","cubicEasingStr","cubic","a_1","b_1","c_1","d_1","roots_1","Clip","opts","_inited","_startTime","_pausedTime","_paused","_life","life","_delay","delay","loop","onframe","ondestroy","onrestart","easing","setEasing","globalTime","deltaTime","elapsedTime","percent","easingFunc","schedule","remainder","pause","resume","Entry","LinkedList","_len","insert","entry","insertEntry","head","tail","remove","LRU","maxSize","_list","_maxSize","_map","put","removed","_lastRemovedEntry","leastUsedEntry","kCSSColorTable","clampCssByte","clampCssAngle","clampCssFloat","f","parseCssInt","charAt","parseFloat","parseCssFloat","cssHueToRgb","m1","m2","lerpNumber","setRgba","g","copyRgba","colorCache","lastRemovedArr","putToCache","colorStr","rgbaArr","parse","strLen","op","ep","fname","substr","alpha","pop","hsla2rgba","iv","hsla","rgba","rgba2hsla","H","S","R","G","vMin","vMax","L","deltaR","deltaG","deltaB","lift","color","level","colorArr","stringify","toHex","fastLerp","normalizedValue","colors","leftIndex","floor","rightIndex","ceil","leftColor","rightColor","dv","fastMapToColor","lerp$1","fullOutput","mapToColor","modifyHSL","modifyAlpha","arrColor","lum","backgroundLum","random","mathRound","normalizeColor","opacity","EPSILON$1","isAroundZero$1","transform","round3","round4","getMatrixStr","TEXT_ALIGN_TO_ANCHOR","middle","adjustTextY","lineHeight","textBaseline","hasShadow","shadowBlur","shadowOffsetX","shadowOffsetY","getShadowKey","globalScale","getGlobalScale","shadowColor","toFixed","isImagePattern","isSVGPattern","svgElement","isPattern","isLinearGradient","isRadialGradient","isGradient","getIdURL","id","getPathPrecision","getSRTTransformString","rotation","scaleX","scaleY","skewX","skewY","encodeBase64","unescape","Buffer","arraySlice","interpolateNumber","interpolate1DArray","interpolate2DArray","len2","add1DArray","add2DArray","fillColorStops","val0","val1","len0","len1","shorterArr","shorterLen","last","fillArray","arrDim","arr0","arr1","arr0Len","arr1Len","isPreviousLarger","cloneValue","ret","rgba2String","guessArrayDim","VALUE_TYPE_NUMBER","VALUE_TYPE_1D_ARRAY","VALUE_TYPE_2D_ARRAY","VALUE_TYPE_COLOR","VALUE_TYPE_LINEAR_GRADIENT","VALUE_TYPE_RADIAL_GRADIENT","VALUE_TYPE_UNKOWN","isGradientValueType","valType","isArrayValueType","tmpRgba","Track","propName","keyframes","discrete","_invalid","_needsSort","_lastFr","_lastFrP","isFinished","_finished","setFinished","_additiveTrack","needsAnimate","getAdditiveTrack","addKeyframe","time","rawValue","arrayDim","colorArray","parsedGradient","colorStop","kf","prepare","maxTime","additiveTrack","kfs","kfsLen","lastKf","isDiscrete","isGradient$$1","lastValue","startValue","additiveValue","frameIdx","frame","nextFrame","isAdditive","valueKey","kfsNum","isValueColor","lastFrame","mathMin","w","targetArr","_additiveValue","nextVal_1","isLinearGradient_1","nextColorStop","_addToTarget","Animator","allowDiscreteAnimation","additiveTo","_tracks","_trackKeys","_maxTime","_started","_clip","_target","_loop","_additiveAnimators","_allowDiscrete","getMaxTime","getDelay","getLoop","getTarget","changeTarget","when","props","whenWithKeys","propNames","track","initialValue","_getAdditiveTrack","addtiveTrackKfs","lastFinalKf","isPaused","duration","_force","_doneCallback","_setTracksFinished","doneList","_doneCbs","_abortedCallback","animation","abortedList","_abortedCbs","removeClip","tracksKeys","trackName","additiveAnimators","getTrack","clip","stillHasAdditiveAnimator","onframeList","_onframeCbs","addClip","forwardToLast","during","done","aborted","getClip","getTracks","stopTracks","allAborted","saveTo","trackKeys","firstOrLast","__changeFinalValue","finalProps","getTime","Animation","_running","_time","_pauseStart","_head","_tail","addAnimator","animator","removeAnimator","notTriggerFrameAndStageUpdate","nextClip","finished","_startLoop","animate","options","TOUCH_CLICK_DELAY","globalEventSupported","localNativeListenerNames","mouseHandlerNames","touchHandlerNames","pointerEventNameMap","pointerdown","pointerup","pointermove","pointerout","pointerHandlerNames","nm","mouse","pointer","globalNativeListenerNames","wheelEventSupported","isPointerFromTouch","pointerType","setTouchTimer","scope","touching","touchTimer","clearTimeout","markTouch","normalizeGlobalEvent","instance","FakeGlobalEvent","isLocalEl","elTmp","isLocal","domBelongToZr","parentNode","stopImmediatePropagation","currentTarget","localDOMHandlers","mousedown","__mayPointerCapture","downPoint","__togglePointerCapture","mouseup","element","toElement","relatedTarget","__pointerCapturing","wheel","mousewheel","touchstart","__lastTouchMoment","touchmove","touchend","click","globalDOMHandlers","pointerCaptureReleasing","mountLocalDOMEventListeners","domHandlers","nativeEventName","mountSingleDOMEventListener","mountGlobalDOMEventListeners","mount","nativeEventListener","capture","listener","mounted","listenerOpts","domTarget","unmountDOMEventListeners","DOMHandlerScope","HandlerDomProxy","_localHandlerScope","_globalHandlerScope","isPointerCapturing","globalHandlerScope","dpr","devicePixelRatio","screen","deviceXDPI","logicalXDPI","DARK_MODE_THRESHOLD","DARK_LABEL_COLOR","LIGHT_LABEL_COLOR","LIGHTER_LABEL_COLOR","create$1","identity","copy$1","mul$1","out0","out1","out2","out3","out4","out5","translate","rotate","rad","aa","ac","atx","ab","ad","aty","st","ct","scale$1","vx","vy","invert","clone$2","matrix","mIdentity","EPSILON$2","isNotAroundZero$1","scaleTmp","tmpTransform","originTransform","Transformable","getLocalTransform","setPosition","setScale","setSkew","setOrigin","originX","originY","needLocalTransform","parentTransform","_resolveGlobalScaleRatio","globalScaleRatio","relX","relY","sx","sy","invTransform","getComputedTransform","transformNode","ancestors","setLocalTransform","atan2","shearX","decomposeTransform","ox","oy","transformCoordToLocal","transformCoordToGlobal","getLineScale","copyTransform","ax","anchorX","ay","anchorY","tan","initDefaultProps","TRANSFORMABLE_PROPS","Point","other","equal","scalar","toArray","fromArray","input","mathMax","lt","rb","lb","rt","minTv","maxTv","BoundingRect","height","union","calculateTransform","intersect","mtv","ax0","ax1","ay0","ay1","bx0","bx1","by0","by1","overlap","dMin","dMax","d0","d3","plain","isZero","tx","ty","maxX","maxY","textWidthCache","cacheOfFont","innerGetBoundingRect","textAlign","getLineHeight","adjustTextX","adjustTextY$1","getBoundingRect","textLines","uniondRect","verticalAlign","parsePercent","maxValue","lastIndexOf","calculateTextPosition","textPosition","position","halfHeight","textVerticalAlign","align","PRESERVED_NORMAL_STATE","PRIMARY_STATES_KEYS","DEFAULT_ANIMATABLE_MAP","tmpTextPosCalcRes","tmpBoundingRect","Element","animators","currentStates","states","_init","attr","markRedraw","updateInnerText","forceUpdate","_textContent","textConfig","local","innerTransformable","textStyleChanged","innerOrigin","layoutRect","textOrigin","origin","relOriginX","relOriginY","textOffset","isInside","inside","innerTextDefaultStyle","_innerTextDefaultStyle","textFill","textStroke","autoStroke","canBeInsideText","insideFill","insideStroke","getInsideTextFill","getInsideTextStroke","outsideFill","outsideStroke","getOutsideFill","getOutsideStroke","fill","stroke","setDefaultTextStyle","dirtyStyle","isDarkMode","backgroundColor","getBackgroundColor","isDark","attrKV","setTextConfig","setTextContent","setClipPath","extra","hide","show","keyOrObj","saveCurrentToNormalState","toState","_innerSaveToNormal","normalState","_normalState","fromStateTransition","__fromStateTransition","targetName","_savePrimaryToNormal","primaryKeys","hasState","getState","ensureState","clearStates","noAnimation","useState","stateName","keepCurrentStates","forceUseHoverLayer","toNormalState","hasStates","animationCfg","stateTransition","stateProxy","useHoverLayer","hoverLayer","_toggleHoverLayerFlag","_applyStateObj","__inHover","textContent","_textGuide","_updateAnimationTargets","useStates","stateObjects","notChange","stateObj","lastStateObj","mergedState","_mergeStates","removeState","replaceState","oldState","newState","forceAdd","newStateExists","toggleState","enable","mergedTextConfig","transition","needsRestoreToNormal","transitionTarget","hasTransition","propNeedsTransition","_transitionState","_attachComponent","componentEl","zr","addSelfToZr","_detachComponent","removeSelfFromZr","_clipPath","removeClipPath","previousTextContent","removeTextContent","cfg","removeTextConfig","setTextGuideLine","guideLine","removeTextGuideLine","refreshHover","refresh","dirty","inHover","updateDuringAnimation","wakeUp","stopAnimation","leftAnimators","animateTo","animationProps","animateFrom","getPaintRect","elProto","isGroup","logs","logDeprecatedError","xKey","yKey","createLegacyProperty","privateKey","enhanceArray","defineProperty","animatable","reverse","animateToShallow","finishCount","doneHappened","cfgDone","cfgAborted","doneCb","abortedCb","copyArrShallow","is2DArray","copyValue","sourceArr","isValueSame","val2","is1DArraySame","topKey","animateObj","targetKeys","additive","setToFinal","animateAll","existsAnimators","animationKeys","innerKey","targetVal","keyLen","revertedSource","reversedTarget","sourceClone","Group","_children","childAt","childOfName","childCount","_doAdd","addBefore","nextSibling","oldChild","newChild","replaceAt","index","old","removeAll","eachChild","stopped","includeChildren","tmpRect","tmpMat","invisible","childRect","painterCtors","instances$1","delInstance","totalLum","ZRender","_sleepAfterStill","_stillFrameAccum","_needsRefresh","_needsRefreshHover","_darkMode","rendererType","renderer","useDirtyRect","ssrMode","ssr","ssrOnly","handerProxy","getViewportRoot","_flush","configLayer","zLevel","config","setBackgroundColor","_backgroundColor","setDarkMode","darkMode","refreshImmediately","fromInside","flush","triggerRendered","refreshHoverImmediately","end","setSleepAfterStill","stillFramesCount","getType","clearAnimation","eventHandler","init$1","dispose$1","disposeAll","getInstance","registerPainter","version$1","zrender","init","RADIAN_EPSILON","ROUND_SUPPORTED_PRECISION_MAX","_trim","linearMap","domain","range","clamp","r0","r1","subDomain","subRange","parsePercent$1","all","NaN","precision","returnStr","asc","getPrecision","getPrecisionSafe","eIndex","exp","significandPartLen","dotIndex","decimalPartLen","getPixelPrecision","dataExtent","pixelExtent","LN10","dataQuantity","sizeQuantity","getPercentWithPrecision","valueList","acc","digits","votesPerQuota","targetSeats","seats","votes","currentSum","Number","NEGATIVE_INFINITY","maxId","addSafe","maxPrecision","MAX_SAFE_INTEGER","remRadian","radian","pi2","isRadianAroundZero","TIME_REG","parseDate","hour","UTC","substring","quantity","quantityExponent","nice","nf","exponent","exp10","quantile","ascArr","reformIntervals","littleThan","curr","currClose","close_1","close","lg","numericToNumber","valFloat","isNumeric","getRandomIdBase","getGreatestCommonDividor","getLeastCommonMultiple","ECHARTS_PREFIX","storedLogs","hasConsole","outputLog","onlyOnce","deprecateLog","deprecateReplaceLog","oldOpt","newOpt","makePrintable","hintInfo","msg","makePrintableStringIfPossible_1","toISOString","arg","printableStr","err","throwError","interpolateNumber$1","DUMMY_COMPONENT_NAME_PREFIX","INTERNAL_COMPONENT_ID_PREFIX","normalizeToArray","defaultEmphasis","subOpts","emphasis","subOptName","TEXT_STYLE_OPTIONS","getDataItemValue","dataItem","isDataItemOption","mappingToExists","existings","newCmptOptions","isNormalMergeMode","isReplaceMergeMode","isReplaceAllMode","existingIdIdxMap","cmptOption","isValidIdOrName","warnInvalidateIdOrName","prepareResult","mappingById","mappingByName","mappingByIndex","mappingInReplaceAllMode","makeIdAndName","existing","isComponentIdInternal","newOption","keyInfo","brandNew","optionId","makeComparableKey","existingIdx","resultItem","keyExistAndEqual","nextIdx","mapResult","idMap","item","idNum","obj1","obj2","key1","convertOptionIdName","key2","idOrName","defaultValue","isNameSpecified","componentModel","makeInternalComponentId","idSuffix","setComponentTypeToKeyInfo","mappingResult","mainType","componentModelCtor","subType","determineSubType","newCmptOption","existComponent","queryDataIndex","payload","dataIndexInside","dataIndex","indexOfRawIndex","indexOfName","makeInner","innerUniqueIndex","hostObj","parseFinder","ecModel","finderInput","_a","preParseFinder","mainTypeSpecified","queryOptionMap","others","defaultMainType","queryOption","queryResult","queryReferringComponents","useDefault","enableAll","enableNone","models","finder","parsedKey","queryType","includeMainTypes","SINGLE_REFERRING","MULTIPLE_REFERRING","userOption","indexOption","idOption","nameOption","specified","firstCmpt","getComponent","queryComponents","setAttribute","getAttribute","getTooltipRenderMode","renderModeOption","interpolateRawValues","sourceValue","targetValue","isAutoPrecision","interpolated","leftArr","rightArr","length_1","info","getDimensionInfo","leftVal","rightVal","TYPE_DELIMITER","IS_CONTAINER","IS_EXTENDED_CLASS","parseClassType","componentType","main","typeArr","checkClassType","isExtendedClass","clz","enableClassExtend","rootClz","mandatoryMethods","$constructor","method","ExtendedClass","isESClass","class_1","superCall","superApply","fn","Function","mountExtend","SubClz","SupperClz","classBase","enableClassCheck","classAttr","isInstance","methodName","enableClassManagement","makeContainer","componentTypeInfo","container","registerClass","componentFullType","getClass","throwWhenNotFound","getClassesByMainType","o","hasClass","getAllClassMainTypes","types","hasSubTypes","makeStyleMapper","ignoreParent","model","excludes","includes","getShallow","AREA_STYLE_KEY_MAP","getAreaStyle","AreaStyleMixin","globalImageCache","findExistImage","newImageOrSrc","cachedImgObj","createOrUpdateImage","cbPayload","__zrImageSrc","pendingWrap","isImageReady","pending","imageOnLoad","__cachedImgObj","STYLE_REG","truncateText","containerWidth","ellipsis","prepareTruncateOptions","truncateSingleLine","preparedOpts","maxIterations","minChar","cnCharWidth","ascCharWidth","placeholder","contentWidth","ellipsisWidth","textLine","lineWidth","subLength","estimateLength","charCode","parsePlainText","lines","overflow","padding","truncate","calculatedLineHeight","bgColorDrawn","truncateLineOverflow","lineOverflow","wrapText","contentHeight","lineCount","truncateMinChar","outerHeight","outerWidth","RichTextToken","RichTextLine","tokens","RichTextContentBlock","parseRichText","contentBlock","topWidth","topHeight","wrapInfo","accumWidth","breakAll","matchedIndex","pushTokens","pendingList","calculatedHeight","calculatedWidth","stlPadding","truncateLine","finishLine","line","outer","tokenStyle","styleName","rich","textPadding","paddingH","tokenHeight","innerHeight","styleTokenWidth","tokenWidthNotSpecified","percentWidth","textBackgroundColor","bgImg","remainTruncWidth","block","strLines","linesWidths","isEmptyStr","newLine","tokenPadding","tokenPaddingH","outerWidth_1","isLineHolder","tokensLen","isLatin","ch","code","breakCharMap","isWordBreakChar","isBreakAll","lastAccumWidth","currentWord","currentWordWidth","chWidth","inWord","STYLE_MAGIC_KEY","DEFAULT_COMMON_STYLE","blend","DEFAULT_COMMON_ANIMATION_PROPS","PRIMARY_STATES_KEYS$1","PRIMARY_STATES_KEYS_IN_HOVER_LAYER","Displayable","useStyle","beforeBrush","afterBrush","innerBeforeBrush","innerAfterBrush","shouldBePainted","viewWidth","viewHeight","considerClipPath","considerAncestors","culling","isDisplayableCulled","isZeroArea","parent_1","rectContain","coord","_paintRect","elRect","shadowSize","tolerance","dirtyRectTolerance","setPrevPaintRect","paintRect","_prevPaintRect","getPrevPaintRect","animateStyle","targetKey","setStyle","notRedraw","_rect","styleChanged","styleUpdated","createStyle","__hoverStyle","isStyleObject","_mergeStyle","targetStyle","sourceStyle","changedKeys","getAnimationStyleProps","statesKeys","mergedStyle","dispProto","incremental","viewRect","mathMin$2","mathMax$2","mathSin$1","mathCos$1","PI2$1","extremity","fromLine","min$$1","max$$1","xDim","yDim","fromCubic","cubicExtrema$$1","cubicAt$$1","fromQuadratic","quadraticExtremum$$1","quadraticAt$$1","fromArc","rx","ry","startAngle","endAngle","anticlockwise","vec2Min","vec2Max","diff","angle","CMD","M","Q","Z","tmpOutX","tmpOutY","min$1","max$1","min2","max2","mathMin$1","mathMax$1","mathCos","mathSin","mathAbs","PI2","hasTypedArray","Float32Array","tmpAngles","modPI2","normalizeArcAngles","angles","newStartAngle","newEndAngle","PathProxy","notSaveData","_xi","_yi","_x0","_y0","_saveData","increaseVersion","_version","getVersion","segmentIgnoreThreshold","_ux","_uy","setDPR","setContext","beginPath","reset","_pathSegLen","_pathLen","moveTo","_drawPendingPt","addData","lineTo","exceedUnit","_pendingPtDist","_pendingPtX","_pendingPtY","bezierCurveTo","quadraticCurveTo","arc","cx","cy","arcTo","radius","closePath","toStatic","setData","len$$1","appendPath","appendSize","appendPathData","cmd","_expandData","newData","MAX_VALUE","xi","yi","isFirst","_calculateLength","ux","uy","pathSegLen","pathTotalLen","segCount","rebuildPath","displayedLength","pendingPtX","pendingPtY","drawPart","accumLength","pendingPtDist","psi","isEllipse","breakBuild","ellipse","newProxy","containStroke$1","_l","_b","_s","containStroke$2","containStroke$3","PI2$4","normalizeRadian","PI2$3","containStroke$4","windingLine","dir","x_","CMD$1","PI2$2","EPSILON$3","isAroundEqual","swapExtrema","windingCubic","nRoots","nExtrema","y0_","y1_","unit","windingQuadratic","y_","windingArc","dTheta","tmp_1","containPath","isStroke","pathProxy","containStroke","DEFAULT_PATH_STYLE","strokePercent","fillOpacity","strokeOpacity","lineDashOffset","lineCap","miterLimit","strokeNoScale","strokeFirst","DEFAULT_PATH_ANIMATION_PROPS","pathCopyParams","Path","decal","_decalEl","buildPath","shape","decalElStyle","getDefaultShape","defaultStyle","getDefaultStyle","hasFill","pathFill","fillLum","isDarkLabel","shapeCfg","inBatch","pathUpdated","getUpdatedPathProxy","createPathProxy","hasStroke","needsUpdateRect","firstInvoke","rectStroke","_rectStroke","lineScale","strokeContainThreshold","localPos","dirtyShape","animateShape","setShape","shapeChanged","targetShape","targetShapePrimaryProps","shapeKeys","mergedShape","defaultProps","Sub","pathProto","subPixelOptimize","autoBatch","DEFAULT_TSPAN_STYLE","TSpan","setBoundingRect","tspanProto","DEFAULT_IMAGE_STYLE","DEFAULT_IMAGE_ANIMATION_PROPS","sWidth","sHeight","isImageLike","ZRImage","_getSize","dim","imageSource","__image","otherDim","otherDimSize","r2","r3","r4","total","round$1","subPixelOptimizeLine","outputShape","inputShape","subPixelOptimizeRect","originWidth","originHeight","positiveOrNegative","doubledPosition","RectShape","subPixelOptimizeOutputShape","Rect","optimizedShape","DEFAULT_RICH_TEXT_COLOR","DEFAULT_STROKE_LINE_WIDTH","DEFAULT_TEXT_ANIMATION_PROPS","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","borderColor","borderWidth","borderRadius","ZRText","_defaultStyle","_updateSubTexts","_childCursor","normalizeTextStyle","_updateRichTexts","_updatePlainTexts","defaultTextStyle","sourceRich","targetRich","_mergeRich","richNames","richName","_getOrCreateChild","textFont","getStyleText","needDrawBg","needDrawBackground","baseX","baseY","textX","textY","boxX","boxY","_renderBackground","getTextXForPadding","defaultLineWidth","useDefaultFill","getFill","getStroke","fixedBoundingRect","subElStyle","lineDash","setSeparateFont","xLeft","lineTop","xRight","tokenCount","remainedWidth","lineXLeft","lineXRight","_placeToken","parentBgColorDrawn","textWidth","textHeight","topStyle","rectEl","imgEl","textBorderWidth","textBorderColor","isImageBg","isPlainOrGradientBg","textBorderRadius","rectShape","rectStyle","imgStyle","borderDash","borderDashOffset","commonStyle","makeFont","hasSeparateFont","fontStyle","fontWeight","parseFontSize","fontFamily","VALID_TEXT_ALIGN","VALID_TEXT_VERTICAL_ALIGN","bottom","FONT_PARTS","fontProp","normalizeStyle","getECData","setCommonECData","seriesIndex","dataType","dataIdx","ecData","childECData","_highlightNextDigit","_highlightKeyMap","getSavedStates","getComponentStates","HOVER_STATE_NORMAL","HOVER_STATE_BLUR","HOVER_STATE_EMPHASIS","SPECIAL_STATES","DISPLAY_STATES","Z2_EMPHASIS_LIFT","Z2_SELECT_LIFT","HIGHLIGHT_ACTION_TYPE","DOWNPLAY_ACTION_TYPE","SELECT_ACTION_TYPE","UNSELECT_ACTION_TYPE","TOGGLE_SELECT_ACTION_TYPE","hasFillOrStroke","fillOrStroke","liftedColorCache","liftColor","liftedColor","doChangeHoverState","hoverStateEnum","onHoverStateChange","hoverState","singleEnterEmphasis","singleLeaveEmphasis","singleEnterBlur","singleLeaveBlur","singleEnterSelect","selected","singleLeaveSelect","updateElementState","updater","commonParam","traverseUpdateState","setStatesFlag","getFromStateStyle","toStateName","fromState","createEmphasisDefaultState","targetStates","hasSelect","cloned","fromFill","selectFill","normalFill","fromStroke","selectStroke","normalStroke","emphasisStyle","z2EmphasisLift","createSelectDefaultState","z2SelectLift","createBlurDefaultState","hasBlur","currentOpacity","blurStyle","elementStateProxy","setDefaultStateProxy","enterEmphasisWhenMouseOver","shouldSilent","__highByOuter","leaveEmphasisWhenMouseOut","enterEmphasis","highlightDigit","leaveEmphasis","enterBlur","leaveBlur","enterSelect","leaveSelect","__highDownSilentOnTouch","allLeaveBlur","api","getModel","leaveBlurredSeries","allComponentViews","eachComponent","componentStates","isSeries","view","getViewOfSeriesModel","getViewOfComponentModel","isBlured","group","toggleBlurSeries","blurSeries","targetSeriesIndex","focus","blurScope","leaveBlurOfIndices","dataIndices","itemEl","getItemGraphicEl","targetSeriesModel","getSeriesByIndex","targetCoordSys","coordinateSystem","master","blurredSeries","eachSeries","seriesModel","sameSeries","coordSys","sameCoordSys","getData","dataTypes","blurComponent","componentMainType","componentIndex","focusBlurEnabled","blurSeriesFromHighlightPayload","count","current","focus_1","findComponentHighDownDispatchers","focusSelf","dispatchers","findHighDownDispatchers","isHighDownDispatcher","handleGlobalMouseOverForHighDown","dispatcher","componentHighDownName","handleGlobalMouseOutForHighDown","toggleSelectionFromPayload","isSelectChangePayload","updateSeriesElementSelection","allData","getAllData","eachItemGraphicEl","isSelected","getAllSelectedIndices","getSelectedDataIndices","enableHoverEmphasis","setAsHighDownDispatcher","enableHoverFocus","disableHoverEmphasis","toggleHoverEmphasis","isDisabled","OTHER_STATES","defaultStyleGetterMap","itemStyle","lineStyle","areaStyle","setStatesStylesFromModel","itemModel","styleType","getter","asDispatcher","disable","extendedEl","highDownSilentOnTouch","__highDownDispatcher","getHighlightDigit","highlightKey","payloadType","isHighDownPayload","savePathStates","selectState","select","CMD$2","mathSqrt$2","mathAtan2","transformPath","nPoint","p_1","mathSqrt$1","mathSin$2","mathCos$2","PI$1","vMag","vRatio","u","vAngle","processArc","fa","fs","psiDeg","xp","yp","lambda","cxp","cyp","commandReg","numberReg","createPathProxyFromString","prevCmd","cpx","cpy","subpathX","subpathY","cmdList","cmdText","cmdStr","pLen","ctlPtx","ctlPty","pathData","SVGPath","isPathProxy","createPathOptions","innerOpts","createFromString","extendFromString","defaultOpts","mergePath$1","pathEls","pathList","pathEl","pathBundle","CircleShape","Circle","EllipseShape","Ellipse","PI$2","PI2$5","mathSin$3","mathCos$3","mathACos","mathATan2","mathAbs$1","mathSqrt$3","mathMax$4","mathMin$4","dx10","dy10","dx32","dy32","computeCornerTangents","cr","clockwise","x01","y01","x11","y11","x10","y10","x00","y00","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","normalizeCornerRadius","buildPath$1","innerRadius","hasRadius","hasInnerRadius","mod","icrStart","icrEnd","ocrStart","ocrEnd","ocrs","ocre","icrs","icre","ocrMax","icrMax","limitedOcrMax","limitedIcrMax","xre","yre","xirs","yirs","xrs","yrs","xire","yire","hasArc","cornerRadius","halfRd","it_1","crStart","crEnd","ct0","ct1","SectorShape","Sector","RingShape","Ring","smoothBezier","smooth","isLoop","constraint","prevPoint","nextPoint","cps","point","cp0","cp1","shift","buildPath$2","controlPoints","smoothConstraint","cp2","PolygonShape","Polygon","PolylineShape","Polyline","subPixelOptimizeOutputShape$1","LineShape","Line","pointAt","BezierCurveShape","cpx1","cpy1","someVectorAt","isTangent","cpx2","cpy2","BezierCurve","tangentAt","ArcShape","Arc","unitX","unitY","CompoundPath","_updatePathDirty","paths","dirtyPath","Gradient","addColorStop","LinearGradient","globalCoord","RadialGradient","extent","extent2","minTv$1","maxTv$1","OrientedBoundingRect","_corners","_axes","_origin","fromBoundingRect","corners","axes","overlapped","noMtv","_intersectCheckOneSide","axis","_getProjMinMaxOnAxis","dist0","dist1","proj","proj_1","IncrementalDisplayable","notClear","_displayables","_temporaryDisplayables","_cursor","getCursor","clearDisplaybles","clearTemporalDisplayables","addDisplayable","notPersistent","addDisplayables","displayables","getDisplayables","getTemporalDisplayables","eachPendingDisplayable","transitionStore","getAnimationConfig","animationType","animatableModel","extraOpts","extraDelayParams","animationPayload","updatePayload","getUpdatePayload","animationEnabled","isAnimationEnabled","isUpdate","animateOrSetProps","removeOpt","isFrom","isRemove","animationConfig","getAnimationDelayParams","animationDelay","animationEasing","animateConfig","updateProps","initProps","isElementRemoved","removeElement","fadeOutDisplayable","removeElementWithFadeOut","doRemove","saveOldStyle","oldStyle","mathMax$3","mathMin$3","_customShapeMap","extendShape","extendPathFromString","extendPath","registerShape","ShapeClass","getShapeClass","makePath","layout","centerGraphic","resizePath","makeImage","imageUrl","zrImg","img","boundingRect","aspect","mergePath","pathRect","subPixelOptimizeLine$1","param","subPixelOptimizeRect$1","subPixelOptimize$1","getTransform","ancestor","mat","applyTransform$1","invert$$1","transformDirection","direction","hBase","vBase","vertex","isNotGroup","isPath","groupTransition","g1","g2","elMap1","getElMap","anid","oldEl","newProp","getAnimatableProps","elMap","clipPointsByRect","clipRectByRect","targetRect","createIcon","iconStr","linePolygonIntersect","a1x","a1y","a2x","a2y","lineLineIntersect","b1x","b1y","b2x","b2y","mx","my","nx","ny","nmCrossProduct","crossProduct2d","nearZero","b1a1x","b1a1y","q","setTooltipConfig","itemTooltipOption","itemName","itemTooltipOptionObj","formatter","formatterParams","$vars","formatterParamsExtra","tooltipConfig","option","content","traverseElement","traverseElements","els","graphic","Text","EMPTY_OBJ","setLabelText","label","labelTexts","oldStates","normal","getLabelText","stateModels","interpolatedValue","baseText","labelFetcher","labelDataIndex","labelDimIndex","normalModel","getFormattedLabel","defaultText","statesText","stateModel","setLabelStyle","targetEl","labelStatesModels","stateSpecified","isSetOnText","needsCreateText","labelStatesTexts","showNormal","normalStyle","createTextStyle","createTextConfig","stateShow","targetElEmphasisState","enableTextSetter","labelInner","getLabelStatesModels","labelName","statesModels","textStyleModel","specifiedTextStyle","isNotNormal","isAttached","textStyle","setTextStyleCommon","labelPosition","labelRotate","labelDistance","labelOffset","defaultOutsidePosition","inheritColor","richResult","globalTextStyle","richItemNames","getRichItemNames","name_1","richTextStyle","setTokenTextStyle","margin","richItemNameMap","richKeys","richKey","parentModel","TEXT_PROPS_WITH_GLOBAL","TEXT_PROPS_SELF","TEXT_PROPS_BOX","isBlock","inRich","fillColor","strokeColor","textBorderType","textBorderDashOffset","defaultOpacity","baseline","disableBox","borderType","getFont","gTextStyleModel","setLabelValueAnimation","getDefaultText","prevValue","normalLabelModel","valueAnimation","defaultInterpolatedText","animateLabelValue","labelInnerStore","currValue","labelText","PATH_COLOR","textStyleParams","tmpText","TextStyleMixin","getTextColor","isEmphasis","getTextRect","LINE_STYLE_KEY_MAP","getLineStyle","LineStyleMixin","ITEM_STYLE_KEY_MAP","getItemStyle","ItemStyleMixin","Model","rest","mergeOption","_doGet","parsePath","hasPath","pathFinal","resolveParentPath","isEmpty","restoreData","pathArr","getUID","enableSubTypeDefaulter","subTypeDefaulters","registerSubTypeDefaulter","defaulter","componentTypeMain","enableTopologicalTravel","entity","dependencyGetter","makeDepndencyGraph","fullNameList","graph","noEntryList","thisItem","createDependencyGraphItem","originalDeps","availableDeps","getAvailableDependencies","entryCount","dependentName","predecessor","thatItem","successor","dep","topologicalTravel","targetNameList","callback","targetNameSet","currComponentType","currVertex","isInTargetNameSet","removeEdgeAndAdd","removeEdge","errMsg","succComponentType","inheritDefaultOption","superOption","subOption","langEN","month","monthAbbr","dayOfWeek","dayOfWeekAbbr","legend","selector","toolbox","brush","polygon","lineX","lineY","keep","dataView","lang","dataZoom","zoom","back","magicType","bar","stack","tiled","restore","saveAsImage","series","typeNames","pie","scatter","effectScatter","radar","tree","treemap","boxplot","candlestick","heatmap","parallel","sankey","funnel","gauge","pictorialBar","themeRiver","sunburst","aria","general","withTitle","withoutTitle","single","prefix","withName","withoutName","multiple","separator","partialData","langZH","LOCALE_ZH","LOCALE_EN","DEFAULT_LOCALE","localeStorage","localeModels","SYSTEM_LANG","langStr","language","browserLanguage","registerLocale","locale","localeObj","createLocaleObject","getLocaleModel","getDefaultLocaleModel","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_DAY","ONE_YEAR","defaultLeveledFormatter","year","day","minute","second","millisecond","none","fullDayFormatter","fullLeveledFormatter","primaryTimeUnits","timeUnits","pad","getPrimaryTimeUnit","timeUnit","isPrimaryTimeUnit","getDefaultFormatPrecisionOfInterval","format","template","isUTC","date","fullYearGetterName","monthGetterName","dateGetterName","hoursGetterName","minutesGetterName","secondsGetterName","millisecondsGetterName","localeModel","timeModel","leveledFormat","tick","defaults$$1","mergedFormatter","inherit","getUnitFromValue","targetId","levelId","isSecond","isMinute","isHour","isDay","isMonth","isYear","getUnitValue","fullYearSetterName","monthSetterName","dateSetterName","hoursSetterName","minutesSetterName","secondsSetterName","millisecondsSetterName","addCommas","parts","toCamelCase","upperCaseFirst","group1","normalizeCssArray$1","replaceReg","replaceMap","encodeHTML","makeValueReadable","valueType","useUTC","USER_READABLE_DEFUALT_TIME_PATTERN","stringToUserReadable","isNumberUserReadable","num","isTypeTime","isValueDate","numericResult","TPL_VAR_ALIAS","wrapVar","varName","seriesIdx","formatTpl","tpl","paramsList","seriesLen","alias","getTooltipMarker","inOpt","extraCssText","renderMode","markerId","formatTime","getUTC","capitalFirst","convertToColorString","defaultColor","windowOpen","link","blank","open","opener","location","href","each$1","LOCATION_PARAMS","HV_NAMES","boxLayout","orient","gap","maxWidth","maxHeight","currentLineMaxSize","nextX","nextY","nextChild","nextChildRect","moveX","newline","moveY","getLayoutRect","positionInfo","containerRect","containerHeight","verticalMargin","horizontalMargin","positionElement","hv","boundingMode","fetchLayoutMode","ins","layoutMode","mergeLayoutParam","targetOption","ignoreSize","hResult","merge$$1","vResult","names","hvIdx","newParams","newValueCount","merged","mergedValueCount","enoughParamNumber","hasProp","hasValue","getLayoutParams","copyLayoutParams","inner","ComponentModel","uid","mergeDefaultAndTheme","inputPositionParams","themeModel","getTheme","getDefaultOption","optionUpdated","newCptOption","isInit","ctor","defaultOption","fields","optList","getReferringComponents","indexKey","idKey","getBoxLayoutParams","boxLayoutModel","getZLevelKey","setZLevel","protoInitialize","getDependencies","deps","dependencies","unshift","platform","decalColor","globalDefault","colorBy","gradientColor","decals","dashArrayX","dashArrayY","symbolSize","symbol","blendMode","stateAnimation","animationDuration","animationDurationUpdate","animationEasingUpdate","animationThreshold","progressiveThreshold","progressive","hoverLayerThreshold","VISUAL_DIMENSIONS","SOURCE_FORMAT_ORIGINAL","SOURCE_FORMAT_ARRAY_ROWS","SOURCE_FORMAT_OBJECT_ROWS","SOURCE_FORMAT_KEYED_COLUMNS","SOURCE_FORMAT_TYPED_ARRAY","SOURCE_FORMAT_UNKNOWN","SERIES_LAYOUT_BY_COLUMN","SERIES_LAYOUT_BY_ROW","BE_ORDINAL","Must","Might","Not","innerGlobalModel","resetSourceDefaulter","datasetMap","makeSeriesEncodeForAxisCoordSys","coordDimensions","datasetModel","querySeriesUpstreamDatasetModel","baseCategoryDimIndex","categoryWayValueDimStart","encodeItemName","encodeSeriesName","seriesLayoutBy","coordDimInfoLoose","coordDimIdx","coordDimInfo","getDataDimCountOnCoordDim","datasetRecord","categoryWayDim","valueWayDim","pushDim","dimIdxArr","idxFrom","idxCount","dimsDef","coordDimName","seriesName","makeSeriesEncodeForNameBased","dimCount","potentialNameDimIndex","sourceFormat","dimensionsDefine","idxResult","idxRes0","idxRes1","guessRecords","guessResult","doGuessOrdinal","startIndex","isPureNumber","fulfilled","nameDimIndex","thisData","queryDatasetUpstreamDatasetModels","guessOrdinal","dimIndex","dimName","dimType","maxLoop","dimDefItem","dataArrayRows","sample","detectValue","row","dataObjectRows","dataKeyedColumns","dataOriginal","beStr","internalOptionCreatorMap","registerInternalOptionCreator","creator","concatInternalOptions","newCmptOptionList","internalOptionCreator","internalOptions","reCreateSeriesIndices","assertSeriesInitialized","initBase","innerColor","PaletteMixin","getColorFromPalette","requestNum","defaultPalette","layeredPalette","getFromPalette","clearColorPalette","clearPalette","getNearestPalette","palettes","requestColorNum","paletteNum","that","scopeFields","paletteIdx","paletteNameMap","palette","pickedPaletteItem","OPTION_INNER_KEY","OPTION_INNER_VALUE","BUITIN_COMPONENTS_MAP","grid","polar","geo","singleAxis","calendar","tooltip","axisPointer","timeline","markPoint","markLine","markArea","visualMap","xAxis","yAxis","angleAxis","radiusAxis","BUILTIN_CHARTS_MAP","custom","componetsMissingLogPrinted","checkMissingComponents","componentOption","componentImportName","GlobalModel","theme","optionManager","_theme","_locale","_optionManager","setOption","optionPreprocessorFuncs","innerOpt","normalizeSetOptionInput","_resetOption","resetOption","optionChanged","baseOption","mountOption","_mergeOption","timelineOption","getTimelineOption","mediaOptions","getMediaOption","mediaOption","componentsMap","_componentsMap","componentsCount","_componentsCount","newCmptTypes","newCmptTypeMap","replaceMergeMainTypeMap","visitComponent","oldCmptList","mergeMode","tooltipExists","tooltipWarningLogged","optionsByMainType","cmptsByMainType","cmptsCountByMainType","isSeriesType","ComponentModelClass","seriesImportName","extraOpt","__requireNewView","mainTypeInReplaceMerge","_seriesIndices","getOption","optInMainType","realLen","metNonInner","setUpdatePayload","_payload","cmpt","cmpts","queryByIdOrName","filterBySubType","findComponents","queryCond","getQueryCond","doFilter","indexAttr","idAttr","nameAttr","ctxForAll_1","cbForAll_1","getSeriesByName","nameStr","oneSeries","getSeriesByType","getSeries","getSeriesCount","rawSeriesIndex","eachRawSeries","eachSeriesByType","eachRawSeriesByType","isSeriesFiltered","_seriesIndicesMap","getCurrentSeriesIndices","filterSeries","newSeriesIndices","seriesRawIdx","componentTypes","components","isNotTargetSeries","internalField","seriesIndices","airaOption","enabled","mergeTheme","seriesId","notMergeColorLayer","colorLayer","themeItem","keyMap_1","idOrNameItem","idName","idName_1","replaceMerge","availableMethods","ExtensionAPI","ecInstance","coordinateSystemCreators","CoordinateSystemManager","_coordinateSystems","coordinateSystems","creater","getCoordinateSystems","QUERY_REG","OptionManager","_timelineOptions","_mediaList","_currentMediaIndices","_api","rawOption","dataset","optionBackup","_optionBackup","newParsedOption","parseRawOption","_newBaseOption","timelineOptions","mediaList","mediaDefault","isRecreate","_mediaDefault","timelineModel","getCurrentIndex","ecWidth","ecHeight","indices","applyMediaQuery","indicesEquals","isNew","declaredBaseOption","timelineOnRoot","timelineOptionsOnRoot","mediaOnRoot","media","hasMedia","hasTimeline","doPreprocess","preProcess","singleMedia","realMap","aspectratio","applicatable","matched","operator","realAttr","real","expect","indices1","indices2","each$2","isObject$1","POSSIBLE_STYLES","compatEC2ItemStyle","itemStyleOpt","normalItemStyleOpt","emphasisItemStyleOpt","convertNormalEmphasis","optType","useExtend","normalOpt","emphasisOpt","removeEC3NormalStatus","compatTextStyle","labelOptSingle","textPropName","compatEC3CommonStyles","processSeries","seriesOpt","nodes","edgeData","links","edges","categories","mpData","mlData","breadcrumb","levels","leaves","toArr","toObj","globalCompatStyle","isTheme","axisName","axisOpt","parallelOpt","parallelAxisDefault","calendarOpt","radarOpt","nameGap","axisNameGap","indicator","indicatorOpt","geoOpt","regions","regionObj","timelineOpt","toolboxOpt","feature","featureOpt","set$1","compatLayoutProperties","LAYOUT_PROPERTIES","COMPATITABLE_COMPONENTS","BAR_ITEM_STYLE_MAP","compatBarItemStyle","oldName","newName","compatPieLabel","alignTo","edgeDistance","compatSunburstState","downplay","blur","compatGraphFocus","focusNodeAdjacency","traverseTree","globalBackwardCompat","seriesType","clipOverflow","clockWise","hoverOffset","scaleSize","pointerColor","backgroundStyle","highlightPolicy","mapType","mapLocation","hoverAnimation","dataRange","componentName","dataStack","stackInfoMap","stackInfoList","stackInfo","stackResultDimension","getCalculationInfo","stackedOverDimension","stackedDimension","stackedByDimension","isStackedByIndex","setCalculationInfo","calculateStack","targetStackInfo","idxInStack","resultVal","resultNaN","dims","targetData","stackStrategy","modify","v0","byValue","stackedDataRawIndex","getRawIndex","stackedOver","rawIndexOf","getByRawIndex","providerMethods","mountMethods","SourceImpl","dimensionsDetectedCount","metaRawOption","isSourceInstance","createSource","sourceData","thisMetaRawOption","detectSourceFormat","determined","determineSourceDimensions","sourceHeader","dimensions","createSourceFromSeriesDataOption","cloneSourceShallow","normalizeDimensionsOption","arrayRowsTravelFirst","objectRowsCollectDimensions","colArr","firstIndex","dimensions_1","nameMap","rawItem","displayName","exist","shouldRetrieveDataByName","DefaultDataProvider","sourceParam","dimSize","_source","_data","_offset","_dimSize","getSource","getItem","appendData","clean","pure","persistent","provider","getMethodMapKey","getItemForTypedArray","countForTypedArray","fillStorage","fillStorageForTypedArray","rawItemGetter","getRawSourceItemGetter","rawCounter","getRawSourceDataCounter","dimExtent","appendDataSimply","newCol","oldCol","getItemSimply","rawData","rawSourceItemGetterMap","col","countSimply","rawSourceDataCounterMap","getRawValueSimply","property","rawSourceValueGetterMap","getRawSourceValueGetter","retrieveRawValue","getRawDataItem","getStore","getDimensionIndex","getDimensionProperty","DIMENSION_LABEL_REG","DataFormatMixin","getDataParams","getRawValue","rawDataIndex","getName","itemOpt","getItemVisual","userOutput","componentSubType","dimensionNames","fullDimensions","status","extendParams","getItemModel","dimensionIndex","dimStr","dimLoose","formatTooltip","multipleSeries","normalizeTooltipFormatResult","markupText","markupFragment","frag","createTask","define","Task","_reset","_plan","plan","_count","_onDirty","onDirty","_dirty","perform","performArgs","planResult","upTask","_upstream","skip","outputData","__pipeline","currentTask","forceFirstProgress","lastModBy","normalizeModBy","_modBy","lastModDataCount","_modDataCount","modBy","modDataCount","_doReset","_outputDueEnd","_dueEnd","_progress","_dueIndex","progress","_doProgress","outputDueEnd","_settedOutputEnd","unfinished","iterator","_callingProgress","downstream","_downstream","pipe","downTask","_disposed","getUpstream","getDownstream","setOutputEnd","winCount","it","sStep","sCount","modNext","sequentialNext","parseDataValue","ORDER_COMPARISON_OP_MAP","lval","rval","lte","gt","gte","SortOrderComparator","FilterOrderComparator","_opFn","_rvalFloat","evaluate","order","incomparable","isDesc","_resultLT","_incomparable","lvalFloat","rvalFloat","lvalNotNumeric","rvalNotNumeric","lvalIsStr","rvalIsStr","ExternalSource","FilterEqualityComparator","isEq","_rval","_isEQ","_rvalTypeof","eqResult","lvalTypeof","getRawData","cloneRawData","cloneAllDimensionInfo","retrieveValue","retrieveValueFromItem","convertValue","rawVal","dimInfo","createExternalSource","internalSource","externalTransform","extSource","sourceHeaderCount","dimsByName","dimDef","dimDefExt","errMsg_1","__isBuiltIn","rawValueGetter","upstream","isSupportedSourceFormat","externalTransformMap","registerExternalTransform","typeParsed","isBuiltIn","applyDataTransform","rawTransOption","sourceList","infoForPrint","pipedTransOption","pipeLen","transOption","applySingleDataTransform","upSourceList","pipeIndex","transType","extUpSourceList","upSource","resultList","upstreamList","print","printStrArr","pipeIndexStr","datasetIndex","resultIndex","resultMetaRawOption","firstUpSource","defaultDimValueGetters","UNDEFINED","CtorUint32Array","Uint32Array","CtorUint16Array","Uint16Array","CtorInt32Array","Int32Array","CtorFloat64Array","Float64Array","dataCtors","getIndicesCtor","rawCount","getInitialExtent","cloneChunk","originalChunk","prepareStore","dimIdx","append","DataCtor","oldStore","oldLen","newStore","DataStore","_chunks","_rawExtent","_extent","_rawCount","_calcDimNameToIdx","initData","inputDimensions","dimValueGetter","_provider","_indices","_getRawIdxIdentity","defaultGetter","defaultDimValueGetter","_dimValueGetter","willRetrieveDataByName","_dimensions","_initDataFromProvider","getProvider","ensureCalculationDimension","calcDimNameToIdx","calcDimIdx","collectOrdinalMeta","ordinalMeta","chunk","rawExtents","ordinalOffset","dimRawExtent","parseAndCollect","getOrdinalMeta","appendValues","values","minFillLen","chunks","dimLen","rawExtent","emptyDataItem","sourceIdx","arrayRows","dimNames","dimStorage","dimStore","getValues","dimArr","rawIdx","getSum","dimData","getMedian","dimDataArray","sortedDimDataArray","rawIndex","indicesOfNearest","maxDistance","nearestIndices","minDist","minDiff","nearestIndicesLen","getIndices","newIndices","thisCount","buffer","dim0","_updateGetRawIdx","selectRange","originalCount","storeArr","quickFinished","dimStorage2","dimk","_updateDims","targetChunks","tmpRetValue","dataCount","retValue","rawExtentOnDim","lttbDownSample","valueDimension","rate","maxArea","area","nextRawIndex","targetStorage","sampledIndex","frameSize","currentRawIndex","nextFrameStart","nextFrameEnd","avgX","avgY","frameStart","frameEnd","pointAX","pointAY","firstNaNIndex","countNaN","_getRawIdx","downSample","dimension","sampleValue","sampleIndex","frameValues","sampleFrameIdx","getDataExtent","initialExtent","currEnd","useRaw","clonedDims","ignoreIndices","clonedDimsMap","_copyCommonProps","_cloneIndices","getDimValueSimply","objectRows","keyedColumns","original","typedArray","SourceManager","sourceHost","_sourceList","_storeList","_upstreamSignList","_versionSignBase","_sourceHost","_setLocalSource","upstreamSignList","_getVersionSign","prepareSource","_isDirty","_createSource","resultSourceList","upSourceMgrList","_getUpstreamSourceManagers","hasUpstream","upSourceMgr","newMetaRawOption","_getSourceMetaRawOption","upMetaRawOption","needsCreateSource","_applyTransform","upMgrList","transformOption","fromTransformResult","doThrow","upMgr","upSrcMgr","sourceIndex","getSharedDataStore","seriesDimRequest","schema","makeStoreSchema","_innerGetDataStore","hash","storeDims","seriesSource","sourceReadKey","storeList","cachedStoreMap","cachedStore","getSourceManager","disableTransformOptionMerge","TOOLTIP_LINE_HEIGHT_CSS","getTooltipTextStyle","nameFontColor","nameFontSize","nameFontWeight","valueFontColor","valueFontSize","valueFontWeight","nameStyle","valueStyle","HTML_GAPS","RICH_TEXT_GAPS","createTooltipMarkup","isSectionFragment","getBuilder","buildSection","buildNameValue","getBlockGapLevel","gapLevel_1","subBlockLen","blocks","hasInnerGap_1","noHeader","subBlock","subGapLevel","fragment","topMarginForOuterGap","toolTipTextStyle","gaps","getGap","subMarkupTextList","subBlocks","orderMode","sortBlocks","orderMap","valueAsc","valueDesc","comparator_1","sortParam","valueFormatter","subMarkupText","html","richText","wrapBlockHTML","displayableHeader","header","wrapInlineNameRichText","noName","noValue","noMarker","markerType","valueTypeOption","markerStr","markupStyleCreator","makeTooltipMarker","markerColor","readableName","readableValueList","valueAlignRight","valueCloseToMarker","wrapInlineValueRichText","wrapInlineNameHTML","wrapInlineValueHTML","buildTooltipMarkup","builder","gapLevel","encodedContent","topGap","clearfix","marginCSS","leftHasMarker","marginCss","alignRight","paddingStr","alignCSS","wrapRichTextStyle","styles","paddingLeft","retrieveVisualColorForTooltipMarker","visualDrawType","getPaddingFromTooltipModel","TooltipMarkupStyleCreator","richTextStyles","_nextStyleNameId","_generateStyleName","finalStl","defaultSeriesFormatTooltip","inlineValue","inlineValueType","tooltipDims","mapDimensionsAll","tooltipDimLen","isValueArr","formatArrResult","formatTooltipArrayValue","inlineValues","inlineValueTypes","seriesNameSpecified","inlineName","isValueMultipleLine","dimItem","setEachItem","otherDims","inner$1","getSelectionKey","getId","SERIES_UNIVERSAL_TRANSITION_PROP","SeriesModel","_selectedDataIndicesMap","dataTask","dataTaskCount","dataTaskReset","sourceManager","getInitialData","wrapData","dataBeforeProcessed","autoSeriesName","_initSelectedMapFromData","themeSubType","fillDataTextStyle","newSeriesOption","task","getCurrentTask","getLinkedData","mainData","getLinkedDataAll","getEncode","getColorBy","isColorBySeries","getBaseAxis","coordDimToDataDim","coordDim","getProgressive","getProgressiveThreshold","innerDataIndices","_innerSelect","unselect","selectedMap","selectedMode","nameOrId","toggleSelect","tmpArr","selectedDataIndicesMap","nameOrIds","isUniversalTransitionEnabled","universalTransitionOpt","universalTransition","lastDataIndex","hasItemOption","ignoreStyleOnData","hasSymbolVisual","defaultSymbol","visualStyleAccessPath","getSeriesAutoName","dataDims","nameArr","dataDim","cloneShallow","dataTaskProgress","CHANGABLE_METHODS","DOWNSAMPLE_METHODS","wrapMethod","onDataChange","scheduler","pipeline","getPipeline","agentStubMap","ComponentView","updateView","updateLayout","updateVisual","seriesModels","isBlur","eachRendered","createRenderPlanner","pipelineContext","originalLarge","large","originalProgressive","progressiveRender","inner$2","renderPlanner","ChartView","renderTask","renderTaskPlan","renderTaskReset","highlight","toggleHighlight","markUpdateMethod","updateMethod","elSetState","progressMethodMap","incrementalPrepareRender","incrementalRender","ORIGIN_METHOD","RATE","THROTTLE_TYPE","throttle","debounce","currCall","debounceNextCall","lastCall","lastExec","timer","cbArgs","thisDelay","thisDebounce","debounceDelay","createOrUpdate","fnAttr","throttleType","originFn","lastThrottleType","lastRate","inner$3","defaultStyleMappers","defaultColorKey","getStyleMapper","stylePath","styleMapper","visualStyleMapper","getDefaultColorKey","colorKey","seriesStyleTask","createOnAllSeries","performRawSeries","styleModel","getStyle","globalStyle","decalOption","setVisual","colorCallback","hasAutoColor","colorPalette","dataEach","dataParams","setItemVisual","sharedModel","dataStyleTask","getVisual","existsStyle","ensureUniqueItemVisual","dataColorPaletteTask","overallReset","paletteScopeGroupByType","colorScope","dataAll","idxMap","fromPalette","PI$3","defaultLoading","textColor","maskColor","showSpinner","spinnerRadius","mask","labelRect","Scheduler","dataProcessorHandlers","visualHandlers","_stageTaskMap","_dataProcessorHandlers","_visualHandlers","_allHandlers","taskRecord","overallTask","getPerformArgs","_pipelineMap","pCtx","progressiveEnabled","__idxInPipeline","blockIndex","pipelineId","updateStreamModes","dataLen","threshold","restorePipelines","pipelineMap","preventIncremental","_pipe","prepareStageTasks","stageTaskMap","record","_createSeriesStageTask","_createOverallStageTask","prepareView","__block","performDataProcessorTasks","_performStageTasks","performVisualTasks","stageHandlers","needSetDirty","setDirty","dirtyMap","stageHandler","visualType","stageHandlerRecord","seriesTaskMap","overallNeedDirty_1","stub","performArgs_1","performSeriesTasks","oldSeriesTaskMap","newSeriesTaskMap","getTargetSeries","seriesTaskPlan","seriesTaskReset","seriesTaskCount","useClearVisual","isVisual","isLayout","overallTaskReset","oldAgentStubMap","newAgentStubMap","overallProgress","shouldOverallTaskDirty","createStub","stubReset","stubOnDirty","agent","wrapStageHandler","detectSeriseType","stubProgress","clearAllVisual","resetDefines","makeSeriesTaskProgress","singleSeriesTaskProgress","resetDefineIdx","resetDefine","legacyFunc","ecModelMock","apiMock","mockMethods","Clz","cond","colorAll","lightTheme","contrastColor","axisCommon","axisLine","splitLine","splitArea","minorSplitLine","crossStyle","subtextStyle","iconStyle","brushStyle","handleStyle","moveHandleStyle","fillerColor","dataBackground","selectedDataBackground","controlStyle","dayLabel","monthLabel","yearLabel","timeAxis","logAxis","valueAxis","categoryAxis","axisLabel","color0","borderColor0","ECEventProcessor","cptQuery","dataQuery","otherQuery","condCptType","suffixes_1","dataKeys_1","reserved","propSuffix","suffixPos","eventInfo","packedEvent","check","filterForExposedEvent","host","propOnHost","SYMBOL_PROPS_WITH_CB","SYMBOL_PROPS","seriesSymbolTask","legendIcon","symbolOptions","symbolOptionsCb","hasCallback","symbolPropName","symbolKeepAspect","symbolPropsCb","dataSymbolTask","getItemVisualFromData","getVisualFromData","createLegacyDataSelectAction","ecRegisterAction","getSeriesIndices","eventsMap","dispatchAction","handleSeriesLegacySelectEvents","eventPostfix","ecIns","legacyEventName","fromActionPayload","handleLegacySelectEvents","messageCenter","isFromClick","fromAction","findEventDispatcher","returnFirstMatch","found","wmUniqueIndex","supportDefineProperty","WeakMap","_id","_guard","enumerable","configurable","has","Triangle","Diamond","Pin","tanX","tanY","cpLen","cpLen2","Arrow","symbolCtors","roundRect","square","circle","diamond","pin","arrow","triangle","symbolShapeMakers","symbolBuildProxies","SymbolClz","symbolType","inBundle","proxySymbol","symbolPathSetColor","symbolStyle","__isEmptyBrush","createSymbol","keepAspect","symbolPath","setColor","normalizeSymbolSize","normalizeSymbolOffset","symbolOffset","isSafeNum","createLinearGradient","canvasGradient","createRadialGradient","getCanvasGradient","isClipPathChanged","prevClipPaths","parseInt10","getSize","whIdx","wh","cwh","plt","prb","defaultView","getComputedStyle","normalizeLineDash","lineType","getLineDash","lineScale_1","pathProxyForDraw","styleHasStroke","isValidStrokeFillStyle","strokeOrFill","styleHasFill","doFillPath","originalGlobalAlpha","globalAlpha","doStrokePath","createCanvasPattern","pattern","canvasPattern","createPattern","repeat","DOMMatrix","setTransform","translateSelf","rotateSelf","scaleSelf","brushPath","strokePart","firstDraw","dirtyFlag","hasFillGradient","hasStrokeGradient","hasFillPattern","hasStrokePattern","fillGradient","strokeGradient","fillPattern","strokePattern","__canvasFillGradient","__canvasStrokeGradient","__canvasFillPattern","__canvasStrokePattern","fillStyle","strokeStyle","setLineDash","needsRebuild","brushImage","drawImage","brushText","strokeText","fillText","SHADOW_NUMBER_PROPS","STROKE_PROPS","bindCommonProps","prevStyle","forceSetAll","flushPathDrawn","globalCompositeOperation","bindPathAndTextCommonStyle","prevEl","newLineWidth","bindImageStyle","setContextTransform","updateClipStatus","allClipped","isTransformChanged","m0","DRAW_TYPE_PATH","DRAW_TYPE_IMAGE","DRAW_TYPE_TEXT","DRAW_TYPE_INCREMENTAL","canPathBatch","batchFill","batchStroke","brushSingle","isLast","__isRendered","prevElClipPaths","forceSetTransform","forceSetStyle","save","canBatchPath","lastDrawType","brushIncremental","temporalDisplayables","innerScope","i_1","len_1","decalMap","decalCache","decalKeys","createOrUpdatePatternFromDecal","decalObject","getDevicePixelRatio","getZr","isSVG","oldPattern","decalOpt","maxTileWidth","maxTileHeight","setPatternnSource","keys$$1","isValidKey","cache","normalizeDashArrayX","normalizeDashArrayY","symbolArray","normalizeSymbolArray","lineBlockLengthsX","getLineBlockLengthX","lineBlockLengthY","getLineBlockLengthY","svgRoot","tag","pSize","getPatternSize","xlen","symbolRepeats","attrName","brushDecal","clearRect","fillRect","ySum","yId","yIdTotal","xId0","symbolYId","xId1","xId1Total","xSum","top_1","symbolXId","brushSymbol","symbolVNode","renderOneToVNode","svgWidth","svgHeight","isAllString","dash","dashValue","isAllNumber","dashValue_1","blockLength","decalVisual","hasItemVisual","lifecycle","implsStore","registerImpl","impl","getImpl","hasWindow","TEST_FRAME_REMAIN_TIME","PRIORITY_PROCESSOR_SERIES_FILTER","PRIORITY_PROCESSOR_DATASTACK","PRIORITY_PROCESSOR_FILTER","PRIORITY_PROCESSOR_DEFAULT","PRIORITY_PROCESSOR_STATISTIC","PRIORITY_VISUAL_LAYOUT","PRIORITY_VISUAL_PROGRESSIVE_LAYOUT","PRIORITY_VISUAL_GLOBAL","PRIORITY_VISUAL_CHART","PRIORITY_VISUAL_COMPONENT","PRIORITY_VISUAL_CHART_DATA_CUSTOM","PRIORITY_VISUAL_POST_CHART_LAYOUT","PRIORITY_VISUAL_BRUSH","PRIORITY_VISUAL_ARIA","PRIORITY_VISUAL_DECAL","PRIORITY","PROCESSOR","FILTER","SERIES_FILTER","STATISTIC","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","GLOBAL","CHART","POST_CHART_LAYOUT","COMPONENT","BRUSH","CHART_ITEM","ARIA","DECAL","IN_MAIN_PROCESS_KEY","PENDING_UPDATE","STATUS_NEEDS_UPDATE_KEY","ACTION_REG","CONNECT_STATUS_KEY","CONNECT_STATUS_PENDING","CONNECT_STATUS_UPDATING","CONNECT_STATUS_UPDATED","createRegisterEventWithLowercaseECharts","isDisposed","toLowercaseNameAndCallEventful","disposedWarning","createRegisterEventWithLowercaseMessageCenter","updateDirectly","updateMethods","doConvertPixel","doDispatchAction","flushPendingActions","triggerUpdatedEvent","bindRenderedEvent","bindMouseEvent","renderComponents","renderSeries","createExtensionAPI","enableConnect","markStatusToUpdate","applyChangedStates","MessageCenter","messageCenterProto","ECharts","theme$$1","_chartsViews","_chartsMap","_componentsViews","_pendingActions","themeStorage","_dom","defaultRenderer","defaultUseDirtyRect","__ECHARTS__DEFAULT__RENDERER__","devUseDirtyRect","__ECHARTS__DEFAULT__USE_DIRTY_RECT__","_zr","_ssr","_throttledZrFlush","_coordSysMgr","prioritySortFunc","__prio","visualFuncs","dataProcessorFuncs","_scheduler","_messageCenter","_initEvents","_onframe","updateParams","remainTime","_model","startTime","getDom","isSSR","notMerge","lazyUpdate","transitionOpt","seriesTransition","setTheme","getRenderedCanvas","renderToCanvas","pixelRatio","renderToSVGString","renderToString","useViewBox","getSvgDataURL","toDataURL","getDataURL","excludeComponents","excludesComponentViews","__viewId","url","getConnectedDataURL","isSvg","groupId","MAX_NUMBER","connectedGroups","left_1","right_1","bottom_1","canvasList_1","dpr_1","instances","chart","getSvgDom","innerHTML","targetCanvas","zr_1","content_1","getSvgRoot","connectedBackgroundColor","convertToPixel","convertFromPixel","containPixel","findResult","containPoint","parsedFinder","MOUSE_EVENT_NAMES","eveName","isGlobalOut","dataModel","eventData","eventActionMap","actionType","DOM_ATTRIBUTE_KEY","_loadingFX","needPrepare","showLoading","hideLoading","loadingEffects","makeActionFromEvent","eventObj","updateLabelLayout","updatedSeries","allocateZlevels","componentZLevels","seriesZLevels","hasSeperateZLevel","zlevelKey","lastSeriesZLevel_1","lastSeriesKey_1","zLevels","applyElementStates","newStates","updateHoverLayerStatus","elCount","preventUsingHoverLayer","chartView","__alive","updateBlend","updateZ","preventAutoZ","doUpdateZ","maxZ2","labelLine","textGuideLineConfig","showAbove","clearStates$$1","prevStates","updateStates","stateAnimationModel","enableAnimation","isComponent","viewList","viewMap","doPrepare","requireNewView","viewId","classType","Clazz","__id","__model","__ecComponentInfo","excludeSeriesIdMap","excludeSeriesId","modelId","isExcluded","notBlur","callView","prepareAndUpdate","coordSysMgr","componentDirtyList","componentView","seriesDirtyMap","coordSysList","chartsMap","escapeConnect","actionWrap","actionInfo","cptTypeTmp","cptType","payloads","batched","batch","eventObjBatch","isSelectChange","isHighDown","batchItem","action","newObj","pendingActions","dirtyList","getComponentByElement","modelInfo","updateConnectedChartsStatus","charts","otherChart","action_1","otherCharts_1","echartsProto","one","wrapped","args2","idBase","groupIdBase","isClient","existInstance","getInstanceByDom","clientWidth","clientHeight","connect","disConnect","disconnect","getInstanceById","registerTheme","registerPreprocessor","preprocessorFunc","registerProcessor","priority","processor","normalizeRegister","registerPostInit","postInitFunc","registerUpdateLifecycle","registerPostUpdate","postUpdateFunc","registerAction","registerCoordinateSystem","coordSysCreator","getCoordinateSystemDimensions","getDimensionsInfo","registerLayout","layoutTask","registerVisual","visualTask","registeredTasks","targetList","defaultPriority","__raw","registerLoading","loadingFx","setCanvasCreator","registerMap","mapName","geoJson","specialAreas","getMap","registerTransform","dataTool","dataIndexMapValueLength","valNumOrArrLengthMoreThan2","defaultKeyGetter","DataDiffer","oldArr","newArr","oldKeyGetter","newKeyGetter","diffMode","_old","_new","_oldKeyGetter","_newKeyGetter","_diffModeMultiple","_add","_update","updateManyToOne","_updateManyToOne","updateOneToMany","_updateOneToMany","updateManyToMany","_updateManyToMany","_remove","execute","_executeOneToOne","newDataIndexMap","oldDataKeyArr","newDataKeyArr","_initIndexMap","oldKey","newIdxMapVal","newIdxMapValLen","newIdx","_performRestAdd","_executeMultiple","oldDataIndexMap","oldIdxMapVal","oldIdxMapValLen","newKey","idxMapValLen","keyArr","keyGetterName","cbModeMultiple","idxMapVal","DimensionUserOuput","dimRequest","_encode","_schema","_getFullDimensionNames","_cachedDimNames","makeOutputDimensionNames","summarizeDimensions","summary","notExtraCoordDimMap","defaultedLabel","defaultedTooltip","userOutputEncode","coordDimIndex","getOrCreateEncodeArr","isExtraCoord","mayLabelDimType","defaultTooltip","encodeArr","dataDimsOnCoord","encodeFirstDimNotExtra","dataDimIndicesOnCoord","storeDimIndex","encodeLabel","encodeTooltip","getDimensionTypeByAxis","axisType","SeriesDimensionDefine","inner$4","dimTypeShort","float","int","ordinal","number","SeriesDataSchema","_dimOmitted","dimensionOmitted","_fullDimCount","fullDimensionCount","_updateDimOmitted","isDimensionOmitted","_dimNameMap","ensureSourceDimNameMap","getSourceDimensionIndex","getSourceDimension","makeHashStrict","shouldOmitUnusedDimensions","dimHash","fullDimIdx","seriesDimIdx","seriesDimDef","sourceDimDef","isCalculationCoord","appendCalculationDimension","isSeriesDataSchema","createDimNameMap","dataDimNameMap","dimDefItemRaw","userDimName","innerSource","dimNameMap","prepareInvertedIndex","getIdNameFromStore","normalizeDimensions","transferProperties","cloneListForMapAndSample","makeIdFromName","isObject$2","map$1","CtorInt32Array$1","ID_PREFIX","INDEX_NOT_FOUND","TRANSFERABLE_PROPERTIES","CLONE_PROPERTIES","SeriesData","dimensionsInput","hostModel","_nameList","_idList","_visual","_layout","_itemVisuals","_itemLayouts","_graphicEls","_approximateExtent","_calculationInfo","TRANSFERABLE_METHODS","assignStoreDimIdx","dimensionInfos","invertedIndicesMap","needsHasOwn","emptyObj","dimInfoInput","dimensionInfo","dimensionName","createInvertedIndices","_nameDimIdx","itemId","_idDimIdx","_dimInfos","_initGetDimensionInfo","_invertedIndicesMap","dimIdxToName_1","_dimIdxToName","getDimension","_recognizeDimIndex","_getDimInfo","_getStoreDimIndex","getDimensionsOnCoord","_dimSummary","mapDimension","dimensionsSummary","_store","nameList","_nameRepeatCount","_doInit","shouldMakeIdFromName","_shouldMakeIdFromName","_updateOrdinalMeta","idList","isFormatOriginal","sharedDataItem","getApproximateExtent","setApproximateExtent","_getCategory","invertedIndices","fCtx","dimIndices","filterSelf","innerRange","mapArray","ctxCompat","otherList","thisList","visual","kvObj","itemVisual","itemVisuals","setLayout","getLayout","getItemLayout","setItemLayout","clearItemLayouts","setItemGraphicEl","injectFunction","originalMethod","__wrappedMethods","nameDimIdx","idDimIdx","nameRepeatCount","nmCnt","createDimensions","prepareSeriesDataSchema","sysDims","coordDimNameMap","getDimCount","dimensionsCount","omitUnusedDimensions","canOmitUnusedDimensions","isUsingSourceDimensionsDef","encodeDef","encodeDefine","encodeDefaulter","encodeDefMap","indicesMap","getResultItem","dataDimsRaw","validDataDims","resultDimIdxOrName","resultDimIdx","applyDim","availDimIdx","sysDimItemRaw","sysDimItemDimsDef","sysDimItemOtherDims","sysDimItem","sysDimItemDimsDefItem","generateCoord","generateCoordCount","fromZero","ifNoNameFillWithCoordName","item0","item1","genCoordDimName","removeDuplication","duplicationMap","dimOriginalName","optDimCount","map$$1","mapData","CoordSysInfo","coordSysName","coordSysDims","axisMap","categoryAxisMap","getCoordSysInfoBySeries","fetch","fetchers","cartesian2d","xAxisModel","yAxisModel","isCategory","firstCategoryDimIndex","singleAxisModel","polarModel","radiusAxisModel","findAxisModel","angleAxisModel","parallelModel","parallelAxisIndex","axisIndex","axisModel","axisDim","enableDataStack","dimensionDefineList","byIndex","stackedCoordDimension","isLegacyDimensionsInput","stackedByDimInfo","stackedDimInfo","mayStack","stackedDimCoordDim_1","stackedDimType","stackedDimCoordIndex_1","stackedOverDimensionDefine","stackResultDimensionDefine","isDimensionStacked","stackedDim","getStackedDimension","targetDim","getCoordSysDimDefs","coordSysInfo","coordSysDimDefs","registeredCoordSys","injectOrdinalMeta","dimInfoList","hasNameEncode","categoryAxisModel","createSeriesData","sourceRaw","isOriginalSource","useEncodeDefaulter","createDimensionOptions","stackCalculationInfo","isNeedCompleteOrdinalData","sampleItem","firstDataNotNull","Scale","setting","_setting","getSetting","unionExtent","unionExtentFromData","getExtent","setExtent","thisExtent","isInExtentRange","isBlank","_isBlank","setBlank","uidBase","OrdinalMeta","_needCollect","needCollect","_deduplication","deduplication","createByAxisModel","dedplication","getOrdinal","category","_getOrCreateMap","isValueNice","isIntervalOrLogScale","intervalScaleNiceTicks","splitNumber","minInterval","maxInterval","span","intervalPrecision","getIntervalPrecision","niceTickExtent","fixExtent","increaseInterval","contain$1","normalize$1","scale$2","OrdinalScale","_ordinalMeta","_getTickNumber","getRawOrdinalNumber","getTicks","ticks","getMinorTicks","setSortInfo","infoOrdinalNumbers","ordinalNumbers","ordinalsByTick","_ordinalNumbersByTick","ticksByOrdinal","_ticksByOrdinalNumber","tickNum","allCategoryLen","ordinalNumber","unusedOrdinal","ticksByOrdinalNumber","tickNumber","ordinalNumbersByTick","getLabel","cateogry","calcNiceTicks","calcNiceExtent","roundNumber","IntervalScale","_interval","_intervalPrecision","getInterval","setInterval","_niceExtent","expandToNicedExtent","safeLimit","lastNiceTick","minorTicks","nextTick","prevTick","minorTicksGroup","minorInterval","minorTick","dataNum","expandSize","fixMax","fixMin","setNiceExtent","supportFloat32Array","Float32ArrayCtor","createFloat32Array","STACK_PREFIX","getSeriesStackId","getAxisKey","prepareLayoutBarSeries","isOnCartesian","getValueAxesMinGaps","barSeries","axisValues","cartesian","baseAxis","cnt","axisMinGaps","valuesInAxis","makeColumnLayout","seriesInfoList","bandWidth","axisExtent","getBandWidth","minGap","extentSpan","scaleSpan","barWidth","barMaxWidth","barMinWidth","isInLargeMode","barGap","barCategoryGap","axisKey","stackId","doCalBarWidthAndOffset","columnsMap","seriesInfo","columnsOnAxis","autoWidthCount","categoryGap","stacks","minWidth","categoryGapPercent","columnCount","barGapPercent","autoWidth","column","finalWidth","lastColumn","widthSum","retrieveColumnLayout","barWidthAndOffset","columnLayoutInfo","columnOffset","columnWidth","createProgressiveLayout","getOtherAxis","valueDimIdx","baseDimIdx","drawBackground","valueDim","stackResultDim","stacked","isValueAxisH","isHorizontal","valueAxisStart","getValueAxisStart","isLarge","barMinHeight","stackedDimIdx","largePoints","largeBackgroundPoints","largeDataIndices","coordLayout","getRect","bgSize","idxOffset","baseValue","baseCoord","dataToPoint","startCoord","valueAxisHorizontal","toGlobalCoord","dataToCoord","bisect","TimeScale","settings","_minLevelUnit","labelFormatter","innerTicks","getIntervalTicks","_approxInterval","approxTickNum","scaleIntervalsLen","scaleIntervals","isUnitValueSame","valueA","valueB","dateA","dateB","isSame","isSameYear","isSameMonth","isSameDay","isSameHour","isSameMinute","isSameSecond","isSameMilliSecond","getDateInterval","approxInterval","daysInMonth","getMonthInterval","APPROX_ONE_MONTH","getHourInterval","getMinutesAndSecondsInterval","isMinutes","getMillisecondsInterval","getFirstTimestampOfUnit","unitName","outDate","bottomUnitName","unitNames","iter","addTicksInSpan","minTimestamp","maxTimestamp","getMethodName","setMethodName","isDate","dateTime","notAdd","addLevelTicks","lastLevelTicks","levelTicks","newAddedTicks","isFirstLevel","startTick","endTick","getterName","setterName","levelsTicks","currentLevelTicks","tickCount","lastLevelTickCount","primaryTimeUnit","nextPrimaryTimeUnit","levelTicksRemoveDuplicated","tickValue","targetTickNum","levelsTicksInExtent","maxLevel","scaleProto","intervalScaleProto","roundingErrorFix","mathFloor","mathCeil","mathPow$1","mathLog","LogScale","_originalScale","originalScale","originalExtent","powVal","_fixMin","fixRoundingError","_fixMax","niceExtent","originalVal","ScaleRawExtentInfo","_prepareParams","_dataMin","_dataMax","isOrdinal","_isOrdinal","_needCrossZero","getNeedCrossZero","modelMinRaw","_modelMinRaw","_modelMinNum","parseAxisModelMinMax","modelMaxRaw","_modelMaxRaw","_modelMaxNum","_axisDataLen","getCategories","boundaryGap","boundaryGapArr","_boundaryGapInner","dataMin","dataMax","axisDataLen","boundaryGapInner","minFixed","maxFixed","determinedMin","_determinedMin","determinedMax","_determinedMax","modifyDataMinMax","minMaxName","frozen","DATA_MIN_MAX_ATTR","setDeterminedMinMax","DETERMINED_MIN_MAX_ATTR","ensureScaleRawExtentInfo","rawExtentInfo","minMax","getScaleExtent","scaleType","rawExtentResult","barSeriesModels","isBaseAxisAndHasBarSeries_1","adjustedScale","adjustScaleForOverflow","axisLength","barsOnCurrentAxis","minOverflow","maxOverflow","totalOverFlow","oldRange","oldRangePercentOfNew","overflowBuffer","niceScaleExtent","inModel","extentInfo","isIntervalOrTime","createScaleByModel","ifAxisCrossZero","makeLabelFormatter","getLabelModel","categoryTickStart","getAxisRawValue","estimateLabelUnionRect","realNumberScaleTicks","categoryScaleExtent","axisLabelModel","unrotatedSingleRect","singleRect","rotateTextRect","textRect","rotateRadians","beforeWidth","beforeHeight","afterWidth","afterHeight","rotatedRect","getOptionCategoryInterval","shouldShowAllLabels","getDataDimensionsOnAxis","dataDimMap","unionAxisExtentFromData","seriesExtent","AxisModelCommonMixin","getCoordSysModel","createList","dataStack$1","createScale","mixinAxisModelCommonMethods","Model$$1","createTextStyle$1","helper","extensions","extensionRegisters","registerComponentModel","registerComponentView","ComponentViewClass","registerSeriesModel","SeriesModelClass","registerChartView","ChartViewClass","painterType","PainterCtor","use","ext","singleExt","install","EPSILON$4","isAroundEqual$1","contain$2","TMP_TRANSFORM","transformPoints","updateBBoxFromPoints","projection","project","centroid","signedArea","Region","setCenter","_center","getCenter","calcCenter","GeoJSONPolygonGeometry","exterior","interiors","GeoJSONLineStringGeometry","GeoJSONRegion","geometries","cp","largestGeo","largestGeoSize","loopGeo","transformTo","interior","newRegion","GeoSVGRegion","elOnlyForCalculate","_elOnlyForCalculate","isGeoSVGGraphicRoot","json","UTF8Encoding","jsonCompressed","encodeScale","UTF8Scale","features","geometry","encodeOffsets","coordinates","decodeRing","decodeRings","rings","coordinate","prevX","prevY","parseGeoJSON","nameProperty","featureObj","region","graphic$1","format$1","util$1","inner$5","createAxisLabels","makeCategoryLabels","makeRealNumberLabels","createAxisTicks","tickModel","makeCategoryTicks","labelModel","makeCategoryLabelsActually","labels","labelCategoryInterval","numericLabelInterval","labelsCache","getListCache","optionLabelInterval","listCacheGet","makeLabelsByCustomizedCategoryInterval","makeAutoCategoryInterval","makeLabelsByNumericCategoryInterval","listCacheSet","tickCategoryInterval","ticksCache","optionTickInterval","labelsResult","labelItem","formattedLabel","rawLabel","autoInterval","calculateCategoryInterval","fetchAutoCategoryIntervalCalculationParams","axisRotate","ordinalScale","ordinalExtent","unitSpan","unitW","unitH","maxW","maxH","dw","dh","lastAutoInterval","lastTickCount","axisExtent0","axisExtent1","getRotate","categoryInterval","onlyTick","showAllLabel","includeMinLabel","includeMaxLabel","addItem","tickObj","NORMALIZED_EXTENT","Axis","onBand","containData","fixExtentWithBands","coordToData","pointToData","getTicksCoords","getTickModel","ticksCoords","tickVal","alignWithLabel","fixOnBandTicksCoords","getMinorTicksCoords","minorTickModel","minorTicksCoords","getViewLabels","nTick","ticksLen","diffSize","crossLen","shift_1","ticksItem","extendComponentModel","extendComponentView","View","extendSeriesModel","extendChartView","PI2$6","CMD$3","DEFAULT_SEARCH_SPACE","getCandidateAnchor","distance$$1","outPt","outDir","projectPointToArc","projectPointToLine","limitToEnds","lineLen","projectedLen","projectPointToRect","tmpPt","nearestPointOnRect","pt","dist$$1","nearestPointOnPath","pt0","pt1","pt2","dir2","updateLabelLinePoints","labelLineModel","labelGuideConfig","searchSpace","candidates","anchorPoint","anchor","targetTransform","targetInversedTransform","candidate","limitTurnAngle","tmpProjPoint","linePoints","minTurnAngle","angleCos","minTurnAngleCos","limitSurfaceAngle","surfaceNormal","maxSurfaceAngle","maxSurfaceAngleCos","HALF_PI","angle2","newAngle","setLabelLineState","isNormal","styleObj","buildLabelLinePath","moveLen","midPoint0","midPoint2","midPoint1","setLabelLineStyle","labelIgnoreNormal","isLabelIgnored","labelLineConfig","getLabelLineStatesModels","labelLineName","prepareLayoutList","defaultAttr","localRect","isAxisAligned","minMargin","globalRect","obb","layoutOption","computedLayoutOption","axisAligned","shiftLayout","xyDim","sizeDim","minBound","maxBound","balanceShift","lastPos","adjusted","shifts","totalShifts","shiftList","maxGap","first","updateMinMaxGap","squeezeGaps","takeBoundsGap","squeezeWhenBailout","gapThisBound","gapOtherBound","moveDir","moveFromMaxGap","remained","maxSqeezePercent","totalGaps","prevItemRect","squeezePercent","movement","moveForEachLabel","shiftLayoutOnX","leftBound","rightBound","shiftLayoutOnY","topBound","bottomBound","hideOverlap","labelList","displayedLabels","hideEl","emphasisState","existsTextCfg","labelGuideIgnore","cloneArr","newPoints","prepareLayoutCallbackParams","hostRect","labelLinePoints","LABEL_OPTION_TO_STYLE_KEYS","dummyTransformable","labelLayoutInnerStore","labelLineAnimationStore","extendWithKeys","LABEL_LAYOUT_PROPS","LabelManager","_labelList","_chartViewList","clearLabels","_addLabel","labelStyle","labelTransform","labelGuide","attachedPos","attachedRot","addLabelsOfSeries","disableLabelLayout","updateLayoutConfig","createDragHandler","defaultLabelAttr","degreeToRadian","needsUpdateLabelLine","labelLayoutStore","labelsNeedsAdjustOnX","moveOverlap","labelsNeedsAdjustOnY","labelsNeedsHideOverlap","processLabelsOverall","ignoreLabelLineUpdate","forceLabelAnimation","_updateLabelLine","_animateLabels","visualStyle","disableLabelAnimation","layoutStore","oldLayout","newProps","oldLayoutSelect","oldLayoutEmphasis","oldOpacity","layoutSelect","layoutEmphasis","newLayout","getLabelManager","installLabelLayout","registers","labelManager","createDom","newDom","newDomStyle","Layer","motionBlur","lastFrameAlpha","virtual","maxRepaintRectCount","__firstTimePaint","__used","__drawIndex","__startIndex","__endIndex","__prevStartIndex","__prevEndIndex","onselectstart","getElementCount","initContext","setUnpainted","createBackBuffer","domBack","ctxBack","createRepaintRects","prevList","hasIntersections","mergedRepaintRects","full","pendingRect","addRectToMergePool","isMerged","minDeltaArea","bestRectToMergeIdx","mergedRect","pendingRect_1","aArea","bArea","pendingArea","deltaArea","shouldPaint","prevRect","curRect","_paintRects","debugGetPaintRects","clearAll","clearColor","repaintRects","haveMotionBLur","doClear","clearColorGradientOrPattern","__canvasGradient","__painter","HOVER_LAYER_ZLEVEL","CANVAS_ZLEVEL","EL_AFTER_INCREMENTAL_INC","INCREMENTAL_INC","isLayerValid","__builtin__","createRoot","domRoot","CanvasPainter","_zlevelList","_prevDisplayList","_layers","_layerConfig","_needsManuallyCompositing","singleCanvas","_opts","_singleCanvas","rootStyle","zlevelList","layers","rootCanvas","_width","_height","mainLayer","_domRoot","isSingleCanvas","getViewportRootOffset","viewportRoot","paintAll","_redrawId","_paintList","_paintHoverList","_hoverlayer","getLayer","getHoverLayer","paintOne","redrawId","_updateLayerStatus","_doPaintList","needsRefreshHover","_compositeManually","eachLayer","self_1","eachBuiltinLayer","layerList","zi","_loop_1","this_1","useTimer","now","firstEl","repaint","repaintRect","_doPaintEl","dTime","draw","currentLayer","insertLayer","layersMap","prevLayer","prevDom","insertBefore","firstChild","getLayers","updatePrevLayer","prevZlevel","incrementalLayerCount","_clearLayer","layerConfig","_zlevel","delLayer","removeChild","display","clearLayer","imageLayer","width_1","height_1","DatasetModel","_sourceManager","DatasetView","install$1","samplers","average","nearest","indexSampler","dataSample","sampling","sampler","BaseBarSeriesModel","getMarkerPosition","clampData","offsetIndex","legendHoverLink","barMinAngle","largeThreshold","progressiveChunkMode","BarSeriesModel","brushSelector","selectors","roundCap","showBackground","realtimeSort","createGridClipPath","hasAnimation","getArea","isAxisInversed","duringCb","createPolarClipPath","sectorArea","isRadial","createClipPath","SausageShape","SausagePath","dr","rCenter","lessThanCircle","unitStartX","unitStartY","unitEndX","unitEndY","isCoordinateSystemType","getDefaultLabel","labelDims","vals","getDefaultInterpolatedLabel","createSectorCalculateTextPosition","positionMapping","isRoundCap","mappedSectorPosition","sector","middleR","middleAngle","extraDist","adjustAngleDistanceX","adjustAngleDistanceY","setSectorTextRotation","rotateType","anchorAngle","isEnd","mathMax$5","mathMin$5","getClipArea","coordSysClipArea","expandWidth","BarView","_isFirstFrame","_removeOnRenderedListener","_updateDrawMode","coordinateSystemType","_progressiveEls","_isLargeDraw","_renderLarge","_renderNormal","_clear","_updateLargeClip","_incrementalRenderLarge","isLargeDraw","isHorizontalOrRadial","oldData","animationModel","realtimeSortCfg","shouldRealtimeSort","_enableRealtimeSort","needsClip","backgroundModel","barBorderRadius","bgEls","oldBgEls","_backgroundEls","isInitSort","isChangeOrder","createBackground","bgLayout","bgEl","createBackgroundEl","isValidLayout","isClipped","elementCreator","updateStyle","updateRealtimeAnimation","newIndex","oldIndex","createBackgroundShape","bgGroup","_backgroundGroup","createLarge","_removeBackground","_dispatchInitSort","orderMapping_1","_onRendered","_updateSortWithinSameData","_dataSort","orderMapping","mappedValue","_isOrderChangedWithinSameData","ordinalDataDim","MIN_VALUE","_isOrderDifferentInView","orderInfo","tickMax","sortInfo","axisId","sortResult","otherAxis","coordSysBoundingRect","signWidth","signHeight","coordSysX2","coordSysY2","xClipped","yClipped","signR","clipped","__dataIndex","animateProperty","positionMap","createPolarPositionMapping","sectorShape","animateTarget","realtimeSortOption","seriesAnimationModel","seriesTarget","axisTarget","axisAnimationModel","checkPropertiesNotValid","rectPropties","polarPropties","fixedLineWidth","getLineWidth","signX","signY","isZeroOnPolar","arcOrAngle","isPolar","labelPositionOutside","emphasisModel","rawLayout","LagePathShape","LargePath","startPoint","progressiveEls","bgPoints","largePathUpdateDataIndex","largePath","largePathFindDataIndex","ElementClz","install$2","setCategorySortInfo","LineSeriesModel","getLegendIcon","itemHeight","itemWidth","visualRotate","symbolRotate","iconRotate","endLabel","smoothMonotone","showSymbol","showAllSymbol","connectNulls","divideShape","triggerLineEvent","Symbol$1","Symbol","seriesScope","updateData","_createSymbol","driftSymbol","_symbolType","stopSymbolAnimation","toLastFrame","getSymbolType","getSymbolPath","setZ","setDraggable","hasCursorOption","getSymbolSize","disableAnimation","_updateCommon","_sizeX","_sizeY","emphasisItemStyle","blurItemStyle","selectItemStyle","emphasisDisabled","hoverScale","visualColor","pathStyle","symbolInnerColor","liftZ","z2Origin","_z2","useNameLabel","getLabelDefaultText","scaleRatio","setSymbolScale","fadeOut","animationOpt","fadeLabel","symbolNeedsDraw","isIgnore","clipShape","normalizeUpdateOpt","makeSeriesScope","SymbolDraw","SymbolCtor","_SymbolCtor","symbolUpdateOpt","getSymbolPoint","symbolEl","oldIdx","newSymbolType","oldSymbolType","_getSymbolPoint","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","prepareDataCoordInfo","valueOrigin","valueStart","getValueStart","baseAxisDim","valueAxisDim","baseDim","baseDataOffset","dataDimsForPoint","getStackedOnPoint","dataCoordInfo","stackedData","diffData","diffResult","idx1","lineAnimationDiff","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","newValueOrigin","currPoints","nextPoints","currStackedPoints","nextStackedPoints","sortedIndices","rawIndices","newDataOldCoordInfo","oldPoints","diffItem","pointAdded","oldIdx2","newIdx2","currentX","currentY","newDataDimsForPoint","oldPt","stackedOnPoint","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","i2","idx2","stackedOnCurrent","stackedOnNext","mathMin$6","mathMax$6","isPointNull$1","drawSegment","segLen","allLen","cpx0","cpy0","tmpK","ratioNextSeg","nextCpx0","nextCpy0","lenPrevSeg","lenNextSeg","dir_1","dir_2","ECPolylineShape","ECPolyline","getPointOn","xOrY","isDimX","nRoot","t_1","ECPolygonShape","ECPolygon","stackedOnPoints","stackedOnSmooth","isPointsSame","points1","points2","bboxFromPoints","minX","minY","getBoundingDiff","min1","max1","getSmooth","getStackedOnPoints","turnPointsIntoStep","stepTurnAt","baseIndex","stepPoints","stepPt","nextPt","filteredPoints","stepPt2","clipColorStops","prevOutOfRangeColorStop","prevInRangeColorStop","newColorStops","lerpStop","stop0","stop1","clippedCoord","coord0","stop_1","getVisualGradient","visualMetaList","visualMeta","getAxis","stops","stopLen","outerColors","colorStopsInRange","inRangeStopLen","tinyExtent","minCoord","maxCoord","coordSpan","gradient","getIsIgnoreFunc","isAuto","getAxesByScale","canShowAllSymbolForCategory","categoryDataDim","labelMap","availSize","isPointNull","getLastIndexNotNull","getPointAtIndex","getIndexRange","prevIndex","nextIndex","anyStateShowEndLabel","createLineClipPath","lineView","endLabelModel_1","valueAnimation_1","data_1","labelAnimationRecord_1","lastFrameIndex","clipRect","_endLabelOnDuring","_endLabel","originalX","originalY","getEndLabelStateSpecified","endLabelModel","isBaseInversed","LineView","lineGroup","symbolDraw","_symbolDraw","_lineGroup","lineStyleModel","areaStyleModel","isCoordSysPolar","prevCoordSys","_coordSys","polyline","_polyline","_polygon","isAreaChart","isIgnoreFunc","__temp","clipShapeForSymbol","_clipShapeForSymbol","_step","_newPolygon","_initOrUpdateEndLabel","oldClipPath","newClipPath","_stackedOnPoints","_points","_doUpdateAnimation","_initSymbolLabelAnimation","_newPolyline","lineJoin","emphasisLineStyle","stackedOnSeries","changePolyState","_changePolyState","_valueOrigin","packEventData","symbolLabel","isAxisInverse","seriesDuration","seriesDalay","seriesDalayValue","polarClip","pointToCoord","gridClip","ratio","data_2","animationRecord","distanceX","distanceY","dataIndexRange","endValue","__points","updatedDataInfo","diffStatus","ptIdx","pointsLayout","forceStoreInTypedArray","useTypedArray","dimIdx0","dimIdx1","tmpIn","tmpOut","install$3","PI2$7","RADIAN","getViewRect","getBasicPieLayout","pieLayout","minAngle","validDataCount","unitRadian","roseType","stillShowZeroSum","restAngle","valueSumLargerThanMinAngle","currentAngle","angle_1","layout_1","layout_2","dataFilter","legendModels","RADIAN$1","adjustSingleSide","viewLeft","viewTop","farthestX","labelAlignTo","recalculateX","recalculateXOnSemiToAlignOnEllipseCurve","semi","rB","rB2","rA","rA2","newX","newTargetWidth","targetTextWidth","constrainTextWidth","items","topSemi","bottomSemi","avoidOverlap","labelLayoutList","leftList","rightList","leftmostX","rightmostX","isPositionCenter","labelStyleWidth","bleedMargin","isAlignToEdge","extraPaddingH","realTextWidth","availableWidth","forceRecalculate","bgColor","oldOuterWidth","oldHeight","innerRect","availableInnerWidth","newWidth","unconstrainedWidth","newRect","pieLabelLayout","hasLabelRotate","minShowLabelRadian","setNotShow","isLabelShown","labelLineLen","labelLineLen2","midAngle","isLabelInside","radialAngle","isDown","notShowLabel","getSectorCornerRadius","zeroIfNull","PiePiece","firstCreate","_updateLabel","visualOpacity","PieView","_emptyCircleSector","piePiece","itemLayout","createSeriesDataSimply","LegendVisualProvider","getDataWithEncodedVisual","_getDataWithEncodedVisual","_getRawData","getAllNames","containName","dataWithEncodedVisual","PieSeriesModel","legendVisualProvider","_defaultLabelLine","labelLineNormalOpt","labelLineEmphasisOpt","minShowLabelAngle","selectedOffset","percentPrecision","distanceToLabelLine","borderJoin","showEmptyCircle","emptyCircleStyle","labelLayout","avoidLabelOverlap","animationTypeUpdate","negativeDataFilter","curValue","install$4","ScatterSeriesModel","BOOST_SIZE_THRESHOLD","LargeSymbolPathShape","LargeSymbolPath","_off","hoverDataIdx","symbolProxy","symbolProxyShape","canBoost","softClipShape","findDataIndex","LargeSymbolDraw","_create","_setCommon","endIndex","byteOffset","lastAdded","_newAdded","extrudeShadow","ScatterView","_updateSymbolDraw","_getClipShape","clipArea","GridModel","containLabel","CartesianAxisModel","nameLocation","nameRotate","nameTruncate","nameTextStyle","triggerEvent","onZero","onZeroAxisIndex","axisTick","showMinLabel","showMaxLabel","primary","logBase","axisDefault","AXIS_TYPES","axisModelCreator","BaseAxisModelClass","extraDefaultOption","AxisModel","getAxisType","thisOption","__ordinalMeta","Cartesian","_dimList","getAxes","addAxis","cartesian2DDimensions","canCalculateAffineTransform","scale$$1","Cartesian2D","calcAffineTransform","_transform","_invTransform","xAxisScale","yAxisScale","xScaleExtent","yScaleExtent","xScaleSpan","yScaleSpan","translateX","translateY","axisX","axisY","toLocalCoord","containZone","data1","data2","zoneDiag1","zoneDiag2","zone","xVal","yVal","xScale","yScale","xAxisExtent","yAxisExtent","xExtent","getGlobalExtent","yExtent","Axis2D","coordExtent","categorySortInfo","layout$1","gridModel","otherAxisOnZeroOf","getAxesOnZeroOf","rawAxisPosition","axisPosition","rectBound","axisOffset","posBound","onZeroCoord","dirMap","labelDirection","tickDirection","nameDirection","labelInside","isCartesian2DSeries","findAxisModels","axisModelMap","mathLog$1","alignScaleTicks","alignToScale","alignToTicks","alignToNicedTicks","alignToSplitNumber","alignToInterval","scaleExtent","isMinFixed","isMaxFixed","nicedSplitNumber","t0","Grid","_coordsMap","_coordsList","_axesMap","_axesList","axisPointerEnabled","_initCartesian","axesMap","updateAxisTicks","axesIndices","axisNeedsAlign","_updateScale","onZeroRecords","fixAxisOnZero","ignoreContainLabel","boxLayoutParams","isContainLabel","gridRect","axesList","adjustAxes","updateAxisTransform","labelUnionRect","axesMapOnDim","getCartesian","xAxisIndex","yAxisIndex","coordList","getCartesians","_findConvertTarget","coordsList","axisPositionUsed","axesCount","createAxisCreator","isAxisUsedInTheGrid","axesModelMap","getTooltipAxes","baseAxes","otherAxes","grids","otherAxisDim","canOnZeroToAxis","getOnZeroRecordKey","coordBase","axisExtentSum","PI$4","AxisBuilder","handleAutoShown","transformGroup","_transformGroup","hasBuilder","builders","getGroup","innerTextLayout","axisRotation","textRotation","rotationDiff","makeAxisEventDataBase","isLabelSilent","tooltipOpt","shown","arrows","arrowSize","arrowOffset","symbolWidth_1","symbolHeight_1","axisTickLabel","ticksEls","buildAxisMajorTicks","labelEls","buildAxisLabel","fixMinMaxLabelShow","buildAxisMinorTicks","axisNameAvailableWidth","gapSignal","isNameLocationCenter","nameRotation","endTextLayout","truncateOpt","nameTruncateMaxWidth","__fullText","targetType","textRotate","onLeft","tickEls","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","lastTick","ignoreEl","isTwoLabelOverlapped","firstRect","nextRect","mRotationBack","createTicks","tickTransform","tickEndCoord","tickLineStyle","anidPrefix","tickCoord","tickEl","minorTickLineStyle","minorTicksEls","axisLabelShow","labelMargin","labelRotation","rawCategoryData","itemLabelModel","rawCategoryItem","tickIndex","collect","axesInfo","seriesInvolved","coordSysAxesInfo","coordSysMap","collectAxesInfo","collectSeriesInfo","globalTooltipModel","globalAxisPointerModel","linksOption","linkGroups","coordSysKey","makeKey","axesInfoInCoordSys","coordSysModel","baseTooltipModel","saveTooltipAxisInfo","triggerAxis","cross","tooltipAxes","fromTooltip","triggerTooltip","axisPointerModel","axisPointerShow","isHandleTrigger","makeAxisPointerModel","snap","involveSeries","axisInfo","useHandle","linkGroup","groupIndex","getLinkGroupIndex","mapper","tooltipAxisPointerModel","volatileOption","field","labelOption","tooltipAxisPointerLabelShow","seriesTooltipTrigger","seriesTooltipShow","seriesDataCount","linkOption","checkPropInLink","linkPropValue","axisPropValue","fixValue","getAxisInfo","getAxisPointerModel","axisPointerClazz","AxisView","axisPointerClass","_doUpdateAxisPointerClass","updateAxisPointer","_axisPointer","_disposeAxisPointer","forceRender","getAxisPointerClass","registerAxisPointerClass","inner$6","rectCoordAxisBuildSplitArea","axisView","axisGroup","splitAreaModel","areaColors","areaColorsLen","lastSplitAreaColors","splitAreaColors","newSplitAreaColors","colorIndex","cIndex","rectCoordAxisHandleRemove","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","_axisGroup","axisBuilder","elementType","cartesians","axisElementBuilders","isInitialSortFromBarRacing","splitLineModel","lineColors","minorSplitLineModel","CartesianXAxisView","CartesianYAxisView","GridView","extraOption","install$6","install$5","TitleModel","subtext","subtarget","itemGap","TitleView","titleModel","subtextStyleModel","subText","subTextEl","sublink","groupRect","alignStyle","install$7","getDefaultSelectorOptions","LegendModel","_updateSelector","_updateData","legendData","hasSelected","potentialData","availableNames","isPotential","_availableNames","unSelect","toggleSelected","allSelect","inverseSelect","getOrient","inactiveColor","inactiveBorderColor","inactiveBorderWidth","borderCap","borderMiterLimit","inactiveWidth","cap","dashOffset","selectorLabel","selectorPosition","selectorItemGap","selectorButtonGap","layout$2","viewportSize","makeBackground","curry$1","each$3","Group$2","LegendView","newlineDisabled","_contentGroup","_selectorGroup","_isFirstRender","getContentGroup","getSelectorGroup","legendModel","isFirstRender","resetInner","itemAlign","renderInner","mainRect","layoutInner","_backgroundEl","contentGroup","legendDrawnMap","selectMode","legendItemModel","lineVisualStyle","itemGroup","_createItem","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","_createSelector","selectorGroup","selectorItem","onclick","emphasisLabelModel","itemVisualStyle","drawType","legendIconType","getLegendStyle","getDefaultLegendIcon","icon","hitRect","tooltipModel","__legendDataIndex","contentRect","contentPos","selectorRect","selectorPos","orientIdx","hw","yx","iconType","handleCommonProps","propVal","itemStyleModel","iconBrushType","decalStyle","legendLineModel","visualHasBorder","symboType","dataName","isUseHoverLayer","legendFilter","legendSelectActionHandler","isToggleSelect","isItemSelected","installLegendAction","install$9","ScrollableLegendModel","setScrollDataIndex","scrollDataIndex","mergeAndNormalizeLayoutParams","pageButtonItemGap","pageButtonGap","pageButtonPosition","pageFormatter","pageIcons","horizontal","vertical","pageIconColor","pageIconInactiveColor","pageIconSize","pageTextStyle","raw","Group$3","WH","XY","ScrollableLegendView","_currentIndex","_containerGroup","_controllerGroup","__rectSize","controllerGroup","pageIconSizeArr","createPageButton","pageTextStyleModel","iconIdx","pageDataIndexName","_pageGo","xy","processMaxSize","_layoutContentAndController","containerGroup","controllerRect","showController","_showController","containerPos","controllerPos","pageInfo","_getPageInfo","pageIndex","contentPosition","_updatePageInfoView","legendId","canJump","pageText","pageCount","containerRectSize","targetItemIndex","_findTargetItemIndex","targetItem","itemCount","pCount","pagePrevDataIndex","pageNextDataIndex","targetItemInfo","getItemInfo","winStartItemInfo","winEndItemInfo","currItemInfo","itemRect","itemInfo","winStart","targetDataIndex","defaultIndex","legendDataIdx","installScrollableLegendAction","install$8","inner$7","clone$3","bind$1","BaseAxisPointer","_dragging","_axisModel","_axisPointerModel","_lastValue","_lastStatus","_group","handle","_handle","elOption","makeElOption","graphicKey","_lastGraphicKey","moveAnimation","_moveAnimation","determineAnimation","doUpdateProps","updateProps$1","updatePointerEl","updateLabelEl","createPointerEl","createLabelEl","updateMandatoryProps","_renderHandle","isCategoryAxis","useSnap","pointerOption","pointerEl","labelEl","updateLabelShowHide","updateProps$$1","updateHandleTransform","handleModel","onmousemove","onmousedown","_onHandleDragMove","ondragend","_onHandleDragEnd","handleSize","_moveHandleToValue","getHandleTransProps","getHandleTransform","trans","_payloadInfo","lastProp","_doDispatchAxisPointer","payloadInfo","cursorPoint","tooltipOption","buildLabel","xDimIndex","propsEqual","lastProps","equals_1","buildElStyle","axisPointerType","buildLabelElOption","labelPos","getValueLabel","paddings","confineInContainer","seriesDataIndices","params_1","axisDimension","seriesData","idxItem","getTransformedPosition","layoutInfo","buildCartesianSingleLabelElOption","textLayout","makeLineShape","makeRectShape","CartesianAxisPointer","otherExtent","pixelValue","elStyle","pointerShapeBuilder","currPosition","cursorOtherValue","tooltipOptions","getAxisDimIndex","shadow","AxisPointerModel","shadowStyle","inner$8","each$4","records","initGlobalListeners","useHandler","dis","makeDispatchAction","dispatchTooltipFinally","pendings","initialized","doEnter","onLeave","actuallyPayload","showLen","showTip","hideLen","hideTip","currTrigger","unregister","AxisPointerView","triggerOn","findPointFromSeries","getTooltipPosition","isStacked","inner$9","axisTrigger","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","outputPayload","showValueMap","dataByCoordSys","updaters","showPointer","showTooltip","coordSysContainsPoint","inputAxisInfo","findInputAxisInfo","processOnAxis","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","noSnap","outputFinder","buildPayloadsBySeries","payloadBatch","snapToValue","seriesNestestValue","getAxisTooltipData","nestestValue","coordSysItem","coordSysId","coordSysIndex","coordSysType","coordSysMainType","dataByAxis","valueLabelOpt","outputAxesInfo","valItem","highDownKey","lastHighlights","newHighlights","toHighlight","toDownplay","install$11","TooltipModel","showContent","alwaysShowContent","displayMode","confine","showDelay","hideDelay","transitionDuration","enterable","shouldTooltipConfine","confineOption","testStyle","styleProps","TRANSFORM_VENDOR","TRANSITION_VENDOR","toCSSVendorPrefix","styleVendor","styleProp","currentStyle","CSS_TRANSITION_VENDOR","CSS_TRANSFORM_VENDOR","gCssText","mirrorPos","assembleArrow","arrowPosition","rotateDeg","arrowPos","positionStyle","transformStyle","rotateRadian","arrowWH","rotatedWH","SQRT2","borderStyle","styleCss","assembleTransition","onlyFade","transitionCurve","transitionOption","transitionText","assembleTransform","is3d","assembleFont","assembleCssText","enableTransition","boxShadow","borderName","camelCase","makeStyleCoord","appendToBody","zrPainter","zrViewportRoot","body","viewportRootOffset","TooltipHTMLContent","_show","_styleCoord","_enterable","_firstShow","_longHide","_appendToBody","_container","onmouseenter","_hideTimeout","_inContent","onmouseleave","hideLater","_hideDelay","_moveIfResized","className","nearPointColor","_longHideTimeout","styleCoord","setContent","childNodes","arrowEl","setEnterable","offsetWidth","offsetHeight","style_1","transforms","ratioX","ratioY","visibility","willChange","isShow","TooltipRichContent","makeStyleCoord$1","bounding","shadowOuterSize","calcShadowOuterSize","mathMaxWith0","proxyRect","TooltipView","_renderMode","_tooltipContent","_tooltipModel","_ecModel","_alwaysShowContent","tooltipContent","_initGlobalListener","_keepShow","_tryShow","_hide","_lastX","_lastY","_refreshUpdateTimeout","manuallyShowTip","_lastDataByCoordSys","makeDispatchAction$1","_ticket","cmptRef","findComponentReference","positionDefault","_manuallyAxisShowTip","pointInfo","manuallyHideTip","tooltipCascadedModel","buildTooltipModel","_showAxisTooltip","seriesDispatcher_1","cmptDispatcher_1","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","_showTimout","singleTooltipModel","cbParamsList","articleMarkup","markupTextArrLegacy","itemCoordSys","axisItem","axisValue","axisValueLabel","axisSectionMarkup","cbParams","seriesTooltipResult","positionExpr","builtMarkupText","blockBreak","allMarkupText","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","tooltipTrigger","asyncTicket","tooltipModelCascade","subTooltipModel","defaultHtml","nearPoint","_getNearestPoint","params0","isTimeAxis","cbTicket","tooltipDataParams","contentSize","vAlign","viewSize","boxLayoutPosition","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","lastCbParamsList","_cbParamsList","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","lastIndices","lastIdxItem","newIdxItem","lastCbParams","modelCascade","defaultTooltipOption","resultModel","gapH","gapV","domWidth","domHeight","rectWidth","rectHeight","subEl","install$10","DATA_ZOOM_AXIS_DIMENSIONS","SERIES_COORDS","isCoordSupported","coordType","getAxisMainType","findEffectedDataZooms","foundNewLink","axisRecords","effectedModels","effectedModelMap","dataZoomModel","addToEffected","processSingle","isLinked","markAxisControlled","isLink","eachTargetAxis","axisIdxArr","collectReferCoordSysModelInfo","coordSysInfoWrap","infoList","infoMap","coordSysUid","axisModels","DataZoomAxisInfo","indexList","indexMap","axisCmptIdx","DataZoomModel","_autoThrottle","_noTarget","_rangePropMode","inputRawOption","retrieveRawOption","settledOption","_setDefaultThrottle","_updateRangeUse","_resetTarget","optionOrient","targetAxisIndexMap","_targetAxisInfoMap","hasAxisSpecified","_fillSpecifiedTargetAxis","_orient","_makeAutoOrientByTargetAxis","_fillAutoTargetAxisByOrient","refering","needAuto","setParallelAxis","gridModel_1","axModel","globalOption","rangePropMode","rangeModeInOption","percentSpecified","valueSpecified","noTarget","getFirstTargetAxisModel","firstAxisModel","getAxisProxy","getAxisModel","__dzAxisProxy","setRawRange","setCalculatedRange","getPercentRange","axisProxy","findRepresentativeAxisProxy","getDataPercentWindow","getValueRange","getDataValueWindow","firstProxy","axisDimList","hostedBy","getRangePropMode","filterMode","InsideZoomModel","disabled","zoomLock","zoomOnMouseWheel","moveOnMouseMove","moveOnMouseWheel","preventDefaultMouseMove","DataZoomView","sliderMove","handleEnds","handleIndex","minSpan","maxSpan","restrict","handleSpan","originalDistSign","getSpanSign","currDistSign","extentMinSpan","realExtent","ATTR","take","resourceKey","userKey","release","uKey","isTaken","RoamController","mousedownHandler","_mousedownHandler","mousemoveHandler","_mousemoveHandler","mouseupHandler","_mouseupHandler","mousewheelHandler","_mousewheelHandler","pinchHandler","_pinchHandler","controlType","_opt","isDragging","isPinching","_pinching","setPointerChecker","pointerChecker","isAvailableBehavior","oldX","oldY","newY","shouldZoom","shouldMove","absWheelDeltaDelta","factor","checkPointerAndTrigger","absDelta","scrollDelta","controller","behaviorToCheck","contollerEvent","inner$10","setViewInfoToCoordSysRecord","getRange","coordSysRecordMap","coordSysRecord","dzInfo","dataZoomInfoMap","disposeCoordSysRecordIfNeeded","coordSysKeyArr","dzUid","disposeCoordSysRecord","createCoordSysRecord","containsPoint","dzReferCoordSysInfo","dataZoomId","mergeControllerParams","typePriority","dataZoomInfo","oneType","installDataZoomRoamProcessor","apiInner","dzReferCoordSysWrap","dzCoordSysInfo","firstDzInfo","firstDzKey","controllerParams","InsideZoomView","pan","getRangeHandlers","scrollMove","lastRange","directionInfo","getDirectionInfo","percentPoint","signal","pixelStart","pixelLength","pixel","minMaxSpan","getMinMaxSpan","makeMover","getPercentDelta","percentDelta","oldPoint","newPoint","radiusExtent","getRadiusAxis","angleExtent","getAngleAxis","each$5","asc$1","AxisProxy","_dimName","_axisIndex","_dataZoomModel","_valueWindow","_percentWindow","getTargetSeriesModels","axisMainType","_minMaxSpan","calculateDataWindow","hasPropModeValue","_dataExtent","percentExtent","percentWindow","valueWindow","boundPercent","boundValue","spans","restrictSet","fromWindow","toWindow","fromExtent","toExtent","toValue","suffix","targetSeries","calculateDataExtent","_updateMinMaxSpan","dataWindow","_setAxisModel","filterData","store_1","dataDimIndices_1","leftOut","rightOut","thisHasValue","thisLeftOut","thisRightOut","isInWindow","percentSpan","valueSpan","dataZoomProcessor","eachAxisModel","proxyList","seriesModelMap","percentRange","valueRange","installDataZoomAction","installed","installCommon","install$13","SliderZoomModel","handleIcon","moveHandleSize","moveHandleIcon","showDetail","showDataShadow","realtime","brushSelect","Rect$2","DEFAULT_LOCATION_EDGE_GAP","DEFAULT_FRAME_BORDER_WIDTH","DEFAULT_FILLER_SIZE","DEFAULT_MOVE_HANDLE_SIZE","HORIZONTAL","VERTICAL","LABEL_GAP","SHOW_DATA_SHADOW_SERIES_TYPE","REALTIME_ANIMATION_CONFIG","SliderZoomView","_onBrush","_onBrushEnd","_buildView","_updateView","thisGroup","_brushing","brushRect","_resetLocation","_resetInterval","barGroup","sliderGroup","_renderDataShadow","_positionGroup","showMoveHandle","coordRect","_findCoordRect","ecSize","layoutParams","_location","_size","targetAxisModel","otherAxisInverse","_dataShadowInfo","_getViewExtent","clickPanel","_onClickPanel","_onBrushStart","_prepareDataShadowInfo","dataShadowSegs","oldSize","_shadowSize","getShadowDim","polygonPts","_shadowPolygonPts","polylinePts","_shadowPolylinePts","_shadowData","_shadowDim","otherDataExtent_1","otherOffset","lastIsEmpty_1","otherShadowExtent_1","thisShadowExtent","areaPoints_1","linePoints_1","step_1","thisCoord_1","stride_1","otherCoord","createDataShadowGroup","isSelectedArea","thisAxis","getOtherDim","thisDim","handles","handleLabels","filler","_onDragMove","_onDragEnd","onmouseover","_showDataInfo","onmouseout","bRect","_handleHeight","_handleWidth","handleColor","actualMoveZone","moveHandleHeight","moveHandle_1","moveHandle","iconSize","moveZoneExpandSize","moveZone","ondragstart","_range","viewExtent","_handleEnds","_updateInterval","viewExtend","nonRealtime","displaybles","handleInterval","handleHeight","segIntervals","segGroup","_updateDataInfo","dataInterval","_formatLabel","orderedHandleEnds","setLabel","barTransform","textPoint","labelPrecision","valueStr","showOrHide","changed","_dispatchZoomAction","localPoint","_brushStart","_brushStartTime","brushShape","brushEndTime","_updateBrushRect","mouseX","mouseY","brushStart","endPoint","coordSysInfoList","install$14","install$12","SelectDataZoomModel","SelectDataZoomView","install$16","ToolboxFeature","registerFeature","getFeature","ToolboxModel","featureName","Feature","itemSize","showTitle","ToolboxView","toolboxModel","isVertical","featureOpts","_features","featureNames","_featureNames","processFeature","titleText","__title","emphasisTextConfig","emphasisTextState","emphasisTextStyle","needPutOnTop","topOffset","featureModel","newTitle","isUserFeatureName","isToolboxFeature","unusable","createIconPaths","setIconStatus","iconName","iconPaths","iconStatus","iconsMap","titlesMap","iconStyleModel","iconStyleEmphasisModel","icons","getIcons","titles","pathEmphasisState","hoverStyle","defaultTextPosition","SaveAsImage","MouseEvent","$a","download","evt","bubbles","cancelable","dispatchEvent","msSaveOrOpenBlob","base64Encoded","bstr","filename","u8arr","Uint8Array","blob","Blob","cw","contentWindow","doc","write","execCommand","tab","INNER_STACK_KEYWORD","radioTypes","MagicType","availableIcons","seriesOptGenreator","generateNewSeriesTypes","newSeriesOpt","radio","currentType","isStack","BLOCK_SPLITER","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","assembleSeriesWithCategoryAxis","groups","tables","headers","columns","assembleOtherSeries","getContentFromModel","trim$1","isTSVFormat","firstLine","itemSplitRegex","RegExp","parseTSVContents","tsv","tsvLines","parseListContents","hasName","parseContents","blockMetaList","blockMeta","DataView","viewMain","textarea","optionToContent","contentToOption","htmlOrDom","readOnly","buttonContainer","buttonStyle","closeButton","refreshButton","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","tryMergeDataOption","originalData","newVal","newValIsObject","shouldDeleteName","newSeriesOptList","each$6","inner$11","newSnapshot","storedSnapshots","getStoreSnapshots","snapshot","clear$1","snapshots","RestoreOption","BRUSH_PANEL_GLOBAL","mathMin$7","mathMax$7","mathPow$2","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","CURSOR_MAP","ne","sw","nw","se","DEFAULT_BRUSH_OPT","transformable","brushMode","removeOnClick","baseUID","BrushController","_covers","_handlers","_uid","pointerHandlers","enableBrush","brushOption","_mounted","_brushType","_doDisableBrush","brushType","_doEnableBrush","_enableGlobalPan","_brushOption","setPanels","panelOpts","panels_1","_panels","panelId","enableGlobalPan","updateCovers","coverConfigList","coverConfig","tmpIdPrefix","oldCovers","newCovers","creatingCover","_creatingCover","oldGetKey","getKey","addOrUpdate","cover","__brushOption","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","unmount","clearCovers","coverRenderers","coverRenderer","getCoverRenderer","updateCoverShape","updateCommon","getPanelByPoint","localCursorPoint","panel","panels","pn","isTargetByCursor","getPanelByCover","covers","originalLength","trigger$1","areas","shouldShowCover","getTrackEnds","createBaseRectCover","rectRangeConverter","edgeNameSequences","makeStyle","driftRect","nameSequence","updateBaseRect","localRange","xa","ya","x2a","y2a","widtha","heighta","updateRectShape","mainEl","globalDir","getGlobalDirection1","getGlobalDirection2","pointsToRect","clipByPanel","formatRectRange","getTransform$1","localDirName","inverseMap","localDirNameSeq","dirNameSequence","rectRange","toRectRange","localDelta","toLocalDelta","dirName","ind","fromRectRange","driftPolygon","localD","localZero","xmin","ymin","xmax","ymax","resetCursor","isOutsideZrArea","currPanel","rawE","mainShapeContain","updateCoverByMouse","eventParams","_creatingPanel","thisBrushOption","determineBrushType","coverBrushOption","getCreatingRange","defaultBrushType","handleDragEnd","getLineRenderer","returnInput","localTrack","ends","xyIndex","getLinearBrushOtherExtent","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetCoordSysModel","makeRectPanelClipPath","normalizeRect","localPoints","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","makeRectIsTargetByCursor","targetModel","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","_targetInfoList","foundCpts","parseFinder$1","targetInfoBuilders","include","setOutputRanges","matchOutputRanges","coordRange","coordRanges","coordConvert","__rangeOffset","diffProcessor","xyMinMax","findTargetInfo","coordSyses","setInputRanges","rangeOffset","getScales","makePanelOpts","getDefaultBrushType","getPanelRect","controlSeries","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","panelRectBuilders","xAxisDeclared","yAxisDeclared","geoModels","geoModel","axisConvert","rangeOrCoordRange","xminymin","xmaxymax","axisNameIndex","axisDiffProcessor","refer","scales","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","getSize$1","sizeOrigin","each$7","DATA_ZOOM_ID_BASE","DataZoomFeature","_brushController","updateZoomBtnStatus","updateBackBtnStatus","handlers","eventParam","brushTargetManager","makeAxisFinder","setBatch","findDataZoom","minValueSpan","maxValueSpan","dzModel","nextActive","_isZoomActive","dataZoomSelectActive","dzFeatureModel","xAxisId","yAxisId","zoomActive","install$15","featureDataZoomPath","dzOptions","finderResult","buildInternalOptions","axisIndexPropName","$fromToolbox","mathSin$4","mathCos$4","PI$5","PI2$8","degree","SVGPathRebuilder","_start","_d","_str","_p","dThetaPositive","isCircle","unifiedTheta","xRot","dTheta_1","generateStr","getStr","NONE","mathRound$1","pathHasFill","pathHasStroke","strokeProps","svgStrokeProps","mapStyleToAttrs","updateAttr","strokeScale","strokeWidth","SVGNS","XLINKNS","XMLNS","XML_NAMESPACE","createElementNS","createVNode","createElementOpen","attrsStr","part","createElementClose","vNodeToString","convertElToString","getCssString","selectorNodes","animationNodes","bracketBegin","bracketEnd","animations","animationName","createBrushScope","zrId","shadowCache","patternCache","gradientCache","clipPathCache","defs","cssNodes","cssAnims","cssClassIdx","cssAnimIdx","shadowIdx","gradientIdx","patternIdx","clipPathIdx","createSVGVNode","EASING_MAP","transformOriginKey","buildPathString","kfShape","svgPathBuilder","setTransformOrigin","ANIMATE_STYLE_MAP","addAnimation","cssAnim","createCompoundPathCSSAnimation","cssAnimationCfg","cssAnimationName","composedAnim","subScope","createCSSAnimation","animNames","lastAnim","getEasingFunc","onlyShape","cssAnimations","groupAnimators","cfgArr","createSingleCSSAnimation","groupAnimator","transformKfs","shapeKfs","finalKfs","animationTimingFunctionAttrName","saveAnimatorTrackToCssKfs","cssKfs","toCssAttrName","kfEasing","timingFunction","canAnimateShape","newLen","transformOrigin","percents","allTransformOriginSame","round$2","isImageLike$1","isCanvasLike","setStyleAttrs","isFillStroke","setGradient","setPattern","setShadow","noRotateScale","noTranslate","compress","convertPolyShape","strArr","validatePolyShape","createAttrsConvert","desc","normalizedDesc","buitinShapesDef","hasShapeAnimation","brushSVGPath","builtinShpDef","svgElType","willUpdate","pathVersion","elExt","__svgPathBuilder","__svgPathVersion","__svgPathStrokePercent","brushSVGImage","brushSVGTSpan","separatedFontStr","brush$1","shadowKey","shadowId","blur_1","stdDx","stdDy","stdDeviation","gradientTag","gradientAttrs","stopColor","stopsAttrs","gradientVNode","gradientKey","gradientId","patternAttrs","imageWidth_1","imageWidth","imageHeight_1","imageHeight","imageSrc","patternImage","setSizeToVNode_1","vNode","svgEl","elm","createdImage","patternVNode","patternTransform","patternKey","patternId","clipPathId","clipPathAttrs","createTextNode","newNode","referenceNode","colonChar","xChar","emptyNode","isUndef","isDef","createKeyToOldIdx","beginIdx","endIdx","sameVnode","vnode1","vnode2","isSameKey","isSameTag","createElm","vnode","updateAttrs","addVnodes","parentElm","before","vnodes","startIdx","removeVnodes","oldVnode","oldAttrs","cur","removeAttribute","setAttributeNS","updateChildren","oldCh","newCh","oldKeyToIdx","idxInOld","elmToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","patchVnode","patch","parent_2","svgId","SVGPainter","createMethodNotSupport","_oldVNode","viewport","_viewport","svgDom","_svgDom","renderToVNode","_bgVNode","mainVNode","_mainVNode","animationCssStr","styleNode","cssAnimation","bgVNode","currentClipPathGroup","listLen","clipPathsGroupsStack","clipPathsGroupsStackDepth","clipGroupNodeIdx","prevLen","lca","i_2","groupAttrs","viewportStyle","base64","zrUtil","List","parseGeoJson","innerDrawElementOnCanvas","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","deferred","O","chunkIds","notFulfilled","every","__esModule","definition","chunkId","Promise","promises","miniCssF","globalThis","inProgress","dataWebpackPrefix","script","needAttach","scripts","getElementsByTagName","charset","timeout","nc","onScriptComplete","doneFns","toStringTag","createStylesheet","fullhref","resolve","reject","linkTag","rel","onLinkComplete","errorType","realHref","request","findStylesheet","existingLinkTags","dataHref","existingStyleTags","loadStylesheet","installedCssChunks","miniCss","cssChunks","then","installedChunks","installedChunkData","promise","loadingEnded","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}